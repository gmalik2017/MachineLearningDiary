issue_id,username,display_name,created_date,created_date_zoned,message
MRM-436,oching,Maria Odea Ching,2007-08-13T21:08:00.854Z,2007-08-13T21:08:00.854Z,"Assuming that I don't have archiva.xml in ~/.m2/, so the one in $ARCHIVA_BASE$/conf/ (which initially just contains an empty <configuration/>) is used..

The default-archiva.xml has '0 0,30 0 * * ?' as the default cron expression for the snapshots repository. But it becomes '0 0' when displayed in the repositories page in archiva-webapp. When I updated the snapshots repository config and set the cron expression to '0 0,30 0 * * ?', I saw that there became two cron expression entries in its configuration in archiva.xml <refreshCronExpression>0 0</refreshCronExpression> and <refreshCronExpression>30 0 * * ?</refreshCronExpression>.  Although this is the case, the cron expression displayed in the webapp is still corrent, which is '0 0,30 0 * * ?'.

I suspect that the RegistryReader and RegistryWriter handles it as a special case when a ',' (comma) is recognized. 

There are two ways to approach this:
1. Set the default expression for the snapshots repo to be the same as for the releases
2. Set 2 <refreshCronExpression> values in default-archiva.xml for the snapshots repository <refreshCronExpression>0 0</refreshCronExpression>  and <refreshCronExpression>30 0 * * ?</refreshCronExpression>.

I'll do the first one for now as this was what has been suggested above :)

"
MRM-436,brettporter,Brett Porter,2007-08-13T21:12:05.197Z,2007-08-13T21:12:05.197Z,"oh good catch. You are right, the registry reader thinks it is a list (which it shouldn't do if the type isn't a list...)

I think we need to make it possible to store the commas, either by fixing the registry reader, or escaping it in some way before interacting with the registry in the configuration."
MRM-436,oching,Maria Odea Ching,2007-08-17T02:02:40.202Z,2007-08-17T02:02:40.202Z,"Fixed in -r566945

Fix:
- Added '\' for the snapshots cron expression in default-archiva.xml to escape the ',' 
- (DefaultArchivaConfiguration) Added method for adding '\' to the cron expression if ',' exists before saving the configuration and method for 
removing '\' after the configuration is read from the configuration file


"
MRM-421,wsmoak,Wendy Smoak,2007-06-22T23:07:57.624Z,2007-06-22T23:07:57.624Z,fixed in r550008
MRM-415,joakime,Joakim Erdfelt,2007-06-17T16:56:53.091Z,2007-06-17T16:56:53.091Z,"Some more details...

{code}
NestedThrowables:
com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: Specified key was too long; max key length is 765 bytes
        at org.jpox.store.rdbms.RDBMSManager$ClassAdder.addClassTablesAndValidate(RDBMSManager.java:3330)
        at org.jpox.store.rdbms.RDBMSManager$ClassAdder.run(RDBMSManager.java:2554)
        at org.jpox.store.rdbms.RDBMSManager$MgmtTransaction.execute(RDBMSManager.java:2406)
        at org.jpox.store.rdbms.RDBMSManager.addClasses(RDBMSManager.java:821)
        at org.jpox.store.rdbms.RDBMSManager.addClass(RDBMSManager.java:835)
        at org.jpox.AbstractPersistenceManager.newObjectIdInstance(AbstractPersistenceManager.java:2377)
        at org.apache.maven.archiva.database.jdo.JdoAccess.getObjectById(JdoAccess.java:428)
        ... 55 more
Caused by: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: Specified key was too long; max key length is 765 bytes
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2870)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1573)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1665)
        at com.mysql.jdbc.Connection.execSQL(Connection.java:3170)
        at com.mysql.jdbc.Connection.execSQL(Connection.java:3099)
        at com.mysql.jdbc.Statement.execute(Statement.java:695)
        at org.jpox.store.rdbms.table.AbstractTable.executeDdlStatement(AbstractTable.java:614)
        at org.jpox.store.rdbms.table.AbstractTable.executeDdlStatementList(AbstractTable.java:570)
        at org.jpox.store.rdbms.table.AbstractTable.create(AbstractTable.java:297)
        at org.jpox.store.rdbms.table.AbstractTable.exists(AbstractTable.java:341)
        at org.jpox.store.rdbms.RDBMSManager$ClassAdder.performTablesValidation(RDBMSManager.java:3052)
        at org.jpox.store.rdbms.RDBMSManager$ClassAdder.addClassTablesAndValidate(RDBMSManager.java:3313)
        ... 61 more
{code}"
MRM-415,joakime,Joakim Erdfelt,2007-06-17T16:57:22.999Z,2007-06-17T16:57:22.999Z,Going through and setting the stash.maxsize on all of the keys in the database
MRM-415,joakime,Joakim Erdfelt,2007-06-17T18:30:39.409Z,2007-06-17T18:30:39.409Z,Fixed in trunk.
MRM-485,oching,Maria Odea Ching,2007-08-27T20:33:34.541Z,2007-08-27T20:33:34.541Z,"Issue already fixed in trunk.. please see MRM-374.
The fix will be included in beta-2 release :)"
MRM-485,oching,Maria Odea Ching,2007-08-28T01:11:57.583Z,2007-08-28T01:11:57.583Z,Changed resolution to Duplicate (MRM-374)
MRM-488,joakime,Joakim Erdfelt,2007-09-24T13:38:15.81Z,2007-09-24T13:38:15.81Z,This jira and MRM-487 are related.
MRM-488,joakime,Joakim Erdfelt,2007-09-28T18:27:35.492Z,2007-09-28T18:27:35.492Z,Fixed in archiva/trunk revision 580514.
MRM-431,sotretus,Andres Bernasconi,2007-07-10T13:12:35.547Z,2007-07-10T13:12:35.547Z,"Here is the wget for the request 

C:\Data\dev\tools\wget>wget -S http://trn-esv1:8080/archiva/repository/internal/xml-security/xmlsec/1.3.0/xmlsec-1.3.0.pom
--15:12:04--  http://trn-esv1:8080/archiva/repository/internal/xml-security/xmlsec/1.3.0/xmlsec-1.3.0.pom => `xmlsec-1.3.0.pom'
Connecting to trn-esv1:8080... connected!
HTTP request sent, awaiting response... 404 Not Found
2 Date: Tue, 10 Jul 2007 18:10:27 GMT
3 Server: Jetty/5.1.10 (Windows 2003/5.2 x86 java/1.5.0_05
4 DAV: 1
5 MS-Author-Via: DAV
6 Content-Type: text/html; charset=""UTF-8""
7 Connection: close
8
15:12:17 ERROR 404: Not Found.

"
MRM-431,sotretus,Andres Bernasconi,2007-07-10T13:32:25.968Z,2007-07-10T13:32:25.968Z,"And here is the wrapper log from Archiva

{code}
jvm 1    | 2007-07-10 15:31:00,122 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Attempting connector: ProxyConn
ector[
jvm 1    |   source:ArchivaRepository[internal,file://${appserver.home}/reposito
ries/internal]
jvm 1    |   target:ArchivaRepository[central,http://repo1.maven.org/maven2]
jvm 1    |   proxyId:SMG Proxy
jvm 1    |   policy[releases]:once
jvm 1    |   policy[checksum]:fix
jvm 1    |   policy[snapshots]:disabled
jvm 1    |   policy[cache-failures]:ignored
jvm 1    | ]
jvm 1    | 2007-07-10 15:31:00,122 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Using target repository: centra
l - layout: default - targetPath: xml-security/xmlsec/1.3.0/xmlsec-1.3.0.pom
jvm 1    | 2007-07-10 15:31:00,122 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Applying [releases] policy with
 [once]
jvm 1    | 2007-07-10 15:31:00,122 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.policies.PreDownloadPolicy:releases  - OK to update releases, local file d
oes not exist.
jvm 1    | 2007-07-10 15:31:00,122 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Applying [snapshots] policy wit
h [disabled]
jvm 1    | 2007-07-10 15:31:00,122 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.policies.PreDownloadPolicy:snapshots  - OK to update, snapshot policy does
 not apply for non-snapshot versions.
jvm 1    | 2007-07-10 15:31:00,122 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Applying [cache-failures] polic
y with [ignored]
jvm 1    | 2007-07-10 15:31:00,122 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.policies.PreDownloadPolicy:cache-failures  - OK to fetch, check-failures p
olicy set to IGNORED.
jvm 1    | 2007-07-10 15:31:00,122 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Retrieving xml-security/xmlsec/
1.3.0/xmlsec-1.3.0.pom from Central Repository if updated
jvm 1    | 2007-07-10 15:31:00,934 [SocketListener0-0] WARN  org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Resource does not exist: Unable
 to locate resource in repository
jvm 1    | 2007-07-10 15:31:00,934 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Attempting connector: ProxyConn
ector[
jvm 1    |   source:ArchivaRepository[internal,file://${appserver.home}/reposito
ries/internal]
jvm 1    |   target:ArchivaRepository[maven2-repository.dev.java.net,http://down
load.java.net/maven/2/]
jvm 1    |   proxyId:SMG Proxy
jvm 1    |   policy[releases]:once
jvm 1    |   policy[checksum]:fix
jvm 1    |   policy[snapshots]:disabled
jvm 1    |   policy[cache-failures]:ignored
jvm 1    | ]
jvm 1    | 2007-07-10 15:31:00,934 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Using target repository: maven2
-repository.dev.java.net - layout: default - targetPath: xml-security/xmlsec/1.3
.0/xmlsec-1.3.0.pom
jvm 1    | 2007-07-10 15:31:00,934 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Applying [releases] policy with
 [once]
jvm 1    | 2007-07-10 15:31:00,934 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.policies.PreDownloadPolicy:releases  - OK to update releases, local file d
oes not exist.
jvm 1    | 2007-07-10 15:31:00,934 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Applying [snapshots] policy wit
h [disabled]
jvm 1    | 2007-07-10 15:31:00,934 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.policies.PreDownloadPolicy:snapshots  - OK to update, snapshot policy does
 not apply for non-snapshot versions.
jvm 1    | 2007-07-10 15:31:00,934 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Applying [cache-failures] polic
y with [ignored]
jvm 1    | 2007-07-10 15:31:00,934 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.policies.PreDownloadPolicy:cache-failures  - OK to fetch, check-failures p
olicy set to IGNORED.
jvm 1    | 2007-07-10 15:31:00,934 [SocketListener0-0] DEBUG org.apache.maven.ar
chiva.proxy.RepositoryProxyConnectors:default  - Path [xml-security/xmlsec/1.3.0
/xmlsec-1.3.0.pom] is not part of defined whitelist (skipping transfer).

{code}"
MRM-431,sotretus,Andres Bernasconi,2007-07-10T14:06:10.622Z,2007-07-10T14:06:10.622Z,There was a problem with the DNS of the Firewall. Now fixed.
MRM-402,joakime,Joakim Erdfelt,2007-06-21T12:30:26.852Z,2007-06-21T12:30:26.852Z,"Attached image of what happens.

The list of links in this example link to the following artifacts ...

* daytrader-ejb-2.0-SNAPSHOT.jar
* daytrader-ejb-2.0-SNAPSHOT.pom
* daytrader-ejb-2.0-SNAPSHOT-client.jar
* daytrader-ejb-2.0-SNAPSHOT-javadoc.jar
* daytrader-ejb-2.0-SNAPSHOT-sources.jar

I think it should show the following instead.

| *Jar* | | _(size-kb)_ |
| *Pom* | | _(size-kb)_ |
| *Jar* | Client | _(size-kb)_ |
| *Jar* | Javadoc | _(size-kb)_ |
| *Jar* | Source | _(size-kb)_ |

What do you think?"
MRM-402,deki,Dennis Kieselhorst,2008-10-28T06:22:40.295Z,2008-10-28T06:22:40.295Z,"Seems to be fixed, see screenshot in MRM-989."
MRM-402,brettporter,Brett Porter,2009-12-21T05:23:32.455Z,2009-12-21T05:23:32.455Z,fixed for some time
MRM-456,brettporter,Brett Porter,2007-08-07T04:00:25.327Z,2007-08-07T04:00:25.327Z,"I think I will really need to change this to allow multiple sources, but fail if both contain items that are lists (repositories, scanners, etc).
"
MRM-493,joakime,Joakim Erdfelt,2007-10-10T18:37:20.724Z,2007-10-10T18:37:20.724Z,MRM-518 has been marked as a duplicate of this issue.
MRM-493,joakime,Joakim Erdfelt,2007-10-10T18:53:07.254Z,2007-10-10T18:53:07.254Z,"Confirmed as still a problem in archiva/trunk.
This is configuration listener issue somewhere in ...
* RepositoryServlet (or)
* RepositoryContentFactory (or)
* DefaultRepositoryProxyConnectors (or)
* RepositoryContentConsumers"
MRM-493,joakime,Joakim Erdfelt,2007-10-10T19:33:35.766Z,2007-10-10T19:33:35.766Z,Fixed in archiva/trunk revision 583646.
MRM-452,brettporter,Brett Porter,2007-08-05T01:04:06.134Z,2007-08-05T01:04:06.134Z,"this may not be a major issue, since the database/index scans should detect the deleted artifacts the next time around anyway..."
MRM-408,brettporter,Brett Porter,2007-07-31T08:27:04.249Z,2007-07-31T08:27:04.249Z,seen this too - a major nuisance!
MRM-408,brettporter,Brett Porter,2007-08-09T09:31:19.9Z,2007-08-09T09:31:19.9Z,I will take a look at this
MRM-408,axismundi,Marc Lustig,2009-07-30T06:08:27.195Z,2009-07-30T06:08:27.195Z,"I still get this error using Archiva 1.2.1

Uploading: http://archiva.muc.company/repository/banksnapshots/de/company/bank/2.0.1-SNAPSHOT/bank-2.0.1-20090730.110000-1.pom
[HUDSON] Archiving /opt/continuum/work06/.hudson/jobs/Bank-trunk/workspace/trunk/pom.xml to /opt/continuum/work06/.hudson/jobs/Bank-trunk/modules/de.company.bank$azbank/builds/2009-07-30_12-59-46/archive/de.company.bank/bank/2.0.1-SNAPSHOT/pom.xml
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error deploying artifact: Failed to transfer file: http://archiva.muc.company/repository/banksnapshots/de/company/bank/bank/2.0.1-SNAPSHOT/bank-2.0.1-20090730.110000-1.pom. Return code is: 409 Conflict
"
MRM-408,brettporter,Brett Porter,2009-07-30T06:12:30.811Z,2009-07-30T06:12:30.811Z,"Marc, can you open a new issue (just link back to this one). Please let us know what wagon/maven version you are using as well"
MRM-408,axismundi,Marc Lustig,2009-07-30T06:22:31.941Z,2009-07-30T06:22:31.941Z,"I could resolve this by setting correct file permissions.
Still, this is not an adequate response of Archiva, it does not meet thre W3C requirements for the 409-response: ""The response body SHOULD include enough information for the user to recognize the source of the conflict"""
MRM-416,oching,Maria Odea Ching,2007-06-21T04:40:45.181Z,2007-06-21T04:40:45.181Z,"The database must be updated (to run index-artifact consumer) so that the artifact checksums are added in the index. Currently, there are 2 ways to do this:
1. Manually execute this (Database --> click Update Database Now)
2. Wait for it to be executed through the schedule

Is it possible to do this if we hook it up to automatically execute right after a repository scan is performed (even for just those manually triggered repository scans) ?
Thoughts anyone?"
MRM-416,joakime,Joakim Erdfelt,2007-06-21T12:22:14.271Z,2007-06-21T12:22:14.271Z,"Actually ...

We can use the database contents in ArchivaArtifact to search for the checksums for MD5 and SHA1.
That data is up to date.

We should change this search from the old way of using Lucene to just using the database (as it's intended)."
MRM-416,oching,Maria Odea Ching,2007-06-22T07:03:36.572Z,2007-06-22T07:03:36.572Z,"Fixed in -r549792

Fix was:
- Added DatabaseSearch class for querying from the database (This could be used for future database queries so there is only one entry point for all 
db queries)
- Added ArtifactsByChecksumConstraint to be used for querying artifacts by checksum (either sha1, md5 or both)
- Updated ""artifact"" result of findArtifact action in xwork.xml
- Updated SearchAction to find an artifact (using checksums) in the database instead of in the indices
- Updated results.jsp to accomodate when the results came from the database instead of the SearchResults that is for index searching
- Deleted ArtifactsBySha1Constraint and its test, replaced by ArtifactsByChecksumConstraint
- Created tests for the new classes added

Please verify.. thanks :)
"
MRM-416,wsmoak,Wendy Smoak,2007-06-24T20:24:40.692Z,2007-06-24T20:24:40.692Z,"Based on the date this was resolved and svn history, it must be included in1.0-alpha-2."
MRM-428,brettporter,Brett Porter,2007-08-03T02:44:33.039Z,2007-08-03T02:44:33.039Z,"scheduling for beta-2 since this is nether a feature or a blocker.

I'd like to do a more general configuration/admin review as there are plenty of other similar problems."
MRM-428,joakime,Joakim Erdfelt,2007-10-01T17:29:23.106Z,2007-10-01T17:29:23.106Z,"Closing jira, as recent changes to the repository admin/config screens now prevents this from occuring."
MRM-471,oching,Maria Odea Ching,2007-08-13T06:02:51.867Z,2007-08-13T06:02:51.867Z,"Added in -r565307 with the following changes:
- Created a consumer for discovering new artifacts in the repository being scanned.
- Added a ReadMe.txt file that contains instructions on how to plugin a component in Archiva

To do:
- Needs to be tested
"
MRM-471,oching,Maria Odea Ching,2007-08-13T06:05:52.996Z,2007-08-13T06:05:52.996Z,"Btw, the project is available at http://svn.apache.org/repos/asf/maven/sandbox/trunk/archiva/archiva-consumer-plugin"
MRM-471,oching,Maria Odea Ching,2007-08-14T06:30:06.219Z,2007-08-14T06:30:06.219Z,"Fixed in -r565706

- Added feature for dumping the new artifacts into a file.
- I also tested this component"
MRM-433,matgodle,Mathieu Godlewski,2007-07-17T09:09:24.532Z,2007-07-17T09:09:24.532Z,"It doesn't seem possible to access artifacts with .xml.zip extension.
When I try accessing the following artefact in a browser:
http://MYARCHIVA:9995/archiva/repository/internal/org/andromda/metafacades/andromda-metafacades-uml/3.2/andromda-metafacades-uml-3.2.xml.zip

I've got the following stack :
it.could.webdav.DAVException: Not found
	at org.codehaus.plexus.webdav.simple.ReplacementGetMethod.process(ReplacementGetMethod.java:92)
	at it.could.webdav.DAVProcessor.process(DAVProcessor.java:79)
	at org.codehaus.plexus.webdav.simple.SimpleDavServerComponent.process(SimpleDavServerComponent.java:152)
	at org.apache.maven.archiva.web.repository.ProxiedDavServer.process(ProxiedDavServer.java:138)

But nothing in the archiva logs (no remote repositories are checked, neither archiva policies).

I try some other file type and here my conclusions:
With any simple extension, Archiva checks the remote repositories.
With any double extension, Archiva fails instantaneously.

Adding ""**/*.xml.zip"" pattern in artifact file types doesn't solve the issue."
MRM-453,oching,Maria Odea Ching,2007-08-26T04:42:58.62Z,2007-08-26T04:42:58.62Z,"Initial commit -r569789:
- Added tests for RepositoryConsumer and CleanupReleasedSnapshotsRepositoryPurge
- Added test data for the new tests
- Refactored AbstractRepositoryPurgeTest, DaysOldRepositoryPurgeTest and RetentionCountRepositoryPurgeTest


To follow:
- days old test (metadata-driven snapshots)"
MRM-453,oching,Maria Odea Ching,2007-08-27T07:30:03.064Z,2007-08-27T07:30:03.064Z,"Final fix -r570089

Fix for the test cases:
- Added tests for metadata driven snapshots in DaysOldRepositoryPurgeTest
- Added test data

Changes made in DaysOldRepositoryPurge:
- Added functionality to consider the metadata driven snapshots (check the timestamp in the filename first before the last modified date of the 
file if it is a unique versioned snapshot)
"
MRM-420,fabemn,Fabrice Bellingard,2007-06-22T05:09:56.137Z,2007-06-22T05:09:56.137Z,"The attribute ""disabled"" of the proxy.id input field is set to true when editing, which causes the value of this field not to be sent back to the server when submitting the form."
MRM-420,fabemn,Fabrice Bellingard,2007-06-22T07:00:58.563Z,2007-06-22T07:00:58.563Z,Fixed on trunk.
MRM-442,oching,Maria Odea Ching,2007-08-13T06:55:59.953Z,2007-08-13T06:55:59.953Z,Duplicated by MRM-407
MRM-403,joakime,Joakim Erdfelt,2007-06-21T13:23:27.944Z,2007-06-21T13:23:27.944Z,Fixed in trunk.
MRM-424,wsmoak,Wendy Smoak,2007-06-22T19:29:09.129Z,2007-06-22T19:29:09.129Z,"Changed to apache-archiva-$version for the filename, but was unable to get -src into the directory name inside the source distro."
MRM-469,joakime,Joakim Erdfelt,2007-09-24T13:23:06.642Z,2007-09-24T13:23:06.642Z,Do not use JDK 1.6
MRM-444,joakime,Joakim Erdfelt,2007-10-02T13:20:04.059Z,2007-10-02T13:20:04.059Z,"Brett's commit on 574859 increased the delta to 20000 ms.
"
MRM-417,joakime,Joakim Erdfelt,2007-06-20T14:28:24.466Z,2007-06-20T14:28:24.466Z,"Under archiva 1.0-alpha-2 i get the following ...

h4. Get Request

{noformat}
GET /archiva/repository/internal/org/apache/maven/maven-parent/5/ HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.1.4) Gecko/20060601 Firefox/2.0.0.4 (Ubuntu-edgy)
Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Connection: keep-alive
Referer: http://localhost:8080/archiva/repository/internal/org/apache/maven/maven-parent/
Cookie: JSESSIONID=6fm8tmboihcfe; rbkRememberMe=55ba27e74a224f849eb1ce109bf8173e; rbkSignon=562b8a4dd0904a0c84060ad472c3e5e0
Authorization: Basic YWRtaW46Ym9iMQ==
{noformat}

h4. Get Response

{noformat}
HTTP/1.x 200 OK
Date: Wed, 20 Jun 2007 19:26:20 GMT
Server: Jetty/5.1.10 (Linux/2.6.17-10-server i386 java/1.5.0_08
DAV: 1
MS-Author-Via: DAV
Content-Type: text/html ;charset=""UTF-8""
Etag: ""636C5B52201B3432D1CEB6A9B2ECE331-7AFEB923-00000112E8E0C238""
Last-Modified: Fri, 01 Jun 2007 20:01:23 GMT
Transfer-Encoding: chunked
{noformat}"
MRM-417,joakime,Joakim Erdfelt,2007-06-20T14:29:13.57Z,2007-06-20T14:29:13.57Z,"I suspect that the following bit in the HTTP Response is the culprit.

{noformat}
Content-Type: text/html ;charset=""UTF-8""
{noformat}

The extra space before the ';' isn't supposed to be there."
MRM-417,joakime,Joakim Erdfelt,2007-06-20T14:42:36.402Z,2007-06-20T14:42:36.402Z,"As seen in Archiva 0.9 ...

h4. Get Request

{noformat}
GET /archiva/repository/internal/org/apache/maven/maven-parent/5/ HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.1.4) Gecko/20060601 Firefox/2.0.0.4 (Ubuntu-edgy)
Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Connection: keep-alive
Referer: http://localhost:8080/archiva/repository/internal/org/apache/maven/maven-parent/
Cookie: JSESSIONID=a1nn6bf1h3k30; rbkRememberMe=b575e7059b4646929f4f2d67597e4ecc; rbkSignon=6f1e8ff0467841f6a901a32cc0e007b7
Authorization: Basic YWRtaW46Ym9iMQ==
Pragma: no-cache
Cache-Control: no-cache
{noformat}

h4. Get Response

{noformat}
HTTP/1.x 200 OK
Date: Wed, 20 Jun 2007 19:40:43 GMT
Server: Jetty/5.1.10 (Linux/2.6.17-10-server i386 java/1.5.0_08
DAV: 1
MS-Author-Via: DAV
Content-Type: text/html ;charset=""UTF-8""
Etag: ""636C5B52201B3432D1CEB6A9B2ECE331-7AFEB923-00000112E8E0C238""
Last-Modified: Fri, 01 Jun 2007 20:01:23 GMT
Transfer-Encoding: chunked
{noformat}
"
MRM-417,joakime,Joakim Erdfelt,2007-06-20T14:47:51.621Z,2007-06-20T14:47:51.621Z,"Tested with IE7 under both archiva 1.0 and archiva 0.9.
Both versions fail to show the content."
MRM-417,wsmoak,Wendy Smoak,2007-06-20T15:01:33.047Z,2007-06-20T15:01:33.047Z,"Comparing the output of wget -S from both versions as suggested by Brett, this line is present in 0.9 and missing in 1.0:

Content-Disposition: inline; filename=""index.html""

(With IE6, 0.9 works fine.)"
MRM-417,joakime,Joakim Erdfelt,2007-06-20T16:40:33.074Z,2007-06-20T16:40:33.074Z,"Fixed on plexus-webdav.
New SNAPSHOT deployed for plexus-webdav 1.0-alpha-3-SNAPSHOT

Updated archiva/trunk to use new snapshot.

h4. Fixed Get Response

{noformat}
HTTP/1.x 200 OK
Date: Wed, 20 Jun 2007 21:35:26 GMT
Server: Jetty/5.1.10 (Linux/2.6.17-10-server i386 java/1.5.0_08
DAV: 1
MS-Author-Via: DAV
Content-Type: text/html ;charset=""UTF-8""
Etag: ""636C5B52201B3432D1CEB6A9B2ECE331-7AFEB923-00000112E8E0C238""
Last-Modified: Fri, 01 Jun 2007 20:01:23 GMT
Content-Disposition: inline; filename=""index.html""
Transfer-Encoding: chunked
{noformat}"
MRM-417,joakime,Joakim Erdfelt,2007-06-21T12:13:29.979Z,2007-06-21T12:13:29.979Z,"Fixed at plexus-webdav.
Archiva trunk now using newly released plexus-webdav (1.0-alpha-3) with this fix."
MRM-497,evenisse,Emmanuel Venisse,2007-09-14T09:40:02.672Z,2007-09-14T09:40:02.672Z,Applied. Thanks.
MRM-462,brettporter,Brett Porter,2007-08-09T00:28:04.94Z,2007-08-09T00:28:04.94Z,"some subtle issues this would address:

- https repositories get recognised as managed repositories (the path is set to ${appserver.home}/https:/...
- file URLs are overly picky and not compliant with the RFC for URLs

If this issue is not scheduled for 1.0, the above both need to be fixed independently (note that these problems appear to be in the save action itself, since if you edit the configuration by hand the information remains correct)"
MRM-462,joakime,Joakim Erdfelt,2007-08-14T20:47:55.765Z,2007-08-14T20:47:55.765Z,"Discussion on this JIRA is in progress in archiva-dev mailing list.
See http://www.nabble.com/MRM-462%3A-configuring-different-types-of-repositories-differently-tf4259505.html"
MRM-462,brettporter,Brett Porter,2007-08-17T03:40:12.457Z,2007-08-17T03:40:12.457Z,"consensus seemed to be around the original plan, but with the added condition that id's may not be duplicated between different repository types"
MRM-462,brettporter,Brett Porter,2007-09-12T04:29:00.133Z,2007-09-12T04:29:00.133Z,merged
MRM-437,joakime,Joakim Erdfelt,2007-10-04T17:31:31.844Z,2007-10-04T17:31:31.844Z,Fixed in archiva/trunk revision 582020.
MRM-407,oching,Maria Odea Ching,2007-08-08T21:13:21.762Z,2007-08-08T21:13:21.762Z,See comments in MRM-374
MRM-407,oching,Maria Odea Ching,2007-08-15T03:49:18.568Z,2007-08-15T03:49:18.568Z,"Fixed in -r566068

- Added the hack for the webwork checkbox in ConfigureRepositoryAction, same one used for 0.9-alpha-2"
MRM-450,tcue,Teodoro Cue Jr.,2007-08-19T02:34:31.971Z,2007-08-19T02:34:31.971Z,Patch attached. It contains fixes for this and for MRM-449.
MRM-450,brettporter,Brett Porter,2007-08-21T03:16:40.172Z,2007-08-21T03:16:40.172Z,"applied, thanks!"
MRM-460,ndeloof,nicolas de loof,2007-08-07T04:16:32.191Z,2007-08-07T04:16:32.191Z,"The default archiva configuration set the remote-proxies connectors to ""cache"", that is an invalid value. I don't know where this default configuration is stored in archiva source folders, so cannot attach a patch for it."
MRM-460,ndeloof,nicolas de loof,2007-08-07T04:20:49.64Z,2007-08-07T04:20:49.64Z,"I've found the archiva default configuration to be in ... archiva-configuration\src\main\resources\org\apache\maven\archiva\configuration\default-archiva.xml

The attached patch set the cache-failure policy to ""cached"", as ""cache"" is not a valid value. "
MRM-460,brettporter,Brett Porter,2007-09-15T22:47:28.234Z,2007-09-15T22:47:28.234Z,"applied, thanks!"
MRM-483,jameswdumay,James William Dumay,2008-05-08T01:42:21.167Z,2008-05-08T01:42:21.167Z,Moving to 1.1.x
MRM-483,brettporter,Brett Porter,2011-09-12T09:31:34.68Z,2011-09-12T09:31:34.68Z,something to review with the repository-admin rework
MRM-414,wsmoak,Wendy Smoak,2007-06-10T23:36:40.132Z,2007-06-10T23:36:40.132Z,"Possibly related, on the second walk, I see this repeatedly in the log file:

INFO   | jvm 1    | 2007/06/10 21:12:23 | 1463184 [pool-2-thread-1] INFO org.apache.maven.archiva.repository.scanner.RepositoryScanner:default - Walk Finished:[central] file:/opt/central-repository/
...
INFO   | jvm 1    | 2007/06/10 21:29:22 | 2482069 [pool-2-thread-1] ERROR org.apache.maven.archiva.repository.scanner.RepositoryScanner:default - Consumer [update-db-artifact] had an error when processing file [/opt/central-repository/org/mortbay/jetty/jsp-api-2.1/6.0.0/jsp-api-2.1-6.0.0.pom]: Insert request failed: INSERT INTO ARCHIVA_ARTIFACT (SNAPSHOT_VERSION,LAST_MODIFIED,REPOSITORY_ID,CHECKSUM_MD5,WHEN_INDEXED,FILE_SIZE,CHECKSUM_SHA1,ORIGIN,PLATFORM,WHEN_PROCESSED,ARTIFACT_ID,CLASSIFIER,GROUP_ID,FILE_TYPE,VERSION) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
INFO   | jvm 1    | 2007/06/10 21:29:22 | javax.jdo.JDODataStoreException: Insert request failed: INSERT INTO ARCHIVA_ARTIFACT (SNAPSHOT_VERSION,LAST_MODIFIED,REPOSITORY_ID,CHECKSUM_MD5,WHEN_INDEXED,FILE_SIZE,CHECKSUM_SHA1,ORIGIN,PLATFORM,WHEN_PROCESSED,ARTIFACT_ID,CLASSIFIER,GROUP_ID,FILE_TYPE,VERSION) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:455)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.store.StoreManager.insert(StoreManager.java:920)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1198)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1261)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:192)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:165)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.database.jdo.JdoArtifactDAO.saveArtifact(JdoArtifactDAO.java:110)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.consumers.database.ArtifactUpdateDatabaseConsumer.processFile(ArtifactUpdateDatabaseConsumer.java:195)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:57)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:127)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:173)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:391)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:344)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:126)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:65)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:105)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at java.lang.Thread.run(Thread.java:595)
INFO   | jvm 1    | 2007/06/10 21:29:22 | NestedThrowablesStackTrace:
INFO   | jvm 1    | 2007/06/10 21:29:22 | ERROR 23505: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'ARCHIVA_ARTIFV6_PK' defined on 'ARCHIVA_ARTIFACT'.
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.impl.sql.execute.IndexChanger.insertAndCheckDups(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.impl.sql.execute.IndexChanger.doInsert(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.impl.sql.execute.IndexChanger.insert(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.impl.sql.execute.IndexSetChanger.insert(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.impl.sql.execute.RowChangerImpl.insertRow(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.impl.sql.execute.InsertResultSet.normalInsertCore(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.impl.sql.execute.InsertResultSet.open(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(Unknown Source)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:101)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.store.rdbms.RDBMSManager.executeStatementUpdate(RDBMSManager.java:572)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:328)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.store.StoreManager.insert(StoreManager.java:920)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1198)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1261)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:192)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:165)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.database.jdo.JdoArtifactDAO.saveArtifact(JdoArtifactDAO.java:110)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.consumers.database.ArtifactUpdateDatabaseConsumer.processFile(ArtifactUpdateDatabaseConsumer.java:195)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:57)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:127)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:173)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:391)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:344)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:126)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:65)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:105)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)
INFO   | jvm 1    | 2007/06/10 21:29:22 | 	at java.lang.Thread.run(Thread.java:595)
...
INFO   | jvm 1    | 2007/06/10 21:29:38 | 2498334 [pool-2-thread-1] INFO org.apache.maven.archiva.repository.scanner.RepositoryScanner:default - Walk Finished:[central] file:/opt/central-repository/
"
MRM-414,joakime,Joakim Erdfelt,2007-06-11T11:58:45.06Z,2007-06-11T11:58:45.06Z,"That error/exception/stacktrace is related to MRM-369

There is detection already in place, but not only for ""is it currently in the queue"", not for ""is it currently running""."
MRM-414,wsmoak,Wendy Smoak,2008-02-06T09:50:41.149Z,2008-02-06T09:50:41.149Z,"This has already been fixed.  In 1.0.1 if I click ""Scan Repository Now"" twice, I see the following in the log:

[ActionError] Repository [snapshots] task was already queued."
MRM-438,oching,Maria Odea Ching,2007-09-03T03:17:59.331Z,2007-09-03T03:17:59.331Z,I updated the download page and used the existing gif images for a pom file and for a jar file (i've just resized it and renamed to download-type-[type].png). This is what the download page will look like in Firefox. Comments will be greatly appreciated :)
MRM-438,oching,Maria Odea Ching,2007-09-03T03:21:34.196Z,2007-09-03T03:21:34.196Z,And this is what the download page will look like in IE. I was testing it using remote desktop so the IE browser wasn't in its maximized size..
MRM-438,oching,Maria Odea Ching,2007-09-13T01:45:15.86Z,2007-09-13T01:45:15.86Z,"Fixed in -r575191

- Leveraged existing jar and pom images (size is 24x24)
- Set background of the download-type icons to tranparent
- Updated site.css
"
MRM-422,wsmoak,Wendy Smoak,2007-06-22T22:42:42.854Z,2007-06-22T22:42:42.854Z,fixed in r550007
MRM-440,evenisse,Emmanuel Venisse,2007-09-14T13:49:15.014Z,2007-09-14T13:49:15.014Z,both don't work for me
MRM-440,evenisse,Emmanuel Venisse,2007-09-14T13:54:42.808Z,2007-09-14T13:54:42.808Z,"ok, with a trailing / it works but only after a restart"
MRM-440,joakime,Joakim Erdfelt,2007-11-08T10:00:19.844Z,2007-11-08T10:00:19.844Z,"Fixed in archiva/trunk revision 593215.
Issuing a redirect to the proper URL in the specific situation of a GET request to an existing resource that is a directory, but doesn't contain a slash at the end of the URL."
MRM-419,joakime,Joakim Erdfelt,2007-06-21T13:29:17.48Z,2007-06-21T13:29:17.48Z,This is a duplicate of MRM-417 (which was recently fixed on trunk)
MRM-419,jdidion,John Didion,2007-06-22T16:50:07.71Z,2007-06-22T16:50:07.71Z,This bug is only fixed for IE. I am still unable to create a Windows Network Place for the repository. Repro step/error message same as above.
MRM-419,zhuodan,Dan Zhuo,2007-08-10T12:37:11.896Z,2007-08-10T12:37:11.896Z,"I have installed archiva 1.0-alpha-2 standalone on both windows and linux, it appears the same problem. More precisely, it would work properly if clicking the WebDav links from admin repositories management pages. However, It is not work properly if typing the WebDav links directly into web browsers (both IE 6, 7 and Firefox 2.0.6). i.e. click any links for http://repo.mysite.com:8080/archiva/repository/internal would collapse the ""REPOSITORY-ID"".   "
MRM-419,joakime,Joakim Erdfelt,2007-09-24T13:09:09.066Z,2007-09-24T13:09:09.066Z,"I was able to duplicate this issue.

I've captured the traffic between Internet Explorer running on my Windows XP (SP2) Laptop and my installation of Archiva on my Linux box.

Here's what I see.

URL provided to Windows Network Places (by hand)

  http://192.168.1.145:8080/archiva/repository/internal//

What happens is a few probes from the Windows machine asking for options, and even a request for a windows specific feature, all to the WRONG PATHS.

*First Request*

{noformat}
OPTIONS / HTTP/1.1
User-Agent: Microsoft Data Access Internet Publishing Provider Cache Manager
Host: 192.168.1.145:8080
Content-Length: 0
Connection: Keep-Alive

HTTP/1.1 200 OK
Content-Type: text/html;charset=ISO-8859-1
Transfer-Encoding: chunked
Date: Mon, 24 Sep 2007 18:00:00 GMT
Server: Apache-Coyote/1.1
{noformat}

*Second Request*

{noformat}
GET /_vti_inf.html HTTP/1.1
Date: Mon, 24 Sep 2007 17:59:40 GMT
MIME-Version: 1.0
Accept: */*
User-Agent: Mozilla/2.0 (compatible; MS FrontPage 4.0)
Host: 192.168.1.145:8080
Accept: auth/sicily
Content-Length: 0
Connection: Keep-Alive
Cache-Control: no-cache

HTTP/1.1 404 /_vti_inf.html
Content-Type: text/html;charset=utf-8
Content-Length: 994
Date: Mon, 24 Sep 2007 18:00:00 GMT
Server: Apache-Coyote/1.1
{noformat}

*Third Request*

{noformat}
POST /_vti_bin/shtml.exe/_vti_rpc HTTP/1.1
Date: Mon, 24 Sep 2007 17:59:40 GMT
MIME-Version: 1.0
User-Agent: MSFrontPage/4.0
Host: 192.168.1.145:8080
Accept: auth/sicily
Content-Length: 41
Content-Type: application/x-www-form-urlencoded
X-Vermeer-Content-Type: application/x-www-form-urlencoded
Connection: Keep-Alive
Cache-Control: no-cache

method=server+version%3a4%2e0%2e2%2e4715
HTTP/1.1 404 /_vti_bin/shtml.exe/_vti_rpc
Content-Type: text/html;charset=utf-8
Content-Length: 1036
Date: Mon, 24 Sep 2007 18:00:00 GMT
Server: Apache-Coyote/1.1
{noformat}

*Fourth Request*

{noformat}
OPTIONS /archiva HTTP/1.1
Accept-Language: en-us
User-Agent: Microsoft Data Access Internet Publishing Provider DAV 1.1
Host: 192.168.1.145:8080
Content-Length: 0
Connection: Keep-Alive

HTTP/1.1 302 Moved Temporarily
Location: http://192.168.1.145:8080/archiva/
Transfer-Encoding: chunked
Date: Mon, 24 Sep 2007 18:00:00 GMT
Server: Apache-Coyote/1.1
{noformat}

And that's the last request to the Archiva server, not once even asking the Repository Root http://192.168.1.145:8080/archiva/repository/internal/ about it's OPTIONS.

That is why it fails.  Unfortunately, I don't see a way that Archiva can fix this odd behavior of Windows."
MRM-419,jameswdumay,James William Dumay,2008-05-06T21:05:36.415Z,2008-05-06T21:05:36.415Z,Move to Jackrabbits Webdav API should improve the situation on windows
MRM-419,brettporter,Brett Porter,2010-02-23T01:38:09.58Z,2010-02-23T01:38:09.58Z,for testing
MRM-419,brettporter,Brett Porter,2010-02-28T22:51:47.768Z,2010-02-28T22:51:47.768Z,"Still not working on Windows 7:

{code}
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""OPTIONS /archiva/repository/test HTTP/1.1"" 302 0 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""OPTIONS /archiva/repository/test/ HTTP/1.1"" 200 0 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""PROPFIND /archiva/repository/test HTTP/1.1"" 302 0 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""PROPFIND /archiva/repository/test/ HTTP/1.1"" 207 536 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""PROPFIND /archiva/repository/test HTTP/1.1"" 302 0 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""PROPFIND /archiva/repository/test/ HTTP/1.1"" 207 536 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""PROPFIND / HTTP/1.1"" 404 1268 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""PROPFIND /archiva HTTP/1.1"" 302 0 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""PROPFIND /archiva/ HTTP/1.1"" 501 0 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""PROPFIND /archiva HTTP/1.1"" 302 0 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""PROPFIND /archiva/ HTTP/1.1"" 501 0 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
192.168.229.128 -  -  [01/Mar/2010:04:32:10 +0000] ""PROPFIND /archiva/repository HTTP/1.1"" 204 0 ""-"" ""Microsoft-WebDAV-MiniRedir/6.1.7600""
{code}

We should investigate if this is something we can correct - it may not like the ""not implemented"" on the parent directories, or the ""no content"" on the immediate parent (which would seem to be the case since it stops there). We would need more debugging in propfind handler to see what it is asking for.

The problems Joakim saw on Windows XP SP2 are known issues that were corrected in SP3 (http://greenbytes.de/tech/webdav/webdav-redirector-list.html#issue-server-discovery)

On Windows XP SP3, it seemingly doesn't deal with the redirects:
{code}
192.168.229.128 -  -  [01/Mar/2010:04:39:39 +0000] ""OPTIONS /archiva/repository HTTP/1.1"" 204 0 ""-"" ""Microsoft Data Access Internet Publishing Provider Cache Manager""
192.168.229.128 -  -  [01/Mar/2010:04:39:39 +0000] ""OPTIONS /archiva/repository/internal HTTP/1.1"" 302 0 ""-"" ""Microsoft Data Access Internet Publishing Provider DAV 1.1""
192.168.229.128 -  -  [01/Mar/2010:04:39:39 +0000] ""GET /_vti_inf.html HTTP/1.1"" 404 1281 ""-"" ""Mozilla/2.0 (compatible; MS FrontPage 4.0)""
192.168.229.128 -  -  [01/Mar/2010:04:39:39 +0000] ""POST /_vti_bin/shtml.exe/_vti_rpc HTTP/1.1"" 404 1295 ""-"" ""MSFrontPage/4.0""
{code}

We could workaround this by not requiring the redirect - Windows refuses to send the / on the end even if typed.

There are also potential problems with using basic auth:

http://support.microsoft.com/kb/841215
http://greenbytes.de/tech/webdav/webdav-redirector-list.html#issue-no-basic-auth

We could offer a different form of authentication to help here if needed.

I'm reducing the priority on this as it does work well with sensible webdav clients."
MRM-463,joakime,Joakim Erdfelt,2007-08-13T14:50:05.205Z,2007-08-13T14:50:05.205Z,"There are two major things going on here.

1) The metadata.xml files need to be sane to what exists in the managed repository.
2) The metadata.xml files need to contain the versions available at all downstream remote repositories that are setup as proxied to this managed repository.

And there are two uses of the metadata.xml file.

1) List of versions available for a given groupId:artifactId reference, as well as what the current/latest version is.
2) Listing of SNAPSHOTS available in a given groupId:artifactId:version-SNAPSHOT reference.

Question is, should the metadata.xml file returned to the client contain the entire list of potential versions, both actual, and available to be proxied, or just the ones that are available on the managed repository?

I vote for the entire list of potential versions from all downstream remote repositories."
MRM-463,joakime,Joakim Erdfelt,2007-08-13T14:52:25.474Z,2007-08-13T14:52:25.474Z,Fixing description that was mangled by mylyn plugin in eclipse (that apparently doesn't like confluence/wiki-ness of a description.)
MRM-463,joakime,Joakim Erdfelt,2007-08-13T14:54:22.697Z,2007-08-13T14:54:22.697Z,Correcting affects/fix versions.
MRM-463,joakime,Joakim Erdfelt,2007-08-14T20:48:40.805Z,2007-08-14T20:48:40.805Z,"Discussion on this jira has been started in archiva-dev mailing list.
See http://www.nabble.com/MRM-463---metadata-handling---merging-tf4270417.html"
MRM-463,joakime,Joakim Erdfelt,2007-08-14T21:00:29.824Z,2007-08-14T21:00:29.824Z,"Even though this is assigned to me, please feel free to work on it, if you feel you can contribute. ;-)"
MRM-463,intrix,arno koehler,2007-08-20T07:45:11.137Z,2007-08-20T07:45:11.137Z,"I spoke to Joakim on the IRC channel #archiva - about Archiva not updating new released JAR versions from our repository, he told me it is related to this item; therefore it has my voting (please fix it)."
MRM-463,joakime,Joakim Erdfelt,2007-08-25T22:29:46.799Z,2007-08-25T22:29:46.799Z,"Baseline components for metadata merging i feel are stable and have adequate unit tests.
See revision 569760.

The Proxy changes and new Consumers I'm still working on.
They will be committed within the next 24 to 48 hours."
MRM-463,joakime,Joakim Erdfelt,2007-09-09T22:23:01.666Z,2007-09-09T22:23:01.666Z,Code has been commit'd to subversion.
MRM-418,fabemn,Fabrice Bellingard,2007-06-21T09:42:08.227Z,2007-06-21T09:42:08.227Z,Fixed on trunk.
MRM-458,brettporter,Brett Porter,2007-10-18T20:08:29.998Z,2007-10-18T20:08:29.998Z,Continuum has recently addressed this so we can leverage the work done there.
MRM-458,evenisse,Emmanuel Venisse,2007-10-23T03:09:07.727Z,2007-10-23T03:09:07.727Z,Done.
MRM-459,joakime,Joakim Erdfelt,2007-10-11T20:41:31.881Z,2007-10-11T20:41:31.881Z,"The entire list of jars ...

{noformat}
ant-optional-1.5.1.jar
archiva-artifact-reports-1.0-beta-3-SNAPSHOT.jar
archiva-common-1.0-beta-3-SNAPSHOT.jar
archiva-configuration-1.0-beta-3-SNAPSHOT.jar
archiva-consumer-api-1.0-beta-3-SNAPSHOT.jar
archiva-core-consumers-1.0-beta-3-SNAPSHOT.jar
archiva-database-1.0-beta-3-SNAPSHOT.jar
archiva-database-consumers-1.0-beta-3-SNAPSHOT.jar
archiva-dependency-graph-1.0-beta-3-SNAPSHOT.jar
archiva-indexer-1.0-beta-3-SNAPSHOT.jar
archiva-lucene-consumers-1.0-beta-3-SNAPSHOT.jar
archiva-model-1.0-beta-3-SNAPSHOT.jar
archiva-policies-1.0-beta-3-SNAPSHOT.jar
archiva-proxy-1.0-beta-3-SNAPSHOT.jar
archiva-report-manager-1.0-beta-3-SNAPSHOT.jar
archiva-repository-layer-1.0-beta-3-SNAPSHOT.jar
archiva-scheduled-1.0-beta-3-SNAPSHOT.jar
archiva-security-1.0-beta-3-SNAPSHOT.jar
archiva-signature-consumers-1.0-beta-3-SNAPSHOT.jar
archiva-xml-tools-1.0-beta-3-SNAPSHOT.jar
backport-util-concurrent-3.0.jar
classworlds-1.1-alpha-2.jar
commons-beanutils-1.7.0.jar
commons-beanutils-bean-collections-1.7.0.jar
commons-codec-1.3.jar
commons-collections-3.2.jar
commons-configuration-1.3.jar
commons-digester-1.6.jar
commons-io-1.2.jar
commons-jxpath-1.2.jar
commons-lang-2.2.jar
commons-logging-1.0.4.jar
commons-logging-api-1.0.4.jar
connector-1.0.jar
dom4j-1.6.1.jar
ehcache-1.3.0.jar
extremecomponents-1.0.1.jar
freemarker-2.3.4.jar
geronimo-spec-jta-1.0.1B-rc2.jar
jaxen-1.1.jar
jdo2-api-2.0.jar
jdom-1.0.jar
jpox-1.1.7.jar
jsr107cache-1.0.jar
jstl-1.1.2.jar
jta-1.0.1B.jar
jtidy-4aug2000r7-dev.jar
log4j-1.2.8.jar
lucene-core-2.0.0.jar
maven-app-configuration-model-1.0.jar
maven-app-configuration-web-1.0.jar
maven-artifact-2.0.5.jar
maven-artifact-manager-2.0.5.jar
maven-model-2.0.5.jar
maven-profile-2.0.5.jar
maven-project-2.0.5.jar
maven-repository-metadata-2.0.5.jar
maven-settings-2.0.5.jar
ognl-2.6.11.jar
oscore-2.2.4.jar
plexus-cache-api-1.0-alpha-2.jar
plexus-cache-ehcache-1.0-alpha-2.jar
plexus-classworlds-1.2-alpha-7.jar
plexus-component-api-1.0-alpha-22.jar
plexus-container-default-1.0-alpha-22.jar
plexus-digest-1.1.jar
plexus-ehcache-1.0-alpha-2.jar
plexus-expression-evaluator-1.0-alpha-2-20070928.003615-2.jar
plexus-jdo2-1.0-alpha-8.jar
plexus-mail-sender-api-1.0-alpha-6.jar
plexus-mail-sender-javamail-1.0-alpha-6.jar
plexus-quartz-1.0-alpha-3.jar
plexus-registry-api-1.0-alpha-2.jar
plexus-registry-commons-1.0-alpha-2.jar
plexus-slf4j-logging-1.1-alpha-1.jar
plexus-taskqueue-1.0-alpha-6.jar
plexus-utils-1.4.jar
plexus-velocity-1.1.2.jar
plexus-webdav-api-1.0-alpha-3.jar
plexus-webdav-simple-1.0-alpha-4-20071005.062810-1.jar
plexus-xwork-integration-1.0-alpha-7.jar
quartz-1.4.5.jar
redback-authentication-api-1.0-alpha-3.jar
redback-authentication-keys-1.0-alpha-3.jar
redback-authentication-ldap-1.0-alpha-3.jar
redback-authentication-users-1.0-alpha-3.jar
redback-authorization-api-1.0-alpha-3.jar
redback-authorization-rbac-1.0-alpha-3.jar
redback-common-jdo-1.0-alpha-3.jar
redback-common-ldap-1.0-alpha-3.jar
redback-configuration-1.0-alpha-3.jar
redback-keys-api-1.0-alpha-3.jar
redback-keys-cached-1.0-alpha-3.jar
redback-keys-jdo-1.0-alpha-3.jar
redback-policy-1.0-alpha-3.jar
redback-rbac-cached-1.0-alpha-3.jar
redback-rbac-jdo-1.0-alpha-3.jar
redback-rbac-model-1.0-alpha-3.jar
redback-rbac-role-manager-1.0-alpha-3.jar
redback-system-1.0-alpha-3.jar
redback-taglib-1.0-alpha-3.jar
redback-users-api-1.0-alpha-3.jar
redback-users-cached-1.0-alpha-3.jar
redback-users-configurable-1.0-alpha-3.jar
redback-users-jdo-1.0-alpha-3.jar
redback-users-ldap-1.0-alpha-3.jar
redback-xwork-integration-1.0-alpha-3.jar
rife-continuations-0.0.2.jar
sitemesh-2.2.1.jar
slf4j-api-1.2.jar
slf4j-log4j12-1.2.jar
slf4j-simple-1.2.jar
standard-1.1.2.jar
stax-api-1.0.1.jar
stax-utils-20060502.jar
velocity-1.4.jar
velocity-dep-1.4.jar
wagon-file-1.0-beta-2.jar
wagon-http-lightweight-1.0-beta-2.jar
wagon-http-shared-1.0-beta-2.jar
wagon-provider-api-1.0-beta-2.jar
webwork-2.2.6.jar
wstx-asl-3.2.1.jar
xercesImpl-2.6.2.jar
xml-apis-1.0.b2.jar
xwork-1.2.3.jar
{noformat}"
MRM-459,joakime,Joakim Erdfelt,2007-10-11T20:59:27.187Z,2007-10-11T20:59:27.187Z,"Can't remove backport-util-concurrent. causes the following error.

Caused by: java.lang.NoClassDefFoundError: edu/emory/mathcs/backport/java/util/concurrent/BlockingQueue
        at java.lang.Class.getDeclaredConstructors0(Native Method)
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2357)
        at java.lang.Class.getConstructor0(Class.java:2671)
        at java.lang.Class.newInstance0(Class.java:321)
        at java.lang.Class.newInstance(Class.java:303)
        at org.codehaus.plexus.component.factory.java.JavaComponentFactory.newInstance(JavaComponentFactory.java:66)
        ... 73 more
"
MRM-459,joakime,Joakim Erdfelt,2007-10-12T13:01:00.345Z,2007-10-12T13:01:00.345Z,"Pruning the following ...
* ant-optional
* jdom
* classworlds
* jta
* xerces
Setting to <scope>provided</scope> the following ...
* servlet-api
* jsp-api
* jstl-api
"
MRM-459,joakime,Joakim Erdfelt,2007-10-12T13:05:06.139Z,2007-10-12T13:05:06.139Z,"Can't find anything else to prune, seems like the rest is in active use by the runtime.
Closing issue."
MRM-459,brettporter,Brett Porter,2007-10-13T18:34:27.045Z,2007-10-13T18:34:27.045Z,"jstl-api can't be removed, not all appservers provide it (see Wendy's message to dev list, <adba96190710131348q3441564aj96af57251bafe6a7@mail.gmail.com>)
"
MRM-459,brettporter,Brett Porter,2007-10-13T18:42:44.659Z,2007-10-13T18:42:44.659Z,"we should also be able to remove more:
- was xml-apis removed as well as xerces?
- only velocity is needed, not velocity-dep (as long as we have all the deps included in velocity-dep, which I think we do)
- we should be smarter about logging. Don't need clogging and clogging-api, don't need slf4j simple. I think the rest are right since we need both apis :(
- do we really need jtidy?
- can we do anything about the JCA lib? is there one from Geronimo?
- where are the Maven libs still used?
"
MRM-459,wsmoak,Wendy Smoak,2007-10-13T20:36:06.15Z,2007-10-13T20:36:06.15Z,"Thanks, Brett.  I put JSTL back in compile scope (by removing the scope=provided line) in r584468 and Archiva/Plexus Appserver works again."
MRM-459,joakime,Joakim Erdfelt,2007-10-15T17:11:50.856Z,2007-10-15T17:11:50.856Z,"* xml-apis contains an updated set of apis (newer than provided in JDK 1.5) needed by various xml transformation providers.
* velocity-dep sounds like a good candidate.
* Removing clogging-api and slf4j-simple sounds reasonable.
* jtidy is part of wagon-http and is required.
* as for jca lib alternatives, can't find a legit one using local archiva's FTS/lucene of ibiblio mirror.
* maven libs are currently used by the appearance libs. (I want to simplify them!)"
MRM-459,joakime,Joakim Erdfelt,2007-11-08T09:44:00.277Z,2007-11-08T09:44:00.277Z,"Work completed in archiva/trunk revision 593206.

Removing commons-logging-api everywhere
Removing slf4j-simple
Removing velocity-dep
"
MRM-491,joakime,Joakim Erdfelt,2007-09-25T11:51:58.752Z,2007-09-25T11:51:58.752Z,"Consider doing MRM-515 first, and just use the pagination support provided by it."
MRM-491,brettporter,Brett Porter,2007-09-26T21:10:21.344Z,2007-09-26T21:10:21.344Z,"these pages don't currently use jasper reports - they are more like the current search page. I wouldn't think that getting into an unknown technology this late in the release cycle is a good idea, myself."
MRM-491,joakime,Joakim Erdfelt,2007-09-26T21:20:53.478Z,2007-09-26T21:20:53.478Z,"Postponed till after 1.0 then.

Paging is non-trivial to add."
MRM-491,olamy,Olivier Lamy (*$^%`),2012-09-25T16:25:24.631Z,2012-09-25T16:25:24.631Z,fixed in new ui
MRM-427,jirareport,Jira Report User,2007-06-28T00:54:59.425Z,2007-06-28T00:54:59.425Z,Assigning to Carlos so he knows about it.
MRM-427,carlos,Carlos Sanchez,2007-06-28T12:06:39.448Z,2007-06-28T12:06:39.448Z,"well, that's a known limitation and I'm not sure it makes sense to add it to the script, considering it was ""temporal""
It should be part of  a metadata regeneration tool in archiva (allowing also cmd line invocation in a cron job)"
MRM-427,joakime,Joakim Erdfelt,2007-07-31T08:53:09.852Z,2007-07-31T08:53:09.852Z,Should create an archiva-cli component to assign this too.
MRM-427,brettporter,Brett Porter,2008-09-13T21:46:56.644Z,2008-09-13T21:46:56.644Z,not an Archiva issue
MRM-432,marc,Marc Boguerra,2007-08-10T06:35:58.997Z,2007-08-10T06:35:58.997Z,"If have observed the same problem with versions like  ""2.0-alpha1"".

It seems that there is a bug in the proxy connector.

I have the following archiva layout:
----------------------------------------------
2 Local repos (""releases"" and ""inhouse-releases"")
2 Remote repos (""central"" and the public url of our ""inhouse-releases"")
1 proxy-connector for ""releases"", which searchs in ""inhouse-releases"" and ""central""

If i place an artifact under
/var/archiva/repos/inhouse-release/foo/bar/1.0-alpha1/bar-1.0-alpha1.jar

I am able to retrieve this via
http://archiva.myserver.org/repository/inhouse-releases/foo/bar/1.0-alpha1/bar-1.0-alpha1.jar

but receive an 404 if i try to obtain the same file via the proxy connector
http://archiva.myserver.org/repository/releases/foo/bar/1.0-alpha1/bar-1.0-alpha1.jar

"
MRM-432,becool26,Elid OR,2007-08-30T10:41:35.636Z,2007-08-30T10:41:35.636Z,"I have the same problem with :

     <plugin>
        <groupId>org.jvnet.jaxb1.maven2</groupId>
        <artifactId>maven-jaxb1-plugin</artifactId>
        <version>1.0-rc10</version>
       </plugin>

It's a very important bug that must correct if somebody have a quick hack ....

"
MRM-432,joakime,Joakim Erdfelt,2007-08-30T11:35:19.95Z,2007-08-30T11:35:19.95Z,Increasing severity.
MRM-432,joakime,Joakim Erdfelt,2007-08-30T11:38:26.878Z,2007-08-30T11:38:26.878Z,"I have a feeling this might be a bug in the BidirectionalRepositoryLayout routines.

To those of you that have commented / filed this ticket, can I be safe in assuming that you are attempting to download from a repository layout of ""default""?"
MRM-432,mathiasarens,Mathias Arens,2007-08-30T14:57:23.401Z,2007-08-30T14:57:23.401Z,"Yes, in my case that is true. I try to download from a repository in default layout."
MRM-432,marc,Marc Boguerra,2007-08-31T03:02:18.366Z,2007-08-31T03:02:18.366Z,Same to me. I am working only with default layout.
MRM-432,joakime,Joakim Erdfelt,2007-09-09T22:24:28.587Z,2007-09-09T22:24:28.587Z,"The problem is most definately within the BidirectionalRepositoryLayout routines.

It appears that the version id is not correctly identified.
I've made some progress in this regard, but there are still test cases that are failing.
Check SVN trunk for the commented test cases.

Search for ""TODO: Re-enabled in the future."""
MRM-432,mathiasarens,Mathias Arens,2007-09-14T04:24:55.836Z,2007-09-14T04:24:55.836Z,"Hello Joakim,

I took a look at the tests and I made a test with a 1.0-beta-2-SNAPSHOT build from 12/09. Now I could download the artifact

<dependency>
<groupId>ch.ethz.ganymed</groupId>
<artifactId>ganymed-ssh2</artifactId>
<version>build210</version>
</dependency>

from a repository in DefaultLayout. That's great. I expected this result because of your tests in the DefaultBidirectionalRepositoryLayoutTest. The problems with the legacy layout are not that important for me. 

But if I try to browse the artifact in the web interface, I get the following error:

Error Occurred

    * Unable to find project model for [ch.ethz.ganymed:ganymed-ssh2:build210].

"
MRM-432,joakime,Joakim Erdfelt,2007-10-10T17:31:14.648Z,2007-10-10T17:31:14.648Z,"Tested and verified as fixed with real project against standalone archiva server running codebase from current archiva/trunk.
"
MRM-498,evenisse,Emmanuel Venisse,2007-09-14T08:47:19.548Z,2007-09-14T08:47:19.548Z,Fixed in rev.575677
MRM-492,joakime,Joakim Erdfelt,2007-10-22T22:06:07.578Z,2007-10-22T22:06:07.578Z,"Cannot reproduce in archiva/trunk.
I suspect the changes around MRM-563 fixed this.

Reopen if it occurs again."
MRM-401,brettporter,Brett Porter,2007-05-30T03:59:14.833Z,2007-05-30T03:59:14.833Z,"similar but different exception:

org.apache.maven.archiva.database.ObjectNotFoundException: Unable to find Database Object [mrj:MRJToolkitStubs:1.0::pom] of type org.apache.maven.archiva.model.ArchivaArtifactModel using no fetch-group
	at org.apache.maven.archiva.database.jdo.JdoAccess.getObjectById(JdoAccess.java:435)
	at org.apache.maven.archiva.database.jdo.JdoArtifactDAO.getArtifact(JdoArtifactDAO.java:82)
	at org.apache.maven.archiva.database.browsing.DefaultRepositoryBrowsing.selectVersion(DefaultRepositoryBrowsing.java:102)
	at org.apache.maven.archiva.web.action.ShowArtifactAction.artifact(ShowArtifactAction.java:96)"
MRM-401,brettporter,Brett Porter,2007-05-30T04:02:46.26Z,2007-05-30T04:02:46.26Z,"also note that if you browse to MRJToolkitStubs (the artifact page), no versions are listed. This may be because the repository has not yet indexed MRJToolkit.

"
MRM-401,brettporter,Brett Porter,2007-05-30T04:07:49.203Z,2007-05-30T04:07:49.203Z,sorry
MRM-423,wsmoak,Wendy Smoak,2007-06-22T18:43:27.054Z,2007-06-22T18:43:27.054Z,Fixed in r549981
MRM-445,jameswdumay,James William Dumay,2008-05-08T02:01:48.609Z,2008-05-08T02:01:48.609Z,Move to 1.1.x
MRM-445,jameswdumay,James William Dumay,2008-05-08T02:22:38.823Z,2008-05-08T02:22:38.823Z,Moving to 1.2
MRM-465,brettporter,Brett Porter,2007-08-09T20:06:29.319Z,2007-08-09T20:06:29.319Z,I would suggest by starting with locking and an in-memory cache.
MRM-465,joakime,Joakim Erdfelt,2007-08-13T14:36:55.619Z,2007-08-13T14:36:55.619Z,"I added an in-memory ehcache around the effective project creation phases, and got further in my siege tests.

However now I experience an out of memory condition.
See attachment archiva-OutOfMemoryError_during_jpox.log for log."
MRM-465,joakime,Joakim Erdfelt,2007-08-13T14:41:18.128Z,2007-08-13T14:41:18.128Z,"Added to the cache the merged parent pom's seems to have done the trick.
Tests no longer hang the server.

Will require more tests from other devs."
MRM-482,brettporter,Brett Porter,2007-08-20T01:30:55.532Z,2007-08-20T01:30:55.532Z,I'll check if the MRM-462 branch happens to address since it touches the code
MRM-482,oching,Maria Odea Ching,2007-08-31T11:24:26.105Z,2007-08-31T11:24:26.105Z,"This error seems to occur everytime there is modified in the properties of a proxy connector. I've tried to create a new Proxy Connector, added a property then removed it. When I clicked the Save Proxy Connector button, I got the same error again even if I no longer have a property added in the Proxy Connector."
MRM-482,joakime,Joakim Erdfelt,2007-10-04T17:31:47.223Z,2007-10-04T17:31:47.223Z,Fixed in archiva/trunk revision 582020.
MRM-499,evenisse,Emmanuel Venisse,2007-09-14T08:53:28.341Z,2007-09-14T08:53:28.341Z,Fixed in rev.575681
MRM-481,brettporter,Brett Porter,2007-10-13T18:56:30.041Z,2007-10-13T18:56:30.041Z,was this fixed already?
MRM-481,brettporter,Brett Porter,2007-10-22T07:43:46.782Z,2007-10-22T07:43:46.782Z,confirmed to still be a problem
MRM-481,joakime,Joakim Erdfelt,2007-10-26T13:18:22.136Z,2007-10-26T13:18:22.136Z,Fixed in archiva/trunk revision 588732.
MRM-449,tcue,Teodoro Cue Jr.,2007-08-19T02:35:47.726Z,2007-08-19T02:35:47.726Z,Fix for this is included on the patch submitted for MRM-450.
MRM-449,brettporter,Brett Porter,2007-08-21T03:16:31.046Z,2007-08-21T03:16:31.046Z,"applied, thanks!"
MRM-455,brettporter,Brett Porter,2007-10-20T21:33:41.67Z,2007-10-20T21:33:41.67Z,I am seeing the browse being updated by the purge now - I believe it might have been that you were seeing MRM-555.
MRM-489,joakime,Joakim Erdfelt,2007-09-07T14:04:15.859Z,2007-09-07T14:04:15.859Z,"If you are using maven / wagon to deploy to the archiva repository, please be aware that, by default the repositories are intentionally read-only and secure.

To enable the ability to write to the repository you must grant the ""Repository Manager"" roles to the authenticated users that you wish to have that ability.
Or you can grant the ""Repository Manager"" role to the Guest user and have that repository be available to all unauthenticated clients.

----

_(Aside, if you are using native OSX webdav clients)_
This is a known issue with OSX native webdav clients.
The OSX client is broken and attempts to set WebDAV lvl 2 locks on a advertised WebDAV lvl 1 repository.

The Apache Jackrabbit and Apache Slide webdav servers have hacks for OSX native clients to undo the boneheaded locking it insists on doing against the webdav server.

We do not use Apache Jackrabbit or Apache Slide, as they have been nigh impossible to embed within Archiva.
We would welcome any assistance to integrate those projects within Archiva.
"
MRM-489,handyande,Andrew Williams,2007-09-07T14:12:01.649Z,2007-09-07T14:12:01.649Z,I have tried to run litmus through the admin account and as a user with *all* roles and a mkcol at the root level fails.
MRM-489,joakime,Joakim Erdfelt,2007-09-21T18:41:44.444Z,2007-09-21T18:41:44.444Z,"Here is the breakdown of the litmus test, with comments.

*Setup:*
* Archiva Trunk revision 578314.
* Tomcat 5.0.28
* JDK 1.5.0_11
* Linux (Ubuntu Fiesty Fawn)
* {{litmus}} version 0.9.4-2

*Configuration:*
* Installed per instructions at http://docs.codehaus.org/display/MAVENUSER/Archiva+on+Tomcat
* 2 repos.
** {{internal}} : with allowed releases and no snapshots.
** {{snapshots}} : with allowed snapshots and no releases.
* Guest user configured with Global Repository Observer.
* Guest user configured with Global Repository Manager.

*Command Line:*
{noformat}
$ litmus http://192.168.1.145:8080/archiva/repository/internal/
{noformat}

*Report:*
-> running `basic':
|| # || Test Name || Result ||
| 0. | init |  (/) pass |
| 1. | begin | (/) pass |
| 2. | options | (!) WARNING: server does not claim Class 2 compliance
 (/) pass (with 1 warning) |
| 3. | put_get | (/) pass |
| 4. | put_get_utf8_segment | (/) pass |
| 5. | mkcol_over_plain | (/) pass |
| 6. | delete | (/) pass |
| 7. | delete_null | (/) pass |
| 8. | mkcol | (/) pass |
| 9. | mkcol_again | (/) pass |
|10. | delete_coll | (/) pass |
|11. | mkcol_no_parent | (-) FAIL (MKCOL with missing intermediate succeeds) |
|12. | mkcol_with_body | (/) pass |
|13. | finish | (/) pass |
 <- summary for `basic': of 14 tests run: 13 passed, 1 failed. 92.9% 
 -> 1 warning was issued. 
 See debug.log for network/debug traces. 

*Responses to Warnings/Errors*
The warning outlined in test #2 refers to the fact that Archiva is a Level 1, (Class 1) WebDAV server.  That is an intentional decision, and does not violate the WebDAV standard.  It just means Archiva doesn't have advanced locking and versioning.
The error outlined in test #11 (mkcol_no_parent) refers the ability to MKCOL in a deep sense, without the need to MKCOL the parent directory first.  This is an internal decision to allow for proxying of content not present in the webdav collection at the time of the request.  This behavior is quite likely a violation of WebDAV standard (however I cannot find this section in the spec).
"
MRM-489,joakime,Joakim Erdfelt,2007-09-24T11:50:44.696Z,2007-09-24T11:50:44.696Z,"I cannot reproduce the errors that Andy has reported, I'm closing this jira in the meantime.

I have copied the documentation in here to the confluence space at http://docs.codehaus.org/display/MAVENUSER/Archiva+WebDAV+Implementation

I will continue to strive to keep that wiki page up to date on any changes / deviations from the WebDAV protocol in use by Archiva."
MRM-448,joakime,Joakim Erdfelt,2007-10-01T19:45:10.945Z,2007-10-01T19:45:10.945Z,"Started some of the validation.
Can't get the validation messages to stay through a ""redirect-action""."
MRM-448,brettporter,Brett Porter,2010-02-23T02:05:43.479Z,2010-02-23T02:05:43.479Z,this seems to have been sorted out a long time ago
MRM-425,jdidion,John Didion,2007-06-25T16:00:22.486Z,2007-06-25T16:00:22.486Z,"The repro for search is similar: search for an artifact with snapshot versions, click on one of them, and you get the same error."
MRM-425,oching,Maria Odea Ching,2007-07-23T12:07:02.772Z,2007-07-23T12:07:02.772Z,"Fixed in -r558795.

See comments in MRM-426 for the fix. "
MRM-486,joakime,Joakim Erdfelt,2007-09-24T13:37:22.513Z,2007-09-24T13:37:22.513Z,"Verified that recent work around DefaultBidirectionalLayout have fixed this issue too.
Added Test Case to revision 578897 on archiva/trunk."
MRM-409,oching,Maria Odea Ching,2007-06-14T05:58:01.504Z,2007-06-14T05:58:01.504Z,"Fixed pom validation in -r547209. Validation for jars still needs to be done.

For -r547209, I did the following:
1. added validation for poms in ProjectModelToDatabaseConsumer. If pom is invalid, project model is not added in the database and a new RepositoryProblem is created
2. added ObjectNotFoundException handling in ShowArtifactAction when the project model is not found on the database (display error message and redirect to generalError.jsp)
3. changed access of class FilenameParts from default to public (I've used this for the pom validation)
4. created a new class CorruptArtifactReport (related to MRM-143) that is used to identify the corrupt pom problem in #1 "
MRM-409,oching,Maria Odea Ching,2007-06-25T02:31:43.541Z,2007-06-25T02:31:43.541Z,"Validation of an artifact seems to be in place in LocationArtifactsConsumer. The artifact is already being validated if it is readable, and whether it matches its pom (in the repository and the embedded pom). 

This consumer is not being executed since the Repository Artifact Consumers are not yet included in the configuration. 
I'm not sure where this configuration should be placed, though. Thoughts, anyone?"
MRM-409,oching,Maria Odea Ching,2007-08-27T07:48:46.18Z,2007-08-27T07:48:46.18Z,"Fix already in svn:
1. -r547209 (added validation for poms in ProjectModelToDatabaseConsumer. If pom is invalid, project model is not added in the database and a new RepositoryProblem is created)
2. Validation of jars already exists in LocationArtifactsConsumer (if jar file is readable). 
"
MRM-410,joakime,Joakim Erdfelt,2007-06-17T09:03:03.96Z,2007-06-17T09:03:03.96Z,Work completed in trunk.
MRM-490,joakime,Joakim Erdfelt,2007-11-08T08:25:56.94Z,2007-11-08T08:25:56.94Z,"Moving to 1.x as this change will affect all xwork actions/pages/jsps.
Too big of a change right now."
MRM-490,jameswdumay,James William Dumay,2008-05-08T01:42:21.783Z,2008-05-08T01:42:21.783Z,Moving to 1.1.x
MRM-490,olamy,Olivier Lamy (*$^%`),2012-10-13T16:26:33.862Z,2012-10-13T16:26:33.862Z,no more xwork now :-)
MRM-475,joakime,Joakim Erdfelt,2007-08-25T22:27:46.407Z,2007-08-25T22:27:46.407Z,Code committed in r569760.
MRM-478,joakime,Joakim Erdfelt,2007-08-14T20:56:10.771Z,2007-08-14T20:56:10.771Z,Setting to a Future fix version.
MRM-461,joakime,Joakim Erdfelt,2007-10-10T18:25:25.707Z,2007-10-10T18:25:25.707Z,Added URL + Resource Path to log message in archiva/trunk.
MRM-435,jameswdumay,James William Dumay,2008-05-08T01:42:20.589Z,2008-05-08T01:42:20.589Z,Moving to 1.1.x
MRM-435,effrafax,Martin Stockhammer,2017-04-05T20:20:07.057Z,2017-04-05T20:20:07.057Z,The issue is very old and contains not much information. Will close it for now.
MRM-426,oching,Maria Odea Ching,2007-06-26T04:30:22.474Z,2007-06-26T04:30:22.474Z,"After further investigation, I found out that the problem was due to the following:

1. When the artifact was indexed (in IndexContentConsumer), the artifact version is being converted to **-SNAPSHOT whenever a unique snapshot version is encountered.. from the example above, 1.1.2-20070427.065136-1, 1.1.2-20070506.163513-2 and 1.1.2-20070506.163513-3 thus becomes 1.1.2-SNAPSHOT when added in the index. This is for the 'version' field in the index. But in the 'filename' field of the index, the unique version is retained as is. 

Therefore when you search 'castor-anttasks-1.1.2-20070427.065136-1.pom', you'll get 1 hit result like this:

Hits: 1 of 1
castor-anttasks

org / codehaus / castor / castor-anttasks | Version(s): 1.1.2-SNAPSHOT

2. When the artifact was added in the database (in ArtifactUpdateDatabaseConsumer), the unique version was retained as is. And since the version of the artifact in the results page is 1.1.2-SNAPSHOT, when you click it to browse that artifact.. it couldn't be found on the database because the version of the artifact that was added was still 1.1.2-20070427.065136-1 and what's being queried is 1.1.2-SNAPSHOT.

I've thought of two ways to approach this.. 
1. do not convert unique snapshots to **-SNAPSHOT and retain all versions as is 
2. convert all unique versions (in the database and in the index -- filename field) to **-SNAPSHOT. 

What do you guys think?"
MRM-426,oching,Maria Odea Ching,2007-07-05T05:25:36.834Z,2007-07-05T05:25:36.834Z,"I've tried doing #1 and I encountered another problem when the project model is added in database. Since the version in the pom file is still **-SNAPSHOT even if the artifact is deployed as a uniqueVersion snapshot, you cannot add multiple project models with the same groupId, artifactId and version (ProjectModelToDatabase). 

To illustrate using the example above:

castor-anttasks-1.1.2-20070427.065136-1.jar, castor-anttasks-1.1.2-20070506.163513-2.jar and castor-anttasks-1.1.2-20070506.163513-3.jar has the same versions in their poms, which is 1.1.2-SNAPSHOT. So if the project model for castor-anttasks-1.1.2-20070427.065136-1.jar is already added in the database, the project models for  castor-anttasks-1.1.2-20070506.163513-2.jar and castor-anttasks-1.1.2-20070506.163513-3 .jar can no longer be added since they are duplicates of the first one added in the db. 

The solution I thought for this was to use the uniqueVersion of the artifact itself for the project model when it is added to the database. This would allow the project model to be added at the same time capture the changes in the poms for each unique version. Then when the project model is retrieved from the db and displayed, we could have a process here that would convert unique versions into **-SNAPSHOT.

Thoughts, anyone?
"
MRM-426,oching,Maria Odea Ching,2007-07-12T03:16:27.452Z,2007-07-12T03:16:27.452Z,"See thread in archiva dev list with subject ""Suggestions/thoughts anyone? (MRM-426)"" for the discussion about the fix."
MRM-426,oching,Maria Odea Ching,2007-07-13T05:53:50.048Z,2007-07-13T05:53:50.048Z,"From the discussions posted in the dev list thread, the approach for this would be:
- index all versions (timestamped snapshots, generic snapshots and released versions)
- add all versions in the database
- include *-SNAPSHOT when artifact is browsed. This should point to the latest timestamped version if no *-SNAPSHOT exists in repo/db."
MRM-426,oching,Maria Odea Ching,2007-07-23T12:01:51.744Z,2007-07-23T12:01:51.744Z,"Fixed in -r558795

Fix:
- Added and modified code for handling snapshots (if the versions of a specific artifact snapshot are only timestamped versions, add a 
generic snapshot which is pointing to the latest timestamp version) in DefaultRepositoryBrowsing and ProjectModelToDatabaseConsumer.
- Updated pom validations in ProjectModelToDatabaseConsumer - handling of timestamped versions were considered
- Added isUniqueSnapshot(..) and isGenericSnapshot(..) in VersionUtil
- Added new attribute 'modelVersion' in DependencyTreeTag to get the in-pom version. Did not use the version attribute so as to retain the 
actual version being browsed. Also updated DependencyTree
- Updated the ff. pages for the version to be displayed: artifactInfo.jspf, showArtifact.jsp, dependencyTree.jsp and artifactDecorator.jsp
- Updated the version in SearchResultHit
"
MRM-406,joakime,Joakim Erdfelt,2007-05-30T17:01:11.141Z,2007-05-30T17:01:11.141Z,"Will not fix or patch.

Changing to project.version will cause SNAPSHOT based builds to fail.

The only way for a SNAPSHOT based build, based on project.version, will work is if you build the entire project each and every time, which is unrealistic in development time.
"
MRM-406,franz_see,Franz Allan Valencia See,2007-05-30T23:47:17.257Z,2007-05-30T23:47:17.257Z,I am reopening this because archiva.version fails the release. A solution must be found such that there are no problems for both releasing and building.
MRM-406,brettporter,Brett Porter,2007-05-30T23:50:50.195Z,2007-05-30T23:50:50.195Z,"Joakim - I don't think your 'each and every time' comment is correct, I can only see this happening if you are using snapshots from the web (since it might mistakenly use the snapshot version across the board instead of the -SNAPSHOT). Though I've never actually seen that happen either.

Seems like a bug that should be fixed in Maven rather than using this workaround, so I agree with the patch at this stage."
MRM-406,joakime,Joakim Erdfelt,2007-05-31T07:06:57.334Z,2007-05-31T07:06:57.334Z,"Try it yourself.

# Change from archiva.version to project.version
# When in trunk build the entire archiva - [trunk]$ mvn clean install
# Make a change to archiva-database.
#* This is key piece of showing this failure.
#* The change should be obvious, to show that archiva-database functionality has been updated.
# Now build just database - [trunk/archiva-database]$ mvn clean install
# Now execute the webapp - [trunk/archiva-web/archiva-webapp]$ mvn clean jetty:run

At this point you'll either get build failures, or when executing the webapp, you are *NOT* using the latest archiva-database.

What happens.
# The install process changes the SNAPSHOT in the pom to a TIMESTAMP(a).
# The installing everything works, as the TIMESTAMP(a)s are all the same.
# Installing the archiva-database project causes a new TIMESTAMP(b) to be created for it.
# Running the archiva-webapp, uses the parent-pom reference as SNAPSHOT, which resolves to TIMESTAMP(a), and as such, the archiva-database it uses is the old TIMESTAMP(a) version, not the intended TIMESTAMP(b) version.

This is a *well known* issue with maven.

We've hit this with redback too.  It uses the same technique.  I can't speak for continuum.

I contend that this is *not* and issue with archiva, but an issue with the maven-release-plugin, for not performing the updates to the versions correctly.

Solution:
# Fix the maven-release-plugin to do version updates correctly.

"
MRM-406,brettporter,Brett Porter,2007-05-31T10:44:31.066Z,2007-05-31T10:44:31.066Z,"I tried steps 1 - 5 and I got the correct archiva-database (I did a diff to confirm).

The install process does not change the SNAPSHOT in the POM into a TIMESTAMP. Only the deploy process does, and then only remotely. You'll only get that locally when it is downloaded from the server again.

I believe you've seen it with redback because you regularly deployed and used those depoyed snapshots. I didn't dispute that would be a problem. It's something that should be fixed in Maven.

I believe the release plugin has work under way to dereference the expressions so that it can fix the properties that hold versions too (though this is a hairy issue and not one that should be considered a best practice).

I just believe that given all these circumstances, using ${project.version} was the least harmful. The redback release process got bitten by the fact that it wasn't updated more than once.

But I'm also not the one releasing it, so as long as it's documented either way, I don't care what it's set to."
MRM-406,joakime,Joakim Erdfelt,2007-05-31T20:35:06.832Z,2007-05-31T20:35:06.832Z,"Mulling about this for a while. I see a third solution.

* Remove all <dependencyManagement> entries for archiva related modules/projects.
* Remove archiva.version property.
* Set <version> in all <dependencies> in all archiva modules/projects to project.version

It's the dependencyManagement fault that we are working around with the archiva.version property.
"
MRM-406,brettporter,Brett Porter,2007-05-31T21:34:46.56Z,2007-05-31T21:34:46.56Z,"good idea. Let the release plugin take care of updating it.

actually, even if we just populate the versions in dependency management instead of using ${project.version}, it should work - the release plugin does deal correctly with depMgmt."
MRM-406,joakime,Joakim Erdfelt,2007-06-01T10:37:04.735Z,2007-06-01T10:37:04.735Z,"Fixed in trunk.
Changed archiva.version to fully expanded version id."
MRM-474,joakime,Joakim Erdfelt,2007-08-25T22:27:18.941Z,2007-08-25T22:27:18.941Z,Code committed in r569760.
MRM-430,brettporter,Brett Porter,2007-07-31T22:04:26.068Z,2007-07-31T22:04:26.068Z,"note on the ""read"" end of this behaviour, it should read both, and merge the results, taking ~/.m2/archiva.xml as the priority. This should already be achieved by the registry mechanism."
MRM-487,joakime,Joakim Erdfelt,2007-09-28T18:27:53.166Z,2007-09-28T18:27:53.166Z,Fixed in archiva/trunk revision 580514.
MRM-487,michal.stochmialek,Michal Stochmialek,2008-08-22T09:30:37.705Z,2008-08-22T09:30:37.705Z,Is the patch included in the latest version - 1.1.1?
MRM-487,brettporter,Brett Porter,2008-08-24T20:55:19.786Z,2008-08-24T20:55:19.786Z,yes
MRM-487,michal.stochmialek,Michal Stochmialek,2008-08-25T02:53:25.171Z,2008-08-25T02:53:25.171Z,"Strange. This case is working, but resolving ${pom.version} property (MRM-615) is not?"
MRM-476,joakime,Joakim Erdfelt,2007-08-14T14:32:51.851Z,2007-08-14T14:32:51.851Z,"Sounds like a wonderful idea.

Do you have any examples on how to access a UNC/Windows share via java?"
MRM-476,brettporter,Brett Porter,2007-08-14T18:40:11.253Z,2007-08-14T18:40:11.253Z,"I think if we were using a path instead of a URL there, and did file.toURL(), we would end up with the right result, so I'm linking to MRM-462"
MRM-476,psg9999,Patrick Gallagher,2007-08-15T08:01:43.457Z,2007-08-15T08:01:43.457Z,"I think that Brett is right.  Treating this as a path is the right idea.  If you were wanting to treat the field as a java.net.URL, you could just parse the string input and set the host appropriately by either extracting the network host or using localhost for local paths.  Of course this is just for the file protocol but that is know from the prefix."
MRM-476,joakime,Joakim Erdfelt,2007-10-02T13:53:07.714Z,2007-10-02T13:53:07.714Z,"I just tried 1.0-beta-2 on my winXP (SP2) Laptop, and it allows for the creation of a Managed Repository using only UNC urls.
However, the security around UNC is apparently not supported by java. 
I get a windows popup auth dialog when archiva attempts to access the UNC path.
I'm not sure how windows caches those auth credentials.

I can't figure out how to get a server webapp to use UNC and provide credentials on the attempt to access that filesystem.
I believe this is beyond the capabilities of the standard Java file.io.* libs.

I'm going to be closing this jira as fixed.
Please open a new Jira if you feel that auth is important with UNC on Archiva.
For now, I think we should recommend that people mount their windows file shares properly to gain the benefit of OS provided security/auth."
MRM-429,brettporter,Brett Porter,2007-08-03T02:53:56.547Z,2007-08-03T02:53:56.547Z,I'm finding the feature itself isn't working as well
MRM-466,brettporter,Brett Porter,2007-08-09T20:09:50.843Z,2007-08-09T20:09:50.843Z,"this seems closely related to the same problem we saw occurring in Continuum not that long ago. We solved it buy adding a null guard around the operation, but we might want to consider an upgrade to the quartz component.
"
MRM-466,joakime,Joakim Erdfelt,2007-08-13T12:32:44.216Z,2007-08-13T12:32:44.216Z,"This jira seems related to MRM-467

When this jira is corrected, we need to retest MRM-467, it'll likely be fixed too."
MRM-466,joakime,Joakim Erdfelt,2007-09-24T13:28:25.792Z,2007-09-24T13:28:25.792Z,The null guard is in place (just swapped the .equals() comparison around)
MRM-470,joakime,Joakim Erdfelt,2007-09-24T13:22:01.287Z,2007-09-24T13:22:01.287Z,Do not use JDK 1.6
MRM-404,brettporter,Brett Porter,2009-12-21T05:13:05.951Z,2009-12-21T05:13:05.951Z,this is corrected on the MRM-1025 branch
MRM-494,joakime,Joakim Erdfelt,2007-09-24T13:48:00.607Z,2007-09-24T13:48:00.607Z,Verified as problem in Managed and Remote Repository add screens.
MRM-494,joakime,Joakim Erdfelt,2007-09-24T18:21:12.276Z,2007-09-24T18:21:12.276Z,"Fixed on managed repo screens.
Now to fix on remote repo screens.
"
MRM-494,brettporter,Brett Porter,2007-09-24T21:17:07.493Z,2007-09-24T21:17:07.493Z,fixed on both and simplified the code to remove duplication and align names better
MRM-494,joakime,Joakim Erdfelt,2007-09-25T19:05:36.585Z,2007-09-25T19:05:36.585Z,Overhauled code. Created duplication (heh) and aligned to best practices.
MRM-412,brettporter,Brett Porter,2007-07-31T08:30:49.396Z,2007-07-31T08:30:49.396Z,patch to review
MRM-412,brettporter,Brett Porter,2007-08-03T01:54:42.218Z,2007-08-03T01:54:42.218Z,"applied, thanks!

Please watch the formatting in future patches though, please :)"
MRM-477,joakime,Joakim Erdfelt,2007-10-04T17:31:38.824Z,2007-10-04T17:31:38.824Z,Fixed in archiva/trunk revision 582020.
MRM-495,jameswdumay,James William Dumay,2008-12-15T20:33:20.588Z,2008-12-15T20:33:20.588Z,Search now weights artifactId higher than any other field.
MRM-495,brettporter,Brett Porter,2009-03-08T20:50:00.702Z,2009-03-08T20:50:00.702Z,"trying this with the latest code, I'm getting dwr, qdox, etc first when searching for 'junit'"
MRM-495,jzurbano,jzurbano,2010-04-27T06:50:38.544Z,2010-04-27T06:50:38.544Z,"I get ""junit"" first in the search results now when searching for ""junit""

I am using r938413, BTW.

May I ask someone to verify this too?"
MRM-495,gautencio,Gwen Harold Autencio,2010-04-27T07:37:01.135Z,2010-04-27T07:37:01.135Z,"I tried using specific groupid, aritfactId and version on a 2G repository and return the correct result in advanced search."
MRM-495,brettporter,Brett Porter,2010-04-27T22:36:25.505Z,2010-04-27T22:36:25.505Z,"junit works, but try ""ant"" and it doesn't.

as with the other issue I just commented on, I'd suggest we document how the search works so we know what to expect."
MRM-454,oching,Maria Odea Ching,2007-10-26T06:09:59.271Z,2007-10-26T06:09:59.271Z,"Fixed in -r588598

- synchronized the index operations in LuceneRepositoryContentIndex (used 'repository' as the lock) to avoid index locking
- added method for deleting artifacts from the index during repository purge
- updated repository purge tests
"
MRM-479,joakime,Joakim Erdfelt,2007-10-11T20:28:14.937Z,2007-10-11T20:28:14.937Z,Fixed in archiva/trunk during monster commit.
MRM-446,brettporter,Brett Porter,2007-08-03T03:10:51.225Z,2007-08-03T03:10:51.225Z,the applet was generating a capitalised checksum. Changed constraint to always lowercase to match the database.
MRM-1604,jbonofre,Jean-Baptiste Onofr,2012-02-15T14:40:30.481Z,2012-02-15T14:40:30.481Z,Revision 1244698
MRM-1674,olamy,Olivier Lamy (*$^%`),2012-09-24T17:20:33.448Z,2012-09-24T17:20:33.448Z,"fixed.
Thanks for the report !"
MRM-1674,Chris Harris,Chris Harris,2012-09-24T22:20:47.021Z,2012-09-24T22:20:47.021Z,You're welcome.
MRM-1654,olamy,Olivier Lamy (*$^%`),2012-07-27T16:55:15.948Z,2012-07-27T16:55:15.948Z,"fixed.
Thanks!"
MRM-1660,olamy,Olivier Lamy (*$^%`),2012-09-07T10:17:31.625Z,2012-09-07T10:17:31.625Z,wait fix in log4j2 see https://issues.apache.org/jira/browse/LOG4J2-80
MRM-1660,olamy,Olivier Lamy (*$^%`),2012-09-07T10:18:46.014Z,2012-09-07T10:18:46.014Z,"attach a patch.
Will see later when log4j2 issue is fixed."
MRM-1652,olamy,Olivier Lamy (*$^%`),2012-08-02T17:33:34.199Z,2012-08-02T17:33:34.199Z,with this patch I won't able to deploy snapshot to this repository if snapshot is true.
MRM-1652,charlesk40,charles kim,2012-08-02T17:41:23.422Z,2012-08-02T17:41:23.422Z,"I see. May be I need to modify the patch for that case.  I thought that by setting the releases=false would mean ""no upload"" at all. :)"
MRM-1652,brettporter,Brett Porter,2012-08-02T22:42:13.226Z,2012-08-02T22:42:13.226Z,"Those labels aren't great. At the moment they really just mean ""don't scan for releases"", but we've slowly been making them more enforceable. 

You could probably look at the section that does the 409 conflict if a release is redeployed, that has the right checks if an artifact is considered a release or not."
MRM-1652,charlesk40,charles kim,2012-08-03T03:05:01.424Z,2012-08-03T03:05:01.424Z,What would be the configuration for disabling uploading to the repository then? I thought 'releases' would be it seen from the comment fin the code.
MRM-1652,brettporter,Brett Porter,2012-08-03T05:34:54.889Z,2012-08-03T05:34:54.889Z,"The option is to not redeploy releases - so you can still upload them, but not a second time.

But it sounds like you want to remove deployment altogether - the more appropriate way to do that is to change the users permissions so they don't have the manager role for that repository.

All that said, I think you're still correct to do a 405 if releases was not checked AND the artifact has a release version. I was suggesting you could pick that code out from the similar 409 call for the first one."
MRM-1652,charlesk40,charles kim,2012-08-03T10:12:53.283Z,2012-08-03T10:12:53.283Z,"Okay. Title of issue should say 'Archiva should throw 405 (Method not allowed) when ""releases=false"" and artifact has a release version in archiva.xml'. I couldn't find a way to change it. :)

 
"
MRM-1652,olamy,Olivier Lamy (*$^%`),2012-08-03T10:18:40.173Z,2012-08-03T10:18:40.173Z,AFAIK we have the property blockRedeployments for that ?
MRM-1652,olamy,Olivier Lamy (*$^%`),2012-09-05T09:31:58.419Z,2012-09-05T09:31:58.419Z,please reopen if you have a unit test to reproduce that.
MRM-1638,olamy,Olivier Lamy (*$^%`),2012-06-29T07:40:58.877Z,2012-06-29T07:40:58.877Z,"the issue looks to be more in order change in ConcurrentHashMap.
I have fixed that (normally :-) )"
MRM-1638,skygolanur,Eric Barboni,2012-06-29T08:28:03.383Z,2012-06-29T08:28:03.383Z,"Surefire report example on a archiva-configuration with last svn version I can get.

2 consecutive run clean install 

1 fail first run.
3 fail second run.

:( 


"
MRM-1638,olamy,Olivier Lamy (*$^%`),2012-06-29T08:38:46.69Z,2012-06-29T08:38:46.69Z,Do you have locally any file ~/.m2/archiva.xml ?
MRM-1638,skygolanur,Eric Barboni,2012-06-29T08:51:14.604Z,2012-06-29T08:51:14.604Z,nope having only archetype-catalog.xml and settings.xml
MRM-1638,skygolanur,Eric Barboni,2012-06-29T12:28:05.656Z,2012-06-29T12:28:05.656Z,"Fake patch: only for giving a try localy.
Aim try to reproduce jdk7 randomness.

Shuffle what SpringJUnit4ClassRunner and make it several time.


Applied to ArchivaConfigurationTest.

"
MRM-1638,skygolanur,Eric Barboni,2012-07-01T08:30:57.246Z,2012-07-01T08:30:57.246Z,"Patch to all junit test in archiva to depend on custom Runner with random method list.

Jdk6 will return non modified list to not alter current build.

Should make jenkins archiva 1.7 job a bit more heratic .


"
MRM-1638,olamy,Olivier Lamy (*$^%`),2012-07-02T02:06:10.703Z,2012-07-02T02:06:10.703Z,"Thanks.
But I'm a bit confuse by the patch because with 1.7 tests are now executed twice.
I will commit a modified version.
Feel free to comment :-).
"
MRM-1638,skygolanur,Eric Barboni,2012-07-02T03:06:04.279Z,2012-07-02T03:06:04.279Z,"Sorry I had this parameter to run several time to check for reproductability and give more error because 1 run can be successful with luck.

My point is to use the jdk7 job to stress test junit and help making them more reliable according to the jdk7 implementation change.

Example of a potential test:
 testAdd and testRemove on a same list 
   
 Add is adding one element , remove is removing one element

Theoricaly:
 testRemove may be executable alone, in this dummy example it fail (deleting from empty)
                 or several time not 


Thats why I introduce a loop in the 1.7 testrunner. My evil plan was to set the loop to more than 2 :p but I don't want to destroy jenkins. 


 "
MRM-1638,olamy,Olivier Lamy (*$^%`),2012-07-02T03:08:08.432Z,2012-07-02T03:08:08.432Z,"ok :-).
BTW with not using this name sorting even for 1.6 ?"
MRM-1638,skygolanur,Eric Barboni,2012-07-02T03:17:59.998Z,2012-07-02T03:17:59.998Z,"I just not want to break 1.6 build, in case of future 1.4 js release in short time. 

Because I guess that current unit test are more or less good at least with method in JVM order.

My point is more to anticipate jdk 7 or 8 build.

It's not name sorting, is multiple random :p. "
MRM-1638,skygolanur,Eric Barboni,2012-07-02T04:16:46.738Z,2012-07-02T04:16:46.738Z,"Sorry, 

I spend lot of time testing that I create no regression but archiva-modules/archiva-web/archiva-webapp/src/test/java/org/apache/archiva/web/action/ShowArtifactActionTest.java
miss a @Before annotation on setUp method

--
I think it's a good idea to have the runner exectuting several time a random list of method or a ascending + reverse list of method




"
MRM-1638,olamy,Olivier Lamy (*$^%`),2012-07-02T04:21:36.993Z,2012-07-02T04:21:36.993Z,"Fixed.
For the random + several time, ok but not as default (something configurable via a sys props and activated in ci servers). Archiva build is already long enough for laptop :-)"
MRM-1638,skygolanur,Eric Barboni,2012-07-02T04:37:30.72Z,2012-07-02T04:37:30.72Z,"Will look for property,

 a number as properties to give the number of repetition

 not set or 0 = default jvm behavior
 1 to n = random + time to repeat (with a cap to 10)

Will try to do that.


  "
MRM-1638,skygolanur,Eric Barboni,2012-07-02T06:41:01.552Z,2012-07-02T06:41:01.552Z,"Usage -Dorg.apache.archiva.test=n

No more java.spec check.

Poor jenkins :p.



(A bit scare of unit test in other project when they will come to jdk7 )"
MRM-1638,olamy,Olivier Lamy (*$^%`),2012-07-02T08:45:21.544Z,2012-07-02T08:45:21.544Z,"applied too.
Thanks (again :-) )"
MRM-1638,skygolanur,Eric Barboni,2012-07-02T18:15:34.065Z,2012-07-02T18:15:34.065Z,"De Nada :p.

Is it possible to recieve a mail for failure  at bar..ni@irit.fr (my name but anti spam) for the jenkis jdk 7 job once parametrized with multiple test run ?
"
MRM-1638,skygolanur,Eric Barboni,2012-07-04T10:34:20.923Z,2012-07-04T10:34:20.923Z,"Checksum Test are multiple time runnable.
 -Add @Before to remove testing folder
 -Remove a extends to abstrac cause not used

Test missing missing sa1 file that where there from previously runned method"
MRM-1638,olamy,Olivier Lamy (*$^%`),2012-07-05T06:32:52.384Z,2012-07-05T06:32:52.384Z,More easy to subscribe to archiva-notifications@ see how to here: http://mail-archives.apache.org/mod_mbox/archiva-notifications/
MRM-1638,olamy,Olivier Lamy (*$^%`),2012-07-05T06:44:31.299Z,2012-07-05T06:44:31.299Z,patch applied. Thanks!
MRM-1638,skygolanur,Eric Barboni,2012-08-02T16:47:29.652Z,2012-08-02T16:47:29.652Z,"* fix for archiva-artifact-converter module

* fix for archiva-policies module (testPolicyYes workflow is not trivial for multiple run) 

Will commit myself as warm up"
MRM-1638,skygolanur,Eric Barboni,2012-08-04T08:01:30.893Z,2012-08-04T08:01:30.893Z,"List of module in fault figure are useless. Some failure may be real failure

According to build 1076
org.apache.archiva:archiva-webapp-js
org.apache.archiva:problem-reports
org.apache.archiva:archiva-scheduler-repository
org.apache.archiva:archiva-rest-services"
MRM-1638,skygolanur,Eric Barboni,2012-09-14T18:00:45.741Z,2012-09-14T18:00:45.741Z,"Can go through full mvn clean install locally on jdk 7 but sometimes file delete issue in the following code:

{code}
File directory = new File( ""target/test-repositories"" );
if (directory.exists())
{
    FileUtils.deleteDirectory( directory );
}
{code}
On the module
*Archiva Base :: Consumers :: Core Consumers*
(well seen one time only and forgot to copy error :( )

*Archiva Base :: Proxy*                         
(setUp of AbstractProxyTestCase)

*Archiva Core Plugins :: File System Backed Metadata Repository*
(setUp of FileMetadataRepositoryTest)

"
MRM-1638,olamy,Olivier Lamy (*$^%`),2012-10-03T02:14:23.37Z,2012-10-03T02:14:23.37Z,"Most of the job has been done.
So close it."
MRM-1635,olamy,Olivier Lamy (*$^%`),2012-06-18T09:11:40.701Z,2012-06-18T09:11:40.701Z,must be fixed with last app assembler mojo
MRM-1690,predatorvi,Jeff Vincent,2012-10-11T01:47:25.281Z,2012-10-11T01:47:25.281Z,"My bad.  Due to the derbydb/ folder and files being owned by root:root instead of tomcat:tomcat, the changes wouldn't persist.

In addition, I had a bad value in security.properties:

security.policy.password.previous.count=0

causing a call to sublist(0,-1) to choke in  DefaultUserSecurityPolicy.java:lines[327-329] 

"
MRM-1699,olamy,Olivier Lamy (*$^%`),2012-10-19T11:56:14.779Z,2012-10-19T11:56:14.779Z,fixed.
MRM-1641,olamy,Olivier Lamy (*$^%`),2012-07-10T08:30:14.946Z,2012-07-10T08:30:14.946Z,I have committed a small fix for that.Can you test ? (Perso I cannot reproduce)
MRM-1641,erouan,Antoine ROUAZE,2012-07-11T10:45:59.609Z,2012-07-11T10:45:59.609Z,It works perfectly. 
MRM-1663,olamy,Olivier Lamy (*$^%`),2012-09-10T09:13:20.576Z,2012-09-10T09:13:20.576Z,"applied.
Thanks!"
MRM-1633,cipi,Ciprian Ciubotariu,2016-05-30T15:56:00.998Z,2016-05-30T15:56:00.998Z,"I believe this issue is already resolved in 2.2.0, within the System Status page, Repository Scans Currently in Progress."
MRM-1661,alecharp,Adrien Lecharpentier,2012-09-10T04:58:17.233Z,2012-09-10T04:58:17.233Z,"Sorry, the first patch included too many lines of modification."
MRM-1661,olamy,Olivier Lamy (*$^%`),2012-09-10T05:22:52.602Z,2012-09-10T05:22:52.602Z,"applied.
Thanks!"
MRM-1621,olamy,Olivier Lamy (*$^%`),2012-05-29T11:35:44.59Z,2012-05-29T11:35:44.59Z,done
MRM-1608,jbonofre,Jean-Baptiste Onofr,2012-02-27T07:18:29.493Z,2012-02-27T07:18:29.493Z,Revision 1294143
MRM-1692,charlesk40,charles kim,2012-10-11T16:40:25.594Z,2012-10-11T16:40:25.594Z,Please disregard spring-context_patch.xml file.
MRM-1692,olamy,Olivier Lamy (*$^%`),2012-10-11T17:48:39.61Z,2012-10-11T17:48:39.61Z,"applied.
Thanks"
MRM-1659,Chris Harris,Chris Harris,2012-09-06T17:02:55.696Z,2012-09-06T17:02:55.696Z,"I wanted to mention that I did not receive this error when I ran the .war from CATALINA_HOME.  My problem still isn't solved.  I want to run Archiva from a Tomcat base, not the installation.

I originally had a System Environment variable %CATALINA_BASE_ARCHIVA%.  To test the .war in CATALINA_HOME, I removed that Environment variable.

Next, I changed -Dappserver.home=%CATALINA_HOME% -Dappserver.base=%CATALINA_ARCHIVA_BASE% to -Dappserver.home=%CATALINA_HOME% -Dappserver.base=%CATALINA_HOME%"
MRM-1659,Chris Harris,Chris Harris,2012-09-09T16:41:55.858Z,2012-09-09T16:41:55.858Z,"I have an update on this situation.  I was able to get Archiva running from CATALINA_HOME using the default Jackrabbit content repository (no db involved).  Once I was able to get M3 working, I modified repository.xml to point to my PostgreSQL 9.1 installation and deleted the entire /data/jcr directory structure that gets automatically created.  Archiva worked!  But then...

I shut down my laptop for the day and rebooted the next morning.  Archiva no longer worked...  On top of that, the PostgreSQL error reared its ugly head again.

This seems to be a problem just on Windows?  Please help.  I would really like to use your fine product/solution.  I'm trying to get a very large organization set up right.  I don't want to go with Artifactory, simply because I'm not fond of having a carrot dangled in front of me in terms of paying for plug-ins.

I tried downloading the Archiva source on my Win XP laptop for work, but the Archiva project package structure is so long that it exceeds the directory path length limit allotted for 32-bit Windows...argh.  I'd put it on my personal Ubuntu laptop, but that does me no good.  I'd like to debug the project on a Windauz box to get to the bottom of this issue.  Either way, I just need some help even getting Archiva to run with everything stored in PostgreSQL."
MRM-1659,Chris Harris,Chris Harris,2012-09-09T23:13:16.816Z,2012-09-09T23:13:16.816Z,"I was able to get my Tomcat base %CATALINA_BASE_ARCHIVA% working with M3 using MySQL 5.5!  I can download artifacts via the method mentioned on your ""Quick Start"" page.  I can also browse and see that junit artifact listed!

As far as PostgreSQL, this link might help provide a clue as to how to resolve the issue: http://mybatis-user.963551.n3.nabble.com/quot-org-postgresql-jdbc4-Jdbc4PreparedStatement-setQueryTimeout-int-is-not-yet-implemented-quot-Prom-td2002356.html

It seems that their fix was to exclude some timeout setting (possibly specific to myBatis) or to include this dependency:
     <dependency>
       <groupId>cglib</groupId>
       <artifactId>cglib</artifactId>
       <version>2.1_3</version>
     </dependency>"
MRM-1659,Chris Harris,Chris Harris,2012-09-20T22:40:04.898Z,2012-09-20T22:40:04.898Z,"I encountered an error with the users database with Continuum using MySQL 5.5.  I think that it's ridiculous to modify an exploded .war, so I tried my luck with the new PostgreSQL 9.2 and the newest PostgreSQL driver (the one for JDK 1.6/1.7).  It worked with Continuum, so I tried my hand with Archiva again (I wanted to share the users database between the two apps).

It worked!"
MRM-1659,olamy,Olivier Lamy (*$^%`),2012-09-21T02:26:33.709Z,2012-09-21T02:26:33.709Z,"Apologize for delay on that.
So I have added
{code}
      <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
      </dependency>
{code}
Doesn't look to have any side effect.
Let us know.
If you are using builds from https://builds.apache.org/view/A-F/view/Archiva/job/archiva-all-maven-3.x-jdk-1.6/ that will be available with #1498"
MRM-1659,Chris Harris,Chris Harris,2012-09-21T09:55:29.138Z,2012-09-21T09:55:29.138Z,"Olivier,

I'm using a version of that last got a blue light.  I think it was #1486.  You can probably remove that dependency.  Thanks for putting it in there though.

I think that you can close this Bug."
MRM-1698,olamy,Olivier Lamy (*$^%`),2012-10-16T17:06:04.924Z,2012-10-16T17:06:04.924Z,fixed.
MRM-1668,olamy,Olivier Lamy (*$^%`),2012-09-13T17:11:10.158Z,2012-09-13T17:11:10.158Z,fixed.
MRM-1642,olamy,Olivier Lamy (*$^%`),2012-07-11T09:42:47.592Z,2012-07-11T09:42:47.592Z,"fixed.
Try again.
"
MRM-1619,olamy,Olivier Lamy (*$^%`),2012-04-02T14:29:34.525Z,2012-04-02T14:29:34.525Z,fixed [r1308494|http://svn.apache.org/viewvc?rev=1308494&view=rev]
MRM-1655,olamy,Olivier Lamy (*$^%`),2012-07-28T16:00:17.197Z,2012-07-28T16:00:17.197Z,"applied.
Thanks!"
MRM-1685,olamy,Olivier Lamy (*$^%`),2012-10-08T09:56:52.443Z,2012-10-08T09:56:52.443Z,"Fixed.
Thanks for the report!
"
MRM-1684,olamy,Olivier Lamy (*$^%`),2012-12-20T06:29:33.876Z,2012-12-20T06:29:33.876Z,fixed http://svn.apache.org/r1424433
MRM-1694,olamy,Olivier Lamy (*$^%`),2012-10-15T04:06:09.763Z,2012-10-15T04:06:09.763Z,I tend to say we won't support 1.3.x release series as we have remove database in 1.4.x which is very faster !
MRM-1694,motofix,Julien Bti,2012-10-15T05:10:02.792Z,2012-10-15T05:10:02.792Z,"Thank you for your reply. I have successfully migrated to 1.4-M3 few minutes ago, and I do not have the problem any-more."
MRM-1694,brettporter,Brett Porter,2014-05-29T20:11:45.236Z,2014-05-29T20:11:45.236Z,"For anyone still facing this in 1.3.x, it seems the Individual.roles and MailingList.otherArchives fields are stored as a byte array in Postgres and can be handled incorrectly. You can workaround it by executing this on a regular basis:

{code}
update ""ARCHIVA_INDIVIDUAL"" set ""ROLES"" = null;
update ""ARCHIVA_MAILING_LISTS"" set ""OTHER_ARCHIVES"" = null;
{code}"
MRM-1657,olamy,Olivier Lamy (*$^%`),2012-08-23T15:54:46.479Z,2012-08-23T15:54:46.479Z,"fixed.
Thanks for reporting!"
MRM-1617,olamy,Olivier Lamy (*$^%`),2012-03-15T17:33:21.063Z,2012-03-15T17:33:21.063Z,implemented.
MRM-1640,olamy,Olivier Lamy (*$^%`),2012-07-05T08:55:44.459Z,2012-07-05T08:55:44.459Z,"applied.
Thanks!"
MRM-1609,skygolanur,Eric Barboni,2012-02-29T06:33:36.466Z,2012-02-29T06:33:36.466Z,maybe the removeproxyConnector  can be done in testGatherSnapshotVersionsAWithProxies instead of testGatherSnapshotVersionsA to be more local.
MRM-1609,olamy,Olivier Lamy (*$^%`),2012-02-29T07:55:32.843Z,2012-02-29T07:55:32.843Z,"thanks but could you generate your patch from the top directory ?
It's more convenient for me to apply it with a better index :-)"
MRM-1609,olamy,Olivier Lamy (*$^%`),2012-02-29T07:59:45.858Z,2012-02-29T07:59:45.858Z,"nevermind I will apply it.
But can be friendly for next patches :P"
MRM-1609,olamy,Olivier Lamy (*$^%`),2012-02-29T08:07:28.155Z,2012-02-29T08:07:28.155Z,"fixed [r1295115|http://svn.apache.org/viewvc?rev=1295115&view=rev]
Thanks!"
MRM-1609,skygolanur,Eric Barboni,2012-02-29T09:52:42.494Z,2012-02-29T09:52:42.494Z,"This patch is for CachedFailuresPolicyTest.

Previous version of test failed if YesInCache was executed first. 
Because the YesNotInCache raised an non expected exeception.


Sorry for the code formating :( 
Don't know how to set apache style in my netbeans.

I try to have a better index. 

"
MRM-1609,olamy,Olivier Lamy (*$^%`),2012-02-29T10:04:06.323Z,2012-02-29T10:04:06.323Z,"fixed r1295169 
Thanks for the index :P"
MRM-1609,skygolanur,Eric Barboni,2012-03-01T08:55:35.999Z,2012-03-01T08:55:35.999Z,Other Test fail in ArchivaRepositoryScanning
MRM-1609,skygolanur,Eric Barboni,2012-03-01T09:00:39.563Z,2012-03-01T09:00:39.563Z,"Point 1

ArchivaRepositoryScanningTest was failing if TestExecutor running last.

Split test in 2 and as archiva surefire use class ordering alphabetical it should pass

Point 2
make test workflow nicer

testGatherSnapshotVersionsAWithProxies now go back to initial proxyconfiguration
instead 

testGatherSnapshotVersionsA no more deals with proxyconfiguration"
MRM-1609,olamy,Olivier Lamy (*$^%`),2012-03-01T10:39:39.971Z,2012-03-01T10:39:39.971Z,can you please provide only one patch file ? :-)
MRM-1609,skygolanur,Eric Barboni,2012-03-01T10:56:19.098Z,2012-03-01T10:56:19.098Z,GatherSnapshotVersionA and WhitProxies more independant
MRM-1609,skygolanur,Eric Barboni,2012-03-01T10:57:00.435Z,2012-03-01T10:57:00.435Z,ArchivaRepositoryScheduler test
MRM-1609,olamy,Olivier Lamy (*$^%`),2012-03-01T11:08:30.829Z,2012-03-01T11:08:30.829Z,"applyed
Thanks ! :-)"
MRM-1623,olamy,Olivier Lamy (*$^%`),2012-04-12T17:05:42.069Z,2012-04-12T17:05:42.069Z,fixed r1325546
MRM-1662,olamy,Olivier Lamy (*$^%`),2012-09-10T05:24:38.691Z,2012-09-10T05:24:38.691Z,"applied.
Thanks!"
MRM-1618,olamy,Olivier Lamy (*$^%`),2012-03-20T17:54:25.426Z,2012-03-20T17:54:25.426Z,jbonofre any idea on that ?
MRM-1618,jbonofre,Jean-Baptiste Onofr,2012-03-21T00:18:48.49Z,2012-03-21T00:18:48.49Z,"The easiest way is to register the Archiva in Karaf etc/org.ops4j.pax.url.mvn.cfg (in the repositories property).

Once done, you can directly bundle (using osgi:install or bundle:install), register features URL, etc.

Anyway you are right regarding the documentation, I will add a section in the Archiva documentation how to use it with Karaf."
MRM-1643,brettporter,Brett Porter,2012-07-14T17:11:41.745Z,2012-07-14T17:11:41.745Z,This would be a non-issue in 1.4-M2 due to the change in metadata storage mechanism.
MRM-1643,brettporter,Brett Porter,2012-07-14T17:12:58.562Z,2012-07-14T17:12:58.562Z,"Thanks for the report. We don't currently plan to make further changes to 1.3.x other than security fixes, so hopefully 1.4 will address this for you when it is released."
MRM-1643,vsigler,Vojtech Sigler,2012-08-01T15:50:41.725Z,2012-08-01T15:50:41.725Z,"Yes, I've just tried with 1.4-M2 and the problem is no longer there."
MRM-1626,olamy,Olivier Lamy (*$^%`),2012-04-19T04:24:21.978Z,2012-04-19T04:24:21.978Z,"fixed r1327887
Thanks!"
MRM-1697,olamy,Olivier Lamy (*$^%`),2012-10-16T03:41:56.668Z,2012-10-16T03:41:56.668Z,"already fixed :-) in trunk
rev 1397492 http://svn.apache.org/viewvc?view=revision&revision=1397492"
MRM-1673,Chris Harris,Chris Harris,2012-09-14T14:36:25.284Z,2012-09-14T14:36:25.284Z,The first richfaces-api package path contains no artifact (I've noticed that orange magnifying glass symbol advertises that an artifact is present within).  The second richfaces-api package path contains an artifact.  I did not manually create either.
MRM-1673,Chris Harris,Chris Harris,2012-09-14T14:36:30.182Z,2012-09-14T14:36:30.182Z,"Additionally, there's another problem I'm experiencing with the richfaces-api .jar

I assume since this particular artifact had no .pom, and I instructed Archiva to generate a .pom, 2 package paths were created.  One of the package paths actually contains an artifact.  The other does not.  Consult the screen shot for more clarity."
MRM-1673,Chris Harris,Chris Harris,2012-09-14T14:38:27.456Z,2012-09-14T14:38:27.456Z,"The plot thickens...

I deleted the first package that contained no richfaces-api artifact, and it deleted both of the package paths."
MRM-1673,olamy,Olivier Lamy (*$^%`),2012-09-24T09:51:16.802Z,2012-09-24T09:51:16.802Z,"maybe a side effect of MRM-1673.
Can you try again with fresh version ?"
MRM-1673,Chris Harris,Chris Harris,2012-09-24T22:10:37.641Z,2012-09-24T22:10:37.641Z,"Olivier,

I think you meant to provide a hyperlink to another issue.

O.K. I've spent about the last 3 hours trying to recreate this bug.  I've gotten inconsistent behavior every time I've tried to upload the .jar and .pom, which always results in undesirable results.

The problems start upon the 1st upload attempt of the .jar & .pom.  I can successfully upload the .jar & .pom, but, when I inspect the uploaded artifacts via Browse, I see either just a .jar and no .pom.

So, I try manually deleting group Id packages on the ""Browse"" page (*that's a whole other problem).

Upon subsequent upload attempts after deletion, I see:
a.) 2 .jar's (the .pom has been uploaded as a .jar)
b.) a messed-up looking group Id that contains no artifacts inside of it.

This brings to light the question, ""How exactly do you upload a .jar & .pom?

The instructions at http://archiva.apache.org/docs/1.4-M3-SNAPSHOT/userguide/deploy.html are nice, but they don't explicitly state whether I have to declare a packing of pom when I pick a pom for ""Choose File"" and upload it.  I'm also not sure whether or not I'm supposed to check ""pom file"" (I assume that I do).  I'm also not sure what to do with Classifier.  I'm including screen shots on a subsequent attempt after my 1st upload attempt & deletion.

*Manually deleting can be a pain.  I keep deleting a parent package, and I'm told that the artifact was deleted after I press ""ok"".  Once the screen refreshes, I'm still staring at the package that I supposedly just deleted.  Furthermore, when item b from above happens, I'll delete a Group Id package, and then the package chain will shrink by one package.  I'll delete the next package, and the previous package comes back.  This back and forth continues.  The only way that I can overcome both of these scenarios is if I log out, hold the shift key while I refresh the page, and then log back in and ACTUALLY delete the Group Id packages.  Sometimes, it takes 2 times of logging out/logging in to be able to actually delete the Group Id packages.  I'll attach screen shots for this as well.  They'll be appropriately labeled."
MRM-1673,Chris Harris,Chris Harris,2012-09-24T22:19:59.96Z,2012-09-24T22:19:59.96Z,"Sorry, Olivier.  I'd put the delete section in another bug, but my deletion problems may only be a result of my in ability to figure out how to upload via the Web UI.

Lol, I can upload both the .jar and the .pom with no issues via the mvn deploy:deploy-file command and also via <snapshotRepository> in the .pom (for SNAPSHOT artifacts of course), but I can't figure it out via the Web UI.  Go figure.  lol."
MRM-1605,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2012-09-07T06:49:51.289Z,2012-09-07T06:49:51.289Z,"You mean that we can delete only the artifact it self(jar or war). And the folder hierarchy and the metadata files , sh and md files are not deleted. Is it ? 
And If this issue is still available I would like to work on this.
"
MRM-1605,qixnwfnw,qixnwfnw,2012-09-07T07:39:15.573Z,2012-09-07T07:39:15.573Z,"
Details

    Type: New Feature New Feature
    Status: Resolved Resolved
    Priority: Major Major
    Resolution: Fixed
    Affects Version/s: None
    Fix Version/s: SCMSTATS-0.1
    Component/s: SCM Stats
    Labels:
    None

    Number of attachments :
    0

Activity

    All
    Comments
    Work Log
    History
    Activity

qixnwfnw added a comment - 07/Sep/12 7:38 AM

ONLINE STORE :
==== ( http://zzb.bz/LNmmL ) =====

n2012 comes, in order to thank everyone, characteristic, novel style, varieties, low price and good quality, and the low sale price. Thank everyone

free shipping

competitive price

any size available

accept the paypal

jordan shoes $32

nike shox $32

Christan Audigier bikini $23

Ed Hardy Bikini $23

Smful short_t-shirt_woman $15

ed hardy short_tank_woman $16

Sandal $32

christian louboutin $80

Sunglass $15

COACH_Necklace $27

handbag $33

AF tank woman $17

puma slipper woman $30
==== ( http://zzb.bz/LNmmL ) =====

    Comment

"
MRM-1605,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2012-09-08T06:34:49.47Z,2012-09-08T06:34:49.47Z,Does the above comment is about this issue ? It does not make any sense for me.
MRM-1630,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2012-09-11T22:22:25.062Z,2012-09-11T22:22:25.062Z,"I would like to suggest following approach for this. 

* We need to click, start upload button when we drop an artifact in to the upload page. Once we click it following process will take place
{code:xml}
<button type=""submit"" class=""btn btn-primary start"">
          <i class=""icon-upload icon-white""></i>
          <span>${$.i18n.prop('fileupload.start')}</span>
  </button>
{code} 
This button posts the form in to following service.
http://localhost:9091/archiva/restServices/archivaUiServices/fileUploadService

From the server side we can test the files is a pom file or not. If it is a pom file we can parse the pom and get the artifact details. 

What I am suggesting is to have an On-click event on above button and if it is a pom file , then in the success scenario of java script form submission fill the artifact info text fields.

Could you please give me a feed back.

Thanks
"
MRM-1615,olamy,Olivier Lamy (*$^%`),2012-03-26T06:00:25.33Z,2012-03-26T06:00:25.33Z,done
MRM-1656,brettporter,Brett Porter,2012-07-31T23:19:49.094Z,2012-07-31T23:19:49.094Z,I'm not able to reproduce this. What platform / JDK are you building on? What are the contents of {{redback-users/redback-users-providers/redback-users-cached/target/surefire-reports/org.apache.archiva.redback.users.cached.CachedUserManagerTest.txt}} ?
MRM-1656,BigMichi1,Michael Cramer,2012-08-01T00:47:33.091Z,2012-08-01T00:47:33.091Z,i'm building on win xp with jdk 1.7.0_04 and maven 3.0.4
MRM-1656,skygolanur,Eric Barboni,2012-08-01T05:17:53.618Z,2012-08-01T05:17:53.618Z,"According to the TEST*.xml test order differ from method order in the TestClass.

getMethod ( http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getMethods%28%29 ) jdk6 and lovergive list of method in order of declaration in the java. (This was a bug solve in jdk7 windows implementation seems now to be more random).  JUnit is based on this method.


http://jira.codehaus.org/browse/MRM-1638 introduce a test module to be able random on jdk 6. 
org.apache.archiva
1.4-M3-SNAPSHOT
archiva-test-utils


Current tests are not ""independent"". (On archiva build I currently have more than 10 modules not working because of that)


I you need to build anyway use the following directive -Dmaven.test.skip=true
"
MRM-1656,olamy,Olivier Lamy (*$^%`),2012-08-01T05:25:45.589Z,2012-08-01T05:25:45.589Z,what about moving the archiva hack in a common module in redback components to fix that ?
MRM-1656,skygolanur,Eric Barboni,2012-08-01T06:52:09.393Z,2012-08-01T06:52:09.393Z,"Good idea. It will help fixing. 

Is it possible to make archiva-test-utils a dependencies of surefire plugin so it's everywhere surefire is used in archiva ?"
MRM-1656,olamy,Olivier Lamy (*$^%`),2012-08-01T06:58:16.199Z,2012-08-01T06:58:16.199Z,nope for surefire dependencies as the test vm is forked so it doesn't contains plugin dependencies but only project dependencies.
MRM-1656,olamy,Olivier Lamy (*$^%`),2012-08-01T07:34:29.573Z,2012-08-01T07:34:29.573Z,"grhh cannot reproduce on osx :-(
{code}
mbp-olamy:redback-core-git olamy$ mvn -v
Apache Maven 3.0.5-SNAPSHOT (rNON-CANONICAL_2012-07-30_15-17_olamy; 2012-07-30 15:17:15+0200)
Maven home: /Users/olamy/softs/maven/trunk
Java version: 1.7.0_05, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home/jre
Default locale: fr_FR, platform encoding: UTF-8
OS name: ""mac os x"", version: ""10.8"", arch: ""x86_64"", family: ""mac""
{code}"
MRM-1656,skygolanur,Eric Barboni,2012-08-01T11:33:55.273Z,2012-08-01T11:33:55.273Z,"Well, after configuring ""stress test"" localy for redback I think problem is not from test being random.

* Sometime run fine with 10time the testcase.
* Sometime fail but fail only in the first method (1 out of 130). 


I have not enough experience in redback so I do some ""hardcore"" investigation :p 

Failure happens if getEventTracker().countInit get incremented twice before the following line
   assertEquals( 1, getEventTracker().countInit ) in the test method body



*  getEventTracker().userManagerInit( true ); {color:red}count for 1 increment in any case{color}

   the second increment comes from the getUsers triggering an INIT as database was not inited previously [1]

*   assertEquals( ""New UserManager should contain no users. "" + userManager.getUsers(), 0, userManager.getUsers().size() ); {color:red}count for 2 and failed{color}.

As test with JDK start with testFindUserByNullPrincipal there is no check against countInit and userdatabase will be inited for the next.

*To ensure reproductibily*:
move testAddFindUserByPrincipal before testFindUserByNullPrincipal


[1] reverse trace
{code:java}
org.apache.archiva.redback.users.cached.CachedUserManager.getUsers(CachedUserManager.java:213)
org.apache.archiva.redback.users.memory.MemoryUserManager.getUsers(MemoryUserManager.java:316)
org.apache.archiva.redback.users.memory.MemoryUserManager.triggerInit(MemoryUserManager.java:331)
org.apache.archiva.redback.users.AbstractUserManager.fireUserManagerInit(AbstractUserManager.java:60)
org.apache.archiva.redback.users.provider.test.UserManagerEventTracker.userManagerInit(UserManagerEventTracker.java:50)
{code}"
MRM-1656,olamy,Olivier Lamy (*$^%`),2012-09-05T09:30:36.971Z,2012-09-05T09:30:36.971Z,fixed now ?
MRM-1656,skygolanur,Eric Barboni,2012-09-05T09:48:17.574Z,2012-09-05T09:48:17.574Z,"

This particular test is fixed.


Is it possible to make MRM-1656 subtask of  MRM-1638 ?"
MRM-1656,skygolanur,Eric Barboni,2012-09-05T14:26:33.206Z,2012-09-05T14:26:33.206Z,after r1380883 reback test seem more jdk7 safe
MRM-1610,olamy,Olivier Lamy (*$^%`),2012-03-01T08:27:17.407Z,2012-03-01T08:27:17.407Z,fixed
MRM-1687,olamy,Olivier Lamy (*$^%`),2012-10-10T15:00:42.308Z,2012-10-10T15:00:42.308Z,"chrome issue as it works on safari and ff.
Grhh.
javascript sort doesn't work similar. I have to change a bit"
MRM-1687,olamy,Olivier Lamy (*$^%`),2012-10-10T15:12:26.532Z,2012-10-10T15:12:26.532Z,"fixed.
Thanks for the report."
MRM-1687,predatorvi,Jeff Vincent,2012-10-10T15:23:48.311Z,2012-10-10T15:23:48.311Z,"You bet!  I really like the new interface, particularly the ability to delete artifacts (as an admin) in-context."
MRM-1653,alecharp,Adrien Lecharpentier,2012-08-07T06:39:56.261Z,2012-08-07T06:39:56.261Z,"Just to be sure, I try the same command (mvn clean install -DskipTests) with jdk1.6. The exact same problem.

I'm using jdk from Apple (1.6):
 - Java version: 1.6.0_33, vendor: Apple Inc.
or Oracle (1.7):
 - Java version: 1.7.0_05, vendor: Oracle Corporation"
MRM-1653,olamy,Olivier Lamy (*$^%`),2012-08-07T09:28:45.691Z,2012-08-07T09:28:45.691Z,fixed.
MRM-1611,olamy,Olivier Lamy (*$^%`),2012-03-01T04:29:37.007Z,2012-03-01T04:29:37.007Z,fixed  [r1295497|http://svn.apache.org/viewvc?rev=1295497&view=rev]
MRM-1682,olamy,Olivier Lamy (*$^%`),2012-10-02T11:37:27.291Z,2012-10-02T11:37:27.291Z,"hehe In fact it's already fix :-)
I just missed to deploy a new version to archiva-repository.a.o."
MRM-1646,brettporter,Brett Porter,2012-07-31T23:11:16.846Z,2012-07-31T23:11:16.846Z,"We'll keep this for review, but we're putting in a new UI for Archiva 1.4 that may make this bug redundant.

In the mean time, you can correct it by stopping Archiva, removing the line from archiva.xml, and restarting."
MRM-1667,olamy,Olivier Lamy (*$^%`),2012-09-11T04:11:57.921Z,2012-09-11T04:11:57.921Z,"Applied.
Thanks !!"
MRM-1614,olamy,Olivier Lamy (*$^%`),2012-03-03T04:25:19.696Z,2012-03-03T04:25:19.696Z,"fixed r1296592
Thanks!"
MRM-1614,skygolanur,Eric Barboni,2012-03-23T19:04:38.537Z,2012-03-23T19:04:38.537Z,javascript type to application/javascript just for modernity.
MRM-1614,olamy,Olivier Lamy (*$^%`),2012-03-24T13:26:11.227Z,2012-03-24T13:26:11.227Z,"@Eric I'm not sure type=""application/javascript"" is supported by ie8 (maybe 9).
I cannot test as I don't windauze here :-)"
MRM-1683,olamy,Olivier Lamy (*$^%`),2012-10-04T17:43:32.029Z,2012-10-04T17:43:32.029Z,finally enunciate looks great ! (I didn't have a look for long time :-) )
MRM-1683,olamy,Olivier Lamy (*$^%`),2012-10-05T15:45:24.088Z,2012-10-05T15:45:24.088Z,fixed. both in the doc site and in the ui.
MRM-1622,saschavogt,Sascha Vogt,2012-04-10T08:26:16.409Z,2012-04-10T08:26:16.409Z,"Further debugging revealed:
# The purge consumer calls ManagedRepositoryContent.getRelatedArtifacts()
# The set returns only contains ArtifactReferences which only have a type, not an extension
# The purge consumer converts the references back to actual files, where the type gets translated to it's default extension

Now, as type ""javadoc"" always gets translated to .jar, -javadoc.zips will never be purged. 

So actually it has nothing to do, if an artifact is deployed twice with a different extension - it just refers to the type / extension mapping (see ArtifactExtensionMapping). If one uses one of the known types with a different extension, then purge will never clean these up.

I propose raising the priority for that."
MRM-1622,saschavogt,Sascha Vogt,2014-04-24T04:16:53.46Z,2014-04-24T04:16:53.46Z,This is fixed in 2.x - closing
MRM-1689,predatorvi,Jeff Vincent,2012-10-10T15:33:17.357Z,2012-10-10T15:33:17.357Z,Oops...didn't finish the title/subject line :(
MRM-1689,olamy,Olivier Lamy (*$^%`),2012-10-10T16:55:51.814Z,2012-10-10T16:55:51.814Z,good idea!
MRM-1689,olamy,Olivier Lamy (*$^%`),2012-10-11T14:27:58.816Z,2012-10-11T14:27:58.816Z,fixed
MRM-1670,skygolanur,Eric Barboni,2012-09-13T04:05:52.39Z,2012-09-13T04:05:52.39Z,"Hi Chris the configuration used by service may be located in a different place than the standalone one.

You may have ~/.m2/archiva.xml configuration file in your home if you run from command prompt

but another archiva.xml may live at another place for the user in charge of the service.

If your allowed to do so I would try a full search on drive to see archiva.xml and check file modification time.  "
MRM-1670,Chris Harris,Chris Harris,2012-09-13T09:40:59.72Z,2012-09-13T09:40:59.72Z,"I'm glad you pointed that out.  I indeed found another archiva.xml that I didn't create, but it's located under ${appserver.base}/conf.  The archiva.xml that I created is under ${appserver.base}/conf/Catalina/localhost.  There is an additional archiva.xml under C:\Documents and Settings\<username>\.m2.

I'm still using Archiva as a service, so the only archiva.xml with a timestamp for today is the one located at ${appserver.base}/conf.  I wasn't expecting that since the .war installation instructions tell me to put archiva.xml in ${appserver.base}/conf/Catalina/localhost.

Nonetheless, thank you for pointing this out.  I never would have thought that the .war running on Tomcat as a service would create and use a config file elsewhere than if it weren't a service."
MRM-1670,skygolanur,Eric Barboni,2012-09-13T11:12:50.847Z,2012-09-13T11:12:50.847Z," ${appserver.base}/conf/Catalina/localhost/archiva.xml is the Context configuration.

 but the archiva.xml located in C:\Documents and Settings\<username>\.m2  or  ${appserver.base}/conf are the archiva configuration file (with repos and so on)

archiva service in windows is not started as <username> but as local system with no home so archiva will default to ${appserver.base}/conf

you may try to use Services Control Panel (services.msc on windows 7) to make archiva service run as <username>."
MRM-1670,Chris Harris,Chris Harris,2012-09-13T11:24:03.338Z,2012-09-13T11:24:03.338Z,"Understood, Eric.

Thanks for the clarification."
MRM-1645,charlesk40,charles kim,2012-07-20T12:48:38.017Z,2012-07-20T12:48:38.017Z,"I created some what hacky patch. Feel free to change it.
Thanks!"
MRM-1645,olamy,Olivier Lamy (*$^%`),2012-07-30T09:40:47.515Z,2012-07-30T09:40:47.515Z,"patch applied.
Thanks !"
MRM-1658,olamy,Olivier Lamy (*$^%`),2012-09-13T16:16:51.796Z,2012-09-13T16:16:51.796Z,"is that still valid ?
I see some changes in Maven2RepositoryStorage regarding that."
MRM-1658,skygolanur,Eric Barboni,2012-09-13T16:44:41.205Z,2012-09-13T16:44:41.205Z,"this is not complete yet(nned more review).

parent resolution for an artifact (release) with a parent (snapshot) will try to find parent in all release repo with no luck

lacking of log for the moment will have that later

thks for postponing"
MRM-1629,olamy,Olivier Lamy (*$^%`),2012-05-25T16:25:39.395Z,2012-05-25T16:25:39.395Z,"emails done.
Still download urls of artifacts to do."
MRM-1602,jdm@powercosts.com,J.D. Montgomery,2012-02-10T11:14:34.934Z,2012-02-10T11:14:34.934Z,"After upgrading to 1.3.5 to resolve this issue in 1.3.1, we still experience the ERROR logs.

{noformat}

2012-02-10 00:00:08,682 [pool-2-thread-1] ERROR org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure  - Consumer [repository-purge] had an error when processing file [E:\archiva\data\repositories\snapshots\.index\nexus-maven-repository-index.zip]: Not enough parts to the path [.index\nexus-maven-repository-index.zip] to construct an ArchivaArtifact from. (Requires at least 4 parts)
org.apache.maven.archiva.consumers.ConsumerException: Not enough parts to the path [.index\nexus-maven-repository-index.zip] to construct an ArchivaArtifact from. (Requires at least 4 parts)
	at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:180)
	at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:187)
	at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:61)
	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:161)
	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:174)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:392)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:345)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:125)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:67)
	at org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:141)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Unknown Source)
{noformat}

Why else could this issue be occurring?"
MRM-1602,brettporter,Brett Porter,2012-02-14T22:19:41.967Z,2012-02-14T22:19:41.967Z,We will take a look
MRM-1602,kumi,Michael,2012-04-04T03:24:08.049Z,2012-04-04T03:24:08.049Z,"We have the same error (archiva 1.3.5)

org.apache.maven.archiva.consumers.ConsumerException: Not enough parts to the path [.index\nexus-maven-repository-index.zip] to construct an ArchivaArtifact from. (Requires at least 4 parts)
.
.
.


See the causes.

Caused by: org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeException: Not enough parts to the path [.index\nexus-maven-repository-index.zip] to construct an ArchivaArtifact from. (Requires at least 4 parts)
	at org.apache.maven.archiva.consumers.core.repository.RetentionCountRepositoryPurge.process(RetentionCountRepositoryPurge.java:99)
	at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:176)
	... 18 more


Caused by: org.apache.maven.archiva.repository.layout.LayoutException: Not enough parts to the path [.index\nexus-maven-repository-index.zip] to construct an ArchivaArtifact from. (Requires at least 4 parts)
	at org.apache.maven.archiva.repository.content.DefaultPathParser.toArtifactReference(DefaultPathParser.java:65)
	at org.apache.maven.archiva.repository.content.AbstractDefaultRepositoryContent.toArtifactReference(AbstractDefaultRepositoryContent.java:54)
	at org.apache.maven.archiva.repository.content.ManagedDefaultRepositoryContent.toArtifactReference(ManagedDefaultRepositoryContent.java:340)
	at org.apache.maven.archiva.consumers.core.repository.RetentionCountRepositoryPurge.process(RetentionCountRepositoryPurge.java:65)
	... 19 more


"
MRM-1613,olamy,Olivier Lamy (*$^%`),2012-03-01T15:02:52.944Z,2012-03-01T15:02:52.944Z,"Did you have a look at this page: http://archiva.apache.org/docs/1.4-M3-SNAPSHOT/adminguide/customising-security.html
create a file in ${appserver.base}/conf/security.properties
with the line:
application.url=http://myurl.mycompany.com

But I agree this must be configurable more easily :-)"
MRM-1613,alexlehm,Alexander Lehmann,2012-03-01T15:26:03.267Z,2012-03-01T15:26:03.267Z,"thanks, that is exactly what i was looking for, I just didn't know where to look

"
MRM-1613,alexlehm,Alexander Lehmann,2012-03-01T15:26:34.865Z,2012-03-01T15:26:34.865Z,"already implemented

"
MRM-1669,skygolanur,Eric Barboni,2012-09-13T15:03:06.229Z,2012-09-13T15:03:06.229Z,"this seems related to the depth of the path where archiva code base is located.

Maybe surefire issue."
MRM-1675,olamy,Olivier Lamy (*$^%`),2012-09-24T17:22:51.008Z,2012-09-24T17:22:51.008Z,fixed with MRM-1674
MRM-1681,olamy,Olivier Lamy (*$^%`),2012-10-03T01:43:32.293Z,2012-10-03T01:43:32.293Z,done.
MRM-1664,olamy,Olivier Lamy (*$^%`),2012-09-14T11:25:50.48Z,2012-09-14T11:25:50.48Z,"fixed.
Thanks for reporting."
MRM-1664,Chris Harris,Chris Harris,2012-09-14T12:00:07.445Z,2012-09-14T12:00:07.445Z,"Thanks, Olivier!

You're welcome.  Keep stomping on them bugs!"
MRM-1607,olamy,Olivier Lamy (*$^%`),2012-02-26T03:07:55.221Z,2012-02-26T03:07:55.221Z,fixed r1293788
MRM-1676,olamy,Olivier Lamy (*$^%`),2012-09-24T11:16:30.801Z,2012-09-24T11:16:30.801Z,fixed.
MRM-1686,olamy,Olivier Lamy (*$^%`),2012-10-09T03:31:04.963Z,2012-10-09T03:31:04.963Z,done.
MRM-1649,olamy,Olivier Lamy (*$^%`),2012-07-30T08:52:20.846Z,2012-07-30T08:52:20.846Z,must be fixed with the new ui.
MRM-1649,olamy,Olivier Lamy (*$^%`),2012-07-30T09:23:39.478Z,2012-07-30T09:23:39.478Z,dupe of MRM-1563
MRM-1606,olamy,Olivier Lamy (*$^%`),2012-02-17T05:36:51.387Z,2012-02-17T05:36:51.387Z,fixed r1245404
MRM-1695,olamy,Olivier Lamy (*$^%`),2012-11-23T03:45:52.983Z,2012-11-23T03:45:52.983Z,fixed.
MRM-1647,skygolanur,Eric Barboni,2012-07-27T08:29:46.658Z,2012-07-27T08:29:46.658Z,"As you build 1.4-M3 
On https://builds.apache.org/view/A-F/view/Archiva/job/archiva-all-maven-3.x-jdk-1.6/ you may find the new UI archiva-webapp-js-1.4-M3-SNAPSHOT.war with improved upload UI. 

I use this one but on tomcat.

"
MRM-1647,brettporter,Brett Porter,2012-07-31T23:10:18.709Z,2012-07-31T23:10:18.709Z,This does seem like it could be Glassfish specific. Can you confirm if the new UI has the same behaviour on Glassfish?
MRM-1647,vsigler,Vojtech Sigler,2012-08-01T14:42:17.491Z,2012-08-01T14:42:17.491Z,"You're right, it turned out to be a Glassfish bug: http://java.net/jira/browse/GLASSFISH-18444

In 3.1.2 there is a bug that affects multipart form submits. Strange that it did not affect archiva 1.3.5.

After applying the fix it works."
MRM-1647,vsigler,Vojtech Sigler,2012-08-01T14:43:12.759Z,2012-08-01T14:43:12.759Z,Closing since this is a glassfish bug.
MRM-1600,olamy,Olivier Lamy (*$^%`),2012-02-03T14:26:32.411Z,2012-02-03T14:26:32.411Z,duplicate.
MRM-1628,olamy,Olivier Lamy (*$^%`),2012-05-04T14:20:07.826Z,2012-05-04T14:20:07.826Z,"fixed r1334124
Thanks"
MRM-1688,ali65,Albert Kurucz,2012-10-10T12:37:09.274Z,2012-10-10T12:37:09.274Z,"This issue was created in the wrong place, please see: WAGON-377"
MRM-1616,olamy,Olivier Lamy (*$^%`),2012-03-12T07:44:22.498Z,2012-03-12T07:44:22.498Z,"Uhm not sure we need consistent appearance there are separate projects.
BTW I have changed recently design here: http://archiva.apache.org/ ."
MRM-1616,skygolanur,Eric Barboni,2012-03-13T05:23:15.414Z,2012-03-13T05:23:15.414Z,"AFAIK maven continuum and archiva share logo color concept (orange and black typo) That's why in my mind they are kind of subgroup.


Archiva and Continuum share a lot of concept (feature screenshot, get involved, downloads).

I think archiva as a better skin, but continuum as a better organisation ( main page short , menu available)



"
MRM-1616,olamy,Olivier Lamy (*$^%`),2012-06-18T09:13:48.996Z,2012-06-18T09:13:48.996Z,main web site fixed with using fluido skin based on twitter bootstrap as the new ui.
MRM-1650,olamy,Olivier Lamy (*$^%`),2012-07-30T08:50:17.739Z,2012-07-30T08:50:17.739Z,"already implemented in the new ui.
So IMHO won't fix :P"
MRM-1650,olamy,Olivier Lamy (*$^%`),2012-07-30T09:05:43.453Z,2012-07-30T09:05:43.453Z,dupe of MRM-1587 
MRM-1624,oching,Maria Odea Ching,2012-08-17T08:03:19.253Z,2012-08-17T08:03:19.253Z,"Patch applied in -r1374234 with minor adjustments on the description.

Thanks Shane :)"
MRM-1632,joakime,Joakim Erdfelt,2012-06-11T08:46:13.488Z,2012-06-11T08:46:13.488Z,"Relevant part of the problem:

Error creating bean with name 'downloadRemoteIndexScheduler#default': Invocation of init method failed; 
nested exception is java.lang.IllegalArgumentException: cron expression must consist of 6 fields (found 5 in */5 * * * *)

flagging this as ""NOT_A_JETTY_ISSUE"" ;-)
"
MRM-1632,olze,asdf asdf,2012-06-11T09:15:57.496Z,2012-06-11T09:15:57.496Z,"You are right, jetty is still working but cannot load the application, so its a archiva problem."
MRM-1632,brettporter,Brett Porter,2012-06-11T09:47:27.462Z,2012-06-11T09:47:27.462Z,"I think you want an ? on the end of that cron expression. Did you configure that yourself? How did it get through the validation?

I'll add a guard to the code so it just doesn't schedule..."
MRM-1632,olze,asdf asdf,2012-06-11T10:25:42.86Z,2012-06-11T10:25:42.86Z,"I have no idea how i get rid of the validator, but i would recommend not to trust the UI, validation should also be used in the code logic so that evil users like me cannot enter invalid stuff ;)
And yes, i copy/pasted the cronjob from somewhere on the internet, so i just missed the last ?"
MRM-1696,olamy,Olivier Lamy (*$^%`),2012-10-15T12:04:10.314Z,2012-10-15T12:04:10.314Z,"+    @Path( ""metadata/{g}/{a}/{v}"" )
is a bit confused as it's a post here and g/a/v are here in the posted bean.
I would prefer: @Path(""importMetadata"")"
MRM-1696,alecharp,Adrien Lecharpentier,2012-10-15T12:32:35.855Z,2012-10-15T12:32:35.855Z,"ok. I first let this before the metadatas are related to the {g}:{a}:{v} that's why I put this in the URL and for the ""metadata"" it was to have consistency with other URL used for metadata manipulations."
MRM-1696,olamy,Olivier Lamy (*$^%`),2012-10-16T03:26:21.21Z,2012-10-16T03:26:21.21Z,Yup but it's in the new bean you create to post datas.
MRM-1696,alecharp,Adrien Lecharpentier,2012-10-16T03:42:27.093Z,2012-10-16T03:42:27.093Z,Sure. I made the change.
MRM-1627,mmagallanes,mark john magallanes,2012-05-01T12:58:04.988Z,2012-05-01T12:58:04.988Z,"Hi I was able to set up archiva with ldap for my company by using the latest binary distribution and added the file securities.properties in archiva/conf/ with the config found below

PS:  i wasn't able to find any documentation over the net hope this helps :D

#LDAP
user.manager.impl=ldap

# LDAP anonymous bind config
ldap.bind.authenticator.enabled=true

# required LDAP server config
ldap.config.hostname=ldap.company.com
ldap.config.base.dn=dc=ldap,dc=company,dc=com
ldap.config.port=389
ldap.config.context.factory=com.sun.jndi.ldap.LdapCtxFactory
ldap.config.bind.dn=
ldap.config.password=
ldap.config.ssl=false
ldap.config.search.base.dn=

# required LDAP user mapping
ldap.config.mapper.attribute.user.id=uid
ldap.config.mapper.attribute.email=email
ldap.config.mapper.attribute.fullname=name
ldap.config.mapper.attribute.password=userPassword
ldap.config.mapper.attribute.user.object.class=
ldap.config.mapper.attribute.user.filter=

# uid of the ldap user 
redback.default.admin=admin
redback.default.guest=guest

security.policy.password.expiration.enabled=false
security.policy.unlockable.accounts=admin

# cookies settings
# note: we needed to add the following config below it seems
# the default values for this from redback gets overridden when you create
# a securities.properties file

security.rememberme.cookie.name=rbkRememberMe
security.rememberme.key=rbkRememberMe
security.rememberme.timeout=525600
security.rememberme.path=/

security.signon.cookie.name=rbkSignon
security.signon.key=rbkSignon
security.signon.timeout=525600
security.signon.path=/


"
MRM-1627,olamy,Olivier Lamy (*$^%`),2012-05-01T18:09:13.434Z,2012-05-01T18:09:13.434Z,any patch you could provide to improve documentation ?
MRM-1627,olamy,Olivier Lamy (*$^%`),2012-12-20T05:05:10.951Z,2012-12-20T05:05:10.951Z,"All is configurable tru the ui now.
So not anymore needed documentation now :-)"
MRM-1665,olamy,Olivier Lamy (*$^%`),2012-09-11T02:58:44.622Z,2012-09-11T02:58:44.622Z,"fixed.
Thanks for reporting."
MRM-1665,Chris Harris,Chris Harris,2012-09-11T13:51:21.9Z,2012-09-11T13:51:21.9Z,You're welcome!
MRM-1639,skygolanur,Eric Barboni,2012-07-04T11:54:59.293Z,2012-07-04T11:54:59.293Z,"I try to add some history in the js archiva

-add sammy-minified js
-alter main template to use bindings
-limited to left bar


PS: will not be able to interact for a while (1.5 week (no web))









"
MRM-1639,olamy,Olivier Lamy (*$^%`),2012-07-04T15:03:45.236Z,2012-07-04T15:03:45.236Z,sammy is this sammy https://github.com/quirkey/sammy ?
MRM-1639,skygolanur,Eric Barboni,2012-07-04T15:19:32.877Z,2012-07-04T15:19:32.877Z,yep under MIT licence
MRM-1639,olamy,Olivier Lamy (*$^%`),2012-07-04T16:29:26.504Z,2012-07-04T16:29:26.504Z,"your patch contains sammy-latest.min.js 
Can we use a released version on master is mandatory for your patch.
BTW have nice holidays :-)"
MRM-1639,skygolanur,Eric Barboni,2012-07-04T17:04:18.78Z,2012-07-04T17:04:18.78Z,"I had this js by downloading the 0.7.1. Not sure how to get the good version.

--
 I put browse as first page because I was trying to make some debug in js error I get to have normal behavior you must replace by #Search
this.get('', function () { this.app.runRoute('get', '#Browse') });

--
 Transversal to this, do you think on refactoring, spliting a bit js file? (800 lines are sometimes a bit hard to read :D) 
 

Thks :p"
MRM-1639,olamy,Olivier Lamy (*$^%`),2012-07-10T05:39:35.263Z,2012-07-10T05:39:35.263Z,"Applied.
Thanks !!"
MRM-1644,olamy,Olivier Lamy (*$^%`),2012-07-20T16:36:09.941Z,2012-07-20T16:36:09.941Z,"applied.
Thanks!"
MRM-1625,olamy,Olivier Lamy (*$^%`),2012-04-19T04:18:17.888Z,2012-04-19T04:18:17.888Z,"fixed r1327885
Thanks!"
MRM-1672,olamy,Olivier Lamy (*$^%`),2012-09-24T08:25:20.696Z,2012-09-24T08:25:20.696Z,"""Cancel Upload"" button doesn't clear the list ?
BTW I agree after upload files must be cleaned!"
MRM-1672,olamy,Olivier Lamy (*$^%`),2012-09-24T09:15:36.481Z,2012-09-24T09:15:36.481Z,"fixed.
Thanks for the report."
MRM-1672,Chris Harris,Chris Harris,2012-09-24T18:37:08.269Z,2012-09-24T18:37:08.269Z,"You're welcome, Olivier.  I downloaded Build #1518 and verified that it's fixed."
MRM-1680,olamy,Olivier Lamy (*$^%`),2012-09-29T02:42:11.809Z,2012-09-29T02:42:11.809Z,"That's fixed with the new UI in the coming 1.4-M3 :-)
See screenshot: http://archiva.apache.org/docs/1.4-M3-SNAPSHOT/userguide/delete-artifact.html
See here how to try a fresh build of this version: http://archiva.apache.org/developers/how-we-do-things.html

"
MRM-1693,olamy,Olivier Lamy (*$^%`),2012-10-15T07:23:37.993Z,2012-10-15T07:23:37.993Z,done.
MRM-1506,olamy,Olivier Lamy (*$^%`),2011-09-05T15:20:47.352Z,2011-09-05T15:20:47.352Z,done.
MRM-1527,olamy,Olivier Lamy (*$^%`),2011-09-30T06:10:34.528Z,2011-09-30T06:10:34.528Z,fixed r1177595
MRM-1541,olamy,Olivier Lamy (*$^%`),2011-10-24T03:32:18.963Z,2011-10-24T03:32:18.963Z,sounds weird. As there is a unit test for that: http://svn.apache.org/viewvc/archiva/trunk/archiva-modules/archiva-base/archiva-repository-admin/archiva-repository-admin-default/src/test/java/org/apache/archiva/admin/repository/group/RepositoryGroupAdminTest.java?revision=1176606&view=markup test addAndDeleteGroupWithRemowingManagedRepo
MRM-1541,olamy,Olivier Lamy (*$^%`),2011-11-08T14:53:09.05Z,2011-11-08T14:53:09.05Z,"I was not able to reproduce.
If you reproduce and have some error logs please reopen the issue."
MRM-1545,olamy,Olivier Lamy (*$^%`),2011-10-26T09:29:44.488Z,2011-10-26T09:29:44.488Z,fixed r1189236
MRM-1563,lukasz74nj,Lukasz Szelag,2012-02-03T15:03:39.287Z,2012-02-03T15:03:39.287Z,"I also noticed that there are stale links to older (snapshot) versions in the Web interface, even after manually removing corresponding files from the filesystem."
MRM-1563,olamy,Olivier Lamy (*$^%`),2012-09-06T17:28:17.997Z,2012-09-06T17:28:17.997Z,fixed in new ui.
MRM-1558,olamy,Olivier Lamy (*$^%`),2011-11-14T12:53:37.399Z,2011-11-14T12:53:37.399Z,I wonder about adding some monitoring/alarm mechanism to send email or something else.
MRM-1558,olamy,Olivier Lamy (*$^%`),2014-05-19T01:03:35.079Z,2014-05-19T01:03:35.079Z,done in remote repositories list
MRM-1501,olamy,Olivier Lamy (*$^%`),2011-09-26T11:02:45.765Z,2011-09-26T11:02:45.765Z,maven indexer released
MRM-1529,olamy,Olivier Lamy (*$^%`),2011-10-03T04:14:50.659Z,2011-10-03T04:14:50.659Z,euh OMMITW :-)
MRM-1529,brettporter,Brett Porter,2011-10-03T06:05:20.063Z,2011-10-03T06:05:20.063Z,Now can't reproduce. Will keep an eye out and grab more details if I see it again.
MRM-1500,olamy,Olivier Lamy (*$^%`),2011-09-28T04:59:14.076Z,2011-09-28T04:59:14.076Z,fixed r1176805
MRM-1573,skygolanur,Eric Barboni,2012-03-03T09:29:44.847Z,2012-03-03T09:29:44.847Z,"change header level for Search page has to be h2

Change browser breadcrum to use icon 
and search is in the same line to save space on top.

try also to use icon from same library for browser ul li

As lots of space available when browsing artifact put version and info in the same page default"
MRM-1573,olamy,Olivier Lamy (*$^%`),2012-03-03T15:36:07.659Z,2012-03-03T15:36:07.659Z,"autocomplete doesn't work with this patch. 
not convinced by icon in breadcrum neither same for icon in browser li
Search in the same line is nice and good idea for version.

"
MRM-1573,olamy,Olivier Lamy (*$^%`),2012-03-05T02:45:20.086Z,2012-03-05T02:45:20.086Z,"based on your ideas. autocomplete in browse is now in the same line as breadcrum and I have made it current groupId aware.
"
MRM-1573,skygolanur,Eric Barboni,2012-03-07T06:37:41.232Z,2012-03-07T06:37:41.232Z,"<sic> was not watching issue so was not aware of your comment :s.

Well I have habit of making proposal with no obligation of change but. I woudld prefer sketching before coding but the only way is to go with code (I have no idea of collaborative software for tht).
The design proposal was centred on the ""home"" button. To have same look & feel.


The major current issue with this page. 
Is that the ""home"" button must be in the color of the link because I'ts not obvious you can click on it. The folder empty and folder full are too close IMO and you get confused.

Are blue folder icon self made or do you use a special library? 


"
MRM-1573,olamy,Olivier Lamy (*$^%`),2012-03-07T11:36:08.229Z,2012-03-07T11:36:08.229Z,"some icons come from tango desktop project see http://tango.freedesktop.org/Tango_Icon_Library (used in Jenkins :-) ) (I have backup those in a github fork https://github.com/olamy/tango-icon-theme )
Agree on the home button is confusing."
MRM-1573,skygolanur,Eric Barboni,2012-03-08T18:06:52.295Z,2012-03-08T18:06:52.295Z,"Some idea for browser

*Make <a>test</a> on same line to avoid space like at generation time <a> test </a> more clean.

*Not sure what the if with no parenthesis in expression are doing what is itended 

*try to put title on anchor instead of li

* try to change the link leading to artifact info to make difference clear.
  (alternative of changing icon)



"
MRM-1573,olamy,Olivier Lamy (*$^%`),2012-03-09T17:08:41.479Z,2012-03-09T17:08:41.479Z,"why removing the home icon ? I would an other icon but not removing it. As some other pages have one in ~same place, it's good IMHO to have ""similar"" design. 
I have changed with other icons let me know WDYT 
Thanks!"
MRM-1573,skygolanur,Eric Barboni,2012-03-09T17:44:38.858Z,2012-03-09T17:44:38.858Z,"Was only an alternative to keep blue for link :p


Home icon looks better with current design  (y)
Orange folder make browsing easier.    (y)


Not sure the (..) is usefull because:
   the breadcrumb but looks nice for going back to previous folder 
   the .. bug sometimes staying on same page 


Seems that headings are sometimes h2 and sometimes h3 across the page"
MRM-1573,olamy,Olivier Lamy (*$^%`),2012-03-16T11:14:43.51Z,2012-03-16T11:14:43.51Z,I think it's finished :-)
MRM-1573,skygolanur,Eric Barboni,2012-03-21T12:40:36.16Z,2012-03-21T12:40:36.16Z,"Sorry but it seems that repository filtering is not working as expected.

/// my configuration of archiva
I have 4 managed repository 
  2 for local artifact (snapshot and internal) respectivly ics_snapshot and ics_internal to put home made jar and have separate folder on hard drive
  2 for remote artifact (snapshot and internal) respectivly snapshot and internal to get everything else from the web (central and so on)


internal filtering give me the proper content similar of what I had on hard drive

ics_internal filtering give me the content of internal + content of ics_internal 

the ics_internal and internal give the same browse content but when I click on artifact details 
 if filtering on internal and asking info of artefact in internal  ok 
 if filtering on internal and asking info of artefact in ics_internal not ok forever loop

not sure if its directly related to the UI. 




"
MRM-1573,olamy,Olivier Lamy (*$^%`),2012-03-22T03:01:32.664Z,2012-03-22T03:01:32.664Z,"any log in firebug/chrome console ?
btw is the artifact you want details available physically in ics_internal fs directory ?
screencast or capture ? :-)
Thanks"
MRM-1573,skygolanur,Eric Barboni,2012-03-22T04:55:03.162Z,2012-03-22T04:55:03.162Z,"left ics_internal
  (cnes folder artifacts)

right internal
  (no presence of cnes artifact)"
MRM-1573,skygolanur,Eric Barboni,2012-03-22T04:56:52.649Z,2012-03-22T04:56:52.649Z,browsing contains cnes artifact + all internal folder
MRM-1573,skygolanur,Eric Barboni,2012-03-22T04:59:02.47Z,2012-03-22T04:59:02.47Z,browsing zone contains only internal folder
MRM-1573,skygolanur,Eric Barboni,2012-03-22T05:05:42.507Z,2012-03-22T05:05:42.507Z,Screenshots are from #864 as I cannot download last version from jenkins. (4 - 6 hours) 
MRM-1573,olamy,Olivier Lamy (*$^%`),2012-03-22T05:13:43.971Z,2012-03-22T05:13:43.971Z,"yup browsing display only internal folders not artifacts coming from maven index.
Is that your trouble ?"
MRM-1573,skygolanur,Eric Barboni,2012-03-22T05:31:45.903Z,2012-03-22T05:31:45.903Z,"well not sure to understand your point

using filtering on ics_internal I was expecting only 4 folders to browse

and using filtering on internal I was expecting all the other folder with no merge as it seems to be."
MRM-1573,skygolanur,Eric Barboni,2012-03-23T19:10:22.242Z,2012-03-23T19:10:22.242Z,thanks to Olivier it is working. jcr was broken. maybe while migrating from 1.3.5 to 1.4-M1 and to 1.4M3 js :p
MRM-1552,olamy,Olivier Lamy (*$^%`),2011-11-08T09:45:23.943Z,2011-11-08T09:45:23.943Z,possible value: -XX:MaxPermSize=128m
MRM-1552,olamy,Olivier Lamy (*$^%`),2011-11-08T10:38:29.344Z,2011-11-08T10:38:29.344Z,"currently this need some modifications in app assembler plugin.
not possible to add such value, app assembler plugin automatically add -D before the value."
MRM-1552,olamy,Olivier Lamy (*$^%`),2011-11-08T10:45:02.098Z,2011-11-08T10:45:02.098Z,gloups I missed the extraArguments configuration :-)
MRM-1552,olamy,Olivier Lamy (*$^%`),2011-11-08T10:49:35.664Z,2011-11-08T10:49:35.664Z,fixed r1199338.
MRM-1535,jieryn,jieryn,2011-10-18T10:20:46.426Z,2011-10-18T10:20:46.426Z,"Sorry, this is from 1.4-M1:

Build number: 1185621 - Build Timestamp: 2011-10-18T09:08:02EDT 

java version ""1.6.0"" 
Java(TM) SE Runtime Environment (build pxa6460sr9fp2-20110625_01(SR9 FP2)) 
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Linux amd64-64 jvmxa6460sr9-20110624_85526 (JIT enabled, AOT enabled) 
J9VM - 20110624_085526 
JIT - r9_20101028_17488ifx17 
GC - 20101027_AA) 
JCL - 20110530_01 "
MRM-1535,olamy,Olivier Lamy (*$^%`),2011-10-25T16:35:10.152Z,2011-10-25T16:35:10.152Z,fixed [rev 1188929|http://svn.apache.org/viewvc?rev=1188929&view=rev]
MRM-1513,brettporter,Brett Porter,2011-09-08T08:27:57.419Z,2011-09-08T08:27:57.419Z,This should be removed - it's no longer used.
MRM-1513,olamy,Olivier Lamy (*$^%`),2011-09-08T09:18:00.711Z,2011-09-08T09:18:00.711Z,I like those sort of comments :-)
MRM-1513,olamy,Olivier Lamy (*$^%`),2011-09-08T09:26:08.883Z,2011-09-08T09:26:08.883Z,updated description 
MRM-1513,olamy,Olivier Lamy (*$^%`),2011-09-08T10:14:26.17Z,2011-09-08T10:14:26.17Z,fixed r1166734
MRM-1593,effrafax,Martin Stockhammer,2016-09-15T14:52:21.84Z,2016-09-15T14:52:21.84Z,The issue is four years old. I think it should be closed.
MRM-1595,jbonofre,Jean-Baptiste Onofr,2012-01-30T03:38:22.027Z,2012-01-30T03:38:22.027Z,Revision 1237575
MRM-1536,olamy,Olivier Lamy (*$^%`),2012-07-30T09:43:53.524Z,2012-07-30T09:43:53.524Z,must be fixed with the new ui.
MRM-1564,olamy,Olivier Lamy (*$^%`),2011-12-13T15:54:17.757Z,2011-12-13T15:54:17.757Z,fixed r 1213948
MRM-1526,olamy,Olivier Lamy (*$^%`),2011-09-23T12:55:55.924Z,2011-09-23T12:55:55.924Z,can be postpone to 1.4
MRM-1526,olamy,Olivier Lamy (*$^%`),2011-10-04T03:57:38.492Z,2011-10-04T03:57:38.492Z,done
MRM-1555,olamy,Olivier Lamy (*$^%`),2011-11-08T03:22:47.625Z,2011-11-08T03:22:47.625Z,fixed rev 1199162
MRM-1594,jbonofre,Jean-Baptiste Onofr,2012-01-30T02:37:19.507Z,2012-01-30T02:37:19.507Z,Revision 1237568
MRM-1577,olamy,Olivier Lamy (*$^%`),2012-03-06T12:33:55.551Z,2012-03-06T12:33:55.551Z,done.
MRM-1523,oching,Maria Odea Ching,2011-09-22T23:26:51.289Z,2011-09-22T23:26:51.289Z,"Hi Chandru, can you direct your question to the users list instead of JIRA? I'll reply to your queries there? :) Thanks!

I'm closing this issue as won't fix."
MRM-1542,olamy,Olivier Lamy (*$^%`),2011-10-24T14:38:53.446Z,2011-10-24T14:38:53.446Z,fixed [rev 1188328|http://svn.apache.org/viewvc?rev=1188328&view=rev]
MRM-1538,olamy,Olivier Lamy (*$^%`),2011-10-25T16:23:47.088Z,2011-10-25T16:23:47.088Z,fixed [rev 1188916|http://svn.apache.org/viewvc?rev=1188916&view=rev]
MRM-1522,oching,Maria Odea Ching,2011-09-22T23:33:11.409Z,2011-09-22T23:33:11.409Z,"Hi, how are your proxy connectors configured? Also, do you have a network proxy configured in your local network?"
MRM-1549,olamy,Olivier Lamy (*$^%`),2011-11-07T02:30:46.225Z,2011-11-07T02:30:46.225Z,fixed rev 1198647
MRM-1540,olamy,Olivier Lamy (*$^%`),2012-10-13T16:30:38.889Z,2012-10-13T16:30:38.889Z,delete is now tru the UI while browsing.
MRM-1567,skygolanur,Eric Barboni,2011-12-21T06:35:36.536Z,2011-12-21T06:35:36.536Z,"If it may help:

Configuration 
4 managed repository
  external mirror of snapshot artifact
  external mirror of normal artifact
  internal snapshot artifact (ics_snapshot)
  internal normal artifact 

when browsing such a artifact stored on a managed repository call ics_snapshot

I have warning for 3 repository saying  org.apache.archiva.metadata.repository.storag.maven2.Maven2RepositoryStorage Invalid metadata name of the file

but no log on the ics_snapshot repository. 

I don't know if the process pass by this repository with no log or if it avoid processing the current.

That is the only log I have seen.

Regards









"
MRM-1567,apache.maillist,apache maillist,2011-12-31T14:46:09.752Z,2011-12-31T14:46:09.752Z,"Hi,

I am experiencing the opposite:
2 repos:
release_repo
sansphot_repo

while browsing the SNAPSHOT version of the artifact that is uploaded to the sanpshot_repo where its parent pom is a release version that located at the release_repo

I got the following error on the GUI

Artifact metadata is incomplete: Error in resolving artifact's parent POM file. /apps/maven2/snapshot_repo/org/kp/wpp/utils/parentpom/2.5.3/parentpom-2.5.3.pom (No such file or directory)"
MRM-1567,skygolanur,Eric Barboni,2012-02-29T09:21:33.696Z,2012-02-29T09:21:33.696Z,Oposed but related issue
MRM-1567,olamy,Olivier Lamy (*$^%`),2012-03-11T18:58:18.775Z,2012-03-11T18:58:18.775Z,fixed r1299489
MRM-1517,brettporter,Brett Porter,2011-09-14T11:33:06.95Z,2011-09-14T11:33:06.95Z,Does it look like the screenshot in MRM-1285? We've improved this for the next release.
MRM-1517,sroeper,Stefan Roeper,2011-09-15T02:11:05.847Z,2011-09-15T02:11:05.847Z,"Nop, please see the attached screenshot. Tested in Safari 5.1 and Firefox 3.6.4 on Mac OS 10.6.8"
MRM-1517,brettporter,Brett Porter,2011-09-15T21:00:13.721Z,2011-09-15T21:00:13.721Z,"ok, I've checked that and it's also fixed in the next release"
MRM-1560,olamy,Olivier Lamy (*$^%`),2011-11-17T04:13:33.881Z,2011-11-17T04:13:33.881Z,a new parameter called downloadOnStartup looks fine to schedule a download remote.
MRM-1560,olamy,Olivier Lamy (*$^%`),2011-11-17T16:51:55.134Z,2011-11-17T16:51:55.134Z,done
MRM-1597,jbonofre,Jean-Baptiste Onofr,2012-01-30T05:25:50.994Z,2012-01-30T05:25:50.994Z,Revision 1237605
MRM-1572,olamy,Olivier Lamy (*$^%`),2012-03-16T11:14:58.827Z,2012-03-16T11:14:58.827Z,finished
MRM-1508,olamy,Olivier Lamy (*$^%`),2011-09-06T16:29:34.725Z,2011-09-06T16:29:34.725Z,done
MRM-1568,olamy,Olivier Lamy (*$^%`),2012-03-11T18:58:31.809Z,2012-03-11T18:58:31.809Z,fixed r1299489
MRM-1507,olamy,Olivier Lamy (*$^%`),2011-09-07T16:55:10.342Z,2011-09-07T16:55:10.342Z,done
MRM-1587,olamy,Olivier Lamy (*$^%`),2012-03-08T06:47:20.028Z,2012-03-08T06:47:20.028Z,maybe not having a specific page for that but adding a delete icon in browse ?
MRM-1587,skygolanur,Eric Barboni,2012-03-08T18:10:53.716Z,2012-03-08T18:10:53.716Z,"+1 :p

Maybe browse page should display all version by repo and offer a delete icon for each. 
May be also in result of search page.

"
MRM-1587,olamy,Olivier Lamy (*$^%`),2012-03-09T17:12:11.868Z,2012-03-09T17:12:11.868Z,maybe from search results but we must check the file is here (as some search results can come from remote indexes)
MRM-1587,olamy,Olivier Lamy (*$^%`),2012-09-06T07:33:06.892Z,2012-09-06T07:33:06.892Z,"trash button is now available in the ui for deleting artifact and groupId.
Very more easy :-)"
MRM-1521,fhoudebert,Franois Houdebert,2011-09-20T04:39:38.442Z,2011-09-20T04:39:38.442Z,"Sure it is funny, but i am not sure it is good for the project adoption in companies"
MRM-1521,brettporter,Brett Porter,2011-09-30T21:12:24.077Z,2011-09-30T21:12:24.077Z,we'll make this a bit easier to turn on or off + explain it in the next release then...
MRM-1509,olamy,Olivier Lamy (*$^%`),2011-09-02T09:57:00.472Z,2011-09-02T09:57:00.472Z,done for ManagedRepository
MRM-1509,olamy,Olivier Lamy (*$^%`),2011-09-15T09:01:21.669Z,2011-09-15T09:01:21.669Z,done rev 1171102
MRM-1551,olamy,Olivier Lamy (*$^%`),2011-11-09T10:22:54.294Z,2011-11-09T10:22:54.294Z,fixed r1199828
MRM-1512,olamy,Olivier Lamy (*$^%`),2011-09-09T04:16:55.897Z,2011-09-09T04:16:55.897Z,done
MRM-1575,olamy,Olivier Lamy (*$^%`),2012-02-14T17:34:54.745Z,2012-02-14T17:34:54.745Z,done
MRM-1580,olamy,Olivier Lamy (*$^%`),2012-03-12T17:24:55.396Z,2012-03-12T17:24:55.396Z,done
MRM-1503,olamy,Olivier Lamy (*$^%`),2011-08-23T15:45:29.476Z,2011-08-23T15:45:29.476Z,done
MRM-1585,alecharp,Adrien Lecharpentier,2012-03-20T10:28:59.158Z,2012-03-20T10:28:59.158Z,"Here is the patch (git diff) based on the SHA1 166538af67c280a90c656d87af4f06c460dd1502 of trunk that implements this issue.

I changed the ArchivaAdministrationService#getOrganisationInformation Redback permissions to be able to get OrganisationInformation whenever the user is log or not."
MRM-1585,olamy,Olivier Lamy (*$^%`),2012-03-20T10:58:08.943Z,2012-03-20T10:58:08.943Z,"fixed r1302957
Thanks!"
MRM-1565,olamy,Olivier Lamy (*$^%`),2011-12-15T04:33:21.432Z,2011-12-15T04:33:21.432Z,"should be fixed with r 1214693
I don't have windows could you have a try ?"
MRM-1565,olamy,Olivier Lamy (*$^%`),2011-12-15T04:54:04.097Z,2011-12-15T04:54:04.097Z,which version did you test that ?
MRM-1565,gautencio,Gwen Harold Autencio,2011-12-16T01:15:14.387Z,2011-12-16T01:15:14.387Z,"Olivier,

After checking out the latest revision.
Getting test failures during build.

-------------------------------------------------------------------------------
Test set: org.apache.archiva.stagerepository.merge.Maven2RepositoryMergerTest
-------------------------------------------------------------------------------
Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 6.157 sec <<< FAILURE!
testMerge(org.apache.archiva.stagerepository.merge.Maven2RepositoryMergerTest)  Time elapsed: 5.375 sec  <<< ERROR!
java.lang.ArrayIndexOutOfBoundsException: 1
	at org.apache.archiva.stagerepository.merge.Maven2RepositoryMerger.createFolderStructure(Maven2RepositoryMerger.java:206)
	at org.apache.archiva.stagerepository.merge.Maven2RepositoryMerger.merge(Maven2RepositoryMerger.java:101)
	at org.apache.archiva.stagerepository.merge.Maven2RepositoryMergerTest.testMerge(Maven2RepositoryMergerTest.java:105)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)"
MRM-1565,olamy,Olivier Lamy (*$^%`),2011-12-16T01:51:38.391Z,2011-12-16T01:51:38.391Z,"Yup I know this one failed since long (always ?) on windauze.
I try to fix but I don't have any windauze env except jenkins asf node."
MRM-1565,olamy,Olivier Lamy (*$^%`),2012-03-29T14:45:45.651Z,2012-03-29T14:45:45.651Z,should be fixed now in trunk
MRM-1596,jbonofre,Jean-Baptiste Onofr,2012-01-30T04:29:47.619Z,2012-01-30T04:29:47.619Z,Revision 1237592
MRM-1515,brettporter,Brett Porter,2011-10-03T02:23:44.177Z,2011-10-03T02:23:44.177Z,"I noticed we have struts-1.2.9 in there, which must be wrong :)

There seem to be several other duplicates (stax APIs, etc.) to work through."
MRM-1515,olamy,Olivier Lamy (*$^%`),2011-10-03T04:16:04.945Z,2011-10-03T04:16:04.945Z,"yup just noticed some dupe of stax api too.
{code}
MacBook-Pro-de-Olivier:bin olamy$ ls -lrt ../apps/archiva/WEB-INF/lib/stax*
-rw-r--r--@ 1 olamy  staff   26514 28 avr 12:17 ../apps/archiva/WEB-INF/lib/stax-api-1.0.1.jar
-rw-r--r--@ 1 olamy  staff  169270 28 avr 12:20 ../apps/archiva/WEB-INF/lib/stax-1.1.1-dev.jar
-rw-r--r--@ 1 olamy  staff   23346 25 ao 00:30 ../apps/archiva/WEB-INF/lib/stax-api-1.0-2.jar
-rw-r--r--@ 1 olamy  staff  128475 25 ao 09:26 ../apps/archiva/WEB-INF/lib/stax-utils-20060502.jar
-rw-r--r--@ 1 olamy  staff  182112 25 ao 09:31 ../apps/archiva/WEB-INF/lib/stax2-api-3.1.1.jar
-rw-r--r--@ 1 olamy  staff  179346 25 ao 09:50 ../apps/archiva/WEB-INF/lib/stax-1.2.0.jar
{code}"
MRM-1515,skygolanur,Eric Barboni,2012-09-14T03:43:58.813Z,2012-09-14T03:43:58.813Z,is spring-test necessary in the war ?
MRM-1515,olamy,Olivier Lamy (*$^%`),2012-09-14T04:14:14.241Z,2012-09-14T04:14:14.241Z,No I don't why it's here !
MRM-1515,olamy,Olivier Lamy (*$^%`),2012-09-24T16:23:58.359Z,2012-09-24T16:23:58.359Z,the new webapp is 40M (legacy one is 50M) so a bit better :-)
MRM-1534,brettporter,Brett Porter,2011-10-21T02:15:07.76Z,2011-10-21T02:15:07.76Z,related to Jetty config - will probably be fixed when upgrading to Jetty 7 config file format
MRM-1534,olamy,Olivier Lamy (*$^%`),2011-10-27T15:12:33.897Z,2011-10-27T15:12:33.897Z,fixed with jetty7 upgrade
MRM-1530,brettporter,Brett Porter,2011-10-07T08:53:35.04Z,2011-10-07T08:53:35.04Z,"Here are some previous thoughts:

https://cwiki.apache.org/confluence/display/ARCHIVA/High+Availability+Archiva

Definitely one thought I had with JCR was the ability to cluster the metadata ""out of the box"", as this contains pretty much everything related to state."
MRM-1550,olamy,Olivier Lamy (*$^%`),2011-11-07T04:15:22.365Z,2011-11-07T04:15:22.365Z,no real issue. But we should prevent log noise with not scanning this directory.
MRM-1550,olamy,Olivier Lamy (*$^%`),2012-12-18T10:18:33.296Z,2012-12-18T10:18:33.296Z,I think I have already fixed that earlier :-)
MRM-1556,olamy,Olivier Lamy (*$^%`),2012-09-14T15:49:57.246Z,2012-09-14T15:49:57.246Z,not sure it's still valid with the new ui ?
MRM-1556,olamy,Olivier Lamy (*$^%`),2013-11-24T23:17:45.054Z,2013-11-24T23:17:45.054Z,IMHO probably fix with the new ui
MRM-1586,olamy,Olivier Lamy (*$^%`),2012-04-03T10:41:02.565Z,2012-04-03T10:41:02.565Z,mostly finished. Need more tests. (not sure that work on ie :-) )
MRM-1598,olamy,Olivier Lamy (*$^%`),2012-02-03T04:13:21.668Z,2012-02-03T04:13:21.668Z,changes finished in trunk
MRM-1510,olamy,Olivier Lamy (*$^%`),2011-09-08T04:28:06.43Z,2011-09-08T04:28:06.43Z,done
MRM-1557,olamy,Olivier Lamy (*$^%`),2011-11-13T11:45:59.288Z,2011-11-13T11:45:59.288Z,fixed r1201465
MRM-1579,olamy,Olivier Lamy (*$^%`),2012-03-08T03:36:48.067Z,2012-03-08T03:36:48.067Z,done
MRM-1578,olamy,Olivier Lamy (*$^%`),2012-01-26T17:08:23.402Z,2012-01-26T17:08:23.402Z,done
MRM-1591,olamy,Olivier Lamy (*$^%`),2012-01-19T15:00:29.452Z,2012-01-19T15:00:29.452Z,"Hello,
Yup xml/rpc api won't be here anymore in 1.4 (removed for the coming 1.4-M3).
Note all rest services are here to manage users with rest."
MRM-1591,stibi,Martin Stiborsk,2012-01-19T15:13:58.003Z,2012-01-19T15:13:58.003Z,"Ok, thanks. We will focus on RESTAPI now."
MRM-1591,olamy,Olivier Lamy (*$^%`),2012-01-19T15:38:57.02Z,2012-01-19T15:38:57.02Z,"close it as it's more a question rather than a bug.
Try mailing list next time :-)"
MRM-1591,stibi,Martin Stiborsk,2012-01-19T15:41:09.316Z,2012-01-19T15:41:09.316Z,"Ouch, sorry, sure I will. Thanks."
MRM-1524,olamy,Olivier Lamy (*$^%`),2011-09-23T08:58:05.725Z,2011-09-23T08:58:05.725Z,currently set 1.4-M1: can be postpone.
MRM-1574,olamy,Olivier Lamy (*$^%`),2012-01-18T07:45:35.272Z,2012-01-18T07:45:35.272Z,managed repositories done.
MRM-1574,olamy,Olivier Lamy (*$^%`),2012-01-25T11:25:43.442Z,2012-01-25T11:25:43.442Z,"remote repositories done.
leave it open until selenium tests done"
MRM-1574,olamy,Olivier Lamy (*$^%`),2012-03-08T06:45:49.534Z,2012-03-08T06:45:49.534Z,done for both managed and remote
MRM-1525,brettporter,Brett Porter,2011-09-23T17:36:01.321Z,2011-09-23T17:36:01.321Z,I have a POM to make an RPM that I can add
MRM-1525,brettporter,Brett Porter,2012-04-04T03:40:10.221Z,2012-04-04T03:40:10.221Z,sample added to sandbox
MRM-1525,olamy,Olivier Lamy (*$^%`),2012-12-18T11:56:26.14Z,2012-12-18T11:56:26.14Z,"svn co https://svn.apache.org/repos/asf/archiva/sandbox/rpm && cd rpm && mvn clean install

Result
{code}

[ERROR] Failed to execute goal org.apache.maven.plugins:maven-patch-plugin:1.1.1:apply (patch) on project archiva: Failed to apply patch: archiva.patch. See debug output for more information. Working directory ""/Users/olamy/dev/sources/archiva-all/sandbox/rpm/target/rpm-unpack/apache-archiva-1.4-M4-SNAPSHOT"" does not exist! -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-patch-plugin:1.1.1:apply (patch) on project archiva: Failed to apply patch: archiva.patch. See debug output for more information.
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:310)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:146)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:211)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:156)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:414)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:357)
Caused by: org.apache.maven.plugin.MojoExecutionException: Failed to apply patch: archiva.patch. See debug output for more information.
	at org.apache.maven.plugin.patch.ApplyMojo.applyPatches(ApplyMojo.java:470)
	at org.apache.maven.plugin.patch.ApplyMojo.execute(ApplyMojo.java:299)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:105)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)
	... 19 more
Caused by: org.codehaus.plexus.util.cli.CommandLineException: Working directory ""/Users/olamy/dev/sources/archiva-all/sandbox/rpm/target/rpm-unpack/apache-archiva-1.4-M4-SNAPSHOT"" does not exist!
	at org.codehaus.plexus.util.cli.Commandline.execute(Commandline.java:644)
	at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:118)
	at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:93)
	at org.apache.maven.plugin.patch.ApplyMojo.executeCommandLine(ApplyMojo.java:497)
	at org.apache.maven.plugin.patch.ApplyMojo.applyPatches(ApplyMojo.java:453)

{code}"
MRM-1525,olamy,Olivier Lamy (*$^%`),2012-12-18T11:57:54.319Z,2012-12-18T11:57:54.319Z,"move to backlog as I'm not sure we will provide those packaging.
I think it's available here https://github.com/hgomez/devops-incubator/tree/master/rpm-packaging/myarchiva"
MRM-1525,plentz,Diego Plentz,2014-12-19T05:25:24.699Z,2014-12-19T05:25:24.699Z,it's available in hgomez yum repository https://github.com/hgomez/devops-incubator#yum-repository
MRM-1525,plentz,Diego Plentz,2014-12-19T05:26:53.937Z,2014-12-19T05:26:53.937Z,maybe it can be added as a official way of installing archiva rpm packages?
MRM-1546,yhjhoo,Yang Hua Jie,2011-10-27T01:17:03.092Z,2011-10-27T01:17:03.092Z,Deploy to Windows 7 also failed
MRM-1546,olamy,Olivier Lamy (*$^%`),2011-10-27T04:37:29.61Z,2011-10-27T04:37:29.61Z,"you must start your app server with sys props: -Dappserver.base=path where you want to store your archiva datas and -Dappserver.home=same path.

see [http://archiva.apache.org/docs/1.4-M1/adminguide/webapp.html]"
MRM-1546,olamy,Olivier Lamy (*$^%`),2011-10-27T04:38:26.382Z,2011-10-27T04:38:26.382Z,reopen if the proposal doesn't work.
MRM-1546,yhjhoo,Yang Hua Jie,2011-10-27T08:09:51.862Z,2011-10-27T08:09:51.862Z,"Wow, very difficult to deploy as a web application"
MRM-1583,alecharp,Adrien Lecharpentier,2012-07-04T09:28:16.285Z,2012-07-04T09:28:16.285Z,This is the implementation I made for the report pages
MRM-1583,olamy,Olivier Lamy (*$^%`),2012-07-05T15:46:20.011Z,2012-07-05T15:46:20.011Z,"Applied.
Thanks !"
MRM-1583,alecharp,Adrien Lecharpentier,2012-07-06T07:13:50.322Z,2012-07-06T07:13:50.322Z,My apologizes for my mistake
MRM-1583,olamy,Olivier Lamy (*$^%`),2012-07-06T07:19:51.163Z,2012-07-06T07:19:51.163Z,"applied.
Thanks !"
MRM-1583,alecharp,Adrien Lecharpentier,2012-07-06T08:33:32.843Z,2012-07-06T08:33:32.843Z,"I forgot to give you the tests modifications, sorry"
MRM-1583,alecharp,Adrien Lecharpentier,2012-07-31T09:11:03.626Z,2012-07-31T09:11:03.626Z,"Reports columns getters were not correctly checked: always displaying 0 for jar, archetypes, etc. columns. "
MRM-1583,olamy,Olivier Lamy (*$^%`),2012-07-31T09:25:56.98Z,2012-07-31T09:25:56.98Z,applied.
MRM-1519,olamy,Olivier Lamy (*$^%`),2011-09-26T11:03:13.242Z,2011-09-26T11:03:13.242Z,done
MRM-1544,olamy,Olivier Lamy (*$^%`),2012-04-03T10:59:27.452Z,2012-04-03T10:59:27.452Z,fixed in the new UI
MRM-1504,olamy,Olivier Lamy (*$^%`),2011-09-04T08:57:05.047Z,2011-09-04T08:57:05.047Z,"currently this introduce a deps on archiva-security in a module from archiva-base.
ArchivaRoleConstants should be moved in a new module archiva-security-common in archiva-base tree. "
MRM-1576,skygolanur,Eric Barboni,2012-03-29T07:09:36.579Z,2012-03-29T07:09:36.579Z,"I have a small bug I cannot reproduce with the ordering of proxy connector.

 A connector get deleted after saving the new order."
MRM-1592,olamy,Olivier Lamy (*$^%`),2012-01-20T18:08:36.862Z,2012-01-20T18:08:36.862Z,"in all current user repositories ?
We could have optional repoId too ?
WDYT ?"
MRM-1592,romainmoreau,Romain Moreau,2012-01-21T03:51:29.253Z,2012-01-21T03:51:29.253Z,"I think you're right.
An optionnal repositoryId parameter could be useful too to narrow down the search, otherwise getArtifactLastVersion would look in all repositories like the getArtifactVersions method."
MRM-1592,olamy,Olivier Lamy (*$^%`),2012-01-23T06:43:24.292Z,2012-01-23T06:43:24.292Z,"I wonder if you see the class VersionComparator in archiva-common module ?
As you have various methods in SearchService you can already easily do that (or provide a patch to implement this ;-) )."
MRM-1592,romainmoreau,Romain Moreau,2012-01-23T08:01:35.816Z,2012-01-23T08:01:35.816Z,"As I said in the description, I don't think it's very clean to do this out of Archiva, IMO it should be part of the service.
I'm not really familiar with Archiva sources and API but if you say that it's easy, I could try to make the patch someday."
MRM-1592,olamy,Olivier Lamy (*$^%`),2012-01-23T08:11:37.771Z,2012-01-23T08:11:37.771Z,"yup not so complicated.
Have a look in class DefaultSearchService in module archiva-rest-services.
"
MRM-1518,gliu,gliu,2011-09-15T04:16:46.072Z,2011-09-15T04:16:46.072Z,"I mean we can easily to upload the jar file by using this lib without maven.what we need to do is just give the necessary informations, for example, groupId, artifactId, repository URL, userName, password, version and so on."
MRM-1518,olamy,Olivier Lamy (*$^%`),2011-09-15T04:23:14.798Z,2011-09-15T04:23:14.798Z,adding a rest services for that ?
MRM-1518,gliu,gliu,2011-09-15T04:33:47.657Z,2011-09-15T04:33:47.657Z,"I think it should work, I'm writing a pure java code based on the HttpURLConnection."
MRM-1518,brettporter,Brett Porter,2011-09-15T20:48:49.635Z,2011-09-15T20:48:49.635Z,Are you sure we need a new REST service for this? How would it differ from the webdav?
MRM-1518,olamy,Olivier Lamy (*$^%`),2011-10-04T09:15:37.009Z,2011-10-04T09:15:37.009Z,move to 1.4-M2 as using simple HttpUrlConnection works.
MRM-1502,olamy,Olivier Lamy (*$^%`),2011-08-25T04:06:48.321Z,2011-08-25T04:06:48.321Z,"upgrade to wagon 2.0-SNAPSHOT.
I leave the issue open until wagon release."
MRM-1502,olamy,Olivier Lamy (*$^%`),2011-09-30T04:48:02.906Z,2011-09-30T04:48:02.906Z,upgrade to wagon 2.0 done.
MRM-1516,bmargulies,Benson Margulies,2011-09-12T17:48:11.033Z,2011-09-12T17:48:11.033Z,I don't understand how to reproduce this.
MRM-1516,brettporter,Brett Porter,2011-09-12T20:23:40.619Z,2011-09-12T20:23:40.619Z,"it looks like it might be a problem specific to the IBM JDK (jieryn was on IRC testing MRM-1412 with us). I'm not able to reproduce it on a Mac either.

However, I am getting some other similar classloading issues under jetty:run. I'm concerned something is not right with the radical changes to the dependency tree lately. Olivier has filed another issue to go through and clean that up.

These are NoClassDefFoundError's, not ClassNotFoundException's, so it seems like spring or xwork (both recently upgraded) are trying to instantiate something unexpected."
MRM-1516,olamy,Olivier Lamy (*$^%`),2011-09-26T17:50:44.165Z,2011-09-26T17:50:44.165Z,"should be fixed with r1176112.
@jieryn can you test a build from trunk ?"
MRM-1516,jieryn,jieryn,2011-09-26T18:47:39.047Z,2011-09-26T18:47:39.047Z,"Sure, I have tried to navigate vmbuild but I can not seem to locate a bundle ... if you point me to one that has the fix integrated I'd be happy to try it out immediately."
MRM-1516,olamy,Olivier Lamy (*$^%`),2011-09-27T01:44:09.097Z,2011-09-27T01:44:09.097Z,"https://builds.apache.org/view/A-F/view/Archiva/job/archiva-all-maven-3.x-jdk-1.6/lastBuild/org.apache.archiva$archiva-jetty/
"
MRM-1516,jieryn,jieryn,2011-09-27T07:20:28.031Z,2011-09-27T07:20:28.031Z,"I confirm that this fixes the issue with IBM JVM. I tested with the Archiva bundle link Olivier provided, and:

{code}$ java -version
java version ""1.6.0""
Java(TM) SE Runtime Environment (build pxa6460sr9fp2-20110625_01(SR9 FP2))
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Linux amd64-64 jvmxa6460sr9-20110624_85526 (JIT enabled, AOT enabled)
J9VM - 20110624_085526
JIT  - r9_20101028_17488ifx17
GC   - 20101027_AA)
JCL  - 20110530_01
{code}

Thank you very much for fixing this!!"
MRM-1569,skygolanur,Eric Barboni,2012-03-03T09:25:00.431Z,2012-03-03T09:25:00.431Z,Add placeholder but I was not able to locate where to edit l18n :s
MRM-1569,olamy,Olivier Lamy (*$^%`),2012-03-03T15:11:45.916Z,2012-03-03T15:11:45.916Z,"i18n here ./archiva-modules/archiva-web/archiva-web-common/src/main/resources/org/apache/archiva/i18n/default.properties

note fr is empty :-)"
MRM-1569,olamy,Olivier Lamy (*$^%`),2012-03-03T15:20:10.236Z,2012-03-03T15:20:10.236Z,committed r1296706.
MRM-1569,skygolanur,Eric Barboni,2012-03-22T04:29:09.606Z,2012-03-22T04:29:09.606Z,"Continuing to give feedback and trying the new UI I had the following visual bug   (jenkins #864)

misplacement of menu I was only going to the archiva UI with no previous login

Copy and paste of js error no clue of what happens :s

$(""#quick-search-autocomplete"").autocomplete({minLength: 3, source: function (request, response) {$.get(""restServices/archivaServices/searchService/quickSearch?queryString="" + encodeURIComponent(request.term), function (data) {var res = mapArtifacts(data);var uniqId = [];var uniqArtifactIds = [];for (var i = 0; i < res.length; i++) {if ($.inArray(res[i].artifactId, uniqId) < 0) {uniqId.push(res[i].artifactId);uniqArtifactIds.push(res[i]);}}response(uniqArtifactIds);});}, select: function (event, ui) {$.log(""select artifactId:"" + ui.item.artifactId);displaySearch(function () {var searchViewModel = new SearchViewModel;var searchRequest = new SearchRequest;searchRequest.artifactId(ui.item.artifactId);searchViewModel.searchRequest(searchRequest);searchViewModel.externalAdvancedSearch();});}}).data(""autocomplete"")
 is undefined
http://setekh.irit.fr/archiva/js/archiva/main.js?_archivaVersion=1.4-M3-SNAPSHOT
Line 349

Load timeout for modules: order!redback/redback 
http://requirejs.org/docs/errors.html#timeout
http://setekh.irit.fr/archiva/js/require.1.0.1.js
Line 76


"
MRM-1569,olamy,Olivier Lamy (*$^%`),2012-03-22T05:14:11.176Z,2012-03-22T05:14:11.176Z,ok reproduced here.
MRM-1569,olamy,Olivier Lamy (*$^%`),2012-03-26T18:06:36.905Z,2012-03-26T18:06:36.905Z,"should be fixed now by refactoring using requirejs.
let us know if you still have the issue."
MRM-1569,skygolanur,Eric Barboni,2012-03-27T13:28:18.382Z,2012-03-27T13:28:18.382Z,Work well now :p. Still long to get the war from jenkins to test :p.
MRM-1514,olamy,Olivier Lamy (*$^%`),2011-09-10T03:25:09.112Z,2011-09-10T03:25:09.112Z,done
MRM-1531,brettporter,Brett Porter,2011-10-17T19:23:22.304Z,2011-10-17T19:23:22.304Z,"I can't find an existing issue, but testing this on 1.4-M1 shows it has been taken care of as a result of the earlier changes to the metadata."
MRM-1590,olamy,Olivier Lamy (*$^%`),2012-01-19T04:11:51.975Z,2012-01-19T04:11:51.975Z,"fixed r1233266.
"
MRM-1581,olamy,Olivier Lamy (*$^%`),2012-03-08T14:29:25.717Z,2012-03-08T14:29:25.717Z,done
MRM-1520,olamy,Olivier Lamy (*$^%`),2011-09-15T14:59:18.373Z,2011-09-15T14:59:18.373Z,done
MRM-1559,olamy,Olivier Lamy (*$^%`),2011-11-15T01:43:19.651Z,2011-11-15T01:43:19.651Z,which module ? most of the pom have derby.system.home configured for surefire execution.
MRM-1559,jbonofre,Jean-Baptiste Onofr,2011-11-15T02:19:57.641Z,2011-11-15T02:19:57.641Z,"It's now OK (it was ""old"" build files)"
MRM-1548,olamy,Olivier Lamy (*$^%`),2011-11-06T03:02:24.926Z,2011-11-06T03:02:24.926Z,fixed r1198293
MRM-1533,olamy,Olivier Lamy (*$^%`),2012-07-30T09:17:23.353Z,2012-07-30T09:17:23.353Z,IMHO we must focus on new UI now rather fixing issues with old ui.
MRM-1543,olamy,Olivier Lamy (*$^%`),2011-10-25T16:26:48.38Z,2011-10-25T16:26:48.38Z,"classifier added in download box. (rev 1188914)
I leave it open until finding a way to display pom snippet with classifier"
MRM-1599,olamy,Olivier Lamy (*$^%`),2012-02-04T16:25:55.027Z,2012-02-04T16:25:55.027Z,"fixed.
New option to use previous wagon which support ntlm."
MRM-1599,oscar.gonzalez,Oscar Gonzlez,2012-04-12T04:15:27.967Z,2012-04-12T04:15:27.967Z,"Hi Olivier.

Is there any workaround for version 1.4M1?

Thanks."
MRM-1599,olamy,Olivier Lamy (*$^%`),2012-04-12T04:18:14.818Z,2012-04-12T04:18:14.818Z,You can use current SNAPSHOT build.
MRM-1599,oscar.gonzalez,Oscar Gonzlez,2012-04-13T02:07:26.619Z,2012-04-13T02:07:26.619Z,"Thanks Olivier.

I'll try it."
MRM-1547,olamy,Olivier Lamy (*$^%`),2011-10-29T18:17:21.49Z,2011-10-29T18:17:21.49Z,fixed rev 1195071
MRM-1505,olamy,Olivier Lamy (*$^%`),2011-09-02T09:56:32.759Z,2011-09-02T09:56:32.759Z,looks to be fixed. (afaics :-) )
MRM-1562,jbonofre,Jean-Baptiste Onofr,2011-11-22T07:30:46.84Z,2011-11-22T07:30:46.84Z,Patch to update the Archiva parent with the Apache Felix Maven bundle plugin.
MRM-1562,jbonofre,Jean-Baptiste Onofr,2011-11-22T07:31:35.816Z,2011-11-22T07:31:35.816Z,"Update the Archive modules to turn it as OSGi bundles.
An Apache Karaf features XML is also provided allowing to deploy Archiva directly in Karaf."
MRM-1562,jbonofre,Jean-Baptiste Onofr,2011-11-22T07:32:23.576Z,2011-11-22T07:32:23.576Z,"I'm gonna submit a couple of new patches:
- one providing Karaf shell commands to use the Archiva REST API
- one updating the Archiva web modules to turn it as bundle and create a web bundle"
MRM-1562,olamy,Olivier Lamy (*$^%`),2011-11-22T08:18:09.299Z,2011-11-22T08:18:09.299Z,"both patch submitted. 
Don't close the issue as some others will come :-)"
MRM-1562,jbonofre,Jean-Baptiste Onofr,2011-11-24T14:32:16.689Z,2011-11-24T14:32:16.689Z,"New patch turning Archiva REST and Archiva RSS as OSGi bundle.
The features XML has been updated including the CXF repository."
MRM-1562,olamy,Olivier Lamy (*$^%`),2011-11-24T17:05:28.179Z,2011-11-24T17:05:28.179Z,committed r1206014
MRM-1562,jbonofre,Jean-Baptiste Onofr,2011-11-29T02:53:07.783Z,2011-11-29T02:53:07.783Z,"New patch which turn xmlrpc, some plugins as OSGi bundles."
MRM-1562,olamy,Olivier Lamy (*$^%`),2011-11-29T09:16:16.093Z,2011-11-29T09:16:16.093Z,"committed r1207904
Thanks !"
MRM-1562,jbonofre,Jean-Baptiste Onofr,2011-12-09T14:34:42.502Z,2011-12-09T14:34:42.502Z,New patch which turn webapp as OSGi bundles and features XML update
MRM-1562,olamy,Olivier Lamy (*$^%`),2011-12-09T14:49:08.339Z,2011-12-09T14:49:08.339Z,apply r1212622
MRM-1562,jbonofre,Jean-Baptiste Onofr,2011-12-24T10:55:15.726Z,2011-12-24T10:55:15.726Z,"New patch adding:
- a profile to validate the Karaf features XML
- remove of the xmlrpc features"
MRM-1562,olamy,Olivier Lamy (*$^%`),2011-12-25T13:11:00.077Z,2011-12-25T13:11:00.077Z,"applied r1224630
Thanks!"
MRM-1562,jbonofre,Jean-Baptiste Onofr,2011-12-28T01:29:41.959Z,2011-12-28T01:29:41.959Z,Patch with fix Spring version range on the plexus bridge.
MRM-1562,olamy,Olivier Lamy (*$^%`),2011-12-28T03:10:06.467Z,2011-12-28T03:10:06.467Z,"applied r1225147
Thanks!"
MRM-1562,jbonofre,Jean-Baptiste Onofr,2011-12-31T01:18:40.291Z,2011-12-31T01:18:40.291Z,Patch on features descriptor cleanup.
MRM-1562,olamy,Olivier Lamy (*$^%`),2011-12-31T03:28:35.716Z,2011-12-31T03:28:35.716Z,"applied rev 1226052.
Thanks!"
MRM-1562,msqr,Matt Magoffin,2014-05-02T04:00:48.278Z,2014-05-02T04:00:48.278Z,"This ticket seems to have languished for a while now... but having the ability to generate OBR metadata files automatically as a repository changes would be extremely useful (to me, at least!)

As a workaround now I have set up an Apache Karaf Cave instance that proxies an Archiva instance simply to generate OBR metadata XML files. Perhaps some OBR generation code could be pulled in from the Cave project?

https://karaf.apache.org/index/subprojects/cave.html"
MRM-1537,olamy,Olivier Lamy (*$^%`),2011-10-18T10:50:59.183Z,2011-10-18T10:50:59.183Z,The most easy is to cp the directory from nexus in a managed repo directory and run a full scan.
MRM-1532,effrafax,Martin Stockhammer,2017-04-05T19:29:39.566Z,2017-04-05T19:29:39.566Z,"http://cxf.apache.org/docs/jax-rs-search.html
"
MRM-1566,olamy,Olivier Lamy (*$^%`),2011-12-16T09:43:44.169Z,2011-12-16T09:43:44.169Z,done
MRM-1589,olamy,Olivier Lamy (*$^%`),2012-09-10T14:59:55.139Z,2012-09-10T14:59:55.139Z,"http error handled with a common way
  statusCode: {
    403: function() {

    },
    500: function() {
    }
  }"
MRM-134,brettporter,Brett Porter,2006-09-04T00:31:03.215Z,2006-09-04T00:31:03.215Z,"done, though:
- no timestamp checking at present (can be added in a later iteration, but should be unnecessary for basic purposes as indexed files shouldn't be updated)
- no deletion (this will be addressed by the separate JIRA issue for it)"
MRM-193,joakime,Joakim Erdfelt,2006-09-28T08:56:08.457Z,2006-09-28T08:56:08.457Z,Work performed in plexus-security.
MRM-148,mkleint,Milos Kleint,2006-08-11T10:41:39.817Z,2006-08-11T10:41:39.817Z,"i figured the current patch is not 100% functional.
the zipped index is placed in the local repository (from configuration store. That's what I thought to be the location of the maven repository. However it seems it's not that case.

I guess there's a conceptual problem with this a bit. The index can be shared among multiple repositories that are managed by the webapp. The ""let's have a zipped index in the repository root"" idea is not compatible with this setup. There is not a 1:1 relationship between the index and the repository.

"
MRM-148,brettporter,Brett Porter,2006-08-24T23:50:52.188Z,2006-08-24T23:50:52.188Z,"how do you think we can resolve this issue?

I'd suggest:
- adding a configuration option for where to store the index file. In the local repository actually sounds fine as a default
- offer it for download from an action URL instead of relying on it being in the filesystem somewhere.

wdyt?"
MRM-148,brettporter,Brett Porter,2006-08-24T23:54:41.755Z,2006-08-24T23:54:41.755Z,linking dependant issue so that we can find the URL that will have the action to download the index
MRM-148,mkleint,Milos Kleint,2006-08-25T01:26:37.289Z,2006-08-25T01:26:37.289Z,"as discussed on mailing list as long as the following chain works, 'm happy

1. user has a repository url in pom.
2. by contacting a predefined location in the repository, I'm able to figure out the location of the index zip
3. I download the index zpi and i'm able to map the artifacts in index to those in the repository url defined in user's pom."
MRM-148,wsmoak,Wendy Smoak,2009-09-08T17:23:11.49Z,2009-09-08T17:23:11.49Z,Can this be considered done now that Archiva uses the Nexus indexer? I see a nexus-maven-repository-index.gz (and .zip) file in the .index directory within the repository.
MRM-148,brettporter,Brett Porter,2009-09-08T19:03:13.148Z,2009-09-08T19:03:13.148Z,closing as superceded
MRM-162,brettporter,Brett Porter,2006-09-10T22:13:15.012Z,2006-09-10T22:13:15.012Z,"the following capabilities are needed:
- forward to relocation action page
- delete (including corresponding checksums, POM and metadata)
- correct checksum
- correct metadata
"
MRM-135,joakime,Joakim Erdfelt,2007-06-18T16:20:27.925Z,2007-06-18T16:20:27.925Z,Postponing to future (post 1.0) version.
MRM-135,jameswdumay,James William Dumay,2008-05-08T01:42:21.399Z,2008-05-08T01:42:21.399Z,Moving to 1.1.x
MRM-135,jameswdumay,James William Dumay,2008-05-08T02:22:38.589Z,2008-05-08T02:22:38.589Z,Moving to 1.2
MRM-108,brettporter,Brett Porter,2006-05-31T20:17:58.312Z,2006-05-31T20:17:58.312Z,deployed a web site
MRM-143,brettporter,Brett Porter,2006-09-08T03:32:14.864Z,2006-09-08T03:32:14.864Z,"the current architecture has the reporting module depend on the indexer which means it can't be the other way around.

may need to split the reports from the api, depending on what classes are the dependency"
MRM-143,oching,Maria Odea Ching,2007-06-12T06:08:12.754Z,2007-06-12T06:08:12.754Z,"A jar is corrupted when:
- it is not readable
- the jar's filename does not match it's pom's artifactId and version (pom included in the jar)
- the files inside the jar file are not readable (?)

A pom is corrupted when:
- it is not readable
- the pom file itself does not match the artifactId and version in its content
- the pom file does not match its corresponding jar file (if present)

Are there other things that were not included above?
And are the metadata and checksum files also included here?"
MRM-143,oching,Maria Odea Ching,2007-06-14T06:00:01.221Z,2007-06-14T06:00:01.221Z,I added a CorruptArtifactReport (see MRM-409) that would identify a corrupt artifact problem when added to the database. 
MRM-143,oching,Maria Odea Ching,2007-07-31T04:46:08.148Z,2007-07-31T04:46:08.148Z,"The corrupt artifacts/poms are included in the reporting in MRM-329. These are added to the database as RepositoryProblem(s) (during validation) and can be retrieved via the CorrupArtifactReport. 

This issue can be closed when MRM-329 is completed."
MRM-165,aheritier,Arnaud HERITIER,2006-09-07T15:20:58.306Z,2006-09-07T15:20:58.306Z,If possible we'll update wagon in m1.1 RC1 to be able to send to the repository (or the proxy) a custom useragent ... To be continued.....
MRM-197,brettporter,Brett Porter,2007-07-31T04:16:49.522Z,2007-07-31T04:16:49.522Z,not relevant with a database
MRM-190,joakime,Joakim Erdfelt,2007-05-22T14:40:32.036Z,2007-05-22T14:40:32.036Z,The /proxy/ url has been removed.
MRM-150,oching,Maria Odea Ching,2006-09-05T20:23:22.829Z,2006-09-05T20:23:22.829Z,"Validations already implemented:
1. ConfigureRepositoryAction-validation:
    - required fields: id, name, directory
    - layout field is validated if the selected value is in the selection list

2. ConfigureProxiedRepositoryAction-validation:
    - required fields: id, name, url, layout, managedRepository
    - snapshotsInterval and releasesInterval are validated if they are numeric
    - layout, snapshotsPolicy and releasesPolicy are validated if the selected values are in their respective selection list
    - snapshotsInterval and releasesInterval should be set to 0 when the selected policy is not 'interval'

3. ConfigureSyncedRepositoryAction-addSelectedSyncedRepository-validation:
    - requiredd fields: id, name, layout, managedRepository
    - layout field is validated if the selected value is in the selection list
    - sync settings is validated, depending on what method 

4. ConfigureSyncedrepositoryAction-validation:
    - method field is required
    - method field is validatedd if the selected value is in the selection list 
"
MRM-163,brettporter,Brett Porter,2006-09-13T00:21:10.686Z,2006-09-13T00:21:10.686Z,"applied, thanks!"
MRM-176,jameswdumay,James William Dumay,2008-05-08T01:42:23.878Z,2008-05-08T01:42:23.878Z,Moving to 1.1.x
MRM-176,jameswdumay,James William Dumay,2008-05-08T02:22:38.964Z,2008-05-08T02:22:38.964Z,Moving to 1.2
MRM-176,jameswdumay,James William Dumay,2009-02-15T20:15:53.22Z,2009-02-15T20:15:53.22Z,From what I can see for the changes in 1.2 this should never happen as the search is always limited to the pagination size.
MRM-112,oching,Maria Odea Ching,2006-05-31T22:45:01.044Z,2006-05-31T22:45:01.044Z,"Created additional check when the index directory already exists but is empty, proceed with the indexing."
MRM-124,jameswdumay,James William Dumay,2008-05-08T01:42:19.244Z,2008-05-08T01:42:19.244Z,Moving to 1.1.x
MRM-124,jameswdumay,James William Dumay,2008-05-08T02:22:39.094Z,2008-05-08T02:22:39.094Z,Moving to 1.2
MRM-124,jameswdumay,James William Dumay,2008-08-20T19:34:08.078Z,2008-08-20T19:34:08.078Z,"Committed r687522 on branch https://svn.apache.org/repos/asf/archiva/branches/MRM-124

* Using Atlassian XML-RPC API (Source and binaries available under the Apache 2 license at https://maven.atlassian.com/public/)
* Modules for API and Server

Clients can simply depend on the archiva-xmlrpc-api module and use its interfaces to bind to remote services.

Here is an example:

Client interface:
{code}
@ServiceObject(""Test"")
interface TestService
{
  String ping();
}
{code}

Server implementation
{code}
class TestServiceImpl implements TestService
{
  String ping() {
    return ""pong"";
  }
}
{code}

Clients would then connect like so:
{code}
Binder binder = new DefaultBinder()
TestService testService = binder.bind(TestService.class, ""http://path/to/archiva/xmlrpcservlet"");
String result = testService.ping(); //result should equal ""pong""
{code}"
MRM-124,oching,Maria Odea Ching,2008-10-20T01:04:59.582Z,2008-10-20T01:04:59.582Z,"MRM-124 branch merged to trunk in -r706126.

Archiva now uses Apache XmlRpc via the Atlassian XmlRpc binder which James did. The XmlRpc module is already using Spring components, no more plexus annotations. The current service in place now is for administration, namely: execute repo/db scan, enable/disable consumers, delete artifact, query managed & remote repositories, query repo & database consumers. 

A search service still needs to be implemented."
MRM-124,oching,Maria Odea Ching,2008-10-23T20:30:17.256Z,2008-10-23T20:30:17.256Z,Closing issue.. There is already a jira issue for the xmlrpc search (MRM-206).
MRM-154,brettporter,Brett Porter,2006-08-25T00:19:56.618Z,2006-08-25T00:19:56.618Z,"thanks, would you mind including a test case?

also, it's important that the diff be taken from the level of pom.xml to make it easier to apply. I'm not sure how you are generating these but they don't even contain the filename."
MRM-154,ndeloof,nicolas de loof,2006-08-31T02:27:41.344Z,2006-08-31T02:27:41.344Z,"Rapackaged patch (from archiva-utils root), including testcase"
MRM-154,brettporter,Brett Porter,2006-08-31T23:28:51.657Z,2006-08-31T23:28:51.657Z,"applied, thanks.

I also fixed the same problem for the openssl format"
MRM-154,digulla,Aaron Digulla,2006-11-27T03:55:25.252Z,2006-11-27T03:55:25.252Z,"The supplied patch fails if the filename is ""-"" (stdin) like in http://repo1.maven.org/maven2/org/apache/maven/archetype/maven-archetype/1.0-alpha-4/maven-archetype-1.0-alpha-4.pom.md5:

54210dc92a25325496713d19d5ced2b9  -
"
MRM-175,joakime,Joakim Erdfelt,2007-06-18T16:24:10.302Z,2007-06-18T16:24:10.302Z,"This jira will need to be re-evaluated in light of the changes on trunk.

Brett,
Is this still an issue?"
MRM-175,brettporter,Brett Porter,2007-06-18T17:11:25.162Z,2007-06-18T17:11:25.162Z,I believe it is still worth looking at.
MRM-175,brettporter,Brett Porter,2007-11-08T16:33:02.522Z,2007-11-08T16:33:02.522Z,happy enough with performance now
MRM-142,brettporter,Brett Porter,2006-08-02T19:21:50.341Z,2006-08-02T19:21:50.341Z,"this simply seems to be the size of the processedProjectCache in the project builder. We should probably restrict the size of that in general, but for the MRM we should flush it whenever the index is (for now, just at the end will do)"
MRM-142,brettporter,Brett Porter,2006-08-02T19:40:00.34Z,2006-08-02T19:40:00.34Z,"did some performance analysis while I was there. It appears that indexing the JAR files is not the time consuming operation, but rather the indexing, checksumming and reading the POMs:

discovery: 7% (mostly the directory scanner - a total of 6%)
indexing records: 53%
reading records: 32%

Breaking down the last one:
reading pom: 16%
reading checksum: 14%

Breaking down reading the POM:
resolving: 3% (these are all local)
building: 13%

Breaking down building:
interpolation: 5%

This was with no existing index. It may be more skewed towards indexing if it has to delete all the records as it goes.
"
MRM-142,brettporter,Brett Porter,2006-08-02T19:50:59.089Z,2006-08-02T19:50:59.089Z,"the comment above seems a bit misleading. reading the files/classes inside a JAR is not time consuming. Indexing data (both jars and poms) is the most, followed by checksumming jars and by reading POMs (as the breakdown indicates)"
MRM-142,brettporter,Brett Porter,2006-12-23T00:41:09.914Z,2006-12-23T00:41:09.914Z,"this is actually not critical for the release, since the entire cache is flushed every time the index is run."
MRM-142,joakime,Joakim Erdfelt,2007-10-23T11:13:26.014Z,2007-10-23T11:13:26.014Z,"Fixed by removing maven/components from process, this is no longer an issue.
"
MRM-152,brettporter,Brett Porter,2006-08-25T00:17:36.137Z,2006-08-25T00:17:36.137Z,test case?
MRM-152,ndeloof,nicolas de loof,2006-09-05T03:36:35.279Z,2006-09-05T03:36:35.279Z,MRM-163 includes testcase and patch that solves this issue.
MRM-186,jirareport,Jira Report User,2006-10-04T12:12:37.676Z,2006-10-04T12:12:37.676Z,Easy enough to do - so patch attached.
MRM-186,jirareport,Jira Report User,2006-11-10T14:57:53.637Z,2006-11-10T14:57:53.637Z,"Patch seems to have junk in it; not sure why this isn't just:

Index: archiva-webapp/src/main/webapp/WEB-INF/jsp/showArtifact.jsp
===================================================================
--- archiva-webapp/src/main/webapp/WEB-INF/jsp/showArtifact.jsp	(revision 452532)
+++ archiva-webapp/src/main/webapp/WEB-INF/jsp/showArtifact.jsp	(working copy)
@@ -117,7 +117,7 @@
           <ww:param name=""version"" value=""%{version}""/>
         </ww:url>
       </c:set>
-      <my:currentWWUrl url=""${url}"">Depended On By</my:currentWWUrl>
+      <my:currentWWUrl url=""${url}"">Used By</my:currentWWUrl>
       <%-- TODO:
           <a href=""TODO"">Mailing Lists</a>
       --%>"
MRM-186,brettporter,Brett Porter,2006-11-10T16:22:49.972Z,2006-11-10T16:22:49.972Z,"I'd also like to change the terminology in the code references.

Aren't you a committer now? :)"
MRM-186,jirareport,Jira Report User,2006-11-24T13:53:38.06Z,2006-11-24T13:53:38.06Z,"Me? Surely not. Who would be foolish enough to do such a thing.

There are no 'depended on by's in the code references. There are lots of 'dependees'; but the obvious change for them would be 'users' and that'll be too confusing."
MRM-186,jirareport,Jira Report User,2006-11-24T13:58:22.666Z,2006-11-24T13:58:22.666Z," svn ci -m ""Changing 'Dependend on by' to 'Used by' as per #MRM-186. Code isn't changed yet as it's the word 'dependees' and I don't have a good replacement for that"" archiva-webapp

Sending        archiva-webapp/src/main/java/org/apache/maven/archiva/web/mapper/RepositoryActionMapper.java
Sending        archiva-webapp/src/main/webapp/WEB-INF/jsp/showArtifact.jsp
Transmitting file data ..
Committed revision 478968."
MRM-186,brettporter,Brett Porter,2006-12-26T20:21:32.691Z,2006-12-26T20:21:32.691Z,I think that's good enough
MRM-185,brettporter,Brett Porter,2007-05-29T23:19:36.264Z,2007-05-29T23:19:36.264Z,this needs to be prioritised as it has become much more noisy recently.
MRM-185,brettporter,Brett Porter,2007-10-22T08:54:27.231Z,2007-10-22T08:54:27.231Z,the proxy logging should also be revised to ensure it provides useful information for diagnosis and less noise
MRM-185,joakime,Joakim Erdfelt,2007-11-08T09:34:30.134Z,2007-11-08T09:34:30.134Z,"Closing as fixed.
Logging has undergone a slow, but steady cleanup over the past 3 months.
The logging is fairly lean now."
MRM-180,brettporter,Brett Porter,2007-07-31T04:17:14.25Z,2007-07-31T04:17:14.25Z,no idea if this is still an issue
MRM-180,jameswdumay,James William Dumay,2008-05-08T01:42:20.08Z,2008-05-08T01:42:20.08Z,Moving to 1.1.x
MRM-180,brettporter,Brett Porter,2010-02-23T02:24:22.107Z,2010-02-23T02:24:22.107Z,for testing
MRM-180,brettporter,Brett Porter,2010-02-23T05:10:41.316Z,2010-02-23T05:10:41.316Z,"It now reports

The artifact's POM file '.../data/repositories/test/test/MRM-675/1.0-SNAPSHOT/MRM-675-1.0-SNAPSHOT.pom' was missing

the POMs for both timestamped versions are there (but with the missing metadata it can't tell - perhaps this is just a matter of clarity?
"
MRM-180,olamy,Olivier Lamy (*$^%`),2014-03-02T16:47:45.112Z,2014-03-02T16:47:45.112Z,I wonder if it's still an issue?
MRM-159,brettporter,Brett Porter,2008-04-03T03:44:06.904Z,2008-04-03T03:44:06.904Z,just documentation left to do
MRM-170,jmcconnell,Jesse McConnell,2006-09-12T20:39:15.903Z,2006-09-12T20:39:15.903Z,"so I am the only person who has no problem with this?

and I can't reproduce it...

lovely"
MRM-170,jmcconnell,Jesse McConnell,2006-09-12T20:43:06.603Z,2006-09-12T20:43:06.603Z,including on a fresh checkout of archiva and I had blown away my repository last night...wierd
MRM-170,jmcconnell,Jesse McConnell,2006-09-13T14:39:27.988Z,2006-09-13T14:39:27.988Z,"turns out some actions were not defined per-lookup because the wrong version of plexus-maven-plugin was not using the configuration provided correctly.

should be working fine now"
MRM-199,jirareport,Jira Report User,2006-10-03T14:06:14.928Z,2006-10-03T14:06:14.928Z,Replacing the previous patch as this code was rewritten somewhat.
MRM-199,evenisse,Emmanuel Venisse,2006-10-05T16:14:01.188Z,2006-10-05T16:14:01.188Z,Applied. Thanks
MRM-117,pmking,Marvin King,2006-06-16T00:26:21.196Z,2006-06-16T00:26:21.196Z,"
   - This patch will break jetty6 plugin support. The current jetty6 plugin uses the 
container-defaults on the m2/core  which is version 1.0-alpha-9 the new 
plexus-xwork-integration needs version 1.0-alpha-10 to work properly.

    Details :

        given the the url : http://host.com/<prefix>/<groupId>/<artfiactId>-<version>.jar

        The RepositoryProxyActionMapper with check if the <prefix> matches the prefix
        configured on the proxy configuration. If it matches it will pass the execution to
        the RepositoryProxyAction passing the <groupId>/<artifactId>-<version>.jar part
        as argument. If <prefix> doesn't match the request will be given to the 
        DefaultActionMapper for normal processing.

        <prefix> - used by the RepositoryProxyAction to detect if proxy is requested
        <groupId>/<artifactId>-<version>.jar - the requested artifact

        Configuration :

              src/main/webapp/WEB-INF/classes/maven-proxy-complete.conf      
    
              the cache directory must point to a valid directory, the default dir is
              /tmp/proxy-cache.

              default prefix : repository
                 ( http://somehost.com/repository/<groupId>/<artifactId>-<version>.jar )
"
MRM-117,pmking,Marvin King,2006-06-18T04:21:45.618Z,2006-06-18T04:21:45.618Z,  added the lacking configuration files for webwork 2.2.2 and webwork.tld
MRM-117,brettporter,Brett Porter,2006-07-06T06:43:21.752Z,2006-07-06T06:43:21.752Z,applied with some small modifications to make the tests pass and to remove unneeded files.
MRM-169,joakime,Joakim Erdfelt,2006-09-29T14:43:58.956Z,2006-09-29T14:43:58.956Z,"I think this issue has become moot with the finalization of the p-sec modules into archiva.

p-sec does not do validation in javascript. (never did like that).

Also, the email address uniqueness was intentionally not enforced, as it's very possible to have 2 accounts with the same email address (admin and ordinary user, corporations that prefer to operate with aliases or distribution list addresses, etc...)

As for the other points, i believe they should all be fixed."
MRM-169,brettporter,Brett Porter,2006-09-29T20:20:33.472Z,2006-09-29T20:20:33.472Z,I think we should recoinsider the javascript though.
MRM-127,mkleint,Milos Kleint,2006-07-24T23:09:04.549Z,2006-07-24T23:09:04.549Z,"also please consider how the pom models ought to be stored. (and retrieved) - MRM-121
I noticed you did some changes that involved merging the pom and artifact index lately. However it's still using the MavenXpp3Reader to load the pom model. 
That gives incomplete info on 
1. version+groupId in case you have a parent pom (you seemed to workaround it by setting the parent's version+groupId)
2. dependencies, plugin information is also incomplete
3. if any of the values are defined as property it will list them as such (not sure haven't tested)

"
MRM-127,brettporter,Brett Porter,2006-07-24T23:36:29.989Z,2006-07-24T23:36:29.989Z,"yes, I'd identified that problem too, so I'm continuing on - will definitely take that into account, thanks for the reminder. Sorry I missed your original patch."
MRM-127,mkleint,Milos Kleint,2006-07-25T01:11:35.255Z,2006-07-25T01:11:35.255Z,"one more thing that comes to mind.
if we are to support the usecase where one downloads the index from a remote repository and works with it locally, then it's crucial that the searcher code works only on top of the index files and never contacts the remote repository (it used to do for poms I suppose where the pom was reparsed and returned from the SearchHit - not sure if it's still in the codebase)"
MRM-127,brettporter,Brett Porter,2006-07-25T01:43:06.811Z,2006-07-25T01:43:06.811Z,"the searcher will not be reading from the repository, just the index. I've put a design doc in SVN - let me know if you think anything is missing"
MRM-140,brettporter,Brett Porter,2006-08-25T00:34:34.678Z,2006-08-25T00:34:34.678Z,"fixed by ensuring container is initialised only once. The logger manager was not being loaded from application.xml because it was already initialised with defaults.
"
MRM-100,elpunzalan,Edwin Punzalan,2006-03-14T02:14:44.986Z,2006-03-14T02:14:44.986Z,"This is already a plexus objject... just need to be able to configure it in components.xml.

Right now, creating a components.xml for its configuration will be overwritten by the autogenerated components.xml from the plexus annotations."
MRM-100,brettporter,Brett Porter,2006-08-25T01:11:34.992Z,2006-08-25T01:11:34.992Z,configuration was redone using a model
MRM-181,brettporter,Brett Porter,2006-09-22T02:23:16.893Z,2006-09-22T02:23:16.893Z,"thanks, my bad when I changed the plexus container version"
MRM-181,mkleint,Milos Kleint,2006-09-22T03:49:37.06Z,2006-09-22T03:49:37.06Z,"i've just update the sources or archiva trunk and still cannot completely build. it seems that a snapshot is not deployed in the repo?

[INFO]  Path to dependency: 
[INFO]  	1) org.apache.maven.archiva:archiva-plexus-runtime:jar:1.0-SNAPSHOT
[INFO]  	2) org.codehaus.plexus:plexus-naming:jar:1.0-SNAPSHOT"
MRM-181,brettporter,Brett Porter,2006-09-22T03:53:31.768Z,2006-09-22T03:53:31.768Z,"I'll check that one, but it should come from the same repo. Maybe you need -U? BTW, you don't need to build the runtime to run the webapp - the app and runtime are optional."
MRM-181,brettporter,Brett Porter,2006-09-22T22:22:03.058Z,2006-09-22T22:22:03.058Z,I removed plexus-naming and it was downloaded again. I'm not able to reproduce the failure.
MRM-139,elpunzalan,Edwin Punzalan,2006-10-17T20:11:26.011Z,2006-10-17T20:11:26.011Z,would having a task executor solve this?  This is what continuum uses to queue jobs.
MRM-139,elpunzalan,Edwin Punzalan,2006-10-25T01:36:53.147Z,2006-10-25T01:36:53.147Z,Fixed in SVN
MRM-146,joakime,Joakim Erdfelt,2006-08-09T18:18:03.173Z,2006-08-09T18:18:03.173Z,Updated and Recreated diff to address new code additions (rev 430109) and workaround a plexus cdc bug.
MRM-146,brettporter,Brett Porter,2006-08-10T03:26:37.498Z,2006-08-10T03:26:37.498Z,"I'm currently reviewing this. Things I've modified so far:
- fixed code reformatting (moving imports)
- removed the changes to the test case that introduced assertRecord. This seems to error prone to maintain, and would prefer to keep using the equals() method
- added the sha1bytecodechecksum to the equals method
- guaranteed md != null and removed the extra checks
- removed setAlgorithm, used internal methods instead
- split digester into two interfaces - a streaming digester, and the original one
"
MRM-146,brettporter,Brett Porter,2006-08-10T07:49:51.568Z,2006-08-10T07:49:51.568Z,"also omitted the record changes - it wasn't related to this, and won't do anything without the lucene conversion, so I'm opening a new issue with the remainder of the patch. I don't believe some of them should be in the minimal index - perhaps we can discuss"
MRM-196,jirareport,Jira Report User,2006-12-15T19:32:02.018Z,2006-12-15T19:32:02.018Z,Also 'Used By' by the look of it. From a quick glance it looks like it's cutting off to 4 like a reports page.
MRM-196,jirareport,Jira Report User,2006-12-15T20:16:16.619Z,2006-12-15T20:16:16.619Z,Can't see us releasing when the reports and things don't provide all the data.
MRM-196,brettporter,Brett Porter,2008-09-13T21:35:45.783Z,2008-09-13T21:35:45.783Z,closing parent issue and moving others out
MRM-189,jirareport,Jira Report User,2006-12-15T20:03:18.349Z,2006-12-15T20:03:18.349Z,I think this needs to be resolved before 1.0-beta1.
MRM-189,joakime,Joakim Erdfelt,2007-05-11T16:02:52.56Z,2007-05-11T16:02:52.56Z,lowering severity from blocker to critical.
MRM-189,joakime,Joakim Erdfelt,2007-05-29T13:39:58.667Z,2007-05-29T13:39:58.667Z,Unable to reproduce with current archiva/trunk
MRM-137,jmcconnell,Jesse McConnell,2006-09-13T14:41:16.677Z,2006-09-13T14:41:16.677Z,"I think the core components of this issue are in place now, restricting access to the admin interface components, etc.

this will surely be somewhat of an ongoing issue but the primary elements of this issue are in place."
MRM-137,joakime,Joakim Erdfelt,2006-09-18T19:39:56.158Z,2006-09-18T19:39:56.158Z,Reopening because of plexus-security integration.
MRM-123,franz_see,Franz Allan Valencia See,2006-09-07T07:11:29.973Z,2006-09-07T07:11:29.973Z,"Good day,

I'm thinking we can use ROME ([1]) as the RSS Generator. ...Are there any other suggestions? :-)

Anyway, I'm thinking of contributing to this issue. However, I still haven't familiarize myself enough with the code to identify where I can get the infos needed for the generation. Right now, all I know is that RepositoryArtifactIndex is one of them (for the search results). But I'm not yet sure where to get the others (Hints anyone? ;-) )

Thanks,
Franz

[1] https://rome.dev.java.net/"
MRM-123,gjoseph,Grgory Joseph,2007-11-10T18:42:32.365Z,2007-11-10T18:42:32.365Z,Sounds like a relatively good way of having notifications when artifacts are being added to be the repo. This gets my vote :)
MRM-123,oching,Maria Odea Ching,2008-04-02T05:02:40.346Z,2008-04-02T05:02:40.346Z,Initial commit in -r643826. 
MRM-123,oching,Maria Odea Ching,2008-04-06T21:58:32.102Z,2008-04-06T21:58:32.102Z,"Additional commit in -r645347:
- generate feeds for new artifacts in the repository and new versions of artifacts
- created tests"
MRM-123,oching,Maria Odea Ching,2008-04-07T10:52:39.903Z,2008-04-07T10:52:39.903Z,"Changes in -r645576:
- generate/update rss feeds after repository scan
- add rss feed icon in repositories (for new artifacts in repo feed) and in browse artifact (for new versions of artifact feed)"
MRM-123,oching,Maria Odea Ching,2008-04-08T05:39:41.909Z,2008-04-08T05:39:41.909Z,"-r645833:
- configure host & port of the links in the rss feeds"
MRM-138,brettporter,Brett Porter,2006-08-02T00:33:48.769Z,2006-08-02T00:33:48.769Z,"see also http://mail-archives.apache.org/mod_mbox/maven-dev/200607.mbox/%3cf6b307f10607242037i4e937262nb43b2f6c13b4c237@mail.gmail.com%3e

it needs to avoid aggregating repositories, or correctly handle the consequences of doing so for metadata"
MRM-160,oching,Maria Odea Ching,2007-07-31T02:40:27.735Z,2007-07-31T02:40:27.735Z,I think this is already fixed in the new archiva.
MRM-182,brettporter,Brett Porter,2006-09-22T01:40:20.293Z,2006-09-22T01:40:20.293Z,"yep, I haven't update the runtime yet after making that change.

jetty:run on the webapp should be working though - it looks like you're getting plexus-container alpha-9 instead of the alpha-10-SNAPSHOT.

I'll clean that portion of my repo and double check it is all deployed correctly."
MRM-174,brettporter,Brett Porter,2007-11-08T16:44:23.917Z,2007-11-08T16:44:23.917Z,"unless there is a need, closing."
MRM-115,oching,Maria Odea Ching,2006-06-01T01:06:01.307Z,2006-06-01T01:06:01.307Z,"Changed the role hint of ArtifactDiscoverer in RepositoryBrowseAction.
Tested the changes made."
MRM-179,brettporter,Brett Porter,2006-09-30T06:12:01.472Z,2006-09-30T06:12:01.472Z,it does correctly send a 404 result
MRM-198,jirareport,Jira Report User,2006-10-01T02:19:17.013Z,2006-10-01T02:19:17.013Z,Replacing the first patch with this one - added info on needing javamail/activation.
MRM-198,evenisse,Emmanuel Venisse,2006-10-05T15:24:16.675Z,2006-10-05T15:24:16.675Z,Applied. Thanks
MRM-155,brettporter,Brett Porter,2006-08-25T00:21:15.702Z,2006-08-25T00:21:15.702Z,"could you include tests that produce the problem that this fixes too, please?

Also, I'd prefer one diff using svn diff that marks out each file that gets patched."
MRM-155,ndeloof,nicolas de loof,2006-08-28T03:27:56.456Z,2006-08-28T03:27:56.456Z,"patch Updated for ""archiva"" renamed project, 
with some cleanup from debug logs I've accidently included in previous patch"
MRM-155,ndeloof,nicolas de loof,2006-08-28T05:08:50.536Z,2006-08-28T05:08:50.536Z,The attached LegacyArtifactDiscoverer is an error. It is not required to solve this issue and introduced a test failure..
MRM-155,brettporter,Brett Porter,2006-08-28T22:39:33.584Z,2006-08-28T22:39:33.584Z,"Nicolas, we've started a policy of only applying patches with test cases to attempt to boost and maintain our test coverage. Please resubmit with a test that exhibits the problem, and the code that fixes it.

Also, it really is difficult to apply a patch generated like this. Please use svn diff from the root of the project, as explained in the Maven ""how to help"" pages.

Thanks!"
MRM-155,ndeloof,nicolas de loof,2006-08-31T02:33:17.198Z,2006-08-31T02:33:17.198Z,"
Repackaged patch to include testcase.

adds ""testLegacyRequestConvertedToMaven2PathInManagedRepo"" to ProxyRequestHandlerTest.
"
MRM-155,brettporter,Brett Porter,2006-08-31T21:14:54.195Z,2006-08-31T21:14:54.195Z,"unfortunately this broke existing tests. Please make sure to run them all again before submitting.

I'm going to rework it to get that fixed though this time."
MRM-155,brettporter,Brett Porter,2006-08-31T21:18:10.034Z,2006-08-31T21:18:10.034Z,"I removed:
                if ( target.exists() ) 
                {                    
                    break;
                }                

Because it caused additional snapshot repositories to be checked as they should be (as shown by the metadata merging test failure)"
MRM-155,brettporter,Brett Porter,2006-08-31T21:20:12.497Z,2006-08-31T21:20:12.497Z,"this:
        if ( path.endsWith( "".md5"" ) || path.endsWith( "".sha1"" ) )
        {
            // always read from the managed repository, no need to make remote request
        }

was removed without explanation. The checksums should always be present so need to proxy them. I added it back.
"
MRM-155,brettporter,Brett Porter,2006-08-31T21:31:56.872Z,2006-08-31T21:31:56.872Z,"ok, found and fixed the problem.

"
MRM-155,brettporter,Brett Porter,2006-08-31T21:37:11.164Z,2006-08-31T21:37:11.164Z,"I've added an additional test for the reverse case (legacy managed, default remote) and noticed this fix wasn't sufficient. I've corrected that."
MRM-141,brettporter,Brett Porter,2006-09-25T23:20:24.246Z,2006-09-25T23:20:24.246Z,"* take a note that while there are multiple managed repos, there is a single repo view. There are no test/quality indicators on artifacts - the separation of managed repositories can be used to achieve that"
MRM-141,jirareport,Jira Report User,2006-10-03T16:55:52.046Z,2006-10-03T16:55:52.046Z,Where are the indexing design docs?
MRM-141,brettporter,Brett Porter,2007-08-08T23:03:52.21Z,2007-08-08T23:03:52.21Z,"my notes are now out of date after all the changes that happened for 1.0-alpha-1, so they'l need to be re-done.

Deng has started to write some notes on the current architecture here: http://docs.codehaus.org/display/MAVENUSER/Archiva+1.0.x+Developers+Notes"
MRM-141,brettporter,Brett Porter,2007-10-31T19:28:56.093Z,2007-10-31T19:28:56.093Z,"I would suggest we only need to do the following for 1.0:
- get rid of documents that are no longer relevant (probably mine in the indexing and the proxying modules)
- set aside a space for such documents in a structured way so we can gradually grow them back again
- incorporate Deng's document."
MRM-141,brettporter,Brett Porter,2007-11-05T05:05:45.032Z,2007-11-05T05:05:45.032Z,got rid of old docs - will leave other docs in wiki and set them up over time
MRM-129,brettporter,Brett Porter,2006-09-04T00:28:58.501Z,2006-09-04T00:28:58.501Z,"this isn't necessary after the refactoring, and a better solution will be to allow some parallelism in the indexing process, which a new issue will be opened for."
MRM-128,mkleint,Milos Kleint,2006-07-31T08:51:03.281Z,2006-07-31T08:51:03.281Z,these issues are connected.
MRM-128,joakime,Joakim Erdfelt,2007-10-02T13:21:47.833Z,2007-10-02T13:21:47.833Z,"No longer a problem.
Likely fixed in earlier version."
MRM-130,brettporter,Brett Porter,2006-08-03T01:31:43.064Z,2006-08-03T01:31:43.064Z,we also need to keep the same search form at the top as we had originally (quick search or find artifact)
MRM-130,joakime,Joakim Erdfelt,2006-09-06T12:21:36.691Z,2006-09-06T12:21:36.691Z,"The search results page should do some linkage too.

Currently the 3 columns are Group / Artifact / Version

I propose 4 columns.

# Group Id - with link to browse for group id.
# Artifact Id - with link to browse for artifact id.
# Version - with link to details for version.
# Download (icon) - with direct link to download artifact.

So. using a real world example...

# org.apache.maven - http://repository.maven.org/browse/org.apache.maven
# maven-core - http://repository.maven.org/browse/org.apache.maven/maven-core
# 2.0.3 - http://repository.maven.org/browse/org.apache.maven/maven-core/2.0.3
# (download) - http://repo.mergere.com/maven2/org/apache/maven/maven-core/2.0.3/maven-core-2.0.3.jar"
MRM-130,brettporter,Brett Porter,2006-09-06T19:47:29.332Z,2006-09-06T19:47:29.332Z,"are you looking at the current implementation or the planned implementation?

http://people.apache.org/~brett/repoman-site/results.html?Go%21=Submit+Query

"
MRM-130,joakime,Joakim Erdfelt,2006-09-06T21:30:14.941Z,2006-09-06T21:30:14.941Z,"Wasn't aware of the new search results page view.

I was commenting on the existing functional archiva located at http://repository.maven.org/quickSearch.action?q=maven-core"
MRM-130,jirareport,Jira Report User,2006-10-03T16:58:19.433Z,2006-10-03T16:58:19.433Z,"I've improved things in MRM-201. 

I wasn't looking at the mockup though - just unifying the search, used-by and dependencies pages so they have the same look."
MRM-130,evenisse,Emmanuel Venisse,2006-10-05T15:20:15.128Z,2006-10-05T15:20:15.128Z,Applied. Thanks
MRM-130,brettporter,Brett Porter,2007-06-09T19:32:24.258Z,2007-06-09T19:32:24.258Z,this wasn't fixed... the patch just took care of the appearance. The original items in the description don't exist to my knowledge
MRM-130,olamy,Olivier Lamy (*$^%`),2012-09-25T15:57:50.297Z,2012-09-25T15:57:50.297Z,fixed with the new ui
MRM-116,oching,Maria Odea Ching,2006-06-05T21:12:05.915Z,2006-06-05T21:12:05.915Z,"Created a class (DiscovererExecution) that would be executed when the repository webapp is accessed and no index exists yet. 
Refactored DiscovererScheduler and DiscovererJob to invoke the DiscovererExecution when performing discovery and indexing in the repository."
MRM-184,joakime,Joakim Erdfelt,2007-06-18T16:21:55.105Z,2007-06-18T16:21:55.105Z,"Brett,
Can you provide more details on what you mean by ""Dependency Closure Reports"" ?"
MRM-184,brettporter,Brett Porter,2007-06-18T17:14:18.207Z,2007-06-18T17:14:18.207Z,dependencies in poms that are not in the current repository
MRM-184,brettporter,Brett Porter,2007-07-31T04:12:50.562Z,2007-07-31T04:12:50.562Z,probably not relevant with the database in place
MRM-153,ndeloof,nicolas de loof,2006-08-28T03:49:35.386Z,2006-08-28T03:49:35.386Z,"Patch updated for ""archiva"" renamed project."
MRM-153,ndeloof,nicolas de loof,2006-08-28T05:30:32.542Z,2006-08-28T05:30:32.542Z,Patch updated to allow request for checksum on a relocated artifact to return the checksum of the relocated artifact.
MRM-153,ndeloof,nicolas de loof,2006-08-29T05:42:28.079Z,2006-08-29T05:42:28.079Z,Testcase that uses servletapi POM to relocate a maven1 request.
MRM-153,brettporter,Brett Porter,2006-08-30T01:48:26.175Z,2006-08-30T01:48:26.175Z,"Hi Nicolas. The test looks pretty, good, but some comments:

- this will require downloading from ibiblio, which is not very good. I think it would be better to have the 'managed' repository created in, say, target/test/managed-repository instead of src/test/maven-2.x-repository, and use maven-2.x repository as the proxy repo (using file:// ... as the URL)

- in the patch, you should omit binary files. Besides, its not necessary to have a full size servlet jar for this test

- the code and test should be in the proxy module instead of core. The code should be part of the proxy request handler instead of being done in the proxy manager. This can guarantee it gets done after the POM is downloaded, whereas this technique I think will fail if the POM was not already present.

Can you review the patch? Thanks!

If you could submit a single diff file for the proxy module that would be most helpful."
MRM-153,ndeloof,nicolas de loof,2006-08-31T02:20:02.021Z,2006-08-31T02:20:02.021Z,"Repackaged patch to include testcase.

adds ""testLegacyRequestConvertedToMaven2PathInManagedRepo"" to ProxyRequestHandlerTest. 
"
MRM-153,ndeloof,nicolas de loof,2006-08-31T02:29:03.262Z,2006-08-31T02:29:03.262Z,"Please don't mind my patch name is ""MRM-155"" as it is a typo. This patch file IS related to MRM-153"
MRM-153,ndeloof,nicolas de loof,2006-08-31T02:35:15.054Z,2006-08-31T02:35:15.054Z,"I realy have troubles with numbers. Please don't care this patch that IS for MRM-155 and has been also attached to MRM-155 issue. I'll provide a patch for MRM-153 (this one) latter.

Sory for noise..."
MRM-153,ndeloof,nicolas de loof,2006-08-31T04:18:07.259Z,2006-08-31T04:18:07.259Z,"This patch moves the relocation handling in DefaultProxyRequestHandler (archiva-proxy). No more change on archiva-core is required. 
Testcase is included for artecfact + checksum relocation on maven1 request.

This patch requires some logic change on the DefaultProxyRequestHandler.get() :
Artifact layout is discovered BEFORE proxies are used to get the file. This require to handle checksums, metadata and unknown file before requesting proxied repositories. 

I moved metadata and unknown files handling in a dedicated method to clarify code.

Please note this patch includes correction for issue MRM-155 as managed repository path is build during artifact discovery, so my patch for MRM-155 gets obsolete if this patch is applied."
MRM-153,brettporter,Brett Porter,2006-08-31T23:20:57.236Z,2006-08-31T23:20:57.236Z,"there are a number of issues with this that I am reworking:
- the same ones highlighted in MRM-155
- incorrect assumptions about the location of the POM
- didn't test m2 relocations at all
- exception handling in the relocation was not ideal
- applyRelocation didn't need to return artifact, it modifies the passed in instance"
MRM-153,ndeloof,nicolas de loof,2007-02-07T09:12:40.811Z,2007-02-07T09:12:40.811Z,"This feature is broken by the use of DAV repository in place of the original ""/proxy"" path.

in ProxiedDavServer :
if ( WebdavMethodUtil.isReadMethod( request.getRequest().getMethod() ) )
        {
            if ( !hasResource( request.getLogicalResource() ) )
            {
                fetchContentFromProxies( request );
            }
        }
        davServer.process( request, response );

> The relocation is handled in fetchContentFromProxies( request ); but the relocated path is not reported in the request

The request can be updated, but this requires to convert the File object into a path in the managed repository. I solved this by using :

            File file = proxyRequestHandler.get( request.getLogicalResource(), this.proxiedRepositories, this.managedRepository,
                                     this.wagonProxy );
            File baseDir = new File( this.managedRepository.getBasedir() );
            String path = file.getAbsolutePath().substring( baseDir.getAbsolutePath().length() );
            request.getRequest().setPathInfo( path );

... but those absolutePath.substring don't look very clean. Is there any other way to compute this Path from the File object and the managedRepository ? An alternative would be to return a ""RepositoryEntry"" in place of a File, that would contain both File and path."
MRM-153,ndeloof,nicolas de loof,2007-02-14T07:07:35.419Z,2007-02-14T07:07:35.419Z,"This patch changes ProxyRequestHandler to return a ProxiedArtifact with both File and (relocated) Path.

"
MRM-153,ndeloof,nicolas de loof,2007-02-14T07:57:23.657Z,2007-02-14T07:57:23.657Z,"This latest patch includes previous but also fixes MRM-268 : 

as Maven2 request come from maven2 (!) we can expect the client to handle relocation, and the client expecet archiva to return the expected artifact (a POM) with no internal relocation.

Previous patch also was missing the ProxiedArtifact class."
MRM-153,aheritier,Arnaud HERITIER,2007-05-10T17:31:05.677Z,2007-05-10T17:31:05.677Z,MRM153-reopened+MRM-268.patch applied in 0.9 branch
MRM-153,brettporter,Brett Porter,2007-07-31T03:06:32.8Z,2007-07-31T03:06:32.8Z,"need to test this still works in 1.0-*, as it was applied for 0.9"
MRM-153,ndeloof,nicolas de loof,2007-09-14T10:59:08.582Z,2007-09-14T10:59:08.582Z,"This patch has been tested on 1.0-beta-2-SNAPSHOT (rev 575722)

It allows to get a relocated artifact using either :

maven2 request :
http://localhost:8080/archiva/repository/internal/servletapi/servletapi/2.3/servletapi-2.3.pom
<""client-side"" relocation>
http://localhost:8080/archiva/repository/internal/javax/servlet/servlet-api/2.3/servlet-api-2.3.jar

maven1 request :
http://localhost:8080/archiva/repository/internal/javax.servlet/jars/servlet-api-2.3.jar
or <""server-side"" relocation>
http://localhost:8080/archiva/repository/internal/servletapi/jars/servletapi-2.3.jar

I'd like to write some junit test but I'm not familiar with plexus and how to test servlet-based code. Maybe some integration-test would be helpfull ?"
MRM-153,oching,Maria Odea Ching,2007-09-16T00:19:12.116Z,2007-09-16T00:19:12.116Z,"Patch applied (-r576032)

Thanks! :)"
MRM-194,jmcconnell,Jesse McConnell,2006-10-02T17:28:03.098Z,2006-10-02T17:28:03.098Z,"* roles already assigned appear in grant area, they should be omitted

done

* when role addition/removal is complete, return to the user page, not the user list page

done

* likewise, roles that are children of assigned roles should be omitted from grant (and assigned)

I can see why you would like this, I'll take a look at it...the other two just involved tweaks in the integration and content, this goes into the rbac api area"
MRM-194,joakime,Joakim Erdfelt,2006-10-03T05:32:23.223Z,2006-10-03T05:32:23.223Z,"[Opinion]

I think all roles should be displayed.

*BUT*, if a role is unavailable, it should be grayed out, have no checkbox to select it, and a label (tooltip?) specifying why it is unavailable.

Unavailable Reasons.

# You do not have access to the Role (meaning, you are just a lowly user manager, you shouldn't have access to the roles above you, such as System Administrator)
# This role is already assigned directly.
# This role is already assigned indirectly through child roles."
MRM-194,jmcconnell,Jesse McConnell,2006-10-04T19:50:56.302Z,2006-10-04T19:50:56.302Z,"ok, after implementing it the way the issue asks for...I am leaning towards changing it around again...

I think the right way to do this is as joakim suggests, offer the grayed out roles as ungrantable but not directly assigned.  I'll take care of this as soon as I get the chance, either tonight or tomorrow probably."
MRM-194,jmcconnell,Jesse McConnell,2006-10-05T21:05:28.428Z,2006-10-05T21:05:28.428Z,"ok, have a functional solution to this in place now

Effective Roles - renders a list of effectively assigned roles
Assigned Roles - renders checkboxes letting you remove an assigned role
Available Roles - renders checkboxes letting you assign a role"
MRM-122,jvanzyl,Jason van Zyl,2006-07-21T14:32:52.876Z,2006-07-21T14:32:52.876Z,Deployed the simple site. Now will ping the choose.org folks.
MRM-147,joakime,Joakim Erdfelt,2007-05-22T14:50:29.38Z,2007-05-22T14:50:29.38Z,Fields already exist in archiva trunk.
MRM-173,brettporter,Brett Porter,2010-02-23T02:03:09.668Z,2010-02-23T02:03:09.668Z,for consideration with Nexus indexer upgrade
MRM-173,olamy,Olivier Lamy (*$^%`),2012-09-25T16:21:37.918Z,2012-09-25T16:21:37.918Z,lucene 3.6 and last changes in maven-indexer add some optimizations.
MRM-119,brettporter,Brett Porter,2010-02-23T01:42:17.476Z,2010-02-23T01:42:17.476Z,related to Nexus indexing upgrade
MRM-119,brettporter,Brett Porter,2011-09-12T08:17:09.246Z,2011-09-12T08:17:09.246Z,This is really superceded by using the other indexer - anything related to downloading the incremental index from a remote repository is in another issue
MRM-114,pmking,Marvin King,2006-05-31T05:23:19.229Z,2006-05-31T05:23:19.229Z,"
  for review"
MRM-114,oching,Maria Odea Ching,2006-05-31T21:30:45.581Z,2006-05-31T21:30:45.581Z,Patch applied :) thanks
MRM-172,joakime,Joakim Erdfelt,2006-09-13T18:52:07.847Z,2006-09-13T18:52:07.847Z,Patch against Archiva-Webapp to provide webdav and access controls.
MRM-172,jmcconnell,Jesse McConnell,2006-09-15T13:52:13.884Z,2006-09-15T13:52:13.884Z,"this has been applied (a couple of days ago, slow to close I guess)

thanks joakim "
MRM-172,brettporter,Brett Porter,2006-09-17T18:36:28.679Z,2006-09-17T18:36:28.679Z,"Jesse - please make sure you follow the commit template:

[MRM-172] (commit message)
Submitted by: Joakim Erdfelt

This ensures:
a) it's easy to later find contributors
b) the issue records the SVN commit."
MRM-172,brettporter,Brett Porter,2006-09-17T18:43:17.069Z,2006-09-17T18:43:17.069Z,"that should have been \[MRM-172\] in the template, it got wikified"
MRM-183,mkleint,Milos Kleint,2006-09-22T09:50:21.766Z,2006-09-22T09:50:21.766Z,"I encountered the same problem.
for reasons unknown to me, running the plexus runtime by ./bin/linux/run.sh start script works."
MRM-183,brettporter,Brett Porter,2006-09-22T19:24:48.479Z,2006-09-22T19:24:48.479Z,"ah, the perils of me being on a mac system. Thanks - I'll test this out soon. There's actually a way to configure it into the startup scripts. How are you running the application?"
MRM-183,wilfred,Wilfred Springer,2006-09-26T08:27:05.463Z,2006-09-26T08:27:05.463Z,I think I was running plexus.sh directly.....
MRM-183,evenisse,Emmanuel Venisse,2006-11-24T07:33:22.142Z,2006-11-24T07:33:22.142Z,Already fixed.
MRM-120,brettporter,Brett Porter,2006-08-02T07:09:43.933Z,2006-08-02T07:09:43.933Z,restructured to use Maven site layout (css/xhtml).
MRM-395,brettporter,Brett Porter,2007-05-30T00:30:41.432Z,2007-05-30T00:30:41.432Z,sorry
MRM-364,jmcconnell,Jesse McConnell,2007-05-24T11:42:39.003Z,2007-05-24T11:42:39.003Z,had to add a .tableRegion to get the changes to pick up
MRM-379,joakime,Joakim Erdfelt,2007-05-29T13:38:29.358Z,2007-05-29T13:38:29.358Z,"Fixed in trunk.
Bumped up size limits on Description field from jpox defaults (which is a mystery number) to a more sane 8192 characters."
MRM-374,dangelito,Dawn Angelito,2007-05-27T23:49:00.708Z,2007-05-27T23:49:00.708Z,"Noticed that when you edit Archiva Managed Snapshot Repository, ""Releases Included"" is always set to True."
MRM-374,brettporter,Brett Porter,2007-07-29T23:55:49.303Z,2007-07-29T23:55:49.303Z,still seeing this in the latest version.
MRM-374,oching,Maria Odea Ching,2007-08-08T21:11:22.68Z,2007-08-08T21:11:22.68Z,"There is an issue regarding the checkbox tag in webwork if the default value is 'true'.

There is a fix for this but I think it's on Struts 2, see https://issues.apache.org/struts/browse/WW-992.

A solution for this, which is to add a CheckboxInterceptor and edit the checkbox.ftl, was also mention in this forum:
http://forums.opensymphony.com/thread.jspa?forumID=1&threadID=23601

It is also applicable to MRM-407.
"
MRM-374,brettporter,Brett Porter,2007-08-08T21:18:24.574Z,2007-08-08T21:18:24.574Z,"I think it can be made to work, though - I've seen it. It required ensuring that it was set to the appropriate default value in the model (I think, false), and then setting the value it should be in the prepare() method of the action.

Perhaps we could look back at 0.9-alpha-2?"
MRM-374,oching,Maria Odea Ching,2007-08-08T21:34:01.148Z,2007-08-08T21:34:01.148Z,"Ok, I'll look into that. Thanks! :)"
MRM-374,oching,Maria Odea Ching,2007-08-15T03:48:47.201Z,2007-08-15T03:48:47.201Z,"Fixed in -r566068

- Added the hack for the webwork checkbox in ConfigureRepositoryAction, same one used for 0.9-alpha-2"
MRM-308,jova,Joerg Vater,2007-03-22T07:26:56.352Z,2007-03-22T07:26:56.352Z,When I change the layout of the managed repository to legacy it works for maven1 requests but not for maven2 requests.
MRM-308,brettporter,Brett Porter,2007-09-15T22:32:45.596Z,2007-09-15T22:32:45.596Z,I think this has previously been fixed
MRM-358,nramirez,Nap Ramirez,2007-05-31T02:05:57.997Z,2007-05-31T02:05:57.997Z,"The code in trunk doesn't do anything yet.  The patch includes working stuff, updates the cron and consumers.  Dunno what the Update Database button does."
MRM-358,nramirez,Nap Ramirez,2007-05-31T02:07:19.46Z,2007-05-31T02:07:19.46Z,"Please review and verify if I saved the configuration the way you liked it, Joakim. :)"
MRM-358,joakime,Joakim Erdfelt,2007-06-19T13:47:43.354Z,2007-06-19T13:47:43.354Z,Patch applied in trunk.
MRM-351,brettporter,Brett Porter,2007-05-23T06:11:41.139Z,2007-05-23T06:11:41.139Z,"you can type in the md5, so maybe we should just put a conditional around it that is configurable, and disable it by default (the function makes more sense on a central repository mirror than it does in a corporate repository anyway)."
MRM-351,jmcconnell,Jesse McConnell,2007-05-24T10:49:22.723Z,2007-05-24T10:49:22.723Z,"  <webapp>
    <ui>
      <showFindArtifacts>false</showFindArtifacts>
    </ui>
  </webapp>

added the relevant configuration bits to the model and enabled things so that you can perform things like 

      <ww:if test=""${sessionScope.uiOptions.showFindArtifacts}"">	  
        <li class=""none"">
          <my:currentWWUrl action=""findArtifact"" namespace=""/"">Find Artifact</my:currentWWUrl>
        </li>
      </ww:if>

in the jsp's to enable and disable functionalities.

adding new configuration options is a matter of adding them to the model and then they will be available on the uiOptions in the session in the jsp's.

this is also not defaulting to false atm so the link does not render by default anymore."
MRM-351,wsmoak,Wendy Smoak,2007-05-24T10:51:05.245Z,2007-05-24T10:51:05.245Z,"
I think the applet should be enabled by default-- it's very useful even for an internal repository.  In a large organization there may be internal component jars that have been passed around and renamed.  Pointing Archiva at a mystery jar can determine whether it's already in the repo under a different name.

As long as the applet is easy to disable in configuration after installing, I'd leave it on by default.

"
MRM-351,jmcconnell,Jesse McConnell,2007-05-24T11:28:55.496Z,2007-05-24T11:28:55.496Z,"added another option for you wendy

<webapp>
  <ui>
    <showFindArtifacts>true</showFindArtifacts>
    <appletFindEnabled>true</appletFindEnabled>
  </ui>
</webapp>

also switched the defaults to true
"
MRM-354,joakime,Joakim Erdfelt,2007-05-25T07:24:16.96Z,2007-05-25T07:24:16.96Z,This jira is related to MRM-329
MRM-354,brettporter,Brett Porter,2007-08-28T01:51:59.074Z,2007-08-28T01:51:59.074Z,"should we just remove this tab for now? To my knowledge, the feature never actually existed in a release. "
MRM-354,oching,Maria Odea Ching,2007-08-29T04:46:03.821Z,2007-08-29T04:46:03.821Z,"I think this tab is currently commented out in trunk, so it doesn't show in Archiva. Joakim mentioned switching from Jasperreports to Datavasion, which still needs to be discussed.. so this issue is currently on hold."
MRM-354,brettporter,Brett Porter,2007-08-29T04:50:39.614Z,2007-08-29T04:50:39.614Z,makes sense... dropping to post-1.0 :)
MRM-319,hisidro,Henry S. Isidro,2007-04-20T03:15:39.31Z,2007-04-20T03:15:39.31Z,FIle Attached: MRM-319-archiva-webapp-test.patch
MRM-319,oching,Maria Odea Ching,2007-04-20T22:51:34.166Z,2007-04-20T22:51:34.166Z,"Patch applied -r530978, thanks!"
MRM-342,fabemn,Fabrice Bellingard,2007-05-15T07:28:26.208Z,2007-05-15T07:28:26.208Z,"Ooops, I've just seen that Arnaud had already reported this bug (MRM-306)"
MRM-370,joakime,Joakim Erdfelt,2007-05-26T13:17:39.19Z,2007-05-26T13:17:39.19Z,"We'll have to beef up the MatadataTransferTest to include this scenario.

See the .testGetReleaseMetadataNotExpired() and .testGetReleaseMetadataExpired() methods."
MRM-370,jens.muehlenhoff,Jens Mhlenhoff,2007-06-08T02:42:59.8Z,2007-06-08T02:42:59.8Z,"I have the same problem. I get the NPE every time maven want to access the repository without a version in the path. I don't know if the following is the solution.

In the class DefaultBidirectionalRepositoryLayout the method 

public String toPath( VersionedReference reference )
{
        StringBuffer path = new StringBuffer();
        path.append( formatAsDirectory( reference.getGroupId() ) ).append( PATH_SEPARATOR );
        path.append( reference.getArtifactId() ).append( PATH_SEPARATOR );
        path.append( VersionUtil.getBaseVersion( reference.getVersion() ) ).append( PATH_SEPARATOR );
        path.append( MAVEN_METADATA );
        return path.toString();
}

maybe causes the error. It always happens, if there are no version infos. So do not add version info if they are missing.
I add the following if section and for me every thing works fine.

        if( reference.getVersion() != null ) {
            path.append( VersionUtil.getBaseVersion( reference.getVersion() ) ).append( PATH_SEPARATOR );
        }
"
MRM-370,fabemn,Fabrice Bellingard,2007-06-08T02:52:00.737Z,2007-06-08T02:52:00.737Z,"Jens, can you create a patch and attach it to this issue? I'll test it.
Thanks."
MRM-370,jens.muehlenhoff,Jens Mhlenhoff,2007-06-08T16:39:37.349Z,2007-06-08T16:39:37.349Z,patch created for project archiva-repository-layer
MRM-370,fabemn,Fabrice Bellingard,2007-06-15T04:34:52.446Z,2007-06-15T04:34:52.446Z,"Patch applied.
Thanks Jens."
MRM-338,aheritier,Arnaud HERITIER,2007-05-13T18:00:10.101Z,2007-05-13T18:00:10.101Z,All versions of dependencies are now set in the parent pom
MRM-325,oching,Maria Odea Ching,2007-05-02T21:53:34.172Z,2007-05-02T21:53:34.172Z,"Committed in -r534696, although 2 of the tests were currently commented out because of http://jira.codehaus.org/browse/MRM-323.
Also, there are still revisions coming up because of the changes during the branch and trunk merge."
MRM-325,brettporter,Brett Porter,2007-07-31T08:26:12.742Z,2007-07-31T08:26:12.742Z,"Deng, can we close this one now?"
MRM-325,oching,Maria Odea Ching,2010-02-23T02:01:58.318Z,2010-02-23T02:01:58.318Z,I think we can close this already.
MRM-372,wsmoak,Wendy Smoak,2007-05-29T21:58:21.545Z,2007-05-29T21:58:21.545Z,Fixed in r542732
MRM-348,joakime,Joakim Erdfelt,2007-05-22T11:00:59.503Z,2007-05-22T11:00:59.503Z,Work performed in trunk.
MRM-381,joakime,Joakim Erdfelt,2007-05-30T21:19:55.832Z,2007-05-30T21:19:55.832Z,Increasing to Blocker.
MRM-381,tcue,Teodoro Cue Jr.,2007-05-31T02:47:11.515Z,2007-05-31T02:47:11.515Z,Patch attached. The patch addresses the issue that the checksum is not pass from the JSP to the action. The final fix on this is dependent on MRM-376.
MRM-381,oching,Maria Odea Ching,2007-05-31T05:45:30.153Z,2007-05-31T05:45:30.153Z,Applied submitted patch. Fixed in -r543109
MRM-343,joakime,Joakim Erdfelt,2007-05-22T13:50:40.22Z,2007-05-22T13:50:40.22Z,"Cannot reproduce.

Likely the recent spate of changes around admin, plexus, jpox, and redback all contributed in one way or the other to fixing this situation."
MRM-315,nramirez,Nap Ramirez,2007-04-19T03:22:07.585Z,2007-04-19T03:22:07.585Z,The patch includes the fix to the HTTP 500 encountered on selenium tests.  It also includes a trivial fix to AbstractArchivaTestCase--it creates archiva-webapp-testtarget/ a directory over the archiva-webapp-test/.
MRM-315,oching,Maria Odea Ching,2007-04-19T04:02:27.002Z,2007-04-19T04:02:27.002Z,Applied patch -r530340 :)
MRM-337,wsmoak,Wendy Smoak,2007-05-12T00:21:27.248Z,2007-05-12T00:21:27.248Z,"Configured the remote resources plugin to include license/notice in jars.

Still need to get the files into the plexus runtime .tar.gz distribution."
MRM-337,wsmoak,Wendy Smoak,2007-05-12T19:57:07.105Z,2007-05-12T19:57:07.105Z,Fixed on trunk and archiva-0.9 branch
MRM-383,mathiasarens,Mathias Arens,2007-06-22T03:03:12.223Z,2007-06-22T03:03:12.223Z,I have the same problem.
MRM-383,oching,Maria Odea Ching,2007-08-20T04:23:44.997Z,2007-08-20T04:23:44.997Z,"Fixed in -r567614

- Updated javascript function and <c:forEach> loop for different file types in repositoryScanning.jsp"
MRM-305,jtolentino,Ernesto S. Tolentino Jr.,2007-03-19T22:16:09.17Z,2007-03-19T22:16:09.17Z,A duplicate of MRM-216.
MRM-312,ndeloof,nicolas de loof,2007-04-05T02:03:24.506Z,2007-04-05T02:03:24.506Z,"Also upgrading to 2.0 makes some testcase fail due to the connect() method beeing deprecated and throwing
""IllegalStateException: Cannot open a connection to a null wagon repository.""


"
MRM-312,brettporter,Brett Porter,2007-10-20T21:35:53.315Z,2007-10-20T21:35:53.315Z,nicolas - is this still a problem? I have reverted the wagon trunk to 1.0-SNAPSHOT and we can probably get a release of that out if it is needed here.
MRM-312,jameswdumay,James William Dumay,2008-04-26T01:41:36.459Z,2008-04-26T01:41:36.459Z,Is this still an issue or could we close this?
MRM-312,ndeloof,nicolas de loof,2008-04-26T14:26:41.578Z,2008-04-26T14:26:41.578Z,Not reproduced on latest SNAPSHOST
MRM-317,nramirez,Nap Ramirez,2007-04-19T15:42:18.048Z,2007-04-19T15:42:18.048Z,The patch contains the tests for Archiva webapp's browse functionality.  It requires a test repository and an index in the attached MRM-317-archiva-webapp-test.tar.gz.
MRM-317,nramirez,Nap Ramirez,2007-04-19T15:44:06.084Z,2007-04-19T15:44:06.084Z,MRM-317-archiva-webapp-test.tar.gz contains a test repository and an index for testing the 'browse' functionality of Archiva webapp.  To be used in conjunction with MRM-317-archiva-webapp-test.patch
MRM-317,nramirez,Nap Ramirez,2007-04-20T20:13:16.307Z,2007-04-20T20:13:16.307Z,"This patch contains tweaks to the pom.xml, updating the ant task that copies test resources to the appropriate locations. The AbstractArchivaTestCase is also updated of the resources' names."
MRM-317,oching,Maria Odea Ching,2007-04-20T22:29:10.845Z,2007-04-20T22:29:10.845Z,"Patch applied -r530975, thanks :)
"
MRM-321,nramirez,Nap Ramirez,2007-04-20T22:58:19.483Z,2007-04-20T22:58:19.483Z,"Attached a patch for testing the configuration of managed repositories.

On toggling the Show POM snippet: The POM snippet cannot be verified not to be present using the assertTextNotPresent() method as the POM snippet is always present, just hidden."
MRM-321,oching,Maria Odea Ching,2007-04-20T23:48:34.372Z,2007-04-20T23:48:34.372Z,"Patch applied -r530982, thanks!"
MRM-371,fabemn,Fabrice Bellingard,2007-06-06T04:03:18.481Z,2007-06-06T04:03:18.481Z,"Adding a remote repository now works.

But IMHO, from a UI perspective, it is not obvious that the ""Add repository"" link is intended to add both managed and remote repositories, for it is located on the same line as ""Managed repositories"" label..."
MRM-371,kerstin.klein,Kerstin Klein,2007-06-19T06:46:59.12Z,2007-06-19T06:46:59.12Z,"hi guys,

in result of MRM-239 I've decided to migrate to the 1.0-alpha, now I get this problem, too. is there any hint how to edit manually or an useful workarround for this issue?"
MRM-371,fabemn,Fabrice Bellingard,2007-06-19T07:12:08.846Z,2007-06-19T07:12:08.846Z,"Kerstin,
which alpha are you using? This bug was fixed on trunk, and will be available only in next release (1.0-alpha-2).
If you're using alpha-1, then I suggest you build Archiva from trunk so that you can test this."
MRM-371,wsmoak,Wendy Smoak,2007-06-19T08:49:51.781Z,2007-06-19T08:49:51.781Z,"Kerstin, you can pre-configure the repositories in the archiva.xml file."
MRM-371,kerstin.klein,Kerstin Klein,2007-06-19T10:32:49.068Z,2007-06-19T10:32:49.068Z,"Hi, I configured an archiva.xml file in ${archiva.home}/conf, it doesn't work at all. 

i put this configuration on it , but there was no possibility to select the named repository in the archiva gui.

{code:xml}
<configuration>
  <version>1</version>
  <repositories>
    <repository>
      <id>codehaus.org</id>
      <name>codehaus.org</name>
      <url>http://snapshots.maven.codehaus.org/maven2</url>
      <layout>default</layout>
      <releases>true</releases>
      <snapshots>true</snapshots>
      <indexed>false</indexed>
    </repository>
  </repositories>
</configuration>
{code}

where is my mistake?

Thanks,
Kerstin Klein"
MRM-371,fabemn,Fabrice Bellingard,2007-06-20T04:16:15.231Z,2007-06-20T04:16:15.231Z,"Hi Kerstin,

Wendy was talking about the ""archiva.xml"" file that is in the "".m2"" folder located in your user home directory. For instance, if you're running Archiva on Windows, this will be in ""C:\Documents and Settings\userId\.m2"". A default archiva.xml file is created on the very first start up of Archiva. You can edit it manually and restart Archiva."
MRM-332,nramirez,Nap Ramirez,2007-05-08T08:24:20.716Z,2007-05-08T08:24:20.716Z,Nothing shows up in the logs either.
MRM-332,joakime,Joakim Erdfelt,2007-05-11T13:07:08.584Z,2007-05-11T13:07:08.584Z,Fixed in trunk.
MRM-313,joakime,Joakim Erdfelt,2007-10-22T19:24:10.98Z,2007-10-22T19:24:10.98Z,"Fixed in archiva/trunk as a result of work done in MRM-557, MRM-562, MRM-563"
MRM-388,brettporter,Brett Porter,2007-05-29T23:02:21.855Z,2007-05-29T23:02:21.855Z,"WORKAROUND: stop appserver and restart. The default archiva.xml that was created will be loaded and used.

(Note: if we are going to have a default configuration then there is no need to redirect to the configuration pages on first startup)."
MRM-388,joakime,Joakim Erdfelt,2007-06-17T19:54:30.178Z,2007-06-17T19:54:30.178Z,Fixed in trunk
MRM-360,jmcconnell,Jesse McConnell,2007-05-25T08:47:36.934Z,2007-05-25T08:47:36.934Z,"sync cron -> 0 0 * * * * ?
repo scan -> 0 0 * * * * ?
db scanning -> 0 0 0/2 * * ?

cron format as specified here: 

http://www.opensymphony.com/quartz/wikidocs/CronTriggers%20Tutorial.html"
MRM-336,joakime,Joakim Erdfelt,2007-05-16T09:59:58.023Z,2007-05-16T09:59:58.023Z,Fixed in trunk.
MRM-355,dangelito,Dawn Angelito,2007-05-24T02:03:16.469Z,2007-05-24T02:03:16.469Z,A mistake. Just checked the code and list really shouldn't be sortable by Tasks because this column only shows the delete icon.
MRM-359,brettporter,Brett Porter,2011-09-12T09:05:18.717Z,2011-09-12T09:05:18.717Z,wraps in 1.3.5
MRM-303,rcoffin,Rod Coffin,2007-03-15T13:52:46.196Z,2007-03-15T13:52:46.196Z,I am having the exact same issue after updating Archiva from trunk.  I have tried this on several machines including two MacOS laptops and a CentOS server.
MRM-300,joakime,Joakim Erdfelt,2007-03-07T14:10:12.715Z,2007-03-07T14:10:12.715Z,More accurate to say that the proxied repository is never removed from the on-disk archiva.xml
MRM-307,aheritier,Arnaud HERITIER,2007-03-20T19:31:23.506Z,2007-03-20T19:31:23.506Z,"I just replaced them by this syntax :
  <link rel=""stylesheet"" href=""<c:url value=""/css/maven-base.css""/>"" type=""text/css"" media=""all""/>
  <link rel=""stylesheet"" href=""<c:url value=""/css/maven-theme.css""/>"" type=""text/css"" media=""all""/>
  <link rel=""stylesheet"" href=""<c:url value=""/css/pss/table.css""/>"" type=""text/css"" media=""all""/>
  <link rel=""stylesheet"" href=""<c:url value=""/css/site.css""/>"" type=""text/css"" media=""all""/>
"
MRM-341,fabemn,Fabrice Bellingard,2007-05-16T09:03:54.401Z,2007-05-16T09:03:54.401Z,Patch applied
MRM-378,pdodds,Philip Dodds,2007-05-29T03:40:56.503Z,2007-05-29T03:40:56.503Z,Attached is a patch that puts the mailing lists and the dependency list back in place - however the dependency tree and used by tabs still require code.
MRM-378,oching,Maria Odea Ching,2007-05-29T05:20:59.095Z,2007-05-29T05:20:59.095Z,"Patch applied -r542475. 

I'll just work on the missing dependency tree, then after that the used by tab. Thanks!"
MRM-378,joakime,Joakim Erdfelt,2007-05-29T21:07:41.262Z,2007-05-29T21:07:41.262Z,"I'm working on this.
I have a problem in the jpox/jdo queries to finish off to bring the ""used by"" and ""dependency tree"" tabs become live with information again.

"
MRM-378,joakime,Joakim Erdfelt,2007-06-01T10:25:43.273Z,2007-06-01T10:25:43.273Z,"Closing as fixed.
Related work on DependencyTree has been postponed to 1.0-alpha-2 on MRM-410."
MRM-396,joakime,Joakim Erdfelt,2007-06-18T20:26:18.654Z,2007-06-18T20:26:18.654Z,"I disagree that the visual is sufficient.

An Icon alone, is rarely sufficient for informational details in a web app. 
Take JIRA itself as an example.  Look in the top left ""Issue Details"" for this jira ticket.

It doesn't say ....
Type: [ICON]
Status: [ICON]
Priority: [ICON]

It says.
Type: [ICON] Bug
Status: [ICON] Open
Priority: [ICON] Trivial

That is a good example of informational icons.
Now the Icons in the top right of this jira (Print / Help) are action icons / buttons, those are handled differently, and are tasks, not information.

Comments?"
MRM-396,brettporter,Brett Porter,2007-06-18T20:33:36.456Z,2007-06-18T20:33:36.456Z,"it's yes/no, that's quite different. The skype icon in my status bar that says it's online doesn't say so next to it, I know what a green tick is :)

I'd at least change the text to yes/no instead of true/false."
MRM-363,jmcconnell,Jesse McConnell,2007-05-24T16:16:42.292Z,2007-05-24T16:16:42.292Z,added them back
MRM-398,joakime,Joakim Erdfelt,2007-06-18T20:50:11.105Z,2007-06-18T20:50:11.105Z,"As well as making 'new' repositories be added to the Guest User ... 

I want to do this one step better.

Have on the admin / repositories page a ""Secured Repository"" vs ""Open Repository"" option (and Icon) that really just enables / disables the roles on the Guest User.

What do you think?"
MRM-398,jmcconnell,Jesse McConnell,2007-06-18T22:26:43.901Z,2007-06-18T22:26:43.901Z,"like it, and pretty easy to do using the new RoleManager object and API"
MRM-398,brettporter,Brett Porter,2007-06-18T23:02:45.794Z,2007-06-18T23:02:45.794Z,"I would suggest the best way to do this is to allow assignment of roles as a step in repository creation rather than introducing a new flag that is tied to a role.

But that's a completely different feature. This issue is *only* to configure guest access by default for pre-configured repositories."
MRM-398,joakime,Joakim Erdfelt,2007-10-12T16:44:52.612Z,2007-10-12T16:44:52.612Z,"Fixed in archiva/trunk revision 
Newly created repositories are setup to be automatically assigned to the guest user in read-only mode.

There are no provisions in redback to assign roles on first startup only.
Using redback ALONE to automatically assign the read-only role to the shipped repositories is not possible.

Closing issue.

We can't hard-code the repository ids either, as corporate installations of archiva will often pre-configure their archiva.xml before starting the first time.

Created a new jira MRM-539 for alternative approach that was poo-poo'd in an earlier comment by brett in this jira.
"
MRM-398,wsmoak,Wendy Smoak,2007-10-12T16:56:22.487Z,2007-10-12T16:56:22.487Z,"The solution as described does not match the summary on this issue, so I don't think it should be closed as ""fixed"".

I don't like defaulting newly _created_ repositories to be visible to the guest user.  That doesn't happen in Continuum-- newly added groups are not visible unless you grant roles.

As I understand the request, it was to be able to pre-configure guest access to some known repositories.  Brett?

"
MRM-398,wsmoak,Wendy Smoak,2007-10-12T18:52:23.808Z,2007-10-12T18:52:23.808Z,Reopening for discussion.
MRM-398,joakime,Joakim Erdfelt,2007-10-15T15:40:56.551Z,2007-10-15T15:40:56.551Z,"Partial revert of previous solution. (The part that sets all new repositories to have guest access read-only)
Different solution commit'd to archiva/trunk revision 584906."
MRM-398,brettporter,Brett Porter,2007-10-17T03:22:29.667Z,2007-10-17T03:22:29.667Z,"I found that this isn't working on a clean installation + database:

jvm 1    | 2007-10-17 18:21:39,076 [WrapperSimpleAppMain] WARN  org.apache.maven.archiva.web.startup.SecuritySynchronization:default  - Unable to add role [Repository Observer - snapshots] to Guest user.
jvm 1    | org.codehaus.plexus.redback.rbac.RbacObjectNotFoundException: Unable to find RBAC Object 'Guest' of type org.codehaus.plexus.redback.rbac.jdo.JdoUserAssignment using fetch-group 'null'
jvm 1    |      at org.codehaus.plexus.redback.rbac.jdo.JdoTool.getObjectById(JdoTool.java:316)

...

jvm 1    | Caused by: javax.jdo.JDOObjectNotFoundException: No such database row
jvm 1    | FailedObject:Guest
jvm 1    |      at org.jpox.store.rdbms.request.FetchRequest.execute(FetchRequest.java:194)
"
MRM-398,joakime,Joakim Erdfelt,2007-10-19T16:46:42.538Z,2007-10-19T16:46:42.538Z,"Fixed in trunk revision 586622.
Tested with pristine environment."
MRM-344,joakime,Joakim Erdfelt,2007-05-25T14:09:19.414Z,2007-05-25T14:09:19.414Z,Fixed in archiva trunk.
MRM-356,dangelito,Dawn Angelito,2007-05-24T02:38:54.139Z,2007-05-24T02:38:54.139Z,"Just checked the code and noticed that both Password and Confirm Password fields are required. However, when creating/editing a user, a blank password is allowed. I hope someone can comment on this."
MRM-356,joakime,Joakim Erdfelt,2007-06-18T20:15:46.777Z,2007-06-18T20:15:46.777Z,"I cannot reproduce this with blank passwords.
If I provide blank passwords I get a warnings.
Either that the passwords cannot contain whitespace.
or that the passwords must be in a character length of 1 to 8.

This can probably be closed as Unable to Reproduce."
MRM-356,oching,Maria Odea Ching,2007-07-31T04:22:44.908Z,2007-07-31T04:22:44.908Z,"I also got the validation messages when I left out the password and confirm password fields blank during Create Admin user.
However, there were no validation for these fields when I left them blank in User Management --> Create New User page.

I'll close this issue and create a new one for the missing validations (since the password is a required field)."
MRM-369,joakime,Joakim Erdfelt,2007-06-13T09:29:44.51Z,2007-06-13T09:29:44.51Z,"Bumping up priority.

Excessive logging can result in *HUGE* log files (2GB+)."
MRM-369,joakime,Joakim Erdfelt,2007-06-13T09:32:13.966Z,2007-06-13T09:32:13.966Z,"This jira is the same one that causes the following stack trace ...

{code}
ERROR 23505: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'ARCHIVA_ARTIFV6_PK' defined on 'ARCHIVA_ARTIFACT'.
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
	at org.apache.derby.impl.sql.execute.IndexChanger.insertAndCheckDups(Unknown Source)
	at org.apache.derby.impl.sql.execute.IndexChanger.doInsert(Unknown Source)
	at org.apache.derby.impl.sql.execute.IndexChanger.insert(Unknown Source)
	at org.apache.derby.impl.sql.execute.IndexSetChanger.insert(Unknown Source)
	at org.apache.derby.impl.sql.execute.RowChangerImpl.insertRow(Unknown Source)
	at org.apache.derby.impl.sql.execute.InsertResultSet.normalInsertCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.InsertResultSet.open(Unknown Source)
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(Unknown Source)
	at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:101)
	at org.jpox.store.rdbms.RDBMSManager.executeStatementUpdate(RDBMSManager.java:572)
	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:328)
	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
	at org.jpox.store.StoreManager.insert(StoreManager.java:920)
	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1198)
	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1261)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:192)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:165)
	at org.apache.maven.archiva.database.jdo.JdoArtifactDAO.saveArtifact(JdoArtifactDAO.java:110)
	at org.apache.maven.archiva.consumers.database.ArtifactUpdateDatabaseConsumer.processFile(ArtifactUpdateDatabaseConsumer.java:195)
	at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:57)
	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:127)
	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:173)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:391)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:344)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:126)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:65)
	at org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:105)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)
	at java.lang.Thread.run(Thread.java:595)

{code}"
MRM-369,joakime,Joakim Erdfelt,2007-06-17T16:45:50.282Z,2007-06-17T16:45:50.282Z,Fixed in trunk
MRM-335,joakime,Joakim Erdfelt,2007-05-16T11:23:45.968Z,2007-05-16T11:23:45.968Z,Fixed as part of MRM-336
MRM-309,joakime,Joakim Erdfelt,2007-10-02T13:59:51.364Z,2007-10-02T13:59:51.364Z,"Duplicate: Fixed by MRM-153, commited by oching on revision 576032 (Sept 15, 2007)"
MRM-399,fabemn,Fabrice Bellingard,2007-06-21T09:11:10.973Z,2007-06-21T09:11:10.973Z,"Brett, I cannot reproduce the bug. 
The only difference with what you described is that I have to specify a network proxy to be able to download maven-core from the Web... Which, IMHO, does not make a big difference with your configuration. Actually, I tested proxying an internal corporate Maven 2 repo (i.e. without a network proxy), and it works perfectly."
MRM-399,wsmoak,Wendy Smoak,2007-06-24T20:19:26.628Z,2007-06-24T20:19:26.628Z,"A request for http://localhost:8080/archiva/repository/internal/org/apache/maven/maven-core/2.0.6/maven-core-2.0.6.jar works fine for me in1.0-alpha-2.  

INFO   | jvm 1    | 2007/06/24 18:15:36 | [INFO] The appserver server has been initialized.
INFO   | jvm 1    | 2007/06/24 18:15:36 | [INFO] The appserver server has started.
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Attempting connector: ProxyConnector[
INFO   | jvm 1    | 2007/06/24 18:15:57 |   source:ArchivaRepository[internal,file://${appserver.home}/repositories/internal]
INFO   | jvm 1    | 2007/06/24 18:15:57 |   target:ArchivaRepository[maven2-repository.dev.java.net,http://download.java.net/maven/2/]
INFO   | jvm 1    | 2007/06/24 18:15:57 |   proxyId:
INFO   | jvm 1    | 2007/06/24 18:15:57 |   policy[releases]:once
INFO   | jvm 1    | 2007/06/24 18:15:57 |   policy[checksum]:fix
INFO   | jvm 1    | 2007/06/24 18:15:57 |   policy[snapshots]:disabled
INFO   | jvm 1    | 2007/06/24 18:15:57 |   policy[cache-failures]:cache
INFO   | jvm 1    | 2007/06/24 18:15:57 | ]
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Using target repository: maven2-repository.dev.java.net - layout: default - targetPath: org/apache/maven/maven-core/2.0.6/maven-core-2.0.6.jar
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [releases] policy with [once]
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:releases  - OK to update releases, local file does not exist.
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [snapshots] policy with [disabled]
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:snapshots  - OK to update, snapshot policy does not apply for non-snapshot versions.
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [cache-failures] policy with [cache]
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] ERROR org.apache.maven.archiva.policies.PreDownloadPolicy:cache-failures  - Unknown checksum policyCode [cache]
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Didn't pass the [cache-failures] policy.
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] INFO  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Failed pre-download policies - C:\${appserver.home}\repositories\internal\org\apache\maven\maven-core\2.0.6\maven-core-2.0.6.jar
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Attempting connector: ProxyConnector[
INFO   | jvm 1    | 2007/06/24 18:15:57 |   source:ArchivaRepository[internal,file://${appserver.home}/repositories/internal]
INFO   | jvm 1    | 2007/06/24 18:15:57 |   target:ArchivaRepository[central,http://repo1.maven.org/maven2]
INFO   | jvm 1    | 2007/06/24 18:15:57 |   proxyId:null
INFO   | jvm 1    | 2007/06/24 18:15:57 |   policy[releases]:once
INFO   | jvm 1    | 2007/06/24 18:15:57 |   policy[checksum]:fix
INFO   | jvm 1    | 2007/06/24 18:15:57 |   policy[snapshots]:disabled
INFO   | jvm 1    | 2007/06/24 18:15:57 |   policy[cache-failures]:cached
INFO   | jvm 1    | 2007/06/24 18:15:57 | ]
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Using target repository: central - layout: default - targetPath: org/apache/maven/maven-core/2.0.6/maven-core-2.0.6.jar
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [releases] policy with [once]
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:releases  - OK to update releases, local file does not exist.
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [snapshots] policy with [disabled]
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:snapshots  - OK to update, snapshot policy does not apply for non-snapshot versions.
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [cache-failures] policy with [cached]
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:56,984 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:cache-failures  - OK to fetch, check-failures detected no issues.
INFO   | jvm 1    | 2007/06/24 18:15:57 | 2007-06-24 18:15:57,000 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Retrieving org/apache/maven/maven-core/2.0.6/maven-core-2.0.6.jar from Central Repository if updated
INFO   | jvm 1    | 2007/06/24 18:15:58 | 2007-06-24 18:15:58,515 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Downloaded successfully.
INFO   | jvm 1    | 2007/06/24 18:15:58 | 2007-06-24 18:15:58,515 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Retrieving org/apache/maven/maven-core/2.0.6/maven-core-2.0.6.jar.sha1 from Central Repository if updated
INFO   | jvm 1    | 2007/06/24 18:15:58 | 2007-06-24 18:15:58,656 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Downloaded successfully.
INFO   | jvm 1    | 2007/06/24 18:15:58 | 2007-06-24 18:15:58,656 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Checksum.sha1 Downloaded: C:\${appserver.home}\repositories\internal\org\apache\maven\maven-core\2.0.6\maven-core-2.0.6.jar.sha1
INFO   | jvm 1    | 2007/06/24 18:15:58 | 2007-06-24 18:15:58,656 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Retrieving org/apache/maven/maven-core/2.0.6/maven-core-2.0.6.jar.md5 from Central Repository if updated
INFO   | jvm 1    | 2007/06/24 18:15:58 | 2007-06-24 18:15:58,796 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Downloaded successfully.
INFO   | jvm 1    | 2007/06/24 18:15:58 | 2007-06-24 18:15:58,796 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Checksum.md5 Downloaded: C:\${appserver.home}\repositories\internal\org\apache\maven\maven-core\2.0.6\maven-core-2.0.6.jar.md5
INFO   | jvm 1    | 2007/06/24 18:15:58 | 2007-06-24 18:15:58,796 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [checksum] policy with [fix]
INFO   | jvm 1    | 2007/06/24 18:15:58 | 2007-06-24 18:15:58,828 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PostDownloadPolicy:checksum  - Valid checksum: C:\${appserver.home}\repositories\internal\org\apache\maven\maven-core\2.0.6\maven-core-2.0.6.jar.sha1
INFO   | jvm 1    | 2007/06/24 18:15:58 | 2007-06-24 18:15:58,843 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PostDownloadPolicy:checksum  - Valid checksum: C:\${appserver.home}\repositories\internal\org\apache\maven\maven-core\2.0.6\maven-core-2.0.6.jar.md5
INFO   | jvm 1    | 2007/06/24 18:15:58 | 2007-06-24 18:15:58,843 [SocketListener0-1] INFO  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Successfully transfered: C:\${appserver.home}\repositories\internal\org\apache\maven\maven-core\2.0.6\maven-core-2.0.6.jar"
MRM-311,joakime,Joakim Erdfelt,2007-06-17T19:49:45.416Z,2007-06-17T19:49:45.416Z,Fixed in trunk
MRM-320,joakime,Joakim Erdfelt,2007-05-25T14:14:52.932Z,2007-05-25T14:14:52.932Z,"Proxy Request Handler and /proxy/ no longer exist in trunk.
Closing as won't fix."
MRM-320,ndeloof,nicolas de loof,2007-08-07T10:33:56.898Z,2007-08-07T10:33:56.898Z,"When I ask for a snapshot that is allready present in the managed repo, the proxied repository are not fetched as the ""hasRessource"" return true...

The ProxiedDavServer  still exist in codebase and handle all webdav access. Maybe the ""proxied"" prefix is not a good choice as it is not really related to proxies.

"
MRM-320,joakime,Joakim Erdfelt,2007-09-21T18:16:21.725Z,2007-09-21T18:16:21.725Z,The fix for MRM-153 fixed this bug in subversion.
MRM-306,fabemn,Fabrice Bellingard,2007-05-15T07:30:47.038Z,2007-05-15T07:30:47.038Z,I had put a patch in the duplicate issue MRM-342.
MRM-306,fabemn,Fabrice Bellingard,2007-05-15T07:48:42.716Z,2007-05-15T07:48:42.716Z,Patch applied.
MRM-310,nramirez,Nap Ramirez,2007-03-30T01:16:31.088Z,2007-03-30T01:16:31.088Z,"This patch fixes the archiva-webapp loading problems as described in http://docs.codehaus.org/display/MAVENUSER/Archiva+on+Tomcat .

src/test/tomcat5x/conf/Catalina/localhost/archiva.xml
  - added the resources needed by archiva-webapp
pom.xml
  - upgraded the dependency from the codehaus version into the apache version
  - changed the ant task that copies archiva-webapp's provided dependencies into the container's common/lib into a dependency mojo that copies them to the container's common/lib, because the ant task copies from archiva-webapp/WEB-INF/lib and provided dependencies are not included that directory"
MRM-310,nramirez,Nap Ramirez,2007-04-17T02:55:52.321Z,2007-04-17T02:55:52.321Z,"Here's another patch fixing the same issue, but something consistent with the one in continuum-webapp-test."
MRM-310,oching,Maria Odea Ching,2007-04-17T04:53:28.153Z,2007-04-17T04:53:28.153Z,Patch applied -r529546 :)
MRM-375,dangelito,Dawn Angelito,2007-05-28T00:35:38.183Z,2007-05-28T00:35:38.183Z,Restarting the app will bring the repository back to the list.
MRM-375,fabemn,Fabrice Bellingard,2007-06-06T04:05:17.95Z,2007-06-06T04:05:17.95Z,The bug comes from the same part of the code.
MRM-375,fabemn,Fabrice Bellingard,2007-06-06T04:06:59.485Z,2007-06-06T04:06:59.485Z,MRM-371 fixed this bug.
MRM-362,joakime,Joakim Erdfelt,2007-06-17T20:15:28.777Z,2007-06-17T20:15:28.777Z,Fixed in trunk
MRM-377,dangelito,Dawn Angelito,2007-05-28T06:30:28.486Z,2007-05-28T06:30:28.486Z,MRM-377-archiva-webapp.patch fixes this issue.
MRM-377,oching,Maria Odea Ching,2007-05-29T07:00:08.221Z,2007-05-29T07:00:08.221Z,Applied submitted patch -r542496. Thanks!
MRM-350,jmcconnell,Jesse McConnell,2007-05-22T08:26:39.169Z,2007-05-22T08:26:39.169Z,resolved in redback commit r6494
MRM-376,brettporter,Brett Porter,2007-05-30T04:07:37.523Z,2007-05-30T04:07:37.523Z,"more detail of the exception in mrm-401

Note that I don't have the same problem for ant 1.6, so it may not be a property of the metadata but a bug in entering it into the database."
MRM-376,oching,Maria Odea Ching,2007-05-31T04:41:18.57Z,2007-05-31T04:41:18.57Z,"Re: MRM-402 
I found out that the problem with the commons-dbcp-1.0 artifact was that its version in the pom is '1.0-dev', but when you browse that artifact from the results page.. the version that is queried is '1.0' thus the JDOObjectNotFoundException. Is this still an archiva problem? or is it with the pom.

Also, I found out that some artifacts that have parent projects are getting the same error JDOObjectNotFoundException because it wasn't added to the database due to a 'null' origin field. I think the problem is during the merging of the parent poms. Will comment more on this issue later on."
MRM-376,brettporter,Brett Porter,2007-05-31T05:03:01.084Z,2007-05-31T05:03:01.084Z,"I think it's still an Archiva problem, as it should have detected and rejected the invalid POM rather than putting it into the database (and recorded it as an error so that it could be cleaned up/fixed later)."
MRM-376,oching,Maria Odea Ching,2007-05-31T06:34:59.496Z,2007-05-31T06:34:59.496Z,"Fixed the problem when the artifact has a parent project -r543115. 

The main cause of the problem was a 'null' origin in the parent pom, thereby causing the JDO exception of not being able to save to object thus the JDOObjectNotFoundException when searching/browsing the artifact. 

I'll look into the other problem again, and fix it up. Thanks!"
MRM-376,oching,Maria Odea Ching,2007-05-31T21:35:16.809Z,2007-05-31T21:35:16.809Z,"I opened a separate jira for checking or detecting invalid poms, MRM-409."
MRM-376,oching,Maria Odea Ching,2007-06-14T05:50:02.606Z,2007-06-14T05:50:02.606Z,"Fixed in -r547209.

See comments in MRM-409. Thanks!

"
MRM-339,aheritier,Arnaud HERITIER,2007-05-13T18:41:58.98Z,2007-05-13T18:41:58.98Z,Same thing if I delete the database. All my repositories are created but I have no role in the users part.
MRM-339,aheritier,Arnaud HERITIER,2007-05-13T18:45:08.245Z,2007-05-13T18:45:08.245Z,"It can be related to this problem. I add the ""Global Observer"" role to guest but I can't access to my repositories."
MRM-339,jmcconnell,Jesse McConnell,2007-05-23T15:47:54.059Z,2007-05-23T15:47:54.059Z,added role creation to the configuration synchronization
MRM-339,jmcconnell,Jesse McConnell,2007-05-23T15:48:27.311Z,2007-05-23T15:48:27.311Z,"arnaud, your second comment was also fixed just now in MRM-349"
MRM-333,joakime,Joakim Erdfelt,2007-05-10T12:51:37.473Z,2007-05-10T12:51:37.473Z,"When reporting details, please include the following ....

# Java version? (specifics please, ""1.5"" is insufficient.  ""Java HotSpot(TM) Client VM (build 1.4.2_12-b03, mixed mode)"" is of much more use.)
# Are you running the JDK or JRE?
# What version of Tomcat?
# Where did you get your version of Tomcat? (downloaded from apache.org, installed from OS packaging tool, etc...)
# What kind of OS are you running? (versions and service pack details are helpful)
# Are you using the embedded Derby Database or an external Database?
#* If an external Database, then the name and version of the database is helpful.
#* JDBC specifics too, what JDBC driver are you using?  What version?
#* How do you have the JNDI Database connection configured? (yes, there are many ways to do this)
# Have you have tried the recommendations on http://docs.codehaus.org/display/MAVENUSER/Archiva+on+Tomcat ?  If not, why not?"
MRM-333,joakime,Joakim Erdfelt,2007-09-21T13:25:11.392Z,2007-09-21T13:25:11.392Z,"Completed testing and documentation on Jakarta Tomcat 5.0.28 on Linux using JDK 1.5.0_11.
Important notes about Jar file compatibility can be found at http://docs.codehaus.org/display/MAVENUSER/Archiva+on+Tomcat#ArchivaonTomcat-Tomcat5.0.xSpecifics
No problems left.

Finishing up documentation and tests on Tomcat 5.5.25 and Tomcat 6.0.14 next."
MRM-333,joakime,Joakim Erdfelt,2007-09-21T18:12:09.549Z,2007-09-21T18:12:09.549Z,"All open issues with Tomcat have been closed.
All fixes have been committed to archiva/trunk in svn.

The next archiva release (1.0-beta-3?) will contain these fixes."
MRM-331,joakime,Joakim Erdfelt,2007-05-25T13:34:18.953Z,2007-05-25T13:34:18.953Z,Fixed in trunk.
MRM-380,pdodds,Philip Dodds,2007-05-29T04:08:04.875Z,2007-05-29T04:08:04.875Z,The same applies for projects that inherit their version from the parent pom.
MRM-380,joakime,Joakim Erdfelt,2007-05-29T13:10:24.938Z,2007-05-29T13:10:24.938Z,Fixed in trunk.
MRM-385,fabemn,Fabrice Bellingard,2007-06-21T09:16:30.952Z,2007-06-21T09:16:30.952Z,"http://maven.apache.org/archiva/guides/maven-configuration.html seems OK.

For the ""Archiva as a Proxy"" page on the Wiki, it looks like it was written for Archiva 0.9, right?"
MRM-385,oching,Maria Odea Ching,2007-09-14T06:27:34.585Z,2007-09-14T06:27:34.585Z,"Fixed in -r575627.

Changes made in archiva-site:
- Added Archiva as a Proxy section in maven-configuration.apt
- Updated some lines in the Configuring Maven-2 to use an Archiva repository section 

Would anyone care to take a look at it? I might have missed something :)
Thanks!"
MRM-318,oching,Maria Odea Ching,2007-04-20T08:07:39.214Z,2007-04-20T08:07:39.214Z,Fixed in r530375
MRM-352,brettporter,Brett Porter,2007-05-29T23:21:27.603Z,2007-05-29T23:21:27.603Z,"this looks like the same problem I filed in MRM-388, but I don't receive this exception (no exception, just goes into infinite loop).

I expect a change has made this issue redundant, superceded by MRM-388"
MRM-352,joakime,Joakim Erdfelt,2007-06-17T19:27:17.46Z,2007-06-17T19:27:17.46Z,"The message for 'externalResult' is expected when redirecting from login to desired page.
This parameter/property should be filtered out in the Interceptor chain, but alas, it is not.

It causes no harm, other than filling up the logs quicker."
MRM-352,joakime,Joakim Erdfelt,2007-06-17T20:09:46.64Z,2007-06-17T20:09:46.64Z,"The admin add repository page does not show up anymore, as the repositories are defaulted now.

Something here will have to change.

Some ideas.

# The list of default repositories should not be created
# A default repository is bundled with archiva standalone.
#* maybe with just wagon-webdav (+ deps) in it.

What do you think?  (I like option #2)
"
MRM-352,brettporter,Brett Porter,2007-06-17T20:13:44.101Z,2007-06-17T20:13:44.101Z,"I like what we have now, where the default repository is created from scratch, automatically, outside the installation. So I'd say just remove the bit that fires up that page on startup."
MRM-352,joakime,Joakim Erdfelt,2007-06-17T20:14:50.932Z,2007-06-17T20:14:50.932Z,"The errors and whatnot have been fixed on trunk.
We should create a new jira about the 'add repository' process in light of the configuration upgrade phase."
MRM-352,fabemn,Fabrice Bellingard,2007-06-21T08:46:01.858Z,2007-06-21T08:46:01.858Z,"MRM-388 fixed this issue. I've tested it today, and I don't get the error anymore."
MRM-349,wsmoak,Wendy Smoak,2007-05-23T00:55:49.927Z,2007-05-23T00:55:49.927Z,"This is a blocking issue-- Archiva is prompting for credentials when guest has the global repository observer role.  

There is no way to access the repositories, even with the admin account (by default admin is a global repository manager.)

To reproduce:

Build and launch Archiva with the plexus runtime.  View the managed repository config and click one of the urls.  Try the admin userid and password.  It should work, but doesn't.

Now give Guest the global repository observer role, and try a repository url again.  It should not prompt for credentials, but it does.

"
MRM-349,jmcconnell,Jesse McConnell,2007-05-23T15:47:22.161Z,2007-05-23T15:47:22.161Z,"fixed, I had a typo in the permissions for repository observers"
MRM-347,wsmoak,Wendy Smoak,2007-05-18T10:47:59.297Z,2007-05-18T10:47:59.297Z,"I also have a c:/${appserver.home} directory created after starting Archiva.  

I'm not yet sure if it's coming from 'mvn jetty:run' or the plexus runtime."
MRM-347,joakime,Joakim Erdfelt,2007-05-21T16:05:30.983Z,2007-05-21T16:05:30.983Z,"Problem was an unexpanded expression in the AuditLog class.
(Need to move this to database in future)
Fixed (for now) in trunk."
MRM-347,wsmoak,Wendy Smoak,2007-05-26T02:13:08.856Z,2007-05-26T02:13:08.856Z,With r541808 (20070525) I still get C:\${appserver.home}\repositories created.
MRM-347,brettporter,Brett Porter,2007-08-03T02:02:40.023Z,2007-08-03T02:02:40.023Z,all good under jetty:run
MRM-373,brettporter,Brett Porter,2007-05-30T00:29:25.026Z,2007-05-30T00:29:25.026Z,I don't think we should even have the exaple proxy in there. It doesn't make much sense to me?
MRM-373,wsmoak,Wendy Smoak,2007-05-30T08:38:35.663Z,2007-05-30T08:38:35.663Z,"I agree with leaving it out.  People who are behind proxies will know they have to go looking for extra configuration.

(The network proxy does not appear to be in use by default, it's just there as an example.)"
MRM-373,fabemn,Fabrice Bellingard,2007-06-06T06:40:48.832Z,2007-06-06T06:40:48.832Z,"I can delete the example network proxy in the Web UI without any problem: it doesn't come back when I start Archiva for it is actually deleted from archiva.xml.

Can you still reproduce this bug? It may have been fixed meanwhile."
MRM-373,fabemn,Fabrice Bellingard,2007-06-21T09:41:10.579Z,2007-06-21T09:41:10.579Z,"I created MRM-418 to get a trace, in the changelog, of the removal of the default network proxy.

As for this issue, unless you tell me that you can reproduce the bug, I'll close it for alpha-2."
MRM-373,fabemn,Fabrice Bellingard,2007-08-01T07:07:49.641Z,2007-08-01T07:07:49.641Z,This issue is no longer valid. I close it.
MRM-387,brettporter,Brett Porter,2007-07-31T04:18:30.819Z,2007-07-31T04:18:30.819Z,seems to be ok now
MRM-330,joakime,Joakim Erdfelt,2007-05-25T12:12:29.578Z,2007-05-25T12:12:29.578Z,"Fixed in archiva trunk.
Functionality is now the same as what is present in archiva 0.9"
MRM-353,jmcconnell,Jesse McConnell,2007-05-23T17:53:31.401Z,2007-05-23T17:53:31.401Z,fixed check for 0 and skip the division if it is 0
MRM-327,joakime,Joakim Erdfelt,2007-05-10T18:13:50.118Z,2007-05-10T18:13:50.118Z,Changes commited in trunk.
MRM-327,joakime,Joakim Erdfelt,2007-05-10T18:44:31.888Z,2007-05-10T18:44:31.888Z,Reopening to correct assignee and fix-version.
MRM-327,jancajas,jancajas,2007-09-18T04:59:25.101Z,2007-09-18T04:59:25.101Z,the identifier can still accept empty string but it displays an error message if i inputted less than 4 chars.
MRM-323,aheritier,Arnaud HERITIER,2007-04-29T16:01:55.212Z,2007-04-29T16:01:55.212Z,same thing with tomcat 5.0 on windows 2003 server
MRM-323,aheritier,Arnaud HERITIER,2007-04-29T17:55:13.449Z,2007-04-29T17:55:13.449Z,Don't you think that it can be due to the contextPath that we have in tomcat and not in plexus ?? Otherwise I don't see !
MRM-323,joakime,Joakim Erdfelt,2007-04-30T17:24:57.431Z,2007-04-30T17:24:57.431Z,"I think I might have found a solution for this in the branch.

It seems that the RegistryListener isn't available or plumbed unless you have AT LEAST ONCE accessed the webdav url.

You can try this by changing the order of your test case.

(To duplicate)
# Start archiva
# Create a new repository
# Attempt to access the repository via webdav url
# Error occurs.

(To duplicate - alternate)
# Start archiva
# Edit an existing repository's Directory (or URL)
# Attempt to access this changed repository's webdav url.
# Error occurs.

(To get around bug)
# Start archiva.
# Attempt to access webdav url
# Error occurs.
# Goto admin screens and make changes to any existing repositories and/or add repositories.
# Attempt to access webdav urls on any of those changed repositories.
# Works!

How to fix (in your web.xml) ...

{code:xml}
<servlet>
  <servlet-name>RepositoryServlet</servlet-name>
  <servlet-class>org.apache.maven.archiva.web.repository.RepositoryServlet</servlet-class>
  <!-- Loading this on startup so as to take advantage of configuration listeners -->
  <load-on-startup>true</load-on-startup>
</servlet>
{code}

This fix is arriving in the branch shortly."
MRM-323,aheritier,Arnaud HERITIER,2007-05-01T07:34:09.808Z,2007-05-01T07:34:09.808Z,"ok, Joakim,

  Thanks for your investigation. I'll try it also on the trunk (or future branch).
  One remark, however, load-on-startup must be an integer >= 0."
MRM-323,oching,Maria Odea Ching,2007-05-08T21:46:25.083Z,2007-05-08T21:46:25.083Z,"Ok, thanks Joakim :)"
MRM-323,oching,Maria Odea Ching,2007-05-09T06:53:06.495Z,2007-05-09T06:53:06.495Z,"I still can't seem to make it work..

I did the workaround but I still can't access the webdav urls. The username and password I entered were not accepted (I already made sure that I have the necessary permissions), and the authorization window just keeps popping up. When I click the Cancel button in the authorization window, I get a 401 - Authorization Denied.

Could this be an issue with Tomcat's webdav and the OS maybe, or with the browser? 

It seems the workaround works on Windows?
"
MRM-323,aheritier,Arnaud HERITIER,2007-05-10T20:00:16.861Z,2007-05-10T20:00:16.861Z,"Same thing for me. The workaround doesn't work.
Tomcat 5.0.28 / Sun Java 1.4.2_08 -b03 / Windows Server 2003 SP1"
MRM-323,aheritier,Arnaud HERITIER,2007-05-11T00:57:41.817Z,2007-05-11T00:57:41.817Z,the archiva config
MRM-323,aheritier,Arnaud HERITIER,2007-05-11T00:58:49.631Z,2007-05-11T00:58:49.631Z,The tomcat context to deploy archiva
MRM-323,aheritier,Arnaud HERITIER,2007-05-11T01:07:05.373Z,2007-05-11T01:07:05.373Z,"Logs (tomcat, archiva) with archiva in debug"
MRM-323,oching,Maria Odea Ching,2007-05-11T01:52:04.394Z,2007-05-11T01:52:04.394Z,"Specifics: 
- Tomcat-5.5.20 (the one included in archiva-webapp-test) 
- Java(TM) SE Runtime Environment (build 1.6.0-b105), Java HotSpot(TM) Client VM (build 1.6.0-b105, mixed mode)
- Ubuntu Linux 6.10
- used embedded Derby database
- Tried this out http://docs.codehaus.org/display/MAVENUSER/Archiva+on+Tomcat, still doesn't work
"
MRM-323,aheritier,Arnaud HERITIER,2007-05-12T17:42:01.237Z,2007-05-12T17:42:01.237Z,"Reproduced with TC 5.5.20 on jdk 1.5 and Windows XP
I tried run archiva with jetty (mvn jetty:run).
I created a private repo, and everything is working fine.
I setup my tomcat to run the web app with the same database (derby).
I have the error. 
Thus it's not a problem with the DB. If I redeploy it on jetty, it works.
The workaround (edit a repo) doesn't work.
I found these logs :
1607015 [btpool0-5] DEBUG org.codehaus.plexus.security.authentication.Authenticator:user-manager  - Authenticate: PasswordBasedAuthenticationDataSource[principal=aheritier,password=***]
1607047 [btpool0-5] DEBUG org.codehaus.plexus.security.authentication.Authenticator:user-manager  - PasswordEncoder: org.codehaus.plexus.security.policy.encoders.SHA256PasswordEncoder
1607047 [btpool0-5] DEBUG org.codehaus.plexus.security.authentication.Authenticator:user-manager  - User aheritier provided a valid password
1607062 [btpool0-5] DEBUG org.codehaus.plexus.security.system.SecuritySystem:default  - authnManager.authenticate() result: AuthenticationResult[principal=aheritier,isAuthenticated=true,exception=<null>]
1607078 [btpool0-5] DEBUG org.codehaus.plexus.security.system.SecuritySystem:default  - User 'aheritier' authenticated.
1607078 [btpool0-5] DEBUG org.codehaus.plexus.security.system.SecuritySystem:default  - User 'aheritier' exists.
1607078 [btpool0-5] DEBUG org.codehaus.plexus.security.system.SecuritySystem:default  - User: username = 'aheritier'
password = 'null'
encodedPassword = 'zJlmvvgOAWnQR5/JzHdfeh0WOnQBJj7q+CK1/pofQSE='
fullName = 'Arnaud Heritier'
email = 'aheritier@gmail.com'
locked = 'false'
permanent = 'false'
validated = 'false'
passwordChangeRequired = 'true'
1607093 [btpool0-5] DEBUG org.codehaus.plexus.security.authorization.Authorizer:rbac  - checking permission archiva-read-repository-3rd-parties
1607093 [btpool0-5] DEBUG org.codehaus.plexus.security.authorization.Authorizer:rbac  - checking permission archiva-read-repository-corporate-snapshots
1607093 [btpool0-5] DEBUG org.codehaus.plexus.security.authorization.Authorizer:rbac  - checking permission archiva-read-repository-corporate-releases
1607093 [btpool0-5] DEBUG org.codehaus.plexus.security.authorization.Authorizer:rbac  - checking permission archiva-read-repository-private
1633468 [Shutdown] WARN  org.codehaus.plexus.PlexusContainer  - Component manager not found for returned component. Ignored. component=org.apache.maven.archiva.web.repository.ProxiedDavServer@b6c3c1
1633468 [Shutdown] WARN  org.codehaus.plexus.PlexusContainer  - Component manager not found for returned component. Ignored. component=org.apache.maven.archiva.web.repository.ProxiedDavServer@18ceb26
1633468 [Shutdown] WARN  org.codehaus.plexus.PlexusContainer  - Component manager not found for returned component. Ignored. component=org.apache.maven.archiva.web.repository.ProxiedDavServer@1a31031
1633468 [Shutdown] WARN  org.codehaus.plexus.PlexusContainer  - Component manager not found for returned component. Ignored. component=org.apache.maven.archiva.web.repository.ProxiedDavServer@1a9fa0d
1633468 [Shutdown] WARN  org.codehaus.plexus.PlexusContainer  - Component manager not found for returned component. Ignored. component=org.apache.maven.archiva.web.repository.ProxiedDavServer@162a0ba
1633468 [Shutdown] WARN  org.codehaus.plexus.PlexusContainer  - Component manager not found for returned component. Ignored. component=org.apache.maven.archiva.web.repository.ProxiedDavServer@113cec9
1633468 [Shutdown] WARN  org.codehaus.plexus.PlexusContainer  - Component manager not found for returned component. Ignored. component=org.apache.maven.archiva.web.repository.ProxiedDavServer@19072852007-05-13 00:37:44,687 [http-18080-Processor23] DEBUG Authorizer:rbac                - checking permission archiva-read-repository-proxy-snapshots

What all these warnings ? I don't have them in Jetty...."
MRM-323,jmcconnell,Jesse McConnell,2007-05-25T12:24:25.686Z,2007-05-25T12:24:25.686Z,I just wanted to comment that this works right now using jetty with mvn jetty:run on trunk
MRM-323,lmaitre,Ludovic Matre,2007-07-30T06:21:28.247Z,2007-07-30T06:21:28.247Z,"I have the same problem with Archiva 1.0-alpha-2 on Tomcat 5.5.23 + PostGreSQL, on Debian Etch and Mac OS X 10.4. 

I'm wondering if someone has ever been able to successfully use Archiva with Tomcat ?

Debug is ongoing  on my side but if someone could find a fix before i resign it would be fine! :-) I will also test with the current archiva from svn under Windows to see if this work better. IMHO it's a showstopper to use Archiva in real life.

Have a good day, best regards,"
MRM-323,lmaitre,Ludovic Matre,2007-07-31T16:31:49.806Z,2007-07-31T16:31:49.806Z,"The difference i found between archiva run with jetty:run and with Tomcat is that with Tomcat no principal are given to the redback authentifier.

When i access the repository with archiva run with jetty:run i have the following trace in the logs :
2007-07-31 23:23:51,224 [btpool0-3] INFO  org.codehaus.plexus.redback.authorization.Authorizer:rbac  - Authorize principal 'admin' for operation 'archiva-read-repository' for resource 'internal'

When i access the repository with Tomcat i have the following :
2007-07-31 23:19:51,885 [http-6081-Processor25] INFO  org.codehaus.plexus.redback.authorization.Authorizer:rbac  - Authorize principal 'null' for operation 'archiva-read-repository' for resource 'internal'
2007-07-31 23:19:51,886 [http-6081-Processor25] INFO  org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/archiva]  - RepositoryServlet: Authorization Denied [ip=192.168.0.2,isWriteRequest=false,permission=archiva-read-repository,repo=internal] : no matching permissions found!!!!

(with redback-1.0-alpha-1 from svn, and the following in RbacAuthorizer :
    public AuthorizationResult isAuthorized( AuthorizationDataSource source )
        throws AuthorizationException
    {
.... line 79:
        getLogger().info(""Authorize principal '""+principal+""' for operation '""+operation+""' for resource '""+resource+""'"");
        try....

So i guess we must find why the principal isn't send to this method when archiva is run with tomcat."
MRM-323,lmaitre,Ludovic Matre,2007-08-04T05:08:09.323Z,2007-08-04T05:08:09.323Z,"I guess this bug isn't related to Archiva and you can either close it or link it to issue PLXREDBACK-93 . 

I have pursued my investigation a little bit by adding debug statments in Plexus redback-xwork-integration from svn and using it with archiva svn. 

Under jetty when the user is prompted for login and password when accessing a the repository servlet, jetty return the right headers (according to sect 14.8 of RFC 2616) for the authentication header (Authorization) while tomcat return not the exact header (authorization). I have opened bug http://jira.codehaus.org/browse/PLXREDBACK-93 in plexus redback to provide a fix,  apply the patch to have access to repository working under Tomcat*. I'm wondering how it has been possible to access the repository under tomcat without this bugfix.

*Here is the patch to apply, approximately at line 60 of the org.codehaus.plexus.redback.xwork.filter.authentication.basic.HttpBasicAuthentication class in plexus-redback/redback-integrations/redback-xwork/redback-xwork-integration:

String header = request.getHeader( ""Authorization"" );
// in tomcat this is : authorization=Basic YWRtaW46TWFuYWdlMDc=
if (header==null)
header = request.getHeader(""authorization"");
"
MRM-323,lmaitre,Ludovic Matre,2007-08-04T05:58:15.433Z,2007-08-04T05:58:15.433Z,The plexus redback xwork integration basic authentication must be fixed in order to fix this issue.
MRM-323,joakime,Joakim Erdfelt,2007-09-21T17:30:47.806Z,2007-09-21T17:30:47.806Z,This has been fixed in archiva/trunk
MRM-384,joakime,Joakim Erdfelt,2007-05-29T10:22:27.552Z,2007-05-29T10:22:27.552Z,Work completed in trunk.
MRM-324,jmcconnell,Jesse McConnell,2007-05-23T17:40:11.273Z,2007-05-23T17:40:11.273Z,"I can't marked this fixed directly since I am not 100% what caused it, but its working now and it might have something to do with a tweak on MRM-349

test1 user has the Global Repository Manager role and is able to deploy.

    <server>
      <username>test1</username>
      <password>;seng93</password>
      <id>local</id>
    </server>
"
MRM-322,tcue,Teodoro Cue Jr.,2007-04-26T03:08:15.406Z,2007-04-26T03:08:15.406Z,Patch attached.
MRM-322,joakime,Joakim Erdfelt,2007-05-11T13:12:24.463Z,2007-05-11T13:12:24.463Z,"Closing as Cannot Reproduce due to changes in trunk.
""Proxied Repository"" page no longer exists."
MRM-357,nramirez,Nap Ramirez,2007-05-31T03:21:43.121Z,2007-05-31T03:21:43.121Z,Patch contains the fix that updates the consumers in the Repository Scanning page.
MRM-357,nramirez,Nap Ramirez,2007-05-31T03:23:12.931Z,2007-05-31T03:23:12.931Z,Hehehe. Please review MRM-358 and this one.  I'm ready to take on the blame!  Haha!
MRM-357,joakime,Joakim Erdfelt,2007-06-21T12:41:43.593Z,2007-06-21T12:41:43.593Z,"Patch applied in trunk.
Thanks!"
MRM-302,joakime,Joakim Erdfelt,2007-05-11T09:13:50.182Z,2007-05-11T09:13:50.182Z,"Closing as cannot reproduce, as the ""Settings"" screen no longer exists."
MRM-361,jmcconnell,Jesse McConnell,2007-05-24T17:21:36.851Z,2007-05-24T17:21:36.851Z,cleaned up verbage
MRM-361,joakime,Joakim Erdfelt,2007-05-24T18:31:55.924Z,2007-05-24T18:31:55.924Z,"The add/edit repositories screen should change the label from ""Indexed"" to ""Scanned"" too"
MRM-394,fabemn,Fabrice Bellingard,2007-06-01T04:46:28.671Z,2007-06-01T04:46:28.671Z,"The problem comes from the fact that remote repositories are removed from the ArchivaConfiguration object: if you simply go to the repositories admin page, you'll see that the remote repositories are not displayed any more.

I found where the bug comes from and will fix that."
MRM-394,fabemn,Fabrice Bellingard,2007-06-01T05:14:22.041Z,2007-06-01T05:14:22.041Z,Fixed.
MRM-392,oching,Maria Odea Ching,2007-08-31T06:06:39.905Z,2007-08-31T06:06:39.905Z,"Fixed in -r571430, with the following changes in archiva-webapp/src/main/webapp/WEB-INF/jsp/admin/editProxyConnector.jsp:

- Added javascript function for submitting the form to a specific action depending on which textfield the onKeyPress event was invoked  
- Added onkeypress action to the property, blacklist pattern and whitelist pattern textfields

"
MRM-346,joakime,Joakim Erdfelt,2007-05-22T10:49:18.852Z,2007-05-22T10:49:18.852Z,Fixed in trunk.
MRM-340,wsmoak,Wendy Smoak,2007-05-13T18:27:45.795Z,2007-05-13T18:27:45.795Z,"Arnaud determined that this is due to the 'provided' scope we use on the applet to keep it from being included in the webapp.

He suggested adding a dependency on archiva-applet to the config for the dependency plugin."
MRM-340,aheritier,Arnaud HERITIER,2007-05-13T18:31:31.512Z,2007-05-13T18:31:31.512Z,"We could add a dependency for the plugin like :         
      <dependencies>
          <dependency>
            <groupId>org.apache.maven.archiva</groupId>
            <artifactId>archiva-applet</artifactId>
            <version>${archiva.version}</version>
          </dependency>
        </dependencies>

For me, with maven 2.0.6, the order seems to be good even if we don't add this dependency in the plugin and  we have the scope provided in the project dependency.
Perhaps it's a problem in maven 2.0.5...
"
MRM-340,jmcconnell,Jesse McConnell,2007-05-25T09:06:01.305Z,2007-05-25T09:06:01.305Z,"if in the parent pom you define the release plugin goals to be 'clean install' it should work, I have seen this crop up before when your releasing something where the dependency plugin tries to grab something from the repo and the release process hasn't installed it there.."
MRM-340,joakime,Joakim Erdfelt,2007-06-17T20:20:54.484Z,2007-06-17T20:20:54.484Z,Fixed in trunk.
MRM-367,skygolanur,Eric Barboni,2014-10-10T05:05:20.091Z,2014-10-10T05:05:20.091Z,"For the 2.0 branch I think this is no more applicable.

isPermanent flag is not used. 

Should we remove this sigature from Consumer API"
MRM-328,joakime,Joakim Erdfelt,2007-05-10T14:49:29.279Z,2007-05-10T14:49:29.279Z,Work completed in trunk.
MRM-328,joakime,Joakim Erdfelt,2007-05-10T18:45:28.615Z,2007-05-10T18:45:28.615Z,Reopening to correct assignee and fix version.
MRM-334,fabemn,Fabrice Bellingard,2007-05-16T08:53:48.202Z,2007-05-16T08:53:48.202Z,Patch applied
MRM-345,joakime,Joakim Erdfelt,2007-05-16T11:22:23.612Z,2007-05-16T11:22:23.612Z,Fixed in trunk.
MRM-397,jameswdumay,James William Dumay,2008-05-08T02:01:49.25Z,2008-05-08T02:01:49.25Z,Move to 1.1.x
MRM-397,jameswdumay,James William Dumay,2008-05-08T02:22:39.21Z,2008-05-08T02:22:39.21Z,Moving to 1.2
MRM-397,jmluy,John Michael Luy,2008-09-19T04:31:25.527Z,2008-09-19T04:31:25.527Z,"attached patch that uses the ""lite"" style for the repositories page."
MRM-397,jmluy,John Michael Luy,2008-09-19T04:33:20.409Z,2008-09-19T04:33:20.409Z,attached the transparent version of the archiva logo used in the repositories page.
MRM-397,oching,Maria Odea Ching,2008-09-19T05:02:32.527Z,2008-09-19T05:02:32.527Z,"Hmm, i think we should keep the alternating gray shading of the repositories for consistency. The other pages s.a. proxy connectors and repo groups also has alternating shades..
What do others think?"
MRM-397,oching,Maria Odea Ching,2008-09-19T05:02:57.278Z,2008-09-19T05:02:57.278Z,"JM, thanks for the patch btw :)"
MRM-397,oching,Maria Odea Ching,2008-10-06T03:15:40.442Z,2008-10-06T03:15:40.442Z,"Changing summary from 'colour inconsistencies on repository admin page' to 'background of the archiva logo is not transparent in repositories page'. 

I think we should just retain the alternating gray shading for consistency purposes with the other pages."
MRM-397,oching,Maria Odea Ching,2008-10-06T03:18:27.959Z,2008-10-06T03:18:27.959Z,The transparent archiva logo was already committed in trunk -r701110.
MRM-316,oching,Maria Odea Ching,2007-04-19T05:45:30.499Z,2007-04-19T05:45:30.499Z,Web UI tests using Selenium
MRM-316,oching,Maria Odea Ching,2007-04-19T05:51:54.951Z,2007-04-19T05:51:54.951Z,Fixed in -r530375
MRM-329,aheritier,Arnaud HERITIER,2007-05-13T16:05:04.852Z,2007-05-13T16:05:04.852Z,"There's no common interface for reports data :-(
We can do something like that :
<c:forEach items=""${reports}"" var=""report"">
  <h3>
      ${report.name}
  </h3>
  <ul>
    <c:forEach items=""${report.data}"" var=""result"">
      <c:if test=""${result.class.name == 'org.apache.maven.archiva.model.RepositoryProblem'}"">
      <li>
        <b>${result.groupId}:${result.artifactId}:${result.version}:${result.type} : </b>${result.message}
      </li>
      </c:if>
.....
    </c:forEach>
  </ul>
</c:forEach>
But it's not really nice"
MRM-329,aheritier,Arnaud HERITIER,2007-05-13T18:05:29.185Z,2007-05-13T18:05:29.185Z,The other type used here seems to be : ArchivaArtifact
MRM-329,joakime,Joakim Erdfelt,2007-05-25T07:24:50.413Z,2007-05-25T07:24:50.413Z,This is being postponed to 1.0-alpha-2
MRM-329,tcue,Teodoro Cue Jr.,2007-07-25T09:46:40.492Z,2007-07-25T09:46:40.492Z,"I've attached a preliminary work of how archiva can use JasperReports as its reporting mechanism. It's functional but there are a lot of aesthetics work to be done.

Aside from the look, there are a lot of things to discuss:
1. Do we need to put in the links for the pages? Such as, when using Google, there are a number of links that corresponds to the resulting pages. Example: <1><2><3>...<Last Page>

2. Do we put in the functionality that a user can choose the resulting number of rows per page? Currently I've hard coded this to 10 rows per page as I don't have a lot of sample to work on. And it's hard to put this number in between pages. It would be better to have the user choose the number first before starting the report. We can't put an editable text field on the JasperReport page. Or I just can't find a sample of it on the web. ^_^

3. The last page for now is blank. Will work on this maybe tomorrow. Depends on the responds I get from the list or here.

4. I've queried the DB straight from the action. I understand the DB management quite well but had a hard time understanding the ReportingManager. Would it be better to wrap the DB queries from ReportingManager?

5. This is related to item 4. As I don't understand the ReportingManager fully and I need to get a limited number of rows. I've added a range constraint that would do this. I'm not sure on this implementation. JPOX documentation says that it's only ""implemented efficiently"" on a couple of DBs. http://www.jpox.org/docs/1_2/jdo/query.html

6. Anyone who can point me to a good jrxml document would be helpful. I can't seem to have <staticText> working. So I use <textField> instead.

Feedback will be greatly appreciated. :)

Thanks!"
MRM-329,tcue,Teodoro Cue Jr.,2007-07-27T03:28:07.072Z,2007-07-27T03:28:07.072Z,Opps... I forgot to attach the model patch.
MRM-329,oching,Maria Odea Ching,2007-07-27T05:25:46.52Z,2007-07-27T05:25:46.52Z,"Good work on the reports Teody!

I've applied the patch in my local machine to try it out and here are my comments:
1. For the number links, I think it would be better to have it that way so that it's easier for the user to browse through the report.
2. I also agree on giving the user the functionality to choose the resulting number of rows per page.
3. It would be nice if there is a default message that tells the user that there are no errors to be reported when the user clicks 'Reports' in the navigation menu, instead of just a blank page.
4. Maybe the report should be renamed to something else other than 'All Problematic Artifacts' (hehe.. I felt like these artifacts were depressed)

I'm not sure about #4 and #5, I think you should ask Joakim about it.
For #6, you could try generating a jrxml file using iReport and see how the <staticText> works ;)
"
MRM-329,tcue,Teodoro Cue Jr.,2007-08-01T00:26:02.262Z,2007-08-01T00:26:02.262Z,"Hi,

Updated patch(20070801) attached.
Comments and suggestions will be greatly appreciated.

Thanks!"
MRM-329,brettporter,Brett Porter,2007-08-01T00:55:07.996Z,2007-08-01T00:55:07.996Z,it's normally best not to date the patches - that way the new ones just obsolete the old ones and it's easiest to figure out which ones to apply :)
MRM-329,brettporter,Brett Porter,2007-08-01T00:57:43.213Z,2007-08-01T00:57:43.213Z,and also one patch from the root directory is easier to apply :)
MRM-329,brettporter,Brett Porter,2007-08-01T01:30:57.776Z,2007-08-01T01:30:57.776Z,"looks good!

comments from the usage side:
- what's the use case for searching by artifact ID? I can understand the group filter, but not sure about the others
- can the repository list easily be a dropdown?
- I'd put them all in one form, so each field is an additional constraint (and the default is just to show everything)
- I don't think the final report should be skinned - it doesn't really fit
- I'd drop the last 3 columns from the table
- how come a separate java app is started when this is generated? (tanuki WrapperSimpleApp) - or is this just me?

haven't eval'd the code..."
MRM-329,oching,Maria Odea Ching,2007-08-01T04:40:31.431Z,2007-08-01T04:40:31.431Z,"Thanks for the patch Teody.. the reports definitely looks better now :)

I agree with Brett's comments, especially the constraints/fields being grouped together in one form. It'll be easier for the user to use. 
Below are some additional comments:
- Can the version link in the reports be removed? I think it would always display the 'Unable to find...' error message whenever you click it since the project model is never added to the database once it is found to be invalid
- Could you provide some unit tests for these?
- And lastly, what about the reports not being accessible to only those users with admin roles? Should that be included here? Or is that a separate issue?

Btw, I didn't see the tanuki WrapperSimpleApp started when I executed the reports :)"
MRM-329,joakime,Joakim Erdfelt,2007-08-02T15:03:18.19Z,2007-08-02T15:03:18.19Z,"Patches look good.

Great work Teody!

Patches applied in revision 562233."
MRM-329,tcue,Teodoro Cue Jr.,2007-08-03T05:24:46.295Z,2007-08-03T05:24:46.295Z,"Hi Guys,

I've attached the latest patch with changes in my email yesterday on the dev mailing list.
Patch is now formatted with Brett's comments taken into consideration. Thanks for the info Brett!

Changes:
-Taken out Artifact search

-Taken out Version link
-Repository list now a drop down

-Consolidated all the fields into 1 form

-Dropped the last 3 columns from the table

-Unit tests for all the constraints

Lacking:
-Unit tests for the actions and the model (can someone help me out as to how to test the action? how do we inject the dao from the test environment?)
-Form validation (especially the rowCount, which needs a positive number)
-Profile regarding licensing of JasperReports discussed in the dev mailing list


Comments are always welcome! :)"
MRM-329,brettporter,Brett Porter,2007-08-03T10:54:58.939Z,2007-08-03T10:54:58.939Z,"couple of tweaks I'd make:
- if you enter org.apache, look for org.apache*
- add ""(All Repositories)"" as the text on the default repository id."
MRM-329,brettporter,Brett Porter,2007-08-03T11:00:31.413Z,2007-08-03T11:00:31.413Z,"applied, thanks!
"
MRM-314,oching,Maria Odea Ching,2007-04-16T05:05:07.116Z,2007-04-16T05:05:07.116Z,"Archiva webapp cannot be started (in webapp-test) because of this error:

Cannot load JDBC driver class 'org.apache.derby.jdbc.EmbeddedDriver'

The derby jar file is not set on the classpath, the jar file does not exist in the archiva webapp library."
MRM-314,nramirez,Nap Ramirez,2007-04-17T02:24:07.222Z,2007-04-17T02:24:07.222Z,Issue duplicates MRM-310
MRM-393,oching,Maria Odea Ching,2007-08-20T01:39:24.002Z,2007-08-20T01:39:24.002Z,"Fixed in -r567556.

- Updated javascript function setAndSubmit(..)
- Changed getBlackListPattern() to getPattern in ConfigureProxyConnectorAction.removeBlackListPattern()"
MRM-326,nramirez,Nap Ramirez,2007-05-08T07:15:39.014Z,2007-05-08T07:15:39.014Z,"Though adding a repository using invalid values appears to be harmless, no repository added, it should still notify the user of invalid inputs."
MRM-326,jancajas,jancajas,2007-06-05T05:29:32.203Z,2007-06-05T05:29:32.203Z,"attached patch.

opt to use server side validations. (error messages in javascript are accumulated)"
MRM-326,oching,Maria Odea Ching,2007-07-23T20:08:02.512Z,2007-07-23T20:08:02.512Z,"Applied patch in trunk, -r558904. 

Thanks! :)"
MRM-301,joakime,Joakim Erdfelt,2007-05-11T13:13:14.59Z,2007-05-11T13:13:14.59Z,"Closing as Cannot Reproduce due to changes in trunk.
The Configuration -> Settings page no longer exists.
A new Network Proxies configuration page is in its place."
MRM-1486,jsharp,jsharp,2014-10-31T15:23:28.408Z,2014-10-31T15:23:28.408Z,"Still seeing this issue in the current 2.1.2 snapshot, except the workaround doesn't seem to work anymore.

I tried a filter using the manager attribute with openldap and inetOrgPerson/groupOfUniqueNames objects. ldap.config.mapper.attribute.user.filter is truncated in various  ways on each startup:

manager=cn=foo,ou=bar,dc=example,dc=com -> manager=cn=foo

manager=cn=foo\,ou=bar\,dc=example\,dc=com -> manager=cn=foo,ou=bar,dc=example,dc=com -> manager=cn=foo

manager=cn=foo\\,ou=bar\\,dc=example\\,dc=com -> manager=cn=foo\

manager=cn=foo\\\,ou=bar\\\,dc=example\\\,dc=com -> manager=cn=foo\,ou=bar\,dc=example\,dc=com -> manager=cn=foo,ou=bar,dc=example,dc=com -> manager=cn=foo

(manager=cn=foo,ou=bar,dc=example,dc=com) -> (manager=cn=foo

...an escaping problem somewhere."
MRM-1486,jsharp,jsharp,2014-12-03T23:55:54.726Z,2014-12-03T23:55:54.726Z,"I put in a pull request to redback-components which fixes the truncation issue. Calling getString(key) on Apache Commons Configuration returns only the first element of a list value.

I haven't verified that the filter is working for authentication purposes yet."
MRM-1486,olamy,Olivier Lamy (*$^%`),2014-12-22T18:40:48.189Z,2014-12-22T18:40:48.189Z,"patch applied.
Thanks!!"
MRM-1451,ctan,Maria Catherine Tan,2011-01-27T04:46:06.988Z,2011-01-27T04:46:06.988Z,Attached patch
MRM-1451,jzurbano,jzurbano,2011-01-27T05:20:15.746Z,2011-01-27T05:20:15.746Z,"Thanks, Catherine! :)

Patch applied in r1064082."
MRM-1408,oching,Maria Odea Ching,2010-08-08T02:57:53.567Z,2010-08-08T02:57:53.567Z,I think this is fixed now.
MRM-1414,brettporter,Brett Porter,2010-10-07T20:40:32.737Z,2010-10-07T20:40:32.737Z,"sorry, I haven't had a chance to spin up an authenticated proxy to test this. Have you made any progress with it?"
MRM-1414,nicholas.grabowski@schwab.com,Nicholas Grabowski,2010-10-11T15:20:24.654Z,2010-10-11T15:20:24.654Z,"Brett

We could not find a way to work around the issue so we started using Nexus.  It seems to be satisfying our needs.

Thanks
Nick"
MRM-1414,brettporter,Brett Porter,2010-10-11T18:08:58.001Z,2010-10-11T18:08:58.001Z,"ok, I'll move to the backlog to check when we can or if others encounter it."
MRM-1414,jvogelzang,Johan Vogelzang,2011-08-30T08:03:59.699Z,2011-08-30T08:03:59.699Z,"Have you tried with the domainname before your proxy username?
Like this: 'domainname\username'
Some proxyservers require this."
MRM-1414,olamy,Olivier Lamy (*$^%`),2011-10-27T15:27:42.297Z,2011-10-27T15:27:42.297Z,"should be fixed with using wagon 2.0 based on asf httpclient.
reopen if still an issue."
MRM-1409,oching,Maria Odea Ching,2010-07-27T03:21:08.472Z,2010-07-27T03:21:08.472Z,This should also show up in the audit logs report. We can indicate that the merging was triggered remotely.
MRM-1409,gautencio,Gwen Harold Autencio,2010-09-28T22:47:46.328Z,2010-09-28T22:47:46.328Z,"Hi,

Attaching webservice for repository merging. Added service in AdministrationService. after merge it will do a scan on the repository.

Thanks,
Gwen"
MRM-1409,gautencio,Gwen Harold Autencio,2010-09-29T01:41:40.758Z,2010-09-29T01:41:40.758Z,"Sorry, didn't read the previous comment on the audit logs.
Attaching an updated patch that includes audit log and reports.

Thanks,
Gwen"
MRM-1409,oching,Maria Odea Ching,2010-09-29T08:25:10.035Z,2010-09-29T08:25:10.035Z,"Thanks for the patch Gwen :) A couple of minor comments though:

* There's a missing 'e' in 'Triggred' in the ff. line for AuditEvent:

{code}
+    public static final String MERGE_REPO_REMOTE = ""Merged Staging Repository Triggred Remotely"";
{code}

* For RepositoryMerger, it might be better to rename the following method to getConflictingArtifacts(..)

{code}
+    public List<ArtifactMetadata> getConflictsartifacts( String sourceRepo, String targetRepo )
+        throws Exception;
{code}

* In AdministrationServiceImpl, what is the call to .removeAll(..) for since conflicts is an empty list?

{code}
+        List<ArtifactMetadata> conflicts = new ArrayList<ArtifactMetadata>();
+        sources.removeAll( conflicts );
{code}

* Lastly, you can already remove the <version>${project.version}</version> in the dependencies that you've added in the respective POMs since the version is already specified in the root POM
"
MRM-1409,gautencio,Gwen Harold Autencio,2010-09-29T21:44:01.176Z,2010-09-29T21:44:01.176Z,"Hi Miss Deng,

* corrected typo error
* added object in conflicts list in AdministationServiceImplTest
* removed ${project.version}
* added more unit tests.

Thanks,
Gwen"
MRM-1409,oching,Maria Odea Ching,2010-09-30T22:50:55.281Z,2010-09-30T22:50:55.281Z,Patch applied to trunk [-r1003378|http://svn.apache.org/viewvc?revision=1003378&view=revision]. Thanks Gwen!
MRM-1434,brettporter,Brett Porter,2010-11-26T19:53:37.404Z,2010-11-26T19:53:37.404Z,I think you're right - we should look at where the method is used (if at all) for the impact and put some tests around it (or just remove it if it's unused).
MRM-1460,oching,Maria Odea Ching,2011-03-13T09:00:50.981Z,2011-03-13T09:00:50.981Z,"Upgraded to Redback 1.2.7 in [-r1081111|http://svn.apache.org/viewvc?revision=1081111&view=revision] and configured the CSRF filter that was newly implemented in 1.2.7.

Also configured XSS parameter check interceptor in [-r1081116|http://svn.apache.org/viewvc?revision=1081116&view=revision]."
MRM-1460,oching,Maria Odea Ching,2011-03-22T20:02:15.351Z,2011-03-22T20:02:15.351Z,Re-opening issue since we will be re-releasing Redback for additional changes to CSRF and XSS vulnerability fixes.
MRM-1460,oching,Maria Odea Ching,2011-04-07T07:03:50.273Z,2011-04-07T07:03:50.273Z,Upgraded to Redback 1.2.8-SNAPSHOT and configured Struts2's token interceptor + use of {{<s:token/>}} to prevent CSRF issue in [-r1089839|http://svn.apache.org/viewvc?view=revision&revision=1089839]. 
MRM-1460,oching,Maria Odea Ching,2011-04-11T04:36:45.361Z,2011-04-11T04:36:45.361Z,Added selenium tests for CSRF-affected actions in Archiva in [-r1090975|http://svn.apache.org/viewvc?rev=1090975&view=rev]
MRM-1460,oching,Maria Odea Ching,2011-05-11T23:44:53.132Z,2011-05-11T23:44:53.132Z,Upgraded 1.3.x branch to Redback 1.2.8 in -r1102167.
MRM-1482,brettporter,Brett Porter,2011-07-24T21:14:36.263Z,2011-07-24T21:14:36.263Z,"You would have to write a small amount of custom code into Archiva, but it isn't exposed as a user level feature. Essentially this is the same abstraction that is used to support Maven 1.x and Maven 2.x format repositories simultaneously. Is that something you are prepared to do? 

Alternatively, you could quite easily script something to upload that directory into Archiva with default POMs, but then you have two copies and you probably only want to maintain one going forward. 

There is a catch to keep in mind here though - default POMs will not have any dependency information, so the amount of dependency management you can do with these JARs will be limited. You may want to invest the right amount effort to get this populated as well to improve your use of Maven."
MRM-1482,daivish,daivish shah,2011-07-25T11:51:20.392Z,2011-07-25T11:51:20.392Z,"I think from your answer it looks like i have to write a custom code which brings me URL something like this...

http://localhost:8080/samplepath/networkrepository/ErrorLogClient/ErrorLogClient/1.0/ErrorClient-1.0.jar

And i have to USE this URL as my network-repository only, And then no point of Using Archiva at this moment unless i upload all artifacts into Archiva repository.

I was trying to avoid writing new custom code. As archiva is nice tool and very good features available itself. But my company is not looking to change existing network location or structure for all JARs at this moment.  So i have only one option left to write custom code to create HTTP URL.

Thanks for your help.

-Daivish."
MRM-1482,brettporter,Brett Porter,2011-07-25T18:33:02.936Z,2011-07-25T18:33:02.936Z,"Actually, what I meant was to write custom code within Archiva, so that Maven would request:

http://localhost:8080/archiva/repository/someid/ErrorLogClient/ErrorLogClient/1.0/ErrorLogClient-1.0.jar

and on the storage end you would look that up as a path C:\networkfolder\ErrorLogging\1.0\Java\ErrorLogClient.jar

It is a copy of this class: http://svn.apache.org/viewvc/archiva/branches/archiva-1.3.x/archiva-modules/archiva-base/archiva-repository-layer/src/main/java/org/apache/maven/archiva/repository/content/ManagedLegacyRepositoryContent.java?revision=900340&view=markup

"
MRM-1482,daivish,daivish shah,2011-07-25T18:52:58.565Z,2011-07-25T18:52:58.565Z,"I think you are right. 

Can you explain me, What exactly all things i need to do with this file and What all steps that i need to follow to complete this ?

This is really good idea if i can do with Archiva only, I am very happy to hear this... Please explain me more in detail.

Thanks Brett !!! Looking forward to hear more from you. "
MRM-1482,daivish,daivish shah,2011-07-26T17:27:11.948Z,2011-07-26T17:27:11.948Z,"Hi Brett,

Can you explain me little bit on this ?

Thanks,
daivish."
MRM-1482,brettporter,Brett Porter,2011-07-26T20:01:13.041Z,2011-07-26T20:01:13.041Z,"Here are the steps to just support a custom managed repository type, building on Archiva 1.3.x. If you wanted to make the modification to trunk (which has changed but is not released yet) or make it flexible, please discuss it with us on dev@archiva.apache.org and we'd be happy to help incorporate your patch.


The first step is to make sure you can checkout and build Archiva:

http://archiva.apache.org/developers/building.html

Instead of the location there, you will want to check out the branch for your purposes:

http://svn.apache.org/repos/asf/archiva/branches/archiva-1.3.x

Once you can build and run it, try copying the class above to a new one in the same directory and change the ""legacy"" references to, say, ""custom"". As part of changing this, you'll also need alternatives for these:
- AbstractLegacyRepositoryContent
- LegacyPathParser

You'll also need to add ""custom"" as valid values in these:
- archiva-webapp/src/main/resources/org/apache/maven/archiva/web/action/admin/ConfigureRepositoryAction-validation.xml
- archiva-webapp/src/main/webapp/WEB-INF/jsp/admin/include/repositoryForm.jspf

If you can then build and run archiva and create a managed repository of type ""custom"", you are ready to edit the code you copied to read files in the format you expect. Hopefully, how to do that is obvious from the code there.

If you have any questions, feel free to ping us on dev@archiva.apache.org."
MRM-1482,daivish,daivish shah,2011-07-27T10:47:22.415Z,2011-07-27T10:47:22.415Z,"Thanks Brett for your help. I sent email to dev@archiva.apache.org group waiting for reply from them now. 

I hope it should not take much effort to do this. What do you think is it require lot of work around ? "
MRM-1482,brettporter,Brett Porter,2011-08-19T07:33:16.365Z,2011-08-19T07:33:16.365Z,how are you going with this?
MRM-1482,daivish,daivish shah,2011-08-19T10:50:51.579Z,2011-08-19T10:50:51.579Z,"Hi Brett, 

I didn't get any reply from (dev@archiva.apache.org) So i developed my own Archiva :-) which doesn't have same kind of functionality But atleast i can download JAR files with POM XML from my own project URL. 

something like this So you hit the URL and it gives me POM and JAR file which MAVEN is looking for.

http://localhost:8080/myproject/repository/ErrorLogClient/ErrorLogClient/1.0/ErrorLogClient-1.0.jar

So currently i am using my own project which i developed and which is using Archiva concepts.

Thanks for asking Brett, I can't wait such a long so i thought let me develop myself only.
"
MRM-1482,brettporter,Brett Porter,2011-08-20T04:00:33.1Z,2011-08-20T04:00:33.1Z,"No problem. You may want to check your email settings though, as you did get responses:
http://mail-archives.apache.org/mod_mbox/archiva-dev/201107.mbox/%3C202ACA4A-6B53-4701-8C48-D267DBA9E927@apache.org%3E
http://mail-archives.apache.org/mod_mbox/archiva-dev/201107.mbox/%3CCAPCVKoLxj_vQNBMuNoVg3Os4Ce7xa0OirJZBE6Y-_U=hGzsVMw@mail.gmail.com%3E"
MRM-1482,daivish,daivish shah,2011-08-22T11:30:03.972Z,2011-08-22T11:30:03.972Z,"Hi Brett,

Yes i didn't get this email in my inbox sorry about that.

i think i am fine at this moment as i already made my own repository code, If i will find any issue in future i will contact you again.

Thanks for all your help."
MRM-1457,knoth,Benjamin Knoth,2011-02-22T02:27:33.415Z,2011-02-22T02:27:33.415Z,To complete the status of topthread plugin of jconsole.
MRM-1457,knoth,Benjamin Knoth,2011-02-22T02:28:01.899Z,2011-02-22T02:28:01.899Z,Now all complete.
MRM-1457,brettporter,Brett Porter,2011-03-02T02:33:40.081Z,2011-03-02T02:33:40.081Z,"looks like this is caused by the dependency tree. Are you also seeing that?

I recommend disabling it - perhaps we should do that in the next 1.3.x release (the performance issue no longer exists in 1.4)."
MRM-1457,knoth,Benjamin Knoth,2011-03-09T02:32:45.516Z,2011-03-09T02:32:45.516Z,It's possible.
MRM-1457,knoth,Benjamin Knoth,2011-03-16T05:30:47.368Z,2011-03-16T05:30:47.368Z,Since two weeks it run normal without 100% cpu usage.
MRM-1457,brettporter,Brett Porter,2011-03-16T15:46:08.805Z,2011-03-16T15:46:08.805Z,"Sorry about the inconvenience. I'll disable this in an upcoming 1.3.5 release, and it will return in 1.4 without the performance issue."
MRM-1457,oching,Maria Odea Ching,2011-05-06T02:41:25.417Z,2011-05-06T02:41:25.417Z,Dependency tree disabled in 1.3.x branch for now in [-r1100112|http://svn.apache.org/viewvc?rev=1100112&view=rev].
MRM-1484,oching,Maria Odea Ching,2011-08-01T21:36:43.903Z,2011-08-01T21:36:43.903Z,Fixed in commit [-r1153002|http://svn.apache.org/viewvc?rev=1153002&view=rev]
MRM-1484,pablaasmo,Per Arnold Blaasmo,2011-08-03T16:19:19.829Z,2011-08-03T16:19:19.829Z,"I have a problem building after this fix.
My build tries to look for the atlassian-xlmprc at http://repo1.maven.org/maven2/com/atlassian/xmlrpc/atlassian-xmlrpc-binder-annotations/0.11/atlassian-xmlrpc-binder-annotations-0.11.pom

But there is no 0.11 version at that site. 
Is it my maven setup that is wrong or is it the code?

Per A."
MRM-1484,brettporter,Brett Porter,2011-08-03T18:25:22.755Z,2011-08-03T18:25:22.755Z,we're waiting for Atlassian to put it in central - but you can find it at https://maven.atlassian.com/content/repositories/public/
MRM-1404,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-29T01:42:27.848Z,2010-07-29T01:42:27.848Z,Now when the user delete the original repository then the staging repo also delete.
MRM-1404,oching,Maria Odea Ching,2010-08-01T00:22:30.104Z,2010-08-01T00:22:30.104Z,Fixed by the patch submitted for MRM-1397.
MRM-1466,brettporter,Brett Porter,2011-04-07T22:52:36.187Z,2011-04-07T22:52:36.187Z,"sorry I missed this issue being opened.

this change may have taken effect, but it won't undo the flagging of accounts that require a password change. As an admin, you can go to the user account and uncheck that box if necessary.

That said, I'm not sure why change password would be in effect if you're using LDAP..."
MRM-1466,ez2cwhy,Adam Chandler,2011-04-08T11:19:38.679Z,2011-04-08T11:19:38.679Z,"Agreed.  I'm not sure why it would be trying to change the password at all.  LDAP is enabled, all users were imported, everything looks good...except for this one issue.  I'm perplexed.  The one hold out of hope that I have is that I won't see this issue when I migrate to a Tomcat installation instead.  Any other suggestions that you may have would be greatly appreciated."
MRM-1466,brettporter,Brett Porter,2011-04-21T23:58:49.293Z,2011-04-21T23:58:49.293Z,"the only other idea I have is if there is an ~/.m2/security.properties file that conflicts with it.

Did you have any luck?"
MRM-1466,ez2cwhy,Adam Chandler,2011-04-24T10:25:06.143Z,2011-04-24T10:25:06.143Z,"Unfortunately,there's not a security.properties file in my .m2 directory.   And, I haven't  had additional luck either.  I'm still waiting to migrate this to a Tomcat server instead of the standalone.  Perhaps that will help.  Either way, I'll report back once I get that going.  If you think of anything else, please let me know!!"
MRM-1466,ez2cwhy,Adam Chandler,2011-05-12T06:58:13.476Z,2011-05-12T06:58:13.476Z,Just wanted to give an update.  I migrated our 1.3.4 instance to Tomcat 7 and the issue has gone away.  The war sitting on Tomcat does not prompt users to change their passwords when LDAP is enabled.
MRM-1466,brettporter,Brett Porter,2011-05-20T01:00:48.268Z,2011-05-20T01:00:48.268Z,sounds like a config conflict. Glad you got it sorted out.
MRM-1478,ctan,Maria Catherine Tan,2011-06-08T07:02:28.19Z,2011-06-08T07:02:28.19Z,Attached patch to enable second level JDO caching
MRM-1478,ctan,Maria Catherine Tan,2011-06-09T02:19:34.787Z,2011-06-09T02:19:34.787Z,Updated patch
MRM-1478,olamy,Olivier Lamy (*$^%`),2011-06-28T17:19:47.755Z,2011-06-28T17:19:47.755Z,"fixed r1140869
Thanks !"
MRM-1405,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-28T21:13:43.107Z,2010-07-28T21:13:43.107Z,show only namespace + groupId + version in the conflicts page.
MRM-1405,oching,Maria Odea Ching,2010-08-15T20:16:50.014Z,2010-08-15T20:16:50.014Z,Verified as already fixed.
MRM-1463,brettporter,Brett Porter,2011-03-28T09:30:11.135Z,2011-03-28T09:30:11.135Z,"thanks, we'll take look. The classifier is a good addition that we don't have yet. However, the other changes have already been made on trunk (though the download box formatting is having some issues right now).

If you're interested in testing & patching trunk we'd appreciate the eyes."
MRM-1463,lucien@wellernet.ch,Lucien Weller,2011-03-28T09:57:13.187Z,2011-03-28T09:57:13.187Z,"I will take a look at trunk. But can you tell me, when this changed may be expected to be release?"
MRM-1463,brettporter,Brett Porter,2011-03-28T10:54:00.84Z,2011-03-28T10:54:00.84Z,"still a little while away, so we could apply this to the next 1.3.x release. We're just trying to cut those back to focus on trunk :)"
MRM-1463,lucien@wellernet.ch,Lucien Weller,2011-03-28T11:23:17.821Z,2011-03-28T11:23:17.821Z,nice of you gays (our test managers are happy to know that they will soon have a better view of artifacts in archiva)
MRM-1463,lucien@wellernet.ch,Lucien Weller,2011-03-29T11:48:43.923Z,2011-03-29T11:48:43.923Z,thanks a lot
MRM-1463,oching,Maria Odea Ching,2011-05-12T04:59:56.655Z,2011-05-12T04:59:56.655Z,Patch applied to 1.3.x branch in [-r1102222|http://svn.apache.org/viewvc?rev=1102222&view=rev]. Thanks Lucien! :)
MRM-1477,dmatej,David Matejcek,2013-06-18T06:34:23.458Z,2013-06-18T06:34:23.458Z,"I have Archiva 1.3.5 and uploaded an artifact that already existed with an older version. Metadata file then was left unchanged, so maven build failed.
Then I opened the repository page and checked the ""Process All Artifacts"" checkbox and sumbitted the button ""Scan Repository Now"".
Then the metadata file has been changed and even a maven build was successful (with -U).

But maybe it should be better to run the scan right after the upload ..."
MRM-1477,olamy,Olivier Lamy (*$^%`),2014-03-02T16:48:32.45Z,2014-03-02T16:48:32.45Z,not sure it's still an issue?
MRM-1480,brettporter,Brett Porter,2011-08-19T07:51:07.127Z,2011-08-19T07:51:07.127Z,"I wonder if we should pursue this for 1.4, or focus on the REST APIs?"
MRM-1480,olamy,Olivier Lamy (*$^%`),2011-08-19T12:21:45.567Z,2011-08-19T12:21:45.567Z,"perso I would prefer the rest one :-).
regarding user management at things started on redback [http://svn.codehaus.org/redback/redback/trunk/redback-rest/redback-rest-services/src/main/java/org/codehaus/redback/rest/services/DefaultUserService.java]
and the unit test.
I wonder about adding a module called redback-rest-client with some client support.
WDYT ?"
MRM-1480,olamy,Olivier Lamy (*$^%`),2011-09-29T02:31:33.69Z,2011-09-29T02:31:33.69Z,Move this to backlog as some REST services are now available in redback. I'm not really sure we still need this.
MRM-1422,brettporter,Brett Porter,2010-10-07T19:54:47.927Z,2010-10-07T19:54:47.927Z,"can you try changing the proxy connector policy to ""once"" instead of ""always"" for releases?

It seems like there's a problem in that ""always"" getting releases is only meant to apply to the metadata, not the artifacts, but it may be rechecking.

"
MRM-1456,gayathri,Gayathri Muralidharan,2011-02-09T01:56:04.24Z,2011-02-09T01:56:04.24Z,"Hi, 

Can anyone help us here?

Thanks,
Gayathri"
MRM-1456,brettporter,Brett Porter,2011-02-09T07:42:48.168Z,2011-02-09T07:42:48.168Z,It looks like an issue in the support for SNAPSHOT (as it is typically something like 1.1-SNAPSHOT). I'll check.
MRM-1456,brettporter,Brett Porter,2011-02-09T07:46:32.549Z,2011-02-09T07:46:32.549Z,probably a duplicate of the linked issue - to verify
MRM-1456,olamy,Olivier Lamy (*$^%`),2014-02-25T19:32:10.277Z,2014-02-25T19:32:10.277Z,no more issues fix for 1.3.x except security. Please use 2.x 
MRM-1481,ctan,Maria Catherine Tan,2011-07-19T21:33:55.179Z,2011-07-19T21:33:55.179Z,patch submitted to configure redback xmlrpc in archiva
MRM-1481,olamy,Olivier Lamy (*$^%`),2011-08-10T14:18:26.251Z,2011-08-10T14:18:26.251Z,"fixed r1156322
Thanks !"
MRM-1481,barinluk,Lukas Barina,2012-01-19T03:08:27.983Z,2012-01-19T03:08:27.983Z,"Hello,
I have a question whether this patch is applicable as also in Archiva 1.3.5 ?

Previously we used Archiva 1.2.2 with our own a patch to xmlrpc service. 
The patch was basically extension of AdministrationServiceImpl class
with ""attachUsertoRoleManagedRepoManager"" which was used for adding user roles to repositories.
Unfortunatelly and I guess because of the archiva api changes in user management area our service
for adding roles for user is not working anymore in version 1.3.5.

We are trying to find other solution so I tried to apply exactly this patch to that 1.3.5 code
but I was not successful with running the application then.
My guesses is that this patch cannot be applied but maybe you would have some advice how to do it :)

Any information about ability to do user mgmt thru xmlrpc in Archiva 1.3.5 will be helpfull

Best regards

Lukas



"
MRM-1481,brettporter,Brett Porter,2012-01-22T22:49:07.787Z,2012-01-22T22:49:07.787Z,"I believe this should be applicable in 1.3.5 - have you tried and had a problem?

BTW, we decided in the latest release to instead remove XMLRPC support, as we now have a complete replacement in REST. That won't impact 1.3.5, but may be worth keeping in mind for looking to future releases."
MRM-1462,brettporter,Brett Porter,2011-03-24T23:54:21.663Z,2011-03-24T23:54:21.663Z,"commented on users - haven't seen it. I wouldn't say it should be ignored, but at the same time we've removed the database in 1.4 so there's not much need to track it in an issue unless it blocks you using 1.3.x in some way."
MRM-1462,brettporter,Brett Porter,2011-04-07T22:50:47.903Z,2011-04-07T22:50:47.903Z,"going with cannot reproduce for the moment. I hope you sort it out - but if not, perhaps you'd like to try out a build of trunk"
MRM-1425,brettporter,Brett Porter,2010-10-07T22:52:37.939Z,2010-10-07T22:52:37.939Z,"you want this in all the Archiva manifest files, or just the webapp?

It's a pretty simple config option for the archiver I think."
MRM-1425,ChrisGWarp,Chris Graham,2010-10-07T23:33:50.98Z,2010-10-07T23:33:50.98Z,"It is good practice to definatively label/version everything. However, for my purposes, I only need the war file itself versioned. Then I can do this:

        JarFile jf = new JarFile(""archiva.war"");
        Manifest manifest = jf.getManifest();
        jf.close();
        String implementationVersion = manifest.getMainAttributes().getValue(""Implementation-Version"");
        System.out.println(""implementationVersion = "" + implementationVersion);

I know that archiva is distributed as a versioned named war file, but I can not rely upon people not renaming it.

Yes, it's trivially simple to do:

                    <configuration>
                        <archive>
                            <addMavenDescriptor>true/addMavenDescriptor>
                            <manifest>
                                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                                <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
                            </manifest>
                        </archive>
                    </configuration>"
MRM-1425,ChrisGWarp,Chris Graham,2011-11-22T06:55:09.278Z,2011-11-22T06:55:09.278Z,This patch is for pom.xml to added in the default implentation entries. Tested against the current (M2-SNAPSHOT) trunk.
MRM-1425,olamy,Olivier Lamy (*$^%`),2011-11-22T07:22:27.206Z,2011-11-22T07:22:27.206Z,Thanks for the patch.
MRM-1467,brettporter,Brett Porter,2011-03-31T20:04:19.035Z,2011-03-31T20:04:19.035Z,"what is the output of the following commands for you?

uname -s
uname -p
uname -m

Can you run the start command using ""bash -x ./archiva console"", and attach the log?

I can see that maybe it wouldn't understand ""i86pc"". I'm not sure why the i386 and SunOS are not being understood though."
MRM-1467,astine,Andrew Stine,2011-03-31T21:06:48.54Z,2011-03-31T21:06:48.54Z,"uname -s: SunOS
uname -p: i386
uname -m: i86pc
uname -a: SunOS unknown 5.10 Generic_138889-02 i86pc i386 i86pc

Log:
+ APP_NAME=archiva
+ APP_LONG_NAME='Apache Archiva'
+ '[' X = X ']'
+ ARCHIVA_BASE=..
+ WRAPPER_CMD=./wrapper
+ WRAPPER_CONF=../conf/wrapper.conf
+ '[' '!' -f ../conf/wrapper.conf ']'
+ PRIORITY=
+ PIDDIR=../logs
+ case $0 in
++ pwd
+ PWD=/export/home/astine/apache-archiva-1.3.4/bin
+ SCRIPT=/export/home/astine/apache-archiva-1.3.4/bin/./archiva
+ CHANGED=true
+ '[' Xtrue '!=' X ']'
++ echo /export/home/astine/apache-archiva-1.3.4/bin/./archiva
++ sed -e 's; ;:;g'
+ SAFESCRIPT=/export/home/astine/apache-archiva-1.3.4/bin/./archiva
++ echo /export/home/astine/apache-archiva-1.3.4/bin/./archiva
++ sed -e 's;/; ;g'
+ TOKENS=' export home astine apache-archiva-1.3.4 bin . archiva'
+ REALPATH=
+ for C in '$TOKENS'
++ echo export
++ sed -e 's;:; ;g'
+ C=export
+ REALPATH=/export
+ '[' -h /export ']'
+ for C in '$TOKENS'
++ echo home
++ sed -e 's;:; ;g'
+ C=home
+ REALPATH=/export/home
+ '[' -h /export/home ']'
+ for C in '$TOKENS'
++ echo astine
++ sed -e 's;:; ;g'
+ C=astine
+ REALPATH=/export/home/astine
+ '[' -h /export/home/astine ']'
+ for C in '$TOKENS'
++ echo apache-archiva-1.3.4
++ sed -e 's;:; ;g'
+ C=apache-archiva-1.3.4
+ REALPATH=/export/home/astine/apache-archiva-1.3.4
+ '[' -h /export/home/astine/apache-archiva-1.3.4 ']'
+ for C in '$TOKENS'
++ echo bin
++ sed -e 's;:; ;g'
+ C=bin
+ REALPATH=/export/home/astine/apache-archiva-1.3.4/bin
+ '[' -h /export/home/astine/apache-archiva-1.3.4/bin ']'
+ for C in '$TOKENS'
++ echo .
++ sed -e 's;:; ;g'
+ C=.
+ REALPATH=/export/home/astine/apache-archiva-1.3.4/bin/.
+ '[' -h /export/home/astine/apache-archiva-1.3.4/bin/. ']'
+ for C in '$TOKENS'
++ echo archiva
++ sed -e 's;:; ;g'
+ C=archiva
+ REALPATH=/export/home/astine/apache-archiva-1.3.4/bin/./archiva
+ '[' -h /export/home/astine/apache-archiva-1.3.4/bin/./archiva ']'
+ '[' /export/home/astine/apache-archiva-1.3.4/bin/./archiva = /export/home/astine/apache-archiva-1.3.4/bin/./archiva ']'
+ CHANGED=
+ '[' X '!=' X ']'
++ dirname /export/home/astine/apache-archiva-1.3.4/bin/./archiva
+ cd /export/home/astine/apache-archiva-1.3.4/bin/.
++ pwd
+ REALDIR=/export/home/astine/apache-archiva-1.3.4/bin
++ echo ../logs
++ cut -c1,1
+ FIRST_CHAR=.
+ '[' . '!=' / ']'
+ PIDDIR=/export/home/astine/apache-archiva-1.3.4/bin/../logs
++ echo ./wrapper
++ cut -c1,1
+ FIRST_CHAR=.
+ '[' . '!=' / ']'
+ WRAPPER_CMD=/export/home/astine/apache-archiva-1.3.4/bin/./wrapper
++ echo ../conf/wrapper.conf
++ cut -c1,1
+ FIRST_CHAR=.
+ '[' . '!=' / ']'
+ WRAPPER_CONF=/export/home/astine/apache-archiva-1.3.4/bin/../conf/wrapper.conf
+ ANCHORFILE=/export/home/astine/apache-archiva-1.3.4/bin/../logs/archiva.anchor
+ PIDFILE=/export/home/astine/apache-archiva-1.3.4/bin/../logs/archiva.pid
+ LOCKDIR=/var/lock/subsys
+ LOCKFILE=/var/lock/subsys/archiva
+ pid=
+ PSEXE=/usr/bin/ps
+ '[' '!' -x /usr/bin/ps ']'
++ uname -s
++ tr '[:upper:]' '[:lower:]'
++ tr -d '[:blank:]'
Bad string
Bad string
+ DIST_OS=
+ case ""$DIST_OS"" in
++ uname -p
++ tr -d '[:blank:]'
++ tr '[:upper:]' '[:lower:]'
Bad string
Bad string
+ DIST_ARCH=
+ '[' '' = unknown ']'
+ case ""$DIST_ARCH"" in
+ WRAPPER_TEST_CMD=/export/home/astine/apache-archiva-1.3.4/bin/./wrapper---32
+ '[' -x /export/home/astine/apache-archiva-1.3.4/bin/./wrapper---32 ']'
+ '[' '' = macosx ']'
+ WRAPPER_TEST_CMD=/export/home/astine/apache-archiva-1.3.4/bin/./wrapper---64
+ '[' -x /export/home/astine/apache-archiva-1.3.4/bin/./wrapper---64 ']'
+ '[' '!' -x /export/home/astine/apache-archiva-1.3.4/bin/./wrapper ']'
+ echo 'Unable to locate any of the following binaries:'
Unable to locate any of the following binaries:
+ outputFile /export/home/astine/apache-archiva-1.3.4/bin/./wrapper---32
+ '[' -f /export/home/astine/apache-archiva-1.3.4/bin/./wrapper---32 ']'
+ echo '  /export/home/astine/apache-archiva-1.3.4/bin/./wrapper---32'
  /export/home/astine/apache-archiva-1.3.4/bin/./wrapper---32
+ outputFile /export/home/astine/apache-archiva-1.3.4/bin/./wrapper---64
+ '[' -f /export/home/astine/apache-archiva-1.3.4/bin/./wrapper---64 ']'
+ echo '  /export/home/astine/apache-archiva-1.3.4/bin/./wrapper---64'
  /export/home/astine/apache-archiva-1.3.4/bin/./wrapper---64
+ outputFile /export/home/astine/apache-archiva-1.3.4/bin/./wrapper
+ '[' -f /export/home/astine/apache-archiva-1.3.4/bin/./wrapper ']'
+ echo '  /export/home/astine/apache-archiva-1.3.4/bin/./wrapper'
  /export/home/astine/apache-archiva-1.3.4/bin/./wrapper
+ exit 1
"
MRM-1467,astine,Andrew Stine,2011-03-31T21:10:14.858Z,2011-03-31T21:10:14.858Z,"FYI, I'm having a similar problem on Linux machines (I've tried two.)

Running it on linux produces a similar output:
  /home/illuminati/apache-archiva-1.3.4/bin/./wrapper-linux-intel(r)core(tm)2cpu4300@1.80ghz-32
  /home/illuminati/apache-archiva-1.3.4/bin/./wrapper-linux-intel(r)core(tm)2cpu4300@1.80ghz-64
  /home/illuminati/apache-archiva-1.3.4/bin/./wrapper

This leads me to believe that the problem is on my end, but I can't figure what I'm doing wrong.
"
MRM-1467,brettporter,Brett Porter,2011-04-01T05:00:33.939Z,2011-04-01T05:00:33.939Z,"I haven't seen anyone else report these, though I can't see how you'd have misconfigured it. On Solaris, it looks like the 'tr' command is the one not working, on Linux I'm not sure why uname would do that.

You could workaround it by editing the archiva shell script to set the correct WRAPPER_CMD."
MRM-1467,astine,Andrew Stine,2011-04-07T08:47:55.849Z,2011-04-07T08:47:55.849Z,"I've isolated the problem to an issue with the solaris version of tr.

TheIssue can be solved by using a different version of tr on solaris:

http://binarycrusader.blogspot.com/2005/04/solaris-10-yet-another-development-tip.html"
MRM-1467,brettporter,Brett Porter,2011-04-07T22:49:19.316Z,2011-04-07T22:49:19.316Z,"great! 

We should just need to patch the install docs then.

how about the linux based issue? resolved too?"
MRM-1467,astine,Andrew Stine,2011-04-07T22:56:19.1Z,2011-04-07T22:56:19.1Z,"On linux the problem is that 'uname -p' is returning values that the 'archiva' script isn't anticipating. It might be a system specific thing I'm not sure, but I worked around it by having it fallthrough to 'uname -m' when 'uname -p' returns an unexpected value. "
MRM-1467,oching,Maria Odea Ching,2011-05-16T00:30:59.98Z,2011-05-16T00:30:59.98Z,Updated installation docs using standalone bundle with the issue on {{tr}} version in Solaris in 1.3.x branch [-r1103608|http://svn.apache.org/viewvc?rev=1103608&view=rev].
MRM-1467,oching,Maria Odea Ching,2011-05-16T00:49:15.419Z,2011-05-16T00:49:15.419Z,Changes merged to trunk in [-r1103611|http://svn.apache.org/viewvc?rev=1103611&view=rev].
MRM-1428,jbzdak,Jacek Bzdak,2010-11-16T07:50:18.302Z,2010-11-16T07:50:18.302Z,Also: after restart of apache2 it suddenly starts working. 
MRM-1428,dschettl,Denis Schettl,2010-11-16T23:50:42.155Z,2010-11-16T23:50:42.155Z,"I'm using Archiva with the following environment:
Ubuntu 8.04, Sun Java 6 jdk, Tomcat as Frontent, App-Server is Glassfish 3.0.1

I have the same error, but only, if I deploy many files to archiva in a short time. Observing the process of Archiva (lsof -u archiva | wc -l) I detecting, that with every deployment the number of open files are increasing. When I stop deployment and wait some time, the amount of open files are decreasing. When I start deployment again, the amount of open files are increasing again. After finsihing my deployment and waiting some time, the amount of open files are decreasing again until some level. This level is inkreasing over the time.

In my opinion ist this a problem of Archiva (and not Apache) with some post-deployment-processings. I you restart Apache this takes some time and archiva can do some processing and the amount of open files have time to decrease.

My workarouds for this problems are:
1) Inkrease the number of open files for this process.
2) Have anytime some CPU- and IO-buffer-reserves on your archiva computer. Never run archiva on a computer with high load.
3) Restart the archiva-process every week via job to reduce the amount of open files.

I hope I can help you with this informations.
"
MRM-1428,brettporter,Brett Porter,2010-11-18T23:07:45.594Z,2010-11-18T23:07:45.594Z,"Denis, that's MRM-1097. That seems a stretch to say it's related to the trace Jacek got.

Jacek, is there any other information?"
MRM-1428,jbzdak,Jacek Bzdak,2010-11-19T05:19:56.071Z,2010-11-19T05:19:56.071Z,"Well, I have no idea why I get this error. I recently installed Archiva on another server and the problem persists. 

Here are system details:

* Both servers are virtual machines (one is linode, one is custom proxmox instance). 
* Both run ubuntu server. 
* Both run on tomcat6 installed from ubuntu package 
** One is run as root. 
** One is run as user instance created with tomcat6-user-instance
* Both use MySQL 5.1 
* Both are behind apache (connected using mod-jk) 


I'll attach some logs. 

PS. Tell me if you need any specific info! 

"
MRM-1428,jbzdak,Jacek Bzdak,2010-11-19T05:22:15.476Z,2010-11-19T05:22:15.476Z,Logs from day the error occoured
MRM-1428,brettporter,Brett Porter,2010-12-02T17:21:34.439Z,2010-12-02T17:21:34.439Z,"will try having a look for the next patch release, depending on how easily it can be reproduced"
MRM-1428,brettporter,Brett Porter,2010-12-09T08:56:37.76Z,2010-12-09T08:56:37.76Z,"pushing back a bit, as we already locked down Redback for the 1.3.3. release."
MRM-1428,lucadistefano,Luca Di Stefano,2010-12-15T04:22:25.099Z,2010-12-15T04:22:25.099Z,"same problem as in continuum

2010-12-15 11:12:22,085 [TP-Processor19] ERROR org.apache.xmlrpc.server.XmlRpcStreamServer  - execute: Error while performing request
org.codehaus.plexus.redback.users.UserManagerException: Unable to get object 'org.codehaus.plexus.redback.users.jdo.JdoUser', id 'admin', fetch-group 'null' from jdo store.
	at org.codehaus.plexus.redback.users.jdo.JdoUserManager.getObjectById(JdoUserManager.java:417)
	at org.codehaus.plexus.redback.users.jdo.JdoUserManager.findUser(JdoUserManager.java:339)
	at org.codehaus.plexus.redback.authentication.users.UserManagerAuthenticator.authenticate(UserManagerAuthenticator.java:84)
	at org.codehaus.plexus.redback.authentication.DefaultAuthenticationManager.authenticate(DefaultAuthenticationManager.java:84)
	at org.codehaus.plexus.redback.system.DefaultSecuritySystem.authenticate(DefaultSecuritySystem.java:94)
	at org.apache.maven.continuum.xmlrpc.server.ContinuumXmlRpcServlet$1.isAuthorized(ContinuumXmlRpcServlet.java:157)
	at org.apache.maven.continuum.xmlrpc.server.ContinuumXmlRpcMetaDataHandler.execute(ContinuumXmlRpcMetaDataHandler.java:102)
	at org.apache.xmlrpc.server.XmlRpcServerWorker.execute(XmlRpcServerWorker.java:43)
	at org.apache.xmlrpc.server.XmlRpcServer.execute(XmlRpcServer.java:83)
	at org.apache.xmlrpc.server.XmlRpcStreamServer.execute(XmlRpcStreamServer.java:191)
	at org.apache.xmlrpc.webserver.XmlRpcServletServer.execute(XmlRpcServletServer.java:104)
	at org.apache.maven.continuum.xmlrpc.server.ContinuumXmlRpcServlet.doPost(ContinuumXmlRpcServlet.java:190)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
	at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:416)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
	at com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:118)
	at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
	at org.apache.struts2.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:99)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
	at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:200)
	at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:283)
	at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:773)
	at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:703)
	at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:895)
	at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
	at java.lang.Thread.run(Thread.java:619)
"
MRM-1428,joehni,Joerg Schaible,2011-03-01T18:14:13.732Z,2011-03-01T18:14:13.732Z,"Same here on a Gentoo/AMD64 system, Tomcat 6, Sun JDK 1.6, MySQL 5.1.51. After running two days idle (no access), Archiva no longer responds.

archiva-audit.log (no entries before and no log file for the days before):
{noformat}
2011-03-01 22:06:23 internal guest 192.168.13.27 ""org/apache/maven/scm/maven-scm-api/1.3/maven-scm-api-1.3.pom"" ""Created File (proxied)""
2011-03-01 22:06:24 internal guest 192.168.13.27 ""org/apache/maven/scm/maven-scm/1.3/maven-scm-1.3.pom"" ""Created File (proxied)""
{noformat}

Tomcat restart then. Archiva.log show last successful database task at 22:00.

localhost.log with the error:
{noformat}
Mar 1, 2011 10:06:20 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet RepositoryServlet threw exception
org.codehaus.plexus.redback.users.UserManagerException: Unable to get object 'org.codehaus.plexus.redback.users.jdo.JdoUser', id 'guest', fetch-group 'null' from jdo store.
        at org.codehaus.plexus.redback.users.jdo.JdoUserManager.getObjectById(JdoUserManager.java:417)
        at org.codehaus.plexus.redback.users.jdo.JdoUserManager.findUser(JdoUserManager.java:339)
        at org.codehaus.plexus.redback.users.AbstractUserManager.getGuestUser(AbstractUserManager.java:114)
        at org.codehaus.plexus.redback.users.cached.CachedUserManager.getGuestUser(CachedUserManager.java:148)
        at org.codehaus.plexus.redback.users.configurable.ConfigurableUserManager.getGuestUser(ConfigurableUserManager.java:128)
        at org.codehaus.plexus.redback.authorization.rbac.RbacAuthorizer.isAuthorized(RbacAuthorizer.java:100)
        at org.codehaus.plexus.redback.system.DefaultSecuritySystem.authorize(DefaultSecuritySystem.java:167)
        at org.apache.maven.archiva.security.ArchivaServletAuthenticator.isAuthorized(ArchivaServletAuthenticator.java:70)
        at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.isAuthorized(ArchivaDavResourceFactory.java:836)
        at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.processRepository(ArchivaDavResourceFactory.java:428)
        at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.createResource(ArchivaDavResourceFactory.java:246)
        at org.apache.maven.archiva.webdav.RepositoryServlet.service(RepositoryServlet.java:117)
        at javax.servlet.http.HttpServlet.service(Unknown Source)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
        at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:416)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
        at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:39)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
        at org.apache.struts2.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:99)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)
        at org.apache.catalina.core.StandardWrapperValve.invoke(Unknown Source)
        at org.apache.catalina.core.StandardContextValve.invoke(Unknown Source)
        at org.apache.catalina.core.StandardHostValve.invoke(Unknown Source)
        at org.apache.catalina.valves.ErrorReportValve.invoke(Unknown Source)
        at org.apache.catalina.core.StandardEngineValve.invoke(Unknown Source)
        at org.apache.catalina.connector.CoyoteAdapter.service(Unknown Source)
        at org.apache.coyote.http11.Http11Processor.process(Unknown Source)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Unknown Source)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(Unknown Source)
        at java.lang.Thread.run(Thread.java:662)
Mar 1, 2011 10:07:06 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Mar 1, 2011 10:09:41 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
{noformat}"
MRM-1428,brettporter,Brett Porter,2011-03-03T00:01:45.53Z,2011-03-03T00:01:45.53Z,thanks for the extra verification
MRM-1428,scarcher2,Scott Archer,2011-04-29T08:32:05.278Z,2011-04-29T08:32:05.278Z,"I'm having this same problem. I'm running in a similar configuration as Jack.

Archiva 1.3.4

Running on

Vmware virtual machine
Ubuntu 7.10
Mysql 5.0.45
Tomcat 6.0.18 (behind mod_jk and apache)
jdk 1.6.0_07
"
MRM-1428,scarcher2,Scott Archer,2011-05-02T16:54:16.424Z,2011-05-02T16:54:16.424Z,I was running an older version of the mysql driver. When I upgraded the driver this problem seems to have gone away. I'll let you know for sure in a few more days.
MRM-1428,scarcher2,Scott Archer,2011-05-09T12:46:06.917Z,2011-05-09T12:46:06.917Z,The updated mysql Driver did not fix my problem. Still seeing the same issue.
MRM-1428,scarcher2,Scott Archer,2011-05-10T08:37:34.426Z,2011-05-10T08:37:34.426Z,"I installed on a new VM (Ubuntu 11.04) with Mysql 5.1, the latest jdbc driver, latest java jdk, tomcat 7 and I'm still having the same problem."
MRM-1428,joehni,Joerg Schaible,2011-08-01T12:13:56.706Z,2011-08-01T12:13:56.706Z,"Just for the records, it seems related to a behavior of the MySQL server: http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_wait_timeout
It closes by default settings a connection automatically after 8h of no activity. Not investigated yet for a solution."
MRM-1428,olamy,Olivier Lamy (*$^%`),2014-02-25T19:31:47.923Z,2014-02-25T19:31:47.923Z,no more issues fix for 1.3.x except security. Please use 2.x 
MRM-1496,brettporter,Brett Porter,2011-08-08T20:12:35.88Z,2011-08-08T20:12:35.88Z,"Yes, this is a result of the way we're using the JDK HTTP libraries - it's similar to WAGON-314.

You should be able to avoid the corruption by ensuring the checksum policy is set to ""fail""."
MRM-1496,brettporter,Brett Porter,2011-09-12T08:18:55.456Z,2011-09-12T08:18:55.456Z,I think this is fixed by updating the libraries - to be re-tested in 1.4-M1
MRM-1496,olamy,Olivier Lamy (*$^%`),2011-09-28T05:03:44.432Z,2011-09-28T05:03:44.432Z,dupe of MRM-979 ?
MRM-1496,olamy,Olivier Lamy (*$^%`),2011-09-30T04:46:20.305Z,2011-09-30T04:46:20.305Z,unit test added
MRM-1412,jieryn,jieryn,2010-07-28T22:00:57.555Z,2010-07-28T22:00:57.555Z,"Here is my JVM information:

{code}$ java -version
java version ""1.6.0""
Java(TM) SE Runtime Environment (build pxa6460sr8-20100409_01(SR8))
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Linux amd64-64 jvmxa6460sr8-20100401_55940 (JIT enabled, AOT enabled)
J9VM - 20100401_055940
JIT  - r9_20100401_15339
GC   - 20100308_AA)
JCL  - 20100408_01
{code}"
MRM-1412,jieryn,jieryn,2010-07-28T22:02:31.163Z,2010-07-28T22:02:31.163Z,"Ooops, forgot to say - as soon as I changed my JVM from IBM to Sun (see below), everything started working as expected.

{code}$ java -version
java version ""1.6.0_21""
Java(TM) SE Runtime Environment (build 1.6.0_21-b06)
Java HotSpot(TM) 64-Bit Server VM (build 17.0-b16, mixed mode)
{code}"
MRM-1412,brettporter,Brett Porter,2010-08-06T00:59:38.404Z,2010-08-06T00:59:38.404Z,see also http://old.nabble.com/Problem-setting-up-Archiva-on-Tomcat-6.X-td27771077.html
MRM-1412,jieryn,jieryn,2010-12-07T09:11:16.183Z,2010-12-07T09:11:16.183Z,"I was able to get Apache Archiva/Continuum to work with IBM JDK/JRE 1.5

{code}java full version ""J2RE 1.5.0 IBM Linux build pxa64devifx-20101008a (SR12 FP2 )""
{code}

which makes me believe this is a JDK-6 issue. I have opened a PMR with IBM Support and will hopefully be able to provide an update here soon. Thanks!"
MRM-1412,jieryn,jieryn,2011-02-16T10:52:57.612Z,2011-02-16T10:52:57.612Z,"I raised the issue with IBM's Java support team. Here is their assessment:

{code}I have been able to reproduce the problem and have determined the cause.

As mentioned by xxxx, the XML file components.xml is loaded during
startup of the application. It is transformed by an XSL stylesheet, and
with IBM Java 6, after the transformation many of the elements have the
attribute xmlns="""". (The examples above show xmlns=""null"", but in the
DOM tree outputted by the XSLT processor in IBM Java 6, the elements
have the attribute xmlns=""""... presumably the consumer of the DOM tree
treats this empty value as null since beans deal with Java objects.)

Although the output of this transformation in IBM Java 6 differs from
that of IBM Java 5 and other Java vendors, it is correct. The xmlns=""""
attribute is a special kind of attribute called a default namespace
declaration. The elements from components.xml are not in a namespace.
When they are copied to the output, they appear under the spring:beans
element, which carries the default namespace declaration
xmlns=""http://plexus.codehaus.org/spring"". According to the rules for
XML namespaces, this namespace applies to the copied elements from
components.xml, but that is incorrect because those elements were not in
a namespace and should not be in a namespace as a result of copying.
Thus, each element must have a default namespace declaration xmlns="""" to
show that it is not in a namespace.

The problem introduced by this change seems to indicate that the code
that sets the bean properties is not namespace-aware; any
namespace-aware process should recognize any attribute beginning with
xmlns as a namespace declaration. So this could be viewed as a bug in
that code.

The problem could also be fixed via changes to the Plexus stylesheet
that does the transformation. The stylesheet is
org/codehaus/plexus/spring/PlexusBeanDefinitionDocumentReader.xsl and is
located inside the jar at
apps/archiva/WEB-INF/lib/plexus-spring-1.2.jar. Because it uses a
default namespace declaration, the xmlns="""" declarations are required.
The stylesheet could be modified to bind
""http://plexus.codehaus.org/spring"" to a prefix instead and to use that
prefix on all the literal result elements in the stylesheet (component,
requirment, and configuration). Note that with this change, these outer
container elements would remain in the namespace, but the copied
elements from component.xml would not be in a namespace. This is
different from what the old incorrect output implies, but since at least
some parts of the process that follows are not namespace-aware, it may
be acceptable (when I tried this, the application seemed to start
correctly, but I can't rule out that there may be other
namespace-sensitive uses of the output). Otherwise, if even the copied
elements should be in the namespace, then they must be constructed under
the namespace instead of copied.

To summarize, the output of the XSLT processor in Java 6 is correct. The
problem lies in the code that sets the bean properties (the Spring
framework, perhaps?) but alternatively could be avoided by making
changes to a stylesheet used by Plexus. I realize this may seem
confusing to anyone not familiar with XML namespaces, so please do not
hesitate to ask if you have further questions about this assessment.
{code}"
MRM-1412,jkwuc89,Keith Wedinger,2011-04-29T09:53:38.779Z,2011-04-29T09:53:38.779Z,"This issue still persists inside Archiva 1.3.4.  I am using the following IBM JDK on Ubuntu 10.10:
java version ""1.6.0""
Java(TM) SE Runtime Environment (build pxa6460sr8fp1-20100624_01(SR8 FP1))
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Linux amd64-64 jvmxa6460sr8ifx-20100609_59383 (JIT enabled, AOT enabled)
J9VM - 20100609_059383
JIT  - r9_20100401_15339ifx2
GC   - 20100308_AA)
JCL  - 20100624_01
"
MRM-1412,ChrisGWarp,Chris Graham,2011-08-23T02:21:29.917Z,2011-08-23T02:21:29.917Z,"Ditto for:

[root@rhel55 bin]# java -version
java version ""1.6.0""
Java(TM) SE Runtime Environment (build pxi3260sr9fp2-20110625_01(SR9 FP2))
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Linux x86-32 jvmxi3260sr9-20110624_85526 (JIT enabled, AOT enabled)
J9VM - 20110624_085526
JIT  - r9_20101028_17488ifx17
GC   - 20101027_AA)
JCL  - 20110530_01

"
MRM-1412,brettporter,Brett Porter,2011-09-12T09:43:03.456Z,2011-09-12T09:43:03.456Z,"to re-test on trunk, since I think we've removed this"
MRM-1412,jieryn,jieryn,2011-09-12T10:10:45.893Z,2011-09-12T10:10:45.893Z,"I used archiva-jetty-1.4-20110911.180143-19-bin.tar.gz from http://vmbuild.apache.org/archiva/browse/org.apache.archiva/archiva-jetty/1.4-SNAPSHOT and 

{code}$ java -version
java version ""1.6.0""
Java(TM) SE Runtime Environment (build pxa6460sr9fp2-20110625_01(SR9 FP2))
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Linux amd64-64 jvmxa6460sr9-20110624_85526 (JIT enabled, AOT enabled)
J9VM - 20110624_085526
JIT  - r9_20101028_17488ifx17
GC   - 20101027_AA)
JCL  - 20110530_01
{code}

And after adding some missing dependencies for velocity and velocity-tools, I was able to get Archiva launched and working! I think this fixes the original defect reported here. I am very excited to look forward at 1.4-M1. Thank you!!
"
MRM-1429,brettporter,Brett Porter,2010-11-18T23:16:28.316Z,2010-11-18T23:16:28.316Z,"I know it's not intuitive, but does this work if you got to the ""Repository Scanning"" page, and add \*\*/\*.xml to the list of artifacts?"
MRM-1429,dbrosius,Dave Brosius,2010-11-19T01:42:35.815Z,2010-11-19T01:42:35.815Z,"I tried that as well, doesn't seem to do anything"
MRM-1429,brettporter,Brett Porter,2010-11-21T18:36:50.481Z,2010-11-21T18:36:50.481Z,"I just noticed that due to the wiki rendering the above comment previously looked wrong. Can you confirm you tested it with the two asterisks at the front?

I'd need to test this otherwise, I can't see why it wouldn't work."
MRM-1429,dbrosius,Dave Brosius,2010-11-21T19:59:48.687Z,2010-11-21T19:59:48.687Z,i used asterick asterick forward-slash asterick dot xml
MRM-1429,brettporter,Brett Porter,2010-12-02T17:23:58.703Z,2010-12-02T17:23:58.703Z,"will try and take a closer look at this. If you come up with more info (or a patch!), that'd be helpful."
MRM-1429,brettporter,Brett Porter,2010-12-08T23:41:54.487Z,2010-12-08T23:41:54.487Z,I was able to reproduce on the steps you've used
MRM-1429,brettporter,Brett Porter,2010-12-09T08:52:31.313Z,2010-12-09T08:52:31.313Z,"ok, I'll need to explain what's going on here.

The proxy is failing due to missing checksums on the 8080 repository, and the connector being set to fail if that's the case.

The reason the checksums are missing is because the UploadAction relies on the metadata consumer to correct them. However that only does so for files listed in ""artifacts"" on the scanning page, which on 8080 does not include XML. So the previous tip was correct, just on the wrong server and at the wrong point in time (before upload).

I'll file this as a new issue"
MRM-1429,dbrosius,Dave Brosius,2010-12-09T20:10:52.692Z,2010-12-09T20:10:52.692Z,"Super, thanks alot, i'll give that a try."
MRM-1433,brettporter,Brett Porter,2010-11-28T18:53:04.383Z,2010-11-28T18:53:04.383Z,this was only introduced in a recent commit on trunk
MRM-1433,brettporter,Brett Porter,2010-11-28T18:53:43.287Z,2010-11-28T18:53:43.287Z,"applied, thanks"
MRM-1427,wsmoak,Wendy Smoak,2010-11-13T08:32:25.267Z,2010-11-13T08:32:25.267Z,Long ago thread that might be relevant http://www.mail-archive.com/dev@archiva.apache.org/msg00482.html
MRM-1427,smsiebe,Steve Siebert,2010-11-13T09:15:42.837Z,2010-11-13T09:15:42.837Z,"Great info, thanks Wendy.  I did a search on Archivas' issue tracker but didn't find anything significant.  

Do you know, off the top of your head, what happened with this effort?  Looks like the thread died shortly after it was created.  Would be nice to know if it ran into any particular snags, although that was a long time ago in archiva history.

Thanks!

S"
MRM-1427,brettporter,Brett Porter,2010-11-18T23:10:58.141Z,2010-11-18T23:10:58.141Z,I think the effort stalled for other reasons. Certainly the changes we've made to the repository API recently were inline with this need. I'm happy to help on dev@ if you do hit any snags and want to try implementing this.
MRM-1427,john.dunlap,John Dunlap,2010-12-15T08:25:35.814Z,2010-12-15T08:25:35.814Z,I would also add that robust and comprehensive bundle dependency management is critical for avoiding bundle dependency hell. Linux struggled with the same problem prior to the yum/apt package managers. Java struggled with the same thing prior to Maven. Once OSGI figures this out it will be a truly awesome platform.
MRM-1427,olamy,Olivier Lamy (*$^%`),2011-08-08T03:32:40.977Z,2011-08-08T03:32:40.977Z,see how we can reuse ace libs and/or Felix BundleRepository
MRM-1427,jbonofre,Jean-Baptiste Onofr,2011-11-13T08:19:26.669Z,2011-11-13T08:19:26.669Z,"Felix BundleRepository has been leverage in Karaf Cave to provide storage support.

I started to work on the OBR support in Archiva. I will submit the patch soon.

@Olivier: do you mind to assign this Jira to me ?

Thanks
Regards
JB"
MRM-1427,olamy,Olivier Lamy (*$^%`),2011-11-13T11:47:17.148Z,2011-11-13T11:47:17.148Z,#NAME?
MRM-1427,damjan,Damjan Jovanovic,2013-06-05T03:49:26.65Z,2013-06-05T03:49:26.65Z,#NAME?
MRM-1427,msqr,Matt Magoffin,2014-05-07T23:59:03.741Z,2014-05-07T23:59:03.741Z,"Hello, I have been very interested in the ability of Archiva to at least generate OBR metadata from the repository. To that end, I have written a very basic Consumer that does just that. It works enough to suit my own needs, perhaps others would find it useful, too.

The code is available here:

https://github.com/SolarNetwork/solarnetwork-build/tree/develop/archiva-obr-plugin

I'm new to Archiva in general, I apologize if the code does anything in not quite right way."
MRM-1423,wsmoak,Wendy Smoak,2010-09-24T17:37:15.498Z,2010-09-24T17:37:15.498Z,"I don't think Archiva ""remembers"" where it proxied something from.

I am also not sure that configuration changes should be retroactive.

That is, once you blacklist something, Archiva will not do further downloads, but it won't go back and remove what it has already downloaded.

If you determine that there are 'bad' artifacts coming from a certain repo you can use the delete feature to get rid of them."
MRM-1423,pkwarren,Philip K. Warren,2010-09-24T17:42:30.905Z,2010-09-24T17:42:30.905Z,"The metadata files have the ID of the proxy repository in the name (maven-metadata-<id>.xml). Then all of the proxied repository files metadata is merged into one metadata file. I agree that it would be difficult however to remove artifacts, but it shouldn't be as difficult to regenerate the metadata files."
MRM-1423,wsmoak,Wendy Smoak,2010-09-24T17:53:14.945Z,2010-09-24T17:53:14.945Z,"Assuming Archiva does 'remember' where it got things from, what would be the purpose of just removing an item from the metadata?

(At a guess:  are you thinking this would make the artifact unavailable for download?)

I'm wondering if there is an underlying problem here that might be solved some other way.



"
MRM-1423,pkwarren,Philip K. Warren,2010-09-24T18:12:47.491Z,2010-09-24T18:12:47.491Z,"I was thinking that this would no longer provide an artifact which was hosted on the blacklisted portion of the proxy repository.

If there is a better way to handle this sort of issue (removing a feature manually), then I'm ok with that approach. I just thought it would make more sense if you wouldn't have to go through and manually clean up the repository if we had enough information to ""purge"" the blacklisted portions of the repository automatically."
MRM-1423,wsmoak,Wendy Smoak,2010-09-24T18:24:50.497Z,2010-09-24T18:24:50.497Z,"Would a better summary be, ""Blacklisting doesn't remove artifacts that were previously proxied"" ?

It sounds like that's what you want.  

(Removing something from the metadata won't prevent someone from accessing the artifact.  It might not show up in browse or search, and it would mess up plugin and snapshot retrieval, but normal released artifacts would still work fine as far as 'mvn install' goes.)"
MRM-1423,pkwarren,Philip K. Warren,2010-09-29T07:37:51.181Z,2010-09-29T07:37:51.181Z,Yes that is a better summary for what I was looking for.
MRM-1423,brettporter,Brett Porter,2010-10-07T19:59:30.129Z,2010-10-07T19:59:30.129Z,"I'm putting this in as a new feature. I don't think blacklisting is intended to affect the managed repository, just the proxy connection - but I agree there should be a better way to connect these two behaviours."
MRM-1465,wsmoak,Wendy Smoak,2011-03-28T08:58:01.246Z,2011-03-28T08:58:01.246Z,"Did you build from the tag or the source distribution zip?

Are you able to build the latest code in svn?  Or in your case, probably the 1.3.x branch:  http://svn.apache.org/repos/asf/archiva/branches/archiva-1.3.x/


"
MRM-1465,lucien@wellernet.ch,Lucien Weller,2011-03-28T09:55:23.346Z,2011-03-28T09:55:23.346Z,"1.3.4-Source-Zip, Checkout from 1.3.4-Tag and Branch-1.3.x all lead to the same problem!"
MRM-1465,oching,Maria Odea Ching,2011-05-12T01:56:42.683Z,2011-05-12T01:56:42.683Z,"For 1.3.x branch, I'm able to build it in MacOSX using Maven 3.0.3. I'm trying it in a Windows VM now if I'll get the same build failure as yours.."
MRM-1465,oching,Maria Odea Ching,2011-05-12T03:33:37.26Z,2011-05-12T03:33:37.26Z,"Still cannot reproduce the build failure above on Windows (XP). I used Maven 3.0.3 and Java version is 1.5.0_09. In my local repository, only org.codehaus.plexus:plexus-component-metadata:1.0-beta-3.0.5 exists and that was the version used to generate the plexus component.xml files. Build was still successful. 

Maybe the org.codehaus.plexus:plexus-component-metadata:1.0-beta-3.0.5 artifact in your local repository was just corrupted? "
MRM-1465,oching,Maria Odea Ching,2011-05-13T03:15:33.409Z,2011-05-13T03:15:33.409Z,Closing this isssue as cannot reproduce. Please re-open if it still persists.. Thanks!
MRM-1419,brettporter,Brett Porter,2010-09-02T10:18:52.663Z,2010-09-02T10:18:52.663Z,"we're due to review the use of the indexer in the next release, so hopefully we can pick this up at the time.

Do you have some data on how many artifacts you are processing through the indexer and how often?"
MRM-1419,andreyevbr,Andreyev Dias de Melo,2010-09-02T11:31:15.728Z,2010-09-02T11:31:15.728Z,"We have 5253 jars, 12752 poms. Repositories is re-scanned in {{0 0 * * *}} or {{0 0 0/2 * *}}.
"
MRM-1419,gnustavo,Gustavo Chaves,2010-09-02T14:04:10.179Z,2010-09-02T14:04:10.179Z,"I'm attaching the scan.log.gz file which was extracted from the archiva logs with this command:

{noformat}
grep -A16 'Repository Dir ' archiva.log >scan.log
{noformat}

In it you can see how many times the scan process was performed in the last days."
MRM-1419,gnustavo,Gustavo Chaves,2010-09-03T09:36:55.158Z,2010-09-03T09:36:55.158Z,I'm attaching [^archiva-dsso.csv.gz]. It contains a record of the number of those strange open file descriptors that I captured each 10 minutes since yesterday.
MRM-1419,andreyevbr,Andreyev Dias de Melo,2010-10-05T12:30:09.532Z,2010-10-05T12:30:09.532Z,"This problem looks like this http://www.mail-archive.com/java-user@lucene.apache.org/msg29216.html.

I'll try to upgrade only lucene's jar to an early version."
MRM-1419,brettporter,Brett Porter,2010-12-03T08:15:15.117Z,2010-12-03T08:15:15.117Z,"in the end I think we identified that the other problem was also related to the indexing, which should be fixed"
MRM-1411,brettporter,Brett Porter,2011-03-29T09:57:53.896Z,2011-03-29T09:57:53.896Z,"updated summary - this is a general problem when the POM is not read properly. This is most likely because the parent is missing from the repository, or some similar condition. We should be handling both:
- proxying missing artifacts
- proper error handling on the page

See also MRM-1340"
MRM-1411,oching,Maria Odea Ching,2011-06-10T01:19:37.223Z,2011-06-10T01:19:37.223Z,The {{Artifact Info}} in version browse is also empty.
MRM-1411,oching,Maria Odea Ching,2011-06-15T06:13:03.575Z,2011-06-15T06:13:03.575Z,"Fix committed in trunk [-r1135978|http://svn.apache.org/viewvc?rev=1135978&view=rev]:
* proxy parent POM if not found in the repo when building the effective POM when creating metadata (also applied the same in dependency tree builder). The parent POM is proxied/searched only from the remote repositories that has a proxy connector to the managed repository where the artifact is located. If the parent POM isn't found in any of the remote repositories, default values will be set for the groupId, artifactId and packaging of the MavenProjectFacet added to the metadata before it is returned (this is in Maven2RepositoryStorage).
* added unit tests
* moved out wagonfactory classes into separate module so it can be used by maven2-repository w/o depending on archiva-proxy module (as it introduces cyclic dependency)
"
MRM-1411,oching,Maria Odea Ching,2011-06-15T06:13:58.061Z,2011-06-15T06:13:58.061Z,"There's still a problem with SNAPSHOT artifacts, which I'll be working on next."
MRM-1411,oching,Maria Odea Ching,2011-06-16T08:15:52.198Z,2011-06-16T08:15:52.198Z,"Fix for SNAPSHOT artifacts committed to trunk in [-r1136424|http://svn.apache.org/viewvc?rev=1136424&view=rev]:
* for snapshot artifacts, get the timestamp and build number first from the artifact's {{maven-metadata.xml}} in the remote repo before proxying the actual parent pom
* added unit tests, removed checksums and other test files that are not necessarily used"
MRM-1438,oching,Maria Odea Ching,2010-11-29T20:46:20.701Z,2010-11-29T20:46:20.701Z,"Fixed in [-r1038518|http://svn.apache.org/viewvc?view=revision&revision=1038518]:
* upgrade to Redback 1.2.4 where this issue was fixed
* enable referrer check by default for security interceptor in Archiva"
MRM-1435,brettporter,Brett Porter,2010-11-28T18:42:43.993Z,2010-11-28T18:42:43.993Z,"applied, thanks!"
MRM-1493,brettporter,Brett Porter,2011-08-08T03:22:28.234Z,2011-08-08T03:22:28.234Z,"This is already done, and any bugs / remaining work has been captured in the 1.4-M1 and 1.4 version buckets..."
MRM-1436,brettporter,Brett Porter,2010-12-01T03:50:13.535Z,2010-12-01T03:50:13.535Z,"applied, thanks"
MRM-1487,olamy,Olivier Lamy (*$^%`),2011-08-10T03:37:24.428Z,2011-08-10T03:37:24.428Z,"So in jsp we have 
{code}
<select name=""connector.policies['releases']"" id=""policy_releases"" style=""width: 10em""> 
  <option value=""always"" selected=""selected"">always</option> 
  <option value=""hourly"">hourly</option> 
  <option value=""daily"">daily</option> 
  <option value=""once"">once</option> 
  <option value=""never"">never</option> 
</select> 
<select name=""connector.policies['propagate-errors']"" id=""policy_propagate-errors"" style=""width: 10em""> 
  <option value=""stop"">stop</option> 
  <option value=""queue error"">queue error</option> 
  <option value=""ignore"">ignore</option> 
</select> 
{code}
So the ones with ids containing ""-"" are not added anymore in Map :-(.
A struts issues with upgrading to 2.2.3
Any ideas from struts experts are welcome :-)"
MRM-1487,olamy,Olivier Lamy (*$^%`),2011-08-10T10:52:47.449Z,2011-08-10T10:52:47.449Z,fixed it looks acceptedParamsNames pattern has changed in struts so take this one with adding \\- to support -
MRM-1420,brettporter,Brett Porter,2010-10-07T19:48:33.329Z,2010-10-07T19:48:33.329Z,"this appears to be when an abnormally long indexing queue is in place. The work on upgrading the indexer might help, and a workaround is to minimize the amount of scanning, and the content scanned.

I'll attaching a temporary JSP file that can be used to inspect the state of the queues on a running server to see if that's the case for anyone hitting this issue. I'll look into making it a more permanent feature under the administration section in the future."
MRM-1420,brettporter,Brett Porter,2010-10-07T19:50:08.212Z,2010-10-07T19:50:08.212Z,"you can put the JSP in the root directory of the unpacked webapp. I haven't assessed the security implications, so this is for internal / temporary debugging purposes only!"
MRM-1420,brettporter,Brett Porter,2011-03-29T09:48:29.513Z,2011-03-29T09:48:29.513Z,dealt with in all the other 1.3.x performance fixes
MRM-1497,brettporter,Brett Porter,2011-08-08T20:09:31.146Z,2011-08-08T20:09:31.146Z,"I'd prefer that rather than a ""big bang"" change, we implement this as having an alternative that is not default, and work to pull the logic out of the struts actions / xmlrpc where needed to be in a single place.

When we feel the new UI is ""complete enough"" we can switch over - but I guess there'll have to be a call about some features we want to drop.

Would you agree?"
MRM-1497,wsmoak,Wendy Smoak,2011-08-08T20:56:11.668Z,2011-08-08T20:56:11.668Z,"How about some discussion on the dev list about what features we're looking for and what frameworks people are interested in working with, and then breaking this down into multiple issues with more specific descriptions?
"
MRM-1497,olamy,Olivier Lamy (*$^%`),2011-08-09T01:07:43.329Z,2011-08-09T01:07:43.329Z,"Wendy, we have started some threads on those points in ML ( [http://markmail.org/message/4uuenvbpfcsfj2mu] and others).

@Brett yup sound reasonnable."
MRM-1497,olamy,Olivier Lamy (*$^%`),2012-02-10T11:47:10.325Z,2012-02-10T11:47:10.325Z,"for the record, jobs has started in trunk in an optional module called archiva-webapp-js.
Have a look at README file to test it."
MRM-1497,skygolanur,Eric Barboni,2012-03-02T16:24:25.946Z,2012-03-02T16:24:25.946Z,"Hello I am trying the new UI and commenting there because dev archiva not want me anymore :(
 
Was complicated to understand that I have to create admin account :D.

If it possible may I edit https://cwiki.apache.org/confluence/display/ARCHIVA/New+UI+framework to adds ideas, user tasks and so on?

"
MRM-1497,olamy,Olivier Lamy (*$^%`),2012-05-22T09:00:25.262Z,2012-05-22T09:00:25.262Z,test
MRM-1400,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-28T21:10:15.233Z,2010-07-28T21:10:15.233Z,"merging maven meta data in done.
Thanks."
MRM-1400,oching,Maria Odea Ching,2010-08-01T00:10:46.603Z,2010-08-01T00:10:46.603Z,Patch committed tro MRM-980-branch [-r981152|http://svn.apache.org/viewvc?rev=981152&view=rev]. Thanks Eshan!
MRM-1418,brettporter,Brett Porter,2010-08-23T18:21:53.462Z,2010-08-23T18:21:53.462Z,Is the database that you are using (in data/databases/archiva by default) intact? Are you able to query this with an SQL tool and check if there is still data in it?
MRM-1418,mparra,Mario Parra,2010-08-23T18:41:02.797Z,2010-08-23T18:41:02.797Z,"I'm using MySQL 5.0.45.

I just run the repository scan and see that the table ""ARCHIVA_ARTIFACT"" grew from 16KB to 1.5MB and the index restored again.

What could be the cause of this table to be cleaned?

Thank you very much!"
MRM-1418,brettporter,Brett Porter,2010-08-23T19:16:56.877Z,2010-08-23T19:16:56.877Z,"the only reason it would be cleaned is:
- if Archiva scans and finds the artifacts no longer on the disk
- if Archiva is configured to purge the repository of certain snapshots and deletes them from both

In both cases, this would correlate to the files not being on the disk, and not coming back afterwards. It sounds more like an external process affecting the MySQL database - has any such thing been set up? Do you have any logging on the database?

If you continue to suspect Archiva, you can change log4j.xml to increase debugging around the RDBMS and SQL level to see if any delete commands appear in the logs (it is very verbose though!)"
MRM-1418,mparra,Mario Parra,2010-08-24T16:44:31.092Z,2010-08-24T16:44:31.092Z,"I already asked the guy that has access to MySQL logs, let's see what can we find there.

In the mean time, I found a weird behavior, because the number of rows of that table start to bounce until it get to 2 rows. For example:

1. Originally it has 1818 rows
2. When the issue start to happen it decreases to 1214
3. But then, it is 1624
4. Then 1106
5. Then 1320
6. Then 488
and it keeps running like that until I have 2 rows, the same rows that never get deleted, which are for the only artifact I have added after the migration to Archiva 1.3.1

Couldn't be something about the .index or .indexer files I have inside of the repositories?
"
MRM-1418,mparra,Mario Parra,2010-08-24T17:02:27.252Z,2010-08-24T17:02:27.252Z,"Another hint:

I setup the info level on RDBMS and SQL logs.

When I start the scanning of a repository ""internal"" I get a WARN message like this for every single artifact:

2010-08-24 11:10:06,149 [pool-2-thread-1] WARN  JPOX.RDBMS.SQL  - Object with id ""commons-net:commons-net:2.0::jar:internal"" not found !

Where is it looking for it? or why is this warning message?

I looked and the file is there on the disk on ""/repositories/internal/commons-net/commons-net/2.0/commons-net-2.0.jar""

and I have archiva.xml pointing to the correct path of the repository. Am I missing something here?

Thanks so much for your help"
MRM-1418,brettporter,Brett Porter,2010-08-24T23:04:53.777Z,2010-08-24T23:04:53.777Z,"I wouldn't worry about this WARN message in particular.

Do you get the little quare box that shows the stats at the end of a scan for the internal repository in the logs?"
MRM-1418,mparra,Mario Parra,2010-08-27T10:23:13.135Z,2010-08-27T10:23:13.135Z,"Yes I'm getting that box. Here it is:

2010-08-27 04:32:02,258 [pool-2-thread-1] INFO  org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor  - Finished repository task:
.\ Scan of internal \.__________________________________________
  Repository Dir    : /home/continuum/apache/apache-archiva-data/repositories/internal
  Repository Name   : CIEN Archiva Managed Internal Repository
  Repository Layout : default
  Known Consumers   : (6 configured)
                      update-db-artifact
                      auto-remove
                      metadata-updater
                      auto-rename
                      create-missing-checksums
                      index-content
  Invalid Consumers : <none>
  Duration          : 3 Minutes 52 Seconds 672 Milliseconds
  When Gathered     : 8/27/10 4:32 AM
  Total File Count  : 10528
  Avg Time Per File : 22 Milliseconds
______________________________________________________________


But on the stats result at the web application it says:
Stats  	
Last Scanned 	Fri Aug 27 10:00:10 CDT 2010
Duration 	47 ms
Total File Count 	40
New Files Found 	7 

Why is it only finding 40 files total and 7 new?

Thanks"
MRM-1418,mparra,Mario Parra,2010-09-01T15:48:48.773Z,2010-09-01T15:48:48.773Z,"Could this be because I moved the repositories to another path?

In such case, what do I need to do?

Thanks"
MRM-1418,mparra,Mario Parra,2010-09-01T16:07:54.218Z,2010-09-01T16:07:54.218Z,"Another weird stuff... about the database consumers.

In Archiva web application it shows only 1 ""Database - Unprocessed Artifacts Scanning"" which is ""update-db-project"".

But on the documentation it mentions that it should show 6 Unprocessed Artifacts Consumers:
    * validate-repository-metadata - Verifies repository metadata files against database.
    * index-archive-toc - Indexes the archiva table of contents for full text search.
    * index-artifact - Indexes the artifact for the 'Find Artifact' functionality.
    * update-db-project - Gets the details of the artifact from the pom and saves it into the database (as a project model)
    * index-public-methods - Indexes the java public methods for full text search.
    * update-db-bytecode-stats - Updates database with java bytecode stats. 

Is this some miss-configuration?"
MRM-1418,brettporter,Brett Porter,2010-09-02T10:25:37.092Z,2010-09-02T10:25:37.092Z,"for the two sets of data you presented above, they correspond to different times and a significantly different duration. So either they are a different repository, or something deleted all the files in the intervening 6 hours. Does that period of time correspond to the scanning crons in either the database or repository tabs?

Changing the location may have had an effect - does it display correctly in the web interface as well as the log above?

You may get to the point where you need to refresh - make sure you have no ~/.m2/archiva.xml, check that the application archiva.xml contains the config desired, delete the database, and restart forcing it to scan everything again.

As for your configuration question - the documentation is referring to the Repository Scanning page, where you are looking at the Database scanning page (which only has one consumer). You should make sure update-db-artifact is enabled in both."
MRM-1418,brettporter,Brett Porter,2010-10-01T01:30:51.379Z,2010-10-01T01:30:51.379Z,have you resolved this issue?
MRM-1418,mparra,Mario Parra,2010-10-01T10:22:30.93Z,2010-10-01T10:22:30.93Z,"Hi,

Yes, the problem was that we accidentally started another instance of Archiva pointing to the same DB. That's why it was being cleaned up.

Thanks a lot for your support.
"
MRM-1418,brettporter,Brett Porter,2010-10-02T05:37:15.366Z,2010-10-02T05:37:15.366Z,Thanks
MRM-1472,olamy,Olivier Lamy (*$^%`),2011-05-05T08:13:45.326Z,2011-05-05T08:13:45.326Z,patch attached
MRM-1472,wsmoak,Wendy Smoak,2011-05-05T08:17:22.304Z,2011-05-05T08:17:22.304Z,Can you add (or modify) a README file so people will know how to use it?
MRM-1472,olamy,Olivier Lamy (*$^%`),2011-05-05T08:27:42.37Z,2011-05-05T08:27:42.37Z,updated patch with a README file.
MRM-1472,wsmoak,Wendy Smoak,2011-05-05T08:31:54.762Z,2011-05-05T08:31:54.762Z,discussing on irc -- I'm not sure about the changes being made to the archiva-webapp module.  It looks like application.xml is moving around.  Is that necessary to get tomcat:run to work?
MRM-1472,olamy,Olivier Lamy (*$^%`),2011-05-05T08:50:53.153Z,2011-05-05T08:50:53.153Z,"Yup necessary.
The web.xml which contains /WEB-INF/classes/META-INF/plexus/application.xml .
So the tomcat run doesn't ""package"" the war. So resources are in ${project.build.outputDirectory}.
And especially this application.xml.
So moving it to /WEB-INF/application.xml will works better.
"
MRM-1472,wsmoak,Wendy Smoak,2011-05-05T09:43:45.301Z,2011-05-05T09:43:45.301Z,"Applied, with minor changes to 'svn mv' the application.xml file rather than delete and re-add it.  I assume there were no changes to that file.

Please find somewhere to document this or at least write it up on dev@ so that people know how to use this new build feature.
"
MRM-1472,olamy,Olivier Lamy (*$^%`),2011-05-05T09:46:41.843Z,2011-05-05T09:46:41.843Z,the second patch added a README
MRM-1472,wsmoak,Wendy Smoak,2011-05-05T10:40:18.349Z,2011-05-05T10:40:18.349Z,"The commit is being blamed for a build failure, though it's in archiva-webdav which wasn't touched...

http://vmbuild.apache.org/continuum/buildResult.action?buildId=7998&projectId=1"
MRM-1472,olamy,Olivier Lamy (*$^%`),2011-05-05T11:04:26.318Z,2011-05-05T11:04:26.318Z,"build complains it cannot find TestAuditListener.class and I agree with him 
:-)
the .java is here : http://svn.apache.org/repos/asf/archiva/trunk/archiva-modules/archiva-web/archiva-webdav/src/test/resources/org/apache/a...
note the src/test/resources"
MRM-1472,olamy,Olivier Lamy (*$^%`),2011-05-05T11:16:06.606Z,2011-05-05T11:16:06.606Z,patch to fix compilation failure.
MRM-1472,olamy,Olivier Lamy (*$^%`),2011-05-05T17:25:26.217Z,2011-05-05T17:25:26.217Z,see attached FIX-COMPILATION.patch for compilation failure
MRM-1472,wsmoak,Wendy Smoak,2011-05-06T07:11:17.616Z,2011-05-06T07:11:17.616Z,Looks like Continuum is happy again.  (Though I still don't think the change from this issue broke it...)
MRM-1489,brettporter,Brett Porter,2011-08-08T03:22:04.718Z,2011-08-08T03:22:04.718Z,Dupe of MRM-1427?
MRM-1464,lucien@wellernet.ch,Lucien Weller,2011-03-28T08:32:01.724Z,2011-03-28T08:32:01.724Z,Sorry created this report twice due to a network error...
MRM-1444,armbrust,Dan Armbrust,2011-04-26T16:33:51.697Z,2011-04-26T16:33:51.697Z,Got bit by this today as I was uploading files with non-standard file extensions.  Only stumbled onto the workaround by accident (adding the extension to the repo-scanning setup)
MRM-1491,brettporter,Brett Porter,2011-08-08T03:24:39.227Z,2011-08-08T03:24:39.227Z,I don't agree with this as a default. I think it's good to have an option to build it though.
MRM-1491,olamy,Olivier Lamy (*$^%`),2011-08-08T03:30:32.752Z,2011-08-08T03:30:32.752Z,you mean more distrib (zip tar.gz) or a startup option ?
MRM-1491,brettporter,Brett Porter,2011-08-08T03:34:40.961Z,2011-08-08T03:34:40.961Z,"a different distrib - and I guess we can choose which is default depending on which is smallest / fastest / easiest to support for us.

I'd be concerned about having to redo documentation for conf / log locations, and making it harder for existing users to just upgrade.

I know we do have quite a few people already deploying into Tomcat though, so we can at least make that easier for them."
MRM-1483,wsmoak,Wendy Smoak,2011-08-01T07:50:33.117Z,2011-08-01T07:50:33.117Z,"The pom on the 1.3.x branch has the compiler plugin configured for source and target 1.5, so I think this is ""won't fix"" and we just need to change the download page.

http://svn.apache.org/repos/asf/archiva/branches/archiva-1.3.x/pom.xml"
MRM-1483,joehni,Joerg Schaible,2011-08-01T10:04:21.783Z,2011-08-01T10:04:21.783Z,Guess this means I have to start arguing with our admin for that partifcular machine that still runs ancient maven-proxy ... ;-)
MRM-1483,wsmoak,Wendy Smoak,2011-08-01T10:12:11.573Z,2011-08-01T10:12:11.573Z,Updated the download page in r1152820 to reflect the minimum 1.5 JDK level.
MRM-1488,oching,Maria Odea Ching,2011-08-25T04:41:41.29Z,2011-08-25T04:41:41.29Z,"Discussion in community thread:

http://old.nabble.com/Archiva-issue-with-LDAP-%28MRM-1488%29-td32324272.html"
MRM-1488,oching,Maria Odea Ching,2011-08-26T05:16:51.344Z,2011-08-26T05:16:51.344Z,"Redback fixes already committed to Redback trunk (see REDBACK-289 for the details).

Also enabled explicit flushing of caches from {{System Status}} page in Archiva in [-r1161988|http://svn.apache.org/viewvc?rev=1161988&view=rev]."
MRM-1450,brettporter,Brett Porter,2011-01-24T06:34:21.818Z,2011-01-24T06:34:21.818Z,"agree, and likely a small adjustment.

Do you have any bandwidth to patch this?"
MRM-1450,joehni,Joerg Schaible,2011-01-29T06:44:55.998Z,2011-01-29T06:44:55.998Z,"I assumed that this is not a big change and I'd love to have some time left, but currently I am simply overloaded ..."
MRM-1450,olamy,Olivier Lamy (*$^%`),2014-03-02T16:54:52.383Z,2014-03-02T16:54:52.383Z,fixed in the 2.0.0
MRM-1473,olamy,Olivier Lamy (*$^%`),2011-06-20T03:12:19.339Z,2011-06-20T03:12:19.339Z,yeah look to be ok :-)
MRM-1470,ctan,Maria Catherine Tan,2011-04-28T07:15:58.252Z,2011-04-28T07:15:58.252Z,Attached patch that will removeExpressions from the repository location.
MRM-1470,jzurbano,jzurbano,2011-04-29T06:32:15.663Z,2011-04-29T06:32:15.663Z,"Patch applied in r1097776.

Thanks, Catherine! :)"
MRM-1424,oching,Maria Odea Ching,2010-10-07T22:02:11.808Z,2010-10-07T22:02:11.808Z,Thanks for the patch Warner! Can you include unit tests for it?
MRM-1424,warner.pinz,Warner B. Piero,2010-10-08T02:42:07.522Z,2010-10-08T02:42:07.522Z,Attached unit test patch
MRM-1424,oching,Maria Odea Ching,2010-10-09T08:50:43.985Z,2010-10-09T08:50:43.985Z,Patch applied to trunk [-r1006162|http://svn.apache.org/viewvc?revision=1006162&view=revision]. Thanks again Warner!
MRM-1432,sellersj,Jim Sellers,2010-11-25T16:33:22.488Z,2010-11-25T16:33:22.488Z,please correct the spelling in the title.
MRM-1432,brettporter,Brett Porter,2010-11-25T16:48:13.056Z,2010-11-25T16:48:13.056Z,are you interested in submitting a patch for this?
MRM-1461,ctan,Maria Catherine Tan,2011-03-14T00:51:12.098Z,2011-03-14T00:51:12.098Z,"Attached patch
* created a FileUtil class to delete the directory gracefully.
** it will continue to delete the rest of the files even if it encountered a locked file or any file that it can't delete and will throw an IOException at the end 
* replaced FileUtils.deleteDirectory with this class"
MRM-1461,brettporter,Brett Porter,2011-03-14T18:55:30.3Z,2011-03-14T18:55:30.3Z,"would it be better to use comons-io's deleteQuietly method, then just test for existence at the end?"
MRM-1461,ctan,Maria Catherine Tan,2011-03-14T23:36:03.49Z,2011-03-14T23:36:03.49Z,"If you use deleteQuietly to delete a directory, it will just call the cleanDirectory method which is just similar to calling deleteDirectory."
MRM-1461,ctan,Maria Catherine Tan,2011-03-14T23:46:03.334Z,2011-03-14T23:46:03.334Z,"Ok, I did not see that it catches the exception after calling the cleanDirectory."
MRM-1461,ctan,Maria Catherine Tan,2011-03-15T08:28:20.026Z,2011-03-15T08:28:20.026Z,I updated the patch to use common-io's deleteQuietly
MRM-1461,oching,Maria Odea Ching,2011-03-16T09:55:07.76Z,2011-03-16T09:55:07.76Z,Patch reviewed and applied to trunk [-r1082160|http://svn.apache.org/viewvc?revision=1082160&view=revision]. Thanks for the patch Marica!
MRM-1476,oching,Maria Odea Ching,2011-05-31T06:03:35.715Z,2011-05-31T06:03:35.715Z,Error is for users database btw.
MRM-1476,oching,Maria Odea Ching,2011-05-31T06:06:15.654Z,2011-05-31T06:06:15.654Z,Patch applied to trunk [-r1129622|http://svn.apache.org/viewvc?rev=1129622&view=rev]. Thanks Greg!
MRM-1471,olamy,Olivier Lamy (*$^%`),2011-04-29T05:14:33.287Z,2011-04-29T05:14:33.287Z,patch 
MRM-1471,olamy,Olivier Lamy (*$^%`),2011-05-05T09:44:37.376Z,2011-05-05T09:44:37.376Z,in fact included too in 1099827.
MRM-1406,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-28T21:08:39.93Z,2010-07-28T21:08:39.93Z,add original repo name instead of staging repo name for audit logging 
MRM-1406,oching,Maria Odea Ching,2010-07-29T05:54:54.297Z,2010-07-29T05:54:54.297Z,Patch committed to MRM-980 branch in [-r980397|http://svn.apache.org/viewvc?rev=980397&view=rev]. Thanks Eshan!
MRM-1447,brettporter,Brett Porter,2010-12-29T16:21:01.415Z,2010-12-29T16:21:01.415Z,Thanks for the catch. The links are from the parent POM: http://svn.apache.org/repos/asf/archiva/parent/pom.xml
MRM-1447,i.galic,Igor Galic,2010-12-30T07:25:41.05Z,2010-12-30T07:25:41.05Z,There you go.
MRM-1447,brettporter,Brett Porter,2010-12-30T17:17:34.695Z,2010-12-30T17:17:34.695Z,"applied, thanks!"
MRM-1417,cpinedajr,Catalino Pineda Jr,2010-08-19T00:57:20.592Z,2010-08-19T00:57:20.592Z,Attaching files for the initial implementation.
MRM-1417,oching,Maria Odea Ching,2010-08-19T02:19:34.99Z,2010-08-19T02:19:34.99Z,"Thanks Cata!

Patch committed to trunk [-r987042|http://svn.apache.org/viewvc?rev=987042&view=rev] with additional modification:
* added invocation of repo mgnt service methods to sample client"
MRM-1431,brettporter,Brett Porter,2010-11-25T16:47:29.581Z,2010-11-25T16:47:29.581Z,"Yes, I've tried to undo that whenever I encounter it too.

If you have some specific ones you'd like addressed can you submit a patch? I'd be happy to apply that in the nearest release."
MRM-1475,oching,Maria Odea Ching,2011-05-24T03:38:04.655Z,2011-05-24T03:38:04.655Z,Patch applied to trunk [-r1126927|http://svn.apache.org/viewvc?rev=1126927&view=rev]. Thanks Greg!
MRM-1459,oching,Maria Odea Ching,2011-06-09T04:56:40.478Z,2011-06-09T04:56:40.478Z,This seems to be an issue only with 1.3.x. I was able to reproduce it in 1.3.5 but not in trunk. 
MRM-1459,oching,Maria Odea Ching,2011-06-09T04:57:17.756Z,2011-06-09T04:57:17.756Z,Closing issue now since it's fixed in trunk.
MRM-1459,oching,Maria Odea Ching,2011-06-09T04:58:40.62Z,2011-06-09T04:58:40.62Z,Closing as fixed in 1.4-M1.
MRM-1479,olamy,Olivier Lamy (*$^%`),2011-06-30T10:13:59.285Z,2011-06-30T10:13:59.285Z,fixed [rev 1141566|http://svn.apache.org/viewvc?rev=1141566&view=rev]
MRM-1498,brettporter,Brett Porter,2011-08-08T19:33:02.894Z,2011-08-08T19:33:02.894Z,"The instructions are the same as upgrading: http://archiva.apache.org/docs/1.3.5/adminguide/upgrade.html

The only catch is that if you change the installation location, you may need to edit some paths in conf/archiva.xml.

Please refer further questions to the users@archiva.apache.org list - the issue tracker is for handling bugs."
MRM-1449,brettporter,Brett Porter,2011-01-21T00:02:26.365Z,2011-01-21T00:02:26.365Z,"interesting feature. We might consider having this both on incoming connections and outgoing proxy connections.

Would you be interested in helping with a patch?"
MRM-1449,mhaller,Mike Haller,2011-01-22T05:13:45.329Z,2011-01-22T05:13:45.329Z,"I'm going to try, the Archiva code base is very large.

I found the location which might be the first starting point:  {{org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.transferFile()}} is where the Maven {{Wagon}} is asked by Archiva to retrieve files. E.g. for a HTTP Wagon, this is where the connection is opened. I assume keeping a counter in this class would be possible. (Are Plexus components stateful and singletons?)

Also, need to think about whether to 
1) stall the requests e.g. just wait a little bit before actually opening the connection. This may block the thread pretty long. (Bounded queue or counter?)
2) whether to cancel the request and return a ""not connected"" to the caller and let the Archiva core handle the deferred retry.

For incoming connections, this could also be done with an Apache bandwidth throttling module."
MRM-1449,brettporter,Brett Porter,2011-01-24T06:38:58.191Z,2011-01-24T06:38:58.191Z,"You're in the right place. We actually use spring underneath, but the plexus annotations still exist in many pieces of the code. The default for most is a singleton instance (true for DRPC, but not wagons). Instead of a counter, a list might be appropriate, as that list of requests could be inspected elsewhere for tracking the system status.

Configuration is probably good to address the two options. I'd go with a blocking queue, since most outgoing requests are short and it will free up in a reasonable time. If it grows to a certain size or timeout you might start failing to avoid spiralling out of control as it backs up."
MRM-1449,brettporter,Brett Porter,2011-03-24T23:49:21.179Z,2011-03-24T23:49:21.179Z,any progress on this?
MRM-1449,jwinckelmann,Jan-Sebastian Winckelmann,2011-07-08T09:06:01.814Z,2011-07-08T09:06:01.814Z,We are hit by the same problem.
MRM-1403,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-08-04T21:14:17.83Z,2010-08-04T21:14:17.83Z,MRM-1403 fixed.
MRM-1403,oching,Maria Odea Ching,2010-08-08T00:22:34.412Z,2010-08-08T00:22:34.412Z,Fixed in branch [-r983343|http://svn.apache.org/viewvc?rev=983343&view=rev]. Thanks!
MRM-1402,oching,Maria Odea Ching,2010-07-27T02:53:11.172Z,2010-07-27T02:53:11.172Z,Fixed in MRM-980 branch [-r979568|http://svn.apache.org/viewvc?view=revision&revision=979568].
MRM-1402,wsmoak,Wendy Smoak,2010-07-27T10:27:05.733Z,2010-07-27T10:27:05.733Z,"Which name did you go with?  (I like Merged -- I'm planning to use this to combine repos, nothing to do with ""promoting"" anything.)"
MRM-1415,olamy,Olivier Lamy (*$^%`),2014-02-25T20:53:46.889Z,2014-02-25T20:53:46.889Z,fixed in 2.x
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-09T00:30:43.255Z,2011-04-09T00:30:43.255Z,"Hi,

Implementation proposal:

I seem to have noticed the lack of field validation in most of the input forms. I will start by strengthening the field validation for those that are vulnerable to XSS exploits. Also I will be altering some JSP output tags, since some of them uses struts2 output tags that does not escape the injected scripts. The jsp native output function c:out would escape injected scripts.

Validation messages/notifications would be in property(.properties) files.

Any thoughts on this proposal??
Comments & suggestions, would be much appreciated."
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-09T00:47:43.496Z,2011-04-09T00:47:43.496Z,"On second thought on my previous comment regarding the validation messages/notifications would be in a property file, I'll just follow the current validation set-up(validation messages/notifications would be in the action class), seeing that there is already some that are implemented."
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-10T08:59:01.565Z,2011-04-10T08:59:01.565Z,"Did a lot of testing with my initial small implementation(single action class), it seems that struts2's validation framework is having a problem dealing with trailing white-spaces. The trailing white-spaces are not being included in checking for the regular expression pattern."
MRM-1468,oching,Maria Odea Ching,2011-04-10T20:18:31.011Z,2011-04-10T20:18:31.011Z,"Hi Marc, your proposal to tighten the field validation looks good. If you're having problems with the built-in regex field validator, I think you can implement your own validator class. You need to configure it in the {{validators.xml}} though before you can use it in your action validation :)"
MRM-1468,brettporter,Brett Porter,2011-04-10T21:00:21.391Z,2011-04-10T21:00:21.391Z,"That seems like overkill - what fields require a non-standard type of validation? Even a regex seems like more than is needed for most fields.

What's the whitespace problem?"
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-10T21:59:09.452Z,2011-04-10T21:59:09.452Z,"@Brett:

The white-space problem:

* Struts 2's validation framework truncates trailing white-spaces & does not include them(the trailing white-spaces) in the pattern matching process(but the data with the trailing white-spaces is carried over to the action class). So my solution would be allow, white-spaces."
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-10T22:22:41.533Z,2011-04-10T22:22:41.533Z,"@Brett Porter: here is a sneak peek of a single action class' validator.xml:

{code:xml} 
<validators>
  <field name=""groupId"">
    <field-validator type=""requiredstring"">
      <message>You must enter a groupId.</message>
    </field-validator>
    <field-validator type=""regex"">
        <param name=""expression"">^([a-zA-Z0-9.-]|s)+$</param>
        <message>groupId must only contain alphanumeric characters, white-spaces, dot(.) characters, and dash(-) characters.</message>
    </field-validator>
  </field>
  <field name=""artifactId"">
    <field-validator type=""requiredstring"">
      <message>You must enter an artifactId.</message>
    </field-validator>
    <field-validator type=""regex"">
        <param name=""expression"">^([a-zA-Z0-9.-]|s)+$</param>
        <message>artifactId must only contain alphanumeric characters, white-spaces, dot(.) characters, and dash(-) characters.</message>
    </field-validator>
  </field>
  <field name=""version"">
    <field-validator type=""requiredstring"">
      <message>You must enter a version.</message>
    </field-validator>
  </field>
  <field name=""repositoryId"">
    <field-validator type=""regex"">
        <param name=""expression"">^([a-zA-Z0-9.!-]|s)+$</param>
        <message>repositoryId must only contain alphanumeric characters, white-spaces, exclamation point(!) characters, dot(.) characters, and dash(-) characters.</message>
    </field-validator>
  </field>
</validators>
{code} "
MRM-1468,brettporter,Brett Porter,2011-04-10T23:47:38.755Z,2011-04-10T23:47:38.755Z,"I can't think of a valid reason to allow trailing whitespace - we should be trimming the values. Whitespace isn't allowed in any of the above.

You'll need to make sure the regexes selected are appropriate for each field - and take note on what happens to existing fields that don't match."
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-11T00:17:44.941Z,2011-04-11T00:17:44.941Z,"@Brett:

OK, will find a way to deal with this validation problem(white-spaces) of struts2."
MRM-1468,brettporter,Brett Porter,2011-04-11T01:23:40.934Z,2011-04-11T01:23:40.934Z,"That's not what I'm saying...

There's no reason on any of our fields to allow a trailing whitespace. The validation doesn't need to deal with that - we should deal with it in trimming. The fields you've listed shouldn't allow whitespace at all. Which I point out to say that as you make a patch, make sure you capture the actual requirements of the fields."
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-14T09:22:38.517Z,2011-04-14T09:22:38.517Z,Patch(with Unit test) for the prevention of cross-site scripting vulnerability in Archiva.
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-15T02:46:15.424Z,2011-04-15T02:46:15.424Z,This patch is a composition of previous attachment(MRM-1468) + selenium scripts.
MRM-1468,oching,Maria Odea Ching,2011-04-17T09:58:48.171Z,2011-04-17T09:58:48.171Z,"Thanks for the patch Marc! 

Can you also add selenium tests for the following XSS scenarios that was reported in Archiva so that we can make sure that they're addressed by the fixes?

# http://127.0.0.1:8080/archiva/deleteArtifact!doDelete.action?groupId=1<script>alert('xss')</script>&artifactId=1<script>alert('xss')</script>&version=1&repositoryId=internal
# http://127.0.0.1:8080/archiva/admin/addLegacyArtifactPath!commit.action?legacyArtifactPath.path=test%3Cscript%3Ealert%28%27xss%27%29%3C%2Fscript%3E&groupId=test%3Cscript%3Ealert%28%27xss%27%29%3C%2Fscript%3E&artifactId=test%3Cscript%3Ealert%28%27xss%27%29%3C%2Fscript%3E&version=test%3Cscript%3Ealert%28%27xss%27%29%3C%2Fscript%3E&classifier=test%3Cscript%3Ealert%28%27xss%27%29%3C%2Fscript%3E&type=test%3Cscript%3Ealert%28%27xss%27%29%3C%2Fscript%3E
# http://127.0.0.1:8080/archiva/admin/deleteNetworkProxy!confirm.action?proxyid=test%3Cscript%3Ealert%28%27xss%27%29%3C/script%3E

---
Stored (Persistent) XSS:

The exploit is executed in multiple pages. I have highlighted the input page and 1 page on which the code gets executed.

1. Stored XSS in Add Repository. Use the following exploit code for PoC:

Exploit Code: test""><script>alert('xss')</script>
Input URL: http://127.0.0.1:8080/archiva/admin/addRepository.action [Input fields: Identifier:repository.id, Name:repository.name, Directory:repository.location, Index Directory:repository.indexDir] Rendered On: http://127.0.0.1:8080/archiva/admin/confirmDeleteRepository.action?repoid=test

2. Stored XSS in Edit Appearance

Exploit Code: test<script>alert('xss')</script> Input URL: http://127.0.0.1:8080/archiva/admin/editAppearance.action [Input fields: Name:organisationName, URL:organisation:URL, LogoURL:organisation:URL] Rendered On: http://127.0.0.1:8080/archiva/admin/configureAppearance.action

3. Stored XSS in Add Legacy Artifact Path Exploit Code: test<script>alert('xss')</script> Input Page: 

http://127.0.0.1:8080/archiva/admin/addLegacyArtifactPath.action [Input Fields: Path:name=legacyArtifactPath.path, GroupId:groupId, ArtifactId:artifactId, Version:version, Classifier:classifier, Type:type] Rendered On: http://127.0.0.1:8080/archiva/admin/legacyArtifactPath.action

4. Stored XSS in Add Network Proxy

Exploit Code: test<script>alert('xss')</script> Input Page: http://127.0.0.1:8080/archiva/admin/addNetworkProxy.action [Input Fields: Identifier:proxy.id, Protocol:proxy.protocol, Hostname:proxy.host, Port:proxy.port, Username:proxy.username] Rendered On: http://127.0.0.1:8080/archiva/admin/networkProxies.action
"
MRM-1468,oching,Maria Odea Ching,2011-04-17T09:59:17.501Z,2011-04-17T09:59:17.501Z,[Removed duplicate comment posted]
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-17T20:47:30.355Z,2011-04-17T20:47:30.355Z,#NAME?
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-24T09:38:50.831Z,2011-04-24T09:38:50.831Z,"MRM-1468-2.patch contains additional fix on some unnoticed XSS vulnerability findings.

* Added selenium scripts for the possible XSS test cases.
* Refactored some of the redundant codes that appear in the new additions & the in the old remnants.
* Moved a couple of methods to a higher heirarchy for common inheritance use.
* Added some new classes."
MRM-1468,oching,Maria Odea Ching,2011-04-27T04:44:25.82Z,2011-04-27T04:44:25.82Z,"Hi Marc, I was able to apply your patch locally and also ran the selenium tests successfully. Sorry I missed the following in the previous review of the patch, but can you make the following changes to the fix:
* include '\' as accepted value for proxy username
* use Struts2 URL validator to validate URLs

Thanks!
"
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-27T21:47:57.465Z,2011-04-27T21:47:57.465Z,#NAME?
MRM-1468,mchua,Marc Jansen Tan Chua,2011-04-28T02:01:51.186Z,2011-04-28T02:01:51.186Z,@Maria Odea Ching: Attached is the latest patch(MRM-1468-3.patch) with the requested addition/changes
MRM-1468,oching,Maria Odea Ching,2011-05-02T21:58:28.691Z,2011-05-02T21:58:28.691Z,Thanks again for the patches Marc! I've already applied it to 1.3.x branch [-r1098897|http://svn.apache.org/viewvc?rev=1098897&view=rev].
MRM-1468,oching,Maria Odea Ching,2011-05-04T07:05:20.893Z,2011-05-04T07:05:20.893Z,"Fix merged to trunk in [-r1099425|http://svn.apache.org/viewvc?rev=1099425&view=rev] with additional changes:
* added a factory for action validator manager since ObjectFactory.setObjectFactory(..) was removed in struts 2.1 so the unit tests for validation would work
* fixed conflicts"
MRM-1468,oching,Maria Odea Ching,2011-05-04T22:12:21.737Z,2011-05-04T22:12:21.737Z,Fixed failing selenium test in trunk after merge in [-r1099671|http://svn.apache.org/viewvc?rev=1099671&view=rev].
MRM-1468,gautencio,Gwen Harold Autencio,2011-05-06T07:27:32.934Z,2011-05-06T07:27:32.934Z,"Hi,

Issue can still be reproducible when adding a managed repository through xmlrpc.

Attaching screenshot in my local.

Thanks
"
MRM-1468,gautencio,Gwen Harold Autencio,2011-05-06T07:28:47.764Z,2011-05-06T07:28:47.764Z,"screenshot in local when adding a repository through xmlrpc with <script>alert(""hello"");</script> as my arguments."
MRM-1468,oching,Maria Odea Ching,2011-05-08T19:15:21.422Z,2011-05-08T19:15:21.422Z,Re-opening issue based on Gwen's comments. Thanks for the catch!
MRM-1468,oching,Maria Odea Ching,2011-05-09T06:02:58.247Z,2011-05-09T06:02:58.247Z,Added validation when adding a managed repository via xmlrpc + unit tests in Archiva trunk [-r1100956|http://svn.apache.org/viewvc?rev=1100956&view=rev].
MRM-1421,brettporter,Brett Porter,2010-09-11T02:10:42.221Z,2010-09-11T02:10:42.221Z,"I've identified the code to remove, but need to write a unit test before committing"
MRM-1421,gayathri,Gayathri Muralidharan,2011-02-03T00:22:22.051Z,2011-02-03T00:22:22.051Z,"Hi,
We were using Archiva 1.3 and the snapshots were not getting purged due to the Layout exception.
Recently we upgraded to 1.3.3 and even then the repository purge is not happening due to the following error:

Can you help us out here? Its really a tough task to clean the repository without this purge option.

The configuration and the error message are as follows:

Configuration: 
Identifier  	 snapshots
Name 	         Testing
Directory 	 /u/xxx/.m2/repository
WebDAV URL 	 http://xxx/archiva/repository/snapshots/
Type 	         Maven 2.x Repository
Releases         Included 	
Snapshots        Included 	
Delete Released Snapshots 	
Repository Purge By Days Older Than 	1
Repository Purge By Retention Count 	2
Scanned 	
Scanning Cron 	0 9 * * * ?

Error message :2011-02-03 01:06:18,598 [pool-2-thread-1] INFO org.apache.maven.archiva.consumers.core.MetadataUpdaterConsumer - Not processing path that is not an artifact: abc/def/SNAPSHOT/def-20110130.110618-652.jar (Invalid path to Artifact: filename format is invalid,expected timestamp format in filename.)


Thanks,
Gayathri
"
MRM-1452,ctan,Maria Catherine Tan,2011-01-27T08:41:59.337Z,2011-01-27T08:41:59.337Z,Attached patch
MRM-1452,oching,Maria Odea Ching,2011-01-27T21:19:38.756Z,2011-01-27T21:19:38.756Z,Patch applied to trunk -r1064444. Thanks Marica!
MRM-1401,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-08-02T07:00:58.86Z,2010-08-02T07:00:58.86Z,"MRM-1401  is fixed. 
Thanks."
MRM-1401,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-08-02T20:27:11.625Z,2010-08-02T20:27:11.625Z,"last patch contains some issues and here those are fixed.
Thanks."
MRM-1401,brettporter,Brett Porter,2010-08-06T00:59:59.594Z,2010-08-06T00:59:59.594Z,does it ever make sense to merge snapshots?
MRM-1401,oching,Maria Odea Ching,2010-08-07T21:54:51.949Z,2010-08-07T21:54:51.949Z,"No it doesn't, but we don't really block snapshot artifacts from getting deployed in a releases repository so if a snapshot artifact somehow finds its way in a staging repo, it can be merged to the target repo.."
MRM-1401,oching,Maria Odea Ching,2010-08-08T00:22:22.608Z,2010-08-08T00:22:22.608Z,Fixed in branch [-r983343|http://svn.apache.org/viewvc?rev=983343&view=rev]. Thanks!
MRM-1437,dbrosius,Dave Brosius,2010-11-28T23:22:33.698Z,2010-11-28T23:22:33.698Z,"Ah, archiva uses commons-io, so update patch to use

IOUtils.closeQuietly( pomStream );"
MRM-1437,brettporter,Brett Porter,2010-12-01T04:17:17.763Z,2010-12-01T04:17:17.763Z,applied (after correcting formatting)
MRM-1439,brettporter,Brett Porter,2010-12-03T08:21:52.666Z,2010-12-03T08:21:52.666Z,"The problem was that each request re-scanned the index to see if the document was an addition or an update. As the size of the index grew, each indexing task became larger, causing the queue to grow exponentially.

With the fix in place, the queue should now not grow above 5-10 items when operating normally, and should complete a full scan in about 1/3rd of the time."
MRM-1410,oching,Maria Odea Ching,2010-12-29T01:46:13.864Z,2010-12-29T01:46:13.864Z,Changing summary and description since delete via web services was already implemented in MRM-1417.
MRM-1410,olamy,Olivier Lamy (*$^%`),2011-10-27T16:16:48.458Z,2011-10-27T16:16:48.458Z,available in REST api
MRM-1416,brettporter,Brett Porter,2010-11-25T00:26:01.692Z,2010-11-25T00:26:01.692Z,the 1.3 release gained more than anticipated - cut a more limited 1.2.5 release.
MRM-1407,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-08-10T19:48:23.689Z,2010-08-10T19:48:23.689Z,"documentation is added.
Thanks"
MRM-1407,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-08-14T23:37:43.968Z,2010-08-14T23:37:43.968Z,"here is the images. 
Thanks. "
MRM-1407,oching,Maria Odea Ching,2010-08-15T08:36:17.433Z,2010-08-15T08:36:17.433Z,"Patch applied to trunk [985674|http://svn.apache.org/viewvc?rev=985674&view=rev] with a few modifications made to the patch:
* moved to staging repos doc to admin guide instead of user guide
* added a few lines and fixed typos in the staging doc"
MRM-1453,struberg,Mark Struberg,2011-01-28T09:21:46.695Z,2011-01-28T09:21:46.695Z,patch which uses the fixed Locale.US
MRM-1453,oching,Maria Odea Ching,2011-01-28T09:42:35.536Z,2011-01-28T09:42:35.536Z,"Thanks Mark!

Patch applied to trunk [-r1064737|http://svn.apache.org/viewvc?revision=1064737&view=revision]."
MRM-1426,brettporter,Brett Porter,2010-10-07T22:51:22.203Z,2010-10-07T22:51:22.203Z,"do servers support going straight to index.action now? I know in the past this wasn't possible, hence the index.jsp.

Either way, we could add one for index.jsp.

Would you mind doing a patch and testing it for us?"
MRM-1426,ChrisGWarp,Chris Graham,2010-10-09T04:59:08.368Z,2010-10-09T04:59:08.368Z,"Direct to index.action? No. WebSphere does not even default to index.jsp, hence this request.

http://archiva.server/archiva/ results in a 404 under WebSphere.

I've never gotten archiva to build correctly. But I'll try.
"
MRM-1426,ChrisGWarp,Chris Graham,2011-11-22T06:56:31.38Z,2011-11-22T06:56:31.38Z,This patch is for web.xml to add in the default welcome pages (to index.jsp). Tested against the current (M2-SNAPSHOT) trunk.
MRM-1426,olamy,Olivier Lamy (*$^%`),2011-11-22T07:22:03.683Z,2011-11-22T07:22:03.683Z,Thanks for the patch.
MRM-1458,brettporter,Brett Porter,2011-03-05T18:15:08.039Z,2011-03-05T18:15:08.039Z,"This should be quite straightforward to do as a modification of the existing purge tasks with appropriate configuration added. I can see the value in this, though you need to be very careful about using it if you expect to have to reproduce any historical builds, or if some artifacts are still in active use. I would separate the repository that needs this rule from others.

If you'd like to submit a patch we'll certainly consider it.

Alternatively, you might like to take the existing consumers and add as a new consumer within your own instance using Archiva's extensibility in this area."
MRM-1413,brettporter,Brett Porter,2010-08-06T00:52:25.854Z,2010-08-06T00:52:25.854Z,"It appears to have been configured correctly. There are some known issues with config not being persisted until restart - does it still fail after a restart?

Does it also fail with non-SSL remote repos?

Archiva is using the standard java.net.* library and its proxy connection settings. You might try running with the -Djavax.net.debug flag to get additional configuration info, or changing the log level in Archiva's log4j.xml for the proxy connectors. Make sure the app is not sharing a container with other apps that might conflict with the JVM proxy properties.

Let us know how it goes."
MRM-1413,edelorme,Elie Delorme,2010-08-24T07:42:59.345Z,2010-08-24T07:42:59.345Z,"I was able to make the proxy work for ssl repos by adding -Dhttps.proxyHost=my_proxy_host and -Dhttps.proxyPort=my_proxy_port to the wrapper.conf file.

It works, but I consider this a workaround."
MRM-1413,brettporter,Brett Porter,2010-08-24T09:36:52.066Z,2010-08-24T09:36:52.066Z,"thanks, that's something to look at. It should be a straightforward check on the URL to set the properties correctly in the proxy code."
MRM-1413,olamy,Olivier Lamy (*$^%`),2011-09-30T05:07:12.678Z,2011-09-30T05:07:12.678Z,should be fixed with wagon-http 2.0 and without adding sys props now
MRM-1469,brettporter,Brett Porter,2011-04-26T21:59:58.077Z,2011-04-26T21:59:58.077Z,"Agree that's a bug - I thought we had fixed that by switching to IOUtil already, but I may be thinking of another location."
MRM-1469,oching,Maria Odea Ching,2011-05-12T03:14:17.033Z,2011-05-12T03:14:17.033Z,That fix was in repository merge I think. I'll fix this too. Thanks!
MRM-1469,oching,Maria Odea Ching,2011-05-12T04:13:16.016Z,2011-05-12T04:13:16.016Z,Fixed in 1.3.x branch [-r1102210|http://svn.apache.org/viewvc?rev=1102210&view=rev].
MRM-1469,oching,Maria Odea Ching,2011-05-12T05:31:44.323Z,2011-05-12T05:31:44.323Z,Changes merged to trunk in [-r1102235|http://svn.apache.org/viewvc?rev=1102235&view=rev].
MRM-1485,pedrol,Pedro Macedo Leite,2011-08-05T08:48:05.019Z,2011-08-05T08:48:05.019Z,?????
MRM-1485,brettporter,Brett Porter,2011-08-05T09:06:10.749Z,2011-08-05T09:06:10.749Z,the properties look fine. Do you have an existing users database from running this before or is it a new configuration?
MRM-1485,pedrol,Pedro Macedo Leite,2011-08-05T09:17:36.157Z,2011-08-05T09:17:36.157Z,"I do not understand your question too, but this Ldap already existed before, and already use it for a long time."
MRM-1485,brettporter,Brett Porter,2011-08-05T09:39:15.167Z,2011-08-05T09:39:15.167Z,"I mean, did you start Archiva and configure some users in the default way, because configuring LDAP?

One thing you might try - stop Archiva, move data/databases/users out of the way, then start Archiva again.

Another - comment out userPassword setting - I don't believe that's needed and may be causing some confusion

You're not the first to report this problem, so it is likely a bug, though I'm not able to reproduce it myself."
MRM-1485,pedrol,Pedro Macedo Leite,2011-08-09T07:54:07.755Z,2011-08-09T07:54:07.755Z,"I removed the option spoken, however it did not work.
I created a new installation and copied the data, and yet was not. I created an installation from scratch and gave the same erro.kkk

As if I have a bug?"
MRM-1485,brettporter,Brett Porter,2011-08-09T19:06:33.61Z,2011-08-09T19:06:33.61Z,"I'll see what we can find out might be the cause, as there's some other LDAP issues to look at"
MRM-1485,brettporter,Brett Porter,2011-08-19T07:37:21.456Z,2011-08-19T07:37:21.456Z,"are you sure that ""ldap.config.mapper.attribute.user.object.class=simpleSecurityObject"" is correct? The default is inetOrgPerson, which should fit with openldap."
MRM-1485,pedrol,Pedro Macedo Leite,2011-08-22T06:11:23.141Z,2011-08-22T06:11:23.141Z,"Yes,

I have created simple authentication accounts, not a complete user.
If I leave this attribute default, it does not accept this."
MRM-1485,pedrol,Pedro Macedo Leite,2011-09-06T06:37:01.547Z,2011-09-06T06:37:01.547Z,?????
MRM-1485,brettporter,Brett Porter,2011-09-12T07:48:46.048Z,2011-09-12T07:48:46.048Z,"I'd need to test that further, I haven't tried with that kind of configuration."
MRM-1485,pedrol,Pedro Macedo Leite,2011-11-08T13:05:02.153Z,2011-11-08T13:05:02.153Z,And there? how is the process?
MRM-1485,olamy,Olivier Lamy (*$^%`),2014-02-25T19:31:23.826Z,2014-02-25T19:31:23.826Z,sounds good with 2.x
MRM-1289,jzurbano,jzurbano,2010-01-10T22:18:34.709Z,2010-01-10T22:18:34.709Z,Documentation updated in r897754.
MRM-1200,brettporter,Brett Porter,2009-07-02T02:11:03.17Z,2009-07-02T02:11:03.17Z,have you tried the legacy path mapping?
MRM-1200,broen,Bruno Malaquin,2009-07-02T03:10:28.712Z,2009-07-02T03:10:28.712Z,"Yes, of course.

This one doesn't work for zip or tar.gz (for ""Jar"" artifacts that works):

				<repository>
					<id>maven-1</id>
					<name>Maven 1 Repository</name>
					<url>http://myhost/archiva/repository/maven-1/</url>
					<layout>legacy</layout>
					<releases>
						<enabled>true</enabled>
					</releases>
					<snapshots>
						<enabled>true</enabled>
					</snapshots>
				</repository>	

This one works for zip or tar.gz :
		
				<repository>
					<id>maven-1-apache</id>
					<name>Maven 1 Repository by Apache</name>
					<url>http://myhost/maven1/</url>
					<layout>legacy</layout>
					<releases>
						<enabled>true</enabled>
					</releases>
					<snapshots>
						<enabled>true</enabled>
					</snapshots>
				</repository>	

So, i put the both in my settings.xml in waiting bug fix."
MRM-1235,brettporter,Brett Porter,2010-02-23T01:22:37.526Z,2010-02-23T01:22:37.526Z,superceded by MRM-1025
MRM-1236,jzurbano,jzurbano,2009-08-19T07:59:17.779Z,2009-08-19T07:59:17.779Z,Fixed in r805782.
MRM-1202,henryju,Julien HENRY,2009-06-12T08:46:51.035Z,2009-06-12T08:46:51.035Z,"In fact this is not critical as the password is correctly updated.

Only the success message is broken.

Please update bug priority as I don't have the rights to do it."
MRM-1202,wsmoak,Wendy Smoak,2009-06-14T20:18:39.679Z,2009-06-14T20:18:39.679Z,This is actually a problem in Redback (and affects Continuum as well.)  See REDBACK-222
MRM-1202,oching,Maria Odea Ching,2009-07-28T02:54:49.751Z,2009-07-28T02:54:49.751Z,We need to upgrade to Redback 1.3 (still in development version) to get the fix.
MRM-1202,oching,Maria Odea Ching,2009-07-28T03:44:07.843Z,2009-07-28T03:44:07.843Z,Archiva's Redback upgraded to 1.3-SNAPSHOT in trunk -r798444. I already deployed a new Redback snapshot to the codehaus snapshots repo. 
MRM-1203,henryju,Julien HENRY,2009-07-06T07:27:21.323Z,2009-07-06T07:27:21.323Z,Duplicate of MRM-1202
MRM-1263,brettporter,Brett Porter,2010-02-23T02:06:58.78Z,2010-02-23T02:06:58.78Z,fo consideration with the nexus indexer upgrade
MRM-1263,olamy,Olivier Lamy (*$^%`),2012-09-12T16:47:38.051Z,2012-09-12T16:47:38.051Z,done
MRM-1225,brettporter,Brett Porter,2009-07-25T00:11:02.486Z,2009-07-25T00:11:02.486Z,"is this a regression in 1.2.2 that you've found, or was it not working previously?"
MRM-1225,oching,Maria Odea Ching,2009-07-26T21:39:05.338Z,2009-07-26T21:39:05.338Z,Did you try clearing your browser's cache after adding or deleting a repository?
MRM-1225,gautencio,Gwen Harold Autencio,2009-07-26T21:54:30.771Z,2009-07-26T21:54:30.771Z,Clearing the cache of the browser updates the contents of the repository group.
MRM-1270,oching,Maria Odea Ching,2009-12-29T03:46:05.275Z,2009-12-29T03:46:05.275Z,"Fixed in trunk [-r894332|http://svn.apache.org/viewvc?revision= 894332&view=revision].
Error message changed to ""You do not have access to any repository. Please contact your system administrator and request for access."""
MRM-1276,oching,Maria Odea Ching,2009-11-19T05:14:46.405Z,2009-11-19T05:14:46.405Z,"The code itself needs clean up as well. Tests are very dependent on each other, making it hard to add new tests without breaking the other tests because of these dependencies. There are also a lot of commented out parts in the source that can already be removed."
MRM-1276,mbaclay,mbaclay,2010-03-30T00:24:29.099Z,2010-03-30T00:24:29.099Z,"At revision 928992,

- removed src/test/it
- removed src/test/it-resources and transferred its contents in src/test/resources"
MRM-1276,mbaclay,mbaclay,2010-03-30T01:21:09.097Z,2010-03-30T01:21:09.097Z,"At revision 929005,
- removed it.properties in src/test/resources
- updated the path in property file and some classes for the changes made in r.928992"
MRM-1276,mbaclay,mbaclay,2010-04-06T05:50:36.724Z,2010-04-06T05:50:36.724Z,"At revision 931081,
- used getSelenium().open() instead of clickLinkWithText() in RepositoryTest.java"
MRM-1276,mbaclay,mbaclay,2010-04-07T04:31:42.196Z,2010-04-07T04:31:42.196Z,"At revision 931475,
- fixed poor formatting in the source code (tabs, etc) following the Maven Code Style

At revision 931478,
- added licence to AbstractArtifactManagementTest class"
MRM-1276,mbaclay,mbaclay,2010-04-13T20:03:55.359Z,2010-04-13T20:03:55.359Z,"At revision 933824:
- modified LoginTest to use the methods in abstract class
- removed the unnecessary commented out lines"
MRM-1299,brettporter,Brett Porter,2010-02-23T00:48:12.98Z,2010-02-23T00:48:12.98Z,merged to trunk
MRM-1282,brettporter,Brett Porter,2009-11-27T18:23:07.486Z,2009-11-27T18:23:07.486Z,this is now in place on the branch
MRM-1259,brettporter,Brett Porter,2009-10-07T05:25:55.652Z,2009-10-07T05:25:55.652Z,isn't it limited by the available artifact types?
MRM-1259,oching,Maria Odea Ching,2009-10-07T05:32:37.329Z,2009-10-07T05:32:37.329Z,No :( \*\*/\* was hard-coded in getIncludes() of the consumer.
MRM-1261,schulte77,Christian Schulte,2009-10-13T17:59:24.284Z,2009-10-13T17:59:24.284Z,"This happens when the artifact searched for is found.
"
MRM-1261,brettporter,Brett Porter,2011-09-12T10:58:17.719Z,2011-09-12T10:58:17.719Z,not present in 1.3.5
MRM-1242,brettporter,Brett Porter,2010-02-23T00:55:42.101Z,2010-02-23T00:55:42.101Z,works fine under the new metadata
MRM-1240,gautencio,Gwen Harold Autencio,2009-09-01T03:45:04.208Z,2009-09-01T03:45:04.208Z,"Hi, attaching patch for this issue and for MRM-1238.

The patch also includes fix for the NPE that occurs when user tries to disable all known content consumers in the repository scanning page."
MRM-1240,gautencio,Gwen Harold Autencio,2009-09-02T20:05:39.504Z,2009-09-02T20:05:39.504Z,Hi attached another patch that includes unit tests in the patch. Thanks.
MRM-1240,jzurbano,jzurbano,2009-09-10T08:57:24.089Z,2009-09-10T08:57:24.089Z,"Fixed in r813439 with minor modifications in the patch.
- removed the log.error() in the patch
- test: moved the initialization of consumers in setup()

Thanks Gwen! :)"
MRM-1228,oching,Maria Odea Ching,2009-11-22T06:24:16.621Z,2009-11-22T06:24:16.621Z,"Fixed in trunk [-r883066|http://svn.apache.org/viewvc?revision=883066&view=revision] with the following changes:
* changed from TestService to PingService
* fixed bean config in applicationContext in webapp
* added service object annotation for xmlrpc binder"
MRM-1228,oching,Maria Odea Ching,2009-11-22T06:26:02.957Z,2009-11-22T06:26:02.957Z,Added ping invocation from sample client in trunk [-r883067|http://svn.apache.org/viewvc?revision=883067&view=revision]
MRM-1239,oching,Maria Odea Ching,2009-08-26T03:07:22.356Z,2009-08-26T03:07:22.356Z,"See the following thread in the dev list for more details:

http://www.nabble.com/-VOTE--Release-Archiva-1.2.2-to25119980.html"
MRM-1239,oching,Maria Odea Ching,2009-08-26T04:35:40.876Z,2009-08-26T04:35:40.876Z,Updating summary to reflect correct problem
MRM-1239,oching,Maria Odea Ching,2009-08-27T01:48:52.23Z,2009-08-27T01:48:52.23Z,"Fixed in trunk -r808295 with the following fixes:
* unit tests to replicate issue
* allow three directory levels for metadata and metadata checksums when checking if repository layout is default"
MRM-1297,sebb@apache.org,Sebb,2009-12-17T23:11:26.003Z,2009-12-17T23:11:26.003Z,"Seems to me this ought to be fixed for the current release, not postponed to the next release."
MRM-1297,wsmoak,Wendy Smoak,2009-12-18T00:17:37.209Z,2009-12-18T00:17:37.209Z,"The main website isn't actually versioned with the release, it can be changed any time.

I'll put this on my list for tomorrow and copy over what I did at Continuum."
MRM-1297,wsmoak,Wendy Smoak,2009-12-18T16:35:56.298Z,2009-12-18T16:35:56.298Z,"downloads page updated in r892389, but the KEYS file isn't where it should be in /dist/archiva.  See dev@ discussion, and I'll leave this open until that's resolved and the site is published."
MRM-1297,wsmoak,Wendy Smoak,2009-12-30T14:41:03.345Z,2009-12-30T14:41:03.345Z,Done.  See http://archiva.apache.org/download.html
MRM-1209,wsmoak,Wendy Smoak,2009-07-06T18:19:18.269Z,2009-07-06T18:19:18.269Z,Related thread:  http://www.nabble.com/Project-tree-(like-dependency-tree)-td24364270.html
MRM-1286,brettporter,Brett Porter,2009-11-26T00:56:03.269Z,2009-11-26T00:56:03.269Z,"works under the new metadata content repository. Note that if that is not merged into 1.3, then an alternate solution to this bug will need to be found"
MRM-1296,oching,Maria Odea Ching,2009-12-08T23:47:53.783Z,2009-12-08T23:47:53.783Z,"Thread discussion in dev list:

http://old.nabble.com/-PROPOSAL--Audit-Log-Report-td26675615.html"
MRM-1296,oching,Maria Odea Ching,2009-12-16T00:00:52.244Z,2009-12-16T00:00:52.244Z,"What's already done in the [branch|http://svn.apache.org/repos/asf/archiva/branches/MRM-1296/]:
* query form for audit logs
* latest 10 events shown in table form when you initially go to the Audit Log Report page 
* only users with Global Repository Manager roles are able to access Audit Log Report
* selenium test
* audit logs for artifact uploads and deployments via web form and web dav are logged in the database and can already be queried
* pagination of query results based on specified row count
* documentation
"
MRM-1296,oching,Maria Odea Ching,2010-01-11T09:09:43.305Z,2010-01-11T09:09:43.305Z,Branch merged to trunk [-r897892|http://svn.apache.org/viewvc?revision=897892&view=revision].
MRM-1256,axismundi,Marc Lustig,2009-09-23T10:09:19.114Z,2009-09-23T10:09:19.114Z,"I have a few typos in the issue descriptions, but I have no rights to edit it.

First, it would be better to have two methods for each repo-type, like
- beforeReleaseDeployment
- afterReleaseDeployment
- beforeSnapshotDeployment
- afterSnapshotDeployment

I digged a bit into the Archiva-code.
The right starting-point to implement this cross-cutting logic would be org.apache.maven.archiva.webdav.RepositoryServlet.
It seems that the actual operation is really a plain dav-operation performed by jackrabbit.

So, at line #124 the following steps need to be performed:
- identify the target repo (name, type) from the dav-request
- build the runtime-object based on info from the request as well as from some static archiva-source
- create the implementation class
- call before___Deployment(runtime)

After calling AbstractWebdavServlet.execute(), 
- the runtime-object should be fed with the result of the request and
- the after___Deployment(runtime) called.

thoughts?"
MRM-1256,brettporter,Brett Porter,2009-09-23T18:05:26.434Z,2009-09-23T18:05:26.434Z,"I think this is best worked together with the event ideas for 1.3. If you did want to start working on a patch we could use that as a starting point.

In 1.2 you can already achieve some of the after* functionality by using a consumer which will be called on completion of all deployments (you can inspect the artifact to decide if it is snapshot or release). Would that help?"
MRM-1256,oching,Maria Odea Ching,2009-09-23T22:02:38.838Z,2009-09-23T22:02:38.838Z,The consumer Brett mentioned in the previous comment is the RepositoryContentConsumer. You might also want to take a look at ArchivaDavResource#addMember(..) as that's where the task for executing the consumer after a deployment is queued..
MRM-1256,axismundi,Marc Lustig,2009-10-12T08:21:24.474Z,2009-10-12T08:21:24.474Z,"I would prefer a generic solution to implement extension-points, in the way I proposed it.
This would make Archiva more customizable - and more competetive."
MRM-1256,axismundi,Marc Lustig,2009-10-16T04:18:23.927Z,2009-10-16T04:18:23.927Z,"I plan to analyze this weekend a possible implementation based on this discussion.

http://www.nabble.com/helping-to-implement-MRM-1256-td25855756.html"
MRM-1256,brettporter,Brett Porter,2010-02-22T23:46:28.766Z,2010-02-22T23:46:28.766Z,"the branch code is now merged in and might start making this easier, or at least give us a framework to add it into and we can adjust legacy code. Marc, have you made any progress?"
MRM-1256,axismundi,Marc Lustig,2010-02-25T07:13:13.361Z,2010-02-25T07:13:13.361Z,"Sorry, no :-(   We had trouble with our Archiva instance regarding artifact integrity and I had no time to spend in new featiures..."
MRM-1283,brettporter,Brett Porter,2009-11-27T18:23:16.531Z,2009-11-27T18:23:16.531Z,this is now in place on the branch
MRM-1283,brettporter,Brett Porter,2009-11-28T05:50:30.568Z,2009-11-28T05:50:30.568Z,enhanced to import any missing information from the backing storage repository on-demand
MRM-1230,oching,Maria Odea Ching,2009-10-08T05:02:34.041Z,2009-10-08T05:02:34.041Z,"Fixed in trunk -r823109 with the following fixes:
* for each search hit, get project model via repositorybrowse#selectVersion(..) where complete project model is retrieved instead of just the bare artifact obj
* added tests"
MRM-1230,ctan,Maria Catherine Tan,2009-10-09T02:03:43.377Z,2009-10-09T02:03:43.377Z,Additional unit test
MRM-1246,wsmoak,Wendy Smoak,2009-09-04T10:58:51.473Z,2009-09-04T10:58:51.473Z,"When this happens, I notice that the deleted artifacts are still visible in search/browse, meaning they are still in the database.

I think it's less that the metadata update consumer didn't run, and more that Archiva didn't ""see"" the deletion at all, so there were no events for the various consumers to process.
"
MRM-1246,gautencio,Gwen Harold Autencio,2009-09-10T01:03:32.337Z,2009-09-10T01:03:32.337Z,"Hi, attaching patch. 
Is this ok if it compares the lastModified of the file being scanned and the directory of the artifact containing.
Consumer will be run when directory of the artifact has the latest modification than the basefile.
Thanks."
MRM-1246,gautencio,Gwen Harold Autencio,2009-09-10T21:12:54.286Z,2009-09-10T21:12:54.286Z,"Sorry, attaching an updated patch for issue. Thanks."
MRM-1246,jzurbano,jzurbano,2009-10-11T23:31:24.239Z,2009-10-11T23:31:24.239Z,"Fixed in r824220.
- added unit test for updating metadata       
- added unit test sample artifacts
- applied the patch

Thanks Gwen! :)"
MRM-1246,brettporter,Brett Porter,2009-10-15T03:40:30.108Z,2009-10-15T03:40:30.108Z,this was reverted as about 30% of the artifacts were being processed on every scan.
MRM-1246,yanke,yanke,2009-10-27T07:36:45.636Z,2009-10-27T07:36:45.636Z,"in case somebody searches for a workaround:

we had the same problem but with Archiva 1.2.2 we have been able to remove it using the ""Delete Artifact"" menu.

Not as efficient as automatic updating the DB, but at least the wrong version was gone.

I haven't tested if ""Delete Artifact"" would delete an artifact from DB also if it does not exist on the repository (I have manually added it before deleting)



"
MRM-1246,jzurbano,jzurbano,2009-11-02T20:42:10.743Z,2009-11-02T20:42:10.743Z,"Thanks Yanke for the workaround. :)

The fix for MRM-1056 (Option to force scanning of an artifact/repository regardless of file dates) also fixes this issue."
MRM-1253,axismundi,Marc Lustig,2009-09-17T04:38:55.151Z,2009-09-17T04:38:55.151Z,"I would like to help debugging this if you could help me to adjust log4j.xml in such way that repo-scan is debugged into a separate file.
Especially I need to know which package-names are relevant."
MRM-1253,oching,Maria Odea Ching,2009-09-17T05:04:36.885Z,2009-09-17T05:04:36.885Z,"Hi Marc, you need to add the following config in log4j.xml:

{code}
   <appender name=""repoScanLog"" class=""org.apache.log4j.DailyRollingFileAppender"">
    <param name=""file"" value=""${appserver.base}/logs/archiva-repo-scanning.log"" />
    <param name=""append"" value=""true"" />
    <param name=""datePattern"" value=""'.'yyyy-MM-dd"" />
    <layout class=""org.apache.log4j.PatternLayout"">
      <param name=""ConversionPattern"" value=""%d{yyyy-MM-dd HH:mm:ss} %m%n""/>
    </layout>
  </appender>

  <logger name=""org.apache.maven.archiva.consumers"" additivity=""false"">
    <level value=""debug""/>
    <appender-ref ref=""repoScanLog""/>
  </logger>

  <logger name=""org.apache.archiva.consumers"" additivity=""false"">
    <level value=""debug""/>
    <appender-ref ref=""repoScanLog""/>
  </logger>

  <logger name=""org.apache.maven.archiva.repository.scanner"" additivity=""false"">
    <level value=""debug""/>
    <appender-ref ref=""repoScanLog""/>
  </logger>

  <logger name=""org.apache.maven.archiva.scheduled.executors"" additivity=""false"">
    <level value=""debug""/>
    <appender-ref ref=""repoScanLog""/>
  </logger>
{code}

I'm having a hard time reproducing this problem. The repository I was using was not very large though, so that could also be a factor as well. Thanks in advance for your help in debugging this :)"
MRM-1253,axismundi,Marc Lustig,2009-09-17T05:14:09.117Z,2009-09-17T05:14:09.117Z,"with this snippet I get endless
java.lang.NullPointerException
log4j:ERROR Error occured while converting date.

not sure what is wrong thou"
MRM-1253,oching,Maria Odea Ching,2009-09-17T05:32:44.357Z,2009-09-17T05:32:44.357Z,"Ahh.. you're using Tomcat, it's that logging problem again. I was running the standalone bundle so the above config was working fine. 

I found this in Google which could possibly solve the logging problems:

http://www.myeclipseide.com/PNphpBB2+file-viewtopic-t-11968.html"
MRM-1253,axismundi,Marc Lustig,2009-09-17T10:46:44.81Z,2009-09-17T10:46:44.81Z,"tomcat seems to use java.util.logging, so there is hardly any conflict between different versions of log4j or commons-logging."
MRM-1253,brettporter,Brett Porter,2009-09-17T20:36:51.344Z,2009-09-17T20:36:51.344Z,"the timing is probably not the important thing, so you could just remove %d{...} from the pattern layout"
MRM-1253,axismundi,Marc Lustig,2009-09-18T08:22:30.98Z,2009-09-18T08:22:30.98Z,"hmm, we have other Appenders configured that use pretty much the same ConversionPattern.
It's not urgent now as I have commented out the snippet, but I wonder what is really causing the NPE."
MRM-1253,wsmoak,Wendy Smoak,2009-09-18T08:35:44.813Z,2009-09-18T08:35:44.813Z,"I have the same problem.  Artifacts that I *know* are in the repository do not show up in a search, and no amount of scanning and updating helps."
MRM-1253,oching,Maria Odea Ching,2009-09-23T02:50:13.807Z,2009-09-23T02:50:13.807Z,"Looking at the repository scanning and indexing debug logs from Marc, there were some logs for a couple of xmlbeans artifacts that says it was added to the indexing queue. I didn't see any logs regarding it being actually indexed whereas there were logs for that for other artifacts. The log snippet were not complete though so it is possible that the indexing task for the xmlbeans artifacts just wasn't executed yet. I'll see what I can dig up further."
MRM-1253,oching,Maria Odea Ching,2009-10-06T05:10:25.799Z,2009-10-06T05:10:25.799Z,"Hi Marc, 

I took a look at the last log file you've sent, I think it's still not complete :( The last artifact in the logs that was added to the index was way back above the xmlbeans artifact, so I don't think the xmlbeans were indexed yet in the logs. What are the other artifacts that doesn't show up in the search which I could check against the log file?

Thanks,
Deng"
MRM-1253,oching,Maria Odea Ching,2009-10-06T22:03:48.961Z,2009-10-06T22:03:48.961Z,"I found some artifacts in our internal Archiva repository that I wasn't able to search for. I re-indexed the repository and after a while, I was able to search for these artifacts. I found a few other artifacts on a larger repository which I wasn't able to find from the Archiva search. I'll try re-indexing this repository and see if I can search for them later."
MRM-1253,oching,Maria Odea Ching,2009-10-13T02:20:39.011Z,2009-10-13T02:20:39.011Z,"The indexing is taking a while to complete for large repositories. I had been scanning a 40gb repository and its been taking a few days for the indexing to completely finish. Can someone confirm if the artifact that cannot be searched appeared after a few days? 

MRM-1260 can also be the cause why some artifacts do not appear in the search."
MRM-1253,axismundi,Marc Lustig,2009-10-13T02:35:12.503Z,2009-10-13T02:35:12.503Z,"hi Deng, the scan-process had definately completed.
I took the logfile even a day after the scan took place.
This repo has just around 12 GB and it's a high performance server with SAN-volumes. It never took more than 2 hours here.
I will see if I can find other artifacts that do not show up in the search function. Recently there have been plenty of them."
MRM-1253,brettporter,Brett Porter,2009-10-14T10:01:18.779Z,2009-10-14T10:01:18.779Z,"note that the banner that indicates the scanning is complete no longer means that the artifacts have been indexed, since they are done in a parallel queue. The improvements I've just made to performance of the indexing may help here."
MRM-1253,jzurbano,jzurbano,2010-01-12T06:00:03.282Z,2010-01-12T06:00:03.282Z,"I have verified the issue using Archiva r898186 with a 12 GB repository.

Artifacts that did not appear in Archiva browse appeared after forcing a repository scan.
"
MRM-1205,jzurbano,jzurbano,2009-08-18T03:48:12.404Z,2009-08-18T03:48:12.404Z,"I cannot reproduce the error encountered using -r805312 with the following steps:
1.  Make sure a managed repository is not linked to any remote repositories (via proxy connectors)
2.  Use the managed repository as the download repository like for example, building a project.
    Make sure that the artifact needed for the project to build successfully is not found in the repository.

The createWorkingDirectory is not reached in this scenario.
"
MRM-1298,olamy,Olivier Lamy (*$^%`),2014-03-02T16:53:47.868Z,2014-03-02T16:53:47.868Z,fixed
MRM-1213,olamy,Olivier Lamy (*$^%`),2012-10-13T16:29:46.939Z,2012-10-13T16:29:46.939Z,cannot reproduce with new UI.
MRM-1268,oching,Maria Odea Ching,2010-01-12T02:00:04.506Z,2010-01-12T02:00:04.506Z,Thanks for the patch Andreas :) Patch applied to trunk [-r898212|http://svn.apache.org/viewvc?revision=898212&view=revision]
MRM-1257,jzurbano,jzurbano,2009-09-24T23:16:19.412Z,2009-09-24T23:16:19.412Z,Fixed in r818710.
MRM-1279,brettporter,Brett Porter,2009-12-03T16:52:23.116Z,2009-12-03T16:52:23.116Z,what timezone are you in? Perhaps the calendar widget is using a fixed timezone.
MRM-1279,brettporter,Brett Porter,2009-12-20T23:10:39.41Z,2009-12-20T23:10:39.41Z,I've also upgraded to a newer version of the UI widget in Archiva 1.2.3. Please let us know if that helps.
MRM-1272,brettporter,Brett Porter,2009-11-13T00:32:23.573Z,2009-11-13T00:32:23.573Z,was there any further exceptions? What happens if you delete the .index and .indexer directories and restart the server?
MRM-1272,andreas_baumann,Andreas Baumann,2009-11-13T09:52:15.856Z,2009-11-13T09:52:15.856Z,"no further exceptions and the situation recovered. I can't really reproduce it.
For sure deleting the Lucene index helps..
"
MRM-1272,brettporter,Brett Porter,2009-12-03T16:40:49.501Z,2009-12-03T16:40:49.501Z,"I've added extra logging for the cause of the error. While thids may not fix the error, it should reveal the problem if it occurs again."
MRM-1229,brettporter,Brett Porter,2009-08-21T13:58:08.646Z,2009-08-21T13:58:08.646Z,possibly related to MRM-1080?
MRM-1229,brettporter,Brett Porter,2009-08-21T13:58:21.401Z,2009-08-21T13:58:21.401Z,need to check if the XMLRPC needs an update too
MRM-1229,ctan,Maria Catherine Tan,2009-10-08T18:24:52.286Z,2009-10-08T18:24:52.286Z,"I was able to replicate this though I'm not sure if I have the same cause as Fabien.

I did a quick search on ""velocity"" and the web application gave me five results but the xmlrpc only gave 4.

I debug this and found out that one artifact was not in the database so it's throwing an ObjectNotFoundException.
"
MRM-1229,ctan,Maria Catherine Tan,2009-10-08T20:42:19.573Z,2009-10-08T20:42:19.573Z,"The artifact doesn't have a pom so I'm getting the ObjectNotFoundException when it tries to retrieve the pom artifact from the database.

This has been fixed by MRM-1230."
MRM-1234,mbaclay,mbaclay,2009-08-13T04:45:52.059Z,2009-08-13T04:45:52.059Z,Fixed in r.803821.
MRM-1206,mbaclay,mbaclay,2009-06-25T03:59:45.195Z,2009-06-25T03:59:45.195Z,This  issue occur with java version 1.6. I tried using java version 1.5 and it worked fine.
MRM-1206,gautencio,Gwen Harold Autencio,2009-07-22T04:16:04.538Z,2009-07-22T04:16:04.538Z,"Encountered the problem using trunk, 1.2.2-SNAPSHOT.
java version ""1.6.0_01""

Attaching patch for issue.
Patch contains upgraded versions of struts2-core and struts2-spring-plugin from 2.0.11.2 to 2.0.14."
MRM-1206,sfcoy,Stephen Coy,2009-10-29T19:03:47.391Z,2009-10-29T19:03:47.391Z,Upgrading from xwork-2.0.5 to xwork-2.0.7 fixed this for me in Archiva 1.2.2.
MRM-1206,brettporter,Brett Porter,2010-03-01T00:08:06.443Z,2010-03-01T00:08:06.443Z,this looks like a straightforward fix for 1.3.x
MRM-1206,oching,Maria Odea Ching,2010-04-02T05:37:16.888Z,2010-04-02T05:37:16.888Z,Patch applied to trunk [-r930230|http://svn.apache.org/viewvc?revision=930230&view=revision]. Thanks for the patch Gwen!
MRM-1206,oching,Maria Odea Ching,2010-04-02T05:49:00.586Z,2010-04-02T05:49:00.586Z,Merged to trunk in [-r930231|http://svn.apache.org/viewvc?revision=930231&view=revision].
MRM-1214,oching,Maria Odea Ching,2009-07-11T21:17:32.131Z,2009-07-11T21:17:32.131Z,Thanks for the patch jmcg! I already applied it to trunk -r793260.
MRM-1201,githubbot,ASF GitHub Bot,2015-12-20T17:58:33.724Z,2015-12-20T17:58:33.724Z,"GitHub user jmutawa opened a pull request:

    https://github.com/apache/archiva/pull/20

    Implements JIRA issue MRM-1201

    Hello, I am interested in joining Archiva development. Please find implementation of JIRA issue MRM-1201.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/jmutawa/archiva master

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/archiva/pull/20.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #20
    
----
commit 27624966254af12ac94b82946550f9e6b7ba9a0f
Author: Jalal Almutawa <jalal.almutawa@gmail.com>
Date:   2015-12-20T17:55:12Z

    Implements JIRA issue MRM-1201

----
"
MRM-1201,githubbot,ASF GitHub Bot,2015-12-21T13:40:45.735Z,2015-12-21T13:40:45.735Z,"Github user jmutawa commented on the pull request:

    https://github.com/apache/archiva/pull/20#issuecomment-166308189
  
    Hello, it seems the build was not happy because there is a space in a folder path, it also seems to be blaming my pull request for it.
    
    Kindly let me know if there is anything I can do from my side.
"
MRM-1201,githubbot,ASF GitHub Bot,2016-01-24T07:06:23.948Z,2016-01-24T07:06:23.948Z,"Github user asfgit closed the pull request at:

    https://github.com/apache/archiva/pull/20
"
MRM-1201,olamy,Olivier Lamy (*$^%`),2016-01-24T07:07:25.001Z,2016-01-24T07:07:25.001Z,"pr merged.
Thanks!"
MRM-1201,hudson,Hudson,2016-01-24T07:56:28.277Z,2016-01-24T07:56:28.277Z,"SUCCESS: Integrated in archiva-master-build #939 (See [https://builds.apache.org/job/archiva-master-build/939/])
Implements JIRA issue MRM-1201 (jalal.almutawa: [https://github.com/apache/archiva/commit/27624966254af12ac94b82946550f9e6b7ba9a0f])
* archiva-modules/archiva-web/archiva-web-common/src/main/resources/org/apache/archiva/i18n/default.properties
* archiva-modules/archiva-web/archiva-webapp/src/main/webapp/js/archiva/artifacts-management.js
"
MRM-1201,k_razi_ahmad,Razi Ahmad,2016-02-16T10:10:44.626Z,2016-02-16T10:10:44.626Z,hey Olivier. i have some doubt regarding MWAR-192. how can i contact you. it is very urgent.
MRM-1201,k_razi_ahmad,Razi Ahmad,2016-02-16T12:23:18.75Z,2016-02-16T12:23:18.75Z,can you tell me how to apply that patch MWAR-192 for my apceh maven project. 
MRM-1219,brettporter,Brett Porter,2009-07-15T16:55:27.706Z,2009-07-15T16:55:27.706Z,"other changes to be made:
- upgrade to slf4j 1.5.8
- remove commons-logging-api from the web application lib directory"
MRM-1249,oching,Maria Odea Ching,2009-09-10T01:44:01.26Z,2009-09-10T01:44:01.26Z,The actual index is the one in the Index Directory configured for the repository while the .index created inside the repository contains the packaged index. I'm not sure if we can set this to be configurable as well because I think certain consumers of the Nexus index such as m2eclipse looks for the zipped index in the .index directory at the root of the repository directory.
MRM-1249,wsmoak,Wendy Smoak,2009-09-10T08:43:56.46Z,2009-09-10T08:43:56.46Z,"Okay, then it needs to be clarified in the documentation, since when I configure the index directory, I expect all index-related stuff to go there.

Actually I can't find anything about the index directory:  http://www.google.com/search?q=site:archiva.apache.org+index+directory"
MRM-1249,oching,Maria Odea Ching,2009-09-17T03:58:13.892Z,2009-09-17T03:58:13.892Z,"Updated the Repositories docs to include the index directory field including what it is used for and also the non-configurable .index dir, in trunk -r816099. Would this be sufficient enough to close the issue?"
MRM-1285,brettporter,Brett Porter,2009-11-25T04:45:37.158Z,2009-11-25T04:45:37.158Z,Reminds me of this: http://yfrog.com/1eziej
MRM-1285,brettporter,Brett Porter,2009-12-21T05:11:29.422Z,2009-12-21T05:11:29.422Z,bumping minor issue
MRM-1285,brettporter,Brett Porter,2009-12-21T05:12:05.872Z,2009-12-21T05:12:05.872Z,this is corrected on the MRM-1025 branch
MRM-1274,oching,Maria Odea Ching,2009-11-08T20:24:03.967Z,2009-11-08T20:24:03.967Z,Need to verify if this has been fixed by MRM-1230.
MRM-1274,oching,Maria Odea Ching,2009-11-22T02:38:15.452Z,2009-11-22T02:38:15.452Z,"Fixed in trunk [-r883046|http://svn.apache.org/viewvc?revision=883046&view=revision] with the following changes:
* get repo id from db since it's not set in search result
* set repositoryId as bean field in Artifact obj so it's included when bean is converted
* updated unit tests"
MRM-1243,oching,Maria Odea Ching,2009-09-02T06:26:28.75Z,2009-09-02T06:26:28.75Z,Patch applied to trunk -r810457. Thanks again Julien! :)
MRM-1277,oching,Maria Odea Ching,2009-11-16T02:38:27.633Z,2009-11-16T02:38:27.633Z,"Initial tests committed to trunk [-r880666|http://svn.apache.org/viewvc?revision=880666&view=revision]:
* added webapp tests for searching non existing artifacts and when no search criteria is specified in advanced search"
MRM-1277,oching,Maria Odea Ching,2010-01-10T19:53:36.804Z,2010-01-10T19:53:36.804Z,"Advanced search tests that needs to be written:
* search for artifacts where the user has no access to the specified repository
* search for existing artifacts using different advanced search criteria"
MRM-1277,oching,Maria Odea Ching,2010-01-11T07:58:26.596Z,2010-01-11T07:58:26.596Z,Remaining tests committed to trunk [-r897862|http://svn.apache.org/viewvc?revision=897862&view=revision].
MRM-1241,mbaclay,mbaclay,2009-08-26T20:56:31.081Z,2009-08-26T20:56:31.081Z,added tests for Repository Scanning in r.808252.
MRM-1241,brettporter,Brett Porter,2009-08-28T02:24:36.126Z,2009-08-28T02:24:36.126Z,"adjusting affects version, it can't affect something that doesn't exist yet :)"
MRM-1241,brettporter,Brett Porter,2009-08-28T02:24:47.132Z,2009-08-28T02:24:47.132Z,is this completed for 1.2.3 then?
MRM-1241,mbaclay,mbaclay,2009-08-28T02:45:49.142Z,2009-08-28T02:45:49.142Z,Yes. Will add and then commit tests for Database shortly. I'm still fixing the failed/skipped tests as of the moment.
MRM-1241,mbaclay,mbaclay,2009-12-04T01:07:16.678Z,2009-12-04T01:07:16.678Z,fixed at r.887086
MRM-1207,oching,Maria Odea Ching,2009-07-11T21:40:40.481Z,2009-07-11T21:40:40.481Z,Patch applied to trunk -r793261. Thanks Marica!
MRM-1293,brettporter,Brett Porter,2009-12-07T17:27:49.836Z,2009-12-07T17:27:49.836Z,"have started to commit this implementation to the MRM-1025 branch. Currently only the last bullet point remains to be implemented, as well as to re-add the storage of extended statistics (artifact counts), then to clean up the old beans."
MRM-1293,brettporter,Brett Porter,2009-12-08T05:32:34.061Z,2009-12-08T05:32:34.061Z,"the main portion of work is now done. However, it is not currently doing the total artifact counts that were done from the database. This needs to be revisited before closing the issue"
MRM-1281,brettporter,Brett Porter,2009-11-19T17:25:03.973Z,2009-11-19T17:25:03.973Z,merged to trunk - since these didn't do anything I don't think it's a problem to remove them in a point release
MRM-1252,guntasg,Guntas,2009-09-16T04:35:47.86Z,2009-09-16T04:35:47.86Z,Read the subject as 'Changing the repository indentifier breaks the entire repository index'
MRM-1252,brettporter,Brett Porter,2009-09-17T11:31:46.006Z,2009-09-17T11:31:46.006Z,you should be able to delete the index and have it regenerated per the instructions on the site.
MRM-1252,guntasg,Guntas,2009-09-17T14:56:16.682Z,2009-09-17T14:56:16.682Z,"Please point me to the instructions on deleting the index. I am sorry, but could not find that on the Archiva site.

Thanks for helping."
MRM-1252,brettporter,Brett Porter,2009-09-17T19:32:15.743Z,2009-09-17T19:32:15.743Z,"As posted to dev@:

{quote}
I used the following link (as I was upgrading from 1.1.x to 1.2.2)

http://archiva.apache.org/docs/1.2.2/adminguide/upgrade.html

You can find the commands to remove and reconfigure the indexing for
repositories.


Alternatively, another useful link for new installations is
http://archiva.apache.org/docs/1.2.2/adminguide/installing.html
{quote}

Please follow up with further questions on users@archiva.apache.org."
MRM-1252,guntasg,Guntas,2009-09-18T04:45:10.118Z,2009-09-18T04:45:10.118Z,Thanks Brett..
MRM-1204,davecheney,davecheney,2009-06-17T00:44:43.344Z,2009-06-17T00:44:43.344Z,"also occurring in this code path 
{noformat}
2009-06-17 00:43:49,605 [http-j2ee_m2proxy.atlassian.com.mgmt%2F172.16.3.102-8080-36] ERROR org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - Unable to process model /export/archiva/repodata/public/org/apache/servicemix/servicemix-scripting/2009.01/servicemix-scripting-2009.01.pom due to : java.lang.NullPointerException : null
java.lang.NullPointerException
	at java.util.Hashtable.put(Hashtable.java:394)
	at org.apache.maven.archiva.repository.project.ProjectModelMerge.merge(ProjectModelMerge.java:340)
	at org.apache.maven.archiva.repository.project.ProjectModelMerge.merge(ProjectModelMerge.java:104)
	at org.apache.maven.archiva.repository.project.filters.EffectiveProjectModelFilter.mergeParent(EffectiveProjectModelFilter.java:209)
	at org.apache.maven.archiva.repository.project.filters.EffectiveProjectModelFilter.filter(EffectiveProjectModelFilter.java:106)
	at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:167)
	at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:48)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:150)
	at org.apache.maven.archiva.database.browsing.DefaultRepositoryBrowsing.selectVersion(DefaultRepositoryBrowsing.java:151)
	at org.apache.maven.archiva.web.action.ShowArtifactAction.artifact(ShowArtifactAction.java:111)
	at sun.reflect.GeneratedMethodAccessor138.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:404)
	at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:267)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:229)
	at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
	at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at org.apache.maven.archiva.web.interceptor.ConfigurationInterceptor.intercept(ConfigurationInterceptor.java:50)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at org.codehaus.plexus.redback.struts2.interceptor.PolicyEnforcementInterceptor.intercept(PolicyEnforcementInterceptor.java:115)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor.intercept(SecureActionInterceptor.java:173)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.ParameterFilterInterceptor.intercept(ParameterFilterInterceptor.java:143)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
	at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:186)
	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:121)
	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at org.codehaus.plexus.redback.struts2.interceptor.AutoLoginInterceptor.intercept(AutoLoginInterceptor.java:166)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at org.codehaus.plexus.redback.struts2.interceptor.ForceAdminUserInterceptor.intercept(ForceAdminUserInterceptor.java:77)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
	at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
	at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:118)
	at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.struts2.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:99)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:263)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:584)
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
	at java.lang.Thread.run(Thread.java:619)
{noformat}"
MRM-1204,oching,Maria Odea Ching,2009-07-28T03:56:09.852Z,2009-07-28T03:56:09.852Z,"Hi Dave, could you provide one of the poms being merged which results to the NPE so we could use it to replicate the issue? Thanks in advance"
MRM-1204,jzurbano,jzurbano,2009-08-13T06:04:21.534Z,2009-08-13T06:04:21.534Z,Fixed in trunk r803840.
MRM-1226,mbaclay,mbaclay,2009-07-29T01:23:48.832Z,2009-07-29T01:23:48.832Z,added 22 tests in r.798789
MRM-1226,brettporter,Brett Porter,2009-08-21T13:55:55.077Z,2009-08-21T13:55:55.077Z,"what more is needed to close this, or can it be closed for 1.2.2?"
MRM-1226,mbaclay,mbaclay,2009-08-23T08:16:11.209Z,2009-08-23T08:16:11.209Z,"closing the issue now, will file another issue for additional tests soon. thanks!"
MRM-1211,brettporter,Brett Porter,2009-07-25T00:11:41.732Z,2009-07-25T00:11:41.732Z,perhaps more appropriate would be to shrink the logo to fit (including proportions)
MRM-1211,mbaclay,mbaclay,2009-08-13T01:57:16.423Z,2009-08-13T01:57:16.423Z,The logo is also displayed below the Organization Information. See screen shot attached.
MRM-1208,oching,Maria Odea Ching,2009-06-26T03:51:23.186Z,2009-06-26T03:51:23.186Z,"Duplicates MRM-1168. This is already fixed in trunk and will be available in 1.2.2 :)
"
MRM-1292,brettporter,Brett Porter,2009-12-01T10:03:23.01Z,2009-12-01T10:03:23.01Z,done on the MRM-1025 branch
MRM-1280,oching,Maria Odea Ching,2009-11-18T23:11:17.748Z,2009-11-18T23:11:17.748Z,"To reproduce this:
# Go to Upload Artifact page and upload a new artifact with the following coordinates:
#* groupId: org.apache.archiva
#* artifactId: archiva-indexer
#* version: 1.0-SNAPSHOT
#* packaging: jar
# Tick Generate Maven 2 POM checkbox
# Select snapshots for the repository
# Add a SNAPSHOT artifact and click Submit
# After uploading the artifact, browse it from the webapp browse

Notice that in the download box, only the Jar file is shown. The Other Versions field in the artifact info page shows the timestamp version and when you click it, you'll be redirected to the artifact info page that shows only the Pom file in the download box.

Running the database scanning solves this problem though.

"
MRM-1280,oching,Maria Odea Ching,2009-11-19T00:28:14.195Z,2009-11-19T00:28:14.195Z,The download link for the jars are also incorrect as it points to the generic snapshot (e.g. 1.0-SNAPSHOT) instead of the timestamped one that is actually in the repository.
MRM-1280,brettporter,Brett Porter,2009-12-03T16:42:12.18Z,2009-12-03T16:42:12.18Z,will check to see if this is solved by the refactoring in MRM-1025
MRM-1280,brettporter,Brett Porter,2009-12-21T06:47:28.967Z,2009-12-21T06:47:28.967Z,"not fixed - this is a result of some badly duplicated code in UploadArtifactAction.

1) the getMetadata method retrieves the wrong level of metadata, so no snapshot info is present - therefore always deploying builder number 1 regardless of what was there before
2) the updateMetadata method isn't called due to the existence of the consumer, but that doesn't seem to handle the case of snapshots being added. The metadata should be updated and the asynchronous processes done afterwards to avoid clashes like there were before
3) the consumers are called with the 1.0-SNAPSHOT version instead of the new timestamped snapshot version, causing the incorrect information in the database

It would be better if this action could delegate to the normal PUT request in the webdav module as much as possible."
MRM-1280,jsharp,jsharp,2014-10-21T23:08:58.897Z,2014-10-21T23:08:58.897Z,"I can't reproduce this in the new UI. UploadArtifactAction no longer exists. I think this bug was fixed by version 2.0.0.

Recommend close."
MRM-1280,olamy,Olivier Lamy (*$^%`),2014-10-27T18:03:28.733Z,2014-10-27T18:03:28.733Z,Thanks for the review!!
MRM-1248,brettporter,Brett Porter,2009-09-05T05:54:17.298Z,2009-09-05T05:54:17.298Z,"Yes, this is unfortunate as we are using the JDK libraries and they require system properties.

You can try removing wagon-http-lightweight from the webapp and adding wagon-http (and it's dependencies) instead."
MRM-1248,brettporter,Brett Porter,2009-09-05T05:54:40.942Z,2009-09-05T05:54:40.942Z,we should investigate alternatives such as using the jetty http client
MRM-1248,tv,Thomas Vandahl,2009-09-07T01:51:43.376Z,2009-09-07T01:51:43.376Z,Until the fix I'd prefer this behavior to be documented. It took me hours to figure that one out.
MRM-1248,brettporter,Brett Porter,2011-02-21T22:22:32.543Z,2011-02-21T22:22:32.543Z,added some brief documentation to cover this for the next release
MRM-1248,brettporter,Brett Porter,2011-09-12T09:56:24.831Z,2011-09-12T09:56:24.831Z,should be ok in trunk
MRM-1215,jbaldassari,James Baldassari,2009-07-10T18:21:20.749Z,2009-07-10T18:21:20.749Z,"As pointed out by Dan Tran, this looks like a duplicate of MRM-1144"
MRM-1291,axismundi,Marc Lustig,2009-12-01T09:43:20.85Z,2009-12-01T09:43:20.85Z,"
I forgot to mention that this ""periodic peaks"" load-pattern occurs only from time to time.
I. e. when the pattern happens, the peaks occur periodically. But after restarting Archiva, the pattern does not occur anymore for a couple of days or weeks.

I can be sure about this because we have notifiers installed that warn when a certain HTTP-request on Archiva exceeds a certain threshold value.
We have not seen alarms between 3rd of november and 30th of november.
On the 30th out of a sudden the periodic load raised tremendously.

I doubt the RDBMS being slower could have an impact on the load.

"
MRM-1291,axismundi,Marc Lustig,2009-12-01T09:44:18.367Z,2009-12-01T09:44:18.367Z,"Please have a look at the second stat-chart by Munin.
Unfortunately we miss the data between week 46 and 48.

But when you look at the filled area in week 45, you can see very the apparent load-difference between normal scanning peaks and ""overblown"" scanning-peaks.

By the way, we do not have any other software running on that server."
MRM-1291,brettporter,Brett Porter,2009-12-03T16:47:38.135Z,2009-12-03T16:47:38.135Z,"did you have any large change in artifacts / rebuild the index in that period?

I'd like to encourage you to try 1.2.3-SNAPSHOT or the release - the hourly peaks will certainly be reduced. If it seems managable, we can close this out."
MRM-1291,axismundi,Marc Lustig,2009-12-04T03:23:03.673Z,2009-12-04T03:23:03.673Z,"I want to provide you a third chart (cpu-week2.png).
The filled area shows the ""blown-up"" load on the left half.
The second half shows the normal load.
All seems to be caused by the periodic scan processes.
"
MRM-1291,axismundi,Marc Lustig,2009-12-07T06:14:55.526Z,2009-12-07T06:14:55.526Z,"According to Brett everything will be solved in 1.2.3
Looking forward to test the release version...."
MRM-1291,brettporter,Brett Porter,2010-01-14T17:43:57.691Z,2010-01-14T17:43:57.691Z,"the release candidate is now being voted on (it is now labeled 1.3). If you get a chance to, please test it and let us know if that helps."
MRM-1291,brettporter,Brett Porter,2010-01-21T19:14:44.144Z,2010-01-21T19:14:44.144Z,closing as a duplicate of the various issues solved in 1.3. Please reopen if you continue to experience it.
MRM-1237,oching,Maria Odea Ching,2009-08-25T21:57:17.224Z,2009-08-25T21:57:17.224Z,Did you see anything in the logs that might have caused the error?
MRM-1237,thosor,Thomas,2009-08-26T01:21:18.866Z,2009-08-26T01:21:18.866Z,"oh yes, no I've got more informationen.

Some Info for you: The Archiva is running against a LDAP-Server.

The User account (not every account) is locket due to excessive login attemps.
My Problem:
1. this error says nothing to me
2. i can't unlock anybody
3. the users are locked!

How can I prevent, that the users will be locked???

"
MRM-1237,brettporter,Brett Porter,2009-08-28T02:21:24.032Z,2009-08-28T02:21:24.032Z,this is already fixed in Archiva 1.2.2
MRM-1288,brettporter,Brett Porter,2009-11-30T10:10:14.097Z,2009-11-30T10:10:14.097Z,this is now done on the MRM-1025 branch
MRM-1260,brettporter,Brett Porter,2010-12-08T22:05:07.744Z,2010-12-08T22:05:07.744Z,"conversely, if an initial scan doesn't complete the whole thing starts again rather than skipping over things that are already scanned because it may need to index them again. Better tracking of these tasks would be good to have."
MRM-1227,brettporter,Brett Porter,2009-07-30T05:55:13.284Z,2009-07-30T05:55:13.284Z,"could you be more specific? We have recently seen someone use it successfully from Ruby, and XMLRPC is language neutral. Does it need some other feature to work well with PHP libraries, or do you just need documentation?"
MRM-1227,fadubois,Fabien,2009-07-30T06:41:46.04Z,2009-07-30T06:41:46.04Z,"I try to get back information from archiva with xml-rpc client in php. It might be possible but i can't find documentation about syntaxes methods to call ... 

I base my researches on the JavaDoc :
http://archiva.apache.org/ref/1.2/apidocs/org/apache/archiva/web/xmlrpc/services/AdministrationServiceImpl.html
http://archiva.apache.org/ref/1.2/apidocs/org/apache/archiva/web/xmlrpc/services/PingServiceImpl.html
http://archiva.apache.org/ref/1.2/apidocs/org/apache/archiva/web/xmlrpc/services/SearchServiceImpl.html

For example, the method to ping the server, i have tried :
org.apache.archiva.web.xmlrpc.api.TestService.ping
org.apache.archiva.web.xmlrpc.services.PingServiceImpl.ping
org.apache.archiva.web.xmlrpc.services.PingService.ping


The response is : No such handler: org.apache.archiva.web.xmlrpc.api.TestService.ping

I'm sure that's my xml-rpc client is working because I can use it with continuum xml-rpc service.

So I wonder if archiva xml-rpc service can be use with other client ....

"
MRM-1227,fadubois,Fabien,2009-07-30T09:56:27.071Z,2009-07-30T09:56:27.071Z,"Okay, I have find the solution, and deduce that only ping xml-rpc service is not working ....

But AdministrationService and SearchService are working. A example of call :
""AdministrationService.getAllManagedRepositories"""
MRM-1227,fadubois,Fabien,2009-07-30T09:57:28.256Z,2009-07-30T09:57:28.256Z,Only ping xml-rpc service is not working
MRM-1294,brettporter,Brett Porter,2009-12-03T19:46:25.275Z,2009-12-03T19:46:25.275Z,"original bug fixed in r887027.

in r887030, the behaviour was further changed to use the start of the previous scan instead of the end, so that artifacts added in the middle will be scanned. If they happen to have been scanned before, they will be rescanned. This should not cause any issues - however if it does, it might be beneficial to ignore them in the first scan and pick them up in the subsequent one instead for reliability."
MRM-1245,apache.maillist,apache maillist,2009-09-03T12:53:29.993Z,2009-09-03T12:53:29.993Z,"dependency section:
<dependency>
<groupId>boguslog4j</groupId>
<artifactId>boguslog4</artifactId>
<version>1.0.0</version>
</dependency>"
MRM-1245,wsmoak,Wendy Smoak,2009-09-03T13:12:12.302Z,2009-09-03T13:12:12.302Z,"Are you saying you uploaded/deployed a pom with a <dependency> that does not exist?  Actually, you picked the 'remote proxy' component, so is this a 'bad' pom that was proxied in from a remote repository?

As far as I know, Archiva does not require transitive dependency closure of the artifacts it manages.

What behavior would you like to see?
"
MRM-1245,apache.maillist,apache maillist,2009-09-03T19:56:47.174Z,2009-09-03T19:56:47.174Z,"No, not upload/deploy

I am running mvn clean install on pom.xml which has the dependency that is not available on Archiva's remote repositories. Archiva creates/caches the none-available dependency artifact's pom and jar in its internal directory which pom is invaild, and jar is corrupted (see attached)."
MRM-1245,wsmoak,Wendy Smoak,2009-09-03T20:11:38.745Z,2009-09-03T20:11:38.745Z,"So you're saying that instead of sending 404 Not Found, Archiva is *inventing* an invalid pom and jar?

Can you try it with the latest release (1.2.2) and see if it's still a problem?"
MRM-1245,apache.maillist,apache maillist,2009-09-04T03:07:23.009Z,2009-09-04T03:07:23.009Z,"The Archiva UI has the link to the artifact, but gives you 404 if you click the link, however, the pom and jar are invented on the file system under Archiva ""internal"" directory.

I will try 1.2.2 and report back."
MRM-1245,apache.maillist,apache maillist,2009-09-05T00:17:45.753Z,2009-09-05T00:17:45.753Z,"1.2.2 has the same ""invented"" invalid pom and jar, please see attached screenshot"
MRM-1245,apache.maillist,apache maillist,2009-09-08T11:48:47.088Z,2009-09-08T11:48:47.088Z,"I think I may found the root cause, it is the spring framework remote maven repos we are proxying.
http://s3browse.com/explore/maven.springframework.org/release/org/springframework
http://s3browse.com/explore/maven.springframework.org/milestone/org/springframework"
MRM-1245,brettporter,Brett Porter,2009-09-10T22:09:56.084Z,2009-09-10T22:09:56.084Z,"it sounds like you have your proxy misconfigured. The remote should send a 404 if not found, not a 200 with content. Regardless, if you set the checksum policy to fail then this shouldn't occur.

Can you confirm?"
MRM-1245,apache.maillist,apache maillist,2009-09-11T15:59:37.39Z,2009-09-11T15:59:37.39Z,"Yes, it was ""fix"" (Archiva's default). After changing to ""fail"", the invented pom and jar no longer created after putting spring repos back to the proxy connector. Does this mean Archiva should be implemented using ""fail"" as default?"
MRM-1245,brettporter,Brett Porter,2009-09-17T11:37:20.2Z,2009-09-17T11:37:20.2Z,the default is in fact already fail for checksums
MRM-1267,jzurbano,jzurbano,2009-11-06T06:08:28.671Z,2009-11-06T06:08:28.671Z,Documentation updated in r833369.
MRM-1287,brettporter,Brett Porter,2011-09-12T10:43:57.866Z,2011-09-12T10:43:57.866Z,not sure if this is still the case - to review
MRM-1287,olamy,Olivier Lamy (*$^%`),2011-10-03T10:21:37.738Z,2011-10-03T10:21:37.738Z,"here the tree :
{code}

[INFO] +- org.apache.archiva:archiva-indexer:jar:1.4-M1-SNAPSHOT:compile
[INFO] |  +- org.apache.lucene:lucene-core:jar:3.0.3:compile
[INFO] |  +- org.apache.lucene:lucene-queries:jar:3.0.3:compile
[INFO] |  +- org.codehaus.plexus:plexus-utils:jar:1.5.5:compile
[INFO] |  +- org.codehaus.plexus:plexus-digest:jar:1.1:compile
[INFO] |  +- org.apache.maven.indexer:indexer-core:jar:4.1.2:compile
[INFO] |  |  +- org.apache.maven.indexer:indexer-artifact:jar:4.1.2:compile
[INFO] |  |  +- org.apache.lucene:lucene-highlighter:jar:3.0.3:compile
[INFO] |  |  |  \- org.apache.lucene:lucene-memory:jar:3.0.3:compile
[INFO] |  |  +- org.sonatype.aether:aether-api:jar:1.8:compile
[INFO] |  |  \- org.sonatype.aether:aether-util:jar:1.8:compile
[INFO] |  \- javax.inject:javax.inject:jar:1:compile
{code}
So IMHO we cannot remove something here."
MRM-1251,gautencio,Gwen Harold Autencio,2009-09-15T04:35:13.646Z,2009-09-15T04:35:13.646Z,"This happens when there's a repo scan during the deployment of the artifact. 

Attaching patch that adds a note that execution of the consumers are placed on queue after a deployment.

Thanks."
MRM-1251,jzurbano,jzurbano,2009-10-07T22:33:08.799Z,2009-10-07T22:33:08.799Z,"Documentation updated in r823011.
- added the warning at the start of the page
- rephrased some statements (in patch and in documentation)

Thanks for the patch Gwen! :)"
MRM-1210,olamy,Olivier Lamy (*$^%`),2014-03-02T16:32:26.514Z,2014-03-02T16:32:26.514Z,TO CHECK but should be fixed.
MRM-1210,olamy,Olivier Lamy (*$^%`),2014-04-17T00:10:24.739Z,2014-04-17T00:10:24.739Z,done https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=2b03379
MRM-1238,gautencio,Gwen Harold Autencio,2009-09-02T20:06:54.992Z,2009-09-02T20:06:54.992Z,"Hi attaching patch for fix on the issue, thanks."
MRM-1238,jzurbano,jzurbano,2009-09-10T10:17:41.33Z,2009-09-10T10:17:41.33Z,"Fixed in r813473.

Thanks Gwen! :)"
MRM-1284,mhaller,Mike Haller,2009-11-24T07:23:40.555Z,2009-11-24T07:23:40.555Z,See also MNGECLIPSE-1152
MRM-1284,jarrodroberson,Jarrod Roberson,2011-06-17T01:08:08.832Z,2011-06-17T01:08:08.832Z,this should really get fixed where it generates an archetype-catalog.xml file available at the root of the server that is either generated on uploads and deletes or dynamically to support custom archetypes seamlessly uploaded to the repositories. Right now I have to manually edit a file at the /opt/archiva/apps/archiva/archetype-catalog.xml location.
MRM-1254,oching,Maria Odea Ching,2009-10-09T05:34:22.9Z,2009-10-09T05:34:22.9Z,Added test for MRM-981 in trunk [-r823505|http://svn.apache.org/viewvc?view=rev&revision=823505]
MRM-1254,oching,Maria Odea Ching,2009-10-12T03:09:53.259Z,2009-10-12T03:09:53.259Z,More unit tests for advanced search and quick search added in trunk [-r824257|http://svn.apache.org/viewvc?view=rev&revision=824257]. Code coverage is now 88%
MRM-1212,oching,Maria Odea Ching,2009-07-09T22:43:25.179Z,2009-07-09T22:43:25.179Z,The workaround is to disable both consumers.
MRM-1212,oching,Maria Odea Ching,2009-07-28T00:09:14.031Z,2009-07-28T00:09:14.031Z,"Fixes committed to trunk -r 798059, 798060 and 798403 with the following changes:
* move fixing of incorrect checksums to ArtifactMissingChecksumConsumer 
* fix/create checksums and update metadata in action class only if create-missing-checksum and metadata-updater consumers are not enabled
* do not execute create-missing-checksum and metadata-updater consumers during webdav deployment since they will be deployed as well
"
MRM-1216,brettporter,Brett Porter,2009-07-15T04:12:15.11Z,2009-07-15T04:12:15.11Z,"more importantly, there is a bug in the way logging is done right now.

a number of classes bind to the slf4j from the jetty bundle instead of the one in the web application itself. Because the level is generally low enough we don't notice, but under debug (and during startup) they go to the wrong file."
MRM-1216,brettporter,Brett Porter,2009-07-15T16:19:46.374Z,2009-07-15T16:19:46.374Z,"this is due to the use of commons-logging in both the jetty bundle and the application. The only alternative I can find is to remove jcl-over-slf4j from the jetty bundle, which requires switching to JSP 2.1"
MRM-1216,brettporter,Brett Porter,2009-07-15T16:52:04.712Z,2009-07-15T16:52:04.712Z,changing summary to match
MRM-1216,brettporter,Brett Porter,2009-07-15T16:53:12.176Z,2009-07-15T16:53:12.176Z,"solution:
- remove jetty-logging.xml and let everything go to stdout, which will be handled by wrapper
- remove slf4j and jcl-over-slf4j from jetty lib directory so that logs correctly go to webapp"
MRM-1250,oching,Maria Odea Ching,2009-09-10T04:59:52.884Z,2009-09-10T04:59:52.884Z,"Fixed committed in -r r813337:
* add global repository observer role as child role of global repository manager"
MRM-1275,brettporter,Brett Porter,2009-11-10T03:54:38.556Z,2009-11-10T03:54:38.556Z,I think it makes sense to simply index the set (indexable-context + artifacts) instead of changing the default configuration
MRM-1275,oching,Maria Odea Ching,2009-11-10T04:07:05.467Z,2009-11-10T04:07:05.467Z,Fine with me as well :)
MRM-1275,oching,Maria Odea Ching,2009-11-10T04:45:14.768Z,2009-11-10T04:45:14.768Z,Updated summary
MRM-1275,oching,Maria Odea Ching,2009-11-10T05:09:59.028Z,2009-11-10T05:09:59.028Z,"Fixed in trunk -r834426 with the following changes:
* add artifacts file types so it gets processed by the consumer
* added unit test"
MRM-1244,wsmoak,Wendy Smoak,2010-06-07T15:19:21.309Z,2010-06-07T15:19:21.309Z,"This is still a problem.  I'm seeing this message repeatedly, and I still can't tell what is being requested by who.

(I vaguely remember hearing that Maven first requests the artifact without credentials, then re-sends the request with them if it fails. So perhaps most of this is just the first request for things in password protected repos.)

If this is going to get logged at INFO then perhaps ""Authorization Granted"" should be also?  

Should this go in the audit log instead?

"
MRM-1247,wsmoak,Wendy Smoak,2009-09-04T10:55:09.792Z,2009-09-04T10:55:09.792Z,This will most likely have to be fixed in Redback.
MRM-1247,jzurbano,jzurbano,2009-09-05T01:13:42.865Z,2009-09-05T01:13:42.865Z,"I have modified the description.

IMHO, errors such as Error 500 should also be handled in Archiva, maybe redirecting the error to an Archiva error page so that other links can still be accessed from the page."
MRM-1247,olamy,Olivier Lamy (*$^%`),2014-02-25T20:58:07.601Z,2014-02-25T20:58:07.601Z,IMHO should be fixed To confirm
MRM-1247,olamy,Olivier Lamy (*$^%`),2014-04-16T23:05:01.486Z,2014-04-16T23:05:01.486Z,Fixed but I don't know which version :-)
MRM-1231,brettporter,Brett Porter,2009-08-21T13:59:44.623Z,2009-08-21T13:59:44.623Z,is there anything in your Archiva logs at the time indicating what the problem might be?
MRM-1231,fadubois,Fabien,2009-08-24T02:50:20.316Z,2009-08-24T02:50:20.316Z,"No, I have put the logger in Debug mode , but nothing in Archiva logs... If someone can try with the sample client "
MRM-1231,brettporter,Brett Porter,2009-10-15T19:17:04.226Z,2009-10-15T19:17:04.226Z,"sorry for the delay, I've been able to confirm this issue."
MRM-1278,oching,Maria Odea Ching,2009-11-19T03:59:53.959Z,2009-11-19T03:59:53.959Z,"Fix committed to trunk [-r882090|http://svn.apache.org/viewvc?revision=882090&view=revision] with the following changes:
* retrieve artifact by using ArtifactsRelatedConstraint instead of using getArtifact(..) with an incorrect type
* updated existing and added new unit test for repo browse"
MRM-1278,oching,Maria Odea Ching,2009-11-19T21:32:52.823Z,2009-11-19T21:32:52.823Z,"Selenium test committed to trunk [-r882399|http://svn.apache.org/viewvc?revision=882399&view=revision] with the following changes:
* added selenium test that uploads SNAPSHOT artifacts in releases and snapshots repositories and checks artifact info page for correct artifact information
* refactored upload artifact methods in AbstractManagementTest, moved them over to AbstractArchivaTest to avoid repetition in other tests that use it"
MRM-1232,oching,Maria Odea Ching,2009-08-09T20:08:01.875Z,2009-08-09T20:08:01.875Z,"Directly using the 'releases' repository (requiring a Repository Manager role) as a mirror or as an additional repository works fine. It is only unable to download the artifact if the repository is under a group. 

Browsing the repository group does not have this bug. I'm able to see the artifacts in the secured repository under the group."
MRM-1232,oching,Maria Odea Ching,2009-08-12T04:37:02.651Z,2009-08-12T04:37:02.651Z,"I was able to retrieve the artifact by reversing the order of 'releases' and 'internal' in the group. It seems that the repo group returns an error based on the encountered error from the last repository in the group.

Since 'releases' is secured, it returned an unauthorized exception when maven first requested the artifact anonymously. When maven got this, it requested the artifact again but this time passing the credentials."
MRM-1232,oching,Maria Odea Ching,2009-08-13T02:18:28.804Z,2009-08-13T02:18:28.804Z,"Fixed in trunk -r803795 with the following changes:
* if at least one UnauthorizedDavException exists in the compiled errors from the queried repositories in the group, send back a 401 error to force Maven to attach credentials to the request
* added test case
"
MRM-1161,dennisl@apache.org,Dennis Lundberg,2009-04-01T03:57:18.702Z,2009-04-01T03:57:18.702Z,"I'm hitting the same NPE, but for a completely different use case.
It happens when I try to upload an artifact using either ""mvn deploy-file ..."" or using the ""Upload Artifact"" function from the Archiva U
Here is the log from the command line:
n.java:221)
        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:186)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation

H:\svn>mvn deploy:deploy-file -Dfile=P:\Development\lib\ext\jakarta-commons\commons-dbutils-1.0\commons-dbutils-1.0-src.jar -DgroupId=commons-dbutils -DartifactId=commons-dbutils -Dversion=1.0 -Dpackaging=jar -Dclassifier=sources -Durl=dav:http://repo.mdh.se/archiva/repository/internal -DrepositoryId=internal -DgeneratePom=false -e
[INFO] Scanning for projects...
[INFO] Searching repository for plugin with prefix: 'deploy'.
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Default Project
[INFO]    task-segment: [deploy:deploy-file] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[INFO] [deploy:deploy-file]
WAGON_VERSION: 1.0-beta-2
Uploading: http://repo.mdh.se/archiva/repository/internal/commons-dbutils/commons-dbutils/1.0/commons-dbutils-1.0-sources.jar
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error deploying artifact: Failed to transfer file: http://repo.mdh.se/archiva/repository/internal/commons-dbutils/commons-dbu
tils/1.0/commons-dbutils-1.0-sources.jar. Return code is: 500 Internal Server Error

[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Error deploying artifact: Failed to transfer file: http://repo.mdh.se/archiva/repository/internal/commons-dbutils/commons-dbutils/1.0/commons-dbutils-1.0-sources.jar. Return code is: 500 Internal Server Error

        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:584)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:513)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:483)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:331)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:228)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:142)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:336)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:129)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:301)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: Error deploying artifact: Failed to transfer file: http://repo.mdh.se/archiva/repository/internal/commons-dbutils/commons-dbutils/1.0/commons-dbutils-1.0-sources.jar. Return code is: 500 Internal Server Error
        at org.apache.maven.plugin.deploy.DeployFileMojo.execute(DeployFileMojo.java:244)
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:453)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:559)
        ... 16 more
Caused by: org.apache.maven.artifact.deployer.ArtifactDeploymentException: Error deploying artifact: Failed to transfer file: http://repo.mdh.se/archiva/repository/internal/commons-dbutils/commons-dbutils/1.0/commons-dbutils-1.0-sources.jar. Return code is: 500 In
ternal Server Error
        at org.apache.maven.artifact.deployer.DefaultArtifactDeployer.deploy(DefaultArtifactDeployer.java:94)
        at org.apache.maven.plugin.deploy.DeployFileMojo.execute(DeployFileMojo.java:240)
        ... 18 more
Caused by: org.apache.maven.wagon.TransferFailedException: Failed to transfer file: http://repo.mdh.se/archiva/repository/internal/commons-dbutils/commons-dbutils/1.0/commons-dbutils-1.0-sources.jar. Return code is: 500 Internal Server Error
        at org.apache.maven.wagon.providers.webdav.WebDavWagon.put(WebDavWagon.java:311)
        at org.apache.maven.artifact.manager.DefaultWagonManager.putRemoteFile(DefaultWagonManager.java:245)
        at org.apache.maven.artifact.manager.DefaultWagonManager.putArtifact(DefaultWagonManager.java:161)
        at org.apache.maven.artifact.deployer.DefaultArtifactDeployer.deploy(DefaultArtifactDeployer.java:80)
        ... 19 more




And here is the entries in 2009_04_01.stderrout.log on the server:

93756293 [btpool0-2] ERROR com.opensymphony.xwork2.interceptor.ParametersInterceptor - ParametersInterceptor - [setParameters]: Unexpected Exception caught
 setting '__checkbox_generatePom' on 'class org.apache.maven.archiva.web.action.UploadAction: Error setting expression '__checkbox_generatePom' with value
'[Ljava.lang.String;@1aad190'
93757223 [btpool0-2] ERROR org.mortbay.log - Nested in javax.servlet.ServletException: java.lang.NullPointerException:
java.lang.NullPointerException
        at org.sonatype.nexus.index.context.DefaultIndexingContext.copyDocument(DefaultIndexingContext.java:582)
        at org.sonatype.nexus.index.packer.DefaultIndexPacker.writeIndexChunks(DefaultIndexPacker.java:168)
        at org.sonatype.nexus.index.packer.DefaultIndexPacker.packIndex(DefaultIndexPacker.java:94)
        at org.apache.archiva.consumers.lucene.NexusIndexerConsumer.completeScan(NexusIndexerConsumer.java:211)
        at org.apache.archiva.repository.scanner.functors.TriggerScanCompletedClosure.execute(TriggerScanCompletedClosure.java:48)
        at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
        at org.apache.maven.archiva.repository.scanner.RepositoryContentConsumers.executeConsumers(RepositoryContentConsumers.java:265)
        at org.apache.maven.archiva.web.action.UploadAction.doUpload(UploadAction.java:348)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:404)
        at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:267)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:229)
        at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:268)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
        at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.maven.archiva.web.interceptor.ConfigurationInterceptor.intercept(ConfigurationInterceptor.java:50)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.codehaus.plexus.redback.struts2.interceptor.PolicyEnforcementInterceptor.intercept(PolicyEnforcementInterceptor.java:159)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor.intercept(SecureActionInterceptor.java:173)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ParameterFilterInterceptor.intercept(ParameterFilterInterceptor.java:143)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
        at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:186)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:268)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:121)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.codehaus.plexus.redback.struts2.interceptor.AutoLoginInterceptor.intercept(AutoLoginInterceptor.java:166)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.codehaus.plexus.redback.struts2.interceptor.ForceAdminUserInterceptor.intercept(ForceAdminUserInterceptor.java:77)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:186)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
        at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
        at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:118)
        at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:52)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at org.apache.struts2.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:99)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:722)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:404)
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
        at org.mortbay.jetty.Server.handle(Server.java:324)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
        at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:842)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:648)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:205)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:450)
93757232 [btpool0-2] ERROR org.mortbay.log - /archiva/upload!doUpload.action
java.lang.NullPointerException
        at org.sonatype.nexus.index.context.DefaultIndexingContext.copyDocument(DefaultIndexingContext.java:582)
        at org.sonatype.nexus.index.packer.DefaultIndexPacker.writeIndexChunks(DefaultIndexPacker.java:168)
        at org.sonatype.nexus.index.packer.DefaultIndexPacker.packIndex(DefaultIndexPacker.java:94)
        at org.apache.archiva.consumers.lucene.NexusIndexerConsumer.completeScan(NexusIndexerConsumer.java:211)
        at org.apache.archiva.repository.scanner.functors.TriggerScanCompletedClosure.execute(TriggerScanCompletedClosure.java:48)
        at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
        at org.apache.maven.archiva.repository.scanner.RepositoryContentConsumers.executeConsumers(RepositoryContentConsumers.java:265)
        at org.apache.maven.archiva.web.action.UploadAction.doUpload(UploadAction.java:348)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:404)
        at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:267)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:229)
        at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:268)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
        at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.maven.archiva.web.interceptor.ConfigurationInterceptor.intercept(ConfigurationInterceptor.java:50)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.codehaus.plexus.redback.struts2.interceptor.PolicyEnforcementInterceptor.intercept(PolicyEnforcementInterceptor.java:159)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor.intercept(SecureActionInterceptor.java:173)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ParameterFilterInterceptor.intercept(ParameterFilterInterceptor.java:143)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
        at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocati"
MRM-1161,oching,Maria Odea Ching,2009-04-01T20:48:30.471Z,2009-04-01T20:48:30.471Z,"When you upgraded to 1.2, did you by any chance delete the old .index directory and/or clear out the db? I'm not sure, but the old index might have caused the indexer to break?"
MRM-1161,dennisl@apache.org,Dennis Lundberg,2009-04-03T09:30:49.372Z,2009-04-03T09:30:49.372Z,"I followed the instructions under ""Upgrading Archiva from 1.1 to 1.2"" at
http://archiva.apache.org/docs/1.2/adminguide/standalone.html

- Removed .index folder
- Touched all files in the repo
- Did not do anything to the database

We can deploy SNAPSHOTs to our Archiva instance, but not releases, so this is currently a blocker for us.

Is there a downgrade path back to Archiva 1.1.3? I suspect I need to remove the files created by the Nexus indexer. Are they stored in same .index folder?"
MRM-1161,oching,Maria Odea Ching,2009-04-05T22:54:23.181Z,2009-04-05T22:54:23.181Z,"I think you can do the same steps above to downgrade to 1.1.3. The Nexus index is also stored in .index, so you would need to delete that directory and touch all the files again then execute the repo scanner to re-create the old index.."
MRM-1161,mykol,Michael Mallete,2009-04-06T20:06:01.669Z,2009-04-06T20:06:01.669Z,"Was getting this error as well. Things that I did to fix it:

1. Stop Tomcat where archiva is installed
2. Deleted all .index* directories
3. Deleted database files except ""users"" in order to preserve accounts
4. Ran Tomcat
5. Ran repository scanning to all repositories
6. Ran database and consumer updates "
MRM-1161,brianf@infinity.nu,Brian E. Fox (imported),2009-05-05T07:07:11.063Z,2009-05-05T07:07:11.063Z,"We believe this is already fixed in Nexus Indexer 2.0.0, and recommend Archiva upgrade."
MRM-1161,henryju,Julien HENRY,2009-05-14T07:00:57.558Z,2009-05-14T07:00:57.558Z,"Is it possible to release a new version of Archiva with Nexus Indexer 2.0.0 then. Some users in my company are starting using Maven 2.1.0 and are bitten by this issue.

My workaround is to delete .index* and delete the artifact deployed by Maven 2.1.0 then ask user to use Maven 2.0.x but this is not very convenient.

Thanks"
MRM-1161,oching,Maria Odea Ching,2009-05-23T02:30:42.321Z,2009-05-23T02:30:42.321Z,Fixed in trunk -r777816.
MRM-1132,brettporter,Brett Porter,2009-03-11T07:53:18.054Z,2009-03-11T07:53:18.054Z,leaving out of release until it can be reproduced regularly
MRM-1132,syvalta,syvalta,2009-04-06T06:40:18.533Z,2009-04-06T06:40:18.533Z,"Not sure if this is related at all, but when I encountered this problem there was also the following error in the archiva log (that null pointer goes to console log):

2009-04-06 03:15:29,505 [pool-1-thread-1] ERROR org.apache.archiva.consumers.lucene.LuceneCleanupRemoveIndexedConsumer  - Unable to open index at /var/build
/archiva/data/proxy/fool/.indexer
java.io.IOException: cannot read directory org.apache.lucene.store.FSDirectory@/var/build/archiva/data/proxy/foo/.indexer: list() returned null
        at org.apache.lucene.index.SegmentInfos.getCurrentSegmentGeneration(SegmentInfos.java:129)
        at org.apache.lucene.index.IndexReader.indexExists(IndexReader.java:613)
        at org.sonatype.nexus.index.context.DefaultIndexingContext.prepareIndex(DefaultIndexingContext.java:175)
        at org.sonatype.nexus.index.context.DefaultIndexingContext.<init>(DefaultIndexingContext.java:141)
        at org.sonatype.nexus.index.DefaultNexusIndexer.addIndexingContext(DefaultNexusIndexer.java:83)
        at org.apache.archiva.consumers.lucene.LuceneCleanupRemoveIndexedConsumer.processArchivaArtifact(LuceneCleanupRemoveIndexedConsumer.java:127)
        at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:48)
        at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
        at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateProcessed(JdoDatabaseUpdater.java:168)
        at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllProcessed(JdoDatabaseUpdater.java:113)
        at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:79)
        at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
        at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
        at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
        at java.lang.Thread.run(Thread.java:619)"
MRM-1132,klaus.wienert,Klaus Wienert,2009-04-22T09:59:14.871Z,2009-04-22T09:59:14.871Z,"we had the same problem, deleting .index* solved the problem"
MRM-1132,mhaller,Mike Haller,2009-05-02T07:34:30.246Z,2009-05-02T07:34:30.246Z,"Same problem here. Releases and builds occasionally fail due to the Nexus Indexer NPE in copyDocument().
Having this problem every two weeks is imho regularly enough to fix it in a release :-]
"
MRM-1132,brettporter,Brett Porter,2009-05-05T06:49:02.493Z,2009-05-05T06:49:02.493Z,possible duplicate linked
MRM-1132,brettporter,Brett Porter,2009-05-05T06:55:46.944Z,2009-05-05T06:55:46.944Z,closing as dupe since location is the same
MRM-1144,dantran,Dan Tran,2009-03-16T11:01:51.137Z,2009-03-16T11:01:51.137Z,"also, i dont see any error in the log files

"
MRM-1144,brettporter,Brett Porter,2009-03-16T23:39:13.36Z,2009-03-16T23:39:13.36Z,is this a regression from 1.1.3?
MRM-1144,dantran,Dan Tran,2009-03-17T01:57:14.922Z,2009-03-17T01:57:14.922Z,"just tested with 1.1.3, the same error happens"
MRM-1144,brettporter,Brett Porter,2009-03-17T05:01:29.405Z,2009-03-17T05:01:29.405Z,thanks. we're trying to cut down the issues for 1.2 to get a release out so I'll schedule this for the next - however if you're able to help with a patch we'd be able to include it in the next release
MRM-1144,brettporter,Brett Porter,2010-02-23T03:50:25.059Z,2010-02-23T03:50:25.059Z,"still an issue in 1.4, pushing back as there are a bunch of path related things to deal with together in the next round of refactoring"
MRM-1144,fredrikj,Fredrik Jonson,2017-06-22T13:53:38.062Z,2017-06-22T13:53:38.062Z,I cannot reproduce this when using Archiva 2.2.3. An artifact with the file suffix and packaging tar.bz2 can be downloaded from archiva both via the web interface and with mvn dependency:get.
MRM-1150,canders,Chris Anders,2009-09-02T21:18:08.7Z,2009-09-02T21:18:08.7Z,this would be good if the value was stored under .m2/archiva.xml so after each upgrade we didnt have to remember to hack struts.multipart.maxSize
MRM-1150,pablaasmo,Per Arnold Blaasmo,2011-12-01T04:34:16.556Z,2011-12-01T04:34:16.556Z,"I just upgraded to running under Tomcat 7.0.22 from Tomcat 6.0.20. Then I discovered that the Archiva war gets unpacked under the work folder instead of the webapps folder. As far as I can see the config is the same, so I do not know why it does not deploy it under the webapps folder.

Anyway, the result is that it is redeployed in the work folder every time Archiva is started. So for me to set the property 'struts.multipart.maxSize' in the struts.properties file does not work any more. It gets overridden every time Archiva is loaded in Tomcat.

Therefore I think this config possibility in the GUI gets more important.
 "
MRM-1160,daniel.takai,Daniel Takai,2009-05-20T07:17:51.937Z,2009-05-20T07:17:51.937Z,About 8% of our CI builds fail due to this bug. It makes archiva not very reliable.
MRM-1160,oching,Maria Odea Ching,2009-05-20T09:35:47.893Z,2009-05-20T09:35:47.893Z,Yeah :( We're working to get 1.2.1 out soon to fix the NPE issues..
MRM-1160,daniel.takai,Daniel Takai,2009-05-20T09:39:55.107Z,2009-05-20T09:39:55.107Z,"Orite! If i can help out with anything pls let me know. 

Thanks for the effort - archiva is a great tool and i'm happy to have it at my disposal."
MRM-1160,oching,Maria Odea Ching,2009-05-23T02:31:27.09Z,2009-05-23T02:31:27.09Z,Fixed in trunk -r777816.
MRM-1199,oching,Maria Odea Ching,2009-06-09T20:36:15.727Z,2009-06-09T20:36:15.727Z,Duplicates MRM-1168. Fix is already in trunk and is scheduled for 1.2.2 :)
MRM-1154,jameswdumay,James William Dumay,2009-03-24T18:04:41.461Z,2009-03-24T18:04:41.461Z,"Deng, shouldnt changes like this go into the 1.2 GA or 1.3?"
MRM-1154,oching,Maria Odea Ching,2009-03-25T02:22:36.211Z,2009-03-25T02:22:36.211Z,"We can have it at 1.3 I think.. As for the changes in Maven 2.1 metadata, MRM-1136 should already handle it?"
MRM-1154,brettporter,Brett Porter,2010-02-23T01:28:39.548Z,2010-02-23T01:28:39.548Z,still not done (though trunk is using maven 3.0-alpha-4 for project processing)
MRM-1154,brettporter,Brett Porter,2010-05-03T23:54:16.157Z,2010-05-03T23:54:16.157Z,it may now be timely to move to 3.0-beta-1 (or newer) as the API stabilises
MRM-1154,brettporter,Brett Porter,2011-09-12T08:28:21.454Z,2011-09-12T08:28:21.454Z,we should move onto the final release of Maven 3.0 now
MRM-1154,olamy,Olivier Lamy (*$^%`),2011-09-12T08:34:20.759Z,2011-09-12T08:34:20.759Z,will need to review dependency tree calculation as this has changed and no backward compat in maven 3.x
MRM-1175,mgoldhahn,Martin Goldhahn,2009-04-27T05:32:01.285Z,2009-04-27T05:32:01.285Z,"There are another 2 issues when compiling against version 1.2 of archiva :
1. The SimpleArtifactConsumer is missing the logger functions
2. the method signature of beginScan has changed

The patch fixes these issues and changed the version for archiva in the dependencies to 1.2"
MRM-1141,oching,Maria Odea Ching,2009-07-29T02:41:40.603Z,2009-07-29T02:41:40.603Z,The problem is that plexus-spring and spring-context have their own spring.handlers. It seems that plexus-spring's spring.handlers was overwritten by spring-context's when the shaded artifact was generated.
MRM-1141,oching,Maria Odea Ching,2009-07-29T03:43:05.301Z,2009-07-29T03:43:05.301Z,"The above error is fixed in trunk -r798809. I'm now able to execute the cli except when scanning a repo. The following error occurs:

{code}
Exception in thread ""main"" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'repositoryScanner': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'fileTypes': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'archivaConfiguration': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'preDownloadPolicy#cache-failures': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'urlFailureCache' is defined
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:127)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:116)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:91)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:275)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:880)
        at org.apache.maven.archiva.cli.ArchivaCli.lookup(ArchivaCli.java:185)
        at org.apache.maven.archiva.cli.ArchivaCli.doScan(ArchivaCli.java:168)
        at org.apache.maven.archiva.cli.ArchivaCli.execute(ArchivaCli.java:133)
        at org.apache.maven.archiva.cli.ArchivaCli.main(ArchivaCli.java:106)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'fileTypes': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'archivaConfiguration': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'preDownloadPolicy#cache-failures': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'urlFailureCache' is defined
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:127)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:116)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:91)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:275)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.resolveRequirement(PlexusComponentFactoryBean.java:246)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.createInstance(PlexusComponentFactoryBean.java:163)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.getObject(PlexusComponentFactoryBean.java:108)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:121)
        ... 12 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'archivaConfiguration': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'preDownloadPolicy#cache-failures': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'urlFailureCache' is defined
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:127)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:116)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:91)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:275)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.resolveRequirement(PlexusComponentFactoryBean.java:246)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.createInstance(PlexusComponentFactoryBean.java:163)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.getObject(PlexusComponentFactoryBean.java:108)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:121)
        ... 23 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'preDownloadPolicy#cache-failures': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'urlFailureCache' is defined
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:127)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:116)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:91)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:275)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
        at org.codehaus.plexus.spring.PlexusToSpringUtils.lookupMap(PlexusToSpringUtils.java:148)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.resolveRequirement(PlexusComponentFactoryBean.java:238)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.createInstance(PlexusComponentFactoryBean.java:163)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.getObject(PlexusComponentFactoryBean.java:108)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:121)
        ... 34 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'urlFailureCache' is defined
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:387)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:971)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:246)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.resolveRequirement(PlexusComponentFactoryBean.java:246)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.createInstance(PlexusComponentFactoryBean.java:163)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.getObject(PlexusComponentFactoryBean.java:108)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:121)
        ... 46 more
{code}"
MRM-1141,oching,Maria Odea Ching,2009-07-30T01:16:03.473Z,2009-07-30T01:16:03.473Z,Bean lookup error when executing repo scan fixed in trunk -r799177.
MRM-1145,oching,Maria Odea Ching,2009-03-18T22:25:31.514Z,2009-03-18T22:25:31.514Z,"I tried these scenarios with an actual feed reader. The last two scenarios above seems correct as I get prompted for authentication and get a 401 when I provided wrong credentials or when I don't have the necessary permissions to access the repository.

The testInvalidrequest test case seem to be incorrect though, as I am always being prompted to authenticate whenever I request 'http://localhost:8080/archiva/feeds?invalid_param=xxx'"
MRM-1155,brettporter,Brett Porter,2009-03-26T06:23:23.313Z,2009-03-26T06:23:23.313Z,There appear to be no details to go with this other than the confusing cloning of the original issue?
MRM-1155,mk4work,Michael K,2009-03-26T06:53:00.555Z,2009-03-26T06:53:00.555Z,"First of all, maybe I did a mistake by creating this issue. I did a clone of MRM-749 that's why the fix-version is 1.2 and the type is 'New Feature'  instead of 'Bug'. Actually I'd like to reopen the issue MRM-749.

My Problem:
I'm using eclipse 3.4 with m2eclipse 0.9.7. Our internal repository server is Archiva 1.2.
I've made a touch on every file in the repository and did a reindex via Archiva as described in Admin Documentation http://archiva.apache.org/docs/1.2/adminguide/standalone.html.
The created zip-File nexus-maven-repository-index.zip for my internal repository is 650 kb.
The content of the properties file is:
#Thu Mar 26 12:41:18 CET 2009
nexus.index.time=20090326115803.328 +0100
nexus.index.id=internal

The Maven Console within eclipse:
26.03.09 12:43:37 CET: Updating index central
26.03.09 12:43:44 CET: Downloading central : nexus-maven-repository-index.properties
26.03.09 12:43:44 CET: Downloaded [central] -> http://repo1.maven.org/maven2/.index/nexus-maven-repository-index.properties
26.03.09 12:43:44 CET: No index update available for central
26.03.09 12:43:44 CET: Updating index internal
26.03.09 12:43:44 CET: Unable to update index for internal http://myarchiva:8080/archiva/repository/internal/
26.03.09 12:43:44 CET: Updating index snapshots
26.03.09 12:43:44 CET: Unable to update index for snapshots http://myarchiva:8080/archiva/repository/snapshots/
 
The nexus-maven-repository-index.properties from central has following content:
#Sat Mar 21 03:29:40 CDT 2009
nexus.index.time=20090321082722.621 +0000
nexus.index.id=central
nexus.index.update-2=20090310000000.000 +0000
nexus.index.update-1=20090314000000.000 +0000
nexus.index.update-0=20090321000000.000 +0000

Maybe the nexus.index.update-x is missing in my properties file created by Archiva?
"
MRM-1155,mk4work,Michael K,2009-03-26T10:27:22.77Z,2009-03-26T10:27:22.77Z,I forgot a detail. The Archiva is running under Windows-XP as  a service.
MRM-1155,oching,Maria Odea Ching,2009-04-03T01:55:22.554Z,2009-04-03T01:55:22.554Z,Changing issue type from New Feature to Bug..
MRM-1155,syvalta,syvalta,2009-04-03T03:52:41.825Z,2009-04-03T03:52:41.825Z,"I get ""Error on adding indexing context repo_name; Unknown format version: -7"" after adding index to Eclipse (m2eclipse 0.9.7). After that ""No index update available for releases"". Might there be two different issues?"
MRM-1155,rmmanning,Rob Manning,2009-05-05T18:33:35.401Z,2009-05-05T18:33:35.401Z,"I see the following error in the eclipse log when I attempt to add an Archiva 1.2 repository to the maven index view of the m2eclipse plugin:

org.apache.lucene.index.CorruptIndexException: Unknown format version: -7
at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:211)
at org.apache.lucene.index.DirectoryIndexReader$1.doBody(DirectoryIndexReader.java:68)
at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:636)
at org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:63)
at org.apache.lucene.index.IndexReader.open(IndexReader.java:209)
at org.apache.lucene.index.IndexReader.open(IndexReader.java:192)
at org.sonatype.nexus.index.context.DefaultIndexingContext.getIndexReader(DefaultIndexingContext.java:385)
at org.sonatype.nexus.index.context.DefaultIndexingContext.getIndexSearcher(DefaultIndexingContext.java:402)
at org.sonatype.nexus.index.context.DefaultIndexingContext.checkAndUpdateIndexDescriptor(DefaultIndexingContext.java:218)
at org.sonatype.nexus.index.context.DefaultIndexingContext.prepareIndex(DefaultIndexingContext.java:183)
at org.sonatype.nexus.index.context.DefaultIndexingContext.<init>(DefaultIndexingContext.java:158)
at org.sonatype.nexus.index.DefaultNexusIndexer.addIndexingContext(DefaultNexusIndexer.java:153)
at org.maven.ide.eclipse.internal.index.NexusIndexManager.addIndexingContext(NexusIndexManager.java:118)
at org.maven.ide.eclipse.internal.index.NexusIndexManager.addIndex(NexusIndexManager.java:109)
at org.maven.ide.eclipse.ui.internal.views.MavenIndexesView$11.run(MavenIndexesView.java:319)
at org.maven.ide.eclipse.ui.internal.views.MavenIndexesView$2.doubleClick(MavenIndexesView.java:144)
at org.eclipse.jface.viewers.StructuredViewer$1.run(StructuredViewer.java:799)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
at org.eclipse.core.runtime.Platform.run(Platform.java:880)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:48)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.viewers.StructuredViewer.fireDoubleClick(StructuredViewer.java:797)
at org.eclipse.jface.viewers.AbstractTreeViewer.handleDoubleSelect(AbstractTreeViewer.java:1419)
at org.eclipse.jface.viewers.StructuredViewer$4.widgetDefaultSelected(StructuredViewer.java:1173)
at org.eclipse.jface.util.OpenStrategy.fireDefaultSelectionEvent(OpenStrategy.java:237)
at org.eclipse.jface.util.OpenStrategy.access$0(OpenStrategy.java:234)
at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:295)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3823)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3422)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2384)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2348)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2200)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:495)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:288)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:490)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:193)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:386)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:549)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:504)
at org.eclipse.equinox.launcher.Main.run(Main.java:1236)
at org.eclipse.equinox.launcher.Main.main(Main.java:1212)

Other maven repos (such as central) can be indexed just fine in the same view.

If there is something I could fix on the server please let me know and I'll give it a try.  The service is running on Windows 2003 server.
Rob"
MRM-1155,brettporter,Brett Porter,2009-05-06T00:32:59.318Z,2009-05-06T00:32:59.318Z,I believe this is a result of incompatible lucene versions (you might try downgrading them in the webapp then recreating the index)
MRM-1155,rombert,Robert Munteanu,2009-05-11T04:42:19.688Z,2009-05-11T04:42:19.688Z,"In case you missed it, here's a m2eclipse user mailing list thread which discusses this issue: http://archive.m2eclipse.codehaus.org/lists/org.codehaus.m2eclipse.user/msg/49ED98F3.2080106@seigneurin.com .

One of the messages contains:

{quote}
The forward looking solution would be to upgrade Archiva to use the new indexer component when it's released (it will be released with m2e .98 in the next few weeks) and then use the new m2e.
{quote}

Perhaps it's worth investigating this path for 1.2.1."
MRM-1155,oching,Maria Odea Ching,2009-05-11T05:43:47.193Z,2009-05-11T05:43:47.193Z,"Thanks for the link Robert, we'll definitely look into that for 1.2.1"
MRM-1155,rsaddey,Reiner Saddey,2009-05-23T02:24:34.413Z,2009-05-23T02:24:34.413Z,This issue as well affects NetBeans (e.g. 6.7Beta) users. It appears to prevent NetBeans from creating new Maven projects based on archetypes that live in a repository created by Archiva 1.2. 
MRM-1155,oching,Maria Odea Ching,2009-07-29T06:13:07.715Z,2009-07-29T06:13:07.715Z,The index can be successfully retrieved from m2eclipse generated by Archiva 1.2.2-SNAPSHOT. Nothing appears when browsing the repository though.
MRM-1155,oching,Maria Odea Ching,2009-07-30T01:48:49.572Z,2009-07-30T01:48:49.572Z,Verified that this issue is already fixed since 1.2.1. I was able to retrieve the index and browse its contents from m2eclipse.
MRM-1155,mk4work,Michael K,2009-08-04T03:25:41.818Z,2009-08-04T03:25:41.818Z,"I can't confirm that. I tried it with Archiva 1.2.1 and Ganymede+m2eclipse 0.9.8 and Galileo+m2eclipse 0.9.9 also. The result is always the same. 
After updating the index I can't see anything. No repository content and no error message of what is wrong. 
The repository index folder .index on Archiva-Side contains the files nexus-maven-repository-index.properties /.zip and /.gz.
Is the bug really fixed for 1.2.1 or what is my mistake?"
MRM-1155,oching,Maria Odea Ching,2009-08-04T03:44:04.481Z,2009-08-04T03:44:04.481Z,"I was able to retrieve the index (and browse repo contents) generated by Archiva 1.2.1, I was using it with Galileo with m2eclipse 0.9.8.200905041414. I'm re-opening this issue due to inconsistencies in behavior.."
MRM-1155,gautencio,Gwen Harold Autencio,2009-08-12T21:22:47.124Z,2009-08-12T21:22:47.124Z,"I was to retrieve the index but was not able to browse the repository. I used Galileo , m2eclipse 0.9.9.200907201117 and archiva versions 1.2.1 and 1.2.2-SNAPSHOT.
I have also tried to upload an artifact using the upload web form of archiva. After updating the index, I was able to browse the uploaded artifact but not the other artifacts. "
MRM-1155,oching,Maria Odea Ching,2009-08-19T05:35:19.765Z,2009-08-19T05:35:19.765Z,"Made some fixes in trunk -r805736 with the following changes:
* optimize index after updating and before packaging
* added test case (search artifacts from packaged index)

After adding the above fix, I'm able to browse everything in the index from m2eclipse. I'll deploy a new snapshot so you could verify it as well. Thanks!

"
MRM-1155,gautencio,Gwen Harold Autencio,2009-08-20T01:21:34.544Z,2009-08-20T01:21:34.544Z,"eclipse - galileo
m2eclipse - 0.9.8.200905041414
archiva - trunk -r805736

I confirm that the latest commits fixed the issue.

Steps that I took to verify the issue.
1. Created a new directory for my repository.
2. Copied some artifacts from my local repository and paste into the new directory.
3. Run the command --> find [REPOSITORY_DIRECTORY_NAME] | xargs touch
4. Added managed repository pointing to the directory created in step 1 and scan repo.
5. Added new index
6. And I was able to search and browse the repository .

.


"
MRM-1129,brettporter,Brett Porter,2010-02-23T03:29:29.11Z,2010-02-23T03:29:29.11Z,for checking against nexus index update
MRM-1129,brettporter,Brett Porter,2011-09-12T10:43:04.916Z,2011-09-12T10:43:04.916Z,I recall Tamas adding this recently - to confirm
MRM-1129,olamy,Olivier Lamy (*$^%`),2011-09-19T03:19:59.323Z,2011-09-19T03:19:59.323Z,fixed in maven-indexer. We could at least add a unit test ?
MRM-1129,olamy,Olivier Lamy (*$^%`),2011-09-23T10:17:34.182Z,2011-09-23T10:17:34.182Z,unit test added
MRM-1131,brettporter,Brett Porter,2010-02-23T03:53:02.27Z,2010-02-23T03:53:02.27Z,"still relevant, even though many instances in the database have been removed. For review in a wider refactoring."
MRM-1120,brettporter,Brett Porter,2010-02-23T01:55:10.512Z,2010-02-23T01:55:10.512Z,for testing
MRM-1134,brettporter,Brett Porter,2009-03-11T11:04:19.985Z,2009-03-11T11:04:19.985Z,requires documentation also
MRM-1178,brettporter,Brett Porter,2009-05-05T07:09:51.294Z,2009-05-05T07:09:51.294Z,"WEB-INF/classes/log4j.xml contains the configuration.

Please replace it with the one shipped with Archiva, which does not set these to the DEBUG level.

"
MRM-1178,pstawik,Piotr Stawinski,2009-05-07T02:27:23.138Z,2009-05-07T02:27:23.138Z,"Hi
Thanks for quick answer ;) 
I replace my log4j.xml file from Archiva, but log is still very large... I've attached my log4j.xml and part of my server.log

Thanks for advice
Piotr Stawinski"
MRM-1178,brettporter,Brett Porter,2009-05-14T14:02:31.45Z,2009-05-14T14:02:31.45Z,there must be some configuration in JBoss that is overriding this? Are there any log4j configs in the JBoss installation?
MRM-1178,brettporter,Brett Porter,2009-07-02T01:58:01.018Z,2009-07-02T01:58:01.018Z,please reopen if you have more info
MRM-1162,mk4work,Michael K,2009-04-02T08:17:24.152Z,2009-04-02T08:17:24.152Z,"I made the same experience, but when I touch anyone file in the repository and do scanning of repository via Archiva once again, the nexus.index.time is correct.
But unfortunatelly the  repository index  in the eclipse-view 'Maven Indexes' doesn't run properly anyway."
MRM-1162,ghandim,michael gantert,2009-04-02T08:37:50.956Z,2009-04-02T08:37:50.956Z,"After some rebuilding of the index by Archiva the timestamp was correct, but than, as you mentioned, the index is not working with m2eclipse (unknown format: -7)...
"
MRM-1162,ghandim,michael gantert,2009-06-14T15:58:07.685Z,2009-06-14T15:58:07.685Z,With Archiva 1.2.1 and current version of m2eclipse plugin i can use the index without problems
MRM-1162,oching,Maria Odea Ching,2009-07-29T06:16:27.75Z,2009-07-29T06:16:27.75Z,The index time was fixed after upgrading the nexus indexer in Archiva 1.2.1. 
MRM-1170,brettporter,Brett Porter,2009-04-07T19:05:02.654Z,2009-04-07T19:05:02.654Z,"I had expected the role editing would allow you to do this from the UI, but it is not currently possible.

However, you can workaround this by editing redback.xml inside archiva-security-1.2.jar and removing the delete-artifact permission from the repository manager.

I think this is a worthwhile enhancement: not a separate role, but rather a repository administrator that is more privileged than a repository deployer (formerly manager).

It would also be helpful both to be able to customise the permissions for given roles, and create your own roles."
MRM-1170,brettporter,Brett Porter,2009-04-08T10:24:59.491Z,2009-04-08T10:24:59.491Z,"when removing the permission from the repository manager in general, you may wish to add it to another role, such as the system administrator."
MRM-1170,jsharp,jsharp,2014-09-12T16:40:58.081Z,2014-09-12T16:40:58.081Z,"The attached patch adds deployer and global deployer roles, which have upload, add metadata, and view audit log permissions. Please have a look.

Custom roles is MRM-1763."
MRM-1170,olamy,Olivier Lamy (*$^%`),2015-02-11T05:09:32.529Z,2015-02-11T05:09:32.529Z,"@jsharp My really bad I didn't see your patch until today :-(.
And I cannot apply it anymore :-(. Maybe a pull request will be easier?
Thanks and I apologize again!!!"
MRM-1170,jsharp,jsharp,2015-03-11T12:43:30.079Z,2015-03-11T12:43:30.079Z,"@olamy no problem, I've been a little swamped with other work lately. I'll put it in a pull request as soon as I can. 

Where's the JIRA going to be migrated?"
MRM-1170,olamy,Olivier Lamy (*$^%`),2015-03-22T21:44:22.716Z,2015-03-22T21:44:22.716Z, @Jonathan JIra will be migrated to Apache instance. When? I don't know :-)
MRM-1149,brettporter,Brett Porter,2009-03-20T10:49:46.51Z,2009-03-20T10:49:46.51Z,my.group.\*/\*\* for m1 (just one * in the group) is effectively the same as my/group/\*\* for m2 - does that work?
MRM-1149,lbeuster,Lars Beuster,2009-03-23T03:31:22.215Z,2009-03-23T03:31:22.215Z,"Yes, this works, good idea - and a good workaround.

Thanks
Lars"
MRM-1149,brettporter,Brett Porter,2009-03-23T03:40:08.123Z,2009-03-23T03:40:08.123Z,will improve the documentation
MRM-1149,lbeuster,Lars Beuster,2009-03-23T04:27:36.32Z,2009-03-23T04:27:36.32Z,"Perhaps it's possible not only to improve the docs, but also to support the ""my/group/\*\*""-syntax for m1-repos to have a more transparent view to the black-/whitelists."
MRM-1149,brettporter,Brett Porter,2009-05-14T14:55:28.74Z,2009-05-14T14:55:28.74Z,another alternative would be checking it against the incoming request in addition to the outgoing request
MRM-1149,olamy,Olivier Lamy (*$^%`),2014-03-02T16:31:25.222Z,2014-03-02T16:31:25.222Z,not sure we still want fix issues for maven1 support?
MRM-1191,brettporter,Brett Porter,2009-06-01T01:11:11.996Z,2009-06-01T01:11:11.996Z,"shouldn't this be a page under the admin guide, similar to the config files?"
MRM-1191,jzurbano,jzurbano,2009-07-21T23:21:07.515Z,2009-07-21T23:21:07.515Z,Attached the modified patch (MRM-1191.patch) for this issue.
MRM-1191,oching,Maria Odea Ching,2009-07-27T05:54:45.762Z,2009-07-27T05:54:45.762Z,Thanks for the patch Jev! :) I already applied it to trunk -r798099.
MRM-1111,brettporter,Brett Porter,2009-04-11T18:30:48.242Z,2009-04-11T18:30:48.242Z,see also CONTINUUM-2169
MRM-1111,henryju,Julien HENRY,2009-08-12T08:26:10.321Z,2009-08-12T08:26:10.321Z,"This patch provides migration to Struts 2.1.6. It depends on redback and plexus-spring latest snapshot (assuming the patches provided in  REDBACK-232 are both applied).

Please review and give me your feedback."
MRM-1111,gautencio,Gwen Harold Autencio,2010-05-19T11:18:01.49Z,2010-05-19T11:18:01.49Z,The page menus of archiva seems to be lost after apply the patches of redback and archiva locally.
MRM-1111,gautencio,Gwen Harold Autencio,2010-05-20T07:27:25.404Z,2010-05-20T07:27:25.404Z,"Tried changing version of sitemesh to 2.4.2 and adding SiteMeshFilter in web.xml already displays the archiva layout.

Btw, unit tests are failing in archiva-webapp when applying patch of redback and archiva."
MRM-1111,gautencio,Gwen Harold Autencio,2010-05-26T08:37:14.841Z,2010-05-26T08:37:14.841Z,"Hi, 

Attaching updated patch of julien. Add fix for archiva layout and unit test for archiva-webapp.
Selenium webapp test needs to be fixed and webdav."
MRM-1111,gautencio,Gwen Harold Autencio,2010-06-01T11:12:31.413Z,2010-06-01T11:12:31.413Z,"Hi,

Attaching updated working patch for the upgrade of struts to 2.1.6.
In the patch 
    * added <constant name=""struts.action.extension"" value=""action"" /> for fix of webdav
    * modified RepositoryActionMapper for fix of regression after adding struts.action.extension in struts.xml

Unit and selenium tests are already passing. This is against r949980. Thanks.
"
MRM-1111,ctan,Maria Catherine Tan,2010-06-03T22:19:16.365Z,2010-06-03T22:19:16.365Z,"Hi Gwen/Julien,

I found this: Since Struts 2.1.3, ActionContextCleanUp and FilterDispatcher are deprecated. Use StrutsPrepareFilter and StrutsExecuteFilter instead. In the API docs, it also says that it's better to use StrutsPrepareAndExecuteFilter when you don't have another filter that needs access to action context information, such as Sitemesh.
   
So from what I understand, we're supposed to use StrutsPrepareFilter and StrutsExecuteFilter instead of StrutsPrepareAndExecuteFilter or is there no difference?

{noformat}
<filter>
  <filter-name>struts-prepare</filter-name>
  <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareFilter</filter-class>
</filter>

<filter>
  <filter-name>sitemesh</filter-name>
  <filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
</filter>

<filter>
  <filter-name>struts-execute</filter-name>
  <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsExecuteFilter</filter-class>
</filter>
{noformat}"
MRM-1111,gautencio,Gwen Harold Autencio,2010-06-08T08:56:53.334Z,2010-06-08T08:56:53.334Z,"Hi Catherine,

Ah I see, ActionContextCleanUp and FilterDispatcher are deprecated since 2.1.3.
Archiva can use the same filters that is used by Continuum, since Continuum has been upgraded to struts 2.1.6."
MRM-1111,ctan,Maria Catherine Tan,2010-06-08T20:50:55.272Z,2010-06-08T20:50:55.272Z,"Hi Gwen,

Yeah, I think you really need to use StrutsPrepareFilter and StrutsExecuteFilter if you're going to remove the ActionContextCleanup :)"
MRM-1111,sfcoy,Stephen Coy,2010-06-09T02:30:22.286Z,2010-06-09T02:30:22.286Z,"Hi there,

Do you people actually have this working? I've found that once you click on the ""Browse"" link, all of the left hand menu links get rendered minus their "".action"" suffix.

It all seems to be working aside from this.

Remarkably I came up with much the same changes independently by the way.
"
MRM-1111,ctan,Maria Catherine Tan,2010-06-09T19:19:27.425Z,2010-06-09T19:19:27.425Z,"Hi Stephen,

It doesn't happen to me. They still have the "".action"" except for the Browse"
MRM-1111,brettporter,Brett Porter,2011-04-12T08:23:03.764Z,2011-04-12T08:23:03.764Z,applied patch and started to fix up remaining problems. Also moved to Struts 2.1.8.1
MRM-1111,brettporter,Brett Porter,2011-04-12T10:37:15.841Z,2011-04-12T10:37:15.841Z,most things I could find are fixed. Maybe other quirks to keep eyes open for
MRM-1127,skygolanur,Eric Barboni,2012-08-27T17:44:01.992Z,2012-08-27T17:44:01.992Z,commit some change in r1377897 but headers were correct to me before.
MRM-1127,skygolanur,Eric Barboni,2012-08-28T17:40:34.272Z,2012-08-28T17:40:34.272Z,"Seems fixed since a while,
lynx -head on https://archiva-repository.apache.org/archiva/repository/public/ 

no ETag empty:
no duplicate of Last-Modified:

ffx and ie say so too"
MRM-1127,brettporter,Brett Porter,2012-09-26T01:57:37.671Z,2012-09-26T01:57:37.671Z,"No change:

{code}
GET /archiva/repository/public/ HTTP/1.1
Host: archiva-repository.apache.org

HTTP/1.1 200 OK
Date: Wed, 26 Sep 2012 06:55:55 GMT
Server: Jetty(8.1.7.v20120910)
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Pragma: no-cache
Cache-Control: max-age=86400, public
Last-Modified: Wed, 26 Sep 2012 06:55:55 GMT
Last-Modified: Wed, 26 Sep 2012 06:55:55 GMT
Content-Type: text/html;charset=UTF-8
ETag: 
Vary: Accept-Encoding
Set-Cookie: JSESSIONID=1rjr7loqi4pik1hrjm2qwkci48;Path=/archiva
Transfer-Encoding: chunked
{code}

I notice curl (and I guess FFX) collapses them - so maybe not an issue, but still curious."
MRM-1127,skygolanur,Eric Barboni,2012-09-26T03:02:35.346Z,2012-09-26T03:02:35.346Z,Hi Brett what tools do you use to show header?
MRM-1127,olamy,Olivier Lamy (*$^%`),2012-09-26T03:34:22.228Z,2012-09-26T03:34:22.228Z,"curl -I must do that :-)
IMHO it's due to recent change I did to prevent caching when browsing directories rev 1388705"
MRM-1127,olamy,Olivier Lamy (*$^%`),2012-09-26T04:17:28.869Z,2012-09-26T04:17:28.869Z,"@Brett I just tested:
{code}
mbp-olamy:~ olamy$ curl -I https://archiva-repository.apache.org/archiva/repository/public/
HTTP/1.1 200 OK
Date: Wed, 26 Sep 2012 09:15:23 GMT
Server: Jetty(8.1.7.v20120910)
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Pragma: no-cache
Cache-Control: max-age=86400, public
Last-Modified: Wed, 26 Sep 2012 09:15:23 GMT
Transfer-Encoding: chunked
Content-Type: text/plain
Set-Cookie: JSESSIONID=iqgyajeqybrq12l3m9lizj4n6;Path=/archiva
Vary: Accept-Encoding
{code}
weird I see only one."
MRM-1127,brettporter,Brett Porter,2012-09-26T04:48:42.251Z,2012-09-26T04:48:42.251Z,"curl merges them - try ""wget -S"", or ""openssl s_client -connect archiva-repository.apache.org:443"" (which is what I used above)"
MRM-1127,olamy,Olivier Lamy (*$^%`),2014-03-02T18:44:04.648Z,2014-03-02T18:44:04.648Z,"fixed.
Test:

mb-olamy:archiva olamy$ curl -S -I https://archiva-repository.apache.org/archiva/repository/public/
HTTP/1.1 200 OK
Date: Mon, 03 Mar 2014 00:43:28 GMT
Server: Jetty(8.1.14.v20131031)
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Pragma: no-cache
Cache-Control: max-age=86401, public
Last-Modified: Mon, 03 Mar 2014 00:43:28 GMT
Transfer-Encoding: chunked
Set-Cookie: JSESSIONID=luz2e16ad30i1w4nds49nhwif;Path=/
Content-Type: text/plain"
MRM-1127,cstamas,"Cservenak, Tamas",2014-07-18T10:53:28.765Z,2014-07-18T10:53:28.765Z,"It seems not quite fixed. We jut got a report of this one
https://issues.sonatype.org/browse/NEXUS-6701

And I reproduced it by following NEXUS issue description just fine."
MRM-1127,brettporter,Brett Porter,2014-07-18T16:40:05.073Z,2014-07-18T16:40:05.073Z,"[~cstamas] - seems slightly different. Above was duplicated headers, but you're getting a single, but epoch, last modified. This occurs on a group, not on a repository. I'll file a separate issue."
MRM-1127,brettporter,Brett Porter,2014-07-18T16:41:52.94Z,2014-07-18T16:41:52.94Z,See MRM-1854
MRM-1171,gautencio,Gwen Harold Autencio,2009-07-17T04:08:22.075Z,2009-07-17T04:08:22.075Z,Attaching patch for issue.
MRM-1171,oching,Maria Odea Ching,2009-07-20T00:56:09.11Z,2009-07-20T00:56:09.11Z,Thanks for the patch Gwen! I already applied it to trunk -r795695.
MRM-1159,oching,Maria Odea Ching,2009-03-31T20:19:16.364Z,2009-03-31T20:19:16.364Z,"Looks like a missing library. You might need to add the xwork and/or struts2 jars in the app server's lib..
"
MRM-1159,patriarch24,Cyril Delmas,2009-04-01T02:25:22.196Z,2009-04-01T02:25:22.196Z,"The xwork library is not missing (it is located in WEB-INF/lib). If I add it to the app server's lib directory, the app cannot be loaded because of another ""missing"" class : org.springframework.context.ApplicationContextAware which is located in the spring-context jar in WEB-INF/lib.

Another idea ?"
MRM-1159,brettporter,Brett Porter,2009-04-01T02:47:05.23Z,2009-04-01T02:47:05.23Z,"is there more to the trace? it seems the error is on a different, unspecified class - not the validator factory itself"
MRM-1159,patriarch24,Cyril Delmas,2009-04-01T05:25:05.53Z,2009-04-01T05:25:05.53Z,"Unfortunately, I didn't find a more precise trace in the server logs nor in the archiva logs. The top of the stacktrace just says : no WebApplicationContext, due to this error.

I reproduce the error each time I try."
MRM-1159,brettporter,Brett Porter,2009-04-05T17:23:14.663Z,2009-04-05T17:23:14.663Z,"we might need to start building up sample configurations for servers as part of our selenium tests that can be used to verify a server configuration works with Archiva in the first place.

Do you have a copy of the configuration files / server changes you made to install Archiva?"
MRM-1159,patriarch24,Cyril Delmas,2009-04-08T05:48:03.934Z,2009-04-08T05:48:03.934Z,"I used the glassfish web console to add the data sources (archiva and users). No more configuration needed as far as I remember (I deployed the app using the web console too), you will only need to add the good driver to the classpath.


This is a resources file for glassfish (not tested) :

<!-- file : archiva-ds.xml -->
<?xml version=""1.0"" encoding=""UTF-8""?>
<!DOCTYPE resources PUBLIC ""-//Sun Microsystems Inc.//DTD Application Server 9.0 Domain//EN"" ""sun-resources_1_3.dtd"">
<resources>
    <!--
        Glassfish MySQL datasource configuration

        To add these datasources, start Glassfish v2, and execute
        ${glassfish.home}/bin/asadmin add-resources /path/to/archiva-ds.xml

        Make sure mysql-connector-java-<version>-bin.jar is located in /domains/yourdomain/lib/ext (adapt the path to match your domain)
    -->

    <!-- Configure the global configuration datasource -->
    
    <jdbc-connection-pool
        name=""ArchivaPool""
        datasource-classname=""com.mysql.jdbc.jdbc2.optional.MysqlDataSource""
        res-type=""javax.sql.DataSource"">
        <property name=""user"" value=""archiva""/>
        <property name=""password"" value=""archivapasswd""/>
        <property name=""url"" value=""jdbc:mysql://localhost:3306/Archiva""/>
    </jdbc-connection-pool>

    <jdbc-resource pool-name=""ArchivaPool"" jndi-name=""jdbc/archiva"" enabled=""true"" object-type=""user""/>

    <jdbc-connection-pool
        name=""UsersPool""
        datasource-classname=""com.mysql.jdbc.jdbc2.optional.MysqlDataSource""
        res-type=""javax.sql.DataSource"">
        <property name=""user"" value=""useradmin""/>
        <property name=""password"" value=""useradminpasswd""/>
        <property name=""url"" value=""jdbc:mysql://localhost:3306/Users""/>
    </jdbc-connection-pool>

    <jdbc-resource pool-name=""UsersPool"" jndi-name=""jdbc/users"" enabled=""true"" object-type=""user""/>

</resources>


This should work...
"
MRM-1159,brettporter,Brett Porter,2009-05-14T14:05:52.099Z,2009-05-14T14:05:52.099Z,were you able to resolve your issue?
MRM-1159,brettporter,Brett Porter,2009-07-02T01:58:50.388Z,2009-07-02T01:58:50.388Z,please reopen if you have more info and its not resolved
MRM-1135,oching,Maria Odea Ching,2009-03-14T01:44:22.271Z,2009-03-14T01:44:22.271Z,Fixed in trunk -r753608. All blacklist and white list patterns containing '\' are now escaped.
MRM-1165,oching,Maria Odea Ching,2009-05-19T21:35:49.932Z,2009-05-19T21:35:49.932Z,Fixed in trunk -r776524.
MRM-1190,brettporter,Brett Porter,2009-05-29T07:26:43.099Z,2009-05-29T07:26:43.099Z,"are you looking for this?

{code}**/com.springsource.*/**{code}
"
MRM-1190,rombert,Robert Munteanu,2009-05-29T07:53:12.88Z,2009-05-29T07:53:12.88Z,"Yes, I am. Sorry about that.

I did not manage to extract the information from http://archiva.apache.org/docs/1.2.1/adminguide/proxy-connectors.html, but perhaps a few more examples would be nice."
MRM-1190,brettporter,Brett Porter,2009-05-29T08:02:24.234Z,2009-05-29T08:02:24.234Z,Thanks. We also have MRM-1149 to improve the documentation in this regard
MRM-1189,jzurbano,jzurbano,2009-07-22T00:33:20.777Z,2009-07-22T00:33:20.777Z,This seems to be fixed in 1.2.2-SNAPSHOT.
MRM-1189,oching,Maria Odea Ching,2009-07-28T04:04:39.311Z,2009-07-28T04:04:39.311Z,"I also cannot replicate the issue in 1.2.2-SNAPSHOT. I tried searching plexus-component-api as well as other artifact names with dashes, and I was able to get results. ."
MRM-1189,oching,Maria Odea Ching,2009-07-28T04:05:38.816Z,2009-07-28T04:05:38.816Z,My environment was JDK 1.5 and Ubuntu Linux btw.
MRM-1189,amuino,Abel Muio,2009-07-28T04:33:02.778Z,2009-07-28T04:33:02.778Z,"This might be non-reproducible or platform-specific (windows)... I tried to reproduce it on another Archiva installed by a colleage (1.2.1, I think, on LInux) and the search worked.

Where can I download 1.2.2-SNAPSHOT?"
MRM-1189,oching,Maria Odea Ching,2009-07-28T05:41:42.173Z,2009-07-28T05:41:42.173Z,"Hi Abel, do you mind checking if this issue still persists on your end?"
MRM-1189,oching,Maria Odea Ching,2009-07-28T05:42:45.78Z,2009-07-28T05:42:45.78Z,"Oops, sorry I didn't see your previous comment :) I'll deploy a new snapshot of Archiva. Will post the link here once its available. Thanks"
MRM-1189,oching,Maria Odea Ching,2009-07-28T22:38:41.002Z,2009-07-28T22:38:41.002Z,"Hi Abel, the latest binaries are available here:

http://people.apache.org/repo/m2-snapshot-repository/org/apache/archiva/archiva-jetty/1.2.2-SNAPSHOT/

It's built from -r798444. Thanks!"
MRM-1189,oching,Maria Odea Ching,2009-08-07T06:41:21.755Z,2009-08-07T06:41:21.755Z,"Hi Abel, I was able to search for an artifact with a dash in its name from an Archiva 1.2.2-SNAPSHOT running on Windows 7 and JDK 1.5. Were you able to verify this on your end? "
MRM-1189,amuino,Abel Muio,2009-08-07T07:18:58.14Z,2009-08-07T07:18:58.14Z,"I downloaded the snapshot to verify this, but couldn't find the time to do so (sorry!). This is still on my to-do, but I guess that you can just close the issue. When/if I have the time to test it, I will verify or reopen as needed."
MRM-1189,oching,Maria Odea Ching,2009-08-07T20:35:36.235Z,2009-08-07T20:35:36.235Z,"Thanks for the quick response :)

Closing this issue as cannot reproduce.."
MRM-1196,wsmoak,Wendy Smoak,2009-06-02T15:47:32.735Z,2009-06-02T15:47:32.735Z,"Linked to MRM-747.  While it should get the checksums right, Archiva probably shouldn't let you re-upload something (and overwrite a released artifact) in the first place."
MRM-1196,oching,Maria Odea Ching,2009-06-11T03:16:29.346Z,2009-06-11T03:16:29.346Z,Fixed in trunk -r783687.
MRM-1121,oching,Maria Odea Ching,2009-03-18T08:58:51.001Z,2009-03-18T08:58:51.001Z,I was able to replicate this when there were multiple versions of the artifact in different repositories. There was no NPE when there was only 1 version of the artifact.
MRM-1121,oching,Maria Odea Ching,2009-03-18T09:29:10.751Z,2009-03-18T09:29:10.751Z,Fixed in trunk -r755602.
MRM-1138,jameswdumay,James William Dumay,2009-03-13T00:23:09.514Z,2009-03-13T00:23:09.514Z,Committed in r753121
MRM-1126,olamy,Olivier Lamy (*$^%`),2012-12-20T07:29:09.514Z,2012-12-20T07:29:09.514Z,"@brett lemme know if it's better ?
NOTE it's with the new ui"
MRM-1148,oching,Maria Odea Ching,2009-03-20T21:39:03.667Z,2009-03-20T21:39:03.667Z,"Hi Brett, I can't seem to replicate this.. What are the exact steps that you did when you got this error?"
MRM-1148,brettporter,Brett Porter,2009-03-21T01:21:17.441Z,2009-03-21T01:21:17.441Z,"after a rebuild I Can't make this happen any more, though it was consistent earlier. I think I'd had something set up badly in my dev environment."
MRM-1130,brettporter,Brett Porter,2009-03-10T22:35:00.672Z,2009-03-10T22:35:00.672Z,"consider unifying with main audit log, at least in format"
MRM-1130,brettporter,Brett Porter,2009-03-11T07:39:20.43Z,2009-03-11T07:39:20.43Z,"done, didn't alter the existing audit log for now"
MRM-1142,gautencio,Gwen Harold Autencio,2009-08-03T04:49:23.943Z,2009-08-03T04:49:23.943Z,"Hi,

Attaching initial patch for this issue.
This displays the observable repositories of the user where the artifact can be located."
MRM-1142,gautencio,Gwen Harold Autencio,2009-08-04T01:35:48.495Z,2009-08-04T01:35:48.495Z,Attaching updated patch includes delete artifact link in the artifact info page.
MRM-1142,skygolanur,Eric Barboni,2012-10-02T08:26:11.095Z,2012-10-02T08:26:11.095Z,Maybe delete button in the new UI make the trick?
MRM-1142,olamy,Olivier Lamy (*$^%`),2012-10-02T08:30:27.188Z,2012-10-02T08:30:27.188Z,"fixed with the new UI
good catch Eric :-)"
MRM-1151,henryju,Julien HENRY,2009-04-14T02:04:35.237Z,2009-04-14T02:04:35.237Z,"Same problem for me.

Probably OS dependent because this error is about parsing a path."
MRM-1151,magullo,Giancarlo Rosso,2009-04-29T04:54:01.093Z,2009-04-29T04:54:01.093Z,"Same problem here.
Linux RHEL5 64bit, JBoss 4.2.3 with jdk 1.5.0_17.
"
MRM-1151,daniel.takai,Daniel Takai,2009-05-18T09:43:30.122Z,2009-05-18T09:43:30.122Z,Same problem here. CentOs. JDK 1.5.
MRM-1151,axismundi,Marc Lustig,2009-06-05T06:44:14.166Z,2009-06-05T06:44:14.166Z,"Same problem here, too. Archiva 1.2.1, RHEL4, Tomcat6, jdk1.6.0_07, Oracle RAC"
MRM-1151,oching,Maria Odea Ching,2009-06-07T21:54:25.858Z,2009-06-07T21:54:25.858Z,"Just a note for this issue, this doesn't affect the indexing.. What happens is that the scanner sees the zipped file and passes it on to the repo purge consumer and since it doesn't have the standard groupId/artifactId/version path, the error is thrown. We should probably specify an excludes in the purge consumer (or in all the repo consumers) so that it doesn't process the index and the zipped index."
MRM-1151,gautencio,Gwen Harold Autencio,2009-07-20T22:35:06.337Z,2009-07-20T22:35:06.337Z,Attached patch that adds filepattern to the DEFAULT_EXCLUSIONS so that .index folder won't be proccessed by the consumers.
MRM-1151,jzurbano,jzurbano,2009-08-18T06:45:40.285Z,2009-08-18T06:45:40.285Z,"Patch applied and unit test added in r805371 of trunk.

Thanks Gwen! :)"
MRM-1172,jancajas,jancajas,2009-04-27T03:02:35.201Z,2009-04-27T03:02:35.201Z,"From what I've traced this has something to do with the version algorithm implementation :
1. tokenize the string  using ""-"" (dash) as the separator
2. checks if each token matches the regex pattern (see below)
3. the  token ratio  between ""matching tokens"" and ""all tokens"" must be 75% or more.

From the example it's only 50%.

We can loosen the rule a bit  to return true if the first token  is a matching token. thoughts on this ?


{noformat}
        ""([0-9][_.0-9a-z]*)"",
        ""(snapshot)"",
        ""(g?[_.0-9ab]*(pre|rc|g|m)[_.0-9]*)"",
        ""(dev[_.0-9]*)"",
        ""(alpha[_.0-9]*)"",
        ""(beta[_.0-9]*)"",
        ""(rc[_.0-9]*)"",
        ""(debug[_.0-9]*)"",
        ""(unofficial[_.0-9]*)"",
        ""(current)"",
        ""(latest)"",
        ""(fcs)"",
        ""(release[_.0-9]*)"",
        ""(nightly)"",
        ""(final)"",
        ""(incubating)"",
        ""(incubator)"",
        ""([ab][_.0-9]+)""
{noformat}"
MRM-1172,jancajas,jancajas,2009-04-27T03:38:48.74Z,2009-04-27T03:38:48.74Z,attach patch for the proposed solution.
MRM-1172,wsmoak,Wendy Smoak,2009-04-27T09:17:29.128Z,2009-04-27T09:17:29.128Z,"Is there logic somewhere in Maven to decide whether a version number is valid?   Why would Archiva be more strict about this?

I've never had a build fail due to an invalid version number... it may not be able to find the dependency, and creative version number formats don't work well with ranges, but not invalid.
"
MRM-1172,jancajas,jancajas,2009-04-28T20:55:27.802Z,2009-04-28T20:55:27.802Z,maven deploy plugin doesn't have this checking. it's only in archiva
MRM-1172,jancajas,jancajas,2009-05-06T03:06:29.432Z,2009-05-06T03:06:29.432Z,added UT. THanks:)
MRM-1172,oching,Maria Odea Ching,2009-05-06T06:21:25.906Z,2009-05-06T06:21:25.906Z,"Patch applied to trunk -r772151. Thanks Jan! 

Leaving this issue for the documentation patch.."
MRM-1172,oching,Maria Odea Ching,2009-05-24T06:43:25.353Z,2009-05-24T06:43:25.353Z,Updated documentation in trunk -r778123.
MRM-1113,brettporter,Brett Porter,2010-02-23T03:28:26.598Z,2010-02-23T03:28:26.598Z,"for testing, I think we fixed this"
MRM-1113,brettporter,Brett Porter,2010-02-23T05:31:03.997Z,2010-02-23T05:31:03.997Z,still not supported
MRM-1185,ctan,Maria Catherine Tan,2009-12-13T08:16:19.918Z,2009-12-13T08:16:19.918Z,attached patch to fix this issue.
MRM-1185,brettporter,Brett Porter,2010-01-07T22:38:54.12Z,2010-01-07T22:38:54.12Z,patch to apply for release
MRM-1185,oching,Maria Odea Ching,2010-01-11T04:19:18.814Z,2010-01-11T04:19:18.814Z,"Patch reviewed and applied to trunk [-r897827|http://svn.apache.org/viewvc?revision=897827&view=revision]. 
Thanks Marica!"
MRM-1166,gautencio,Gwen Harold Autencio,2009-07-21T08:37:49.637Z,2009-07-21T08:37:49.637Z,I didn't encounter this issue in 1.2.2-SNAPSHOT version.
MRM-1166,oching,Maria Odea Ching,2009-07-28T02:21:49.602Z,2009-07-28T02:21:49.602Z,I cannot reproduce this in 1.2.2-SNAPSHOT -r798060. This must have been fixed after upgrading the nexus indexer in Archiva 1.2.1.
MRM-1101,wsmoak,Wendy Smoak,2009-02-26T13:26:41.513Z,2009-02-26T13:26:41.513Z,Possible regression in MRM-628 ?
MRM-1101,carlos,Carlos Sanchez,2009-02-26T13:36:22.759Z,2009-02-26T13:36:22.759Z,"audit log output :

{code}
2009-02-26 11:15:03 /sample/poms/sample-echo-1.0-SNAPSHOT.pom guest 127.0.0.1 ""sample/poms"" ""Created Directory""
2009-02-26 11:15:03 snapshots guest 127.0.0.1 ""/sample/poms/sample-echo-1.0-SNAPSHOT.pom"" ""Created File""
2009-02-26 11:15:03 snapshots guest 127.0.0.1 ""/sample/poms/sample-echo-1.0-SNAPSHOT.pom.md5"" ""Modified File""
2009-02-26 11:15:03 snapshots guest 127.0.0.1 ""/sample/poms/sample-echo-1.0-SNAPSHOT.pom.sha1"" ""Modified File""
2009-02-26 11:15:03 snapshots guest 127.0.0.1 ""/sample/poms/sample-echo-snapshot-version"" ""Created File""
2009-02-26 11:15:03 snapshots guest 127.0.0.1 ""/sample/poms/sample-echo-snapshot-version.md5"" ""Created File""
2009-02-26 11:15:03 snapshots guest 127.0.0.1 ""/sample/poms/sample-echo-snapshot-version.sha1"" ""Created File""
2009-02-26 11:15:03 snapshots guest 127.0.0.1 ""/sample/poms/sample-echo-1.0-20090226.191503.pom"" ""Created File""
2009-02-26 11:15:03 snapshots guest 127.0.0.1 ""/sample/poms/sample-echo-1.0-20090226.191503.pom.md5"" ""Modified File""
2009-02-26 11:15:03 snapshots guest 127.0.0.1 ""/sample/poms/sample-echo-1.0-20090226.191503.pom.sha1"" ""Modified File""
2009-02-26 11:15:03 /sample/jars/sample-echo-1.0-SNAPSHOT.jar guest 127.0.0.1 ""sample/jars"" ""Created Directory""
2009-02-26 11:15:04 snapshots guest 127.0.0.1 ""/sample/jars/sample-echo-1.0-SNAPSHOT.jar"" ""Created File""
2009-02-26 11:15:04 snapshots guest 127.0.0.1 ""/sample/jars/sample-echo-1.0-SNAPSHOT.jar.md5"" ""Modified File""
2009-02-26 11:15:04 snapshots guest 127.0.0.1 ""/sample/jars/sample-echo-1.0-SNAPSHOT.jar.sha1"" ""Modified File""
2009-02-26 11:15:04 snapshots guest 127.0.0.1 ""/sample/jars/sample-echo-snapshot-version"" ""Created File""
2009-02-26 11:15:04 snapshots guest 127.0.0.1 ""/sample/jars/sample-echo-snapshot-version.md5"" ""Created File""
2009-02-26 11:15:04 snapshots guest 127.0.0.1 ""/sample/jars/sample-echo-snapshot-version.sha1"" ""Created File""
2009-02-26 11:15:04 snapshots guest 127.0.0.1 ""/sample/jars/sample-echo-1.0-20090226.191503.jar"" ""Created File""
2009-02-26 11:15:04 snapshots guest 127.0.0.1 ""/sample/jars/sample-echo-1.0-20090226.191503.jar.md5"" ""Modified File""
2009-02-26 11:15:04 snapshots guest 127.0.0.1 ""/sample/jars/sample-echo-1.0-20090226.191503.jar.sha1"" ""Modified File""
{code}"
MRM-1179,oching,Maria Odea Ching,2009-05-23T02:30:57.18Z,2009-05-23T02:30:57.18Z,Fixed in trunk 777816.
MRM-1187,axismundi,Marc Lustig,2009-09-10T13:28:42.735Z,2009-09-10T13:28:42.735Z,"We had the same issue.
I have fixed this by removing all the policy-code from DefaultUserSecurityPolicy (redback-policy.jar) that we do not use anyway."
MRM-1194,gautencio,Gwen Harold Autencio,2009-07-28T01:58:24.08Z,2009-07-28T01:58:24.08Z,"Added pom snippet to a sample project and deployed it in a repository.
Can't seem to replicate the issue using 1.2.2-SNAPSHOT.
"
MRM-1194,oching,Maria Odea Ching,2009-07-30T04:21:10.898Z,2009-07-30T04:21:10.898Z,"I can't reproduce this issue as well, both in 1.2.1 and 1.2.2-SNAPSHOT. I took a look at the ARCHIVA_ARTIFACT_REFERENCE (plugins) table and the version saved was properly interpolated. I used a clean database each time though.

Ben, from what Archiva version did you upgrade and what are the steps that you did?"
MRM-1194,ben.lidgey,Ben Lidgey,2009-07-30T05:32:19.428Z,2009-07-30T05:32:19.428Z,"I can't really remember! I think it was Archiva 1.1.6, and I followed the instructions on the Archiva site for upgrading.

I seem to remember that the property name was also appearing in the Archiva page for the artifact too, rather than the value of the property."
MRM-1194,oching,Maria Odea Ching,2009-07-30T05:38:10.953Z,2009-07-30T05:38:10.953Z,"Ok, I'll see if I can reproduce this if I upgrade from an older version of Archiva. I assume you retained the database when you upgraded?"
MRM-1194,oching,Maria Odea Ching,2009-07-30T05:40:04.607Z,2009-07-30T05:40:04.607Z,"IIRC, there were a couple of fixes wrt to the interpolation in 1.2.x so it could be due to the old data in the db when the repos were scanned again.."
MRM-1194,ben.lidgey,Ben Lidgey,2009-07-30T06:46:23.294Z,2009-07-30T06:46:23.294Z,I doubt I have the old database.
MRM-1194,oching,Maria Odea Ching,2009-07-31T01:31:10.147Z,2009-07-31T01:31:10.147Z,I'm finally able to reproduce the error above in trunk. I moved up the <properties> configuration in the parent pom with the child pom referencing that property. It seems that properties are not being interpolated in the child pom if the property is declared in the parent.
MRM-1194,oching,Maria Odea Ching,2009-08-07T06:10:07.814Z,2009-08-07T06:10:07.814Z,"The problem that was causing this bug is that the parent pom file being resolved is always the one with -SNAPSHOT when the effective pom is determined. So if only unique (timestamped) versions are available, the parent is not resolved and a default parent containing the minimal info (groupId, artifactId, version and packaging) is created and used instead.

The fix that I did for this is that if the pom being resolved is a snapshot version and a -SNAPSHOT copy does not exist, then the latest timestamped pom will be retrieved instead.

Fix already committed to trunk -r801946.
"
MRM-1119,oching,Maria Odea Ching,2009-03-21T20:14:08.281Z,2009-03-21T20:14:08.281Z,"For now, I'll just document the workaround in the upgrade/install guide. I'll be bumping this issue to the next 1.2.x release."
MRM-1119,brettporter,Brett Porter,2011-09-12T08:29:45.299Z,2011-09-12T08:29:45.299Z,Documentation should be sufficient
MRM-1157,ayven,ayven ayven,2009-03-30T07:00:29.912Z,2009-03-30T07:00:29.912Z,"Hi,
I have the same problem.

Environment: Debian Etch, JDK 1.6.0_07-b06, Apache Tomcat 6.0.18, MySQL Ver 14.12 Distrib 5.0.32 + My SQL connector 5.0.6

This exception (""can't create table"") is thrown during:
- updating database
- browsing repositories from web UI

Example of such exception that occurs always during browsing any repository (instead of showing artifact info): 

javax.servlet.ServletException: org.apache.maven.archiva.database.ArchivaDatabaseException: Error in JDO during get of Database object id [exist:exist:1.2.4] of type org.apache.maven.archiva.model.ArchivaProjectModel using no fetch-group
	org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:515)
	org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)
	com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:118)
	com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:52)
	org.apache.struts2.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:99)

root cause

org.apache.maven.archiva.database.ArchivaDatabaseException: Error in JDO during get of Database object id [exist:exist:1.2.4] of type org.apache.maven.archiva.model.ArchivaProjectModel using no fetch-group
	org.apache.maven.archiva.database.jdo.JdoAccess.getObjectById(JdoAccess.java:449)
	org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.getProjectModel(JdoProjectModelDAO.java:73)
	org.apache.maven.archiva.database.browsing.DefaultRepositoryBrowsing.getProjectModel(DefaultRepositoryBrowsing.java:371)
	org.apache.maven.archiva.database.browsing.DefaultRepositoryBrowsing.selectVersion(DefaultRepositoryBrowsing.java:154)
	org.apache.maven.archiva.web.action.ShowArtifactAction.artifact(ShowArtifactAction.java:111)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	java.lang.reflect.Method.invoke(Method.java:597)
	com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:404)
	com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:267)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:229)
	com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
	com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
	org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
	.
	.
	.
root cause

javax.jdo.JDODataStoreException: Error(s) were found while auto-creating/validating the datastore for classes. The errors are printed in the log, and are attached to this exception.
NestedThrowables:
java.sql.SQLException: Can't create table './archiva/#sql-d58_482.frm' (errno: 150)
java.sql.SQLException: Can't create table './archiva/#sql-d58_482.frm' (errno: 150)
java.sql.SQLException: Can't create table './archiva/#sql-d58_482.frm' (errno: 150)
	org.jpox.store.rdbms.RDBMSManager$ClassAdder.verifyErrors(RDBMSManager.java:3285)
	org.jpox.store.rdbms.RDBMSManager$ClassAdder.addClassTablesAndValidate(RDBMSManager.java:3335)
	org.jpox.store.rdbms.RDBMSManager$ClassAdder.run(RDBMSManager.java:2567)
	org.jpox.store.rdbms.RDBMSManager$MgmtTransaction.execute(RDBMSManager.java:2419)
	org.jpox.store.rdbms.RDBMSManager.addClasses(RDBMSManager.java:824)
	org.jpox.store.rdbms.RDBMSManager.addClass(RDBMSManager.java:838)
	org.jpox.AbstractPersistenceManager.newObjectIdInstance(AbstractPersistenceManager.java:2393)
	org.apache.maven.archiva.database.jdo.JdoAccess.getObjectById(JdoAccess.java:426)
	org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.getProjectModel(JdoProjectModelDAO.java:73)
	org.apache.maven.archiva.database.browsing.DefaultRepositoryBrowsing.getProjectModel(DefaultRepositoryBrowsing.java:371)
	org.apache.maven.archiva.database.browsing.DefaultRepositoryBrowsing.selectVersion(DefaultRepositoryBrowsing.java:154)
	org.apache.maven.archiva.web.action.ShowArtifactAction.artifact(ShowArtifactAction.java:111)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	java.lang.reflect.Method.invoke(Method.java:597)
	com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:404)
	com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:267)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:229)
	com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
	com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
	com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
	com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
	com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
	org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
	com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
	.
	.
	.
	

root cause

java.sql.SQLException: Can't create table './archiva/#sql-d58_482.frm' (errno: 150)
	com.mysql.jdbc.SQLError.createSQLException(SQLError.java:946)
	com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2934)
	com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1616)
	com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1708)
	com.mysql.jdbc.Connection.execSQL(Connection.java:3249)
	com.mysql.jdbc.Connection.execSQL(Connection.java:3178)
	com.mysql.jdbc.Statement.execute(Statement.java:711)
	org.apache.tomcat.dbcp.dbcp.DelegatingStatement.execute(DelegatingStatement.java:264)
	org.jpox.store.rdbms.table.AbstractTable.executeDdlStatement(AbstractTable.java:614)
	org.jpox.store.rdbms.table.TableImpl.validateForeignKeys(TableImpl.java:463)
	org.jpox.store.rdbms.table.TableImpl.validateConstraints(TableImpl.java:388)
	org.jpox.store.rdbms.table.ClassTable.validateConstraints(ClassTable.java:2875)
	org.jpox.store.rdbms.RDBMSManager$ClassAdder.performTablesValidation(RDBMSManager.java:3123)
	org.jpox.store.rdbms.RDBMSManager$ClassAdder.addClassTablesAndValidate(RDBMSManager.java:3326)
	org.jpox.store.rdbms.RDBMSManager$ClassAdder.run(RDBMSManager.java:2567)
	org.jpox.store.rdbms.RDBMSManager$MgmtTransaction.execute(RDBMSManager.java:2419)
	org.jpox.store.rdbms.RDBMSManager.addClasses(RDBMSManager.java:824)
	org.jpox.store.rdbms.RDBMSManager.addClass(RDBMSManager.java:838)
	org.jpox.AbstractPersistenceManager.newObjectIdInstance(AbstractPersistenceManager.java:2393)
	org.apache.maven.archiva.database.jdo.JdoAccess.getObjectById(JdoAccess.java:426)
	org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.getProjectModel(JdoProjectModelDAO.java:73)
	org.apache.maven.archiva.database.browsing.DefaultRepositoryBrowsing.getProjectModel(DefaultRepositoryBrowsing.java:371)
	org.apache.maven.archiva.database.browsing.DefaultRepositoryBrowsing.selectVersion(DefaultRepositoryBrowsing.java:154)
	org.apache.maven.archiva.web.action.ShowArtifactAction.artifact(ShowArtifactAction.java:111)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	java.lang.reflect.Method.invoke(Method.java:597)
	com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:404)
	




Also another exception is recorded in archiva.log file during repository scanning:

2009-03-30 13:44:52,698 [http-8080-5] INFO  org.apache.maven.archiva.web.action.admin.SchedulerAction  - [ActionMessage] Your request to have repository [kedros-releases] be indexed has been queued.
2009-03-30 13:44:52,712 [pool-2-thread-1] INFO  org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor  - Executing task from queue with job name: repository-job:kedros-releases
2009-03-30 13:44:52,757 [pool-2-thread-1] INFO  org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance  - Walk Started: [kedros-releases] /opt/repositories/kedros-releases
2009-03-30 13:44:52,765 [pool-2-thread-1] ERROR org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure  - Consumer [repository-purge] had an error when processing file [/opt/repositories/kedros-releases/.index/nexus-maven-repository-index.zip]: Not enough parts to the path [.index/nexus-maven-repository-index.zip] to construct an ArchivaArtifact from. (Requires at least 4 parts)
org.apache.maven.archiva.consumers.ConsumerException: Not enough parts to the path [.index/nexus-maven-repository-index.zip] to construct an ArchivaArtifact from. (Requires at least 4 parts)
	at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:174)
	at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:50)
	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:137)
	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:174)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:392)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:345)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:117)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:61)
	at org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:139)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:619)
Caused by: org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeException: Not enough parts to the path [.index/nexus-maven-repository-index.zip] to construct an ArchivaArtifact from. (Requires at least 4 parts)
	at org.apache.maven.archiva.consumers.core.repository.RetentionCountRepositoryPurge.process(RetentionCountRepositoryPurge.java:99)
	at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:170)
	... 17 more
Caused by: org.apache.maven.archiva.repository.layout.LayoutException: Not enough parts to the path [.index/nexus-maven-repository-index.zip] to construct an ArchivaArtifact from. (Requires at least 4 parts)
	at org.apache.maven.archiva.repository.content.DefaultPathParser.toArtifactReference(DefaultPathParser.java:65)
	at org.apache.maven.archiva.repository.content.AbstractDefaultRepositoryContent.toArtifactReference(AbstractDefaultRepositoryContent.java:54)
	at org.apache.maven.archiva.repository.content.ManagedDefaultRepositoryContent.toArtifactReference(ManagedDefaultRepositoryContent.java:340)
	at org.apache.maven.archiva.consumers.core.repository.RetentionCountRepositoryPurge.process(RetentionCountRepositoryPurge.java:65)
	... 18 more
2009-03-30 13:44:53,385 [pool-2-thread-1] INFO  org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance  - Walk Finished: [kedros-releases] /opt/repositories/kedros-releases
2009-03-30 13:44:53,388 [pool-2-thread-1] INFO  org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor  - Finished repository task: 
.\ Scan of kedros-releases \.__________________________________________
  Repository Dir    : /opt/repositories/kedros-releases
  Repository Name   : Kedros Internal Releases Repository
  Repository Layout : default
  Known Consumers   : (7 configured)
                      auto-remove
                      auto-rename
                      metadata-updater
                      repository-purge
                      update-db-artifact
                      create-missing-checksums
                      index-content
  Invalid Consumers : <none>
  Duration          : 629 Milliseconds
  When Gathered     : 3/30/09 1:44 PM
  Total File Count  : 910
  Avg Time Per File : 
_____________________________________________________________"
MRM-1157,rombert,Robert Munteanu,2009-03-30T17:12:03.578Z,2009-03-30T17:12:03.578Z,"I'm getting similar errors.

The InnoDB engine status shows:


{code}
090331  0:42:19 Error in foreign key constraint of table archiva_archiva/#sql-7a54_b851:                                                       
 FOREIGN KEY (`CI_MANAGEMENT_ARCHIVA_CIMANAGEMENT_ID_OID`) REFERENCES `ARCHIVA_CIMANAGEMENT` (`ARCHIVA_CIMANAGEMENT_ID`):                      
Cannot find an index in the referenced table where the                                                                                         
referenced columns appear as the first columns, or column types                                                                                
in the table and the referenced table do not match for constraint.                                                                             
Note that the internal storage type of ENUM and SET changed in                                                                                 
tables created with >= InnoDB-4.1.12, and such columns in old tables                                                                           
cannot be referenced by such columns in new tables.                                                                                            
See http://dev.mysql.com/doc/refman/5.0/en/innodb-foreign-key-constraints.html                                                                 
for correct foreign key definition.
{code}

"
MRM-1157,oching,Maria Odea Ching,2009-05-20T05:40:34.372Z,2009-05-20T05:40:34.372Z,This was caused by the changes in MRM-836.. 
MRM-1157,oching,Maria Odea Ching,2009-05-20T09:23:12.555Z,2009-05-20T09:23:12.555Z,"You would need to re-create the database because of the changes in MRM-836.. 

The primary keys for the following tables were changed to a different auto generated id field, which caused the errors above. The old primary keys that were replaced by the new id field in the patch for MRM-836 actually contains auto-generated ids (unique sequential numbers but in String format) that's why in the case of MRM-836, the value displayed for the organization is a ""number"" instead of the actual organization name set in the pom.
* ARCHIVA_CIMANAGEMENT (old primary key was the 'url' field)
* ARCHIVA_ORGANIZATION (old primary key was the 'name' field)
* ARCHIVA_ISSUE_MANAGEMENT (old primary key was the 'url' field)
* ARCHIVA_INDIVIDUALS (old primary key was the 'email' field)

The old data now had 'null' primary keys and also the FK constraints were broken because of the change.

If it is really not an option to re-create the database, the other solution I could think of is either to create a tool for migrating the data OR revert the above tables to their old primary keys then add another column to contain the unsaved values (e.g. the ciManagement & issueManagement urls, the organization name and the individual email). The second option is easier to do and the user doesn't have to do anything, the only drawback is that we have to retain the column names of the old primary keys (url, name and email) which is a bit misleading because their values are just sequential numbers in String format.

Thoughts or comments anyone?"
MRM-1157,rombert,Robert Munteanu,2009-05-21T01:31:12.355Z,2009-05-21T01:31:12.355Z,"It would be good to capture this information either 

* in the user guide ( known issues upgrading 1.1.3 to 1.2.x ) 
* or in the log file alongside the exception
* or in the web interface for the admin user

For me dropping the database was an easy fix, although not an ideal one."
MRM-1157,oching,Maria Odea Ching,2009-05-22T21:10:29.011Z,2009-05-22T21:10:29.011Z,"Agreed. I'll put this in the known issues in the upgrade docs for 1.2.1 to get this documented somewhere.. 
Thanks for the suggestion Robert!"
MRM-1157,oching,Maria Odea Ching,2009-05-24T06:00:53.54Z,2009-05-24T06:00:53.54Z,Fixed in trunk -r778118 with the second option I posted above..
MRM-1157,ashokcm,Ashok Mohan,2009-05-29T08:35:57.082Z,2009-05-29T08:35:57.082Z,"We had been using archiva 1.2 without much problems(except for NPE by apache lucene when an artifact is uploaded manually) in our organization. Today I upgraded to version 1.2.1 and tried uploading an artifact. The NPE was gone and we were glad but then we started getting errors related to ARCHIVA_CIMANAGEMENT, ARCHIVA_ORGANIZATION, and ARCHIVA_ISSUE_MANAGEMENT. I will atach the complete exception trace here."
MRM-1157,ashokcm,Ashok Mohan,2009-05-29T08:37:53.705Z,2009-05-29T08:37:53.705Z,"We had been using archiva 1.2 without much problems(except for NPE by apache lucene when an artifact is uploaded manually) in our organization. Today I upgraded to version 1.2.1 and tried uploading an artifact. The NPE was gone and we were glad but then we started getting errors related to ARCHIVA_CIMANAGEMENT, ARCHIVA_ORGANIZATION, and ARCHIVA_ISSUE_MANAGEMENT. I have attached a file archiva_error.txt with complete stack trace."
MRM-1157,deki,Dennis Kieselhorst,2009-06-05T06:50:45.581Z,2009-06-05T06:50:45.581Z,Our update was successful with 1.2.1.
MRM-1158,oching,Maria Odea Ching,2009-07-30T03:22:50.537Z,2009-07-30T03:22:50.537Z,"Just to clarify, the issue here is that the consumer should still process artifacts with legacy paths s.a. app/poms/app-1.0.pom even though the Archiva repository it was deployed to has a default layout?

Btw, I was able to successfully deploy the Maven 1 artifact to the Archiva M2 repo. I saw the same log info above and it seemed that the artifact actually deployed but was just not processed by the consumers."
MRM-1158,olamy,Olivier Lamy (*$^%`),2014-03-02T16:34:25.314Z,2014-03-02T16:34:25.314Z,not sure we still want enhance maven1 support
MRM-1164,brettporter,Brett Porter,2009-04-05T17:23:41.777Z,2009-04-05T17:23:41.777Z,let's get these running if not complete for the next point release as a starting point
MRM-1164,mbaclay,mbaclay,2009-04-28T10:20:07.735Z,2009-04-28T10:20:07.735Z,"Patch for selenium tests Maven and TestNG.

I also have added a ReadMe file in /archiva-module/archiva-web/archiva-webapp-test. This test does not run with cargo plugin yet.

Thanks."
MRM-1164,wsmoak,Wendy Smoak,2009-04-29T16:23:13.088Z,2009-04-29T16:23:13.088Z,"Cora, I applied MRM-1164-TestNG.patch in r769940.  I get 6 failures from this set of tests, however I didn't look closely to see what might be wrong.  Thanks!"
MRM-1164,mbaclay,mbaclay,2009-04-29T21:13:36.094Z,2009-04-29T21:13:36.094Z,"Hi Wendy, i assumed those errors were from BrowseTest and/or ReportsTest because I haven't added automation yet with adding artifacts and that nothing can't be browsed. I will be fixing it while i'll be creating tests for Artifact Management. Thanks."
MRM-1164,wsmoak,Wendy Smoak,2009-05-01T18:54:33.088Z,2009-05-01T18:54:33.088Z,"r770861 is the result of copying pom.xml to testng-pom.xml and attempting to put back the things that TestNG needs.  (I tried it the other way around, adding things to testng-pom.xml and couldn't get it to to work in a reasonable amount of time.)  You might want to check that I haven't broken anything. :)

"
MRM-1164,wsmoak,Wendy Smoak,2009-05-01T19:15:05.221Z,2009-05-01T19:15:05.221Z,"In r770866 I moved the Cargo plugin config into a profile that is active by default (activated on the absence of the 'container' property).

To run the TestNG tests against an existing Archiva instance, edit the url in src/test/resources/testng.properties and use -Dcontainer=existing on the command line.

Cora, it looks like the antrun plugin config I took from the old pom.xml is copying some artifacts into the repository as it constructs the app... you might be able to use those for your search tests."
MRM-1164,mbaclay,mbaclay,2009-05-05T13:14:30.545Z,2009-05-05T13:14:30.545Z,"Attached MRM-1164-TestNG-2.patch

I modified the pom and some of the classes to make the tests run through executing ""mvn clean install -f testng-pom.xml"" (Firefox will now launch with this patch). It has 6 failures still and I'm still looking/working unto the antrun plugin and hopefully I could get it work for Search/Browse tests and solve the failing tests."
MRM-1164,wsmoak,Wendy Smoak,2009-05-11T19:36:20.593Z,2009-05-11T19:36:20.593Z,"Thanks, Cora!  I applied the 2nd patch in r773741.  Here are my results:

Failed tests: 
  testSearchExistingArtifact(org.apache.archiva.web.test.SearchTest)
  testViewSearchedArtifact(org.apache.archiva.web.test.SearchTest)
  testClickArtifactFromBrowse(org.apache.archiva.web.test.BrowseTest)

Tests run: 18, Failures: 3, Errors: 0, Skipped: 0
"
MRM-1164,mbaclay,mbaclay,2009-05-12T11:44:57.126Z,2009-05-12T11:44:57.126Z,"Attached MRM-1164-TestNG-3.patch.

Modifications:
- added tests for archiva user roles
- added tests for upload artifact
- modified scripts from Search and Browse

Before running the tests, change the value of ARTIFACTFILEPATH in testng.properties (src/test/resources/testng.properties) that will point to a jar file not more than 10MB. The instruction has been added in ReadMe.txt file also.


Results :

Tests run: 32, Failures: 0, Errors: 0, Skipped: 0"
MRM-1164,wsmoak,Wendy Smoak,2009-05-15T23:02:21.944Z,2009-05-15T23:02:21.944Z,"Patch #3 applied in r775412.    I get:  Tests run: 32, Failures: 3, Errors: 0, Skipped: 10

The part of the patch for the Readme.txt file didn't apply properly.  Can you try that again?  Thanks!"
MRM-1164,mbaclay,mbaclay,2009-05-19T02:57:08.314Z,2009-05-19T02:57:08.314Z,"Attached MRM-1164-TestNG-4.patch

Modified the scripts so as testng.properties will no longer be modified before running the tests.

Results :

Tests run: 40, Failures: 0, Errors: 0, Skipped: 0"
MRM-1164,wsmoak,Wendy Smoak,2009-05-20T13:30:09.266Z,2009-05-20T13:30:09.266Z,"Applied patch #4 in r776772.  I still get failures locally:

Failed tests: 
  displayLandingPage(org.apache.archiva.web.test.ArchivaAdminTest)
  testWithBadUsername(org.apache.archiva.web.test.LoginTest)
  testWithBadPassword(org.apache.archiva.web.test.LoginTest)
  testWithEmptyUsername(org.apache.archiva.web.test.LoginTest)
  testWithEmptyPassword(org.apache.archiva.web.test.LoginTest)
  testWithCorrectUsernamePassword(org.apache.archiva.web.test.LoginTest)

Tests run: 40, Failures: 6, Errors: 0, Skipped: 34

Check here for CI results:  http://vmbuild.apache.org/continuum/buildResults.action?projectId=2464"
MRM-1164,wsmoak,Wendy Smoak,2009-05-20T18:56:09.115Z,2009-05-20T18:56:09.115Z,"The Selenium tests are now running on vmbuild, however there's a failure:

{noformat}
java.lang.AssertionError: 'Current User' isn't present. expected:<true> but was:<false>
	at org.testng.Assert.fail(Assert.java:84)
	at org.testng.Assert.failNotEquals(Assert.java:438)
	at org.testng.Assert.assertTrue(Assert.java:32)
	at org.apache.archiva.web.test.parent.AbstractSeleniumTest.assertTextPresent(AbstractSeleniumTest.java:117)
	at org.apache.archiva.web.test.parent.AbstractArchivaTest.assertAuthenticatedPage(AbstractArchivaTest.java:147)
	at org.apache.archiva.web.test.ArchivaAdminTest.initializeContinuum(ArchivaAdminTest.java:73)
{noformat}

That method should probably be initializeArchiva(...) .

I also noticed that AbstractSeleniumTestCase has a line
{noformat}
   if ( getTitle().endsWith( ""Continuum - Configuration"" ) )
{noformat}
which isn't applicable to Archiva."
MRM-1164,wsmoak,Wendy Smoak,2009-05-20T21:50:02.661Z,2009-05-20T21:50:02.661Z,"I don't know what changed, but all 40 of the tests have *passed* on vmbuild!
http://vmbuild.apache.org/continuum/buildResult.action?buildId=192487&projectId=2464"
MRM-1164,oching,Maria Odea Ching,2009-05-21T05:29:06.438Z,2009-05-21T05:29:06.438Z,Yay! Thanks for the patches Cora and thanks for taking care of these Wendy :)
MRM-1164,mbaclay,mbaclay,2009-06-12T08:33:44.433Z,2009-06-12T08:33:44.433Z,"attached MRM-1164-TestNG-5.patch

patch includes the following:
- initial tests for virtual repositories
- modification on AbstractSeleniumTest class (adding method that would capture screenshots on failed tests. screenshots for failed tests could be found in /target/screenshots directory with the class name as the image name where failure occured.)"
MRM-1164,wsmoak,Wendy Smoak,2009-06-17T23:07:35.433Z,2009-06-17T23:07:35.433Z,"Applied patch #5 on trunk in r785892.  Thanks, Cora!

I still get failured/skipped tests locally, and I did make sure to use JDK 1.5 which made a difference for the Continuum tests."
MRM-1164,mbaclay,mbaclay,2009-07-02T20:44:49.108Z,2009-07-02T20:44:49.108Z,"attached MRM-1164-TestNG-6.patch with tests for Repositories and Network Proxy.

Results :

Tests run: 65, Failures: 0, Errors: 0, Skipped: 0"
MRM-1164,mbaclay,mbaclay,2009-07-28T23:41:03.526Z,2009-07-28T23:41:03.526Z,"MRM-1164-TestNG-6.patch applied in r798777.

Will close the issue and will open a new one with the specific tests to be added soon. Thanks!"
MRM-1153,brettporter,Brett Porter,2010-02-23T04:00:40.825Z,2010-02-23T04:00:40.825Z,"would be fixed by updated Maven (already filed), but is only a symptom of something else going wrong.

See here: http://www.mail-archive.com/dev@archiva.apache.org/msg00853.html"
MRM-1143,oching,Maria Odea Ching,2009-04-07T05:28:42.156Z,2009-04-07T05:28:42.156Z,More info in http://www.mail-archive.com/users@archiva.apache.org/msg00902.html
MRM-1143,brettporter,Brett Porter,2009-05-05T06:49:41.099Z,2009-05-05T06:49:41.099Z,I believe this is because of an error initialising the indexer and it returns null.
MRM-1143,ak888,Alex Koon,2009-05-15T05:35:22.918Z,2009-05-15T05:35:22.918Z,"Looking at the source for NexusIndexerConsumer at line 182 (at http://archiva.apache.org/ref/1.2/xref/org/apache/archiva/consumers/lucene/NexusIndexerConsumer.html)

180                 
181                 // already indexed so update!
182                 if ( uinfos.contains( uinfo ) )
183                 {


It looks like uinfos is null and hence causing the NPE.

uinfos is a private field defined as null and is only initialised in the public method beginScan.

I am not sure if this instance of the NexusIndexerConsumer should have had the beginScan called else where prior to this or if line 182 should check for null first.
"
MRM-1143,brettporter,Brett Porter,2009-05-15T06:58:19.073Z,2009-05-15T06:58:19.073Z,"per my previous comment, I believe beginScan is called, but an error occurs and that leaves the class improperly initialised.

Do you see another exception at the very beginning of the scan?"
MRM-1143,ak888,Alex Koon,2009-05-15T11:23:57.826Z,2009-05-15T11:23:57.826Z,I don't have a log file handy as this became a show stopper for us and I had to downgrade back. I can't upgrade as it brings down Tomcat and it is a site which is constantly used.
MRM-1143,brettporter,Brett Porter,2009-05-15T20:27:54.348Z,2009-05-15T20:27:54.348Z,"no problem, it is easy enough for us to reproduce. We'll get it sorted out shortly."
MRM-1143,oching,Maria Odea Ching,2009-05-23T02:31:11.282Z,2009-05-23T02:31:11.282Z,Fixed in trunk -r777816.
MRM-1163,oching,Maria Odea Ching,2009-07-27T02:06:42.284Z,2009-07-27T02:06:42.284Z,"Add logging for the following in webdav:
- proxying artifacts 
- deploying artifacts
- browsing resources in repository/repository group
"
MRM-1163,jzurbano,jzurbano,2009-07-28T23:46:09.716Z,2009-07-28T23:46:09.716Z,"Attached patch (MRM-1163.patch).

Included the filename, directory, repository, and/or current user in logs.

"
MRM-1163,oching,Maria Odea Ching,2009-07-29T04:55:57.839Z,2009-07-29T04:55:57.839Z,"Patch applied to trunk -r798827. I modified the default log level to info instead of debug to avoid too much noise on regular run.
Thanks Jev! :)"
MRM-1182,oching,Maria Odea Ching,2009-07-28T05:37:57.601Z,2009-07-28T05:37:57.601Z,Fixed in trunk -r798480.
MRM-1188,oching,Maria Odea Ching,2009-05-24T01:12:17.604Z,2009-05-24T01:12:17.604Z,Fixed in trunk -r778093.
MRM-1104,oching,Maria Odea Ching,2009-03-03T03:10:55.987Z,2009-03-03T03:10:55.987Z,"Hi Marc, I recently applied a patch for MRM-913 to be included in 1.2-M2. It still hasn't been released yet but it can be built from trunk if you'd like to try it out :) "
MRM-1104,oching,Maria Odea Ching,2009-03-03T03:14:33.921Z,2009-03-03T03:14:33.921Z,"I forgot to add, the implementation for MRM-913 is the same as you've proposed with the delete action not executing a whole repo and db scan.."
MRM-1104,axismundi,Marc Lustig,2009-03-03T03:47:30.18Z,2009-03-03T03:47:30.18Z,"Ok, thanks, Maria, for fast reaction. Sorry for not checking for existing issue ... I guess we can close this this.
I will try it out soon."
MRM-1104,oching,Maria Odea Ching,2009-03-03T04:10:18.753Z,2009-03-03T04:10:18.753Z,No problem Marc! :) Please don't hesitate to give your feedback regarding MRM-913 after you've tried it. Thanks..
MRM-1106,henryju,Julien HENRY,2009-03-05T10:57:30.591Z,2009-03-05T10:57:30.591Z,"After a while, there are 2 new tables created: ARCHIVA_ARTIFACT and SEQUENCE_TABLE

But I still have the previous exception in my web browser."
MRM-1106,evenisse,Emmanuel Venisse,2009-03-05T11:07:50.65Z,2009-03-05T11:07:50.65Z,"Is it with the guest user?

Do you have a 'redback.default.guest' entry in your security.properties? I'm not sure Archiva was modified to support a virtual guest user."
MRM-1106,henryju,Julien HENRY,2009-03-06T09:12:32.904Z,2009-03-06T09:12:32.904Z,"That's it. The guest user in security.properties was not existing in the LDAP.

With an existing user it works fine.

Thanks."
MRM-1106,brettporter,Brett Porter,2009-03-06T10:08:48.578Z,2009-03-06T10:08:48.578Z,"the redback upgrade has helped in indicating the problem, and I've added some guards against the NPEs"
MRM-1106,evenisse,Emmanuel Venisse,2009-03-06T11:41:39.218Z,2009-03-06T11:41:39.218Z,"Julien, I'm not sure it is necessary now to define a guest user in security.properties"
MRM-1106,brettporter,Brett Porter,2009-03-06T17:02:54.093Z,2009-03-06T17:02:54.093Z,I found that it was still looking up the guest that I defined
MRM-1106,henryju,Julien HENRY,2009-03-07T12:48:33.219Z,2009-03-07T12:48:33.219Z,I will test without a guest user defined in security.properties as soon as I install a new version of archiva (I'm still with 1.2-M1) and keep you up2date.
MRM-1103,peter_lawrey,Peter Lawrey,2009-03-09T05:49:29.802Z,2009-03-09T05:49:29.802Z,"I tried disabling the native library by chmod -x lib/*.so 
Archiva still runs without loading these libraries, but fails when all file descriptors are exhausted all the same.

A few minutes after the build has failed, 694 out of 1017 are sockets. netstat -a indicates no connection to the server are open.

The fix in MRM-1097 indicates the problem may have been in the native library ""at the OS level"" so this may be an unrelated problem.
"
MRM-1103,peter_lawrey,Peter Lawrey,2009-03-09T05:52:07.579Z,2009-03-09T05:52:07.579Z,"Testing indicates this is not a related problem, though the error is the same."
MRM-1103,brettporter,Brett Porter,2009-03-09T05:59:43.462Z,2009-03-09T05:59:43.462Z,Thanks for the extra info Peter
MRM-1103,peter_lawrey,Peter Lawrey,2009-03-09T08:19:05.278Z,2009-03-09T08:19:05.278Z,"Installed Archiva 1.1.2 with the same conf and data directories and this does run the build.

The number of sockets open peaks at about 700. About half of these are to the proxy server. The lowest number of connections after the build starts is about 100 socket connections.

The number of connections to proxy server stays high for about 2 minutes after the build has finished. (Between 44 - 405 sockets)"
MRM-1103,brettporter,Brett Porter,2009-03-20T08:53:56.698Z,2009-03-20T08:53:56.698Z,would you be able to test this with 1.2-M2 when it is released and see if it is still reproducible?
MRM-1103,oching,Maria Odea Ching,2010-12-29T01:30:32.703Z,2010-12-29T01:30:32.703Z,Closing as fixed in 1.3.3. See related issue MRM-1097
MRM-1133,brettporter,Brett Porter,2009-03-14T05:24:50.218Z,2009-03-14T05:24:50.218Z,"we should check all roles in redback.xml (this may need to be fixed in redback). We already have some sync for the missing resource combinations in security sync that may need to be updated too.

"
MRM-1197,vanvlack,Chris Van Vlack,2009-06-03T10:54:33.653Z,2009-06-03T10:54:33.653Z,"Found that this error can be thrown on line 310:

http://svn.apache.org/viewvc/archiva/trunk/archiva-modules/archiva-web/archiva-webdav/src/main/java/org/apache/maven/archiva/webdav/ArchivaDavResource.java?view=annotate"
MRM-1197,vanvlack,Chris Van Vlack,2009-06-03T11:02:29.451Z,2009-06-03T11:02:29.451Z,pcap of an error and success packet from maven to archiva
MRM-1197,mitchaoc,Andrew Mitchell,2009-06-16T22:48:47.897Z,2009-06-16T22:48:47.897Z,"I'm also getting random 400 errors using Archiva 1.2.1 and Maven 2.0.8 & 2.0.9.  Both the http and dav connectors to my snapshot repository occasionally fail when deploying snapshots.

Interestingly most failures (possibly all) occur when the snapshot repository was being scanned by Archiva.  Reduced the scanning frequency using the archiva web ui appears to help."
MRM-1197,andreasch,Andreas Christoforides,2009-07-20T18:10:50.433Z,2009-07-20T18:10:50.433Z,"We are noticing the same issue quite often when we uploaded artifacts, 

* It is not on the same artifact everytime. 
* I checked and all of our repository scanning including the database scanning is performed once a day and not during the times that the error has occurred"
MRM-1197,oching,Maria Odea Ching,2009-07-20T21:41:24.538Z,2009-07-20T21:41:24.538Z,The current workaround for this is to disable both the metadata-updater and create-missing-checksums consumers.
MRM-1197,andreasch,Andreas Christoforides,2009-07-22T09:27:32.925Z,2009-07-22T09:27:32.925Z,I disabled both the metadata-updater and the create-missing-checksums even though no repository scanning was scheduled to run when this issue occurs. Disabling them did  not seem to help. 50% of the upload attempts fail! What is the underlying cause for this issue?
MRM-1197,oching,Maria Odea Ching,2009-07-28T00:10:49.064Z,2009-07-28T00:10:49.064Z,This is fixed by the changes made in MRM-1212.
MRM-1197,oching,Maria Odea Ching,2009-07-28T00:15:00.353Z,2009-07-28T00:15:00.353Z,"Hi Andreas, the main cause of this was that the checksums were being created and the metadata updated after each artifact deployment as the consumers were executed. So when the actual checksums and metadata is deployed by Maven to the repository, it might be that the consumers were still executing thereby causing the intermittent error 400. 

As for disabling the consumers, you might need to restart Archiva after disabling them from the webapp. This is a known bug in Archiva which still needs to be fixed as well. "
MRM-1176,brettporter,Brett Porter,2009-05-05T07:08:48.771Z,2009-05-05T07:08:48.771Z,"this sounds like your database was corrupted. Note also that Archiva still ships with Derby 10.1.

If it is problematic, you can delete the Archiva database - your repositories will be rescanned on startup."
MRM-1176,hohonuuli,Brian Schlining,2009-05-05T10:21:41.587Z,2009-05-05T10:21:41.587Z,"Could've been some corruption. Also, older versions of Derby might be using a non-standard ALTER syntax. I recall seeing a comment in the release notes in Derby 10.5.1.1 (the latest release) that stated that the ALTER TABLE syntax was brought in-line with SQL standards (Can't recall if it was SQL-99 or SQL-2003). So older version of Derby might be choking when the Archiva upgrade tries to update the database tables.

In any case, I had dropped the Archiva database and everything started up again with no issues. Thanks for the tip."
MRM-1176,brettporter,Brett Porter,2009-05-14T14:01:08.461Z,2009-05-14T14:01:08.461Z,will double check upgrade to see if we can reproduce
MRM-1176,oching,Maria Odea Ching,2009-05-21T01:50:43.455Z,2009-05-21T01:50:43.455Z,See comments in MRM-1157
MRM-1176,oching,Maria Odea Ching,2009-05-24T06:01:38.99Z,2009-05-24T06:01:38.99Z,Fixed in trunk -r778118. See MRM-1157 for details on the fix..
MRM-1167,oching,Maria Odea Ching,2009-05-24T02:21:08.988Z,2009-05-24T02:21:08.988Z,Fixed in trunk -r778106.
MRM-1167,amuino,Abel Muio,2009-05-25T10:28:11.167Z,2009-05-25T10:28:11.167Z,Verified fix on Apache Archiva 1.2.1 RC
MRM-1167,oching,Maria Odea Ching,2009-05-25T21:16:07.29Z,2009-05-25T21:16:07.29Z,Thanks for verifying this Abel :)
MRM-1198,axismundi,Marc Lustig,2009-06-26T04:08:54.217Z,2009-06-26T04:08:54.217Z,"We tried fxing this by changing the JDO-schema for Oracle:

For all fields ""url"" as well as ""issueManagementUrl"" and ""connection"" we changed as follows
      <field name=""url"">
        <column length=""2500""  jdbc-type=""VARCHAR2""/>
      </field>

As a result we got the following error on startup:
 [ContainerBackgroundProcessor[StandardEngine[Catalina]]] ERROR JPOX.MetaData
 - The following error occurred while parsing <column> nested within
 <field name=""url""
        null-value=""none"">
 </field>

Reverting the fields which are primary keys back to the original configuration did not help. Same error.
Only reverting ALL fields back to the original state caused the webapp to startup again.

IMO, it should be possible to change the jdbc-type to any db-specific character-field without compaints from the JDO-impl.

Furthermore, for certain fields, this is not only of ""cosmetic"" value, it is a functional necessity, as the URL's often surpass 250 chars."
MRM-1198,oching,Maria Odea Ching,2009-07-28T00:41:44.307Z,2009-07-28T00:41:44.307Z,"Related discussion from the dev list:

http://www.nabble.com/JDO-error-on-startup-td24142815.html

Changing the jdbc-type from VARCHAR2 to VARCHAR fixes the startup error posted above."
MRM-1198,oching,Maria Odea Ching,2009-07-28T02:18:13.021Z,2009-07-28T02:18:13.021Z,Field lengths of url fields are adjusted to 1020 in trunk -r798424.
MRM-1152,oching,Maria Odea Ching,2009-03-21T22:11:57.756Z,2009-03-21T22:11:57.756Z,See MRM-1136 for issue details and the fix for it.
MRM-1152,oching,Maria Odea Ching,2009-04-01T06:01:06.021Z,2009-04-01T06:01:06.021Z,Fixed in trunk -r760853.
MRM-1137,brettporter,Brett Porter,2009-03-11T19:28:19.065Z,2009-03-11T19:28:19.065Z,"this is because the version is coming in as null - maybe related to the struts upgrade. However, I'm not able to reproduce it.

are you able to help us narrow this down, perhaps using trunk?"
MRM-1137,brettporter,Brett Porter,2009-03-11T19:49:22.37Z,2009-03-11T19:49:22.37Z,"also, is there anything in the archiva.log / stdouterr.log?

something like:
{code}
SEVERE: ParametersInterceptor - [setParameters]: Unexpected Exception caught setting
{code}"
MRM-1137,dantran,Dan Tran,2009-03-11T20:06:00.337Z,2009-03-11T20:06:00.337Z,"my apology for not digging a little deeper

the stderr log clearly complains about my big upload file size.  how do I go about fix that?

18439124 [btpool0-11] INFO org.apache.struts2.dispatcher.Dispatcher - Unable to find 'struts.multipart.saveDir' property setting. Defaulting to javax.servlet.context.tempdir
18439124 [btpool0-11] ERROR org.apache.struts2.dispatcher.multipart.MultiPartRequest - org.apache.commons.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (2922259) exceeds the configured maximum (2097152)
18439129 [btpool0-11] ERROR org.apache.struts2.interceptor.FileUploadInterceptor - the request was rejected because its size (2922259) exceeds the configured maximum (2097152)
18439198 [btpool0-11] ERROR org.mortbay.log - Nested in javax.servlet.ServletException: java.lang.NullPointerException:
java.lang.NullPointerException
        at org.apache.maven.archiva.common.utils.VersionUtil.isVersion(VersionUtil.java:92)
        at org.apache.maven.archiva.web.action.UploadAction.validate(UploadAction.java:597)
        at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:200)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
        at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
"
MRM-1137,brettporter,Brett Porter,2009-03-11T20:15:07.071Z,2009-03-11T20:15:07.071Z,"thanks, should be able to reproduce this now.

I believe you can adjust the max size by editing WEB-INF/classes/struts.properties"
MRM-1137,dantran,Dan Tran,2009-03-11T20:22:01.733Z,2009-03-11T20:22:01.733Z,"what is the property name and value format  to configure upload file size in struts.properties?

The current struts.properties contains this


# define our own action mapper here
struts.mapper.class = org.apache.maven.archiva.web.mapper.RepositoryActionMapper
struts.objectFactory =  org.codehaus.plexus.spring.Struts2PlexusInSpringObjectFactory
struts.url.includeParams = none

struts.devMode = true
struts.configuration.xml.reload=true
struts.multipart.parser=jakarta

# TODO: package up a theme and share with Continuum. Should contain everything from xhtml, and set templateDir to WEB-INF/themes

# Localization
struts.custom.i18n.resources=org.codehaus.plexus.redback.struts2.default,org.apache.maven.archiva.redback.custom
~
~
"
MRM-1137,brettporter,Brett Porter,2009-03-11T20:26:13.726Z,2009-03-11T20:26:13.726Z,"http://struts.apache.org/2.0.6/docs/handling-file-uploads.html

struts.multipart.maxSize

(want to contribute a wiki entry/doc patch for this?)"
MRM-1137,dantran,Dan Tran,2009-03-11T22:24:01.296Z,2009-03-11T22:24:01.296Z,"it works. I think it is better to allow upload size configurable thru archive web ui

Thanks"
MRM-1137,brettporter,Brett Porter,2009-03-21T02:47:14.534Z,2009-03-21T02:47:14.534Z,"changed the default to 10M and fixed the error, updated the documentation. Creating a new issue for making it configurable"
MRM-1117,oching,Maria Odea Ching,2009-03-13T23:17:06.315Z,2009-03-13T23:17:06.315Z,Fixed in trunk -r753598.
MRM-1183,bomber,Sang-Jea Shin,2009-05-14T11:12:10.83Z,2009-05-14T11:12:10.83Z,"Sorry, It's my falt.
Just computer environment problem."
MRM-1139,jameswdumay,James William Dumay,2009-03-13T00:10:08.564Z,2009-03-13T00:10:08.564Z,"committed r753117.

 When building the inline war, we need to exclude WEB-INF/lib/** from the redback war."
MRM-1125,jzurbano,jzurbano,2010-04-27T07:08:50.914Z,2010-04-27T07:08:50.914Z,"This seems to be fixed using r938413.

Advanced search of an artifact with a non-existing artifact version in the repository does not return any result.
Search criteria used:
  ArtifactId: junit
  Version: 1.5

wherein only junit 3.7 is in the repository."
MRM-1125,gautencio,Gwen Harold Autencio,2010-04-27T07:43:08.308Z,2010-04-27T07:43:08.308Z,"Tested trunk :
Search for a non existing artifact and returned 0 results. Also search for specific artifacts with groupid , artifact and version and archiva already returns expected artifact."
MRM-1125,oching,Maria Odea Ching,2010-04-27T16:17:29.014Z,2010-04-27T16:17:29.014Z,Can we add a test for this so we can catch regressions in future? Thanks!
MRM-1125,gautencio,Gwen Harold Autencio,2010-04-27T21:46:46.318Z,2010-04-27T21:46:46.318Z,I'll submit some added tests. Thanks.
MRM-1125,brettporter,Brett Porter,2010-04-27T22:34:00.635Z,2010-04-27T22:34:00.635Z,"This was for quick search, not advanced search.

I can't get a search with two terms to return anything any more.

Can we document exactly what the behaviour of quick search is?"
MRM-1125,gautencio,Gwen Harold Autencio,2010-04-29T05:19:42.999Z,2010-04-29T05:19:42.999Z,Archiva can't seem to search two terms since archiva-1.2.1 the use of nexus-indexer 2.0.0. 
MRM-1125,jzurbano,jzurbano,2010-04-30T04:05:42.217Z,2010-04-30T04:05:42.217Z,"Thanks much Gwen! :)

BTW, I have documented the Quick Search behavior in r939591 of trunk.

"
MRM-1125,jzurbano,jzurbano,2010-05-12T05:10:07.088Z,2010-05-12T05:10:07.088Z,"Gwen, are you still working on submitting additional tests?"
MRM-1125,gautencio,Gwen Harold Autencio,2010-05-14T01:31:26.215Z,2010-05-14T01:31:26.215Z,"Hi Jevica,

Sorry for the late reply. Attaching patch with unit test and selenium webapp test. Thanks!"
MRM-1125,jzurbano,jzurbano,2010-05-15T08:20:00.163Z,2010-05-15T08:20:00.163Z,"Thanks Gwen! :)

Patch applied in r944632. And, additional tests for Quick Search were added too.
"
MRM-1177,brettporter,Brett Porter,2009-05-04T00:47:34.725Z,2009-05-04T00:47:34.725Z,please test jetty:run afterwards - last I checked updating to a more recent version broke it even when it was working under the current version.
MRM-1177,oching,Maria Odea Ching,2009-07-19T21:52:44.353Z,2009-07-19T21:52:44.353Z,Closing this since we already upgraded to 6.1.19. See MRM-1217.
MRM-1181,brettporter,Brett Porter,2009-05-14T14:07:29.895Z,2009-05-14T14:07:29.895Z,"I agree, 404 should be the correct behaviour"
MRM-1181,sseifert@pro-vision.de,Stefan Seifert,2010-01-25T17:51:52.794Z,2010-01-25T17:51:52.794Z,"we need a fix for this issue - too.

it prevents download source attachments for our projects and results in blacklisting the archiva repository in the maven client - e.g.:
{noformat}
[INFO] Scanning for projects...
[INFO] snapshot de.xxx.dfra:de.xxx.dfra.parent_toplevel:0.5.0-SNAPSHOT: checking for updates from pvtool.repository
[WARNING] repository metadata for: 'snapshot de.xxx.dfra:de.xxx.dfra.parent_toplevel:0.5.0-SNAPSHOT'
could not be retrieved from repository: pvtool.repository due to an error:
Authorization failed: Access denied to: https://xxx/archiva/repository/default/de/xxx
/dfra/de.xxx.dfra.parent_toplevel/0.5.0-SNAPSHOT/maven-metadata.xml
[INFO] Repository 'pvtool.repository' will be blacklisted
{noformat}"
MRM-1181,sseifert@pro-vision.de,Stefan Seifert,2010-01-25T17:55:47.553Z,2010-01-25T17:55:47.553Z,"btw. this problem did not exist in apache archiva 1.1.x.
it exists in archiva 1.2 and 1.3 as well."
MRM-1181,wsmoak,Wendy Smoak,2010-12-23T12:17:16.656Z,2010-12-23T12:17:16.656Z,"I can reproduce this in 1.3.  For me it happens when a repository the user does _not_ have access to contains the full or partial groupId path.

For example:

imbrium:Downloads wsmoak$ wget --user=build --password=bu1Ld http://localhost:8765/archiva/repository/all/com/example/doesnotexist/1.0-SNAPSHOT/maven-metadata.xml
--2010-12-23 13:05:57--  http://localhost:8765/archiva/repository/all/com/example/doesnotexist/1.0-SNAPSHOT/maven-metadata.xml
Resolving localhost... 127.0.0.1, ::1
Connecting to localhost|127.0.0.1|:8765... connected.
HTTP request sent, awaiting response... 401 Unauthorized
Reusing existing connection to localhost:8765.
HTTP request sent, awaiting response... 401 Unauthorized
Authorization failed.

will happen if 
 - the 'all' repo group contains internal, snapshots, and another 
 - the 'build' user does not have access to the 'another' repository
 - the 'another' repository has, at minimum, a 'com' subdirectory.  It could have com/example or even contain other artifacts in the com.example group or below.

The fact that Archiva says 401 when the artifact is nowhere in any of its repositories causes confusing results as Maven blacklists the repo and reports a bunch of *other* artifacts missing (that really are present.)

The only time I would think the 401 is appropriate is if the 'another' repository actually contained the artifact being requested.  And even then I'm not sure it's worth being technically correct when it's going to cause Maven to blacklist the repo and not be able to retrieve other things that the user may be authorized to see."
MRM-1181,olamy,Olivier Lamy (*$^%`),2014-03-02T16:55:50.61Z,2014-03-02T16:55:50.61Z,to check but should be fixed.
MRM-1181,olamy,Olivier Lamy (*$^%`),2014-03-05T22:50:20.975Z,2014-03-05T22:50:20.975Z,fixed
MRM-1136,aheritier,Arnaud HERITIER,2009-03-12T07:08:26.509Z,2009-03-12T07:08:26.509Z,"This morning I noticed that archiva has a maven-metadata.xml which is my yesterday's maven-metadata-codehaus-snapshots.xml
And my maven-metadata-codehaus-snapshots.xml is updated from the one in codehaus repo.
There's a problem of sync between the main maven-metadata.xml and the remote one (maven-metadata-codehaus-snapshots.xml)
I didn't have a look at the code but I think that the merge process isn't call after having update a remote copy..."
MRM-1136,oching,Maria Odea Ching,2009-03-19T04:16:03.616Z,2009-03-19T04:16:03.616Z,This also happens even without a repository group configured.
MRM-1136,oching,Maria Odea Ching,2009-03-19T22:19:41.705Z,2009-03-19T22:19:41.705Z,I've traced the problem to be at the XMLReader when the contents of the proxied metadata (maven-metadata-codehaus-snapshots.xml) is retrieved. The nodes are returning 'null' even if the xpath expression seems correct.
MRM-1136,oching,Maria Odea Ching,2009-03-20T09:54:35.683Z,2009-03-20T09:54:35.683Z,"It seems that the following attributes of the <metadata> tag is what's causing the nodes not to be retrieved. When I removed them from the sample metadata file I was using in the test case, I was able to retrieve the child nodes with the correct values.

xsi:schemaLocation=""http://maven.apache.org/METADATA/1.0.0 http://maven.apache.org/xsd/metadata-1.0.0.xsd"" xmlns=""http://maven.apache.org/METADATA/1.0.0""
    xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"""
MRM-1136,oching,Maria Odea Ching,2009-03-20T11:06:16.95Z,2009-03-20T11:06:16.95Z,Fixed in trunk -r756559.
MRM-1136,aheritier,Arnaud HERITIER,2009-03-20T12:14:07.172Z,2009-03-20T12:14:07.172Z,"I probably deployed this snapshot with maven 2.1.0. Brett is investigating why metadata have this schema now.
This could explains why it occurs with many archiva versions but that we didn't see this error before."
MRM-1136,oching,Maria Odea Ching,2009-03-20T20:36:30.16Z,2009-03-20T20:36:30.16Z,"Ok, thanks for all the input Arnaud :) 
As for the fix in -r756559, I first cleared out the namespaces in the document object before retrieving the child nodes of the metadata element."
MRM-1136,aheritier,Arnaud HERITIER,2009-03-21T08:35:34.153Z,2009-03-21T08:35:34.153Z,Do you think we could backport this change in 1.1.X ? All our 1.1.x will have this issue each time someone will deploy an artifact with maven 2.1 :-(
MRM-1136,oching,Maria Odea Ching,2009-03-21T22:11:16.865Z,2009-03-21T22:11:16.865Z,"Yeah, I think we should. I've opened MRM-1152 to track it for 1.1.x"
MRM-1173,brettporter,Brett Porter,2011-09-12T09:30:15.839Z,2011-09-12T09:30:15.839Z,"This is a (very obscure) way to inject some code, for example: {{1', ''); alert('XSS'); setAndSubmit('pattern', '1}}

"
MRM-1173,olamy,Olivier Lamy (*$^%`),2011-10-04T08:12:08.343Z,2011-10-04T08:12:08.343Z,more an escape javascript issue
MRM-1173,olamy,Olivier Lamy (*$^%`),2011-10-04T09:00:24.516Z,2011-10-04T09:00:24.516Z,fixed r1178794 and r1178795
MRM-1168,oching,Maria Odea Ching,2009-06-03T06:16:05.176Z,2009-06-03T06:16:05.176Z,"Patch applied to trunk -r781339. 
Thanks Jevica!"
MRM-1156,brettporter,Brett Porter,2009-03-27T06:13:37.617Z,2009-03-27T06:13:37.617Z,"IE6? :)

Have you tried this with an earlier Archiva? I believe it has worked in the past and am wondering if this is a regression or a missed case."
MRM-1156,oching,Maria Odea Ching,2009-03-31T04:54:27.382Z,2009-03-31T04:54:27.382Z,"Tried dav browse in Nautilus (Ubuntu Linux) and I was able to browse the contents the repository. 
I got the same behavior as described as described by Wendy when I tried it in IE6."
MRM-1156,oching,Maria Odea Ching,2009-03-31T04:59:46.282Z,2009-03-31T04:59:46.282Z,This issue also affects 1.1.3 (and probably prior versions).
MRM-1156,oching,Maria Odea Ching,2009-04-01T05:40:01.926Z,2009-04-01T05:40:01.926Z,I'm not entirely sure if this is a webdav problem at all. I tried debugging RepositoryServlet but it seems like the request doesn't even reach the servlet itself.
MRM-1156,oching,Maria Odea Ching,2009-04-02T02:21:19.423Z,2009-04-02T02:21:19.423Z,"I tried opening a different web dav directory (not in Archiva) in IE6 and got the same dialog box ""Internet Explorer could not open http://XXX.XXX.com as a Web Folder. Would you like to see its default view instead?"". Could the problem be in IE6? :D"
MRM-1156,oching,Maria Odea Ching,2009-04-02T05:38:34.67Z,2009-04-02T05:38:34.67Z,"I tried using the Network Places instead of IE6 and I was able to get through the other non-Archiva dav repository while I got ""The folder you enter does not appear to be valid. Please choose another"" when I tried accessing an Archiva dav repo. And finally, my debug logs are showing something! I still have to look deeper into what's causing this problem in Archiva.

BTW, after all the googling that I did.. it turns out that web folders are not installed for IE6 :) That's why the request wasn't reaching Archiva and I couldn't access the non-Archiva dav repo as well."
MRM-1156,brettporter,Brett Porter,2009-04-05T17:24:18.408Z,2009-04-05T17:24:18.408Z,so is this an Archiva problem or not?
MRM-1156,oching,Maria Odea Ching,2009-04-05T22:30:57.717Z,2009-04-05T22:30:57.717Z,"Yep, I think there is still a problem with the Archiva dav as I couldn't open it via the Network Places whereas I was able to open a non-Archiva dav repository via Network Places. The summary should be changed though since you can't really open any dav directory in IE6, whether an Archiva repository or not."
MRM-1156,oching,Maria Odea Ching,2009-04-05T22:34:01.118Z,2009-04-05T22:34:01.118Z,Changing summary from 'Unable to Open as Web Folder in IE6' to Unable to open an Archiva repository as web folder (via Network Places) in Windows.
MRM-1156,oching,Maria Odea Ching,2009-04-14T05:57:53.061Z,2009-04-14T05:57:53.061Z,"Found this while I was digging around:

http://issues.liferay.com/browse/LEP-4920

It looks similar to our problem in Archiva. I tried the same solution of setting the additional properties in the request but it didn't work. 
I'm also to open and browse the Archiva dav repository using a different Windows webdav client (BitKinex)."
MRM-1193,brettporter,Brett Porter,2009-07-02T02:08:04.384Z,2009-07-02T02:08:04.384Z,"what platform is this on? it looks like the right address, but is using IPv6."
MRM-1193,mbaclay,mbaclay,2009-07-02T22:10:17.446Z,2009-07-02T22:10:17.446Z,"environment details:

Maven version: 2.0.9
Java version: 1.5.0_16
OS name: ""linux"" version: ""2.6.27-14-generic"" arch: ""i386"" Family: ""unix"""
MRM-1193,brettporter,Brett Porter,2009-07-25T00:10:25.405Z,2009-07-25T00:10:25.405Z,The server is running on localhost? Does it work correctly if you connect form a different machine?
MRM-1193,brettporter,Brett Porter,2009-07-25T00:19:47.038Z,2009-07-25T00:19:47.038Z,"going to close based on it being correct for IPv6. If you find it is still not doing what you expect, please reopen :)"
MRM-1174,brettporter,Brett Porter,2009-05-05T07:05:38.154Z,2009-05-05T07:05:38.154Z,is this issue necessarily different from MRM-1164? I'm not sure what this is requesting.
MRM-1174,brettporter,Brett Porter,2009-05-14T13:59:13.79Z,2009-05-14T13:59:13.79Z,closing as incomplete request
MRM-1123,brettporter,Brett Porter,2009-03-24T05:55:58.098Z,2009-03-24T05:55:58.098Z,"it also drags in a number of dependencies that are unnecessary that should be reviewed, eg:
- commons-cli, plexus-cli
- wagon-ssh via maven-core (via archetype - examine how much of this tree is needed)"
MRM-1123,brettporter,Brett Porter,2009-11-27T15:06:54.103Z,2009-11-27T15:06:54.103Z,"removed the repository as this is now fixed. Moved the comment about weeding out unnecessary dependencies to a new issue, MRM-1287"
MRM-1105,kannan_srgm,Kannan Kesavan,2009-03-05T06:01:47.557Z,2009-03-05T06:01:47.557Z,Currently we are using Archiva-1.1.3 version
MRM-1105,oching,Maria Odea Ching,2009-03-18T08:43:46.808Z,2009-03-18T08:43:46.808Z,Fixed in trunk -r755544.
MRM-1146,gautencio,Gwen Harold Autencio,2009-09-17T10:30:17.912Z,2009-09-17T10:30:17.912Z,"Hi attaching patch for the issue.
Rearranges the repositories before being proccesed. 
Arrangement is repositories that are not proxied then the proxied repositories. "
MRM-1146,brettporter,Brett Porter,2010-03-01T00:17:06.296Z,2010-03-01T00:17:06.296Z,"related issue. the patch may also be good, but without a test it is hard to tell. Suggest creating a test to check against whatever fix is made."
MRM-1169,brettporter,Brett Porter,2011-09-12T11:28:54.801Z,2011-09-12T11:28:54.801Z,was able to download a 3.3G artifact on trunk
MRM-1169,brettporter,Brett Porter,2011-09-12T11:34:19.147Z,2011-09-12T11:34:19.147Z,"actually, could reproduce in 1.3.5 - so I think this is fixed by upgrading Jackrabbit"
MRM-661,brettporter,Brett Porter,2008-02-25T07:53:37.299Z,2008-02-25T07:53:37.299Z,"works for some (eg, java.net), but not others (central)"
MRM-661,brettporter,Brett Porter,2008-02-25T07:57:08.688Z,2008-02-25T07:57:08.688Z,it is not being removed from the saved file in configuration.save()
MRM-661,brettporter,Brett Porter,2008-02-25T08:49:20.063Z,2008-02-25T08:49:20.063Z,the problem seems to be removing the last one
MRM-687,oliveros,Drio Oliveros,2008-02-11T07:20:11.942Z,2008-02-11T07:20:11.942Z,"I've made a change to _archiva-repository-layer_ component and this issue seems to be fixed now.
Attached it the patch file. Please let me know any comments on it.

Drio"
MRM-687,oching,Maria Odea Ching,2008-02-24T21:02:16.864Z,2008-02-24T21:02:16.864Z,"The patch works nicely.. thanks Dario! :) 
I applied it in archiva-1.0.x branch -r630722. 
"
MRM-634,brettporter,Brett Porter,2010-02-23T02:42:51.817Z,2010-02-23T02:42:51.817Z,for testing
MRM-634,brettporter,Brett Porter,2010-02-23T04:30:15.076Z,2010-02-23T04:30:15.076Z,can't reproduce this on trunk
MRM-614,oching,Maria Odea Ching,2008-04-09T01:25:21.531Z,2008-04-09T01:25:21.531Z,Verified fixed in archiva-trunk -r646173 (using redback-1.1-SNAPSHOT).
MRM-684,jameswdumay,James William Dumay,2008-02-14T21:28:49.64Z,2008-02-14T21:28:49.64Z,"Brett, could you please look at this patch and see if its going down the right track?"
MRM-684,brettporter,Brett Porter,2008-02-15T01:48:22.971Z,2008-02-15T01:48:22.971Z,"yep, looks ok - I realise there's some missing bits and I'd prefer a RuntimeException (say, UnsupportedOperationException) for the wagon's that don't support features instead of TransferFailedException, but otherwise I think it's ok."
MRM-684,jameswdumay,James William Dumay,2008-02-16T20:25:50.33Z,2008-02-16T20:25:50.33Z,I've changed this so it throws a StreamingNotSupportedException which is a little clearer.
MRM-684,jameswdumay,James William Dumay,2008-05-08T02:01:48.87Z,2008-05-08T02:01:48.87Z,Move to 1.1.x
MRM-684,olamy,Olivier Lamy (*$^%`),2011-10-27T17:05:54.58Z,2011-10-27T17:05:54.58Z,fixed with wagon 2.0 integrated
MRM-684,brettporter,Brett Porter,2012-01-05T05:13:59.517Z,2012-01-05T05:13:59.517Z,"I think you meant something different - archiva will still block when it has to proxy a large artifact from a remote source.

It would be better to send the HEAD response, and stream some content as soon as possible. The only catch is deciding what to do with the connection if a remote checksum failure occurs after already starting to stream the content."
MRM-678,brettporter,Brett Porter,2008-01-30T19:30:06.802Z,2008-01-30T19:30:06.802Z,"didn't we go back and forward on this on the list? I thought the conclusion was to cache 404's... but if not, was there a counterpoint given as to why not?"
MRM-678,ndeloof,nicolas de loof,2008-01-31T00:24:33.975Z,2008-01-31T00:24:33.975Z,"Yes, we conclude to cache 404. But my first attempt introduced some test failure, so I reverted.

I'll work on this."
MRM-678,ndeloof,nicolas de loof,2008-01-31T05:17:33.993Z,2008-01-31T05:17:33.993Z,"testcase updated to fetch proxies 2 times.
Depending on cacheFailure enabled / disabled, the wagonMock ensure cahce has been used or not."
MRM-675,joe.heck@dig.com,Joseph Heck,2008-03-20T14:57:18.395Z,2008-03-20T14:57:18.395Z,"I've also run into this problem with Maven 2.0.8 (Win32) when requesting a locked down version of dom4j:

<dependency>
<groupId>dom4j</groupId>
<artifactId>dom4j</artifactId>
<version>[1.6.1]</version>
</dependency>

But other requests using this format appear to work properly:

    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>[3.8.1]</version>
    </dependency>
"
MRM-675,stefanhuebner,Stefan Hbner,2008-04-03T03:51:57.999Z,2008-04-03T03:51:57.999Z,"I was just about to give Archiva 1.0.1 a shot after working with a modified archiva-1.0-SNAPSHOT for two years now. We rely quite heavily on version ranges in my team. Frankly, this issue is a 'show stopper' on switching to Archiva 1.0.1."
MRM-675,jameswdumay,James William Dumay,2008-05-08T02:01:49.591Z,2008-05-08T02:01:49.591Z,Move to 1.1.x
MRM-675,oching,Maria Odea Ching,2008-07-16T21:22:04.255Z,2008-07-16T21:22:04.255Z,Could you try this in Archiva 1.1? I think this is already fixed in that version.. 
MRM-675,stefanhuebner,Stefan Hbner,2008-07-31T07:14:00.926Z,2008-07-31T07:14:00.926Z,"{quote}
Could you try this in Archiva 1.1? I think this is already fixed in that version.
{quote}
Frankly not. The addressed behaviour is still present.

What happens e.g. if you have a dependency to slf4j-api like this:

<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>[1,2)</version>
</dependency>

is, that Maven returns the following:

No versions are present in the repository for the artifact with a range [1,2)
  org.slf4j:slf4j-api:jar:null

I tried this using a fresh copy of Archiva 1.1 with a proxy connector for Central Repo set up. This proxy connector is configured as mirrorOf central in my maven settings. Now after maven has run I find the following files in archiva's repo for /org/slf4j/slf4j-api:
    * maven-metadata-central.xml
    * maven-metadata-central.xml.md5
    * maven-metadata-central.xml.sha1
    * maven-metadata.xml
    * maven-metadata.xml.md5
    * maven-metadata.xml.sha1

{{maven-metadata-central.xml}} is OK, but {{maven-metadata.xml}} isn't. It looks like this:

<metadata>
<groupId>org</groupId>
<artifactId>slf4j</artifactId>
<version>slf4j-api</version>
</metadata>

So, all versioning information is lost in this metadata-file.

Since Maven apparently fetches this file, _local repositories will be getting screwed gradually_. So this issue is a *blocker* for everybody using version ranges in its POMs."
MRM-675,kenimanev,Kaloyan Enimanev,2008-11-04T10:04:51.709Z,2008-11-04T10:04:51.709Z,"Hey guys,
  we're using Archiva 1.1.3, where the problem still persists (occurs with the very same {{slf4j-api}} depedency) and as Stefan already mentioned this is a blocker for us. Removing version ranges from our POMs  is not an option, so I was wondering:  

* How do you get round the issue ? 
* Is there a patch we could apply ?

Thank you very much in advance,
    Kaloyan

  
"
MRM-675,kenimanev,Kaloyan Enimanev,2008-11-06T10:13:55.932Z,2008-11-06T10:13:55.932Z,"I have checked out the current Archiva 1.2-SNAPSHOT (SVN Revision 711507) and compiled it ignoring several failing tests. 
The erroneous {{slf4j-api}}  metadata downloads are gone and I can compile projects that have been failing with Archiva 1.1.3.

So if this issue is blocker for you guys, I suggest to try to build and use the 1.2-SNAPSHOT as an intermediate solution before the real 1.2 comes out."
MRM-675,brettporter,Brett Porter,2010-02-23T02:45:28.444Z,2010-02-23T02:45:28.444Z,for testing
MRM-675,brettporter,Brett Porter,2010-02-23T04:41:54.305Z,2010-02-23T04:41:54.305Z,"seems fine on trunk, I believe this was fixed by metadata updates in earlier versions"
MRM-654,oching,Maria Odea Ching,2008-02-13T02:52:20.873Z,2008-02-13T02:52:20.873Z,"Thanks Stephen! :)

I've applied the patch (-r627310) with some revisions:
- removed org/example directory so that the directory won't be created during 'mvn archetype:create...'
- updated archetype.xml"
MRM-657,gvdbosch,Gunther Van den Bosch,2008-03-05T07:02:55.201Z,2008-03-05T07:02:55.201Z,"This could be solved by adapting the JDO mapping for Oracle. Oracle supports only VARCHAR types with a maximum length of 4000. The standard implementation of archiva sometimes uses fields which are longer.
I have attached the package-oracle.orm file which should be included in the archiva-model-1.0.1.jar next to the package.jdo

Using the Oracle mapping can be activated by setting the mapping property in the application.xml for the Jdofactory component
<property>
<name>javax.jdo.option.Mapping</name>
<value>oracle</value>
</property>

I hope this helps"
MRM-657,odassaud,Olivier Dassaud,2008-03-17T06:14:23.252Z,2008-03-17T06:14:23.252Z,"Hello,

We used to experience the same problem.

We solved it changing some sizes in :
archiva-base/archiva/model/src/main/mdo/archiva-base.xml (stash.maxSize=""4000"")

FYI the new file is attached to that ticket.
 
But it looks that Gunther proposal is smarter.

Olivier."
MRM-657,intrix,arno koehler,2008-05-05T07:09:24.136Z,2008-05-05T07:09:24.136Z,"I see the same error in my log files.

The setup I am using is Archiva.WAR on JBoss in combination with Oracle.
The solution Gunther presents is a bit difficult for me, because in the WAR there is (off course) no application.xml and I would not know what to do with this now.

I tried to add 

<property>
<name>javax.jdo.option.Mapping</name>
<value>oracle</value>
</property>

to my web.xml but it doens't fix the problem.
What can I do to fix my problem?"
MRM-657,aaron,Aaron Hamid,2008-09-18T15:53:05.87Z,2008-09-18T15:53:05.87Z,"This error occurs for me if I hit the Reports button.  Any update on this issue?  I'm not sure where to find the original files to modify (other than application.xml, where I added the javax.jdo.option.Mapping, but it didn't appear to help...maybe I need to start fresh with this option?).  I'd rather not limit the column size, but instead set them to CLOB so they can support the requirements."
MRM-657,aaron,Aaron Hamid,2008-09-18T16:21:32.885Z,2008-09-18T16:21:32.885Z,Attempting a partial db-dependent override via package-oracle.orm and package-oracle.jdo did not work for me.  I had to edit and replace the main package.jdo (by placing the override in classes/).
MRM-657,brettporter,Brett Porter,2010-02-23T02:44:53.309Z,2010-02-23T02:44:53.309Z,superceded
MRM-659,thomas.demande,Thomas Demande,2008-04-04T07:28:39.052Z,2008-04-04T07:28:39.052Z,"From a Maven 2 project, when I try to get a Maven 1 ejb artifact _via_ Archiva, it's still trying to get it from _groupId_/*jars*/_artifactId_-_version_.jar.

I'm using newly packaged 1.0.2 version you're voting for (from http://people.apache.org/builds/maven/archiva/1.0.2/), that should resolve the problem according to this issue fix version.

Did I miss some configuration steps ?"
MRM-659,brettporter,Brett Porter,2008-04-05T19:06:39.552Z,2008-04-05T19:06:39.552Z,"I believe this combination can't be translated. The Maven 2 format for an ejb looks the same as a JAR, so Archiva can't know which one to return. You should have Maven 2 use the legacy format when talking to the Archiva repository so that it looks for /ejbs/*"
MRM-659,thomas.demande,Thomas Demande,2008-04-07T02:06:03.783Z,2008-04-07T02:06:03.783Z,"Thanks, it works by adding duplicate definition of our Archiva instance, with legacy layout specified.

Anyway, I think behavior is quite strange IMHO, I would have expected that specifying the _remote repository_ as legacy would be enough, as it is the proxied repository that is in legacy mode, not the Archiva instance."
MRM-659,brettporter,Brett Porter,2008-04-07T02:15:17.184Z,2008-04-07T02:15:17.184Z,"if you have the proxied repository in legacy mode, but the managed repository in maven2 mode, then the problem will not occur - is that an option for you?"
MRM-659,thomas.demande,Thomas Demande,2008-04-07T02:22:25.238Z,2008-04-07T02:22:25.238Z,"Well that's actually the case we have, and that's why I commented this ticket ;)"
MRM-659,brettporter,Brett Porter,2008-04-07T02:29:33.371Z,2008-04-07T02:29:33.371Z,"you're right, sorry. The managed repository can be set to either, but to pass an ejb request to the legacy remote repository requires the incoming request to be in legacy format. This is because of the erasure of information in the Maven 2 repository format."
MRM-659,thomas.demande,Thomas Demande,2008-04-07T02:37:32.509Z,2008-04-07T02:37:32.509Z,"Well, as adding a new repository definition in legacy does the trick, I'm quite OK with that."
MRM-696,wsmoak,Wendy Smoak,2008-02-14T20:00:37.748Z,2008-02-14T20:00:37.748Z,"'mvn site' does not work from the tag.  The same thing happened for 1.0, see MRM-647.

[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error configuring: org.apache.maven.plugins:maven-war-plugin. Reason: ERROR: Cannot override read-only parameter: classesDirectory in goal: war:inplace
[INFO] ------------------------------------------------------------------------
"
MRM-696,wsmoak,Wendy Smoak,2008-02-14T21:37:47.99Z,2008-02-14T21:37:47.99Z,"Published the docs (mvn site-deploy) from the archiva-1.0.1 tag with the following change to work around the error mentioned in the previous comment.

{noformat}
Index: archiva-web/pom.xml
===================================================================
--- archiva-web/pom.xml	(revision 627743)
+++ archiva-web/pom.xml	(working copy)
@@ -32,7 +32,6 @@
   <modules>
     <module>archiva-applet</module>
     <module>archiva-security</module>
-    <module>archiva-webapp</module>
     <module>archiva-standalone</module>
   </modules>
{noformat} 
"
MRM-656,hackaton,Hackaton,2008-03-16T22:37:39.213Z,2008-03-16T22:37:39.213Z,"For Tomcat 6.0.0, there is no more common/lib. mail.jar and activation.jar a put them in ""$CATALINA_HOME/lib"" instead. see http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html"
MRM-602,oching,Maria Odea Ching,2008-06-08T22:25:36.325Z,2008-06-08T22:25:36.325Z,Added maintenance to the feature tour in trunk -r664610.
MRM-602,oching,Maria Odea Ching,2008-06-09T03:35:48.096Z,2008-06-09T03:35:48.096Z,Added maintenance to the features in archiva-site (-r664654)
MRM-628,oching,Maria Odea Ching,2008-01-07T03:15:59.325Z,2008-01-07T03:15:59.325Z,"Fixed in -r609534. 

in ArchivaXworkUser:
- changed to the appropriate key for the SecuritySession instance being retrieved from the session map "
MRM-601,alex_mayorga,Alex Mayorga Adame,2007-11-29T09:43:24.726Z,2007-11-29T09:43:24.726Z,[ ] deploy in something else than Tomcat (or at least state clearly what the web application needs to run on a random application server)
MRM-601,jameswdumay,James William Dumay,2008-05-08T01:42:20.911Z,2008-05-08T01:42:20.911Z,Moving to 1.1.x
MRM-662,oching,Maria Odea Ching,2008-01-24T05:10:00.122Z,2008-01-24T05:10:00.122Z,"Fixed DaysOldRepoPurge in -r614840.

Changes made:
- fixed up DaysOldRepositoryPurge
- added test case for the fix
- updated existing test cases
- replaced actual jar and pom files used in the test cases with dummies "
MRM-662,oching,Maria Odea Ching,2008-01-25T00:09:42.54Z,2008-01-25T00:09:42.54Z,"Added test for the order of deletion of artifacts in RetentionCountRepositoryPurge (-r615120)

The RetentionCountRepositoryPurge is already deleting artifacts correctly, based on the test case I've added."
MRM-630,jameswdumay,James William Dumay,2007-12-23T17:10:00.866Z,2007-12-23T17:10:00.866Z,Thread dump of this problem
MRM-630,oching,Maria Odea Ching,2007-12-27T03:22:14.776Z,2007-12-27T03:22:14.776Z,"Could this be the culprit? http://www.jpox.org/servlet/jira/browse/CORE-3408

Archiva is using jpox 1.1.7 and it seems this is also affected by the locking issue.. (please see the thread link in the jpox jira)."
MRM-630,jameswdumay,James William Dumay,2007-12-27T23:13:22.042Z,2007-12-27T23:13:22.042Z,"Good find Maria.

I've removed jpox 1.1.7 from our server and replaced it with the 1.1.9 version (which contains the above issue and another deadlocking issue) for a quick test. Ill write up on this issue how it went.

Also, if we were to upgrade jpox to 1.1.9, it does not appear to be in the maven central repo."
MRM-630,thx,Thomas Marti,2007-12-28T08:28:09.365Z,2007-12-28T08:28:09.365Z,"The JPOX project stopped using Ibiblio because of its inconvenient upload process. 
We have our own repo at http://www.jpox.org/downloads/maven/

"
MRM-630,jameswdumay,James William Dumay,2008-01-06T18:15:49.938Z,2008-01-06T18:15:49.938Z,I can confirm upgrading to jpox 1.1.9 fixes the 502 problem
MRM-630,oching,Maria Odea Ching,2008-01-06T20:26:30.207Z,2008-01-06T20:26:30.207Z,"Thanks James! :)

Upgraded archiva trunk from jpox 1.1.7 to 1.1.9 (-r609485). 
Is it safe to close this issue now?"
MRM-630,jameswdumay,James William Dumay,2008-01-06T21:24:55.908Z,2008-01-06T21:24:55.908Z,I think so. Could we organise a point release with this fix?
MRM-632,jahlborn,james,2008-02-18T15:55:30.978Z,2008-02-18T15:55:30.978Z,"So, I've been poking through the source code looking for this problem.  

The problem seems to be coming from DefaultPathParser, line ~131 (although that is hidden from the user because RetentionCountRepositoryPurge drops the original exception (line ~102), should be nesting the exception, not just copying the message.

here are the issues i've found so far:

in FileNameParser.java:

- extensionPattern is bogus.  I assume that the '.' chars are supposed to be literal chars, should be:

""([.]tar[.]gz$)|([.]tar[.]bz2$)|([.][a-z0-9]{1,4}$)""

- nextVersion() is returning a version which will not succeed in VersionUtil.isUniqueSnapshot (called by DefaultPathParser).  the nextVersion method returns a string like ""999999999-999999-99"", but the unique snapshot code is looking for ""99999999.999999-99"" (note the '.' separator).  i haven't tested this directly, but it's also possible the nextVersion method may also be tacking ""-test"" onto the version string because the ""test"" in ""test-sources"" matches the VersionUtil.isVersion() method (from versionPatterns line ~47).

another minor point, in VersionUtil, the VersionMegaPattern should be pre-compiled like the other regular expressions (will probably speed things up).  it's the most complicated expression and probably takes the longest to compile."
MRM-632,gayathri,Gayathri Muralidharan,2011-02-02T23:41:28.608Z,2011-02-02T23:41:28.608Z,"Hi,
We are using Archiva 1.3 and the snapshots are not getting purged due to this Layout exception.
Has this issue been fixed in 1.3.3 ?? 

Thanks,
Gayathri"
MRM-632,gayathri,Gayathri Muralidharan,2011-02-03T00:08:42.284Z,2011-02-03T00:08:42.284Z,"Update : The same error occurs with 1.3.3 also.

Error message :2011-02-03 01:06:18,598 [pool-2-thread-1] INFO  org.apache.maven.archiva.consumers.core.MetadataUpdaterConsumer  - Not processing path that is not an artifact: abc/def/SNAPSHOT/def-20110130.110618-652.jar (Invalid path to Artifact: filename format is invalid,expected timestamp format in filename.)

"
MRM-699,oching,Maria Odea Ching,2008-02-17T04:50:12.954Z,2008-02-17T04:50:12.954Z,"I verified this on trunk but the NPE in IndexArtifactConsumer** no longer exist.. instead an NPE shows up when there is a change in the repository and you execute db scan. But when you re-excute the db scan again, the NPE is gone and the db update task finishes successfully. Below is the stack trace:

jvm 1    | 2008-02-17 17:50:58,511 [SocketListener0-0] INFO  com.opensymphony.xwork.Action:schedulerAction  - [ActionMessage] Your request to update the database has been queued.
jvm 1    | 2008-02-17 17:50:58,514 [pool-1-thread-1] INFO  org.codehaus.plexus.taskqueue.execution.TaskExecutor:database-update  - Executing task from queue with job name: database-job:user-requested
jvm 1    | 2008-02-17 17:50:58,514 [pool-1-thread-1] INFO  org.codehaus.plexus.taskqueue.execution.TaskExecutor:database-update  - Task: Updating unprocessed artifacts
jvm 1    | 2008-02-17 17:50:58,519 [pool-1-thread-1] INFO  org.codehaus.plexus.taskqueue.execution.TaskExecutor:database-update  - Task: Updating processed artifacts
jvm 1    | 2008-02-17 17:50:58,930 [Thread-5] ERROR org.codehaus.plexus.taskqueue.execution.TaskQueueExecutor:database-update  - Error executing task
jvm 1    | edu.emory.mathcs.backport.java.util.concurrent.ExecutionException: java.lang.NullPointerException
jvm 1    |      at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.getResult(FutureTask.java:299)
jvm 1    |      at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.get(FutureTask.java:118)
jvm 1    |      at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable.waitForTask(ThreadedTaskQueueExecutor.java:159)
jvm 1    |      at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable.run(ThreadedTaskQueueExecutor.java:127)
jvm 1    | Caused by: java.lang.NullPointerException
jvm 1    |      at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:56)
jvm 1    |      at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
jvm 1    |      at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateProcessed(JdoDatabaseUpdater.java:170)
jvm 1    |      at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllProcessed(JdoDatabaseUpdater.java:111)
jvm 1    |      at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:78)
jvm 1    |      at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
jvm 1    |      at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
jvm 1    |      at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
jvm 1    |      at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)
jvm 1    |      at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)
jvm 1    |      at java.lang.Thread.run(Thread.java:595)
jvm 1    | 2008-02-17 17:51:08,204 [SocketListener0-0] INFO  com.opensymphony.xwork.Action:schedulerAction  - [ActionMessage] Your request to update the database has been queued.
jvm 1    | 2008-02-17 17:51:08,206 [pool-1-thread-1] INFO  org.codehaus.plexus.taskqueue.execution.TaskExecutor:database-update  - Executing task from queue with job name: database-job:user-requested
jvm 1    | 2008-02-17 17:51:08,206 [pool-1-thread-1] INFO  org.codehaus.plexus.taskqueue.execution.TaskExecutor:database-update  - Task: Updating unprocessed artifacts
jvm 1    | 2008-02-17 17:51:08,210 [pool-1-thread-1] INFO  org.codehaus.plexus.taskqueue.execution.TaskExecutor:database-update  - Task: Updating processed artifacts
jvm 1    | 2008-02-17 17:51:08,825 [pool-1-thread-1] INFO  org.codehaus.plexus.taskqueue.execution.TaskExecutor:database-update  - Finished database task in 619ms.


**Please note that in the stack trace posted in the issue description, the NPE occurs in IndexArtifactConsumer
"
MRM-699,brettporter,Brett Porter,2008-02-25T06:01:53.351Z,2008-02-25T06:01:53.351Z,"I can't find a corresponding line in IndexArtifactConsumer... but the other one posted seems related to the one in MRM-691 so I'm closing as a duplicate for now.

Deng, do you have the steps to reproduce we can retry once that is fixed?"
MRM-620,jmacdonald801,James MacDonald,2007-12-05T13:07:58.53Z,2007-12-05T13:07:58.53Z,"Sorry, valid example of error in report should be:

File foo-core-common-1.0.1-rc1.pom has an invalid project model [groupId:com.foo.infrastructure.foo|artifactId:foo-core-common|version:1.0.1-SNAPSHOT|packaging:null]; The model version [1.0.1-SNAPSHOT] does not match the version portion of the filename: 1.0.1-rc1

I have no idea why it mentions [1.0.1-SNAPSHOT], the pom.xml has not reference to a snapshot whatsoever and neither does the it's parent.  It's a released artifact."
MRM-620,oliveros,Drio Oliveros,2008-02-12T04:20:09.275Z,2008-02-12T04:20:09.275Z,That is mostly caused by an effective cache malfunctioning. Please see related issue.
MRM-620,oching,Maria Odea Ching,2008-10-10T23:01:12.494Z,2008-10-10T23:01:12.494Z,"Fixed by the patch submitted for MRM-952, which was committed in trunk -r703626."
MRM-650,oching,Maria Odea Ching,2008-07-10T04:04:18.87Z,2008-07-10T04:04:18.87Z,Fix in MRM-737 also fixes this problem.
MRM-631,aheritier,Arnaud HERITIER,2008-03-19T11:36:15.393Z,2008-03-19T11:36:15.393Z,"I have the same issue, but I found a workaround.
In my case I have some real external repositories which are behind an http proxy and some local repositories using file:// protocol.
If I order proxy connectors with external repositories first, my local repositories aren't read and I have an error from my http proxy. If I put my local repositories first, everything is fine."
MRM-631,brettporter,Brett Porter,2008-03-25T01:55:43.395Z,2008-03-25T01:55:43.395Z,"I've not been able to reproduce this with 1.0.2-SNAPSHOT following the instructions in both comments. Arnaud, are you able to try the snapshot and check whether we've fixed this with some other changes?"
MRM-631,aheritier,Arnaud HERITIER,2008-03-27T03:21:45.837Z,2008-03-27T03:21:45.837Z,"I don't know, but it's fixed in current SNAPSHOT"
MRM-631,brettporter,Brett Porter,2008-04-04T18:45:22.484Z,2008-04-04T18:45:22.484Z,"it has been reported on list that this is still a problem. It may be an issue with the system properties. a potential workaround for this is to use the -Dhttp.nonProxyHosts in the startup script (or wrapper.conf). IF that doesn't work, try replacing wagon-http-lightweight with wagon-http."
MRM-631,frickeo,Olaf Fricke,2008-07-20T06:42:47.122Z,2008-07-20T06:42:47.122Z,"I have fought against the same problem last week and finally found a solution.

We have the same setup as described above in our company: we have a local maven2 repository that is used as server for our own artifacts. This repository needs to be reached directly. In addition, we are using a couple of remote repositories in the internet. To reach these repositories, a network proxy has to be used.

We are using archiva 1.0.2 as mirror in the maven configuration to proxy all these repositories. Everything works fine, as long as we are using either the local repository without a proxy only or the remote repositories behind the network proxy. Using both kinds of repositories results in strange error messages.

After hours of testing, researching and even code reviews I found the problem: as soon as a network proxy is defined on the archiva configuration page, saving a proxy connector the used direct connection via the archiva configuration changes the archiva.xml configuration file. Instead of the usual empty <proxyId/> tag, the  configuration file contains <proxyId>(direct connection)</proxyId>. And this does not work. 

After I have removed the the '(direct connection)' manually from the configuration file the mixed setup is working!"
MRM-631,brettporter,Brett Porter,2008-07-29T11:24:43.836Z,2008-07-29T11:24:43.836Z,"the configuration file isn't the issue here.

There are two problems:
1) the wagons were not being re-initialised, meaning the first used remote proxy stuck forever
2) the lightweight-http-wagon being used did not reset the system properties after use

The first is fixed. The second has been worked around.

Note that the second is highly likely to be a problem if you have concurrent requests accessing both, however I'm reluctant to add synchronisation just for that purpose. It would be better for us to invest in switching to commons-httpclient again in 1.2 so this becomes a non-issue."
MRM-631,jaxzin,Brian Jackson,2008-08-13T14:22:34.175Z,2008-08-13T14:22:34.175Z,"Brett, if there is a known issue with lightweight-http-wagon, why is this issue closed?  I'm still experiencing it in 1.1.1.  This issue should be open with the workarounds clearly listed for those of us running into it, please."
MRM-631,aheritier,Arnaud HERITIER,2008-08-13T15:01:26.131Z,2008-08-13T15:01:26.131Z,What I understood is that the workaround is in archiva's code. That's why Brett closed it.
MRM-631,jaxzin,Brian Jackson,2008-08-13T15:56:57.877Z,2008-08-13T15:56:57.877Z,"Thanks Arnaud, maybe that's my confusion in understanding the comments on this issue.  But like I said, I'm still experiencing it with 1.1.1 so its not fixed if its a workaround in the code base.  I didn't have the -Dhttp.nonProxyHosts set so I'm trying that and hopefully that's the workaround Brett was referring to.  I'll also try the http wagon if it doesn't work.  I know I tried that under Archiva 1.0.1 and it hosed my instance so I'm hesitant to try it."
MRM-631,brettporter,Brett Porter,2008-08-13T20:24:21.733Z,2008-08-13T20:24:21.733Z,"we were using the http wagon for a while but encountered some deadlocking in the version of httpclient. I believe there's an open issue for switching to something else (we're now looking at the jetty http client), which is why I closed this one. The obvious bug was fixed, with limitations.

Are you experiencing it in all cases, or only on concurrent access to both proxied and non-proxied repos?"
MRM-631,jaxzin,Brian Jackson,2008-08-13T21:09:23.259Z,2008-08-13T21:09:23.259Z,"I experience it after Archiva has been up for some time.  For 1.0.2 it was only about 5 minutes, for 1.1.1 it was good for about 3 days.  After that point it will switch to always using the proxy server even for remote repos configured to use direct connect.    The concurrency of the access is not an issue since after this issue happens it will happen consistently until a restart even with no other users accessing the server."
MRM-631,brettporter,Brett Porter,2008-08-13T21:20:12.608Z,2008-08-13T21:20:12.608Z,Perhaps it is triggered by an exception that doesn't reset the properties. Would you mind creating a new issue for us to investigate this specifically?
MRM-631,jaxzin,Brian Jackson,2008-08-13T21:36:38.055Z,2008-08-13T21:36:38.055Z,"Brett, I created MRM-909."
MRM-686,jameswdumay,James William Dumay,2008-05-08T01:42:20.463Z,2008-05-08T01:42:20.463Z,Moving to 1.1.x
MRM-686,jaxzin,Brian Jackson,2008-05-21T12:37:35.259Z,2008-05-21T12:37:35.259Z,I'm having the same issue but using a placeholder (${build.number}) as the version number.
MRM-686,greyfairer,Geert Pante,2008-05-22T04:41:30.406Z,2008-05-22T04:41:30.406Z,Brian: did you have this in archiva-1.0.2?
MRM-686,jaxzin,Brian Jackson,2008-05-22T09:51:21.593Z,2008-05-22T09:51:21.593Z,I'm using archiva-1.0.2 now and experiencing this error with my placeholder as the version number.
MRM-686,jaxzin,Brian Jackson,2008-07-24T23:10:58.179Z,2008-07-24T23:10:58.179Z,"I see this is scheduled for 1.2 but I wanted to just attach the error message from Archiva 1.1 which I just installed:

2008-07-25 00:05:32,035 [pool-1-thread-1] WARN  org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - File leaguemanager-5.0.0.pom has an invalid project model [groupId:com.espn.games.lm|artifactId:leaguemanager|version:${build.number}|packaging:jar]; The model version [${build.number}] does not match the version portion of the filename: 5.0.0
2008-07-25 00:05:32,035 [pool-1-thread-1] WARN  org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - Invalid or corrupt pom. Project model not added to database - com.espn.games.lm:leaguemanager:${build.number}
"
MRM-686,aka3,Anders Kristian Andersen,2009-01-26T04:05:04.567Z,2009-01-26T04:05:04.567Z,"Unable to find project model for [ggg:aaa:vvv]

I see the problem when ""Browse Repository""

The page will contain a red line with the text Unable to find project model for [ggg:aaa:vvv] 

I have studied that the pom.xml can be downloaded just fine, so it is ""only"" a browse problem.
""only"" is in this case also important, because it is very time consuming to find out that the artifact really works..

In my case I have been maintaining with the <scm> <url> in my poms. Because the url will be ...aaa/trunk/ for SNAPSHOTS 
but it will be aaa/tags/aaa-vvv/ for releases.

Here I tried to make it ${project.artifactId}/tags/${project.artifactId}-${project.version}/ 
AND THIS GAVE THE ERROR ****

Therefore my conclusion is that the viewer has problems. 

I have tested all this in 1.1.2, but looking at the release notes it shown no work in this area for 1.1.3
I am going to install 1.1.3 a little later, then I can see if the problem remains.
And I can do a comment here.


"
MRM-686,brettporter,Brett Porter,2009-03-08T21:04:52.521Z,2009-03-08T21:04:52.521Z,confirmed to be fixed
MRM-608,wsmoak,Wendy Smoak,2007-11-29T10:34:13.381Z,2007-11-29T10:34:13.381Z,"I believe Archiva is now discovering deletions from the repository filesystem (MRM-37), but I am not sure about changes."
MRM-608,oliveros,Drio Oliveros,2008-02-13T07:16:11.162Z,2008-02-13T07:16:11.162Z,"Please take a look at http://jira.codehaus.org/browse/MRM-687.
It may fix your problem."
MRM-608,oching,Maria Odea Ching,2008-02-24T21:25:26.98Z,2008-02-24T21:25:26.98Z,This issue still exists after I applied the patch in MRM-687. My hunch is that the processed/unprocessed flag for the artifact in the db needs to be set to unprocessed when the project model was not added in order for the changes to be reflected.
MRM-608,oching,Maria Odea Ching,2008-03-14T04:13:56.822Z,2008-03-14T04:13:56.822Z,"Fixed in -r637023.

-set whenProcessed to null of every artifact discovered (ArtufactUpdateDatabaseConsumer)"
MRM-608,brettporter,Brett Porter,2008-03-14T16:57:12.376Z,2008-03-14T16:57:12.376Z,merged to branch
MRM-646,oching,Maria Odea Ching,2008-01-13T22:32:22.866Z,2008-01-13T22:32:22.866Z,"Fixed in -r611707.

- added example for deploying Archiva to Tomcat 6.0.x
- added that mail-1.4.jar should also be added in common/lib"
MRM-693,jameswdumay,James William Dumay,2008-05-08T01:42:19.929Z,2008-05-08T01:42:19.929Z,Moving to 1.1.x
MRM-637,brettporter,Brett Porter,2008-03-29T06:39:44.416Z,2008-03-29T06:39:44.416Z,"this can be run on archiva-modules now, but appropriate checks and automation of this is needed"
MRM-637,skygolanur,Eric Barboni,2012-09-24T16:59:56.213Z,2012-09-24T16:59:56.213Z,"ci profile not existing

default reporting available and also some info here:

http://analysis-vm.apache.org/dashboard/index/org.apache.archiva:archiva"
MRM-688,brettporter,Brett Porter,2008-02-18T14:57:51.087Z,2008-02-18T14:57:51.087Z,note the documentation will have to be updated to not refer to PLEXUS_BASE (or perhaps we should continue to honour that for backwards compatibility)
MRM-688,oching,Maria Odea Ching,2008-02-29T01:12:11.594Z,2008-02-29T01:12:11.594Z,"Added archiva-jetty-archetype-module in archiva-trunk -r632245. This is not yet included in the build for now, as the generated wrapper files are corrupted (see MOJO-1060)"
MRM-688,brettporter,Brett Porter,2008-02-29T02:41:45.602Z,2008-02-29T02:41:45.602Z,"I've fixed the corruption, however there's more work to do here:
- it doesn't run the webapp, it offers it for download
- need to work through all the default configuration since conf/* won't be used by default. A good configuration of the jetty.xml should be able to set up the appserver.base etc as before."
MRM-688,brettporter,Brett Porter,2008-02-29T02:45:30.871Z,2008-02-29T02:45:30.871Z,also need to rename the module to just archiva-jetty :)
MRM-688,oching,Maria Odea Ching,2008-02-29T02:55:51.898Z,2008-02-29T02:55:51.898Z,"Okey dokey, thanks Brett! :-)"
MRM-688,oching,Maria Odea Ching,2008-03-04T00:16:14.607Z,2008-03-04T00:16:14.607Z,"Changes made in -r633367:
-added config for mail session and archiva & users db in jetty.xml
-unpack webapp during packaging so that it would be run during startup"
MRM-688,oching,Maria Odea Ching,2008-03-04T04:08:18.856Z,2008-03-04T04:08:18.856Z,"Changes made in -r633408:
- set appserver.base as additional java parameter
- also added config property below to strip the quotes of the value of appserver.base (as i don't think this is currently supported by the appassembler-maven-plugin) 
  <property>
    <name>wrapper.java.additional.1.stripquotes</name>
    <value>TRUE</value>
  </property>

Btw, should we retain the PLEXUS_BASE for backwards compatibility as Brett also suggested above?"
MRM-688,oching,Maria Odea Ching,2008-03-04T04:09:11.247Z,2008-03-04T04:09:11.247Z,Would this be necessary (retain PLEXUS_BASE) if we'll be migrating to spring in the future? :-)
MRM-688,brettporter,Brett Porter,2008-03-04T04:15:25.491Z,2008-03-04T04:15:25.491Z,"it's just an env var, so it's ok to keep it - but I don't know that it's worth it. I think it might be better to just adjust the documentation."
MRM-688,oching,Maria Odea Ching,2008-03-04T04:26:09.759Z,2008-03-04T04:26:09.759Z,"Okay, I'll just adjust the documentation for now. I'll add the archiva-jetty module to the build as well so people can also try it out and test it. 
Thanks!"
MRM-688,brettporter,Brett Porter,2008-03-26T19:35:55.46Z,2008-03-26T19:35:55.46Z,"I'm having a problem with ""archiva stop"" on Mac so I'll open this until I can figure it out.

Also, we need to update the following docs:
quickstart, standalone, docs/adminguide/databases.html, docs/adminguide/customising-security.html

"
MRM-688,brettporter,Brett Porter,2008-03-27T02:21:24.841Z,2008-03-27T02:21:24.841Z,it also seems the archiva.log and stderr logs duplicate information :)
MRM-688,brettporter,Brett Porter,2008-03-27T16:15:33.561Z,2008-03-27T16:15:33.561Z,"I'm going to be working through getting ARCHIVA_BASE working today, and will then test on Windows"
MRM-688,oching,Maria Odea Ching,2008-03-27T23:54:20.929Z,2008-03-27T23:54:20.929Z,"Fixed the duplication in the logs in -r642087:
- set the logs to be output only to the log file and not the console to eliminate duplication "
MRM-670,ndeloof,nicolas de loof,2008-01-28T09:02:36.44Z,2008-01-28T09:02:36.44Z,fixed at rev 615904
MRM-691,brettporter,Brett Porter,2008-02-11T19:37:51.619Z,2008-02-11T19:37:51.619Z,"I just noted the other exceptions you were posting about
""test-sources"" artifacts is a different issue (I think it has already
been reported but would need to check).

For the NPE - it appears to be a consumer is null - you might check
the consumer configuration page - or look for empty entries in
archiva.xml."
MRM-691,jchaffee,Jason Chaffee,2008-02-12T01:08:43.961Z,2008-02-12T01:08:43.961Z,"I shutdown archiva and restarted it and then I ran the repostiory scan and the NPE's are no longer present.  Now, I am only getting the invalid artifact path problem.

2291646 [pool-2-thread-1] ERROR org.apache.maven.archiva.repository.scanner.RepositoryScanner:default  - Consumer [repository-purge] had an error when processing file [/disk1/html/maven2-snapshot/com/tvworks/tva/apps/comcast/admincla/3.3.1-SNAPSHOT/admincla-3.3.1-20080115.074922-1.jar]: Invalid path to Artifact: filename format is invalid,expected timestamp format in filename.
org.apache.maven.archiva.consumers.ConsumerException: Invalid path to Artifact: filename format is invalid,expected timestamp format in filename.
	at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:189)
	at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:57)
	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:138)
	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:173)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:391)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:385)
	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:344)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:120)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:64)
	at org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:106)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)
	at java.lang.Thread.run(Thread.java:595)
Caused by: org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeException: Invalid path to Artifact: filename format is invalid,expected timestamp format in filename.
	at org.apache.maven.archiva.consumers.core.repository.RetentionCountRepositoryPurge.process(RetentionCountRepositoryPurge.java:102)
	at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:185)
	... 23 more"
MRM-691,jchaffee,Jason Chaffee,2008-02-12T02:32:53.893Z,2008-02-12T02:32:53.893Z,The NPE came back when the database update ran.
MRM-691,brettporter,Brett Porter,2008-02-12T18:36:44.762Z,2008-02-12T18:36:44.762Z,"I think we can create a separate issue for the file format exception - it certainly looks right to me so I'm not sure why it is complaining about that.

With regard to the NPE - have you been able to check the consumer configuration for the database?"
MRM-691,brettporter,Brett Porter,2008-02-25T05:42:19.319Z,2008-02-25T05:42:19.319Z,"the first failures is that this returns null:
archivaConfiguration.getConfiguration().findManagedRepositoryById( repoTask.getRepositoryId() );

the subsequent failures are from apparently a null getLogger() - this is probably a side effect of the above failure"
MRM-685,hell7,Ive Hellemans,2008-02-07T02:42:39.25Z,2008-02-07T02:42:39.25Z,"
Hi there,

I'm evaluating several options for setting up a Collaborative Development Environment and a Continious Integration Environment for Toyota Motor Europe. For this, we hope to be able to use the Atlassian suite of products, using Crowd to provide a single signon. For the CIE part we are also evaluating maven repositories, and it it would be great if we could link such a repository with our single signon solution. 

--> I think that solving the integration issues mentioned by Atlassian would make Archiva the obvious choice.

Regards,
Ive"
MRM-685,drazzib,Damien Raude-Morvan,2014-05-12T09:15:13.566Z,2014-05-12T09:15:13.566Z,"Hi all,

I'm would really love getting this Crowd plugin in shape, could someone describe to me step to implements a Archiva security plugin ?

@Donna, could you please describe current limitations of RedBack security framework that were blocking implementation of a Crowd security plugin for Archiva ?

Regards,"
MRM-685,sbarnea,Sorin Sbarnea,2015-04-08T11:00:44.908Z,2015-04-08T11:00:44.908Z,"It seems that Artifactory has a quite nice Crowd plugin that worked very well, it may be useful to look at it."
MRM-697,jameswdumay,James William Dumay,2008-04-26T23:21:46.702Z,2008-04-26T23:21:46.702Z,"Perhaps we could use http://docs.atlassian.com/atlassian-gzipfilter/1.6/ ?

From the site docs:
""Atlassian Gzip Filter adds gzip filtering capabilities to your web application transparently by using a servlet filter"""
MRM-697,jameswdumay,James William Dumay,2008-05-08T01:42:23.987Z,2008-05-08T01:42:23.987Z,Moving to 1.1.x
MRM-697,jameswdumay,James William Dumay,2008-05-08T02:22:39.958Z,2008-05-08T02:22:39.958Z,Moving to 1.2
MRM-655,oching,Maria Odea Ching,2008-03-26T01:53:23.534Z,2008-03-26T01:53:23.534Z,Fixed with MRM-688
MRM-655,brettporter,Brett Porter,2008-03-29T19:08:28.426Z,2008-03-29T19:08:28.426Z,fix ported to branch
MRM-660,oching,Maria Odea Ching,2008-07-09T00:30:48.136Z,2008-07-09T00:30:48.136Z,Duplicate of MRM-796.
MRM-647,wsmoak,Wendy Smoak,2007-12-30T13:16:07.568Z,2007-12-30T13:16:07.568Z,"From both the 1.0 tag and archiva/trunk, 'mvn site' results in

{noformat}
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error configuring: org.apache.maven.plugins:maven-war-plugin. Reason: ERROR: Cannot override read-only parameter: classesDirectory in goal: war:inplace
[INFO] ------------------------------------------------------------------------
{noformat}

Related thread:  http://www.nabble.com/Trouble-with-%27mvn-site%27-for-archiva-trunk-td14550166s177.html"
MRM-647,wsmoak,Wendy Smoak,2008-01-06T18:26:36.633Z,2008-01-06T18:26:36.633Z,"Archiva 1.0 reference docs published from the tag with the following changes:

svn co http://svn.apache.org/repos/asf/maven/archiva/tags/archiva-1.0
cd archiva-1.0

{noformat}
Index: archiva-web/pom.xml
===================================================================
--- archiva-web/pom.xml (revision 607509)
+++ archiva-web/pom.xml (working copy)
@@ -31,7 +31,6 @@
   <modules>
     <module>archiva-applet</module>
     <module>archiva-security</module>
-    <module>archiva-webapp</module>
     <module>archiva-standalone</module>
   </modules>
 
Index: pom.xml
===================================================================
--- pom.xml     (revision 607509)
+++ pom.xml     (working copy)
@@ -729,16 +729,14 @@
   </dependencyManagement>
   <reporting>
     <plugins>
-      <!-- This breaks site generation with 'cobertura.ser does not exist'
-           in the archiva-signature-consumers and archiva-applet modules. 
       <plugin>
         <groupId>org.codehaus.mojo</groupId>
         <artifactId>cobertura-maven-plugin</artifactId>
-        <version>2.0</version>
+        <version>2.2</version>
       </plugin>
-      -->
       <plugin>
         <artifactId>maven-checkstyle-plugin</artifactId>
+        <version>2.1</version>
         <configuration>
           <configLocation>config/maven_checks.xml</configLocation>
         </configuration>
@@ -912,7 +910,7 @@
   <distributionManagement>
     <site>
       <id>apache.website</id>
-      <url>${siteBaseDeployment}/reports/</url>
+      <url>${siteBaseDeployment}/ref/1.0</url>
     </site>
   </distributionManagement>
 </project>
{noformat}

mvn site-deploy

ssh people.apache.org
cd /www/maven.apache.org/archiva/ref
rm current
ln -s 1.0 current
"
MRM-665,brettporter,Brett Porter,2010-02-23T01:44:39.594Z,2010-02-23T01:44:39.594Z,now quite effecient
MRM-665,brettporter,Brett Porter,2011-03-02T02:34:52.314Z,2011-03-02T02:34:52.314Z,attaching a patch for those users on 1.3.x that would like to disable the feature to avoid this taking down the server.
MRM-677,brettporter,Brett Porter,2008-02-25T07:27:20.729Z,2008-02-25T07:27:20.729Z,this should be in place now
MRM-677,oching,Maria Odea Ching,2008-03-04T04:56:59.209Z,2008-03-04T04:56:59.209Z,"After upgrading Archiva to redback-1.0, i'm getting the following error during startup:

jvm 1    | INFO: ********** FATAL ERROR STARTING UP PLEXUS-WEBWORK INTEGRATION **********
jvm 1    | Looks like the Plexus listener was not configured for your web app! 
jvm 1    | You need to add the following to web.xml: 
jvm 1    | 
jvm 1    |     <listener>
jvm 1    |         <listener-class>org.codehaus.plexus.xwork.PlexusLifecycleListener</listener-class>
jvm 1    |     </listener>
jvm 1    | Mar 4, 2008 6:54:47 PM org.mortbay.jetty.servlet.ServletHandler$Context log
jvm 1    | INFO: Plexus container already in context.
jvm 1    | 2008-03-04 18:54:49,149 [WrapperSimpleAppMain] WARN  net.sf.ehcache.config.ConfigurationFactory  - No configuration found. Configuring ehcache from ehcache-failsafe.xml  found in the classpath: jar:file:/home/deng/Projects/archiva-1.0.x-022508/archiva-web/archiva-standalone/archiva-plexus-runtime/target/apache-archiva-1.0.2-SNAPSHOT/apps/archiva/webapp/WEB-INF/lib/ehcache-1.3.0.jar!/ehcache-failsafe.xml
jvm 1    | [ERROR] Error while deploying appserver archiva-plexus-application-1.0.2-SNAPSHOT.jar.
jvm 1    | org.codehaus.plexus.appserver.ApplicationServerException: Error in the app server lifecycle post-app-container-init-service-call phase.
jvm 1    |      at org.codehaus.plexus.appserver.application.deploy.DefaultApplicationDeployer.deployJar(DefaultApplicationDeployer.java:119)
jvm 1    |      at org.codehaus.plexus.appserver.application.deploy.DefaultApplicationDeployer.deploy(DefaultApplicationDeployer.java:88)
jvm 1    |      at org.codehaus.plexus.appserver.lifecycle.phase.ApplicationDeploymentPhase$1.onJarDiscovered(ApplicationDeploymentPhase.java:44)
jvm 1    |      at org.codehaus.plexus.appserver.supervisor.DefaultSupervisor.scanDirectory(DefaultSupervisor.java:100)
jvm 1    |      at org.codehaus.plexus.appserver.supervisor.DefaultSupervisor.scan(DefaultSupervisor.java:73)
jvm 1    |      at org.codehaus.plexus.appserver.lifecycle.phase.ApplicationDeploymentPhase.execute(ApplicationDeploymentPhase.java:58)
jvm 1    |      at org.codehaus.plexus.appserver.DefaultApplicationServer.start(DefaultApplicationServer.java:218)
jvm 1    |      at org.codehaus.plexus.personality.plexus.lifecycle.phase.StartPhase.execute(StartPhase.java:33)
jvm 1    |      at org.codehaus.plexus.lifecycle.AbstractLifecycleHandler.start(AbstractLifecycleHandler.java:128)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:142)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:132)
jvm 1    |      at org.codehaus.plexus.component.manager.ClassicSingletonComponentManager.getComponent(ClassicSingletonComponentManager.java:90)
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:147)
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:69)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:297)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:291)
jvm 1    |      at org.codehaus.plexus.appserver.PlexusApplicationHost.start(PlexusApplicationHost.java:155)
jvm 1    |      at org.codehaus.plexus.appserver.PlexusApplicationHost.start(PlexusApplicationHost.java:85)
jvm 1    |      at org.codehaus.plexus.appserver.PlexusApplicationHost.main(PlexusApplicationHost.java:289)
jvm 1    |      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
jvm 1    |      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
jvm 1    |      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
jvm 1    |      at java.lang.reflect.Method.invoke(Method.java:585)
jvm 1    |      at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
jvm 1    |      at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
jvm 1    |      at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:408)
jvm 1    |      at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:351)
jvm 1    |      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
jvm 1    |      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
jvm 1    |      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
jvm 1    |      at java.lang.reflect.Method.invoke(Method.java:585)
jvm 1    |      at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
jvm 1    |      at java.lang.Thread.run(Thread.java:595)
jvm 1    | Caused by: org.codehaus.plexus.appserver.application.deploy.lifecycle.AppDeploymentException: Error calling service in pre-app init phase.
jvm 1    |      at org.codehaus.plexus.appserver.application.deploy.lifecycle.phase.AfterAppStartServiceSetupPhase.execute(AfterAppStartServiceSetupPhase.java:32)
jvm 1    |      at org.codehaus.plexus.appserver.application.deploy.DefaultApplicationDeployer.deployJar(DefaultApplicationDeployer.java:107)
jvm 1    |      ... 32 more
jvm 1    | Caused by: org.codehaus.plexus.appserver.service.PlexusServiceException: Error while starting the context /archiva
jvm 1    |      at org.codehaus.plexus.service.jetty.JettyPlexusService.afterApplicationStart(JettyPlexusService.java:252)
jvm 1    |      at org.codehaus.plexus.appserver.application.deploy.lifecycle.phase.AfterAppStartServiceSetupPhase.execute(AfterAppStartServiceSetupPhase.java:28)
jvm 1    |      ... 33 more
jvm 1    | Caused by: org.codehaus.plexus.jetty.ServletContainerException: Error while starting the context /archiva
jvm 1    |      at org.codehaus.plexus.jetty.AbstractJettyServletContainer.startApplication(AbstractJettyServletContainer.java:213)
jvm 1    |      at org.codehaus.plexus.service.jetty.JettyPlexusService.afterApplicationStart(JettyPlexusService.java:248)
jvm 1    |      ... 34 more
jvm 1    | Caused by: org.mortbay.util.MultiException[java.lang.RuntimeException: org.codehaus.plexus.PlexusContainerException: Error initializaing container in org.codehaus.plexus.container.initialization.StartLoadOnStartComponentsPhase@754fc., java.lang.NullPointerException]
jvm 1    |      at org.mortbay.jetty.servlet.WebApplicationContext.doStart(WebApplicationContext.java:486)
jvm 1    |      at org.mortbay.util.Container.start(Container.java:72)
jvm 1    |      at org.codehaus.plexus.jetty.AbstractJettyServletContainer.startApplication(AbstractJettyServletContainer.java:209)
jvm 1    |      ... 35 more


I think REDBACK-129 might be causing this.."
MRM-677,oching,Maria Odea Ching,2008-03-04T20:16:50.723Z,2008-03-04T20:16:50.723Z,"After applying REDBACK-129 to redback 1.0, i now got this error during startup:

jvm 1    | INFO: ********** FATAL ERROR STARTING UP PLEXUS-WEBWORK INTEGRATION **********
jvm 1    | Looks like the Plexus listener was not configured for your web app! 
jvm 1    | You need to add the following to web.xml: 
jvm 1    | 
jvm 1    |     <listener>
jvm 1    |         <listener-class>org.codehaus.plexus.xwork.PlexusLifecycleListener</listener-class>
jvm 1    |     </listener>
jvm 1    | Mar 5, 2008 10:14:56 AM org.mortbay.jetty.servlet.ServletHandler$Context log
jvm 1    | INFO: Plexus container already in context.
jvm 1    | 2008-03-05 10:14:58,200 [WrapperSimpleAppMain] WARN  net.sf.ehcache.config.ConfigurationFactory  - No configuration found. Configuring ehcache from ehcache-failsafe.xml  found in the classpath: jar:file:/home/deng/Projects/archiva-1.0.x-022508/archiva-web/archiva-standalone/archiva-plexus-runtime/target/apache-archiva-1.0.2-SNAPSHOT/apps/archiva/webapp/WEB-INF/lib/ehcache-1.3.0.jar!/ehcache-failsafe.xml
jvm 1    | Mar 5, 2008 10:14:58 AM org.mortbay.jetty.servlet.ServletHandler$Context log
jvm 1    | INFO: Initializing org.codehaus.plexus.webdav.simple.SimpleDavServerComponent
jvm 1    | Mar 5, 2008 10:14:58 AM org.mortbay.jetty.servlet.ServletHandler$Context log
jvm 1    | INFO: Initializing org.codehaus.plexus.webdav.simple.SimpleDavServerComponent
jvm 1    | [ERROR] Error while deploying appserver archiva-plexus-application-1.0.2-SNAPSHOT.jar.
jvm 1    | org.codehaus.plexus.appserver.ApplicationServerException: Error in the app server lifecycle post-app-container-init-service-call phase.
jvm 1    |      at org.codehaus.plexus.appserver.application.deploy.DefaultApplicationDeployer.deployJar(DefaultApplicationDeployer.java:119)
jvm 1    |      at org.codehaus.plexus.appserver.application.deploy.DefaultApplicationDeployer.deploy(DefaultApplicationDeployer.java:88)
jvm 1    |      at org.codehaus.plexus.appserver.lifecycle.phase.ApplicationDeploymentPhase$1.onJarDiscovered(ApplicationDeploymentPhase.java:44)
jvm 1    |      at org.codehaus.plexus.appserver.supervisor.DefaultSupervisor.scanDirectory(DefaultSupervisor.java:100)
jvm 1    |      at org.codehaus.plexus.appserver.supervisor.DefaultSupervisor.scan(DefaultSupervisor.java:73)
jvm 1    |      at org.codehaus.plexus.appserver.lifecycle.phase.ApplicationDeploymentPhase.execute(ApplicationDeploymentPhase.java:58)
jvm 1    |      at org.codehaus.plexus.appserver.DefaultApplicationServer.start(DefaultApplicationServer.java:218)
jvm 1    |      at org.codehaus.plexus.personality.plexus.lifecycle.phase.StartPhase.execute(StartPhase.java:33)
jvm 1    |      at org.codehaus.plexus.lifecycle.AbstractLifecycleHandler.start(AbstractLifecycleHandler.java:128)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:142)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:132)
jvm 1    |      at org.codehaus.plexus.component.manager.ClassicSingletonComponentManager.getComponent(ClassicSingletonComponentManager.java:90)
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:147)
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:69)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:297)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:291)
jvm 1    |      at org.codehaus.plexus.appserver.PlexusApplicationHost.start(PlexusApplicationHost.java:155)
jvm 1    |      at org.codehaus.plexus.appserver.PlexusApplicationHost.start(PlexusApplicationHost.java:85)
jvm 1    |      at org.codehaus.plexus.appserver.PlexusApplicationHost.main(PlexusApplicationHost.java:289)
jvm 1    |      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
jvm 1    |      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
jvm 1    |      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
jvm 1    |      at java.lang.reflect.Method.invoke(Method.java:585)
jvm 1    |      at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
jvm 1    |      at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
jvm 1    |      at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:408)
jvm 1    |      at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:351)
jvm 1    |      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
jvm 1    |      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
jvm 1    |      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
jvm 1    |      at java.lang.reflect.Method.invoke(Method.java:585)
jvm 1    |      at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
jvm 1    |      at java.lang.Thread.run(Thread.java:595)
jvm 1    | Caused by: org.codehaus.plexus.appserver.application.deploy.lifecycle.AppDeploymentException: Error calling service in pre-app init phase.
jvm 1    |      at org.codehaus.plexus.appserver.application.deploy.lifecycle.phase.AfterAppStartServiceSetupPhase.execute(AfterAppStartServiceSetupPhase.java:32)
jvm 1    |      at org.codehaus.plexus.appserver.application.deploy.DefaultApplicationDeployer.deployJar(DefaultApplicationDeployer.java:107)
jvm 1    |      ... 32 more
jvm 1    | Caused by: org.codehaus.plexus.appserver.service.PlexusServiceException: Error while starting the context /archiva
jvm 1    |      at org.codehaus.plexus.service.jetty.JettyPlexusService.afterApplicationStart(JettyPlexusService.java:252)
jvm 1    |      at org.codehaus.plexus.appserver.application.deploy.lifecycle.phase.AfterAppStartServiceSetupPhase.execute(AfterAppStartServiceSetupPhase.java:28)
jvm 1    |      ... 33 more
jvm 1    | Caused by: org.codehaus.plexus.jetty.ServletContainerException: Error while starting the context /archiva
jvm 1    |      at org.codehaus.plexus.jetty.AbstractJettyServletContainer.startApplication(AbstractJettyServletContainer.java:213)
jvm 1    |      at org.codehaus.plexus.service.jetty.JettyPlexusService.afterApplicationStart(JettyPlexusService.java:248)
jvm 1    |      ... 34 more
jvm 1    | Caused by: java.lang.RuntimeException: org.codehaus.plexus.PlexusContainerException: Error initializaing container in org.codehaus.plexus.container.initialization.StartLoadOnStartComponentsPhase@17b40fe.
jvm 1    |      at org.codehaus.plexus.xwork.PlexusLifecycleListener.contextInitialized(PlexusLifecycleListener.java:105)
jvm 1    |      at org.mortbay.jetty.servlet.WebApplicationContext.doStart(WebApplicationContext.java:495)
jvm 1    |      at org.mortbay.util.Container.start(Container.java:72)
jvm 1    |      at org.codehaus.plexus.jetty.AbstractJettyServletContainer.startApplication(AbstractJettyServletContainer.java:209)
jvm 1    |      ... 35 more
jvm 1    | Caused by: org.codehaus.plexus.PlexusContainerException: Error initializaing container in org.codehaus.plexus.container.initialization.StartLoadOnStartComponentsPhase@17b40fe.
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.initializePhases(DefaultPlexusContainer.java:890)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.initialize(DefaultPlexusContainer.java:834)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.construct(DefaultPlexusContainer.java:811)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.<init>(DefaultPlexusContainer.java:222)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.<init>(DefaultPlexusContainer.java:260)
jvm 1    |      at org.codehaus.plexus.xwork.PlexusLifecycleListener.contextInitialized(PlexusLifecycleListener.java:76)
jvm 1    |      ... 38 more
jvm 1    | Caused by: org.codehaus.plexus.container.initialization.ContainerInitializationException: Error looking up load-on-start component.
jvm 1    |      at org.codehaus.plexus.container.initialization.StartLoadOnStartComponentsPhase.execute(StartLoadOnStartComponentsPhase.java:73)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.initializePhases(DefaultPlexusContainer.java:886)
jvm 1    |      ... 43 more
jvm 1    | Caused by: org.codehaus.plexus.component.repository.exception.ComponentLookupException: Unable to lookup component 'org.apache.maven.archiva.web.startup.ArchivaStartup', it could not be started
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:156)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:327)
jvm 1    |      at org.codehaus.plexus.container.initialization.StartLoadOnStartComponentsPhase.execute(StartLoadOnStartComponentsPhase.java:68)
jvm 1    |      ... 44 more
jvm 1    | Caused by: org.codehaus.plexus.component.repository.exception.ComponentLifecycleException: Error starting component
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:146)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:132)
jvm 1    |      at org.codehaus.plexus.component.manager.ClassicSingletonComponentManager.getComponent(ClassicSingletonComponentManager.java:90)
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:147)
jvm 1    |      ... 46 more
jvm 1    | Caused by: org.codehaus.plexus.personality.plexus.lifecycle.phase.PhaseExecutionException: Error composing component
jvm 1    |      at org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase.execute(CompositionPhase.java:53)
jvm 1    |      at org.codehaus.plexus.lifecycle.AbstractLifecycleHandler.start(AbstractLifecycleHandler.java:128)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:142)
jvm 1    |      ... 49 more
jvm 1    | Caused by: org.codehaus.plexus.component.composition.CompositionException: Composition failed of field securitySync in object of type org.apache.maven.archiva.web.startup.ArchivaStartup because the requirement ComponentRequirement{role='org.apache.maven.archiva.web.startup.SecuritySynchronization', roleHint='default', fieldName='securitySync'} was missing (lookup realm: plexus.xwork)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.findRequirement(AbstractComponentComposer.java:254)
jvm 1    |      at org.codehaus.plexus.component.composition.FieldComponentComposer.assignRequirementToField(FieldComponentComposer.java:66)
jvm 1    |      at org.codehaus.plexus.component.composition.FieldComponentComposer.assignRequirement(FieldComponentComposer.java:57)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.assembleComponent(AbstractComponentComposer.java:143)
jvm 1    |      at org.codehaus.plexus.component.composition.DefaultComponentComposerManager.assembleComponent(DefaultComponentComposerManager.java:72)
jvm 1    |      at org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase.execute(CompositionPhase.java:46)
jvm 1    |      ... 51 more
jvm 1    | Caused by: org.codehaus.plexus.component.repository.exception.ComponentLookupException: Unable to lookup component 'org.apache.maven.archiva.web.startup.SecuritySynchronization', it could not be started
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:156)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:333)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.findRequirement(AbstractComponentComposer.java:241)
jvm 1    |      ... 56 more
jvm 1    | Caused by: org.codehaus.plexus.component.repository.exception.ComponentLifecycleException: Error starting component
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:146)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:132)
jvm 1    |      at org.codehaus.plexus.component.manager.ClassicSingletonComponentManager.getComponent(ClassicSingletonComponentManager.java:90)
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:147)
jvm 1    |      ... 58 more
jvm 1    | Caused by: org.codehaus.plexus.personality.plexus.lifecycle.phase.PhaseExecutionException: Error composing component
jvm 1    |      at org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase.execute(CompositionPhase.java:53)
jvm 1    |      at org.codehaus.plexus.lifecycle.AbstractLifecycleHandler.start(AbstractLifecycleHandler.java:128)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:142)
jvm 1    |      ... 61 more
jvm 1    | Caused by: org.codehaus.plexus.component.composition.CompositionException: Composition failed of field roleManager in object of type org.apache.maven.archiva.web.startup.SecuritySynchronization because the requirement ComponentRequirement{role='org.codehaus.plexus.redback.role.RoleManager', roleHint='default', fieldName='roleManager'} was missing (lookup realm: plexus.xwork)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.findRequirement(AbstractComponentComposer.java:254)
jvm 1    |      at org.codehaus.plexus.component.composition.FieldComponentComposer.assignRequirementToField(FieldComponentComposer.java:66)
jvm 1    |      at org.codehaus.plexus.component.composition.FieldComponentComposer.assignRequirement(FieldComponentComposer.java:57)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.assembleComponent(AbstractComponentComposer.java:143)
jvm 1    |      at org.codehaus.plexus.component.composition.DefaultComponentComposerManager.assembleComponent(DefaultComponentComposerManager.java:72)
jvm 1    |      at org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase.execute(CompositionPhase.java:46)
jvm 1    |      ... 63 more
jvm 1    | Caused by: org.codehaus.plexus.component.repository.exception.ComponentLookupException: Unable to lookup component 'org.codehaus.plexus.redback.role.RoleManager', it could not be started
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:156)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:333)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.findRequirement(AbstractComponentComposer.java:241)
jvm 1    |      ... 68 more
jvm 1    | Caused by: org.codehaus.plexus.component.repository.exception.ComponentLifecycleException: Error starting component
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:146)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:132)
jvm 1    |      at org.codehaus.plexus.component.manager.ClassicSingletonComponentManager.getComponent(ClassicSingletonComponentManager.java:90)
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:147)
jvm 1    |      ... 70 more
jvm 1    | Caused by: org.codehaus.plexus.personality.plexus.lifecycle.phase.PhaseExecutionException: Error composing component
jvm 1    |      at org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase.execute(CompositionPhase.java:53)
jvm 1    |      at org.codehaus.plexus.lifecycle.AbstractLifecycleHandler.start(AbstractLifecycleHandler.java:128)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:142)
jvm 1    |      ... 73 more
jvm 1    | Caused by: org.codehaus.plexus.component.composition.CompositionException: Composition failed of field modelProcessor in object of type org.codehaus.plexus.redback.role.DefaultRoleManager because the requirement ComponentRequirement{role='org.codehaus.plexus.redback.role.processor.RoleModelProcessor', roleHint='default', fieldName='modelProcessor'} was missing (lookup realm: plexus.xwork)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.findRequirement(AbstractComponentComposer.java:254)
jvm 1    |      at org.codehaus.plexus.component.composition.FieldComponentComposer.assignRequirementToField(FieldComponentComposer.java:66)
jvm 1    |      at org.codehaus.plexus.component.composition.FieldComponentComposer.assignRequirement(FieldComponentComposer.java:57)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.assembleComponent(AbstractComponentComposer.java:143)
jvm 1    |      at org.codehaus.plexus.component.composition.DefaultComponentComposerManager.assembleComponent(DefaultComponentComposerManager.java:72)
jvm 1    |      at org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase.execute(CompositionPhase.java:46)
jvm 1    |      ... 75 more
jvm 1    | Caused by: org.codehaus.plexus.component.repository.exception.ComponentLookupException: Unable to lookup component 'org.codehaus.plexus.redback.role.processor.RoleModelProcessor', it could not be started
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:156)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:333)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.findRequirement(AbstractComponentComposer.java:241)
jvm 1    |      ... 80 more
jvm 1    | Caused by: org.codehaus.plexus.component.repository.exception.ComponentLifecycleException: Error starting component
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:146)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:132)
jvm 1    |      at org.codehaus.plexus.component.manager.ClassicSingletonComponentManager.getComponent(ClassicSingletonComponentManager.java:90)
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:147)
jvm 1    |      ... 82 more
jvm 1    | Caused by: org.codehaus.plexus.personality.plexus.lifecycle.phase.PhaseExecutionException: Error composing component
jvm 1    |      at org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase.execute(CompositionPhase.java:53)
jvm 1    |      at org.codehaus.plexus.lifecycle.AbstractLifecycleHandler.start(AbstractLifecycleHandler.java:128)
jvm 1    |      at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:142)
jvm 1    |      ... 85 more
jvm 1    | Caused by: org.codehaus.plexus.component.composition.CompositionException: Composition failed of field rbacManager in object of type org.codehaus.plexus.redback.role.processor.DefaultRoleModelProcessor because the requirement ComponentRequirement{role='RBACManager', roleHint='cached', fieldName='rbacManager'} was missing (lookup realm: plexus.xwork)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.findRequirement(AbstractComponentComposer.java:254)
jvm 1    |      at org.codehaus.plexus.component.composition.FieldComponentComposer.assignRequirementToField(FieldComponentComposer.java:66)
jvm 1    |      at org.codehaus.plexus.component.composition.FieldComponentComposer.assignRequirement(FieldComponentComposer.java:57)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.assembleComponent(AbstractComponentComposer.java:143)
jvm 1    |      at org.codehaus.plexus.component.composition.DefaultComponentComposerManager.assembleComponent(DefaultComponentComposerManager.java:72)
jvm 1    |      at org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase.execute(CompositionPhase.java:46)
jvm 1    |      ... 87 more
jvm 1    | Caused by: org.codehaus.plexus.component.repository.exception.ComponentLookupException: Component descriptor cannot be found in the component repository: RBACManager [cached] (lookup realm: ClassRealm[plexus.xwork, parent: null]).
jvm 1    |      at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:139)
jvm 1    |      at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:333)
jvm 1    |      at org.codehaus.plexus.component.composition.AbstractComponentComposer.findRequirement(AbstractComponentComposer.java:241)
jvm 1    |      ... 92 more
jvm 1    | [INFO] The appserver server has been initialized.
jvm 1    | [INFO] The appserver server has started.



Which I think would be fixed by REDBACK-125.."
MRM-677,oching,Maria Odea Ching,2008-03-04T20:53:18.096Z,2008-03-04T20:53:18.096Z,"After applying REDBACK-129 and REDBACK-125 in redback 1.0, Archiva was able to startup successfully. I'll test redback 1.0 with Continuum as well to verify it's behaviour. "
MRM-677,oching,Maria Odea Ching,2008-03-05T00:38:30.998Z,2008-03-05T00:38:30.998Z,"These problems also persist in Continuum, though it occurs not during startup but when you try to access the webapp after it was started."
MRM-677,oching,Maria Odea Ching,2008-03-05T00:39:19.95Z,2008-03-05T00:39:19.95Z,We might need to wait for the next Redback release for the fixes :-)
MRM-677,oching,Maria Odea Ching,2008-03-05T20:08:38.983Z,2008-03-05T20:08:38.983Z,Current status of this issue: waiting for the deployed redback-1.1-SNAPSHOT which contains the fixes to be synched to the codehaus snapshots repo
MRM-677,oching,Maria Odea Ching,2008-03-19T09:37:44.76Z,2008-03-19T09:37:44.76Z,"Fixed in archiva-trunk -r638845.

Changes made:
- upgraded redback to 1.1-SNAPSHOT
- updated the archiva redback models to the new redback model"
MRM-677,wsmoak,Wendy Smoak,2008-03-19T09:52:35.263Z,2008-03-19T09:52:35.263Z,"The issue summary says Redback 1.0, but the fix was to upgrade to 1.1-SNAPSHOT?"
MRM-677,oching,Maria Odea Ching,2008-03-20T05:38:25.584Z,2008-03-20T05:38:25.584Z,I'll update the issue summary as the released redback 1.0 is not usable when I upgraded Archiva to it. The errors I posted above are what I encountered in redback 1.0. The fixes for it are already in place in the deployed redback 1.1-SNAPSHOT.
MRM-677,romeitsupport,David Chapman,2008-03-27T16:30:19.27Z,2008-03-27T16:30:19.27Z,"Using the latest trunk which has redback 1.1-SNAPSHOT it still fails to startup with the following error message.  Is there an example application.xml I could use as I've followed the continuum instructions to produce this.

2008-03-27 16:25:14,392 [main] WARN  net.sf.ehcache.config.ConfigurationFactory  - No configuration found. Configuring ehcache from ehcache-failsafe.xml  found in the classpath: jar:file:/root/tmp/apache-archiva-1.1-SNAPSHOT/apps/archiva/webapp/WEB-INF/lib/ehcache-1.3.0.jar!/ehcache-failsafe.xml
2008-03-27 16:25:14,430 [main] INFO  org.springframework.web.context.ContextLoader  - Root WebApplicationContext: initialization completed in 2689 ms
2008-03-27 16:25:15,178 [main] INFO  roleManager  - loading redback-xwork-integration-core
2008-03-27 16:25:19,672 [main] INFO  roleManager  - loading Archiva
2008-03-27 16:25:21,041 [main] INFO  com.opensymphony.webwork.config.DefaultConfiguration  - Loading global messages from org.codehaus.plexus.redback.xwork.default
2008-03-27 16:25:21,043 [main] INFO  com.opensymphony.webwork.config.DefaultConfiguration  - Loading global messages from org.apache.maven.archiva.redback.custom
2008-03-27 16:25:21,058 [main] INFO  com.opensymphony.webwork.spring.WebWorkSpringObjectFactory  - Initializing WebWork-Spring integration...
2008-03-27 16:25:21,063 [main] INFO  com.opensymphony.xwork.spring.SpringObjectFactory  - Setting autowire strategy to name
2008-03-27 16:25:21,063 [main] INFO  com.opensymphony.webwork.spring.WebWorkSpringObjectFactory  - ... initialized WebWork-Spring integration successfully
[ERROR] Error while deploying appserver archiva-plexus-application-1.1-SNAPSHOT.jar.
org.codehaus.plexus.appserver.ApplicationServerException: Error in the app server lifecycle post-app-container-init-service-call phase.
        at org.codehaus.plexus.appserver.application.deploy.DefaultApplicationDeployer.deployJar(DefaultApplicationDeployer.java:119)
        at org.codehaus.plexus.appserver.application.deploy.DefaultApplicationDeployer.deploy(DefaultApplicationDeployer.java:88)
        at org.codehaus.plexus.appserver.lifecycle.phase.ApplicationDeploymentPhase$1.onJarDiscovered(ApplicationDeploymentPhase.java:44)
        at org.codehaus.plexus.appserver.supervisor.DefaultSupervisor.scanDirectory(DefaultSupervisor.java:100)
        at org.codehaus.plexus.appserver.supervisor.DefaultSupervisor.scan(DefaultSupervisor.java:73)
        at org.codehaus.plexus.appserver.lifecycle.phase.ApplicationDeploymentPhase.execute(ApplicationDeploymentPhase.java:58)
        at org.codehaus.plexus.appserver.DefaultApplicationServer.start(DefaultApplicationServer.java:218)
        at org.codehaus.plexus.personality.plexus.lifecycle.phase.StartPhase.execute(StartPhase.java:33)
        at org.codehaus.plexus.lifecycle.AbstractLifecycleHandler.start(AbstractLifecycleHandler.java:128)
        at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:142)
        at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:132)
        at org.codehaus.plexus.component.manager.ClassicSingletonComponentManager.getComponent(ClassicSingletonComponentManager.java:90)
        at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:147)
        at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:69)
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:297)
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:291)
        at org.codehaus.plexus.appserver.PlexusApplicationHost.start(PlexusApplicationHost.java:155)
        at org.codehaus.plexus.appserver.PlexusApplicationHost.start(PlexusApplicationHost.java:85)
        at org.codehaus.plexus.appserver.PlexusApplicationHost.main(PlexusApplicationHost.java:289)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:408)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:351)
Caused by: org.codehaus.plexus.appserver.application.deploy.lifecycle.AppDeploymentException: Error calling service in pre-app init phase.
        at org.codehaus.plexus.appserver.application.deploy.lifecycle.phase.AfterAppStartServiceSetupPhase.execute(AfterAppStartServiceSetupPhase.java:32)
        at org.codehaus.plexus.appserver.application.deploy.DefaultApplicationDeployer.deployJar(DefaultApplicationDeployer.java:107)
        ... 26 more
Caused by: org.codehaus.plexus.appserver.service.PlexusServiceException: Error while starting the context /archiva
        at org.codehaus.plexus.service.jetty.JettyPlexusService.afterApplicationStart(JettyPlexusService.java:252)
        at org.codehaus.plexus.appserver.application.deploy.lifecycle.phase.AfterAppStartServiceSetupPhase.execute(AfterAppStartServiceSetupPhase.java:28)
        ... 27 more
Caused by: org.codehaus.plexus.jetty.ServletContainerException: Error while starting the context /archiva
        at org.codehaus.plexus.jetty.AbstractJettyServletContainer.startApplication(AbstractJettyServletContainer.java:213)
        at org.codehaus.plexus.service.jetty.JettyPlexusService.afterApplicationStart(JettyPlexusService.java:248)
        ... 28 more
Caused by: org.mortbay.util.MultiException[org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securitySynchronization': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'environmentCheck#guest-user-check': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securitySystem': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'authorizer#rbac': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userManager#configurable': Post-processing of the FactoryBean's object failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userManager#ldap': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ldapConnectionFactory#configurable': Post-processing of the FactoryBean's object failed; nested exception is java.lang.NullPointerException, org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securitySystem': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'authorizer#rbac': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userManager#configurable': Post-processing of the FactoryBean's object failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userManager#ldap': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ldapConnectionFactory#configurable': Post-processing of the FactoryBean's object failed; nested exception is java.lang.NullPointerException]
        at org.mortbay.jetty.servlet.WebApplicationContext.doStart(WebApplicationContext.java:486)
        at org.mortbay.util.Container.start(Container.java:72)
        at org.codehaus.plexus.jetty.AbstractJettyServletContainer.startApplication(AbstractJettyServletContainer.java:209)
        ... 29 more
[INFO] The appserver server has been initialized.
[INFO] The appserver server has started.
"
MRM-677,oching,Maria Odea Ching,2008-04-13T22:05:49.553Z,2008-04-13T22:05:49.553Z,Upgraded redback to 1.0.1 -r647651.
MRM-644,lptr,Lrnt Pintr,2008-02-20T09:48:45.117Z,2008-02-20T09:48:45.117Z,"I've ran into the same problem with org.jvnet.fix1600:fix1600.

I have two remote repositories that contain this plugin:
http://www.jfrog.org/artifactory/plugins-releases
and
http://download.java.net/maven/2/

I also haven't specified a version number for the plugin, so Maven needs the maven-metadata.xml to find out the proper version. This it tries to do, and downloads /archiva/repository/myrepo/org/jvnet/fix1600/fix1600/maven-metadata.xml from Archiva.

In turn, Archiva seems to download the maven-metadata.xml from both sources, and save them in two files, namely:

{{maven-metadata-jfrog-plugins.xml}}
{{maven-metadata-maven2-repository.dev.java.net.xml}}

They are identical and both contain the proper information:

{quote}
<?xml version=""1.0"" encoding=""UTF-8""?><metadata>
  <groupId>org.jvnet.fix1600</groupId>
  <artifactId>fix1600</artifactId>
  <version>1.0-SNAPSHOT</version>
  <versioning>
    <latest>1.5</latest>
    <release>1.5</release>
    <versions>
      <version>1.0-SNAPSHOT</version>
      <version>1.1</version>
      <version>1.2</version>
      <version>1.3</version>
      <version>1.4</version>
      <version>1.5</version>
    </versions>
    <lastUpdated>20071221200758</lastUpdated>
  </versioning>
</metadata> 
{quote}

However, Archiva sends back something else. It creates a file called {{maven-metadata.xml}} (without any suffix) with the following reduced contents:

{quote}
<?xml version=""1.0"" encoding=""UTF-8""?>

<metadata>
  <groupId>org.jvnet</groupId>
  <artifactId>fix1600</artifactId>
  <version>fix1600</version>
</metadata> 
{quote}

This is the content that gets back to my Maven build. As it lacks any versioning information, Maven is unable to decide which version to use and fails with:

{quote}
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] The plugin 'org.jvnet.fix1600:fix1600' does not exist or no valid version could be found
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: The plugin 'org.jvnet.fix1600:fix1600' does not exist or no valid version could be found
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLifecycleExecutor.java:1286)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.bindPluginToLifecycle(DefaultLifecycleExecutor.java:1221)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.constructLifecycleMappings(DefaultLifecycleExecutor.java:987)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:458)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:311)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:278)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:143)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:333)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:126)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:282)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.version.PluginVersionNotFoundException: The plugin 'org.jvnet.fix1600:fix1600' does not exist or no valid version could be found
        at org.apache.maven.plugin.version.DefaultPluginVersionManager.resolvePluginVersion(DefaultPluginVersionManager.java:229)
        at org.apache.maven.plugin.version.DefaultPluginVersionManager.resolvePluginVersion(DefaultPluginVersionManager.java:91)
        at org.apache.maven.plugin.DefaultPluginManager.verifyPlugin(DefaultPluginManager.java:167)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLifecycleExecutor.java:1257)
        ... 17 more
{quote}"
MRM-644,jtuchscherer,Johannes,2008-09-19T18:26:33.498Z,2008-09-19T18:26:33.498Z,"I do hit the same issue using Archiva 1.1.2 with the org.codehaus.mojo jab2-maven-plugin.

The maven-metadata xml files for the remote repositories look all good, but the maven-metadata-central.xml looks like the one of Lorant:

<metadata>
 <groupId>org.codehaus</groupId>
 <artifactId>mojo</artifactId>
 <version>jab2-maven-plugin</version>
 </metadata> 

I always need to clean this up by hand to make it work."
MRM-644,chamerling,Christophe Hamerling,2008-10-17T03:59:33.997Z,2008-10-17T03:59:33.997Z,Same for me on jaxb2-maven-plugin. Is there any plan to fix it ?
MRM-644,brettporter,Brett Porter,2010-02-23T02:44:20.997Z,2010-02-23T02:44:20.997Z,for testing
MRM-644,brettporter,Brett Porter,2010-02-23T04:39:22.58Z,2010-02-23T04:39:22.58Z,"works for me on trunk, getting 0.7.2. Maybe they fixed their metadata"
MRM-633,oching,Maria Odea Ching,2008-01-08T03:09:07.496Z,2008-01-08T03:09:07.496Z,"I've identified a couple of logging points which probably needs to be changed:
- revert the default log level for the repo scanner from debug to info. this could easily be switched to debug for debugging purposes, anyway.
- remove this line ""logger.debug( ""Sending to consumer: "" + consumer.getId() );"" from ConsumerProcessFileClosure since the consumer problem is logged when an error is encountered during processing.
"
MRM-633,oching,Maria Odea Ching,2008-01-09T01:39:15.918Z,2008-01-09T01:39:15.918Z,"I'll also change the log level from debug to info of this log in ProjectModelToDatabaseConsumer: 
""Adding project model to database - "" + Keys.toKey( model )"
MRM-633,oching,Maria Odea Ching,2008-01-10T03:44:25.018Z,2008-01-10T03:44:25.018Z,"-r610730 - committed the specified changes above except i no longer removed this line ""logger.debug( ""Sending to consumer: "" + consumer.getId() );"" from ConsumerProcessFileClosure because the default logging level for the repo scanner was set to INFO anyway. 

The problem with the duplicated logs in archiva.log and wrapper.log still needs to be done. "
MRM-633,oching,Maria Odea Ching,2008-01-11T03:40:37.236Z,2008-01-11T03:40:37.236Z,"Created a separate issues for the duplicated logs in archiva.log and wrapper.log.

http://jira.codehaus.org/browse/MRM-655"
MRM-676,mwood,mwood,2011-08-15T10:58:54.885Z,2011-08-15T10:58:54.885Z,Maven handles this in a different way:  http://docs.codehaus.org/display/MAVEN/Repository+-+SNAPSHOT+Handling
MRM-676,mandrew,Moiseenko Andrey,2012-05-24T02:50:03.02Z,2012-05-24T02:50:03.02Z,This feature will simplify repository usage with custom automation scripts or tools like Chef. It will allow to generate snapshot download URL easily without need of analyzing POM
MRM-676,olamy,Olivier Lamy (*$^%`),2012-07-30T09:27:54.857Z,2012-07-30T09:27:54.857Z,provide a rest service to do that with query parameter v 
MRM-676,olamy,Olivier Lamy (*$^%`),2013-12-08T20:47:52.838Z,2013-12-08T20:47:52.838Z,"now archiva calculate what is the last -SNAPSHOT and return it.

"
MRM-624,dfabulich,Dan Fabulich,2008-02-27T14:47:59.662Z,2008-02-27T14:47:59.662Z,Let the record show that I see this bug on my machine also.
MRM-624,brettporter,Brett Porter,2008-03-28T10:39:16.044Z,2008-03-28T10:39:16.044Z,"I'm closing this as fixed as it works for me with the new stuff in Archiva 1.1 on Vista.

Please reopen if you experience this problem with that (if you are able to test it in advance, that'd be perfect :)"
MRM-616,angelcervera,Angel Cervera Claudio,2008-01-08T18:06:47.32Z,2008-01-08T18:06:47.32Z,"idem. in this enviroment:
Linux (Gentoo) x86 2.6.19-gentoo-r5
J2RE 1.5.0 IBM J9 2.3 Linux x86-32 j9vmxi3223-20070426 (JIT enabled) J9VM - 20070420_12448_lHdSMR JIT - 20070419_1806_r8 GC - 200704_19"
MRM-616,angelcervera,Angel Cervera Claudio,2008-01-10T02:10:04.118Z,2008-01-10T02:10:04.118Z,This BUG (MRM-616) seem related to this redback BUG: http://jira.codehaus.org/browse/REDBACK-122
MRM-681,jahlborn,james,2008-02-18T15:59:19.83Z,2008-02-18T15:59:19.83Z,"I added some comments to MRM-632 which are probably relevant here, namely that the ""test"" in ""test-sources"" is matched in VersionUtil.isVersion().  i think this is messing up DefaultPathParser.toArtifactReference(), line ~128, because parser.nextVersion() is including the ""-test"" at the end of the version string."
MRM-681,brettporter,Brett Porter,2008-02-21T21:36:07.535Z,2008-02-21T21:36:07.535Z,"this also affects versions that look like multiple versions:

1.0-abc-1.1-20080222.050607-9

"
MRM-605,brettporter,Brett Porter,2008-03-25T08:56:59.58Z,2008-03-25T08:56:59.58Z,seems fine in 1.0.1
MRM-605,oching,Maria Odea Ching,2008-04-04T00:05:51.122Z,2008-04-04T00:05:51.122Z,Test fails again in 1.0.2 sources release candidate.
MRM-605,brettporter,Brett Porter,2008-04-04T00:08:26.018Z,2008-04-04T00:08:26.018Z,"I suspect we should disable this test, it seems a bit flaky."
MRM-605,brettporter,Brett Porter,2008-07-01T20:11:32.471Z,2008-07-01T20:11:32.471Z,made sure to distribute the required CVS directories used for testing
MRM-692,oliveros,Drio Oliveros,2008-02-13T07:32:03.208Z,2008-02-13T07:32:03.208Z,"I've made some code changes and it seems the issue is fixed now.
Please have a look at the patch file and let me know your comments.

FYI one of the patch files (archiva-mrm-692-over-mrm-622.patch) includes patch information from another issue (MRM-622).
"
MRM-692,oliveros,Drio Oliveros,2008-02-14T04:28:29.938Z,2008-02-14T04:28:29.938Z,Please ignore the patch file named as _archiva-mrm-692-over-mrm-622.patch_. The other one should be enough.
MRM-692,oching,Maria Odea Ching,2008-02-17T04:41:56.048Z,2008-02-17T04:41:56.048Z,"Thanks for the patch Dario :) 
Applied this in archiva-trunk -r628473.
"
MRM-653,wsmoak,Wendy Smoak,2008-01-08T21:33:20.646Z,2008-01-08T21:33:20.646Z,"From WAGON-96, it looks like this happens on deploy.  Can you please list the steps to reproduce this?"
MRM-653,jameswdumay,James William Dumay,2008-05-20T07:24:07.061Z,2008-05-20T07:24:07.061Z,"Issue has been fixed in Wagon. Its also worth noting that in the Jackrabbit based DavServlet in 1.1, exception handling is done correctly."
MRM-663,aheritier,Arnaud HERITIER,2008-03-13T17:50:28.242Z,2008-03-13T17:50:28.242Z,"I have a similar error :
{code}
The following resource does not exist: http://xxx.com/repository//XXX/apps/xxx2Rabbit-2.3.jar

org.apache.maven.archiva.repository.layout.LayoutException: Invalid path to Artifact: mismatch on extension [jar] and layout specified type [apps] (which maps to extension: [app]) on path [XXX/apps/xxx2Rabbit-2.3.jar]
{code}"
MRM-663,brettporter,Brett Porter,2008-03-25T05:13:07.359Z,2008-03-25T05:13:07.359Z,"the EJB bug is fixed (linked), but to work for ""apps"" we would need to make the type list configurable in ArtifactExtensionMapping

moving to 1.1"
MRM-663,jameswdumay,James William Dumay,2008-05-08T01:42:19.52Z,2008-05-08T01:42:19.52Z,Moving to 1.1.x
MRM-640,brettporter,Brett Porter,2010-01-18T13:27:31.374Z,2010-01-18T13:27:31.374Z,This particularly affects pages in the main website since there is no left navigation - there is no way to get back to / as the logo also doesn't work.
MRM-640,olamy,Olivier Lamy (*$^%`),2012-09-26T08:14:10.044Z,2012-09-26T08:14:10.044Z,fixed.
MRM-617,oliveros,Drio Oliveros,2008-02-14T08:02:08.145Z,2008-02-14T08:02:08.145Z,"Please look what I've found at https://issues.apache.org/struts/browse/WW-1937
"
MRM-617,oliveros,Drio Oliveros,2008-02-14T08:10:56.267Z,2008-02-14T08:10:56.267Z,"As a workaround I'd suggest modifying the _GenerateReportAction-validation.xml_ located at _<archiva.home>/apps/archiva/webapp/WEB-INF/classes/org/apache/maven/archiva/web/action/reports_ by replacing 5000 with 500. In this way you will be able to generate report without having to disable javascript validation.
I've made a simple test and it worked fine."
MRM-617,twdev,Thomas Winkler,2008-03-18T02:06:52.197Z,2008-03-18T02:06:52.197Z,"I have a similar problem on the report page.

The dot within the JavaScript gets interpreted like ""x > 5"" or ""x < 10"".

The generated JavaScript seems to be dependend on the language settings of the used JVM.  

Possible workaround:
Setting the JVM language propertie to en (e.g. Tomcat startup parameter -Duser.language=en) is a possible workaround. This results in generating a script, using commas, which seems to be interpreted correctly by JavaScript ( parseInt(file.value) > 5,000 )."
MRM-617,brettporter,Brett Porter,2008-03-25T08:50:27.782Z,2008-03-25T08:50:27.782Z,fixed alongside MRM-598
MRM-683,ben.lidgey,Ben Lidgey,2008-04-17T02:29:32.134Z,2008-04-17T02:29:32.134Z,"I have upgraded to Archiva 1.0.2 running on Tomcat 5.5.17 and still the footer shows

{code:xml}
<div id=""footer"">
  <div class=""xleft"">
    Apache Archiva <Unknown Version>
  </div>
  <div class=""xright"">
    Copyright &#169; 2005-2008 The Apache Software Foundation
  </div>
{code}

while the looking in the pom.properties as follows:

{code}
[devadmin@dev1 apache-tomcat-5.5.17]$ cd webapps/archiva/META-INF/maven/org.apache.maven.archiva/archiva-webapp/
[devadmin@dev1 archiva-webapp]$ more pom.properties
#Generated by Maven
#Fri Apr 04 03:10:11 EST 2008
version=1.0.2
groupId=org.apache.maven.archiva
artifactId=archiva-webapp
[devadmin@dev1 archiva-webapp]$
{code}"
MRM-683,brettporter,Brett Porter,2008-05-06T00:55:15.492Z,2008-05-06T00:55:15.492Z,confirmed this problem inside Tomcat
MRM-683,jameswdumay,James William Dumay,2008-05-08T01:42:20.333Z,2008-05-08T01:42:20.333Z,Moving to 1.1.x
MRM-606,oching,Maria Odea Ching,2008-01-17T01:36:06.271Z,2008-01-17T01:36:06.271Z,"The maven-assembly-plugin has already been locked down to 2.1 as seen in archiva-plexus-runtime pom, but issue still persists in release candidate for 1.0.1. Will move this issue to 1.1 for further investigation."
MRM-651,oching,Maria Odea Ching,2008-02-13T01:52:20.248Z,2008-02-13T01:52:20.248Z,Patch applied -r627299. Thanks Stephen! :)
MRM-645,wsmoak,Wendy Smoak,2007-12-29T20:55:59.227Z,2007-12-29T20:55:59.227Z,"I re-published the site, and http://maven.apache.org/archiva/get-involved.html looks fine now.   Leaving this open for changes to the menus."
MRM-645,brettporter,Brett Porter,2007-12-29T21:09:29.339Z,2007-12-29T21:09:29.339Z,still need to write the content too
MRM-645,danielharvey,Daniel Harvey,2007-12-29T21:15:08.233Z,2007-12-29T21:15:08.233Z,"Thanks, the syntax errors are fixed. Quick question however: Shouldn't the ""Getting Involved"" page have links to JIRA, Wiki, mailing lists, subversion and the like?"
MRM-645,wsmoak,Wendy Smoak,2007-12-29T23:32:27.947Z,2007-12-29T23:32:27.947Z,"Of course it should.  Since you've already tracked down some of the links, perhaps you'd like to patch the docs?  Here's how to check out the source:

   svn co http://svn.apache.org/repos/asf/maven/archiva/site/ archiva-site

Just ask on the Archiva dev list if you need help. :)  http://maven.apache.org/archiva/mail-lists.html

(If it complains that it can't find the parent pom, just change the parent version to '1' so it will build locally.  I recently moved to 2-SNAPSHOT to pick up a new mailing list.)"
MRM-645,danielharvey,Daniel Harvey,2007-12-29T23:37:54.953Z,2007-12-29T23:37:54.953Z,Will do.
MRM-645,danielharvey,Daniel Harvey,2008-01-04T23:27:45.667Z,2008-01-04T23:27:45.667Z,"Hi Wendy/Brett,

Please find attached the following patches:
- {{MRM-645-archiva-site.patch}}
- {{MRM-645-archiva-docs.patch}}

Firstly, an observation: The _""Get involved""_ and _""Follow the latest""_ pages are the only pages (apart from the front page) served out of the ""site"" module as opposed to the ""archiva-docs"" module. The implication of this is that they currently do not have the LHS menu (no site.xml). As a result, my patch proposes to shift the _""Get involved""_ page to the archiva-docs module to gain the benefit of a consistent menu. Thoughts? Should the _""Follow the latest""_ page be shifted as well?

So, the attached patches make the following changes:
- NEW: Moves the ""Get Involved"" page from the site module to the archiva-docs module.
- UPDATED: Fills out the ""Get involved"" {{src/site/apt/get-involved.apt}} page with Archiva specific information and links back to the appropriate pages within the Maven project for more information (why write it twice:-)).
- NEW: Adds the ""Project Information"" into the archiva-docs module including a link within {{site.xml}}.

Current issues:
# The mailing lists picked up by the project-info-reports plugin appears incomplete to me compared to the live site (http://maven.apache.org/archiva/mail-lists.html) - it appears to be missing the general Maven lists. This may be simply due to the fact that I only checked out the site and archiva-docs modules. Can you please confirm?
# The SCM URLs are specific to the archiva-docs module and not general to the entire Archiva project. How should this be addressed?

Notes:
# In order to link the site and archiva modules in the published ""site"", I simply ran ""mvn site"" in the respective folders and applied the following soft link   
{code}
cd archiva-site
mkdir target/site/docs
ln -s ../../../../archiva-docs/target/site target/site/docs/1.0
{code}
This appears to be sufficient for me to test the publish site. OK?
# I checked out http://svn.apache.org/repos/asf/maven/archiva/parent to build to sites and had templating problems using version 2.0-beta-6 of the maven-site-plugin. For my testing I dropped this back to version 2.0-beta-5. FYI.

Let me know how you get on testing this patch and let me know if any changes are required.

Cheers,
Daniel.
"
MRM-645,wsmoak,Wendy Smoak,2008-01-08T22:28:44.484Z,2008-01-08T22:28:44.484Z,"> As a result, my patch proposes to shift the ""Get involved"" page to the archiva-docs module

The 'docs' module is intended for version-specific information.  I think 'getting involved' is a generic topic and belongs in the top-level 'site' module."
MRM-645,danielharvey,Daniel Harvey,2008-01-08T22:44:53.975Z,2008-01-08T22:44:53.975Z,"OK. 

Can you please give me a pointer with the site plugin as to how I generate pages within the top level site module and the docs module which share the same left-hand menu?

Or do need to ""duplicate"" the site.xml and provide manual links in order to make the left-hand menus look/behave the same?"
MRM-645,danielharvey,Daniel Harvey,2008-01-11T22:17:57.874Z,2008-01-11T22:17:57.874Z,"Wendy/Brett,

OK. I got a bit confused for a while regarding the ""disappearance"" of the left hand menu... until I worked out that you've hidden it using CSS in the site module's site.css file:

{code}
#leftColumn {
  display: none !important
}
{code}

So here is where I'm up to:
# I can easily keep the ""Get Involved"" and ""Project Information"" pages in the site module as per Wendy's comment. 
# However, I think that removing the left hand menu from these pages is *very* unhelpful and confusing (i.e. the site.css modification above) as well as inconsistent with all of the pages in the archiva-docs module.
# So, how do I hide the menu from the front page (index) and show it for the other pages in the site module? I see two options given the standard Maven site build:
## Add some JavaScript to the front page (index) to add the ""display: none"" CSS at page render time; or
## Move the front page into a module of its own under the site module.

Obviously, I can leave the menu hidden for all ""site"" pages but I'm voting against this. I'm also not completely happy with either of my suggestions above. What do you think?

Please let me know your thoughts and I will adjust the patch in time for the 1.0.1 release..."
MRM-645,wsmoak,Wendy Smoak,2008-01-11T23:05:08.185Z,2008-01-11T23:05:08.185Z,"The menu was intentionally removed from the top-level site.  Brett designed it, and it was discussed on the dev list.  Here's the first thread, you can search the list archives for others:

 * http://www.nabble.com/Site-and-parent-changes-td13688830.html

The 'docs' module is separate and there's no need for it to match the top level site.  Since there will be a versioned 'docs' module for each public release, they may not even match each other as things progress and changes are made.

I think all we need to do for this issue is add content to the 'getting involved' page-- text and links to pages such as mail-lists.html that are generated by the project info reports plugin.

Then some attention needs to be paid to the site navigation, since you can't get back to the home page from the other pages within the top level site.  Let's take that up on the dev list or open a separate issue.

BTW, I solved the mystery of why the mail-lists.html page wasn't getting generated.  The pom had mailing-lists rather than mailing-list.  Intuitive, isn't it? :)
"
MRM-645,wsmoak,Wendy Smoak,2008-01-11T23:20:57.196Z,2008-01-11T23:20:57.196Z,"Fixed in r611367.  (Unsetting fix version since the top-level site isn't included in the release.)

Thanks for the patch!"
MRM-645,danielharvey,Daniel Harvey,2008-01-11T23:22:08.585Z,2008-01-11T23:22:08.585Z,"Thanks for the info. I will finalise the patch later today (need to go out for a while now). I agree that we fix the content now and sort out the navigation later.

PS Nice one on the ""mailing-list<s>"". Might need to JIRA that one as there is no error message and the logging says ""[INFO] Generate ""Mailing Lists"" report."" (with the ""s""). Real intuitive :-)"
MRM-645,wsmoak,Wendy Smoak,2008-01-11T23:25:37.267Z,2008-01-11T23:25:37.267Z,"No need to re-do the patch.  I took the getting-involved page content from one of the patches already attached here, and adjusted the links.  Check the site in an hour or so and it should be there."
MRM-645,danielharvey,Daniel Harvey,2008-01-12T04:46:33.013Z,2008-01-12T04:46:33.013Z,Minor mistake in the two links to the Archiva user/admin guides when the patch was adjusted from the docs to the site module. Will attach patch.
MRM-645,danielharvey,Daniel Harvey,2008-01-12T04:47:43.493Z,2008-01-12T04:47:43.493Z,Fixes error with links to Archiva user/admin guides.
MRM-645,wsmoak,Wendy Smoak,2008-01-13T15:40:59.59Z,2008-01-13T15:40:59.59Z,Thanks again.  I also changed the links to /docs/current so they don't have to be edited every time.
MRM-673,brettporter,Brett Porter,2008-02-18T15:10:19.865Z,2008-02-18T15:10:19.865Z,"t's worth noting clicking the box or the title is the same effect as ""all downloads"", so the link could be removed altogether.

I would like to keep the default view to capture as much of the 5 boxes as possible - can you suggest a beter way to get the convient download box to appear? Maybe a link to give a small ""pop up""?"
MRM-673,dfabulich,Dan Fabulich,2008-02-18T16:01:24.758Z,2008-02-18T16:01:24.758Z,"1) I didn't realize that you could click on the title, because it's not underlined.  We could underline the title.

2) There's actually 6 boxes, not 5, and that's two boxes too many.  The Rails site has four boxes, arranged horizontally: ""Get Excited"" ""Get Started"" ""Get Better"" ""Get Involved""

I don't think we have to copy that slavishly, but ""3 Take it for a test drive"" seems unnecessarily squeezed in between ""Download"" and ""Learn More"".  Learn More could just as easily take you to the first page of the documentation, and that could be the quick start tutorial.

""6 Follow the Latest"" should be dropped from the homepage.  It sounds like it's a link to an RSS feed or something, but in fact it's just a link to one blog post comparing Archiva with Artifactory, Proximity and DSMP.  When it becomes more mature, it should become an RSS feed, and it should be moved under ""5 Get Involved""."
MRM-673,brettporter,Brett Porter,2008-02-18T16:09:49.684Z,2008-02-18T16:09:49.684Z,"merging test drive and learn more sounds fine, and I agree with the last part.

Commit away :)"
MRM-673,brettporter,Brett Porter,2008-11-18T18:49:58.603Z,2008-11-18T18:49:58.603Z,"done all suggested things except dropping the last box. We need to find that another home, or expand on the content"
MRM-680,wsmoak,Wendy Smoak,2008-03-19T10:23:31.424Z,2008-03-19T10:23:31.424Z,"Editing the summary to say MySQL 4.1, as we're successfully using it with MySQL 5.0."
MRM-680,deki,Dennis Kieselhorst,2008-07-21T01:53:55.74Z,2008-07-21T01:53:55.74Z,"Updated stacktrace for Archiva 1.1:

2008-07-21 08:50:51,891 [WrapperSimpleAppMain] ERROR JPOX.RDBMS  - Error thrown executing CREATE TABLE `SECURITY_OPERATIONS`
(
    `NAME` VARCHAR(256) BINARY NOT NULL,
    `DESCRIPTION` VARCHAR(256) BINARY NULL,
    `PERMANENT` BIT NOT NULL,
    `RESOURCE_REQUIRED` BIT NOT NULL,
    PRIMARY KEY (`NAME`)
) TYPE=INNODB : BLOB/TEXT column 'NAME' used in key specification without a key length
com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: BLOB/TEXT column 'NAME' used in key specification without a key length
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1026)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3491)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3423)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2536)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2465)
        at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:734)
        at org.jpox.store.rdbms.table.AbstractTable.executeDdlStatement(AbstractTable.java:614)
        at org.jpox.store.rdbms.table.AbstractTable.executeDdlStatementList(AbstractTable.java:570)
        at org.jpox.store.rdbms.table.AbstractTable.create(AbstractTable.java:297)
        at org.jpox.store.rdbms.table.AbstractTable.exists(AbstractTable.java:341)
        at org.jpox.store.rdbms.RDBMSManager$ClassAdder.performTablesValidation(RDBMSManager.java:3065)
        at org.jpox.store.rdbms.RDBMSManager$ClassAdder.addClassTablesAndValidate(RDBMSManager.java:3326)
        at org.jpox.store.rdbms.RDBMSManager$ClassAdder.run(RDBMSManager.java:2567)
        at org.jpox.store.rdbms.RDBMSManager$MgmtTransaction.execute(RDBMSManager.java:2419)
        at org.jpox.store.rdbms.RDBMSManager.addClasses(RDBMSManager.java:824)
        at org.jpox.store.rdbms.RDBMSManager.addClass(RDBMSManager.java:838)
        at org.jpox.store.StoreManager.getDatastoreClass(StoreManager.java:1218)
        at org.jpox.store.rdbms.RDBMSManager.getExtent(RDBMSManager.java:1357)
        at org.jpox.AbstractPersistenceManager.getExtent(AbstractPersistenceManager.java:2328)
        at org.codehaus.plexus.redback.rbac.jdo.JdoTool.getAllObjects(JdoTool.java:205)
        at org.codehaus.plexus.redback.rbac.jdo.JdoTool.getAllObjects(JdoTool.java:188)
        at org.codehaus.plexus.redback.rbac.jdo.JdoTool.triggerInit(JdoTool.java:131)
        at org.codehaus.plexus.redback.rbac.jdo.JdoTool.getPersistenceManager(JdoTool.java:118)
        at org.codehaus.plexus.redback.rbac.jdo.JdoTool.getObjectById(JdoTool.java:292)
        at org.codehaus.plexus.redback.rbac.jdo.JdoTool.objectExistsById(JdoTool.java:340)
        at org.codehaus.plexus.redback.rbac.jdo.JdoRbacManager.resourceExists(JdoRbacManager.java:467)
        at org.codehaus.plexus.redback.rbac.cached.CachedRbacManager.resourceExists(CachedRbacManager.java:622)
        at org.codehaus.plexus.redback.role.processor.DefaultRoleModelProcessor.processResources(DefaultRoleModelProcessor.java:75)
        at org.codehaus.plexus.redback.role.processor.DefaultRoleModelProcessor.process(DefaultRoleModelProcessor.java:56)
        at org.codehaus.plexus.redback.role.DefaultRoleManager.loadApplication(DefaultRoleManager.java:178)
        at org.codehaus.plexus.redback.role.DefaultRoleManager.loadRoleModel(DefaultRoleManager.java:120)
        at org.codehaus.plexus.redback.role.DefaultRoleManager.initialize(DefaultRoleManager.java:427)
        at org.codehaus.plexus.spring.PlexusLifecycleBeanPostProcessor.postProcessAfterInitialization(PlexusLifecycleBeanPostProcessor.java:217)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowire
CapableBeanFactory.java:331)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.postProcessObjectFromFactoryBean(AbstractAutowireCapableBea
nFactory.java:1340)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:137)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:114)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1269)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:256)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.resolveRequirement(PlexusComponentFactoryBean.java:246)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.createInstance(PlexusComponentFactoryBean.java:163)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.getObject(PlexusComponentFactoryBean.java:108)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:119)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:114)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1269)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:256)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
        at org.codehaus.plexus.spring.PlexusToSpringUtils.lookupMap(PlexusToSpringUtils.java:148)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.resolveRequirement(PlexusComponentFactoryBean.java:238)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.createInstance(PlexusComponentFactoryBean.java:163)
        at org.codehaus.plexus.spring.PlexusComponentFactoryBean.getObject(PlexusComponentFactoryBean.java:108)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport$1.run(FactoryBeanRegistrySupport.java:119)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:114)
        at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1269)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:256)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:888)
        at org.apache.maven.archiva.web.startup.ArchivaStartup.contextInitialized(ArchivaStartup.java:47)
        at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:539)
        at org.mortbay.jetty.servlet.Context.startContext(Context.java:135)
        at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1216)
        at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:509)
        at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:447)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
        at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)
        at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
        at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
        at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:117)
        at org.mortbay.jetty.Server.doStart(Server.java:222)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
        at org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:977)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.mortbay.start.Main.invokeMain(Main.java:194)
        at org.mortbay.start.Main.start(Main.java:509)
        at org.mortbay.start.Main.main(Main.java:119)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
        at java.lang.Thread.run(Thread.java:595)
"
MRM-680,deki,Dennis Kieselhorst,2008-07-21T02:17:40.263Z,2008-07-21T02:17:40.263Z,"Workaround
Copy SQL statements from exception, change length from 256 to 255 and execute these statements by hand. In my case:

CREATE TABLE `SECURITY_OPERATIONS`
(
    `NAME` VARCHAR(255) BINARY NOT NULL,
    `DESCRIPTION` VARCHAR(255) BINARY NULL,
    `PERMANENT` BIT NOT NULL,
    `RESOURCE_REQUIRED` BIT NOT NULL,
    PRIMARY KEY (`NAME`)
) TYPE=INNODB

CREATE TABLE `SECURITY_ROLES`
(
    `NAME` VARCHAR(255) BINARY NOT NULL,
    `ASSIGNABLE` BIT NOT NULL,
    `DESCRIPTION` VARCHAR(255) BINARY NULL,
    `PERMANENT` BIT NOT NULL,
    PRIMARY KEY (`NAME`)
) TYPE=INNODB

CREATE TABLE `SECURITY_PERMISSIONS`
(
    `NAME` VARCHAR(255) BINARY NOT NULL,
    `DESCRIPTION` VARCHAR(255) BINARY NULL,
    `OPERATION_NAME_OID` VARCHAR(255) BINARY NULL,
    `PERMANENT` BIT NOT NULL,
    `RESOURCE_IDENTIFIER_OID` VARCHAR(255) BINARY NULL,
    PRIMARY KEY (`NAME`)
) TYPE=INNODB

CREATE TABLE `SECURITY_RESOURCES`
(
    `IDENTIFIER` VARCHAR(255) BINARY NOT NULL,
    `PATTERN` BIT NOT NULL,
    `PERMANENT` BIT NOT NULL,
    PRIMARY KEY (`IDENTIFIER`)
) TYPE=INNODB

CREATE TABLE `SECURITY_ROLE_CHILDROLE_MAP`
(
    `NAME_OID` VARCHAR(255) BINARY NOT NULL,
    `STRING_ELE` VARCHAR(255) BINARY NULL,
    `INTEGER_IDX` INTEGER NOT NULL,
    PRIMARY KEY (`NAME_OID`,`INTEGER_IDX`)
) TYPE=INNODB

CREATE TABLE `SECURITY_ROLE_PERMISSION_MAP`
(
    `NAME_OID` VARCHAR(255) BINARY NOT NULL,
    `NAME_EID` VARCHAR(255) BINARY NULL,
    `INTEGER_IDX` INTEGER NOT NULL,
    PRIMARY KEY (`NAME_OID`,`INTEGER_IDX`)
) TYPE=INNODB

CREATE TABLE `SECURITY_USER_ASSIGNMENTS`
(
    `PRINCIPAL` VARCHAR(255) BINARY NOT NULL,
    `PERMANENT` BIT NOT NULL,
    `LAST_UPDATED` DATETIME NULL,
    PRIMARY KEY (`PRINCIPAL`)
) TYPE=INNODB

CREATE TABLE `SECURITY_USERASSIGNMENT_ROLENAMES`
(
    `PRINCIPAL_OID` VARCHAR(255) BINARY NOT NULL,
    `STRING_ELE` VARCHAR(255) BINARY NULL,
    `INTEGER_IDX` INTEGER NOT NULL,
    PRIMARY KEY (`PRINCIPAL_OID`,`INTEGER_IDX`)
) TYPE=INNODB

CREATE TABLE `JDOUSER`
(
    `USERNAME` VARCHAR(255) BINARY NOT NULL,
    `ACCOUNT_CREATION_DATE` DATETIME NULL,
    `COUNT_FAILED_LOGIN_ATTEMPTS` INTEGER NOT NULL,
    `EMAIL` VARCHAR(255) BINARY NULL,
    `ENCODED_PASSWORD` VARCHAR(255) BINARY NULL,
    `FULL_NAME` VARCHAR(255) BINARY NULL,
    `LAST_LOGIN_DATE` DATETIME NULL,
    `LAST_PASSWORD_CHANGE` DATETIME NULL,
    `LOCKED` BIT NOT NULL,
    `MODEL_ENCODING` VARCHAR(255) BINARY NULL,
    `USER_PASSWORD` VARCHAR(255) BINARY NULL,
    `PASSWORD_CHANGE_REQUIRED` BIT NOT NULL,
    `PERMANENT` BIT NOT NULL,
    `VALIDATED` BIT NOT NULL,
    PRIMARY KEY (`USERNAME`)
) TYPE=INNODB

CREATE TABLE `JDOUSER_PREVIOUSENCODEDPASSWORDS`
(
    `USERNAME_OID` VARCHAR(255) BINARY NOT NULL,
    `STRING_ELE` VARCHAR(255) BINARY NULL,
    `INTEGER_IDX` INTEGER NOT NULL,
    PRIMARY KEY (`USERNAME_OID`,`INTEGER_IDX`)
) TYPE=INNODB

CREATE TABLE `JDOAUTHENTICATIONKEY`
(
    `AUTHKEY` VARCHAR(255) BINARY NOT NULL,
    `DATE_CREATED` DATETIME NULL,
    `DATE_EXPIRES` DATETIME NULL,
    `FOR_PRINCIPAL` VARCHAR(255) BINARY NULL,
    `MODEL_ENCODING` VARCHAR(255) BINARY NULL,
    `PURPOSE` VARCHAR(255) BINARY NULL,
    PRIMARY KEY (`AUTHKEY`)
) TYPE=INNODB


This issue affects all MySQL versions before 5.0.3, see:
http://forums.mysql.com/read.php?10,113556,113638#msg-113638"
MRM-680,brettporter,Brett Porter,2011-09-12T09:35:37.174Z,2011-09-12T09:35:37.174Z,This is now very old. Please let us know if it continues to cause anyone problems with the workaround given.
MRM-698,wsmoak,Wendy Smoak,2008-02-18T10:42:16.753Z,2008-02-18T10:42:16.753Z,"It's a good idea to mention anything we know about at release time, but I think we need something for known issues in archiva-site.  The release notes can point there for the latest info.

(We just won't know all the issues until after we release, and we can't update the versioned documentation after it is tagged.)

I'm adding a known-issues.apt page and linking it from the downloads page.
"
MRM-698,brettporter,Brett Porter,2008-02-18T13:55:33.711Z,2008-02-18T13:55:33.711Z,"I think it's worth calling out the things we know at the time of the release as well. I was unclear if you were suggesting both, or as an alternate :)

Would it be easier to just link to ""everything that affects version 1.0.1"" in JIRA?"
MRM-698,wsmoak,Wendy Smoak,2008-02-18T14:09:53.683Z,2008-02-18T14:09:53.683Z,"Both-- call out anything we know at release time, and link to the known issues page which can be updated after we tag the release.

I did link to a JIRA query (which is meant to be in addition to text on the page, not as a replacement.) 
* http://maven.apache.org/archiva/known-issues.html

(The JIRA query link could also go in the release notes for the next version, it won't hurt to have it in both places.)"
MRM-698,brettporter,Brett Porter,2008-03-25T08:03:56.356Z,2008-03-25T08:03:56.356Z,I think what is on the site is sufficient actually
MRM-604,jameswdumay,James William Dumay,2008-06-04T03:04:49.892Z,2008-06-04T03:04:49.892Z,See MRM-829
MRM-649,olamy,Olivier Lamy (*$^%`),2011-10-27T16:39:42.104Z,2011-10-27T16:39:42.104Z,UI has changed since this issue has been loaded. So not any more applicable
MRM-615,joakime,Joakim Erdfelt,2007-12-04T08:08:26.514Z,2007-12-04T08:08:26.514Z,Linking to MRM-488 as previously reported problem.
MRM-615,jameswdumay,James William Dumay,2008-05-08T01:42:20.701Z,2008-05-08T01:42:20.701Z,Moving to 1.1.x
MRM-615,oching,Maria Odea Ching,2008-10-10T23:00:36.033Z,2008-10-10T23:00:36.033Z,"Fixed by the patch submitted for MRM-952, which was committed in trunk -r703626."
MRM-607,wsmoak,Wendy Smoak,2007-11-28T08:02:43.171Z,2007-11-28T08:02:43.171Z,"The Proxy Connectors page works fine for me on Ubuntu 7.  

(I'm not familiar with SunOS 5.8, but a Google search says it's roughly equivalent to Solaris 8.)

You mentioned upgrading to 1.0.  What steps did you take?

Are you running it standalone or in Tomcat/some other appserver?

Can you try this with a clean install of Archiva 1.0 and see if you can reproduce it?

As a workaround, if you cannot use the Proxy Connectors page, you can edit the archiva.xml by hand."
MRM-607,deki,Dennis Kieselhorst,2007-11-29T07:31:14.254Z,2007-11-29T07:31:14.254Z,"Yes, SunOS is equivalent to Solaris but I don't think that this is an os depended issue.

I downloaded the 1.0 standalone archive, extracted it and copied the old config files to the new conf dir.

Found an exception in archiva.log:
479959 [SocketListener0-1] WARN  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Unable to use proxy connector: Unable to
find remote repository configuration for id:myrepo
org.apache.maven.archiva.repository.RepositoryNotFoundException: Unable to find remote repository configuration for id:myrepo
        at org.apache.maven.archiva.repository.RepositoryContentFactory.getRemoteRepositoryContent(RepositoryContentFactory.java:117)
        at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.initConnectorsAndNetworkProxies(DefaultRepositoryProxyConnectors.ja
va:940)
        at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.afterConfigurationChange(DefaultRepositoryProxyConnectors.java:911)
        at org.codehaus.plexus.registry.commons.ConfigurationListenerDelegate.configurationChanged(ConfigurationListenerDelegate.java:57)
        at org.apache.commons.configuration.event.EventSource.fireEvent(EventSource.java:204)
        at org.apache.commons.configuration.HierarchicalConfiguration.setProperty(HierarchicalConfiguration.java:554)
        at org.apache.commons.configuration.AbstractHierarchicalFileConfiguration.setProperty(AbstractHierarchicalFileConfiguration.java:130)
        at org.codehaus.plexus.registry.commons.CommonsConfigurationRegistry.setString(CommonsConfigurationRegistry.java:240)
        at org.apache.maven.archiva.configuration.io.registry.ConfigurationRegistryWriter.writeProxyConnectorConfiguration(ConfigurationRegist
ryWriter.java:509)
        at org.apache.maven.archiva.configuration.io.registry.ConfigurationRegistryWriter.writeConfiguration(ConfigurationRegistryWriter.java:
96)
        at org.apache.maven.archiva.configuration.io.registry.ConfigurationRegistryWriter.write(ConfigurationRegistryWriter.java:34)
        at org.apache.maven.archiva.configuration.DefaultArchivaConfiguration.save(DefaultArchivaConfiguration.java:445)
        at org.apache.maven.archiva.web.action.admin.repositories.AbstractRepositoriesAdminAction.saveConfiguration(AbstractRepositoriesAdminA
ction.java:91)
        at org.apache.maven.archiva.web.action.admin.repositories.AddManagedRepositoryAction.commit(AddManagedRepositoryAction.java:73)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

The repository is defined and shown in the repository view. It worked with beta-1."
MRM-607,deki,Dennis Kieselhorst,2007-11-29T09:48:23.554Z,2007-11-29T09:48:23.554Z,myrepo was a repo on local filesystem in beta-1. After upgrading to 1.0 it appeared as a managed repository and therefore needs no proxy connector. Deleted and readded the repo as remote repository and everything is fine.
MRM-607,oching,Maria Odea Ching,2007-12-02T22:26:32.177Z,2007-12-02T22:26:32.177Z,"hmm.. is this still an issue? or just a problem with the configuration of the repositories? in between beta-1 and 1.0, there have been changes in the repo configuration, the managed and remote repositories have been separated."
MRM-607,deki,Dennis Kieselhorst,2007-12-03T11:10:22.657Z,2007-12-03T11:10:22.657Z,"A hint in the upgrading archiva section, http://maven.apache.org/archiva/docs/1.0/adminguide/standalone.html would be nice."
MRM-609,jameswdumay,James William Dumay,2008-05-08T01:42:19.666Z,2008-05-08T01:42:19.666Z,Moving to 1.1.x
MRM-609,oching,Maria Odea Ching,2009-02-04T01:05:48.918Z,2009-02-04T01:05:48.918Z,I wasn't able to reproduce this issue in trunk -r740536. It is possible that this was fixed from the changes made in the search lately.
MRM-622,oliveros,Drio Oliveros,2007-12-11T04:14:07.955Z,2007-12-11T04:14:07.955Z,"I just found out the project model information was not updated since it was not considered an unprocessed artifact. Therefore there was no consumer for updating database as it is for unprocessed artifacts, only for clean up. This problem happens only when you update a dependency version of a SNAPSHOT project that is already in the  Archiva database.
I will see if I come up with a solution for this issue."
MRM-622,oliveros,Drio Oliveros,2007-12-13T06:22:57.381Z,2007-12-13T06:22:57.381Z,"Attached are the patch files of all components that have been modified.

Please let me know if they are OK."
MRM-622,oching,Maria Odea Ching,2007-12-18T01:08:53.692Z,2007-12-18T01:08:53.692Z,"I applied the patches locally and it doesn't seem to work for me :( I tested it with the scenario specified above using maven-antrun-plugin as the test artifact. i've just edited the pom file itself (changed the dependency junit version from 3.8.1 to 3.8.2 ) instead of re-deploying after making the changes. I got this error during the database update:

jvm 1 | 2007-12-18 14:56:21,093 [pool-1-thread-1] ERROR org.apache.maven.archiva.consumers.DatabaseUnprocessedArtifactConsumer:update-db-project - Unable to process model /home/deng/TestFiles/sample-local-repo/org/apache/maven/plugins/maven-ant-plugin/2.0-beta-1/maven-ant-plugin-2.0-beta-1.pom due to : javax.jdo.JDOUserException : Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
jvm 1 | javax.jdo.JDOUserException: Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
jvm 1 | at org.jpox.store.rdbms.fieldmanager.ParameterSetter.storeStringField(ParameterSetter.java:120)
jvm 1 | at org.jpox.state.StateManagerImpl.providedStringField(StateManagerImpl.java:2757)
jvm 1 | at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideField(ArchivaProjectModel.java)
jvm 1 | at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideFields(ArchivaProjectModel.java)
jvm 1 | at org.jpox.state.StateManagerImpl.provideFields(StateManagerImpl.java:3115)
jvm 1 | at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:252)
jvm 1 | at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
jvm 1 | at org.jpox.store.StoreManager.insert(StoreManager.java:920)
jvm 1 | at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
jvm 1 | at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
jvm 1 | at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1198)
jvm 1 | at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1261)
jvm 1 | at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:192)
jvm 1 | at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:165)
jvm 1 | at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
jvm 1 | at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:170)
jvm 1 | at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:52)
jvm 1 | at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
jvm 1 | at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:152)
jvm 1 | at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:86)
jvm 1 | at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:78)
jvm 1 | at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
jvm 1 | at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
jvm 1 | at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
jvm 1 | at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)
jvm 1 | at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)
jvm 1 | at java.lang.Thread.run(Thread.java:595)

Was this the error you've mentioned regarding the effective cache in your email in the dev list?
It would really be better if you could also provide tests for these changes :) Thanks Darios! "
MRM-622,oliveros,Drio Oliveros,2007-12-18T08:27:02.423Z,2007-12-18T08:27:02.423Z,"Yes, that is correct. I would get this error if effective cache was not updated properly upon project removal.

Anyway, to make sure I was not missing anything, I've updated my working copy (trunk), applied the patches locally and forced a modification to a POM file by replacing one of its dependency version (tested against new deployment and manual change to a POM sitting in the repository). Everything worked as expected.

I would suggest you to do it from scratch once again:

1) Update working copy to latest revision and apply the patches.
2) Install and run local Archiva.
3) Create an empty repository.
4) Add two projects (A and B) to it where B depends on A
5) Follow the steps from test scenario.

BTW do you have any recommendation about creating test cases for Archiva ?
Any tip would be appreciated.

Thank you.

"
MRM-622,oliveros,Drio Oliveros,2007-12-18T08:27:36.754Z,2007-12-18T08:27:36.754Z,"Yes, that is correct. I would get this error if effective cache was not updated properly upon project removal.

Anyway, to make sure I was not missing anything, I've updated my working copy (trunk), applied the patches locally and forced a modification to a POM file by replacing one of its dependency version (tested against new deployment and manual change to a POM sitting in the repository). Everything worked as expected.

I would suggest you to do it from scratch once again:

1) Update working copy to latest revision and apply the patches.
2) Install and run local Archiva.
3) Create an empty repository.
4) Add two projects (A and B) to it where B depends on A
5) Follow the steps from test scenario.

BTW do you have any recommendation about creating test cases for Archiva ?
Any tip would be appreciated.

Thank you.

"
MRM-622,oching,Maria Odea Ching,2007-12-20T21:12:57.512Z,2007-12-20T21:12:57.512Z,"Hi Dario, I re-applied the patch again and did as was specified in the test scenario. The result was still the same for me though :( I still got the same error. Maybe there were some other changes in your local copy that didn't get included in the patches you've submitted? Anyway, I'll also look into why I'm getting the error.

For the tests, you could take a look at some of the test cases in Archiva as reference. As much as possible, it is recommended to use mock objects for the tests and cover as many different scenarios as you can. Another tip too (though not related to the tests), is you can also submit just one patch for all your changes. Instead of doing a diff per module, you can just diff on the top level directory ;)

Thanks again!"
MRM-622,oching,Maria Odea Ching,2008-03-17T10:10:51.171Z,2008-03-17T10:10:51.171Z,"Applied the following sections from the archiva-database-consumers.patch in ProjectModelToDatabaseConsumer and DatabaseCleanupRemoveProjectConsumer:

// Force removal of project model from effective cache
String projectKey = toProjectKey( projectModel );
synchronized ( effectiveProjectCache )
{
     if ( effectiveProjectCache.hasKey( projectKey ) )
     {
         effectiveProjectCache.remove( projectKey );
     }
}
...
private String toProjectKey( ArchivaProjectModel project )
{
     StringBuilder key = new StringBuilder();

     key.append( project.getGroupId() ).append( "":"" );
     key.append( project.getArtifactId() ).append( "":"" );
     key.append( project.getVersion() );

     return key.toString();
 }

Other changes made:
- delete the project model if it already exists in the database (ProjectModelToDatabaseConsumer)
- added the effective-project-cache component in the DatabaseCleanupRemoveProjectModelTest

The above fixes are in -r637928. Thanks!"
MRM-694,oching,Maria Odea Ching,2008-04-18T21:57:51.642Z,2008-04-18T21:57:51.642Z,"Additional info in:
http://www.nabble.com/Virtual-Repositories-td16741542.html"
MRM-694,ctan,Maria Catherine Tan,2008-04-23T02:48:46.305Z,2008-04-23T02:48:46.305Z,Submitted a patch for the web interface part of this issue
MRM-694,nramirez,Nap Ramirez,2008-04-23T08:28:11.973Z,2008-04-23T08:28:11.973Z,"patch containing a utility method for getting the repository groups as a Map<String repositoryId, RepositoryGroupConfiguration>"
MRM-694,nramirez,Nap Ramirez,2008-04-23T08:29:30.023Z,2008-04-23T08:29:30.023Z,patch for adding the repository groups feature
MRM-694,nramirez,Nap Ramirez,2008-04-23T08:30:01.002Z,2008-04-23T08:30:01.002Z,patch of unit tests for the repository group feature
MRM-694,nramirez,Nap Ramirez,2008-04-23T08:33:00.196Z,2008-04-23T08:33:00.196Z,"The following test cases are handled:

1.  Accessing a valid repository group root url (e.g. http://machine.com/repository/repository-group/) returns a Bad Request (HTTP 400)

2.  Accessing an invalid repository group root url is forwarded to managed repository checking

3.  Accessing an artifact in a valid repository group will iterate over the managed repositories in the repository group
     3.a.  If an invalid managed repository is encountered (managed repository doesn't exist), a Not Found (HTTP 404) is returned and the iteration is broken

     3.b.  If an artifact is not found in a valid managed repository (after proxying, etc.), a Not Found (HTTP 404) is set but not returned yet, the iteration continues to the next managed repository.  The Not Found (HTTP 404) is returned after exhausting all valid managed repositories

     3.c.  If an artifact is found in a valid managed repository, the artifact is returned, the iteration is broken and any Not Found (HTTP 404) is disregarded

4.  Accessing a valid repository group with any http write method returns a Bad Request (HTTP 400)
"
MRM-694,oching,Maria Odea Ching,2008-05-12T04:32:54.587Z,2008-05-12T04:32:54.587Z,"Patch MRM-694-web-interface.patch applied in trunk -r655432. Thanks for the patch Marica! :-)

I'm still resolving test failures in archiva-webapp after applying the remaining patches. There have been changes in the webdav module after the patch has been created causing the test failures after I merged them."
MRM-694,oching,Maria Odea Ching,2008-05-13T01:39:17.355Z,2008-05-13T01:39:17.355Z,"MRM-694-archiva-webapp.patch and MRM-694-archiva-webdav.patch applied in trunk -r655749. I made some adjustments in the patch in order to apply it successfully to trunk and for the RepoServlet tests to pass. Thanks for the patches Nap! :-)

I no longer applied MRM-694-archiva-configuration.patch as the same code was also in MRM-694-web-interface.patch already. 
"
MRM-694,oching,Maria Odea Ching,2008-05-13T01:41:33.162Z,2008-05-13T01:41:33.162Z,I'm leaving this open while I'm still testing this feature.
MRM-694,oching,Maria Odea Ching,2008-05-13T02:12:30.451Z,2008-05-13T02:12:30.451Z,"I encountered some problems regarding authentication:

2008-05-13 15:09:47,487 [btpool0-0] INFO  org.apache.maven.archiva.security.ArchivaServletAuthenticator  - Authorization Denied [ip=127.0.0.1,isWriteRequest=false,permission=archiva-read-repository,repo=internal.group] : no matching permissions
2008-05-13 15:09:47,487 [btpool0-0] ERROR org.apache.maven.archiva.webdav.ArchivaDavSessionProvider  - Access denied for repository internal.group

"
MRM-694,oching,Maria Odea Ching,2008-05-14T01:55:33.581Z,2008-05-14T01:55:33.581Z,http://www.nabble.com/Authentication-in-Virtual-Repositories-td17204716.html
MRM-694,oching,Maria Odea Ching,2008-05-16T05:46:13.082Z,2008-05-16T05:46:13.082Z,"Fix in trunk -r657012:
- perform authentication only in ArchivaDavSessionProvider.attachSession()
- perform authn and authz for each repo in ArchivaDavResourceFactory.createResource()
"
MRM-694,oching,Maria Odea Ching,2008-05-20T09:36:59.582Z,2008-05-20T09:36:59.582Z,"Fix in trunk -r658261:
- handle virtual repos in webdav browse
- add new DavResource for virtual repos

Leaving this issue open until other people aside from me are able to test this further.
"
MRM-694,oching,Maria Odea Ching,2008-05-20T20:41:29.106Z,2008-05-20T20:41:29.106Z,"Additional fix in trunk -r658525:
- add authorization check for virtual repos"
MRM-694,oching,Maria Odea Ching,2008-05-20T20:55:35.785Z,2008-05-20T20:55:35.785Z,"Additional fix in trunk -r658528:
- handle problem with the missing '/' in the repository group url
"
MRM-694,brettporter,Brett Porter,2008-05-20T23:33:11.117Z,2008-05-20T23:33:11.117Z,"I'm having a problem using them with split authz.

Say the guest has perms to one repo and not the other, I get prompted for auth on the group.

Likewise, if a user has perms to one repo and not the other, their auth fails for the group with: 
{code}
2008-05-21 14:17:24,210 [btpool0-5] INFO  org.apache.maven.archiva.security.ArchivaServletAuthenticator  - Authorization Denied [ip=0:0:0:0:0:0:0:1%0,
isWriteRequest=false,permission=archiva-read-repository,repo=testing] : no matching permissions
{code}

I think that if the current user has access to *any* repo in the group they are let in, and then what is shown is checked based on their permissions?

But if they have access to none, they are prompted."
MRM-694,oching,Maria Odea Ching,2008-05-21T00:37:37.006Z,2008-05-21T00:37:37.006Z,"Ok, I'll adjust the authentication.. thanks for testing this out Brett :-)"
MRM-694,brettporter,Brett Porter,2008-05-21T23:09:06.985Z,2008-05-21T23:09:06.985Z,"here are some other small adjustments:
- when you deploy, you get 400 BAD REQUEST, but I think maybe 405 on deployment is more appropriate? (http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html). If not 405, perhaps 403. Reading the spec, both would comply but 400 means we didn't understand the request
- the plain HTML indexes (IndexWriter) are not alphabetically sorted in groups
- in the UI, we should show the group HTTP URL, like the repository URLs we show for each repo
- I was allowed to create group with ID of an existing repository - this should be a conflict
- likewise, I was allowed to create a repository with ID of an existing group - this should be a conflict
- the repository group page HTML seems invalid - probably missing a closing div (see the footer which doesn't extend all the way to the left)"
MRM-694,oching,Maria Odea Ching,2008-05-22T02:07:49.78Z,2008-05-22T02:07:49.78Z,"Ok, I'll look into these.. Thanks!
Also, I previously filed an issue before to display the URL of the repo group MRM-802. I'll just link it to this issue."
MRM-694,oching,Maria Odea Ching,2008-05-22T05:05:42.286Z,2008-05-22T05:05:42.286Z,"Fixed authentication problem in trunk, -r659069. 

The implementation is that if the current user logged in to Archiva has access to any of the repos in the group the user  is allowed to browse with only the artifacts in the repos they have permission to access are shown. But if the user has no permission to access any repository, authentication will be prompted."
MRM-694,oching,Maria Odea Ching,2008-05-22T05:19:50.458Z,2008-05-22T05:19:50.458Z,Changed return to 405 for write requests to a virtual repo (fixed in trunk -r659071)
MRM-694,oching,Maria Odea Ching,2008-05-23T01:30:55.729Z,2008-05-23T01:30:55.729Z,"Fixed the following in trunk:
- add validation check for existing repo group ids and managed & remote repo ids (-r659443)
- fixed sorting in IndexWriter (-r659397)
- fixed footer in repo groups page (-r659392)

I'm leaving this issue open until the fixes are verified. Thanks! :-)
"
MRM-694,mbaclay,mbaclay,2008-05-27T01:10:08.108Z,2008-05-27T01:10:08.108Z,I tested this feature and found out MRM-818 and MRM-819.
MRM-694,oching,Maria Odea Ching,2008-05-27T01:32:11.951Z,2008-05-27T01:32:11.951Z,"Okay, I'll take a look at those two issues.. 
Thanks Marecor! :-)"
MRM-694,brettporter,Brett Porter,2008-05-31T03:23:04.029Z,2008-05-31T03:23:04.029Z,"I found that I was able to access the contents of a repository I didn't have access to via a group it was included in.

Setup:
- 'test' repository (guest has read access)
- 'testing' repository (guest has no access)
- 'all-test' group that includes both

Accessing all-test with the group gives access to both repositories, while accessing via testing asks for authentication."
MRM-694,oching,Maria Odea Ching,2008-06-01T21:53:32.916Z,2008-06-01T21:53:32.916Z,"Brett, I can't seem to replicate this :-( 
Were you logged in Archiva when you accessed the repo group? "
MRM-694,brettporter,Brett Porter,2008-06-01T22:02:28.816Z,2008-06-01T22:02:28.816Z,"nope, I wasn't"
MRM-694,oching,Maria Odea Ching,2008-06-01T22:17:30.862Z,2008-06-01T22:17:30.862Z,"Hmm.. maybe this happened because of the browsing history stored in the browser? 

I was able to replicate this when I previously logged in as 'admin' and browsed the repo group, then logged out. When I accessed the repo group, I was still able to browse everything and when I tried accessing the repo which the guest user has read access, I was prompted for authentication. But when I cleared the browsing history and tried the repo group url again, I was only able to see the repositories which guest has read access to."
MRM-694,brettporter,Brett Porter,2008-06-03T00:00:28.671Z,2008-06-03T00:00:28.671Z,you're right :) sorry!
MRM-627,gumnaam23,gumnaam,2007-12-14T08:45:08.565Z,2007-12-14T08:45:08.565Z,"btw, the repository with SNAPSHOT dependencies is http://www.wicketstuff.org/maven/repository/
And my dependency is org.wicketstuff.wicketstuff-scriptaculous ver 1.3-SNAPSHOT"
MRM-627,gumnaam23,gumnaam,2007-12-14T09:24:31.042Z,2007-12-14T09:24:31.042Z,"Found the problem.
The culprit seems to be Maven 2.0.7+. It has problems with SNAPSHOT dependency resolution with mirrorOf set tp *.

The solution is outlined here.
http://www.jfrog.org/sites/artifactory/latest/maven.html

I did as the post suggested and it worked.
May be this should end up on the WIKI, or archiva proxy setup guide."
MRM-627,brettporter,Brett Porter,2008-03-20T00:32:19.337Z,2008-03-20T00:32:19.337Z,this would likely be a problem only with non-unique versioned snapshots. Will test.
MRM-627,brettporter,Brett Porter,2008-03-20T08:56:24.13Z,2008-03-20T08:56:24.13Z,Can't reproduce this under any combination of types of snapshots - suggest just adding it to the wiki if you feel this is useful
MRM-682,brettporter,Brett Porter,2008-02-05T23:43:25.93Z,2008-02-05T23:43:25.93Z,"I spent some time profiling Archiva back in 0.9 to ensure there were no instances of this, particularly during scanning.

With the current architecture it should be easy to identify a leak.

Regardless - does disabling certain things you don't need help? I'd be interested to see what happens if the consumers were turned off and just proxying/webdav was in place."
MRM-682,jameswdumay,James William Dumay,2008-02-05T23:53:23.84Z,2008-02-05T23:53:23.84Z,I have turned off all the consumers to see if this improves the situation but ill be watching closely.
MRM-682,jameswdumay,James William Dumay,2008-02-14T21:29:48.35Z,2008-02-14T21:29:48.35Z,Even with consumers off this issue still occurs.
MRM-682,jameswdumay,James William Dumay,2008-04-15T18:39:24.557Z,2008-04-15T18:39:24.557Z,This problem has gone away since moving to Spring.
MRM-668,brettporter,Brett Porter,2008-01-24T21:29:15.847Z,2008-01-24T21:29:15.847Z,"this has worked for me when I was testing the other day based on the release candidate - so it's a little weird there is an inconsistency. For the record, I used my existing user database and repository, but removed the 'archiva' database and the indexes in the repositories, then rescanned them both on start up.

Perhaps it's a default configuration issue?"
MRM-668,oching,Maria Odea Ching,2008-01-25T05:29:51.03Z,2008-01-25T05:29:51.03Z,"I added a new repo called test.repo which has artifacts in it, then did a repo scan. Then went to 'Browse', there weren't any artifacts listed. 

From my investigation, it seems like an authorization problem in repo browse. The following line (from DefaultUserRepositories.getObservableRepositoryIds(..) ) has been returning 'false' for me eventhough I was already an admin. 

if ( securitySystem.isAuthorized( securitySession, ArchivaRoleConstants.OPERATION_REPOSITORY_ACCESS, repoId ) )

I'll investigate further why this is happening.."
MRM-668,brettporter,Brett Porter,2008-01-25T19:40:49.256Z,2008-01-25T19:40:49.256Z,"this could certainly explain the difference! In the first one, I retained my repositories and user database. In the second one, I used the pre-defined internal repo. So both would work.

This would seem to be a pre-existing bug with a simple workaround (assign yourself the observer role). Does that work?"
MRM-668,oching,Maria Odea Ching,2008-01-27T20:51:09.791Z,2008-01-27T20:51:09.791Z,i don't think so.. i was already the admin so i already had the observer role :)
MRM-668,oching,Maria Odea Ching,2008-01-28T01:36:30.328Z,2008-01-28T01:36:30.328Z,"Looks like it was from my fix in MRM-628, which caused this problem. I changed the key to be looked up to get the security session in ArchivaXworkUser from SecuritySystemConstants.SECURITY_SESSION_KEY  to SecuritySession.ROLE (because the security session's key is set to this). Both are the same security sessions but set with different keys in the session map. Does anybody know when the security session is set with SecuritySystemConstants.SECURITY_SESSION_KEY as the key and when it is set with SecuritySession.ROLE as the key? 

To handle this, I will put a check to lookup the security session from the session map using both keys as shown below. This is in ArchivaXworkUser btw..

private SecuritySession getSecuritySession()
{        
        SecuritySession securitySession = (SecuritySession) getContextSession().get( SecuritySession.ROLE );          
        if( securitySession == null )
        {
            securitySession = (SecuritySession) getContextSession().get( SecuritySystemConstants.SECURITY_SESSION_KEY );  
        }
                
    	return securitySession;        
}


Please advice if there might be anything that will be affected by this.. Thanks 
"
MRM-668,oching,Maria Odea Ching,2008-01-28T02:54:06.832Z,2008-01-28T02:54:06.832Z,"Sorry, it should be..

SecuritySession securitySession = (SecuritySession) 
       getContextSession().get( SecuritySystemConstants.SECURITY_SESSION_KEY );                
        
if( securitySession == null )
{
      securitySession = (SecuritySession) 
           getContextSession().get( SecuritySession.ROLE );  
}"
MRM-668,brettporter,Brett Porter,2008-01-28T06:57:25.25Z,2008-01-28T06:57:25.25Z,"I understand the thought behind the fix, and think it's a good enough workaround.

But I also worry it's just masking something else longer term - as your earlier question indicated: ""Does anybody know when the security session is set with SecuritySystemConstants.SECURITY_SESSION_KEY as the key and when it is set with SecuritySession.ROLE as the key?"" :)

Maybe one of the Redback guys could answer that? It really seems like it should only be set once.

"
MRM-668,oching,Maria Odea Ching,2008-01-29T02:07:18.228Z,2008-01-29T02:07:18.228Z,I'll raise up my question in the redback dev list.. Thanks :)
MRM-668,oching,Maria Odea Ching,2008-01-29T02:07:47.257Z,2008-01-29T02:07:47.257Z,Fixed in archiva-1.0.x branch -r616198.
MRM-667,ndeloof,nicolas de loof,2008-01-25T04:49:49.798Z,2008-01-25T04:49:49.798Z,"Does this require to uprade all Wagon versions to 1.0-rc1-SNAPSHOT ?
Doesn't wagon-http 1.0-beta-2 provide the expected timeout option ?

Having SNAPSHOT dependencies is a blocker for any new release of Archiva, so I'd prefer to avoid them.
"
MRM-667,brettporter,Brett Porter,2008-01-25T19:48:48.017Z,2008-01-25T19:48:48.017Z,I think we can schedule it for a (short) 1.1 release. It should not be hard to get a wagon release together. I can help.
MRM-667,ndeloof,nicolas de loof,2008-01-26T00:41:00.111Z,2008-01-26T00:41:00.111Z,"right, I'll test and apply yhis patch."
MRM-667,ndeloof,nicolas de loof,2008-01-28T05:09:10.091Z,2008-01-28T05:09:10.091Z,patch applied (rev 615848)
MRM-619,oching,Maria Odea Ching,2007-12-12T02:30:25.794Z,2007-12-12T02:30:25.794Z,"Also update the docs to include what is suggested here:

http://www.nabble.com/Repository-scanning-cron-vs.-Database-update-cron-to14149717.html"
MRM-619,mykol,Michael Mallete,2007-12-26T07:53:28.81Z,2007-12-26T07:53:28.81Z,"Probably need some consistency: Users Guide, User's Guide, and User Guide

- Users Guide on left column links
- User's Guide in docs index
- User Guide on user/s/'s guide front page"
MRM-619,mykol,Michael Mallete,2007-12-26T07:55:07.005Z,2007-12-26T07:55:07.005Z,"On User's Guide front page, missing ""g"" on  ""Searchin Archiva repositories"" --> ""Searching Archiva repositories"" link.

(Kinda nitpicking I know :) )"
MRM-619,dennisl@apache.org,Dennis Lundberg,2007-12-26T17:40:26.277Z,2007-12-26T17:40:26.277Z,"The published ""Get Involved"" page at
http://maven.apache.org/archiva/get-involved.html
is messed up. I can't reproduce the error locally. It probably goes away when the site is deployed next."
MRM-619,oching,Maria Odea Ching,2008-01-14T00:06:41.966Z,2008-01-14T00:06:41.966Z,"Fixed in -r611720.

- added 'Scanning a database' section in Repositories page to describe how database scanning works
- standadized Users Guide

The correct Get Involved page has already been deployed and the missing 'g' in Searching has already been previously updated."
MRM-635,jameswdumay,James William Dumay,2008-05-08T01:42:21.272Z,2008-05-08T01:42:21.272Z,Moving to 1.1.x
MRM-672,wsmoak,Wendy Smoak,2008-02-18T12:44:40.496Z,2008-02-18T12:44:40.496Z,Fixed in r628842.  No fix version as it's part of the top-leve website.
MRM-641,wsmoak,Wendy Smoak,2007-12-20T10:57:20.887Z,2007-12-20T10:57:20.887Z,"Try adding -U to your command line to force updates.   (Also try with -e or -X  to get more output.)

Watch the Archiva logs while this is happening to see whether a request comes in.

Maven's default update policy is 'daily', so if  it failed once to download the plugin, it will not try again until tomorrow. "
MRM-641,hsm,Henrik Schmidt,2007-12-20T12:12:55.842Z,2007-12-20T12:12:55.842Z,"The Archiva logs do not record a request coming in.

Steps to reproduce:
$ mvn archetype:create -DgroupId=some.namespace -DartifactId=myproject -DarchetypeArtifactId=maven-archetype-quickstart
$ cd myproject/
$ mvn -U -X -e cobertura:cobertura >output1.log
$ rm ~/.m2/settings.xml
$ mvn -U -X -e cobertura:cobertura >output2.log

output logs attached

"
MRM-641,hsm,Henrik Schmidt,2007-12-20T12:13:56.402Z,2007-12-20T12:13:56.402Z,output with settings.xml pointing to Archiva mirror
MRM-641,hsm,Henrik Schmidt,2007-12-20T12:14:36.907Z,2007-12-20T12:14:36.907Z,output with settings.xml removed (it now works)
MRM-641,hsm,Henrik Schmidt,2007-12-20T12:26:01.872Z,2007-12-20T12:26:01.872Z,Client settings.xml
MRM-641,hsm,Henrik Schmidt,2007-12-26T13:51:21.486Z,2007-12-26T13:51:21.486Z,"Workaround: 

Use fully qualified plugin-name 

$ mvn org.codehaus.mojo:cobertura-maven-plugin:cobertura"
MRM-641,brettporter,Brett Porter,2008-03-25T09:07:29.462Z,2008-03-25T09:07:29.462Z,fixed in 1.0.2
MRM-658,oching,Maria Odea Ching,2008-05-27T01:27:02.444Z,2008-05-27T01:27:02.444Z,"Hmm, the test case is *not failing* for me. Could you verify this in trunk (1.1-SNAPSHOT) too? 
Thanks!"
MRM-658,oching,Maria Odea Ching,2008-05-27T03:14:12.339Z,2008-05-27T03:14:12.339Z,"I cannot replicate this too when I tried requesting (using Maven) for an artifact with a 1.0-trunk-SNAPSHOT version. I also had the uniqueVersion set to true when I deployed the 1.0-trunk-SNAPSHOT artifact in the Archiva repo.

Could someone verify this as well? 
Thanks.."
MRM-658,nramirez,Nap Ramirez,2008-06-03T04:40:19.769Z,2008-06-03T04:40:19.769Z,I tried it in 1.0.2 and it seemed fixed to me.  I tried it by deploying a an artifact like com.mycompany.app:my-app:1.0-internal-2.0-SNAPSHOT which created the entry in localhost:8080/archiva/repository/snapshots/com/mycompany/app/my-app/1.0-internal-2.0-SNAPSHOT/
MRM-658,oching,Maria Odea Ching,2008-06-03T05:59:08.593Z,2008-06-03T05:59:08.593Z,"Thanks for verifying this Nap! :-)
Closing this as issue as 'Cannot Reproduce'."
MRM-611,brettporter,Brett Porter,2008-02-25T04:37:22.146Z,2008-02-25T04:37:22.146Z,commented out in the mean time
MRM-611,jameswdumay,James William Dumay,2008-05-08T01:42:21.048Z,2008-05-08T01:42:21.048Z,Moving to 1.1.x
MRM-611,brettporter,Brett Porter,2010-02-23T02:25:29.178Z,2010-02-23T02:25:29.178Z,removed
MRM-629,ndeloof,nicolas de loof,2007-12-17T05:56:26.553Z,2007-12-17T05:56:26.553Z,"Creating an empty <configuration/> in $HOME/.m2/shared.xml does not solve this.

java.lang.NullPointerException
	org.apache.maven.shared.app.configuration.io.registry.ConfigurationRegistryWriter.writeCompanyPom(ConfigurationRegistryWriter.java:45)
	org.apache.maven.shared.app.configuration.io.registry.ConfigurationRegistryWriter.writeConfiguration(ConfigurationRegistryWriter.java:32)
	org.apache.maven.shared.app.configuration.io.registry.ConfigurationRegistryWriter.write(ConfigurationRegistryWriter.java:22)
	org.apache.maven.shared.app.configuration.DefaultMavenAppConfiguration.save(DefaultMavenAppConfiguration.java:73)
	org.apache.maven.archiva.web.action.admin.appearance.ConfigureAppearanceAction.execute(ConfigureAppearanceAction.java:70)"
MRM-629,jameswdumay,James William Dumay,2008-06-20T23:24:07.317Z,2008-06-20T23:24:07.317Z,MRM-829
MRM-603,jameswdumay,James William Dumay,2008-05-08T01:42:23.736Z,2008-05-08T01:42:23.736Z,Moving to 1.1.x
MRM-695,brettporter,Brett Porter,2008-03-27T13:28:15.738Z,2008-03-27T13:28:15.738Z,I think the first is the user database and the second the archiva database
MRM-695,oching,Maria Odea Ching,2008-04-09T01:26:54.102Z,2008-04-09T01:26:54.102Z,Thanks for pointing that out Brett :-) Closing this now..
MRM-623,brettporter,Brett Porter,2007-12-13T22:15:09.949Z,2007-12-13T22:15:09.949Z,"regenerated with:
keytool -genkey -alias mykey -keypass password -keystore keystore -validity 10000
"
MRM-642,sgargan,Stephen Gargan,2008-01-11T20:06:35.373Z,2008-01-11T20:06:35.373Z,Created ResourceUtils class to load test resources. Currently under the test folder but should probably reside elsewhere.
MRM-621,shinsuke,Shinsuke Sugaya,2009-05-27T00:56:23.638Z,2009-05-27T00:56:23.638Z,"Attached patch to add <%@page%> tag.

A multi-byte character is displayed as ?. 
So, I cannot read some labels and buttons in Japanese environment..

Please  fix this issue.
"
MRM-621,oching,Maria Odea Ching,2010-05-10T10:04:17.232Z,2010-05-10T10:04:17.232Z,Thanks for the patch Shinsuke Sugaya! I've applied it to 1.3.x branch [-r942765|http://svn.apache.org/viewvc?revision=942765&view=revision] 
MRM-621,oching,Maria Odea Ching,2010-05-10T10:48:56.816Z,2010-05-10T10:48:56.816Z,Merged to trunk in [-r942796|http://svn.apache.org/viewvc?revision=942796&view=revision]
MRM-671,maxb,Max Bowsher,2008-01-29T14:51:14.298Z,2008-01-29T14:51:14.298Z,"IIUC, ""A lone zero block ...."" is merely a warning, not an error.

See PLXCOMP-38 for the bug in plexus-archiver which generates very slightly malformed tar files."
MRM-671,brettporter,Brett Porter,2008-02-18T15:10:47.921Z,2008-02-18T15:10:47.921Z,will be fixed when the assembly plugin is :)
MRM-626,brettporter,Brett Porter,2008-02-25T09:42:54.898Z,2008-02-25T09:42:54.898Z,"the proxy is being set as a String[], which is normal for this type - it needs to be just String.

We may need to capture this in the action instead, and pass the values along after reading out String[0] each time"
MRM-674,dfabulich,Dan Fabulich,2008-01-28T20:10:26.567Z,2008-01-28T20:10:26.567Z,"There are several bugs that exhibit this LayoutException problem; I suspect that they're all subtle dupes of each other, which makes them pretty serious when put together: MRM-632 MRM-658 "
MRM-636,oching,Maria Odea Ching,2009-09-22T02:56:55.098Z,2009-09-22T02:56:55.098Z,"Looks like the <classesDirectory> config below in Cobertura Maven Plugin is causing the error 'Error configuring: org.apache.maven.plugins:maven-war-plugin. Reason: ERROR: Cannot override read-only parameter: classesDirectory in goal: war:inplace':

{code}
<lifecycles>
  <lifecycle>
    <id>cobertura</id>
    <phases>
      <phase>
        <id>process-classes</id>
        <executions>
          <execution>
            <goals>
              <goal>instrument</goal>
            </goals>
          </execution>
        </executions>
      </phase>
      <phase>
        <id>test</id>
        <configuration>
          <classesDirectory>${project.build.directory}/generated-classes/cobertura</classesDirectory>
          <testFailureIgnore>true</testFailureIgnore>
          <forkMode>once</forkMode>
        </configuration>
      </phase>
    </phases>
  </lifecycle>
</lifecycles>
{code}

The same parameter is also present as read-only in Maven War Plugin. Is there someway we can work around this?"
MRM-636,oching,Maria Odea Ching,2009-09-24T05:00:36.098Z,2009-09-24T05:00:36.098Z,This is also a problem with the Emma maven plugin.
MRM-636,oching,Maria Odea Ching,2009-09-24T06:11:04.521Z,2009-09-24T06:11:04.521Z,Should this be filed for the war plugin jira instead? or Cobertura and Emma jiras?
MRM-636,oching,Maria Odea Ching,2009-10-07T05:02:13.492Z,2009-10-07T05:02:13.492Z,"Similar to what was done in Continuum, I'll remove war:inplace and use multiple webapp sources for maven-jetty-plugin instead."
MRM-636,oching,Maria Odea Ching,2009-10-08T01:43:21.241Z,2009-10-08T01:43:21.241Z,"Fixed in trunk -r823065 with the following changes:
* removed war:inplace config, use multiple source dirs for jetty-plugin instead
* unpack redback war in target dir
* configure jetty plugin to use multiple source dirs
* cleaned up clean-plugin config"
MRM-652,jameswdumay,James William Dumay,2008-04-26T23:05:06.906Z,2008-04-26T23:05:06.906Z,This was fixed in the IndexWriter of 1.1
MRM-669,oching,Maria Odea Ching,2008-02-05T03:20:09.855Z,2008-02-05T03:20:09.855Z,http://jira.codehaus.org/browse/MRM-605
MRM-612,jameswdumay,James William Dumay,2008-05-08T01:42:23.156Z,2008-05-08T01:42:23.156Z,Moving to 1.1.x
MRM-612,oching,Maria Odea Ching,2008-12-07T21:27:17.922Z,2008-12-07T21:27:17.922Z,"Another side effect of having the repo scanner depend on the timestamp of the artifacts is when you change the location of a repository in Archiva.

For example, you have a repository 'test' which already has contents and is located at '../test/'. The repository has already been scanned and indexed. Now, you would like to point repository 'test' to a different repository. So you change it's location to '../another.repository/'. You wouldn't be able to index the artifacts in ../another.repository since the 'test' repository is already considered 'scanned' and the time stamp of the artifacts are older than the last scanning."
MRM-612,brettporter,Brett Porter,2008-12-07T21:37:03.704Z,2008-12-07T21:37:03.704Z,"Deng - good point - maybe that could be raised as a separate issue. If the configuration is changed, I'd suggest all the scanning stats should be reset."
MRM-612,oching,Maria Odea Ching,2008-12-07T21:51:14.805Z,2008-12-07T21:51:14.805Z,"Brett, filed it as a separate issue now (MRM-1033)"
MRM-612,oching,Maria Odea Ching,2009-09-17T03:32:11.405Z,2009-09-17T03:32:11.405Z,Can we close this one now since this can be addressed by the fix for MRM-1056?
MRM-612,brettporter,Brett Porter,2009-09-17T03:45:18.571Z,2009-09-17T03:45:18.571Z,I think so - otherwise we need to track timestamps at a per-file level which is prohibitive for a small advantage
MRM-1063,brettporter,Brett Porter,2010-02-23T03:26:01.022Z,2010-02-23T03:26:01.022Z,not relevant since 1.2 switched indexing
MRM-1092,oching,Maria Odea Ching,2009-02-22T20:06:24.994Z,2009-02-22T20:06:24.994Z,Thanks for the patch Jevica! It's applied in trunk -r746857.
MRM-1057,gautencio,Gwen Harold Autencio,2009-01-13T00:25:27.863Z,2009-01-13T00:25:27.863Z,Replicated this in continuum. Filed http://jira.codehaus.org/browse/REDBACK-188 for this issue.
MRM-1057,oching,Maria Odea Ching,2009-01-28T03:57:16.827Z,2009-01-28T03:57:16.827Z,REDBACK-188 is already resolved but the fix is not yet included in the latest release of Redback (1.2-beta-2) as of this writing.
MRM-1057,oching,Maria Odea Ching,2009-02-19T21:26:17.774Z,2009-02-19T21:26:17.774Z,Verified as fixed after upgrading Redback to 1.2-SNAPSHOT
MRM-1091,oching,Maria Odea Ching,2009-02-20T03:18:42.818Z,2009-02-20T03:18:42.818Z,Fixed in trunk -r746186.
MRM-1013,brettporter,Brett Porter,2009-03-06T10:54:06.139Z,2009-03-06T10:54:06.139Z,this occurred because the admin was locked in your database. Fixed the error handling.
MRM-1040,jameswdumay,James William Dumay,2008-12-15T20:38:24.639Z,2008-12-15T20:38:24.639Z,Committed in r726930
MRM-1024,dantran,Dan Tran,2008-11-27T06:14:02.593Z,2008-11-27T06:14:02.593Z,please make it configurable that persists across upgrade.
MRM-1089,wsmoak,Wendy Smoak,2009-02-17T15:58:38.559Z,2009-02-17T15:58:38.559Z,"Until the Archiva docs get updated, this page may help:  http://redback.codehaus.org/integration/ldap.html 
"
MRM-1089,wsmoak,Wendy Smoak,2009-08-20T08:54:35.505Z,2009-08-20T08:54:35.505Z,"The feature matrix on the MAVENUSER wiki needs to be reviewed, it has question marks for LDAP support under Archiva:

http://docs.codehaus.org/display/MAVENUSER/Maven+Repository+Manager+Feature+Matrix"
MRM-1089,olamy,Olivier Lamy (*$^%`),2014-03-02T16:33:35.88Z,2014-03-02T16:33:35.88Z,fixed with previous versions
MRM-1049,evenisse,Emmanuel Venisse,2008-12-18T10:50:24.688Z,2008-12-18T10:50:24.688Z,Duplicate MRM-84
MRM-1054,olo,Aleksander Adamowski PZU,2009-07-17T05:26:03.235Z,2009-07-17T05:26:03.235Z,"I have the same problem on Continuum version 1.2.3, build number 732759, deployed as WAR on JBoss 4.2.3.GA:

2009-07-17 10:19:50,898 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/continuum].[default]] Servlet.service() for servlet default threw exception
java.lang.IllegalArgumentException: fromIndex(0) > toIndex(-1)
        at java.util.SubList.<init>(AbstractList.java:604)
        at java.util.RandomAccessSubList.<init>(AbstractList.java:758)
        at java.util.AbstractList.subList(AbstractList.java:468)
        at org.codehaus.plexus.redback.policy.DefaultUserSecurityPolicy.extensionChangePassword(DefaultUserSecurityPolicy.java:250)
        at org.codehaus.plexus.redback.users.jdo.JdoUserManager.updateUser(JdoUserManager.java:363)
        at org.codehaus.plexus.redback.users.cached.CachedUserManager.updateUser(CachedUserManager.java:207)
        at org.codehaus.plexus.redback.users.configurable.ConfigurableUserManager.updateUser(ConfigurableUserManager.java:161)
        at org.codehaus.plexus.redback.xwork.action.admin.UserEditAction.submit(UserEditAction.java:198)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.opensymphony.xwork.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:358)
        at com.opensymphony.xwork.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:218)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:192)
        at org.codehaus.plexus.redback.xwork.interceptor.SecureActionInterceptor.intercept(SecureActionInterceptor.java:159)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at org.codehaus.plexus.redback.xwork.interceptor.PolicyEnforcementInterceptor.intercept(PolicyEnforcementInterceptor.java:149)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at org.codehaus.plexus.redback.xwork.interceptor.AutoLoginInterceptor.intercept(AutoLoginInterceptor.java:156)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at org.codehaus.plexus.redback.xwork.interceptor.ForceAdminUserInterceptor.intercept(ForceAdminUserInterceptor.java:76)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at org.codehaus.plexus.redback.xwork.interceptor.EnvironmentCheckInterceptor.intercept(EnvironmentCheckInterceptor.java:122)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:175)
        at com.opensymphony.xwork.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:115)
        at com.opensymphony.xwork.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.webwork.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:174)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.webwork.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:169)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:151)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:186)
        at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
        at com.opensymphony.xwork.DefaultActionProxy.execute(DefaultActionProxy.java:116)
        at com.opensymphony.webwork.dispatcher.DispatcherUtils.serviceAction(DispatcherUtils.java:273)
        at com.opensymphony.webwork.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:118)
        at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:52)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at com.opensymphony.webwork.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:88)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
        at java.lang.Thread.run(Thread.java:619)
2009-07-17 10:19:51,393 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/continuum].[jsp]] Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
        at org.codehaus.plexus.redback.taglib.jsp.IsNotReadOnlyUserManagerTag.condition(IsNotReadOnlyUserManagerTag.java:44)
        at javax.servlet.jsp.jstl.core.ConditionalTagSupport.doStartTag(ConditionalTagSupport.java:93)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspx_meth_redback_005fisNotReadOnlyUserManager_005f1(httpError_jsp.java:1187)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspx_meth_c_005fotherwise_005f1(httpError_jsp.java:928)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspx_meth_c_005fchoose_005f1(httpError_jsp.java:649)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspx_meth_ww_005fi18n_005f1(httpError_jsp.java:565)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspx_meth_ww_005fi18n_005f0(httpError_jsp.java:195)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspService(httpError_jsp.java:124)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:447)
        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:379)
        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:292)
        at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:423)
        at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:342)
        at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:286)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
        at java.lang.Thread.run(Thread.java:619)
2009-07-17 10:19:51,397 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost]] Exception Processing ErrorPage[errorCode=500, location=/WEB-INF/jsp/error/httpError.jsp?errorCode=500]
org.apache.jasper.JasperException: java.lang.NullPointerException
        at org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:521)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:415)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:447)
        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:379)
        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:292)
        at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:423)
        at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:342)
        at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:286)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
        at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.NullPointerException
        at org.codehaus.plexus.redback.taglib.jsp.IsNotReadOnlyUserManagerTag.condition(IsNotReadOnlyUserManagerTag.java:44)
        at javax.servlet.jsp.jstl.core.ConditionalTagSupport.doStartTag(ConditionalTagSupport.java:93)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspx_meth_redback_005fisNotReadOnlyUserManager_005f1(httpError_jsp.java:1187)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspx_meth_c_005fotherwise_005f1(httpError_jsp.java:928)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspx_meth_c_005fchoose_005f1(httpError_jsp.java:649)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspx_meth_ww_005fi18n_005f1(httpError_jsp.java:565)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspx_meth_ww_005fi18n_005f0(httpError_jsp.java:195)
        at org.apache.jsp.WEB_002dINF.jsp.error.httpError_jsp._jspService(httpError_jsp.java:124)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
        ... 21 more


"
MRM-1054,olo,Aleksander Adamowski PZU,2009-11-03T02:52:09.908Z,2009-11-03T02:52:09.908Z,"BTW, this error coincides with the one described in CONTINUUM-2221."
MRM-1054,oching,Maria Odea Ching,2009-11-03T21:13:07.653Z,2009-11-03T21:13:07.653Z,I think this was fixed in the 1.2.x series. The fix should probably be backported to the 1.1.x series..
MRM-1054,brettporter,Brett Porter,2009-11-03T22:43:01.882Z,2009-11-03T22:43:01.882Z,no longer supporting 1.1.x IMO since 1.2.x is GA.
MRM-1062,brettporter,Brett Porter,2009-02-26T08:28:27.873Z,2009-02-26T08:28:27.873Z,have you tried 1.1.3?
MRM-1062,olle.hallin,Olle Hallin,2009-03-02T04:47:28.845Z,2009-03-02T04:47:28.845Z,"Yes, I have. No difference.

"
MRM-1094,oching,Maria Odea Ching,2009-03-14T22:59:57.493Z,2009-03-14T22:59:57.493Z,Fixed in trunk -r754612.
MRM-1023,brettporter,Brett Porter,2010-02-23T01:52:58.221Z,2010-02-23T01:52:58.221Z,for testing
MRM-1023,brettporter,Brett Porter,2010-02-23T04:12:55.942Z,2010-02-23T04:12:55.942Z,"yes, ranges aren't being recognised at all at this point (it links to and creates a version [0.94,0.95) if that's used.)"
MRM-1074,brettporter,Brett Porter,2009-02-26T08:40:10.94Z,2009-02-26T08:40:10.94Z,fixed - thanks!
MRM-1065,olamy,Olivier Lamy (*$^%`),2012-04-03T10:54:21.494Z,2012-04-03T10:54:21.494Z,available via REST api.
MRM-1083,jameswdumay,James William Dumay,2009-02-11T19:08:12.909Z,2009-02-11T19:08:12.909Z,Committed in r743584.
MRM-1025,brettporter,Brett Porter,2009-11-19T18:57:48.455Z,2009-11-19T18:57:48.455Z,"the first steps of this have been done

- started a trivial metadata content repository implementation and consumer to generate metadata. This needs much more work to be useful, but gives the right API hooks (see r721955)
- split scanning from the repository layer (see r722004) - this means some code that needed scanning need not depend on the repository-layer (and therefore archiva-model)
- removed database cleanup consumers, relying on ""events"" from when Archiva notices a deletion (See note below)
- removed some unused database consumers (see MRM-1281)
- split the scheduler into modules to isolate database and indexer dependent code, so that the nexus index consumer need not have a dependency on the database (see r882207)

Note that currently:
- detecting deleted files on the filesystem and updating the index / database is non-functional (see r723334)

"
MRM-1025,brettporter,Brett Porter,2009-11-19T19:34:36.745Z,2009-11-19T19:34:36.745Z,"the next step is to remove the ProjectModelToDatabaseConsumer as this is the only remaining requirement for the second database scan.

The following relies on the project model directly:
- the dependency-graph module (in turn, used only by the DependencyTree tag in the webapp, as it was not implemented for XMLRPC)
- DefaultRepositoryBrowsing (see below)
- DatabaseProjectModelResolver. This is primarily used in populating the model itself, and the dependency graph. If the above usages are removed, this can be removed.

The following utilise DefaultRepositoryBrowsing:
- ""used by"" in the webapp
- all tabs of the artifact page (ShowArtifactAction)
- the ""shared model"" on the artifact parent page
- to determine the artifact packaging in XMLRPC search (falls back to JAR - this code should be improved)
- getDependencies in XMLRPC

The key step is to introduce a metadata content repository API that can be a single touchpoint for the application, rather than the current situation of spreading between the repository-layer and direct access to the database which makes the availability of the model unreliable, is not easily extensible by plugins, and causes the main need for slow pre-scanning.

I believe the next steps are to flesh out the new metadata content repository api to support querying the above information. While it could be made to continue to interface to the existing database using the same resolvers, I believe it is valuable to simplify it using existing APIs and then revisit functionality that might need to catch up. Therefore, it can have a dumb implementation to start with (perhaps going back to reading the POM and dependency tree on demand for most uses, and not implementing get used by initially), and be improved later. 

The API can be tested by migrating browse and xmlrpc to it, then removing the dependency graph module and unprocessed database consumers, model code, database scheduler and corresponding UI. If this is successful, other uses of the database can be moved over (RSS, other browse and xmlrpc functionality, and reporting) and the tree / used by made to work again. Following that, uses of repository-layer and model can be moved over as well and deletion scanning revisited."
MRM-1025,brettporter,Brett Porter,2009-12-02T05:20:06.687Z,2009-12-02T05:20:06.687Z,"the above has now been done. Along the way, several bugs have been fixed (usedBy and dependency tree now work more reliably and quickly) and some tests added.

While it works, the code is not production ready - it litters the home directory with property files and needs to be centralised. There is more testing to be added and there are probably some edge cases that remain problematic. In particular, Maven-1 formatted storage repositories is likely to not work.

Before moving to polishing, I'll continue proving the API by moving other archiva-database uses over to it, such as RSS, reporting, and any remaining bits of the webapp and XMLRPC.



"
MRM-1025,brettporter,Brett Porter,2009-12-16T02:37:20.994Z,2009-12-16T02:37:20.994Z,"this is now functionally complete on the branch. I'll spend some time fixing up some other known bugs (that may or may not have been pre-existing) and then look at what it takes to be production ready - both by reviewing things like error handling and logging, and performance of some of the more frequent operations."
MRM-1025,wsmoak,Wendy Smoak,2009-12-16T12:45:28.61Z,2009-12-16T12:45:28.61Z,"I built the branch at r891346 and tried the Jetty bundle, but http://localhost:8080/archiva is 503 with a complaint about configuration in the wrapper log.  Looks like it's trying to bind a sql datasource that (I assume) no longer exists."
MRM-1025,brettporter,Brett Porter,2009-12-16T16:25:36.241Z,2009-12-16T16:25:36.241Z,"thanks for testing it Wendy - I missed one change, should be good now"
MRM-1025,brettporter,Brett Porter,2010-02-23T01:32:17.256Z,2010-02-23T01:32:17.256Z,merged to trunk
MRM-1068,ctan,Maria Catherine Tan,2009-01-19T21:38:46.178Z,2009-01-19T21:38:46.178Z,attached patch for this fix
MRM-1068,oching,Maria Odea Ching,2009-01-19T23:32:43.479Z,2009-01-19T23:32:43.479Z,Patch applied to trunk -r735937. Thanks for the patch Marica!
MRM-1078,bob_walker99,Bob Walker,2009-02-09T05:36:02.393Z,2009-02-09T05:36:02.393Z,"My mistake, sorry. I had another test installation on another server pointing at the same database."
MRM-1070,whitefish,Heiko Morgen,2009-10-01T04:32:16.415Z,2009-10-01T04:32:16.415Z,Are there any plans to fix this issue in the near future of Archiva?
MRM-1070,brettporter,Brett Porter,2010-02-23T03:26:25.347Z,2010-02-23T03:26:25.347Z,for testing
MRM-1067,brettporter,Brett Porter,2010-03-01T00:03:12.387Z,2010-03-01T00:03:12.387Z,these are basically the same issue
MRM-1073,jameswdumay,James William Dumay,2009-02-10T17:32:26.36Z,2009-02-10T17:32:26.36Z,"Hey Steve, were you using the built in database too?"
MRM-1073,jameswdumay,James William Dumay,2009-02-10T17:47:22.301Z,2009-02-10T17:47:22.301Z,We need todo some extensive testing going between 1.1.3 and 1.2-m2 as there have been significant model changes.
MRM-1073,brettporter,Brett Porter,2009-03-06T02:25:19.371Z,2009-03-06T02:25:19.371Z,the company logo is an issue too
MRM-1073,brettporter,Brett Porter,2009-03-06T03:53:47.921Z,2009-03-06T03:53:47.921Z,the organisation URL is separate
MRM-1096,dschettl,Denis Schettl,2009-02-23T02:34:02.681Z,2009-02-23T02:34:02.681Z,"When I get the link for the missing icon I realized that the icon for javadoc also is missing. Here a list of icons that are missing:

/archiva/images/download-type-maven-plugin.png
/archiva/images/download-type-javadoc.png

I think that there should be images for the standard-files in java environment:
ear
war
rar
"
MRM-1056,axismundi,Marc Lustig,2009-06-04T02:26:37.973Z,2009-06-04T02:26:37.973Z,"We strongly support this proposal to add functionality for a ""force scan"".
Indeed users are quite annoyed by the ""Unable to find project model"" messages.
The option to pass a groupId/artifactId also makes sense in order to speed up the process."
MRM-1056,wsmoak,Wendy Smoak,2009-06-05T14:32:09.899Z,2009-06-05T14:32:09.899Z,"On irc, Brett mentioned possibly removing the database as a way to solve this problem.

As a user, I simply want Archiva to display all of my repository content, regardless of file dates or how it got added to the repo."
MRM-1056,wsmoak,Wendy Smoak,2009-09-08T23:10:53.232Z,2009-09-08T23:10:53.232Z,"I brought this up again on irc and we discussed adding a checkbox next to the 'Scan Repository' button.  If checked, it would mean to ignore the last scan date and scan the entire repo contents."
MRM-1056,oching,Maria Odea Ching,2009-09-17T02:54:56.247Z,2009-09-17T02:54:56.247Z,"Fix committed to trunk -r816084 with the following changes:
* add checkbox for processing all artifacts beside Scan Repository Now button in repositories page
* scan all artifacts if flag is set
* added unit tests
"
MRM-1056,oching,Maria Odea Ching,2009-09-17T03:28:08.032Z,2009-09-17T03:28:08.032Z,Docs updated to reflect these changes in trunk -r816092.
MRM-1056,oching,Maria Odea Ching,2009-09-18T04:00:24.284Z,2009-09-18T04:00:24.284Z,"Additional changes committed to trunk -r816545:
* added new method for creating task with scanAll flag
* added unit tests for creating tasks with different configs"
MRM-1046,oching,Maria Odea Ching,2009-02-06T01:18:51.999Z,2009-02-06T01:18:51.999Z,Tests are in commits -r 741051:741444.
MRM-1030,brettporter,Brett Porter,2011-03-04T11:42:51.466Z,2011-03-04T11:42:51.466Z,"I think the ContextDeployer might be a good option for this.

See http://stackoverflow.com/questions/5176486/how-to-make-the-stand-alone-archiva-distribution-the-root-application-under-jetty which has more details for those that want to configure it themselves."
MRM-1030,olamy,Olivier Lamy (*$^%`),2012-09-26T14:57:55.424Z,2012-09-26T14:57:55.424Z,fixed.
MRM-1011,jameswdumay,James William Dumay,2009-01-09T22:29:24.289Z,2009-01-09T22:29:24.289Z,Fix committed to trunk
MRM-1047,wsmoak,Wendy Smoak,2008-12-17T17:48:36.117Z,2008-12-17T17:48:36.117Z,"To reproduce:

Install Archiva 1.1.3
Add testuser and give it the manager role for the snapshots repo
At this point the 'Force User to Change Password' box is checked.

Attempt to log in as testuser with a browser, confirm that you are
redirected to the change password screen.
Click logout - do not change the password.

Configure settings.xml and pom.xml to deploy to Archiva as testuser

 settings.xml:
   <server>
     <username>testuser</username>
     <password>abc1234</password>
     <id>snapshots</id>
   </server>

 pom.xml:
 <distributionManagement>
   <repository>
     <id>snapshots</id>
     <url>dav:http://localhost:8080/archiva/repository/snapshots</url>
   </repository>
 </distributionManagement

Try ""mvn deploy"" -- it should fail, but it doesn't.

Edit the user and un-check the 'Force User to change password' checkbox.
Confirm that you can log in normally as testuser.
Try ""mvn deploy"" again - now it works.

Simulate an expired password:

Stop Archiva

Add conf/security.properties with:
security.policy.password.expiration.enabled=true
security.policy.password.expiration.days=90

> set DERBY_INSTALL=/path/to/db-derby-10.1.3.1-bin
> set PATH=%PATH%;%DERBY_INSTALL%/frameworks/embedded/bin
> ij

ij> connect 'jdbc:derby:/path/to/apache-archiva-1.1.3/data/databases/users;user=sa'
ij> update JDOUSER set LAST_PASSWORD_CHANGE = '2008-06-01 12:00:00'
where USERNAME = 'testuser';

Start Archiva

Edit the user and confirm that the Last Password Change is ~200 days ago.

Attempt to log in as testuser with a browser, confirm that you are
redirected to the change password screen.
Click logout - do not change the password.

Try ""mvn deploy"" - it should fail, but it doesn't.
"
MRM-1047,brettporter,Brett Porter,2009-03-10T00:52:41.068Z,2009-03-10T00:52:41.068Z,"locations where the password expiry is not checked (by searching for isLocked):
DefaultUserRepositories:85 (getObservableRepositoryIds), 157 (isAuthorizedToUploadArtifacts)
ArchivaServletAuthenticator:112 (isAuthorized)

will still need to test that the expiration date is also checked before this too, not just the flag."
MRM-1047,brettporter,Brett Porter,2009-03-18T01:24:42.148Z,2009-03-18T01:24:42.148Z,should also check for force password change in the above locations
MRM-1047,brettporter,Brett Porter,2009-03-19T10:33:46.989Z,2009-03-19T10:33:46.989Z,already taken care of by redback changes to throw exception if password must be changed on authz. The other instances in my comment do not need to do the secondary check as you must already be logged in to the interface for them to succeed
MRM-1064,brettporter,Brett Porter,2010-02-23T02:00:17.421Z,2010-02-23T02:00:17.421Z,for testing
MRM-1084,jameswdumay,James William Dumay,2009-02-12T01:00:02.097Z,2009-02-12T01:00:02.097Z,Committed in r743630.
MRM-1028,oching,Maria Odea Ching,2008-12-04T23:29:23.07Z,2008-12-04T23:29:23.07Z,Fixed in trunk -r723591.
MRM-1026,wsmoak,Wendy Smoak,2008-12-01T13:29:50.707Z,2008-12-01T13:29:50.707Z,"Currently only the system administrator can see the upload link on the menu.  The ifAnyAuthorized tag needs adjustment, but I'm not sure we have a role defined for this yet (which is why it's restricted to system admin).

I'm surprise the direct url works.  When you view the url directly, can you see _only_ the repos that you are a manager for in the dropdown, or all of them?"
MRM-1026,nidragedd,David Degardin,2008-12-02T02:22:34.842Z,2008-12-02T02:22:34.842Z,"Hi,

Actually, I can see all of them in the list, even those the user does not manage. I tried to upload artifact in a repository the user is not manager for and I get this message: ""User is not authorized to upload in repository XXX"". So, user can only upload in repositories he's manager for, it's OK.

Do you think there will be a role to upload ? I don't understand why there is a role ""repository manager"" that you can give to users and that those users cannot manage their repositories. So, why is this role for ?
I do not want to give ""system administrator"" role to users (they will also be system administrator on continuum, I do not want this to happen), just let them publish artifacts they have compiled.

For the moment, I'll edit the JSP file to hardcode the link but I'd be very happy if this could be solved.

Let me know if you need something else.

Thanks
David"
MRM-1026,wsmoak,Wendy Smoak,2008-12-02T12:36:14.562Z,2008-12-02T12:36:14.562Z,"Good to know the security is working on the upload part, (even if it's not working on the drop-down list contents.)

It should work as you describe, it's just not finished yet. :)"
MRM-1090,brettporter,Brett Porter,2009-02-26T08:11:17.089Z,2009-02-26T08:11:17.089Z,I believe this is no longer an issue in 1.2-M2
MRM-1090,brettporter,Brett Porter,2009-03-08T20:34:52.074Z,2009-03-08T20:34:52.074Z,"confirmed, part of search adjustments"
MRM-1090,brettporter,Brett Porter,2009-03-08T20:47:04.79Z,2009-03-08T20:47:04.79Z,"actually, I've found it still is"
MRM-1090,brettporter,Brett Porter,2010-02-22T23:53:56.785Z,2010-02-22T23:53:56.785Z,for review after the update of the nexus indexer
MRM-1097,brettporter,Brett Porter,2009-02-26T07:58:56.863Z,2009-02-26T07:58:56.863Z,"Marc, is it the same error as in MRM-1100?"
MRM-1097,axismundi,Marc Lustig,2009-02-26T08:53:44.637Z,2009-02-26T08:53:44.637Z,"I can only say the exception looks different.
But we seem to have fixed it on OS level. "
MRM-1097,peter_lawrey,Peter Lawrey,2009-03-09T05:17:16.253Z,2009-03-09T05:17:16.253Z,"Do you know when 1.2-M2 will be released so I can test this? 
It is unusable as it is see MRM-1103.  I can reproduce the error in under 1 minute.

BTW: I found that most of the fds left open were sockets rather than files. So hopefully this has been fixed too."
MRM-1097,occasl,Lou Sacco,2009-03-09T07:09:45.587Z,2009-03-09T07:09:45.587Z,Can you elaborate on the OS fix?  We have the same issue but what we did was crank up our FDs to 65K and it has seemed to gone away presumably because it gives Archiva more space to breath.  We also changed the Apache socket timeout in front of our Archiva servers from 0 (never) to 30 minutes.  The former seems a bit much considering the default is 1024 on RHEL.  Thoughts?
MRM-1097,brettporter,Brett Porter,2009-03-19T12:06:20.149Z,2009-03-19T12:06:20.149Z,"I've been running HTTP requests from Maven, some that are proxying and hitting the web interface, and following along in dtrace and checking lsof - all the FDs are getting closed, and likewise the sockets. This is with trunk.

I'll try hitting this with hundreds of proxy requests at a time and see if that produces some results."
MRM-1097,brettporter,Brett Porter,2009-03-20T08:54:09.926Z,2009-03-20T08:54:09.926Z,would you be able to test this with 1.2-M2 when it is released and see if it is still reproducible?
MRM-1097,occasl,Lou Sacco,2009-03-24T16:14:49.483Z,2009-03-24T16:14:49.483Z,We only have one environment to test right now but I could certainly give it a try when a GA release is available.
MRM-1097,ben.lidgey,Ben Lidgey,2009-05-19T06:03:08.037Z,2009-05-19T06:03:08.037Z,We get this happening on almost a daily basis running Archiva 1.2 on Tomcat 5.5.17.
MRM-1097,oching,Maria Odea Ching,2009-09-23T04:54:02.471Z,2009-09-23T04:54:02.471Z,Is this still persistent in the latest release (1.2.2)?
MRM-1097,fredrikj,Fredrik Jonson,2009-09-23T06:10:20.418Z,2009-09-23T06:10:20.418Z,"Marc, did you confirm that the ""ulimit -n 10000"" comand was successfully executed?

Normally the nofile hard limit, configured in /etc/security/limits.conf in most linux distributions, regulates how far ulimit may raise the limit on the current shell. Normally a ordinary user cannot raise the nofile limit beyond what is specified  in limits.conf, and when nofile isn't explicitly specified there, the default is normally 1024."
MRM-1097,axismundi,Marc Lustig,2009-09-23T06:20:43.466Z,2009-09-23T06:20:43.466Z,"Hi Frederik,
I call the ulimit-command in the inetd-script, which is itself called by user root. "
MRM-1097,batkinson,Brent N Atkinson,2009-11-28T17:08:59.31Z,2009-11-28T17:08:59.31Z,"Marc, are you using LDAP authentication/authorization when you experience this? I just patched my Archiva servers because they would halt when downloading a large number of artifacts. It turned out to be caused by LDAP connection leaks. I have fixed the leaks and can now download hundreds/thousands of artifacts without hitting the file descriptor limit. If you think you might be experiencing this, check out http://jira.codehaus.org/browse/REDBACK-185. I'll be submitting a patch soon."
MRM-1097,axismundi,Marc Lustig,2009-11-29T05:14:24.532Z,2009-11-29T05:14:24.532Z,"Hi Brent, we did not use LDAP authentication."
MRM-1097,britsp,Steve Pugh,2010-03-04T05:50:33.414Z,2010-03-04T05:50:33.414Z,"We also get this. Our max filehandles is set to the default 1024.
At the time the error was occuring, I did a 
ls -l /proc/PROCESSID/fd/
and confirmed there were 1024 filehandles. It also showed that vast majority of these were sockets.

So then I looked at the outgoing connections for this process using netstat.
I found there were about 800 connections stuck in CLOSE_WAIT state. These were connections to addresses of the external repositories we have configured in archiva. Could it be possible that these connections are not not being closed correctly in certain circumstances?

(Additional info: Our archiva is embedded in tomcat 6.0.16)
"
MRM-1097,brettporter,Brett Porter,2010-03-04T06:12:47.124Z,2010-03-04T06:12:47.124Z,"thanks for the additional information. I believe we've checked that angle before, but I'll take another look."
MRM-1097,timfulmer,Tim Fulmer,2010-09-30T17:18:32.817Z,2010-09-30T17:18:32.817Z,"This was passed to me after asking around about the ""too many open files"" our Archiva server gives after running about a week.  Could this be what we're seeing?

http://coldfused.blogspot.com/2007/02/mystery-of-too-many-open-files.html"
MRM-1097,andreyevbr,Andreyev Dias de Melo,2010-10-04T20:32:40.146Z,2010-10-04T20:32:40.146Z,"@Tim Fulmer I guess we are having this error too, but our error isn't the './././.' but indexer cfs deleted. We opened MRM-1419 to file it.

TIA!"
MRM-1097,oching,Maria Odea Ching,2010-10-04T20:47:26.116Z,2010-10-04T20:47:26.116Z,"Here's the related community discussion:

http://old.nabble.com/MRM-1097---too-many-open-file-td29856351.html"
MRM-1097,ctan,Maria Catherine Tan,2010-10-20T02:08:43.886Z,2010-10-20T02:08:43.886Z,"I found some streams that were not closed so I attached a patch for that.

I haven't reviewed the indexing part yet."
MRM-1097,brettporter,Brett Porter,2010-10-20T19:07:02.425Z,2010-10-20T19:07:02.425Z,"Hi Marica,

I haven't looked closely, but the ones for the test might certainly speed them up.

The only relevant change I can see is the Checksum one, but that is closed by the caller of the update. Do you know if this makes a difference? Are you sure none of these cause something to be closed twice?"
MRM-1097,gautencio,Gwen Harold Autencio,2010-10-28T21:59:43.571Z,2010-10-28T21:59:43.571Z,"As I have checked, when doing a deployment on the repository while doing a repo scan on it. 
I think archiva creates an IndexingContext for every file that is being added in the repository. Every IndexingContent may open streams for its IndexWriter and IndexReader. "
MRM-1097,oching,Maria Odea Ching,2010-11-04T05:20:36.876Z,2010-11-04T05:20:36.876Z,"After reviewing the code for the repo scanning and indexing, these are the different scenarios where an indexing task may be executed:
* When a repository scan is triggered, the {{beginScan(..)}} method of all the repository consumers is called. The indexing context is created at the {{beginScan(..)}} method of the indexer-consumer, where the index reader/writer is opened. For each artifact being processed by the indexer-consumer, an indexing task is created and is queued in the {{ArchivaIndexingTaskExecutor}}, which calls the Nexus indexer engine and indexes the artifact. Once the repository scan is finished, the {{completeScan(..)}} method of all the repository consumers is called. The indexing context created at the start by the indexer-consumer will then be queued as an indexing task in the {{ArchivaIndexingTaskExecutor}}, but this time the task is for closing the context.
* For each artifact deployment and for each artifact fetched from the proxies, the {{RepositoryContentConsumers.executeConsumers(..)}} method is called. This method does the same thing as with the repository scanner where it calls the {{beginScan(..)}} method of all repo consumers then processes the deployed/proxied artifact and then calls the {{completeScan(..)}} method. This means that an indexing context is created for every deployed/proxied artifact, which in turn results to an open index reader/writer while the indexing task for the artifact is still queued.
* It's also possible that a repo scanning may have already finished, but the indexing tasks for the artifacts in the repo are still queued. This means that the indexing context is still open because it would only be closed once all the indexing tasks for the artifacts in the repo have finished executing. Since the repo scanning has finished, a user would be able to trigger another repository scan or the repo scanning schedule would fire and execute again, thereby creating and opening another indexing context.

If these three scenarios happen at the same time, especially when the repository being scanned is a large one, the ""Too many open files"" is bound to happen.
"
MRM-1097,oching,Maria Odea Ching,2010-11-25T05:25:29.714Z,2010-11-25T05:25:29.714Z,"I made some fixes for this in trunk [-r1039004|http://svn.apache.org/viewvc?revision=1039004&view=revision]. These are the changes:
* upgrade nexus indexer to 3.0.1 + added logger bean which is needed by NexusIndexer
* for deployments/proxied artifacts, create and close indexing context when indexing task is executed as compared to the original behavior where the indexing context is created before it is queued (so as the indexing task queue builds up, more indexing contexts are being opened/created which might be causing the too many open files problem) 
* updated unit tests with changes made
"
MRM-1097,brettporter,Brett Porter,2010-11-25T17:01:23.026Z,2010-11-25T17:01:23.026Z,"would this be able to be applied to 1.3.x cleanly? I'd like to get a 1.4 out soon, but it'd be nice to address some of the key performance concerns in 1.3.x if this helps."
MRM-1097,oching,Maria Odea Ching,2010-11-26T01:20:12.21Z,2010-11-26T01:20:12.21Z,"I checked the codes of the classes that were changed in the fix I committed, they're mostly similar in 1.3.x and trunk. But we can't directly merge the changes using {{svn merge -c ...}} because some of the classes (like the {{IndexingTaskExecutor}} and the consumers) have been relocated to a different module in trunk."
MRM-1097,brettporter,Brett Porter,2010-12-02T17:25:33.571Z,2010-12-02T17:25:33.571Z,I'll try to backport the fix
MRM-1097,edelorme,Elie Delorme,2011-04-14T10:25:22.802Z,2011-04-14T10:25:22.802Z,"I just received this error on our archiva standalone 1.3.4 installation which we upgraded hoping that it would resolve the problem.
The ""Too many open files"" appeared after only 3 hours uptime.

{noformat}
2011-04-13 20:55:22,444 [WrapperSimpleAppMain] INFO  org.apache.maven.archiva.web.startup.Banner  - _________________________
                          __________________________________
               /\_       /                                  \
              /`/@),    |  On behalf of all of the alpacas   |
              |  (~'  __| toiling away on the Apache Archiva |
      _,--.___/  |    \      project team, I would like to   |
    ,' ,     (   |     \         welcome you to Archiva      |
    |  (      \  /      |               1.3.4                |
     \  )\_/  ,_/       |                                    |
     / /   ( |/         |     http://archiva.apache.org/     |
    ( |    ( |          |     users@archiva.apache.org       |
     \|     \|           \__________________________________/


2011-04-14 00:09:43,639 [btpool0-8] WARN  org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors  - Transfer error from repository ""terracotta"" for artifact org.hibernate:ejb3-persistence:1.0.2.GA::pom, continuing to next repository. Error message: Download failure on resource [http://www.terracotta.org/download/reflector/releases/org/hibernate/ejb3-persistence/1.0.2.GA/ejb3-persistence-1.0.2.GA.pom]:Error transferring file: Too many open files (cause: java.net.SocketException: Too many open files)
{noformat}"
MRM-1097,brettporter,Brett Porter,2011-04-16T17:44:54.093Z,2011-04-16T17:44:54.093Z,"Elie, as this is closed can you file a new issue against 1.3.4? There may be an additional cause, or it may require tuning on your limits."
MRM-1097,manfredjs,Manfred Schrhoff,2011-08-31T10:21:06.634Z,2011-08-31T10:21:06.634Z,"Hi,

We're running Archiva 1.3.5 under Tomcat 7.0.4. We still run into the issue of ""Too many open files"" when running. We cleared out the local tomcat m2 repository, and while running a  build, soon we get this error.
We've also updated the /etc/security/limits.conf file for the tomcat user to:

tomcat   soft   nofile   65535
tomcat   hard   nofile   65535

but without any luck.

Is there any solution to this issue?"
MRM-1097,brettporter,Brett Porter,2011-08-31T10:33:26.792Z,2011-08-31T10:33:26.792Z,"Manfred, it's probably best to pursue this through the users@ list, or a new issue if you have a way to reproduce it. This issue was about a specific thing that was fixed some time back, and we'll lose track of comments here since it is closed. Thanks!"
MRM-1072,brettporter,Brett Porter,2009-01-29T16:03:58.103Z,2009-01-29T16:03:58.103Z,have you tested this with 1.2-M1?
MRM-1072,dantran,Dan Tran,2009-01-29T18:48:24.331Z,2009-01-29T18:48:24.331Z,"I cant test with 1.2-M1 since there is no upgrade path.

-D"
MRM-1072,jameswdumay,James William Dumay,2009-01-30T23:48:32.205Z,2009-01-30T23:48:32.205Z,"Hey Dan, what do you mean there is no upgrade path to m1? Is this the db schema issue?"
MRM-1072,dantran,Dan Tran,2009-01-30T23:55:48.064Z,2009-01-30T23:55:48.064Z,"1.2-M1 archiva cannot automatically upgrade existing 1.1.x archiva.  Of course there are schema changes between the 2 version.

In order to me to upgrade to 1.2-M1, I will need to reconfigure Archiva from scratch which is not an option at this moment until I find sometimes
"
MRM-1072,brettporter,Brett Porter,2009-03-08T16:55:40.052Z,2009-03-08T16:55:40.052Z,confirmed fix in 1.2-m1
MRM-1072,dantran,Dan Tran,2009-03-11T12:40:21.961Z,2009-03-11T12:40:21.961Z,I am able to upgrade from 1.1.3 to 1.2-M1 by regenerate database/archiva ( ie remove it and let archiva to create it again ).  Now my problem solved!!!
MRM-1002,jzurbano,jzurbano,2009-07-24T01:03:10.509Z,2009-07-24T01:03:10.509Z,"MRM-1002-site.patch:
- moved the 'System Requirements' section at the top before the 'Current Release...'

MRM-1002-archiva-docs.patch:
- replaced the breadcrumbs to point to the documentation's index to avoid
-- the directory listing when accessing http://archiva.apache.org/docs/
-- being pointed to a non-existing page like http://archiva.apache.org/docs/1.2-M1/docs/1.2-M1
- added 'Downloads' link in site.xml
- updated the evaluateBeanshell condition to coincide with site.xml modification "
MRM-1002,oching,Maria Odea Ching,2009-07-28T02:50:55.806Z,2009-07-28T02:50:55.806Z,Patches applied to trunk -r798430 and -r798431. Thanks for the patches Jev!
MRM-1002,sebb@apache.org,Sebb,2010-01-18T09:58:35.065Z,2010-01-18T09:58:35.065Z,"As far as I can tell, none of the broken or incorrect links have been fixed on the site."
MRM-1002,brettporter,Brett Porter,2010-01-18T13:22:34.186Z,2010-01-18T13:22:34.186Z,we didn't re-do the old documentation - but fixed it in 1.2.2 and onwards. All of the issues seem to be fixed except for the logo links and versions index page so I'll create new issues for that.
MRM-1022,oching,Maria Odea Ching,2009-03-18T05:24:05.899Z,2009-03-18T05:24:05.899Z,Closing as duplicate of MRM-1117
MRM-1044,oching,Maria Odea Ching,2009-02-06T02:22:27.401Z,2009-02-06T02:22:27.401Z,This seems to be working fine now after the changes made in the search implementation.
MRM-1066,dimand,Marcus Dimand,2009-02-13T07:42:07.423Z,2009-02-13T07:42:07.423Z,"To Mr. Brett Porter

Dear Brett,

We need to know how to go on with Maven Archiva in our installation. Could you please answer the following questions, regarding the bug we reported:

1) Are you planning to fix this bug?
2) When will you be able to do this?
3) Are we on the right track waiting for a solution or should we find alternatives?
 
Thanks and regards,
Marcus Dimand"
MRM-1066,jameswdumay,James William Dumay,2009-02-15T18:29:25.528Z,2009-02-15T18:29:25.528Z,"Committed in r744785. 

Marcus, this fix will be in the upcoming Archiva 1.2-m2 release. Could you please test this?"
MRM-1066,jameswdumay,James William Dumay,2009-02-15T18:39:46.908Z,2009-02-15T18:39:46.908Z,"As a note, when the context is destroyed we call close() on the ApplicationContext. This is because we initialize it ourselves in Plexus-Spring."
MRM-1066,dimand,Marcus Dimand,2009-03-09T09:56:20.399Z,2009-03-09T09:56:20.399Z,"Implementation of r744785 does not solve the problem. 
We checked the correct implementation and tested again but the problem still exists. 

Best regards, 
Marcus"
MRM-1066,dimand,Marcus Dimand,2009-06-04T03:23:35.422Z,2009-06-04T03:23:35.422Z,"Dear Mr. Brett Porter,
Dear Mr. James William Dumay,

As mentioned previously we checked your provided bug fix. Unfortunally it doesn't solve the bug.
We worked also on a solution and we realized following:
 - When the application starts, it's lifecycle starts also some Queues and Schedulers.
 - Those Threads are still running even the application has shutdown,
   because the application's lifecycle doesn't stop those threads. 
 - Hence the shutdown process is not proper performed.
 - The execution of a scheduled thread raises an exception as the application is already stopped.
 
Unfortunally we didn't find any way to solve this issue in the lifecycle configuration of the application,
as we are not familiar with plexus and the archiva architecture.
But we were able to implement a workaround in the ArchivaStartup class that shutdown the mentioned 
ressources and closes the application context.
To reproduce the bug it is important to wait till all threads (ThreadPool) are started, the solution is to set the ""Managed Repository"" scan cronjob to a minute interval and then wait till all threads are started.
We have tested this piece of code and it seems to work.
Please be so kind and review the changes and maybe some one of you guys is able to solve the issue 
on right place. We hope that our workaround helps you a little bit to find a proper solution. You can 
find the piece of code attached to the issue.

Best regards,
Marcus Dimand"
MRM-1066,dimand,Marcus Dimand,2009-06-04T03:25:47.675Z,2009-06-04T03:25:47.675Z,Workaround see above under 'File Attachments'
MRM-1066,oching,Maria Odea Ching,2009-07-28T03:49:38.675Z,2009-07-28T03:49:38.675Z,Thanks for the submitting the workaround Marcus :) I'll take a look at it. 
MRM-1066,gautencio,Gwen Harold Autencio,2009-08-19T21:18:09.059Z,2009-08-19T21:18:09.059Z,"Tried to replicate issue using trunk r806019.

Steps that I took.
1. Setup archiva webapp in tomcat
2. Add a managed repository and set cron expression to 1 minute 
3. After a while, stop archiva.

Logs in catalina.out displays.

Aug 20, 2009 10:00:00 AM org.apache.catalina.loader.WebappClassLoader loadClass
INFO: Illegal access: this web application instance has been stopped already.  Could not load org.apache.maven.archiva.scheduled.tasks.DatabaseTask.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
	at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1272)
	at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1232)
	at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
	at org.apache.maven.archiva.scheduled.DatabaseTaskJob.execute(DatabaseTaskJob.java:59)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:191)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:516)
Exception in thread ""defaultScheduler_Worker-0"" java.lang.NoClassDefFoundError: org/apache/maven/archiva/scheduled/tasks/DatabaseTask
	at org.apache.maven.archiva.scheduled.DatabaseTaskJob.execute(DatabaseTaskJob.java:59)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:191)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:516)
"
MRM-1066,marklmarkus,Markus Markl,2009-11-05T02:05:54.828Z,2009-11-05T02:05:54.828Z,"Is there a possibilty to include a fix in version 1.2.3 as planned recently?

Thanks!

Regards,
Markus

"
MRM-1066,brettporter,Brett Porter,2010-02-28T23:51:27.987Z,2010-02-28T23:51:27.987Z,"for review in 1.3.1, patch attached."
MRM-1066,oching,Maria Odea Ching,2010-05-18T03:54:47.121Z,2010-05-18T03:54:47.121Z,"I'm still able to reproduce this problem in 1.3.x branch. Although I don't get the exact same stack trace, I can see the thread still running after I've shutdown Tomcat."
MRM-1066,oching,Maria Odea Ching,2010-05-20T08:42:05.232Z,2010-05-20T08:42:05.232Z,Thanks for the patch Marcus! I tweaked it a bit and applied it to 1.3.x branch in [-r946618|http://svn.apache.org/viewvc?revision=946618&view=revision] and merged it to trunk in [-rr946631|http://svn.apache.org/viewvc?revision=946631&view=revision].
MRM-1060,brettporter,Brett Porter,2009-02-26T08:37:17.669Z,2009-02-26T08:37:17.669Z,"this is a jarsigner bug, but we need to work around it in our build regardless"
MRM-1093,brettporter,Brett Porter,2009-03-20T11:15:22.3Z,2009-03-20T11:15:22.3Z,"applied, thanks!"
MRM-1015,jameswdumay,James William Dumay,2009-02-15T20:17:28.194Z,2009-02-15T20:17:28.194Z,Consumer API has been moved to spring.
MRM-1076,oching,Maria Odea Ching,2009-02-18T00:51:24.361Z,2009-02-18T00:51:24.361Z,"Fixed in trunk -r745393:
- remove second invocation of complete scan in RepositoryContentConsumers which causes the NPE
"
MRM-1076,jbaldassari,James Baldassari,2009-04-19T14:30:53.872Z,2009-04-19T14:30:53.872Z,"I'm getting this same error in Archiva 1.2.  This is supposed to be fixed in 1.2, isn't it?  The same stack trace is in the logs, and I get an HTTP 500 when attempting to deploy a new snapshot.  A temporary work-around is to delete .index* in my repository root, restart Archiva, and run the indexer.  That only fixes it for a few days, though."
MRM-1076,daniel.takai,Daniel Takai,2009-05-19T05:43:42.431Z,2009-05-19T05:43:42.431Z,I'm getting the same exception with Archiva 1.2.
MRM-1035,brettporter,Brett Porter,2010-02-23T03:24:42.726Z,2010-02-23T03:24:42.726Z,for testing
MRM-1035,brettporter,Brett Porter,2010-03-01T03:14:01.527Z,2010-03-01T03:14:01.527Z,looks to be the same as another issue
MRM-1032,oching,Maria Odea Ching,2009-03-15T01:50:39.752Z,2009-03-15T01:50:39.752Z,Fixed in trunk -r754623.
MRM-1021,brettporter,Brett Porter,2010-03-23T01:16:10.531Z,2010-03-23T01:16:10.531Z,"We should probably outline more what we think this requires, as I'd expect the approach to be somewhat different in Archiva..."
MRM-1021,wsmoak,Wendy Smoak,2011-02-23T14:42:06.421Z,2011-02-23T14:42:06.421Z,"Pretty sure this got handled as part or MRM-980 (which turned into way more than just merging repos).
"
MRM-1079,jameswdumay,James William Dumay,2009-02-15T19:55:46.468Z,2009-02-15T19:55:46.468Z,I commented out the bulk of this consumer when I removed the old search API. The tests are there but are also commented out.
MRM-1079,oching,Maria Odea Ching,2009-02-19T05:24:30.061Z,2009-02-19T05:24:30.061Z,"Fixes in trunk -r745821:
- update implementation of index cleanup consumer
- moved DatabaseConsumers and LuceneCleanupRemoveIndexedConsumer to spring
- removed old classes and test stubs"
MRM-1079,oching,Maria Odea Ching,2009-02-20T01:09:39.787Z,2009-02-20T01:09:39.787Z,"Additional fixes in trunk -r746169:
- updated and activated tests for index cleanup consumer
- cleaned up index cleanup consumer
"
MRM-1061,gautencio,Gwen Harold Autencio,2009-02-09T04:15:10.559Z,2009-02-09T04:15:10.559Z,"The cause of this issue is that the effective pom is not loaded.

http://jira.codehaus.org/browse/MRM-731 may be related.

Thanks."
MRM-1061,odehon,Olivier Dehon,2009-03-01T08:43:22.681Z,2009-03-01T08:43:22.681Z,"One possible way of solving this would be to require that artifacts be built with an invocation of the help:effective-pom mojo, and Jar up the generated effective POM inside the artifact (like in META-INF/maven, alongside the actual pom.xml), or maybe attach the generated effective POM file to the project so that it gets deployed alongside the main artifact.

If present, Archiva could then exploit the effective POM information to generate its index and DB info.
If not present, then the behavior would remain the same as today...

My $.02

-Olivier"
MRM-1061,rsaddey,Reiner Saddey,2009-05-21T11:12:03.765Z,2009-05-21T11:12:03.765Z,"I'd rather prefer Archiva do the effective pom stuff itself (or anything equivalent in order to properly interpret a maven 4.0.0 model version pom), because...

1. in my opinion, supplying additional hints to Archiva within a maven project in a non-standard way would be a plain no-no
2. it would be hard to modify existing external maven projects - and doing so would inevitably lead to chaos and confusion

Maybe Archiva should integrate emerging dependency tools (e.g. http://code.google.com/p/q4e/wiki/DependencyGraphViewer) instead of creating one of its own.

Last-not-least I wonder, whether it would be cleaner and easier to separate concerns, i.e. let the repository manager just do its archiving task and use a universal viewer that can be used with any repository manager. At first I thought that there's something missing from other repository managers. Now, when I come to think of it, it might turn out not to be a bug, but a feature instead. 

Just my thoughts,
Reiner 
"
MRM-1061,odehon,Olivier Dehon,2009-05-21T17:06:41.378Z,2009-05-21T17:06:41.378Z,"We are talking about the indexing facility of Archiva, not viewing or archiving. The only way for any indexing tool (Archiva or external standalone indexer) to have the relevant information that was used at build time is to have access to the effective pom that was used to build the artifact.

The effective pom is not just additional hints, it is the actual build setup for that version of that artifact, and it seems fairly standard to me.

Maybe even the Jarring-up of the effective pom could be a nice enhancement to the Archiver(s) that Maven uses to construct the Jars/Wars/Ears... helping understand what the actual environment was when the artifact was built.

YMMV... -Olivier

"
MRM-1061,rsaddey,Reiner Saddey,2009-05-21T19:16:56.598Z,2009-05-21T19:16:56.598Z,"The technical process of indexing is not an end in itself. So what does Archiva index for?

The Maven repository format is self contained and does not require any additional indexing for clients to successfully retrieve or browse artifacts. Indeed Maven build processes accept file system based repositories (and even create them on their own as well within ~/.m2/repository). 

Basically, indexing is a way to prepare information in advance, that would otherwise be time consuming to compute on demand. Where could this demand stem from? Besides some internal processes within Archiva (possibly for efficiently implementing automatic purges or repository groups, aka virtual repositories) it's humans (or continuous build systems), that benefit from structural information, such as 'Used By' and 'Dependency Tree'.

For 'Used By' and 'Dependency Tree' we would like to have two choices to derive information from:

1. Dependencies as stated in the pom.xml of an artifact
2. Dependencies as having been interpolated during the actual build of an artifact

However, alternative 2 requires comprehensive access to the information that has been used within the reactor at the time it was performing the actual build of an artifact. To my knowledge, as of now, Maven does not specify a format that would describe how this information should be bound or incorporated within the pom.xml that results from a Maven build. 

If this additional information were supplied in a non-agreed-upon way, any dependency tree would be bound to be very small and incomplete, showing nodes whose vertices are unknown, as the nodes most probably would lack the additional information that would be required to complete the tree (e.g. most, if not all, artifacts present within repo1.maven.org).

In order to be of relevant use, alternative 2 cannot be implemented in a local fashion, but instead requires cooperation that is far beyond the reach of any artifact repository manager that solely accepts what has been produced by Maven, Hudson or Continuum. It's only them builders and the data they provide who can help us understand what and how they were doing while producing an artifact.

In the meantime we should stick to alternative 1 and try to extract information from the pom.xml in a way that reflects its semantics as truly as possible. In my opinion, Gwen's suggestion appears to fit the bill for now."
MRM-1061,odehon,Olivier Dehon,2009-05-21T20:36:37.667Z,2009-05-21T20:36:37.667Z,"Indexing/Searching is one of most important features for which I use Archiva. It provides the ability for a developer to retrieve artifacts based on method names, package names, dependencies used, ... If it were working properly, it would also allow to perform impact analysis, report statistics on shared components usage... Possibilities are endless.

The simple (and common) case where dependency versions are defined in the dependencyManagement section of the parent pom is enough to render the search feature useless, let alone when dependencies themselves are dependent on the activation of a profile.

I don't understand why using the output from help:effective-pom cannot be agreed upon... After all, it is a pom also. Even better it is *the* pom.

I wonder how Nexus deals with this...
"
MRM-1061,brettporter,Brett Porter,2010-02-23T03:25:33.515Z,2010-02-23T03:25:33.515Z,for testing
MRM-1061,brettporter,Brett Porter,2010-02-28T23:08:44.831Z,2010-02-28T23:08:44.831Z,fixed with changes in trunk
MRM-1098,brettporter,Brett Porter,2009-02-23T23:55:23.827Z,2009-02-23T23:55:23.827Z,"proposed patch, waiting for wagon to be released"
MRM-1037,jameswdumay,James William Dumay,2008-12-15T20:14:21.588Z,2008-12-15T20:14:21.588Z,"Committed revision 726928.

* timestamp versions are merged to -SNAPSHOT versions
* duplicate artifacts are now merge by use of boolean filters
* we now search the correct fields
* content search has been removed (more accurate results)
* added more tokenizers for groupId, artifactId, version, etc
* Artifact Id's are weighted to improve quicksearch results"
MRM-1037,oching,Maria Odea Ching,2009-02-17T21:40:14.406Z,2009-02-17T21:40:14.406Z,Closing issue as all sub-tasks are already fixed.
MRM-1058,brettporter,Brett Porter,2009-01-29T16:00:16.932Z,2009-01-29T16:00:16.932Z,that's an out of memory error
MRM-1058,wsmoak,Wendy Smoak,2009-03-05T22:56:14.231Z,2009-03-05T22:56:14.231Z,"This happened again today... Maven builds were failing, and when I checked Archiva I found the same Error 500.

Is there any info I can capture that would help track it down?"
MRM-1058,carlos,Carlos Sanchez,2009-05-28T19:33:30.638Z,2009-05-28T19:33:30.638Z,"I have built an rpm from archiva and i'm getting the same error every time I install it. After restarting the server works.

The files are there in the tmp directory and permissions seem to be ok

tmp/Jetty_0_0_0_0_8080_root____.z49yad/jsp/org/apache/jsp/index_jsp.class
tmp/Jetty_0_0_0_0_8080_root____.z49yad/jsp/org/apache/jsp/index_jsp.java
"
MRM-1058,carlos,Carlos Sanchez,2009-05-28T19:35:10.071Z,2009-05-28T19:35:10.071Z,"I'm using archiva 1.2.1 btw, but also happened with a previous version. I'm wondering if there's some environment variable. Java versions are the same, 1.6.0 and OS is CentOS 5.2"
MRM-1058,brettporter,Brett Porter,2010-02-23T02:17:41.913Z,2010-02-23T02:17:41.913Z,this should be resolved by the memory enhancements in 1.3
MRM-1058,bpfoster,Ben Foster,2010-03-09T13:30:47.068Z,2010-03-09T13:30:47.068Z,We're running 1.3 and consistently getting this error after Archiva has been running for a couple days.
MRM-1058,brettporter,Brett Porter,2010-03-09T17:48:17.352Z,2010-03-09T17:48:17.352Z,"Ben, do you have any additional data? What are your heap settings, platform, repository sizes?"
MRM-1058,bpfoster,Ben Foster,2010-03-10T09:26:43.687Z,2010-03-10T09:26:43.687Z,"Hi Brett.  Sure - we're running as a standalone service on Windows Server 2003.  2 repositories: One with 24362 files, the other with 2746 files.  I assume the heap settings are configured in wrapper.conf?  But both the initmemory and maxmemory are commented out (default)."
MRM-1058,brettporter,Brett Porter,2010-03-11T06:50:06.116Z,2010-03-11T06:50:06.116Z,"are you able to run jconsole to connect when it happens and report on whether memory is an issue in one of the heaps? Are there any other exceptions in the Archiva logs?

I'm not entirely sure if it is actually a memory issue - I have a larger repository, the default memory settings, and run for much longer periods of time without issue.

It could be related to being a service - though that doesn't explain the issues seen by Wendy and Carlos.

Did you experience this with a previous version?"
MRM-1058,bpfoster,Ben Foster,2010-03-11T11:12:02.937Z,2010-03-11T11:12:02.937Z,"Not that this tells much, but below is the stacktrace in wrapper.log when I get the error.  I didn't see any other relevant info in the other logs.  I had to enable the JMX agent on the Archiva process.  Once the problem pops back up, I'll take a look in jconsole and see what I see.  Is there any information in particular you'd like from there?
Yes, I think we did see this problem in earlier versions, but it seems to be more prevalent now.
\\
\\
----



INFO   | jvm 1    | 2010/03/11 10:33:59 | 2010-03-11 10:33:59.197::WARN:  /archiva/
INFO   | jvm 1    | 2010/03/11 10:33:59 | java.lang.ClassNotFoundException: org.apache.jsp.index_jsp
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at java.net.URLClassLoader$1.run(Unknown Source)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at java.security.AccessController.doPrivileged(Native Method)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at java.net.URLClassLoader.findClass(Unknown Source)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.apache.jasper.servlet.JasperLoader.findClass(JasperLoader.java:204)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:190)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:122)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.apache.jasper.JspCompilationContext.load(JspCompilationContext.java:639)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:192)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:372)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:486)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:380)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:502)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:389)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:417)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:334)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:493)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:502)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:413)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1148)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:118)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:52)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1148)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.apache.struts2.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:99)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1148)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1148)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:387)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:417)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.Server.handle(Server.java:326)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:534)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:864)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:539)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
INFO   | jvm 1    | 2010/03/11 10:33:59 | 	at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:451)
"
MRM-1058,brettporter,Brett Porter,2010-03-11T16:22:30.985Z,2010-03-11T16:22:30.985Z,"From jconsole - looking at which heap is exhausted, if any at all."
MRM-1058,brettporter,Brett Porter,2010-03-18T22:50:19.217Z,2010-03-18T22:50:19.217Z,did you find any more information?
MRM-1058,bpfoster,Ben Foster,2010-03-23T17:34:19.797Z,2010-03-23T17:34:19.797Z,"Hey Brett - of course, as soon as I enable jconsole, it stops crashing.  That is the only difference I made to the config and now it's been almost 2 weeks strong.  Odd considering I was getting the error after only having restarted a few days earlier.  I'll continue to keep an eye on it."
MRM-1058,brettporter,Brett Porter,2010-03-25T21:20:50.477Z,2010-03-25T21:20:50.477Z,:) Let us know how you go
MRM-1058,bpfoster,Ben Foster,2010-04-07T08:18:50.664Z,2010-04-07T08:18:50.664Z,"Ok, we were able to reproduce with jconsole running.  I'm still not sure what I should look at, but the heap memory usage hovers between 40-50Mb, with pretty regular climb/GC cycles."
MRM-1058,brettporter,Brett Porter,2010-04-07T16:47:01.428Z,2010-04-07T16:47:01.428Z,"that's still a little under the default limit. there are 5 graphs at the bottom right of jconsole - which of them is consistently maxed out? You can click on them to get their name and chart.

You could try changing the max setting in wrapper.conf to see if it helps to something like 128m"
MRM-1058,bpfoster,Ben Foster,2010-04-09T13:40:57.64Z,2010-04-09T13:40:57.64Z,"OK:
Eden Space: Climbs from 0-100%
Survivor Space: Hovers between ~20-99% (usually closer to the 99% end)
Tenured Gen: Pretty constant around 75%

Code Cache: Constant ~50%
Perm Gen (shared-rw): Constant ~55%
Perm Gen (shared-ro): Constant ~70%
Perm Gen: Constant ~70%


I'll set the max memory to 128m, restart, and see if we have a problem in a little while."
MRM-1058,brettporter,Brett Porter,2010-12-29T07:01:27.011Z,2010-12-29T07:01:27.011Z,more memory issues were fixed in 1.3.3 - if this problem persists with that please let us know
MRM-1009,brettporter,Brett Porter,2008-11-19T01:24:35.162Z,2008-11-19T01:24:35.162Z,did this work in 1.1.3?
MRM-1009,tjormola,Tuomas Jormola,2008-11-19T13:00:38.982Z,2008-11-19T13:00:38.982Z,"I tried to deploy on Tomcat using the same settings, and it works. Looks like there's something wrong with Resin... I'm closing this issue."
MRM-1007,brettporter,Brett Porter,2008-11-19T01:27:41.062Z,2008-11-19T01:27:41.062Z,"will investigate the first one

can you please file the org url issue separately?"
MRM-1007,hst,hst,2008-11-19T01:36:02.594Z,2008-11-19T01:36:02.594Z,"Thanks, 

I opened a new issue for the url problem.

http://jira.codehaus.org/browse/MRM-1011"
MRM-1007,gautencio,Gwen Harold Autencio,2009-07-23T01:29:51.548Z,2009-07-23T01:29:51.548Z,"This seems to be fixed in 1.2.2-SNAPSHOT, all available version of the artifact are shown from different repositories of the same repository group.

But the repository group doesn't seem to be updated when an artifact or is deployed or uploaded to one of its repositories or adding / deleting a repository of a group.
e.g.
* Repository Group - ( A ) with 2 repositories ( X and Y ).

Upload an artifact to either X and Y.
Then browse the A which is the repository group and look for the uploaded artifact.
The artifact can't be seen when browsing through the repository group but can be seen through the repository only.

Adding another repository to the group. Artifacts of the new added repository can't be seen when browsing the repository group.

Deleting a repository inside the group. The artifacts of the repository that was deleted from the group can still be seen when browsing the repository group.
"
MRM-1007,gautencio,Gwen Harold Autencio,2009-07-23T21:49:03.188Z,2009-07-23T21:49:03.188Z,Created another issue for the comments I made above : MRM-1225
MRM-1007,oching,Maria Odea Ching,2009-07-27T06:04:54.512Z,2009-07-27T06:04:54.512Z,Can we close this issue already since it's no longer reproducible in 1.2.2-SNAPSHOT?
MRM-1051,brettporter,Brett Porter,2008-12-22T04:24:24.319Z,2008-12-22T04:24:24.319Z,"I believe this is a duplicate with MRM-616 - can you confirm?

Some environments seem to have worked around it, though I'm not sure how. We'd be keen to patch Archiva to support this."
MRM-1019,brettporter,Brett Porter,2009-03-05T22:49:49.251Z,2009-03-05T22:49:49.251Z,"what to do, specifically?"
MRM-1075,oching,Maria Odea Ching,2009-02-04T04:07:25.852Z,2009-02-04T04:07:25.852Z,Fixed REDBACK-193 for the NPE. Need to upgrade Archiva's Redback to the latest in trunk or to 1.2-beta-3 when released.
MRM-1075,oching,Maria Odea Ching,2009-02-19T21:25:05.278Z,2009-02-19T21:25:05.278Z,Verified as fixed after the upgrade to 1.2-SNAPSHOT
MRM-1075,thosor,Thomas,2009-08-25T09:38:34.854Z,2009-08-25T09:38:34.854Z,new error  MRM-1237
MRM-1020,jameswdumay,James William Dumay,2008-11-23T21:16:41.668Z,2008-11-23T21:16:41.668Z,"Committed in 720105.

Thanks again for the patch Martin :)"
MRM-1034,jameswdumay,James William Dumay,2008-12-09T19:30:17.077Z,2008-12-09T19:30:17.077Z,Committed in r724949
MRM-1043,oching,Maria Odea Ching,2009-02-13T05:28:03.154Z,2009-02-13T05:28:03.154Z,"Initial changes committed to trunk -r744080:
- moved the advanced search to the quick search page
- dynamically add search criteria
- added additional test in SearchAction

The following still needs to be done:
- add rowCount in search criteria
- provide list for repositories that can be searched
"
MRM-1043,oching,Maria Odea Ching,2009-02-16T01:33:25.85Z,2009-02-16T01:33:25.85Z,"Fixed in -r 744797 and 744832:
- provide list for repositories that can be searched
- added row count in search criteria
- cleaned up jsp
"
MRM-1017,brettporter,Brett Porter,2010-02-23T03:23:52.838Z,2010-02-23T03:23:52.838Z,for testing
MRM-1001,wsmoak,Wendy Smoak,2008-11-13T18:55:18.355Z,2008-11-13T18:55:18.355Z,There is some discussion on dev@continuum about using Liquibase for this.  http://www.liquibase.org/  (It's LGPL though...)
MRM-1001,evenisse,Emmanuel Venisse,2008-11-13T23:45:18.493Z,2008-11-13T23:45:18.493Z,LGPL isn't really an issue for us because we wont redistribute it directly
MRM-1001,dantran,Dan Tran,2008-11-14T11:16:00.359Z,2008-11-14T11:16:00.359Z,"If i remember correctly, Archiva dev had to yank out jasperreport  a LGPL type license out of archiva distribution.

What is the different if we use lidquibase for the automatic db upgrade?

"
MRM-1001,evenisse,Emmanuel Venisse,2008-11-15T04:06:57.974Z,2008-11-15T04:06:57.974Z,"It isn't the same case.

We can't use jasperreport because we can't distribute it with Archiva.
About liquibase, we have nothing to distribute because users will can download it directly or use the maven plugin like it can use the checkstyle plugin with Checkstyle under LGPL. We have nothing to distribute."
MRM-1001,wsmoak,Wendy Smoak,2008-11-15T09:06:45.062Z,2008-11-15T09:06:45.062Z,"Dan is talking about an _automatic_ database upgrade, which would imply that Archiva can do it with no user intervention.

"
MRM-1001,brill,Brill Pappin,2008-11-19T15:36:52.576Z,2008-11-19T15:36:52.576Z,"Wait a sec, why can't you use LGPL?
Isn't it the point of LGPL that you *can* use it without the rest of your code being under the same lic?
"
MRM-1001,brettporter,Brett Porter,2008-11-19T15:45:23.649Z,2008-11-19T15:45:23.649Z,"Brill: http://www.apache.org/legal/resolved.html

It cannot be required in a default installation as it affects the license of the overall work."
MRM-1001,brettporter,Brett Porter,2009-03-05T22:47:37.571Z,2009-03-05T22:47:37.571Z,review if this is an issue for 1.1 -> 1.2
MRM-1001,brettporter,Brett Porter,2009-03-06T06:34:49.257Z,2009-03-06T06:34:49.257Z,no issue in upgrading now
MRM-1001,brettporter,Brett Porter,2010-02-23T01:50:27.035Z,2010-02-23T01:50:27.035Z,"we ensure the redback database autoupgrades, and the archiva database has been removed"
MRM-1095,gautencio,Gwen Harold Autencio,2009-02-22T23:53:27.957Z,2009-02-22T23:53:27.957Z,"Hi attached patch, for fix of the issue.
Checks if isScanned value a ManagedRepositoryConfiguration before being scheduled to be scanned."
MRM-1095,jameswdumay,James William Dumay,2009-02-23T17:23:31.742Z,2009-02-23T17:23:31.742Z,Thanks Gwen! Are we able to get a unit test for this too please?
MRM-1095,jameswdumay,James William Dumay,2009-02-23T17:24:29.286Z,2009-02-23T17:24:29.286Z,Committed patch in -r747198.
MRM-1053,wsmoak,Wendy Smoak,2008-12-27T14:08:17.556Z,2008-12-27T14:08:17.556Z,"Can you explain a bit more about what you want Archiva to do?  It sounds like at least two different features.

Or... do you want the equivalent of rsyncing a remote repo?"
MRM-1053,brettporter,Brett Porter,2009-01-29T15:59:08.044Z,2009-01-29T15:59:08.044Z,wouldn't it be better to just separate your hosted repos to match the remote ones so that you can dump the whole repo?
MRM-1053,bvj,b v j,2009-01-30T19:39:31.468Z,2009-01-30T19:39:31.468Z,">> Can you explain a bit more about what you want Archiva to do? It sounds like at least two different features. 

I have multiple remote repositories tied via proxy connectors to my ""Archiva Managed Internal Repository"".  It's working very well. Similarly, I have a few linked to the Snapshot repo.

On more than one occasion, I needed to change the remote repo for a given set of artifacts. My preference would be to first unlink the old remote repo, and purge the Internal repo of any artifacts fetched therefrom. Next, I'd link to the new repo containing the artifacts once served by the old repo. 

For auditing purpose, it would also be helpful to know what repos provided which artifacts. 





"
MRM-1053,bvj,b v j,2009-01-30T19:50:33.512Z,2009-01-30T19:50:33.512Z,">> wouldn't it be better to just separate your hosted repos to match the remote ones so that you can dump the whole repo? 

That's a good option. My Archiva managed repos are limited to the two defaults, and I should divide them according to the nature of the remotes. I'd still like to link multiple remotes to a single managed repo, and also have the means to flush the repo of artifacts provided by a particular remote. If I dump the entire managed repo, I might have a problem repopulating it if some remotes are unavailable at that time.
"
MRM-1014,brill,Brill Pappin,2008-11-19T15:44:57.77Z,2008-11-19T15:44:57.77Z,"One other thing, this is using derby-10.4.2.0.jar
although it also happened with the recommended version from the war installation docs so I ssupect something is not getting cleaned up properly
"
MRM-1014,brettporter,Brett Porter,2008-11-20T23:43:28.898Z,2008-11-20T23:43:28.898Z,"I believe removing db.lck from that directory will resolve the problem.

If you can think of a good place to express this in the documentation, we'd welcome a patch :)"
MRM-1077,brettporter,Brett Porter,2009-02-26T08:09:10.09Z,2009-02-26T08:09:10.09Z,"smaller version (in future, pasting the text from the 500 page is better!)

this error is a bit weird - we might need more of the trace for context"
MRM-1077,axismundi,Marc Lustig,2009-02-27T14:14:19.614Z,2009-02-27T14:14:19.614Z,"We had this error a number of times.
I didn't really had the chance to track down the cause.
But seems to have disappeared as fast quickly as it arose.
So, I suppose it was a secondary effect."
MRM-1077,brettporter,Brett Porter,2011-09-12T08:11:06.671Z,2011-09-12T08:11:06.671Z,"this needs more information to troubleshoot, please reopen if you are still experiencing this in a recent version"
MRM-1006,brettporter,Brett Porter,2008-11-19T01:28:32.857Z,2008-11-19T01:28:32.857Z,do you have a patch for this?
MRM-1006,bvj,b v j,2008-12-11T23:33:49.194Z,2008-12-11T23:33:49.194Z,"I posted this as a *documentation task* just to make the info available for other users,. I'm not sure it's something that qualifies for a patch. "
MRM-1006,brettporter,Brett Porter,2011-09-12T11:45:24.855Z,2011-09-12T11:45:24.855Z,not quite sure what is being requested here - we already have chkconfig in the startup script and I've used it effectively
MRM-1088,brettporter,Brett Porter,2009-02-26T08:35:51.401Z,2009-02-26T08:35:51.401Z,"this should be possible - do you need help configuring it or were you just not aware it could be done?

There are examples on the Wiki for other databases"
MRM-1088,occasl,Lou Sacco,2009-03-03T01:02:57.081Z,2009-03-03T01:02:57.081Z,"Well both I guess.  I have looked at both the docs and the wiki and there's nothing there with regard to configuring Archiva for Oracle.  If it is supported, please regard this as documentation request."
MRM-1088,brettporter,Brett Porter,2009-03-05T23:05:55.731Z,2009-03-05T23:05:55.731Z,"you could start here: http://cwiki.apache.org/confluence/display/ARCHIVA/Archiva+with+MySQL

Replace the mysql specifics with your oracle environment and let us know if anything needs customisation. There are some JIRAs related to oracle that you'll find by searching."
MRM-1099,oching,Maria Odea Ching,2009-03-14T23:54:51.27Z,2009-03-14T23:54:51.27Z,Thanks lots for the patch Lani! I already applied it in trunk -r754614..
MRM-1004,jameswdumay,James William Dumay,2008-11-16T19:40:19.758Z,2008-11-16T19:40:19.758Z,"Committed in 718157.

Thanks for that patch Martin. Thats a big oop's."
MRM-1003,brettporter,Brett Porter,2010-03-01T00:09:51.609Z,2010-03-01T00:09:51.609Z,"not sure if this is important, we can make a lot of these changes as we go"
MRM-1003,olamy,Olivier Lamy (*$^%`),2011-09-16T08:38:17.248Z,2011-09-16T08:38:17.248Z,done.
MRM-1080,gautencio,Gwen Harold Autencio,2009-08-18T00:03:39.568Z,2009-08-18T00:03:39.568Z,"Attaching patch, updated and added a testcase. thanks."
MRM-1080,oching,Maria Odea Ching,2009-10-12T04:08:14.009Z,2009-10-12T04:08:14.009Z,"Patch applied to trunk [-r824259|http://svn.apache.org/viewvc?view=rev&revision=824259] with the following update:
* updated testQuickSearchArtifactRegularSearch() to conform to the recent changes in SearchServiceImpl from MRM-1230

Thanks Gwen!"
MRM-1000,jameswdumay,James William Dumay,2008-11-13T00:00:11.01Z,2008-11-13T00:00:11.01Z,"Committed in r713649.

Thanks Martin for the patch!

Oh, and happy 1000th issue Archiva developers."
MRM-1086,peter_lawrey,Peter Lawrey,2009-02-12T04:12:10.63Z,2009-02-12T04:12:10.63Z,"After deleting the directory for this library, I still get this error."
MRM-1086,peter_lawrey,Peter Lawrey,2009-02-12T04:24:38.156Z,2009-02-12T04:24:38.156Z,"I had a snapshot proxy connector with a URL which starts file:///
This works as expected for internal (taking files from an old copy of the repo as required), but gets this internal error for snapshots. :-/
"
MRM-1086,brettporter,Brett Porter,2009-02-26T08:01:27.051Z,2009-02-26T08:01:27.051Z,"it looks like there is a leading space on the file URL (not # file, not #file as it should be).

Will assign this to check for trimming in the web interface."
MRM-1086,brettporter,Brett Porter,2011-09-12T11:42:39.325Z,2011-09-12T11:42:39.325Z,is already fixed in 1.3.5
MRM-1042,oching,Maria Odea Ching,2009-02-17T01:48:42.312Z,2009-02-17T01:48:42.312Z,"Oops.. this was for the browse improvements, not search (see description in parent issue MRM-1037)"
MRM-1042,oching,Maria Odea Ching,2009-02-17T21:39:12.363Z,2009-02-17T21:39:12.363Z,"Fixes in trunk -r745362:
- hide timestamped SNAPSHOT versions in version list browse
- add 'Other Versions' field in the artifact info page if the artifact is a snapshot & has other timestamped versions

Additional fixes in trunk -r745371:
- fix getting of other versions of the snapshot
- added tests for getting other versions of the snapshot"
MRM-1016,brettporter,Brett Porter,2008-11-19T23:30:02.194Z,2008-11-19T23:30:02.194Z,"applied, thanks! :)

(btw, patches from the svn root, or at least one with a pom.xml file, are easier to apply)"
MRM-1085,bernd,bernd,2009-02-12T03:13:53.422Z,2009-02-12T03:13:53.422Z,"Actually, this Issue is a ""reopen"" of  MRM-881. Cause I don't have the permission to reopen an issue -> CLONE"
MRM-1085,bernd,bernd,2009-02-12T03:22:58.194Z,2009-02-12T03:22:58.194Z,"The Exception happens on Windows (XP) although the appserver.base property is set in the CATALINA_OPTS.

To set the CATALINA_OPTS I created a setenv.bat file under %CATALINA_HOME%\bin with the following content: set CATALINA_OPTS=""-Dappserver.home=%CATALINA_HOME% -Dappserver.base=%CATALINA_HOME%""

Where CATALINA_HOME was set as environment variable pointing to the my tomcat directory (D:\apache-tomcat-5.5.27)

"
MRM-1085,bernd,bernd,2009-02-12T03:30:02.833Z,2009-02-12T03:30:02.833Z,"Workaround:

After deploying archiva you can add the appserver.base property to the application.properties file under the classes folder of the archiva webapp (%CATALINA_HOME%\webapps\archiva\WEB-INF\classes\application.properties)."
MRM-1085,brettporter,Brett Porter,2009-02-26T08:33:14.662Z,2009-02-26T08:33:14.662Z,had the same report from another user on IRC
MRM-1085,ahughes,Art Hughes,2009-03-03T06:03:39.923Z,2009-03-03T06:03:39.923Z,"Berd Vogt, you set setenv.bat on tomcat 5.5.27.... what about v6? They removed all the bat/sh files from v6 and believe this is no longer possible.

I can't find any decent link, but the windows registry seem like the place to configure this. JIRA's configuration guide is the best I can find and is not 100% consistent with the latest tomcat v6 service configuration I have... but it does give some positive leads. 
http://confluence.atlassian.com/display/JIRA/Increasing+JIRA+memory"
MRM-1085,ahughes,Art Hughes,2009-03-03T06:49:23.724Z,2009-03-03T06:49:23.724Z,"OK, to fix in Tomcat 6 as a windows service... edit the following in regedit.

HKEY_LOCAL_MACHINE->SOFTWARE->Apache Software Foundation->Procrun 2.0->node1->Parameters->Java

Modify the 'Options'  parameter to have appserver.base and appserver.home set to CATALINA_HOME as above (just make sure you set them AFTER CATALINA_HOME has been set).

I so wish that was documented somewhere."
MRM-1085,bernd,bernd,2009-03-04T03:19:36.469Z,2009-03-04T03:19:36.469Z,"@Andrew: Sorry, I hasn't tried to reproduce this issue on tomcat 6"
MRM-1085,oching,Maria Odea Ching,2009-08-17T03:37:18.119Z,2009-08-17T03:37:18.119Z,"Added the following in the Archiva docs in -r804899:
o instructions in setting appserver.base and appserver.home in Windows
o more troubleshooting tips for startup errors
"
MRM-1031,jameswdumay,James William Dumay,2008-12-07T20:39:52.082Z,2008-12-07T20:39:52.082Z,Committed revision 724235.
MRM-1039,oching,Maria Odea Ching,2009-02-17T20:47:02.095Z,2009-02-17T20:47:02.095Z,Closing this issue as fixed as I no longer see metadata files in search results after the search re-vamp.
MRM-1071,oching,Maria Odea Ching,2009-01-21T04:35:31.048Z,2009-01-21T04:35:31.048Z,"Hi Bastiaan, by old versions do you mean even the released versions and not just SNAPSHOTs?

Archiva has the repository purge feature and can be configured to remove SNAPSHOTs based on it's age (number of days old) and SNAPSHOT versions that have already been released.."
MRM-1071,bastiaan01,Bastiaan Verhoef,2009-01-22T06:05:23.256Z,2009-01-22T06:05:23.256Z,"Hi Maria,

I like to remove released versions. 

In our company we support three major version of a libraries. for example 1.x, 2.x and 3.x.
Wat I like to have in archiva is a option ""delete all artifacts with version 1.0.0 and 1.0.1 of groupId 'com.mycompany.libs.*' ""."
MRM-1071,wsmoak,Wendy Smoak,2009-01-22T07:55:14.478Z,2009-01-22T07:55:14.478Z,"Removing released artifacts isn't generally recommended.  For example, you might not be able to check out an old tag and still build it.

But sometimes you do want to -- I can see wanting to remove very old no-longer-in-production artifacts from a corporate repo.

There's a related issue open for deleting individual artifacts through the Web UI (MRM-913), but this goes further, and I'd consider it a purge feature.


"
MRM-1036,oching,Maria Odea Ching,2009-03-19T02:22:57.065Z,2009-03-19T02:22:57.065Z,Fixed in trunk -r755863.
MRM-1050,wsmoak,Wendy Smoak,2008-12-19T10:04:23.818Z,2008-12-19T10:04:23.818Z,"Same problem in CONTINUUM-1998, the problem is most likely in Redback."
MRM-1050,brettporter,Brett Porter,2009-03-05T22:52:42.371Z,2009-03-05T22:52:42.371Z,check if we upgraded to fix this
MRM-1033,oching,Maria Odea Ching,2008-12-07T21:52:07.509Z,2008-12-07T21:52:07.509Z,"From MRM-612..
Brett: ""If the configuration is changed, I'd suggest all the scanning stats should be reset."""
MRM-1033,ctan,Maria Catherine Tan,2009-10-12T22:51:09.846Z,2009-10-12T22:51:09.846Z,Attached patch that will delete all stats when repository location is changed.
MRM-1033,ctan,Maria Catherine Tan,2009-10-13T00:21:02.328Z,2009-10-13T00:21:02.328Z,"Fixed bug found in the first patch.

Attached updated patch: MRM-1033-new.patch"
MRM-1033,wsmoak,Wendy Smoak,2009-10-13T10:23:38.564Z,2009-10-13T10:23:38.564Z,"What does it mean for a repository location to be changed?  I can think of two ways this happens:

1. through the web UI
2. starting Archiva with a modified archiva.xml

Does the fix for this work in both of these cases?  Are there any other ways to change the repo location?"
MRM-1033,oching,Maria Odea Ching,2009-10-13T22:49:29.241Z,2009-10-13T22:49:29.241Z,The above two are the only ways to change the repo location I think. A quick look at the patch shows that it only handles changing the location from the web UI. I don't know if there's a way to check for changes in the config file after a re-start though.
MRM-1033,brettporter,Brett Porter,2009-10-13T23:57:35.652Z,2009-10-13T23:57:35.652Z,"that should be fine given that we have the ""force scan"" mode for other cases now."
MRM-1033,oching,Maria Odea Ching,2009-11-20T02:44:01.837Z,2009-11-20T02:44:01.837Z,Patch applied to trunk [-r882448|http://svn.apache.org/viewvc?revision=882448&view=revision]. Thanks Marica!
MRM-1069,brettporter,Brett Porter,2010-02-23T00:44:23.604Z,2010-02-23T00:44:23.604Z,"AFAICT, Maven works with these UTF characters, and it is really not valid XML to use &oslash; without defining it (Maven cheats by adding these HTML characters into the parser itself). There are some characters that trouble certain IBM JDKs, but if that's a scenario someone is faced with I think it'd warrant a separate plugin now."
MRM-1012,drewpuppy,Andrew Heald,2008-11-19T09:31:10.93Z,2008-11-19T09:31:10.93Z,"There's something I'm not clear about which relates to this. I now use a repository group so that all of the developers only need to know about one repo. This is great but appears to not work quite how I'd expect (and I might be wrong to expect this). I imagined that a search for an artifact would cause successive searches of each repo in the group from first to last, and that the search would stop when first satisfied by a repo. It's apparent though that all the repos are checked every time. Am I right? Any comments on this in general?"
MRM-1012,oching,Maria Odea Ching,2008-11-19T18:42:12.861Z,2008-11-19T18:42:12.861Z,"Yes, it was changed to work that way in order to satisfy the case of version ranges. This is proving to be a problem in the downloads though, we should come up with a better solution for this in 1.2."
MRM-1012,drewpuppy,Andrew Heald,2008-11-20T01:30:04.139Z,2008-11-20T01:30:04.139Z,"Ah, right, okay. So, until this is sorted out in 1.2 to which version should I downgrade to stop this happening whilst also still giving me the new webdav implementation? This is my best option for now."
MRM-1012,oching,Maria Odea Ching,2008-11-20T03:06:10.378Z,2008-11-20T03:06:10.378Z,"Hmm, 1.1 I think.. though I'm not entirely sure if the behaviour was changed after a 1.1 release candidate didn't pass the vote or after the official 1.1 release itself."
MRM-1012,drewpuppy,Andrew Heald,2008-11-20T04:12:46.445Z,2008-11-20T04:12:46.445Z,"Any chance I could easily patch 1.1.3 to make it not search further repos in a group if the artifact has already been found, and to honour the blacklist on proxies? I don't mind coding if I get a pointer to the relevant sources."
MRM-1012,oching,Maria Odea Ching,2008-11-20T04:35:04.476Z,2008-11-20T04:35:04.476Z,"That would be great :) 

You probably need to take a look at archiva-webdav and archiva-proxy modules. The repository group logic is in ArchivaDavResourceFactory#createResource(..) while the proxying/file transfer part with respect to black list & white list patterns is in DefaultRepositoryProxyConnectors in the archiva-proxy module.
"
MRM-1012,drewpuppy,Andrew Heald,2008-11-20T10:48:34.986Z,2008-11-20T10:48:34.986Z,"Hmmm, I was totally mistaken about the source of this problem. The blacklists ARE being correctly honoured. Might I suggest, however, that you apply the attached simple patch. I suspect the extra default log file overhead will be worth it when admins want to make sure that their white/black lists are correct.

It turns out our performance degradation was caused by the use of <updatePolicy>always</updatePolicy> in our repository configs. We used to have several repositories listed to cover both internal and external repos. On installing Archiva 1.1.3 I created a single repository group with the same URL and name as the original main internal repo. This was so that any developer that didn't properly update settings.xml would still get builds just as before. As things were the update policy was applied only for the internal repo. So the change to a single repo group ended up applying it across the board! The policy has been removed altogether now. We'll use the Maven -U command line switch to force a full update until we think up a better way of dealing with this. Perhaps we should have two groups named something like ""catlin"" and ""outside"".

I hope that makes sense. I'll try to find a place to add a note about this sort of thing on the wiki.

Meanwhile, I'll consider if this is grounds for closing this Jira."
MRM-1012,drewpuppy,Andrew Heald,2008-11-25T06:44:38.156Z,2008-11-25T06:44:38.156Z,I'll close this one because I think it'll be misleading to keep it open.
MRM-1012,brettporter,Brett Porter,2008-11-25T17:29:38.385Z,2008-11-25T17:29:38.385Z,"I concur we need to improve the logging of white/blacklists, but logging them all at info would be far too noisy. Thanks!"
MRM-1038,jameswdumay,James William Dumay,2008-12-15T20:31:57.934Z,2008-12-15T20:31:57.934Z,This is only done for the quick search (but not bytecode search). Advanced search may also include a artifact version search - so this need not apply. 
MRM-1005,bvj,b v j,2008-11-17T23:26:01.977Z,2008-11-17T23:26:01.977Z,"Since MRM-902 is closed, this issue was created and linked to MRM-902"
MRM-1005,bvj,b v j,2008-11-17T23:35:19.597Z,2008-11-17T23:35:19.597Z,"The asterisks in the filter expressions got chewed up in the Jira post. Maybe an administrator can fix the whiltelist patterns in the post.

Here's an attempt to correctly display the filter expressions by tricking Jira (through self-escaping the asterisks)


Remedy/Work-around
-------------------------------
Added the following entry to the whitelist filter set:
/***/**

SLASH-ASTERISK-ASTERISK-SLASH-ASTERISK


Remember to click ""Save Proxy Connector"" after defining the extra pattern/filter

The connector whitelist now has the following entries

***/**
/***/**




"
MRM-1005,brettporter,Brett Porter,2008-11-19T01:24:12.227Z,2008-11-19T01:24:12.227Z,"it seems like this is because the request contains //, maybe we should trim leading / before evaluating the b/w lists"
MRM-1005,brettporter,Brett Porter,2011-09-12T09:22:16.104Z,2011-09-12T09:22:16.104Z,can't reproduce this on trunk
MRM-1041,oching,Maria Odea Ching,2009-02-17T20:24:46.15Z,2009-02-17T20:24:46.15Z,"Fixed in trunk -r745359 with the following changes:
- show shared basic project info in versions list browse
- fix model not being set in repository browse"
MRM-1041,oching,Maria Odea Ching,2009-02-17T21:01:32.42Z,2009-02-17T21:01:32.42Z,Additional update on browse.jsp in -r745365.
MRM-1082,jameswdumay,James William Dumay,2009-02-10T23:46:26.421Z,2009-02-10T23:46:26.421Z,Committed 743238.
MRM-877,wsmoak,Wendy Smoak,2008-07-16T15:25:34.55Z,2008-07-16T15:25:34.55Z,Duplicate of MRM-584
MRM-877,wsmoak,Wendy Smoak,2008-07-16T15:35:47.996Z,2008-07-16T15:35:47.996Z,"I re-opened MRM-584 as it's still a problem in the Archiva 1.1 candidate we're voting on.

Workarounds include turning off the requirement for validation (in security.properties), clicking the link to re-send the validation mail so which the user must click on, or editing the database directly to flip the validated flag on the user.  There is more info in the user list archives."
MRM-860,dvinge,Anders Dvinge,2008-07-08T04:41:01.83Z,2008-07-08T04:41:01.83Z,I've now seen a project where it was the middle nested project wich was INCORRECT (not touched)
MRM-860,jameswdumay,James William Dumay,2009-02-15T20:19:12.844Z,2009-02-15T20:19:12.844Z,"Anders, could you please try Archiva 1.2m1? I've redone the metadata merging in this version which should solve weird issues like this one."
MRM-860,brettporter,Brett Porter,2009-03-08T16:49:48.638Z,2009-03-08T16:49:48.638Z,"there is not enough info to reproduce the issue - if it still occurs with 1.2, please reopen with what the metadata files look like and how the artifacts are deployed"
MRM-847,evenisse,Emmanuel Venisse,2008-06-24T06:57:09.986Z,2008-06-24T06:57:09.986Z,Fixed in rev.671144
MRM-851,mihbor@wp.pl,Michal Borowiecki,2008-06-30T13:54:43.128Z,2008-06-30T13:54:43.128Z,"I made a typo in the summary
tablib should be taglib :D
Can you please correct it?"
MRM-851,oching,Maria Odea Ching,2008-06-30T21:26:09.578Z,2008-06-30T21:26:09.578Z,"Btw, the workaround for this problem is documented here (please see comments at the end of the wiki):
http://cwiki.apache.org/confluence/display/ARCHIVA/Archiva+on+Geronimo-2.0.2+with+MySQL+backend

So the fix for this is just to change the short-name of the archiva taglib (remove the whitespaces) in the next release.."
MRM-851,oching,Maria Odea Ching,2008-07-01T22:26:37.087Z,2008-07-01T22:26:37.087Z,"Fixed in trunk -r673266. The fix was tested in geronimo 2.0.2. The problem with the webwork taglib still exists though, so you still need to do the workaround for the webwork taglib specified in the wiki."
MRM-817,gautencio,Gwen Harold Autencio,2008-07-23T01:15:58.411Z,2008-07-23T01:15:58.411Z,Attached patch that would display the repository of artifact when user goes artifact information.
MRM-817,oching,Maria Odea Ching,2008-07-25T05:54:30.738Z,2008-07-25T05:54:30.738Z,Thanks for the patch Gwen! Could you also provide tests for the fix?
MRM-817,gautencio,Gwen Harold Autencio,2008-07-25T06:08:25.989Z,2008-07-25T06:08:25.989Z,Created getRepositoryId() in RepositoryBrowsing to get the repositoryId of the artifact
MRM-817,oching,Maria Odea Ching,2008-07-25T06:59:01.477Z,2008-07-25T06:59:01.477Z,"Applied some parts of the patch in trunk -r679767.

From the patch, I only applied the changes from the following files as only these are necessary for the fix:
- archiva-modules/archiva-database/src/main/java/org/apache/maven/archiva/database/browsing/DefaultRepositoryBrowsing.java
- archiva-modules/archiva-database/src/main/java/org/apache/maven/archiva/database/browsing/RepositoryBrowsing.java
- archiva-modules/archiva-web/archiva-webapp/src/main/java/org/apache/maven/archiva/web/action/BrowseAction.java
- archiva-modules/archiva-web/archiva-webapp/src/main/java/org/apache/maven/archiva/web/action/ShowArtifactAction.java
- archiva-modules/archiva-web/archiva-webapp/src/main/webapp/WEB-INF/jsp/include/artifactInfo.jspf

And in the patch for ShowArtifactAction, I changed the following line from

setRepositoryId(repoBrowsing.getRepositoryId( getPrincipal(), getObservableRepos(), groupId, artifactId, version ));

to

this.repositoryId =  repoBrowsing.getRepositoryId( getPrincipal(), getObservableRepos(), groupId, artifactId, version );"
MRM-855,jameswdumay,James William Dumay,2008-07-01T23:12:04.153Z,2008-07-01T23:12:04.153Z,Committed r673269.
MRM-890,oching,Maria Odea Ching,2009-09-17T03:34:03.306Z,2009-09-17T03:34:03.306Z,Does the fix for MRM-1056 address this now?
MRM-810,wsmoak,Wendy Smoak,2008-05-17T12:40:33.428Z,2008-05-17T12:40:33.428Z,"Added a log statement in r657406, but it's writing to archiva.log instead of audit.log."
MRM-810,oching,Maria Odea Ching,2008-07-02T00:03:15.666Z,2008-07-02T00:03:15.666Z,"Fixed in trunk -r673280. 

Changes made:
- implemented the Auditable for UploadAction
- cleaned up the logging config
"
MRM-807,oching,Maria Odea Ching,2008-09-02T02:34:51.695Z,2008-09-02T02:34:51.695Z,Did you add \*/\*.dll or \*\*/\*.dll in the file types? I think it should be the latter..
MRM-807,oching,Maria Odea Ching,2008-09-03T02:22:29.746Z,2008-09-03T02:22:29.746Z,This is fixed with the fix in MRM-841..
MRM-802,oching,Maria Odea Ching,2008-05-22T05:37:17.991Z,2008-05-22T05:37:17.991Z,Fixed in -r659074.
MRM-848,brettporter,Brett Porter,2008-07-01T20:28:27.119Z,2008-07-01T20:28:27.119Z,"I'm concerned about throwing in a scan-on-startup due to the cost, and it's not trivial to detect whether a repository has already been scanned at that point of initialisation. Will take a closer look in a future version but I think this is minor."
MRM-848,gautencio,Gwen Harold Autencio,2008-08-07T22:15:28.116Z,2008-08-07T22:15:28.116Z,Attached patch that will only scan repositories that are not scanned or that doesn't have .index folder in the repository during startup.
MRM-848,oching,Maria Odea Ching,2008-08-08T00:58:43.495Z,2008-08-08T00:58:43.495Z,"Hi Gwen, thanks for the patch!

I took a quick look at it and it looks good to me :) Just one comment though, maybe we could check if a repository has already been scanned in a different way? I'm a little hesitant on relying on existence of the .index directory to see if the repo has already been scanned as the indexing consumer can be disabled. Wdyt?"
MRM-848,gautencio,Gwen Harold Autencio,2008-08-08T01:14:42.85Z,2008-08-08T01:14:42.85Z,"Yeah it will still scan repositories if the indexing consumer will be disabled. 
I'll try a different way on checking the repository if it has been scanned or not.
Thanks :)"
MRM-848,gautencio,Gwen Harold Autencio,2008-08-13T19:51:15.715Z,2008-08-13T19:51:15.715Z,"Here's another patch that checks if a repository has been scanned, by getting there ids and placing them in a list.
Thanks Miss Deng :)"
MRM-848,oching,Maria Odea Ching,2008-08-14T02:04:08.446Z,2008-08-14T02:04:08.446Z,"Patch applied in trunk -r685789.

Additional changes made:
- applied codestyle formatting
- clear queuedRepos list when task scheduler is stopped

Thanks again for the patch Gwen! "
MRM-800,brettporter,Brett Porter,2008-06-30T00:35:40.565Z,2008-06-30T00:35:40.565Z,"I think this might be corrected already in 1.1. We should verify - if not, it might be scheduled for 1.1.x, but it's important to get sorted out."
MRM-800,jameswdumay,James William Dumay,2008-07-02T00:32:28.082Z,2008-07-02T00:32:28.082Z,"Thanks for reporting this issue Paul.

I tried reproducing with the instructions you provided but due to the changes in the WebDav layer of Archiva this issue is not present in the up coming 1.1 release. 

Thanks
James"
MRM-832,evenisse,Emmanuel Venisse,2008-06-11T03:20:32.828Z,2008-06-11T03:20:32.828Z,"LDAP support is very good now in Redback.
Maybe I'm wrong but I think AD connection is a standard LDAP connection.

Spring-security is the most powerful framework, it is alone to support LDAP, AD, Crowd, JOSSO (I don't think OpenSSO) and more (http://static.springframework.org/spring-security/site/reference/html/introduction.html)

As we already use Spring, I think spring-security would be the best option for users."
MRM-832,jameswdumay,James William Dumay,2008-06-11T19:12:09.388Z,2008-06-11T19:12:09.388Z,One thing I would like to avoid is possibly requiring users to edit the spring configuration directly to get ldap going - is that possible with spring-security ?
MRM-832,evenisse,Emmanuel Venisse,2008-06-12T03:23:32.135Z,2008-06-12T03:23:32.135Z,"you want admin pages to manage connection, users, groups and roles, right?
I'm not sure it exist and I think it is specific to a project, but I'm sure all API are there. I'll must do it in few weeks for a customerFlex project."
MRM-832,andreasch,Andreas Christoforides,2008-06-19T16:08:48.799Z,2008-06-19T16:08:48.799Z,"I would also vote for Spring security. I personally wasn't even aware of the Redback project until I started looking into Archiva and Continuum. I believe that is probably the case for most Java developers not involved in the Apache community.  On the other hand, Acegi/Spring security is what most Java developers are familiar with.   "
MRM-832,strunk,strunk,2008-07-20T15:32:23.81Z,2008-07-20T15:32:23.81Z,"Configuration of Spring security looks much simpler than redback configuration. 
Although LDAP support is available for Redback, I still do have problems unless I use the latest SNAPSHOT of Redback ant put it into archiva WEBINF/lib. Only this version utilizes my security.properties file."
MRM-832,oching,Maria Odea Ching,2008-07-20T20:59:11.6Z,2008-07-20T20:59:11.6Z,"Btw, Archiva 1.1 already uses the latest released version of redback which contains the LDAP fixes so you won't need to copy the snapshot version to WEB-INF/lib."
MRM-832,justin@atlassian.com,Justin Koke,2009-06-18T20:18:26.23Z,2009-06-18T20:18:26.23Z,"I would also really like to add my voice to this issue.

Security is hard to get right, and it usually scares me when I find 'yet another security framework'.

I didn't know about Redback until I found it in Archiva and I am astonished that it was chosen as an option for this project.

I would highly recommend moving away from Redback and use Spring Security.

"
MRM-832,olamy,Olivier Lamy (*$^%`),2011-10-27T16:58:11.447Z,2011-10-27T16:58:11.447Z,shiro (with a wrapper in redback) ?
MRM-888,oching,Maria Odea Ching,2008-07-28T23:18:55.479Z,2008-07-28T23:18:55.479Z,Updated standalone.apt to include instructions for re-indexing when upgrading to Archiva 1.1
MRM-821,ahempel@atlassian.com,Adrian Hempel,2008-06-02T20:00:48.573Z,2008-06-02T20:00:48.573Z,"I'm concerned that doing this would only provide the appearance of security, rather than actual security. Providing a false sense of security can be worse than no security at all.

Archiva needs the cleartext password to send to the proxy, so it would need to use reversible encryption, rather than the kind of one-way hash function that is typically used to protect password files. The decryption algorithm would be freely available, as it would be in the Archiva code, which is available to anyone. So, anyone with access to the file and basic Java skills would be able to decrypt your password without too much difficulty.

Instead, you should protect your Archiva configuration with appropriate file system permissions."
MRM-821,jameswdumay,James William Dumay,2008-06-04T02:47:43.993Z,2008-06-04T02:47:43.993Z,"Felipe,
I have to agree with Adrian on this. If Archiva encrypted the passwords in its configuration file it would still need to store the private key to decrypt the configuration file - most likely in the configuration directory.

Thanks for reporting.

James"
MRM-821,dbrosius,Dave Brosius,2010-11-18T19:07:09.33Z,2010-11-18T19:07:09.33Z,"You could require the encryption key to be entered at startup of the server by the admin, thru some gui."
MRM-835,jameswdumay,James William Dumay,2008-06-12T03:04:33.478Z,2008-06-12T03:04:33.478Z,Marking as 1.1 - this feature needs to work when we ship.
MRM-835,jameswdumay,James William Dumay,2008-07-02T00:21:52.915Z,2008-07-02T00:21:52.915Z,I couldn't reproduce on trunk as of r673283.
MRM-874,jmluy,John Michael Luy,2008-09-06T06:46:27.159Z,2008-09-06T06:46:27.159Z,attach patch that displays <plugin> for maven-plugin and change title to POM Snippet.
MRM-874,oching,Maria Odea Ching,2008-09-07T20:53:24.555Z,2008-09-07T20:53:24.555Z,"Patch applied in 1.1.x branch -r692978. Thanks for the patch JM! :)
"
MRM-893,dantran,Dan Tran,2008-07-28T00:08:54.61Z,2008-07-28T00:08:54.61Z,"please lower the priority, since I think i get maven-stage-plugin to prevent this condition from reaching archiva"
MRM-893,brettporter,Brett Porter,2008-07-28T00:10:54.297Z,2008-07-28T00:10:54.297Z,"I agree this is incorrect, but disagree it's a blocker.

Why is the staging plugin trying to read it as a directory? Shouldn't it be interpreting that from the directory listing?"
MRM-893,dantran,Dan Tran,2008-07-28T00:25:46.874Z,2008-07-28T00:25:46.874Z,"actually it is not the stage plugin, but the lightway http wagon automatically puts last '/' to the basePath
wagon.getFileList( basePath ).

"
MRM-893,dantran,Dan Tran,2008-07-28T01:12:01.989Z,2008-07-28T01:12:01.989Z,"what is the best way to fix this bug? I am clueless to  which part of the source to look for.

Also, I prefer this fix rather than fixing staging plugin since it may make the stage plugin
fix kind a http specific."
MRM-893,brettporter,Brett Porter,2008-07-28T01:27:01.169Z,2008-07-28T01:27:01.169Z,RepositoryServlet
MRM-893,dantran,Dan Tran,2008-07-28T01:37:53.529Z,2008-07-28T01:37:53.529Z,seems like it is inside jackrabbit
MRM-893,dantran,Dan Tran,2008-08-09T10:12:25.248Z,2008-08-09T10:12:25.248Z,"just want to confirm the issue is in Jackrabit

 // check matching if=header for lock-token relevant operations
            resource =
                getResourceFactory().createResource( webdavRequest.getRequestLocator(), webdavRequest, webdavResponse );

which slides thru instead of throwing an exception"
MRM-893,brettporter,Brett Porter,2008-08-09T21:58:58.69Z,2008-08-09T21:58:58.69Z,"I think the request locator is ours, is it possible it is in there?"
MRM-893,dantran,Dan Tran,2008-08-09T23:27:06.395Z,2008-08-09T23:27:06.395Z,"your are right  it is in ArchivaDavResourceLocator

under this block

        //Remove trailing slashes otherwise Text.getRelativeParent fails
        if (resourcePath.endsWith(""/"") && resourcePath.length() > 1)
        {
            path = resourcePath.substring( 0, resourcePath.length() - 1 );
        }


as you can see the trailing slashes are purposely removed
"
MRM-893,brettporter,Brett Porter,2008-08-09T23:42:41.55Z,2008-08-09T23:42:41.55Z,"nice catch! If you're able to test and submit a patch that'd be most helpful in applying it to the next release
"
MRM-893,dantran,Dan Tran,2008-08-10T14:56:48.342Z,2008-08-10T14:56:48.342Z,attached is the fix + test.  I found a better way to handle this specific condition without removing the intended behavior of purposely removing the end slashed when computing the local path
MRM-893,dantran,Dan Tran,2008-08-10T23:11:52.885Z,2008-08-10T23:11:52.885Z,MRM-893-2.patch has a better test coverage
MRM-893,dantran,Dan Tran,2008-08-10T23:21:03.31Z,2008-08-10T23:21:03.31Z,"more tests, just to make sure i dont break any thing. this is it. :-)"
MRM-893,oching,Maria Odea Ching,2008-08-12T02:56:49.523Z,2008-08-12T02:56:49.523Z,"Patch applied in trunk -r685076. Thanks Dan! :)
"
MRM-866,brettporter,Brett Porter,2008-07-07T10:45:14.408Z,2008-07-07T10:45:14.408Z,"I'm surprised by this, since I use it all the time. Is this only through the webdav interface?

(if not, it might be a particular edge case, or a failure during scanning... but again I haven't seen that)"
MRM-866,evenisse,Emmanuel Venisse,2008-07-07T11:04:20.371Z,2008-07-07T11:04:20.371Z,"Sorry, it was a bad test on my project"
MRM-845,ctan,Maria Catherine Tan,2008-06-19T18:55:46.971Z,2008-06-19T18:55:46.971Z,Attached patch that fixes this issue.
MRM-845,oching,Maria Odea Ching,2008-06-19T20:48:33.109Z,2008-06-19T20:48:33.109Z,Patch applied in trunk -r669762. Thanks Marica! 
MRM-898,rossebo,Einar Laurits Rossebo,2008-07-31T07:41:35.216Z,2008-07-31T07:41:35.216Z,"""leaving Archiva 1.1 out as an alternative to migrate from in such environments"" ----->  ""leaving Archiva 1.1 out as an alternative to migrate TO in such environments"""
MRM-898,brettporter,Brett Porter,2008-07-31T12:51:00.648Z,2008-07-31T12:51:00.648Z,I believe this is the issue already fixed that we'll be releasing in the next week.
MRM-898,rossebo,Einar Laurits Rossebo,2008-08-11T10:48:38.305Z,2008-08-11T10:48:38.305Z,Confirmed fixed in 1.1.1 - not able to reproduce and artifact loads ok now :-)
MRM-870,leahpar,leahpar,2008-07-08T17:09:18.081Z,2008-07-08T17:09:18.081Z,"it seems that the required xml api does not exist ...
so i try to remove the (old?) xerces.jar and use the jdk6 xml one
and it looks like working fine

hope this help ...

note : 
this is my first test of this new version 
it sounds great 
i try a true install tomorrow
"
MRM-870,jameswdumay,James William Dumay,2008-07-08T18:53:13.545Z,2008-07-08T18:53:13.545Z,"I may have screwed up the xerces dependency when I completed MRM-855.

I will fix this for 1.1.1"
MRM-870,jameswdumay,James William Dumay,2008-07-08T23:10:32.966Z,2008-07-08T23:10:32.966Z,I was able to reproduce by using the standalone jetty bundle - I wonder whats going on here? :S
MRM-870,jameswdumay,James William Dumay,2008-07-08T23:27:38.903Z,2008-07-08T23:27:38.903Z,Fixed in 675093.
MRM-870,jameswdumay,James William Dumay,2008-07-08T23:27:58.366Z,2008-07-08T23:27:58.366Z,Thanks for reporting Raphael :)
MRM-819,oching,Maria Odea Ching,2008-05-27T06:39:26.582Z,2008-05-27T06:39:26.582Z,"Fixed in trunk -r660472:

- allow only alphanumeric, '.', '-' and '_' characters for repo group id"
MRM-882,jameswdumay,James William Dumay,2008-08-19T01:36:26.298Z,2008-08-19T01:36:26.298Z,Since MRM-907 I can no longer reproduce this problem so I've decided to close.
MRM-820,oching,Maria Odea Ching,2008-05-30T05:52:37.571Z,2008-05-30T05:52:37.571Z,"This also affects 1.0.2, only the error message is different because of the migration of the webdav module. The error was 'HTTP Status 404 - [snapshots] Not Found (Likely Unconfigured).'"
MRM-820,oching,Maria Odea Ching,2008-07-02T02:01:40.948Z,2008-07-02T02:01:40.948Z,Not really a bug.. user just have to make sure that appserver.base is set to a correct path in CATALINA_OPTS env var so that the repo path is correct. 
MRM-838,brettporter,Brett Porter,2008-06-13T21:04:17.492Z,2008-06-13T21:04:17.492Z,"see also CONTINUUM-1799.

It's possible this affects Archiva too"
MRM-881,brettporter,Brett Porter,2008-07-21T04:00:00.544Z,2008-07-21T04:00:00.544Z,are you specifying the appserver.base system property as described in http://archiva.apache.org/docs/1.1//adminguide/webapp.html?
MRM-881,mykol,Michael Mallete,2008-07-21T04:26:11.539Z,2008-07-21T04:26:11.539Z,"yup. they're there. had an archiva 1.0.2 setup in that machine previously on the same tomcat server. cleaned up everything though before installing 1.1: deleted database and repo directories and .m2/archiva*. environment variables preserved.

was able to make it to work now by commenting out propertyPlaceholder in application context xml"
MRM-881,oching,Maria Odea Ching,2008-07-28T23:35:43.892Z,2008-07-28T23:35:43.892Z,"I tried replicating this but after setting export CATALINA_OPTS=""-Dappserver.home=$CATALINA_HOME -Dappserver.base=$CATALINA_HOME"" before starting Archiva, the error no longer showed up..."
MRM-881,oching,Maria Odea Ching,2008-08-12T03:42:19.44Z,2008-08-12T03:42:19.44Z,"Closing this as 'Not A Bug' since by settings this --> export CATALINA_OPTS=""-Dappserver.home=$CATALINA_HOME -Dappserver.base=$CATALINA_HOME"" as specified in the admin guide (when installing Archiva as a war) removes the error. I verified this both with Tomcat 5.5.17 and 6.0.14.. Thanks."
MRM-804,wsmoak,Wendy Smoak,2008-05-14T01:38:19.389Z,2008-05-14T01:38:19.389Z,Same for artifacts added through the new upload feature.
MRM-804,oching,Maria Odea Ching,2008-05-14T01:58:54.271Z,2008-05-14T01:58:54.271Z,Calling the RepositoryContentConsumers after a deploy and upload from the UI should fix this. 
MRM-804,wsmoak,Wendy Smoak,2008-05-17T19:48:30.362Z,2008-05-17T19:48:30.362Z,"Thanks, Deng.  Please review r657485, which indexes the uploaded artifact, (though not yet the associated pom)."
MRM-804,wsmoak,Wendy Smoak,2008-05-17T21:20:12.39Z,2008-05-17T21:20:12.39Z,"This is done for uploaded artifacts.  The artifact and uploaded (or generated) pom file are indexed immediately-- please review.  (r657491)

How expensive is this call?  Can we afford to do it on _every_ artifact deployment, when there may be multiple developers and/or CI servers deploying releases and snapshots?  If that is a potential issue we may want to make this configurable."
MRM-804,brettporter,Brett Porter,2008-05-25T17:24:23.526Z,2008-05-25T17:24:23.526Z,"it should be acceptable to call it for every artifact, though perhaps we want to put it on a queue to run in parallel?"
MRM-804,wsmoak,Wendy Smoak,2008-06-10T08:08:46.559Z,2008-06-10T08:08:46.559Z,artifacts uploaded through the Web UI are now indexed immediately.  See MRM-831 for deployed artifacts.
MRM-804,wsmoak,Wendy Smoak,2008-06-10T08:09:19.353Z,2008-06-10T08:09:19.353Z,Linking to the other half of this issue for deployed artifacts
MRM-885,jameswdumay,James William Dumay,2008-08-06T03:05:55.392Z,2008-08-06T03:05:55.392Z,I reproduced this as of r683152.
MRM-885,jameswdumay,James William Dumay,2008-08-13T22:25:44.99Z,2008-08-13T22:25:44.99Z,Issue has been fixed in trunk. Unfortunately the change was large enough that it could not go into 1.1.2.
MRM-823,oching,Maria Odea Ching,2008-06-02T01:52:21.996Z,2008-06-02T01:52:21.996Z,"Fixed in trunk -r662342.

- remove repo in group when repository is deleted.
- added tests"
MRM-844,mrgeorge,Mike George,2008-07-21T08:46:38.628Z,2008-07-21T08:46:38.628Z,"The POM is valid.  The version for log4j is specified in the dependencyManagement section of spring-parent-1.2.8.pom.

Parent POMs:
http://repo1.maven.org/maven2/org/springframework/spring-full/1.2.8/spring-full-1.2.8.pom
http://repo1.maven.org/maven2/org/springframework/spring-parent/1.2.8/spring-parent-1.2.8.pom
"
MRM-844,greyfairer,Geert Pante,2008-07-22T10:20:38.297Z,2008-07-22T10:20:38.297Z,"Hi Mike,

You are right, I hadn't even noticed.
So the dependencyTree doesn't work for valid POMs, either.

A 'live' example can also be seen at https://maven.atlassian.com/browse/com.atlassian.jira/atlassian-jira/4.0-SNAPSHOT/dependencyTree:
java.lang.IllegalArgumentException: Unable to create ArchivaArtifact with empty version [asm:asm-tree:null::pom]
	at org.apache.maven.archiva.model.ArchivaArtifact.(ArchivaArtifact.java:56)

Please set Severity to Major?"
MRM-844,greyfairer,Geert Pante,2008-07-22T10:27:05.858Z,2008-07-22T10:27:05.858Z,Another 'live' example: http://archiva.nuxeo.org/archiva/browse/org.springframework/spring-jdbc/2.5.2/dependencyTree
MRM-844,oching,Maria Odea Ching,2008-10-10T23:00:48.278Z,2008-10-10T23:00:48.278Z,"Fixed by the patch submitted for MRM-952, which was committed in trunk -r703626."
MRM-862,olamy,Olivier Lamy (*$^%`),2012-10-17T22:17:04.543Z,2012-10-17T22:17:04.543Z,fixed.
MRM-850,brettporter,Brett Porter,2008-06-25T21:25:50.245Z,2008-06-25T21:25:50.245Z,"Please ignore the wget results. repo1 doesn't allow wgetting.

Do you have any more information in the Archiva logs about what caused the error transferring the file?"
MRM-850,rnrivas,Renee Rivas,2008-06-26T13:00:08.132Z,2008-06-26T13:00:08.132Z,"This is from my archiva.log, different plugin but same problem.


2008-06-26 10:51:48,516 [SocketListener0-1] WARN  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Transfer error from repository ""central"" for artifact org.apache.felix:maven-bundle-plugin:1.0.0::pom, continuing to next repository. Error message: Download failure on resource [http://repo1.maven.org/maven2/org/apache/felix/maven-bundle-plugin/1.0.0/maven-bundle-plugin-1.0.0.pom]:Error transferring file
2008-06-26 10:51:48,535 [SocketListener0-1] INFO  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Transfer not attempted on http://repo1.maven.org/maven2/org/apache/felix/maven-bundle-plugin/1.0.0/maven-bundle-plugin-1.0.0.pom : NO to fetch, check-failures detected previous failure on url: http://repo1.maven.org/maven2/org/apache/felix/maven-bundle-plugin/1.0.0/maven-bundle-plugin-1.0.0.pom


wget does fetch the download if you add the -U NoSuchBrowser/1.0.   I thought it might be a similar problem that repo1 was somehow blocking Archiva based on a setting. "
MRM-850,rnrivas,Renee Rivas,2008-06-26T17:10:53.165Z,2008-06-26T17:10:53.165Z,Adding Archiva.log  with DEBUG level on.
MRM-850,rnrivas,Renee Rivas,2008-06-26T17:14:54.67Z,2008-06-26T17:14:54.67Z,"wrapper.  note the only thing I noticed that was abnormal:

'INFO: Could not load plexus context properties from: '/WEB-INF/plexus.properties'
"
MRM-850,brettporter,Brett Porter,2008-06-30T00:40:11.852Z,2008-06-30T00:40:11.852Z,"we'll need to find a way to enable better debug logging, as something particular is going wrong in the download. I can certainly proxy central using Archiva.

Do you have any other HTTP proxy or network settings that might affect this?

"
MRM-850,rnrivas,Renee Rivas,2008-06-30T11:32:04.629Z,2008-06-30T11:32:04.629Z,I use the same proxy settings for maven and it is able to grab everything from the repo.  I dont know of any reason why it would work for one and not the other.  is there any other information I can give you or look for to try to troubleshoot this?
MRM-850,brettporter,Brett Porter,2008-06-30T19:24:52.995Z,2008-06-30T19:24:52.995Z,"perhaps the proxy is not being used properly. Have you checked that the network proxy is configured on the archiva proxy connection?

"
MRM-850,rnrivas,Renee Rivas,2008-10-28T14:35:38.015Z,2008-10-28T14:35:38.015Z,"I had everything working, and now I just upgraded to 1.1.3.  "
MRM-850,minaba,mark inaba,2010-05-06T09:50:57.375Z,2010-05-06T09:50:57.375Z,"better late than never? i'm guessing that the site doesn't want web crawlers...so if your intentions are pure and you just want to access specific files with a command line, you can use wget with ""--user-agen=marksbrowser/.99"" (or any agent name i suppose).i gave it a try on a stubborn file and it worked"
MRM-850,rnrivas,Renee Rivas,2010-05-10T16:06:10.978Z,2010-05-10T16:06:10.978Z,"thanks for the response :)  I reinstalled everything and set up the proxy again, and it worked.  Still not sure what the issue was originally.  Thanks for the help!"
MRM-811,brettporter,Brett Porter,2010-02-23T03:10:08.688Z,2010-02-23T03:10:08.688Z,for testing
MRM-811,brettporter,Brett Porter,2010-02-23T05:28:22.648Z,2010-02-23T05:28:22.648Z,now get the incomplete model error message
MRM-829,jameswdumay,James William Dumay,2008-07-05T03:41:48.053Z,2008-07-05T03:41:48.053Z,Committed in r674161.
MRM-897,olamy,Olivier Lamy (*$^%`),2014-03-02T16:55:20.545Z,2014-03-02T16:55:20.545Z,should be fixed
MRM-897,brettporter,Brett Porter,2014-09-26T02:05:45.374Z,2014-09-26T02:05:45.374Z,"Doesn't happen with this method, but still happens in other scenarios where a 401 is first returned, and then the browser sends the credentials after the challenge. Not a big deal, just a bit confusing since that's a normal part of the procedure."
MRM-869,ndeloof,nicolas de loof,2008-07-08T07:48:44.156Z,2008-07-08T07:48:44.156Z,"Reading DefaultRepositoryProxyConnectors.transferSimpleFile:

The localFile directory structure is created prior to running the download :

{noformat} 
localFile.getParentFile().mkdirs()
temp = File.createTempFile(...
try {
wagon.get( remotePath, temp );
moveTempToTarget( temp, localFile );
{noformat} 

"
MRM-869,ndeloof,nicolas de loof,2008-07-09T07:20:03.168Z,2008-07-09T07:20:03.168Z,Temp file for File transferts is not created in target folder anymore but at repository root.
MRM-869,ndeloof,nicolas de loof,2008-07-09T08:20:47.791Z,2008-07-09T08:20:47.791Z,"changes reverted as this breaks in Continuum.


"
MRM-869,ndeloof,nicolas de loof,2008-07-09T09:00:46.495Z,2008-07-09T09:00:46.495Z,"fixed, with unit tests checked ;-)"
MRM-808,jmluy,John Michael Luy,2008-09-12T04:06:50.63Z,2008-09-12T04:06:50.63Z,"I've tried setting Archiva to run over SSL then access the repositories page thru https, the POM snippet shows https."
MRM-808,brettporter,Brett Porter,2008-09-13T21:37:56.547Z,2008-09-13T21:37:56.547Z,"thanks JM, was this with 1.1.1?"
MRM-808,jmluy,John Michael Luy,2008-09-14T20:49:02.836Z,2008-09-14T20:49:02.836Z,"yes, i was using the trunk from 1.1.1"
MRM-859,jameswdumay,James William Dumay,2008-07-03T09:18:25.549Z,2008-07-03T09:18:25.549Z,Committed in r673685.
MRM-896,oching,Maria Odea Ching,2008-08-06T06:00:01.821Z,2008-08-06T06:00:01.821Z,Fixed in trunk -r683220.
MRM-854,olamy,Olivier Lamy (*$^%`),2012-04-03T11:02:47.804Z,2012-04-03T11:02:47.804Z,fixed with the new ui.
MRM-861,oching,Maria Odea Ching,2008-07-09T21:17:42.582Z,2008-07-09T21:17:42.582Z,"Initial fix for this issue in trunk -r675415:
- added the pagination to the search results page "
MRM-861,oching,Maria Odea Ching,2008-07-11T02:53:01.369Z,2008-07-11T02:53:01.369Z,Fixed page links in trunk -r675852.
MRM-899,britsp,Steve Pugh,2008-09-26T05:34:38.697Z,2008-09-26T05:34:38.697Z,"We are also getting this issue, using archiva 1.1.2. Unable to log in to any account.
Restarting the tomcat hasn't helped for us. Every login attempt produces the above stack trace in the log.

"
MRM-899,intrix,arno koehler,2008-10-15T07:24:59.106Z,2008-10-15T07:24:59.106Z,"well at least you are getting some error trace we are going to upgrade next Friday from a 1.0.3 installation to a 1.1.3 because in some mysterious way our administrator account has become locked out ?!

We can login - it does not tell us that there is something wrong with the credentials (because they are obviously correct) but we don't see the configuration buttons.

If we use INCORRECT credentials it does tell us these credentials are incorrect, seems like removing the old and installing a 1.1.3 will not completely solve this issue? "
MRM-899,brettporter,Brett Porter,2008-10-15T07:42:49.708Z,2008-10-15T07:42:49.708Z,"arno - your problem is probably a locked account due to failed password attempts (Account Locked will be in the URL, but due to a bug it isn't shown on the login screen). If this is the case, resetting the password will correct the issue."
MRM-899,intrix,arno koehler,2008-10-15T09:06:10.631Z,2008-10-15T09:06:10.631Z,"Brett, we saw the change in the link eventually - so we also tried to ""request a new password"";
 this would be the solution, but this triggers a mail action WHICH FAILS :S

So now we are really stuck .. and still going for a reinstall "
MRM-830,jameswdumay,James William Dumay,2008-06-10T21:05:34.707Z,2008-06-10T21:05:34.707Z,"We should look at this after 1.1 (and possibly back port it to the 1.1.x branch).

I'm under the opinion that all calls to remote repositories should be asynchronous and that Archiva should serve the data that becomes available first. This will most likely also boost proxy performance."
MRM-830,jameswdumay,James William Dumay,2009-03-05T22:30:26.245Z,2009-03-05T22:30:26.245Z,Moving this off to 1.3 for the merge of the new repo api
MRM-830,brettporter,Brett Porter,2010-03-01T00:02:57.07Z,2010-03-01T00:02:57.07Z,refer to thread dump in linked issue for additional information
MRM-830,sgspencer,Stephen Spencer,2011-12-20T06:23:14.321Z,2011-12-20T06:23:14.321Z,"Just to note that we got hit by this issue this morning as Adobe's svn and repo is timing out.
It's an especially unpleasant bug because no errors are thrown, and the web admin still works quickly, it just makes Archiva take a very very long time when serving any artifact, even non-snapshot ones where I would assume proxy connections would not even be used."
MRM-830,olamy,Olivier Lamy (*$^%`),2014-02-25T19:30:48.244Z,2014-02-25T19:30:48.244Z,timeout now configurable in 2.x
MRM-830,bcros,Bruno Cros,2017-07-12T09:35:38.873Z,2017-07-12T09:35:38.873Z,"Actually, setting download timeout on 2 s seems to not be a workaround.
Remove the external repo works. but it would be great to have it when needed !
"
MRM-830,effrafax,Martin Stockhammer,2017-07-12T17:08:00.152Z,2017-07-12T17:08:00.152Z,"Hi,

the ticket is for archiva version 1.0.2 which is not maintained anymore. Which archiva version do you use?

Greetings

Martin


-- 
Diese Nachricht wurde von meinem Android-Gert mit K-9 Mail gesendet.
"
MRM-836,jmluy,John Michael Luy,2008-09-11T04:24:33.385Z,2008-09-11T04:24:33.385Z,"Attach patch that uses a different field for the id for the following items:
 - organization
 - cimanagement
 - issuemanagement
 - individuals

This will also fix MRM-842.
This will also probably need someway to update the database schema if you are upgrading from a previous version."
MRM-836,jameswdumay,James William Dumay,2009-02-10T17:35:25.944Z,2009-02-10T17:35:25.944Z,[EDIT] Actually I got this all wrong - this has not been fixed
MRM-836,brettporter,Brett Porter,2009-03-09T10:28:58.282Z,2009-03-09T10:28:58.282Z,the individual will need to rescan all the artifacts to populate the database correctly.
MRM-883,oching,Maria Odea Ching,2008-07-25T05:48:36.037Z,2008-07-25T05:48:36.037Z,"Fixed in trunk -r679754 with the following changes:
- do not generate feed if there are no information available
- return 204 if no information/update available"
MRM-813,wsmoak,Wendy Smoak,2009-09-02T10:15:30.225Z,2009-09-02T10:15:30.225Z,"This is still a problem in 1.2.2.  Archiva still logs ""Modifiied File (proxied)"" when a file that has been in my managed repository since May 2008 is requested.

The request:
2009_09_01.request.log:0:0:0:0:0:0:0:1%0 -  -  [02/Sep/2009:15:04:29 +0000] ""GET /archiva/repository/internal/org/apache/struts/struts-core/1.3.5/struts-core-1.3.5.jar HTTP/1.1"" 200 319406 ""http://localhost:9094/archiva/repository/internal/org/apache/struts/struts-core/1.3.5/"" ""Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_5_8; en-us) AppleWebKit/531.9 (KHTML, like Gecko) Version/4.0.3 Safari/531.9""

The audit log:
archiva-audit.log:2009-09-02 08:04:30 internal admin 0:0:0:0:0:0:0:1%0 ""org/apache/struts/struts-core/1.3.5/struts-core-1.3.5.jar"" ""Modified File (proxied)""

The filesystem:
{noformat}
imbrium:logs wsmoak$ ll /usr/local/share/repository/internal/org/apache/struts/struts-core/1.3.5
total 696
drwxr-xr-x  11 wsmoak  wsmoak     374 May 10  2008 .
drwxr-xr-x   9 wsmoak  wsmoak     306 Mar 21 07:15 ..
-rw-r--r--   1 wsmoak  wsmoak     168 Aug 30 10:12 maven-metadata.xml
-rw-r--r--   1 wsmoak  wsmoak      52 May 10  2008 maven-metadata.xml.md5
-rw-r--r--   1 wsmoak  wsmoak      60 May 10  2008 maven-metadata.xml.sha1
-rw-r--r--   1 wsmoak  wsmoak  319406 May 10  2008 struts-core-1.3.5.jar      <----------
-rw-r--r--   1 wsmoak  wsmoak      55 Aug 30 10:12 struts-core-1.3.5.jar.md5
-rw-r--r--   1 wsmoak  wsmoak      63 Aug 30 10:12 struts-core-1.3.5.jar.sha1
-rw-r--r--   1 wsmoak  wsmoak    4248 May 10  2008 struts-core-1.3.5.pom
-rw-r--r--   1 wsmoak  wsmoak      55 Aug 30 10:12 struts-core-1.3.5.pom.md5
-rw-r--r--   1 wsmoak  wsmoak      63 Aug 30 10:12 struts-core-1.3.5.pom.sha1
{noformat}
"
MRM-813,brettporter,Brett Porter,2010-02-23T03:10:38.545Z,2010-02-23T03:10:38.545Z,for testing
MRM-813,brettporter,Brett Porter,2010-02-28T23:13:10.934Z,2010-02-28T23:13:10.934Z,"still an issue. Perhaps can be addressed when the proxy API is revisited, otherwise we might bump it out."
MRM-813,jsharp,jsharp,2014-10-15T03:24:15.447Z,2014-10-15T03:24:15.447Z,Still getting this output from the webdav tests on trunk (proxy or no).
MRM-813,jsharp,jsharp,2014-10-16T22:34:18.254Z,2014-10-16T22:34:18.254Z,"The proxy/webdav tests expect RepositoryProxyConnectors fetchMetatadaFromProxies() to return a File, even with no proxy configured, and also when there is a proxy but no update to be fetched. But ArchivaDavResourceFactory fires off an AuditEvent (Modified File) whenever a file is returned."
MRM-813,olamy,Olivier Lamy (*$^%`),2014-10-20T01:09:21.651Z,2014-10-20T01:09:21.651Z,"thanks pr merged
https://github.com/apache/archiva/pull/8"
MRM-841,oching,Maria Odea Ching,2008-08-06T03:30:30.522Z,2008-08-06T03:30:30.522Z,"Hi Jan, I couldn't replicate this issue.. I was able to successfully scan and index the Nunit dll artifact you've attached without having to restart Archiva. 
Btw, I was using trunk -r683086. Could you verify this against this same revision too? Thanks :)"
MRM-841,oching,Maria Odea Ching,2008-09-02T01:10:47.988Z,2008-09-02T01:10:47.988Z,"I tried this again today, and I still couldn't replicate this in the scannable artifact types. What I encountered which requires a restart for the changes to be applied Repostiory Scanning Consumers. By default, the repository-purge is disabled. When I enabled it, it still wasn't executed during the repository scanning. It was only executed after I did a restart.."
MRM-841,oching,Maria Odea Ching,2008-09-02T04:22:12.933Z,2008-09-02T04:22:12.933Z,"I finally replicated the issue :) I think the problem is in the create-missing-checksums consumer, it's file types are not getting included. The file types for the other consumers (like the index-content consumer) are updated w/o restart though, since the DLL artifact showed up in the browse after adding the \*\*/\*.dll in the Repository Scanning page and doing a re-scan."
MRM-841,oching,Maria Odea Ching,2008-09-02T04:26:14.734Z,2008-09-02T04:26:14.734Z,Updated the summary for clarification
MRM-841,oching,Maria Odea Ching,2008-09-03T02:21:24.081Z,2008-09-03T02:21:24.081Z,"Fixed in trunk -r691527:
- updated the registry listener trigger condition for repo-purge, create-missing-checksums, auto-remove and index-content consumers"
MRM-826,jameswdumay,James William Dumay,2008-06-04T03:04:33.598Z,2008-06-04T03:04:33.598Z,See MRM-829
MRM-846,axismundi,Marc Lustig,2008-06-23T08:19:19.557Z,2008-06-23T08:19:19.557Z,"btw, the consumer ""repository-purge"" is enabled, of course."
MRM-846,dgreenbean,David Greenberg,2008-06-26T15:00:49.859Z,2008-06-26T15:00:49.859Z,"I also have this issue on Tomcat 6.0.16, Solaris 8, Java 1.6.0_06, Archiva 1.0.2.  The following is printed to the logs during a scan (times/directories/counts modified):
INFO  org.apache.maven.archiva.repository.scanner.RepositoryScanner:default  - Walk Started: [snapshots] /correct/path/to/my/snapshots/directory
INFO  org.apache.maven.archiva.repository.scanner.RepositoryScanner:default  - Walk Finished: [snapshots] /correct/path/to/my/snapshots/directory
INFO  org.codehaus.plexus.taskqueue.execution.TaskExecutor:repository-scanning  - Finished repository task:
.\ Scan of snapshots \.__________________________________________
  Repository Dir    : /correct/path/to/my/snapshots/directory
  Repository Name   : My Snapshots Repository
  Repository Layout : default
  Known Consumers   : (8 configured)
                      create-missing-checksums
                      update-db-artifact
                      repository-purge
                      index-content
                      metadata-updater
                      auto-rename
                      validate-checksums
                      auto-remove
  Invalid Consumers : <none>
  Duration          : 5 Minutes 55 Seconds 555 Milliseconds
  When Gathered     : 3/14/15 9:26 PM
  Total File Count  : 1000000
  Avg Time Per File : 2 Milliseconds
______________________________________________________________


The following are my settings for this repository (again with some values replaced):
Identifier: asnapshotsrepo 
Name My Snapshots Repository  
Directory /correct/path/to/my/snapshots/directory
WebDAV URL http://correct/URL/to/my/snapshots/repository
Type Maven 2.x Repository  
Releases Included  
Snapshots Included  
Delete Released Snapshots  
Repository Purge By Days Older Than 30 
Repository Purge By Retention Count 2 
Scanned  
Scanning Cron 0 0,30 * * * ? 

Nothing fancy going on with my configuration...derby DBs, no customization of the webapp, no errors in the logs.

Any ideas?"
MRM-846,oching,Maria Odea Ching,2008-07-02T00:30:49.394Z,2008-07-02T00:30:49.394Z,"This is working for me in trunk.. 

From the configuration above, I can see that the Repository Purge By Days Older Than is set to '30', therefore that's the criteria being used for the purge & not by retention count. I suspect that the artifacts in your repositories are not older than 30 days therefore nothing gets cleaned up. In order to set Archiva to purge by retention count, you need to de-activate the purge by days old by setting the value to '0'. Could you verify this please? Thanks :)

Sorry, the rules above weren't specified clearly in the docs.. I'll adjust it in trunk now. 

"
MRM-846,oching,Maria Odea Ching,2008-07-02T01:13:38.584Z,2008-07-02T01:13:38.584Z,"Added additional info about the purge in the docs (trunk -r673289).

Repository Purge section in Understanding Repository Configuration of Apache Archiva now looks like this..

Repository purge is the process of cleaning up the repository of old snapshots....

Please take note that the by number of days old criteria is activated by default (set to 100 days). In order to de-activate it and use the by retention count criteria, you must set the Repository Purge By Days Older field to 0. Another thing to note here is that if the by number of days old criteria is activated, the retention count would still be respected (See the Repository Purge By Days Older section below for more details) but not the other way around.
...."
MRM-846,nramirez,Nap Ramirez,2008-07-02T01:18:44.066Z,2008-07-02T01:18:44.066Z,"I've set up a repository, deployed 6 snapshots of the same project, then set the Repository Purge By Days Older field to 0 and enabled the repository-purge.  It all works for me, the Repository Purge by Retention Count was set to 2, so snapshots 5 & 6 remained after a scan. Btw, I used r673275."
MRM-846,oching,Maria Odea Ching,2008-07-03T22:03:07.67Z,2008-07-03T22:03:07.67Z,"Marc, greenberg.d@gmail.com, did the above config work for you? Can we already close this issue? :-)"
MRM-846,axismundi,Marc Lustig,2008-07-05T16:02:02.106Z,2008-07-05T16:02:02.106Z,"I can test this only in two weeks, unfortunately. "
MRM-846,oching,Maria Odea Ching,2008-07-06T20:29:02.532Z,2008-07-06T20:29:02.532Z,Closing this now for 1.1. Please re-open if the config did not work for you after testing it.. Thanks!
MRM-834,wsmoak,Wendy Smoak,2008-06-11T16:54:40.669Z,2008-06-11T16:54:40.669Z,would this need the equivalent of Continuum's base url configuration? (or do we already have that and it's just not displaying?)
MRM-834,evenisse,Emmanuel Venisse,2008-06-11T17:06:09.901Z,2008-06-11T17:06:09.901Z,"no, in continuum we need it because it is used outside web pages so we can't get the real url.
For archiva, we are on a page so we know the url used by the user so the host/port that we can use instead of ${baseUrl} used in the jsp"
MRM-834,axismundi,Marc Lustig,2008-06-27T04:14:33.058Z,2008-06-27T04:14:33.058Z,"Well, we also have a ReverseProxy in front of Archiva/JBoss, and we have no such issues.
I suppose the ReverseProxy is badly configured."
MRM-834,evenisse,Emmanuel Venisse,2008-06-27T08:58:16.672Z,2008-06-27T08:58:16.672Z,"Marc,
Can I see your config?"
MRM-834,brettporter,Brett Porter,2008-07-01T22:20:33.55Z,2008-07-01T22:20:33.55Z,"here is a patch that would use the X-Forwarded-Host header if present. However, it's only available on Apache 2.0+ and there's a better solution in this case. You should add the following configuration directive instead:

ProxyPreserveHost on

"
MRM-834,brettporter,Brett Porter,2008-07-01T22:21:52.925Z,2008-07-01T22:21:52.925Z,bumping this out to the future in case someone wants to make the host name configurables
MRM-834,brettporter,Brett Porter,2008-09-11T19:31:11.655Z,2008-09-11T19:31:11.655Z,"applied patch, will create a new issue for making the host explicitly configurable"
MRM-831,paulsp,Paul Spencer,2008-06-16T14:14:29.372Z,2008-06-16T14:14:29.372Z,"When uploading an artifact via Archiva's WebDav, the user expect to see the artifact listed.  The absents of the artifact is confusing since Archiva is received the artifact.  I understand the delay when the artifact is written directly to the file system.
"
MRM-831,axismundi,Marc Lustig,2008-06-27T04:07:00.968Z,2008-06-27T04:07:00.968Z,In our teams there is the same perception.
MRM-889,brettporter,Brett Porter,2010-02-23T03:12:58.466Z,2010-02-23T03:12:58.466Z,this is something the metadata is better equipped to deal with
MRM-889,brettporter,Brett Porter,2010-03-11T17:37:51.689Z,2010-03-11T17:37:51.689Z,"more generally, we need to detect any missing facets and rescan that particular piece of information. This would also help with the linked issue where metadata is not populated on initial scan, as we could indicate which facets to populate up front and which to do lazily."
MRM-843,keithnaas,Keith Naas,2008-10-13T15:28:28.552Z,2008-10-13T15:28:28.552Z,"I think the issue is likely fixable by changing XMLWriter.java between lines 64 and 65.
{code}
OutputFormat outputFormat = OutputFormat.createPrettyPrint();
+ outputFormat.setNewLineAfterDeclaration(true);
xmlwriter = new org.dom4j.io.XMLWriter( writer, outputFormat );
{code}"
MRM-843,brettporter,Brett Porter,2010-02-23T02:00:58.892Z,2010-02-23T02:00:58.892Z,for testing
MRM-843,brettporter,Brett Porter,2010-02-23T04:28:07.49Z,2010-02-23T04:28:07.49Z,I can't reproduce this in trunk using my own POM with the removal of the line separator
MRM-895,oching,Maria Odea Ching,2008-07-28T23:42:15.981Z,2008-07-28T23:42:15.981Z,The version is also missing from the banner (alpaca's message) in Tomcat..
MRM-895,dandare100,dandare100,2008-08-01T06:56:42.037Z,2008-08-01T06:56:42.037Z,"Patch to display version in Tomcat and Banner

Changed method signature. Not passing ClassLoader in anymore.

The resource is retrieved from the archiva-configuration jar META-INF directory."
MRM-895,brettporter,Brett Porter,2008-08-01T10:06:31.619Z,2008-08-01T10:06:31.619Z,"I think I see what you changed - is it possible you could submit this as a unified diff patch? (just the output of svn diff)

Thanks!
"
MRM-895,dandare100,dandare100,2008-08-01T12:21:27.766Z,2008-08-01T12:21:27.766Z,"Here u r.
No problem

I think this is a duplicate of MRM-683"
MRM-895,dandare100,dandare100,2008-08-03T01:47:07.84Z,2008-08-03T01:47:07.84Z,"Sorry for the hassle.

Please could you delete the 3 previously submitted patches. They were done on source level.

This last one is done on trunk level."
MRM-895,oching,Maria Odea Ching,2008-08-04T01:36:16.323Z,2008-08-04T01:36:16.323Z,MRM-895-trunk-level.patch applied in trunk -r682269..Thanks Mark! :)
MRM-895,jameswdumay,James William Dumay,2008-08-13T20:55:59.69Z,2008-08-13T20:55:59.69Z,Im still not seeing the Archiva version on tomcat 5.5.25 on trunk (as of r685734)
MRM-895,jameswdumay,James William Dumay,2008-08-13T21:15:31.856Z,2008-08-13T21:15:31.856Z,"Sorry, my mistake - I had some old snapshots lying around on the classpath.

Closing."
MRM-856,jameswdumay,James William Dumay,2008-07-02T00:18:31.638Z,2008-07-02T00:18:31.638Z,Committed in r673284.
MRM-863,olamy,Olivier Lamy (*$^%`),2012-10-18T06:45:07.794Z,2012-10-18T06:45:07.794Z,fixed.
MRM-827,brettporter,Brett Porter,2008-06-04T00:58:48.273Z,2008-06-04T00:58:48.273Z,"I don't think this is wise, you lose the flexibility of specifying what you actually want. It also doesn't help if ""repository"" under the root is actually an important directory.

The default configuration should not point at a dangerous location. If someone explicitly creates a repo in a bad spot, and sets the permissions to be able to be deleted, and hits delete, and opts to delete the contents beyond the warning... they're probably pretty intent on deleting it :)

"
MRM-827,oching,Maria Odea Ching,2008-06-04T01:09:14.522Z,2008-06-04T01:09:14.522Z,"""The default configuration should not point at a dangerous location. If someone explicitly creates a repo in a bad spot, and sets the permissions to be able to be deleted, and hits delete, and opts to delete the contents beyond the warning... they're probably pretty intent on deleting it :-) ""

Yeah, this was what I've been thinking too.. and that is why we have the 'Confirm Delete' page :-)"
MRM-827,wsmoak,Wendy Smoak,2008-06-04T07:42:21.834Z,2008-06-04T07:42:21.834Z,"Also not in favor-- the directory I configure should be the directory that gets used, with nothing appended.

Has anyone confirmed the original issue, which seems to be not so much that the Tomcat install got deleted, but that the repository location _defaulted_ to the same directory as the Tomcat location?
"
MRM-827,oching,Maria Odea Ching,2008-06-04T21:43:14.883Z,2008-06-04T21:43:14.883Z,"Yep, I verified the original issue both in 1.0.2 & trunk but the repo location didn't default to the Tomcat location for me. I tried setting appserver.base & appserver.home to ${catalina.home}, and the data/repositories/internal were just appended to the value of appserver.base/appserver.home. And when I didn't set these variables, the repo location defaulted to /data/repositories/internal."
MRM-827,brettporter,Brett Porter,2008-09-13T21:24:03.913Z,2008-09-13T21:24:03.913Z,I think we've confirmed the default is sensible and not harmful and put enough prevention in place to help out.
MRM-892,oching,Maria Odea Ching,2008-07-27T20:47:09.725Z,2008-07-27T20:47:09.725Z,See http://www.nabble.com/-MRM-730--not-fixed--Can%27t-search-on-class-names--td18644961.html
MRM-892,oching,Maria Odea Ching,2008-07-28T21:55:59.166Z,2008-07-28T21:55:59.166Z,"Fixed in trunk -r680352 and -r680606:
Changed the implementation of the search by class, package or method to use a prepended 'bytecode:' keyword for this search. Examples:
- bytecode:MyClass or bytecode:org.apache.archiva.MyClass (search for a class)
- bytecode:myMethod or bytecode:org.apache.archiva.MyClass.myMethod (search for a method)
- bytecode:org.apache.archiva (search for a package)

Limitations:
- You cannot search within search results for java/class/package "
MRM-815,brettporter,Brett Porter,2008-05-21T23:04:40.516Z,2008-05-21T23:04:40.516Z,this will only be relevant if the index is downloadable - at present this is not done 
MRM-815,jbousque,Jeremie BOUSQUET,2009-12-07T11:02:48.119Z,2009-12-07T11:02:48.119Z,"I think this might be relevant now in 1.2.2 as indexes are downloadable.
Typical use-case is using m2eclipse, with maven configured on a repository group in Archiva. In this case indexes are incomplete, and search is very limited."
MRM-815,brettporter,Brett Porter,2010-02-23T03:11:13.964Z,2010-02-23T03:11:13.964Z,investigate with Nexus indexer upgrade
MRM-815,olamy,Olivier Lamy (*$^%`),2011-11-02T09:39:54.669Z,2011-11-02T09:39:54.669Z,"Something to take care is karma on repos. Generating a full index is possible but in some cases users will have access to only a limited number of repositories mapped in the group. 
So in this case an index will be generated on the fly and not incremental."
MRM-815,olamy,Olivier Lamy (*$^%`),2011-11-02T17:35:10.551Z,2011-11-02T17:35:10.551Z,done 
MRM-815,olamy,Olivier Lamy (*$^%`),2011-11-05T04:08:26.005Z,2011-11-05T04:08:26.005Z,reopen as there is still cleanup todo on the current impl.
MRM-815,olamy,Olivier Lamy (*$^%`),2011-11-05T12:30:52.989Z,2011-11-05T12:30:52.989Z,"The idea is to have a cache value to not regenerate the merge index for all requests.
And to cleanup temporary directories having a session listener which will cleanup existing tmp index when user session end."
MRM-815,olamy,Olivier Lamy (*$^%`),2011-11-05T13:51:24.552Z,2011-11-05T13:51:24.552Z,"better cleanup solution  implemented.
I leave the issue open until configurable cache value per repo group implemented and unit test added!"
MRM-815,olamy,Olivier Lamy (*$^%`),2011-11-08T14:49:23.405Z,2011-11-08T14:49:23.405Z,so cache and unit test done
MRM-801,oching,Maria Odea Ching,2008-05-20T22:46:06.291Z,2008-05-20T22:46:06.291Z,Fixed in -r658548.
MRM-809,wsmoak,Wendy Smoak,2008-08-10T14:45:41.554Z,2008-08-10T14:45:41.554Z,"This might be related to the file dates.  

As discussed in the Archiva 1.1.1 vote thread, if you remove all the metadata files, and scan the repo, it won't generate the metadata files again.  But if you 'touch' all the files and re-scan the repository, then it will generate them for you.

While only scanning new content is good for the default case, there should be a way to force it to scan, regardless of the file dates."
MRM-809,brettporter,Brett Porter,2010-02-23T02:28:33.942Z,2010-02-23T02:28:33.942Z,for testing
MRM-809,brettporter,Brett Porter,2010-02-28T21:37:48.518Z,2010-02-28T21:37:48.518Z,"I agree with Wendy's assessment, and the forced scanning should take care of this now. In the future, we should move these consumers to more general 'maintenance' tasks in which case they can run and confirm all the metadata files are correct, independent of artifact scanning."
MRM-837,brettporter,Brett Porter,2008-06-13T21:02:56.917Z,2008-06-13T21:02:56.917Z,have you tried 1.0.2? Several related bugs were fixed.
MRM-837,mathus.b@mipih.fr,Baptiste MATHUS,2008-06-14T07:07:10.037Z,2008-06-14T07:07:10.037Z,"The server is the one at work. I'll try to find some time next week to see if it fixes/improves the current behaviour. I'll comment (or close) this bug when done.
Thanks for the answer."
MRM-837,mathus.b@mipih.fr,Baptiste MATHUS,2008-06-16T03:45:40.22Z,2008-06-16T03:45:40.22Z,I just upgraded to archiva 1.0.2 but unfortunately it does not seem to solve the problem...
MRM-837,mathus.b@mipih.fr,Baptiste MATHUS,2008-06-16T07:37:05.564Z,2008-06-16T07:37:05.564Z,"After some verifications, I found a workaround. Seems like archiva does not like the ""."" between version and the SNAPSHOT suffix. Replacing this . with a - makes it downloadable by archiva without problem.
As a reminder, here are the tested pattern:

* 2.1.0.beta-2.SNAPSHOT CANNOT be downloaded

* 2.1.0.beta-2-SNAPSHOT is OK
* 2.1.0.beta2-SNAPSHOT is OK

I guess there's something to do about it. As I said above: either forbid the upload into archiva, else archiva should be fixed to allow download.
In the meantime, we'll now use hyphen instead of dot.

Cheers."
MRM-837,mjahn,Mirko Jahn,2008-10-02T19:07:45.065Z,2008-10-02T19:07:45.065Z,"I have a very similar problem. I get an error 500 when I specify a version with ""SNAPSHOT"". However, as soon as I use the common pattern ""1.0.0.SNAPSHOT"", everything is fine.

Here is the stacktrace:
HTTP ERROR: 500

String index out of range: -1

RequestURI=/archiva/repository/sectest/com/xxx/xzy/SNAPSHOT/xzy-20081002.165542-1.pom
Caused by:

java.lang.StringIndexOutOfBoundsException: String index out of range: -1
	at java.lang.String.substring(Unknown Source)
	at org.apache.maven.archiva.repository.content.FilenameParser.expect(FilenameParser.java:107)
	at org.apache.maven.archiva.repository.content.DefaultPathParser.toArtifactReference(DefaultPathParser.java:119)
	at org.apache.maven.archiva.repository.content.RepositoryRequest.toArtifactReference(RepositoryRequest.java:79)
	at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.fetchContentFromProxies(ArchivaDavResourceFactory.java:529)
	at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.doGet(ArchivaDavResourceFactory.java:439)
	at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.createResource(ArchivaDavResourceFactory.java:256)
	at org.apache.maven.archiva.webdav.RepositoryServlet.service(RepositoryServlet.java:118)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1093)
	at com.opensymphony.webwork.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:189)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
	at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:39)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
	at com.opensymphony.webwork.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:88)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:722)
	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:404)
	at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
	at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
	at org.mortbay.jetty.Server.handle(Server.java:324)
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:828)
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
	at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:450)
"
MRM-837,mjahn,Mirko Jahn,2008-10-02T19:08:45.161Z,2008-10-02T19:08:45.161Z,"oh, I forgot, I used the latest version 1.1.2 from the standalone download on windows."
MRM-837,brettporter,Brett Porter,2010-02-23T02:12:51.784Z,2010-02-23T02:12:51.784Z,for testing
MRM-837,brettporter,Brett Porter,2010-02-23T05:05:10.2Z,2010-02-23T05:05:10.2Z,"still exists in 1.4. I'm surprised that Maven accepted this, as it's only meant to work with -SNAPSHOT."
MRM-837,brettporter,Brett Porter,2010-02-23T05:06:03.201Z,2010-02-23T05:06:03.201Z,on the other hand SNAPSHOT should work and isn't. Both can likely be corrected.
MRM-837,mathus.b@mipih.fr,Baptiste MATHUS,2010-02-23T07:05:20.8Z,2010-02-23T07:05:20.8Z,"Totally agree with you Brett. .SNAPSHOT isn't maven-compliant, and btw we don't use this naming anymore. But as you point out, I guess it should work. At least, I think archiva should be able to serve any content. Particularly, it should be able to serve content that was deployed by the standard maven way.

Cheers"
MRM-837,brettporter,Brett Porter,2010-12-31T21:42:05.6Z,2010-12-31T21:42:05.6Z,"On trunk the error is:
{code}
Timestamped snapshots must contain the main version, filename was 'MRM-837-20100223.110535-1.jar'
{code}

This will need to be checked in both locations."
MRM-865,evenisse,Emmanuel Venisse,2008-07-07T10:34:36.633Z,2008-07-07T10:34:36.633Z,Fixed in rev.674507
MRM-871,oching,Maria Odea Ching,2008-07-08T22:30:09.421Z,2008-07-08T22:30:09.421Z,Fixed in -r675081.
MRM-840,jameswdumay,James William Dumay,2008-07-01T20:29:26.555Z,2008-07-01T20:29:26.555Z,"Committed -r673257

Ive rolled back to wagon-http-lightweight from wagon-http for the time being."
MRM-878,brettporter,Brett Porter,2008-07-18T00:29:57.663Z,2008-07-18T00:29:57.663Z,"is this because you did a dry run and no release:clean?

That's a bit weird since it should do a clean checkout on release:perform..."
MRM-878,brettporter,Brett Porter,2008-09-13T21:38:32.531Z,2008-09-13T21:38:32.531Z,was fine in 1.1.1
MRM-872,ndeloof,nicolas de loof,2008-07-10T05:10:43.053Z,2008-07-10T05:10:43.053Z,"""empty"" here is not for ""blank"", but for XML root with no child element.

The issue depends on the repository ordering in the group. The ""first win"" logic returns an empty metadata because the first repository didn't found the artifact with its proxies and created an empty metadata file. This may be considered to be a bug...

In any way, we MUST support metadatas merge for this use case :

A user has an issue with a maven plugin. As a nice guy, he creates an issue, attach a patch, but to get quick fix he deploys a snapshot to its corporate repo.

To get it using a group repository (""public"" proxying public repos + ""corporate""), we need to merge the metadatas from both repositories, so that the custom snapshot will get listed in metadatas + all available version on public snapshot repositories."
MRM-872,oching,Maria Odea Ching,2008-07-13T09:06:19.522Z,2008-07-13T09:06:19.522Z,Added code for merging the metadatas of the repos under a repo group into one metadata in trunk -r676322.
MRM-872,oching,Maria Odea Ching,2008-07-14T04:10:30.061Z,2008-07-14T04:10:30.061Z,"Additional fixes in trunk -r676516:
# generate checksums for the generated merged metadata
# put the merged metadata & its checksums in the first repo where the metadata was found (with the filename: merged-maven-metadata.xml)
# merge the metadata if and only if all the following conditions are met:
#* the request was made to a repository group url
#* the requested resource is a metadata file or a checksum file of a metadata
#* the requested metadata file is at the project level, not version level
# added test case when metadata checksums are requested after the metadata file (simulate Maven requests)"
MRM-872,oching,Maria Odea Ching,2008-07-14T04:28:28.621Z,2008-07-14T04:28:28.621Z,"Additional fix in -r676526:
- write the merged metadata into a file named maven-metadata-${repoGroupId}.xml instead of merged-maven-metadata.xml to handle instances when a repository belongs to multiple groups. 

Could anyone please verify the above fixes too? I already tested it, but I might have missed something..
Thanks!"
MRM-887,lhe,Lars Heinemann,2009-03-30T16:35:21.08Z,2009-03-30T16:35:21.08Z,"Having the same behaviour here.

{noformat}
lhein@sosaria ~ $ uname -p
Intel(R) Core(TM)2 Duo CPU E8500 @ 3.16GHz
{noformat}

but uname -m works fine:

{noformat}
lhein@sosaria ~ $ uname -m
x86_64
{noformat}

I have got Gentoo Linux 64bits installed here testing with Apache Archiva 1.2.

"
MRM-887,olamy,Olivier Lamy (*$^%`),2014-03-02T16:46:26.183Z,2014-03-02T16:46:26.183Z,still the case?
MRM-887,skygolanur,Eric Barboni,2014-04-01T17:37:15.884Z,2014-04-01T17:37:15.884Z,"archiva script contains the followings:
{code:title=archiva|borderStyle=solid}
# Resolve the architecture
DIST_ARCH=`uname -p | tr [:upper:] [:lower:] | tr -d [:blank:]`
if [ ""$DIST_ARCH"" = ""unknown"" ]
then
    DIST_ARCH=`uname -m | tr [:upper:] [:lower:] | tr -d [:blank:]`
fi
{code}

I thinks this allow DIST_ARCH to be set acording to uname -m if first is unkown."
MRM-887,skygolanur,Eric Barboni,2014-04-10T02:58:26.418Z,2014-04-10T02:58:26.418Z,"Debian Sarge is old and the Wheezy version is working well with 1.3.x or 2.1.x start script.

For an archiva admin stuck on a os with not valid option ""-p"" for uname. I would suggest a manual edit of start script.

The logic is more on the http://jira.codehaus.org/browse/MAPPASM side.
a few os will have illegal option for uname -p (see http://en.wikipedia.org/wiki/Uname) . Cray UNICOS and HP-UX"
MRM-842,decherfb,Benoit Decherf,2008-06-17T06:52:48.177Z,2008-06-17T06:52:48.177Z,"The issue tracker link is:
http://<host>/archiva/browse/com.kelkoo.offerprocessing/OPMavenParent/1432

instead of :
  <issueManagement>
    <system>Bugzilla</system>
    <url>${bugzilla.url}/buglist.cgi?product_name=${product.name}&amp;component=${component.name}&amp;bug_status=__open__</url>
  </issueManagement>
"
MRM-884,jochen.wiedmann@gmail.com,Jochen Wiedmann,2008-08-04T10:40:56.395Z,2008-08-04T10:40:56.395Z,"Does this actually work? I have checked out archiva 1.1, applied the changes from rev. 680127, built archiva-proxy-1.1.jar and replaced the original one with the newly built version. However, network proxies still aren't working.

OTOH, I don't find an UnknownHostException in my log files? And DNS works for sure on my system?

"
MRM-884,jochen.wiedmann@gmail.com,Jochen Wiedmann,2008-08-04T10:45:20.352Z,2008-08-04T10:45:20.352Z,"Ok, cancel my previous reply. I have replaced wagon-provider-api and it works immediately.
"
MRM-868,oching,Maria Odea Ching,2008-09-12T18:50:27.755Z,2008-09-12T18:50:27.755Z,The sources already got included during release:perform in 1.1.2.
MRM-875,brettporter,Brett Porter,2010-09-14T18:09:05.913Z,2010-09-14T18:09:05.913Z,"Some have suggested this be in the form of a ZIP.

I think we can add two features:
- ability to ""add more artifacts with different classifiers"" to the form
- ability to just upload a ZIP file. The format would be a flat directory of artifacts, each named with their final name ([artifactId]-[version]-[classifier].[type]), eg archiva-webapp-1.4.war. This assumes you don't have any artifact ID clashes. I'd expect while there's no specific constraint, that ZIPs will tend to cover a single group ID anyway.

For the ZIP, an alternative format I considered was to use a repository layout - however in this case most users will have the ability to unpack it straight onto the repository filesystem instead."
MRM-875,olamy,Olivier Lamy (*$^%`),2012-04-03T10:53:43.908Z,2012-04-03T10:53:43.908Z,fixed with the new ui
MRM-875,brettporter,Brett Porter,2012-05-25T02:45:29.398Z,2012-05-25T02:45:29.398Z,should we move to 1.4-M3?
MRM-875,olamy,Olivier Lamy (*$^%`),2012-05-25T03:10:44.116Z,2012-05-25T03:10:44.116Z,"I have marked all stuff with fixed version: ui-rewrite
Then I wanted to do a bulk change to 1.4-M3 when new ui finished.
Makes sense ?"
MRM-875,olamy,Olivier Lamy (*$^%`),2012-09-05T09:12:47.038Z,2012-09-05T09:12:47.038Z,fixed with new ui only
MRM-839,oching,Maria Odea Ching,2008-08-21T03:16:37.823Z,2008-08-21T03:16:37.823Z,"Fixed in trunk -r687634:
- changed the rss url for the repository to /feeds/[repositoryId] and for the artifacts to /feeds/groupId/artifactId"
MRM-873,gautencio,Gwen Harold Autencio,2008-07-29T03:50:38.597Z,2008-07-29T03:50:38.597Z,Patch that will not display the up image link  when of the first repository and will not display the down image link of the last repository
MRM-873,oching,Maria Odea Ching,2008-08-03T22:58:59.156Z,2008-08-03T22:58:59.156Z,Patch applied in trunk -r682250. Thanks Gwen!
MRM-818,oching,Maria Odea Ching,2008-05-27T03:38:13.956Z,2008-05-27T03:38:13.956Z,"Fixed in trunk -r660425:

- set a maximum limit of 100 characters for the length of the repo group id"
MRM-853,jmluy,John Michael Luy,2008-07-01T22:07:33.961Z,2008-07-01T22:07:33.961Z,Attached patch that uses system name separator.
MRM-853,jameswdumay,James William Dumay,2008-07-01T23:53:57.486Z,2008-07-01T23:53:57.486Z,"Committed in r673277.

Thanks for the patch Marecor! "
MRM-853,brettporter,Brett Porter,2008-07-02T03:30:04.096Z,2008-07-02T03:30:04.096Z,"I think John submitted the patch, so I updated the log. Thanks both :)"
MRM-891,dantran,Dan Tran,2008-07-26T01:43:47.725Z,2008-07-26T01:43:47.725Z,"my suspicion is correct.

I took the contents of a archiva page at archiva.openqa.org and feed it to the httpwagon html parser test at
http://svn.apache.org/repos/asf/maven/wagon/trunk/wagon-providers/wagon-http-shared/src/test/java/org/apache/maven/wagon/shared/http/HtmlFileListParserTest.java

The test fails since it detect no element. However when taken out the prefix ""./"", it is able to parse the content

note, my last note mentions about a list of one item ( a space, it is actually an empty string) is because the stage plugin
appends that item to the list when it is empty.

So who should fix this? wagon or archiva?  not much wagon can do since cyberneko parser not able to detect the link.

"
MRM-891,dantran,Dan Tran,2008-07-26T13:11:35.885Z,2008-07-26T13:11:35.885Z,"I am able to reproduce the probem as stated using the wagon test, will need to further investigation."
MRM-891,brettporter,Brett Porter,2008-07-27T11:55:57.326Z,2008-07-27T11:55:57.326Z,"I think we can remove the leading ./ to help out, though the bug should be filed with wagon (if you could attach a patch that contains the failing test, that'd be a good starting point)."
MRM-891,dantran,Dan Tran,2008-07-27T19:06:30.854Z,2008-07-27T19:06:30.854Z,"more info.

I am able to produce the problem by feeding the content of the root page to wagon-beta-2, however
the with wagon-1.0-beta-3. It is ok.  I guess the new html parser in beta-3 does a better job.

However when build staging plugin with wagon beta-3, the staging plugin crashes with

java.lang.ArrayIndexOutOfBoundsException: -1
	at org.cyberneko.html.HTMLTagBalancer$InfoStack.pop(HTMLTagBalancer.java:1262)
	at org.cyberneko.html.HTMLTagBalancer.startElement(HTMLTagBalancer.java:669)
	at org.cyberneko.html.HTMLScanner$ContentScanner.scanStartElement

oh well, I need to to further debugging.

I am looking at both ends to:

  make archiva brower to match the apache browser, this way with it will work with wagon-beta-2

  or

  fix the AIOE error with wagon-beta-3.

"
MRM-891,brettporter,Brett Porter,2008-07-27T20:15:56.323Z,2008-07-27T20:15:56.323Z,"yep, I agree both should be done"
MRM-891,dantran,Dan Tran,2008-07-28T00:33:29.92Z,2008-07-28T00:33:29.92Z,"I think i found the root cause of AIOE see MRM-893 for details.

Also, I think I can also get staging-plugin with wagon-beta-2 to work with some help from archiva to
remove the prefix ""./"".    See attached patch.  ( hope is ok since I work again the 1.1 tag )"
MRM-891,brettporter,Brett Porter,2008-07-28T00:39:57.36Z,2008-07-28T00:39:57.36Z,"applied, thanks!"
MRM-880,brettporter,Brett Porter,2008-07-21T01:34:05.003Z,2008-07-21T01:34:05.003Z,"It seems we didn't bundle the SPARC architecture by default. You can download http://repo1.maven.org/maven2/tanukisoft/wrapper-delta-pack/3.2.3/wrapper-delta-pack-3.2.3.tar.gz and add the two sparc-64 files into bin and lib of Archiva as they are found in the distribution.

Alternatively, you can deploy Archiva into a servlet container."
MRM-880,deki,Dennis Kieselhorst,2008-07-21T02:22:41.087Z,2008-07-21T02:22:41.087Z,"cp wrapper-delta-pack-3.2.3/lib/libwrapper-solaris-sparc-* apache-archiva-1.1/lib/
cp wrapper-delta-pack-3.2.3/bin/wrapper-solaris-sparc-* apache-archiva-1.1/bin/

Works now. Thanks!"
MRM-880,oching,Maria Odea Ching,2008-08-12T02:23:31.564Z,2008-08-12T02:23:31.564Z,"Fixed in trunk -r685059:
- upgraded appassambler-maven-plugin version to latest snapshot
- include solaris-sparc-32, solaris-sparc-64 and linux-x86-64 bin and lib files in the standalone bundle

"
MRM-880,kkumarc@gmail.com,Krishna Kumar C,2012-01-23T00:58:42.995Z,2012-01-23T00:58:42.995Z,"Hello,

I am getting the same error in my AIX 64 bit box. Kindly provide wrapper support for AIX also.

regards
krishna"
MRM-833,brettporter,Brett Porter,2008-06-12T16:36:44.062Z,2008-06-12T16:36:44.062Z,"would someone mind submitting a patch to ""correct"" all my australianisms? Bonus points for adding i18n in the process and keeping one for en_AU"
MRM-833,jameswdumay,James William Dumay,2008-06-12T18:49:37.995Z,2008-06-12T18:49:37.995Z,Perhaps we could start to localize the whole app in 1.2?
MRM-833,ben.lidgey,Ben Lidgey,2008-06-13T09:20:01.993Z,2008-06-13T09:20:01.993Z,"IMHO i18n is the only way to go, as ""Organisation"" seems right to me too (en_GB). Otherwise we will have a toggling of spelling all the time..."
MRM-833,brettporter,Brett Porter,2008-06-30T00:41:20.961Z,2008-06-30T00:41:20.961Z,"ok, I'll cave in and let people change things to en_US by default.

See linked issue for i18n."
MRM-814,dandare100,dandare100,2008-08-01T18:01:14.356Z,2008-08-01T18:01:14.356Z,"This patch checks for blank field and for a valid cron expression.

Used custom field validator to wrap org.codehaus.plexus.scheduler.CronExpressionValidator.

The diff  is on project level (archiva-webapp). Not sure if this is the standard."
MRM-814,dandare100,dandare100,2008-08-03T10:30:33.091Z,2008-08-03T10:30:33.091Z,"This patch (MRM-814-trunk.patch) is done off trunk level. Please delete 

MRM-814.patch
MRM-895-trunk-level.patch"
MRM-814,oching,Maria Odea Ching,2008-08-05T00:54:27.564Z,2008-08-05T00:54:27.564Z,Patch MRM-814-trunk.patch applied in trunk -r682588. Thanks for the patch Mark! :)
MRM-867,jameswdumay,James William Dumay,2008-07-07T20:28:59.895Z,2008-07-07T20:28:59.895Z,Fixed in r674698.
MRM-858,jameswdumay,James William Dumay,2008-07-02T23:07:52.539Z,2008-07-02T23:07:52.539Z,Fixed in r673578.
MRM-879,jmluy,John Michael Luy,2008-09-16T10:09:39.383Z,2008-09-16T10:09:39.383Z,"attached patch that will use a default file (download-type-default.png) if the image for the specified type does not exist.
the download-type-jar.png file could be just copied as download-type-default.png"
MRM-879,brettporter,Brett Porter,2009-04-14T18:33:20.799Z,2009-04-14T18:33:20.799Z,fix was incorporated with the other linked issues
MRM-864,oching,Maria Odea Ching,2008-07-16T03:49:36.8Z,2008-07-16T03:49:36.8Z,"Fixed in trunk -r677197:
- use a lucene Filter with BooleanQuery and the LuceneQuery for searching within the search results
- added a checkbox in the general search page to search from the results only
- maintain a list of previous query strings if searchResultsOnly option is enabled in general search
"
MRM-824,oching,Maria Odea Ching,2008-06-03T20:56:24.995Z,2008-06-03T20:56:24.995Z,"I excluded the following jars in WEB-INF/lib (in trunk -r662942):
- xalan
- velocity-dep
- xml-apis
- wstx-asl
- stax-utils 
- xercesImpl

and added stax-1.2.0 as dependency to replace wstx-asl"
MRM-894,brettporter,Brett Porter,2008-07-29T07:08:00.607Z,2008-07-29T07:08:00.607Z,we'll have to look into some appropriate mappings
MRM-894,dandare100,dandare100,2008-10-21T09:15:39.109Z,2008-10-21T09:15:39.109Z,"My bad.

This only happens with the old mysql driver.

Works 100% with the new mysql-connector.

"
MRM-816,jameswdumay,James William Dumay,2008-05-22T20:27:42.603Z,2008-05-22T20:27:42.603Z,Wendy and I think these issues are both related.
MRM-816,brettporter,Brett Porter,2008-05-22T21:34:22.02Z,2008-05-22T21:34:22.02Z,"this was in a relocation, right?"
MRM-816,brettporter,Brett Porter,2010-02-23T02:12:09.685Z,2010-02-23T02:12:09.685Z,for testing
MRM-816,brettporter,Brett Porter,2010-02-23T04:47:41.622Z,2010-02-23T04:47:41.622Z,"we don't do native relocation any more. Maven can deal with it, and if we decide to reintroduce it, it will need to be done at a more fundamental level."
MRM-812,brettporter,Brett Porter,2008-09-13T21:22:33.54Z,2008-09-13T21:22:33.54Z,"currently it can only be managed by repository, but as you've said it could be done by partitioning repositories and using white/blacklists for what it can obtain remotely. That isn't configurable enough though.

We need to be able to add permissions where the resource in question is a particular path (or pattern, as in the white/blacklists). This is actually pretty straightforward with redback but incorporating it into the UI will take a bit more effort.
"
MRM-1816,olamy,Olivier Lamy (*$^%`),2014-03-05T18:54:34.541Z,2014-03-05T18:54:34.541Z,what archiva.log file says?
MRM-1816,Chris Harris,Chris Harris,2014-03-05T19:22:05.244Z,2014-03-05T19:22:05.244Z,"I've attached a log file that covers several cycles of myself trying to log in, encountering the error, shutting down Archiva, starting Archiva, and then hours later experiencing the error again.

The cycle repeats."
MRM-1816,Chris Harris,Chris Harris,2014-04-05T13:33:43.141Z,2014-04-05T13:33:43.141Z,"Can this problem be added to Fix Version 2.1.0?

Out of all of my recent AD/LDAP bugs that I've reported (MRM-1808 - MRM-1813, MRM-1816), this bug by far is the biggest thorn in my side.  I have to restart Archiva every time I need to download a new artifact.

It's so annoying that I'm tempted to try fixing this bug myself...even though I have no idea how deep the rabbit hole is and am already stretched for time and energy in my personal time."
MRM-1807,kumi,Michael,2014-02-21T03:07:20.698Z,2014-02-21T03:07:20.698Z,"I have the same behavior on RHEL 6, 64bit on jre 1.7.0_51 64bit

INFO   | jvm 1    | 2014/02/21 10:05:08 | org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'archivaServices': Cannot resolve reference to bean 'authenticationInterceptor#rest' while setting bean property 'providers' with key [1]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'authenticationInterceptor#rest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.apache.archiva.redback.users.UserManager org.apache.archiva.redback.rest.services.interceptors.AuthenticationInterceptor.userManager; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userManager#archiva': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.apache.archiva.admin.model.runtime.RedbackRuntimeConfigurationAdmin org.apache.archiva.web.security.ArchivaConfigurableUsersManager.redbackRuntimeConfigurationAdmin; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redbackRuntimeConfigurationAdmin#default': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private java.util.List org.apache.archiva.admin.repository.AbstractRepositoryAdmin.auditListeners; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditListener#metadata': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.apache.archiva.metadata.repository.RepositorySessionFactory org.apache.archiva.audit.MetadataAuditListener.repositorySessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'repositorySessionFactory#jcr': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.apache.archiva.metadata.repository.MetadataResolver org.apache.archiva.metadata.repository.jcr.JcrRepositorySessionFactory.metadataResolver; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'metadataResolver#default': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.apache.archiva.metadata.repository.storage.RepositoryStorage org.apache.archiva.metadata.repository.DefaultMetadataResolver.repositoryStorage; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'repositoryStorage#maven2': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.apache.archiva.admin.model.managed.ManagedRepositoryAdmin org.apache.archiva.metadata.repository.storage.maven2.Maven2RepositoryStorage.managedRepositoryAdmin; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'managedRepositoryAdmin#default': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: protected org.apache.archiva.redback.role.RoleManager org.apache.archiva.admin.repository.managed.DefaultManagedRepositoryAdmin.roleManager; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'roleManager': Invocation of init method failed; nested exception is java.util.NoSuchElementException..................................."
MRM-1807,olamy,Olivier Lamy (*$^%`),2014-02-21T05:45:19.537Z,2014-02-21T05:45:19.537Z,#NAME?
MRM-1807,kumi,Michael,2014-02-21T05:54:09.547Z,2014-02-21T05:54:09.547Z,"Yes.

-bash-4.1$ java -version
java version ""1.6.0_24""
OpenJDK Runtime Environment (IcedTea6 1.11.11.90) (rhel-1.62.1.11.11.90.el6_4-x86_64)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)"
MRM-1807,olamy,Olivier Lamy (*$^%`),2014-02-21T06:20:33.788Z,2014-02-21T06:20:33.788Z,"weird works fine here:
java version ""1.7.0_51""
OpenJDK Runtime Environment (rhel-2.4.4.1.el6_5-x86_64 u51-b02)
OpenJDK 64-Bit Server VM (build 24.45-b08, mixed mode)
"
MRM-1807,olamy,Olivier Lamy (*$^%`),2014-02-21T06:24:43.069Z,2014-02-21T06:24:43.069Z,#NAME?
MRM-1807,kumi,Michael,2014-02-21T06:31:34.901Z,2014-02-21T06:31:34.901Z,"It is an fresh installation on a new server instance. I will speak with our system administrator to install a newer OpenJDK Version.
I tried it with Oracle JRE 1.7.0_51 and OpenJdk 1.6.0_24"
MRM-1807,kumi,Michael,2014-02-21T06:50:58.778Z,2014-02-21T06:50:58.778Z,"same exception with OpenJDK 1.7.0_51 here.

-bash-4.1$ java -version
java version ""1.7.0_51""
OpenJDK Runtime Environment (rhel-2.4.4.1.el6_5-x86_64 u51-b02)
OpenJDK 64-Bit Server VM (build 24.45-b08, mixed mode)
"
MRM-1807,olamy,Olivier Lamy (*$^%`),2014-02-21T07:04:02.467Z,2014-02-21T07:04:02.467Z,"do you configure java path in conf/wrapper.conf file?

wrapper.java.command=


"
MRM-1807,kumi,Michael,2014-02-21T07:18:11.558Z,2014-02-21T07:18:11.558Z,"no. I have not changed the configuration.

wrapper.java.command=java


-bash-4.1$ which java
/usr/bin/java

-bash-4.1$ java -version
java version ""1.7.0_51""
OpenJDK Runtime Environment (rhel-2.4.4.1.el6_5-x86_64 u51-b02)
OpenJDK 64-Bit Server VM (build 24.45-b08, mixed mode)

After i changed to wrapper.java.command=/usr/bin/java it is the same error. 


Please take a look at the stack trace:

Caused by: java.util.NoSuchElementException
	at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(Unknown Source) ~[?:1.7.0_51]
	at java.util.LinkedHashMap$ValueIterator.next(Unknown Source) ~[?:1.7.0_51]
	at org.apache.archiva.web.security.ArchivaRbacManager.getRbacManagerForWrite(ArchivaRbacManager.java:129)
	at org.apache.archiva.web.security.ArchivaRbacManager.createResource(ArchivaRbacManager.java:539)


Can you explain what happens here:

ArchivaRbacManager.java:129

    protected RBACManager getRbacManagerForWrite()
    {
        for ( RBACManager rbacManager : this.rbacManagersPerId.values() )
        {
            if ( !rbacManager.isReadOnly() )
            {
                return rbacManager;
            }
        }
        return this.rbacManagersPerId.values().iterator().next();
    }

why there are no entries in rbacManagersPerId map?"
MRM-1807,kumi,Michael,2014-02-21T07:31:51.853Z,2014-02-21T07:31:51.853Z,"I see this in log file on my windows instance and archiva runs.

[WrapperSimpleAppMain] INFO  org.apache.archiva.web.security.ArchivaRbacManager [] - use rbacManagerIds: '[jdo]'


and this on my linux instance and archive fail.

[WrapperSimpleAppMain] INFO  org.apache.archiva.web.security.ArchivaRbacManager [] - use rbacManagerIds: '[]'

"
MRM-1807,olamy,Olivier Lamy (*$^%`),2014-02-21T07:38:05.333Z,2014-02-21T07:38:05.333Z,"yup this drive me nuts!!!
can you have a look in archiva.xml file?
Do you have such lines:

<userManagerImpls>
<userManagerImpl>jdo</userManagerImpl>
</userManagerImpls>
<rbacManagerImpls>
<rbacManagerImpl>jdo</rbacManagerImpl>
</rbacManagerImpls>

??"
MRM-1807,kumi,Michael,2014-02-21T07:42:34.105Z,2014-02-21T07:42:34.105Z,"No, there are no such lines in both archiva.xml files (./conf/archiva.xml, ./contexts/archiva.xml)"
MRM-1807,kumi,Michael,2014-02-21T10:15:05.29Z,2014-02-21T10:15:05.29Z,i copied the archiva.xml file from my windows instance to the linux instance and now it works fine.
MRM-1807,rjanicki,Rafal Janicki,2014-02-21T10:38:12.134Z,2014-02-21T10:38:12.134Z,"I have the same error on EC2 with completely fresh install. I had same data in config files as Michael (empty archiva.xml and such data in wrapper.conf). It was driving me crazy, but Michael suggestion to copy files from Windows config worked (thanks btw, it saved me some nerves)."
MRM-1807,olamy,Olivier Lamy (*$^%`),2014-02-21T18:49:59.944Z,2014-02-21T18:49:59.944Z,really weird!! As there is a piece of code to ensure default values are write to the configuration file if not there when starting the first time.
MRM-1807,pcanham,Paul Canham,2014-02-24T07:43:41.293Z,2014-02-24T07:43:41.293Z,"I get the same issue with using openjdk 1.6 and also 1.7 also tried Sun java 1.7 with no joy.

I have attached my vagrant and puppet scripts which i have been able to use to reproduce this issue, configuration files can be found under the archiva home directory (/var/local/archiva/conf)

For running the vagrant environment you will need to have vagrant 1.4 and Oracle Virtualbox (i have been testing with 4.3.6)"
MRM-1807,szus,Szymon Stryczek,2014-02-25T03:14:36.819Z,2014-02-25T03:14:36.819Z,"Same problem (clean installation of 2.0 version):
OS: RHEL 5.2, 2.6.18-92.el5PAE i686
Java:  version ""1.6.0_24""
Java(TM) SE Runtime Environment (build 1.6.0_24-b07)
Java HotSpot(TM) Server VM (build 19.1-b02, mixed mode)

Worked out workaround (maybe it will help someone):
apps/archiva/WEB-INF/lib/archiva-configuration-2.0.0.jar#org/apache/archiva/configuration/default-archiva.xml enhanced with:
<redbackRuntimeConfiguration>
   <userManagerImpls>
      <userManagerImpl>jdo</userManagerImpl>
   </userManagerImpls>
   <rbacManagerImpls>
      <rbacManagerImpl>jdo</rbacManagerImpl>
   </rbacManagerImpls>
</redbackRuntimeConfiguration>
"
MRM-1807,olamy,Olivier Lamy (*$^%`),2014-02-25T16:36:41.42Z,2014-02-25T16:36:41.42Z,"What I don't understand is why the default initialisation made in DefaultRedbackRuntimeConfigurationAdmin class doesn't on some os/jdk.

see http://svn.apache.org/repos/asf/archiva/trunk/archiva-modules/archiva-base/archiva-repository-admin/archiva-repository-admin-default/src/main/java/org/apache/archiva/admin/repository/runtime/DefaultRedbackRuntimeConfigurationAdmin.java 

Are you guys with the issue seeing logs as:

redbackRuntimeConfiguration with empty userManagerImpls so force at least jdo implementation !
or 
redbackRuntimeConfiguration with empty rbacManagerImpls so force at least cached implementation !

"
MRM-1807,olamy,Olivier Lamy (*$^%`),2014-02-25T18:31:37.619Z,2014-02-25T18:31:37.619Z,"so prevent any issues I added default values in default-archiva.xml
If you guys could test a build from trunk that would be lovely :-)"
MRM-1807,olamy,Olivier Lamy (*$^%`),2014-02-25T18:32:30.885Z,2014-02-25T18:32:30.885Z,http://svn.apache.org/r1571882
MRM-1807,skygolanur,Eric Barboni,2014-02-26T10:48:06.338Z,2014-02-26T10:48:06.338Z,Works fine in my ubuntu that was previoulsy failing.
MRM-1807,jotschi,Johannes Schth,2014-03-05T08:07:27.535Z,2014-03-05T08:07:27.535Z,"The archiva.xml from http://svn.apache.org/r1571882 works fine. 
I could not startup the 2.0.0 release a single time. I had it installed on a vanilla debian wheezy. It always stopped with the listed exception. 

From my point of view i would consider the 2.0.0 release as broken. When will 2.0.1 released?"
MRM-1807,carlos,Carlos Sanchez,2014-11-04T05:25:17.67Z,2014-11-04T05:25:17.67Z,I just had the same issue upgrading from 1.3.9 to 2.1.1. Adding the <redbackRuntimeConfiguration> entries to archiva.xml fixed it for me
MRM-1807,olamy,Olivier Lamy (*$^%`),2014-11-04T16:29:13.351Z,2014-11-04T16:29:13.351Z,@carlos what's in your logs?
MRM-1807,carlos,Carlos Sanchez,2014-11-05T02:18:54.228Z,2014-11-05T02:18:54.228Z,"Same thing as in the attached archiva.log:

{code}
2014-11-04 09:06:26,395 [WrapperSimpleAppMain] INFO  org.apache.archiva.web.security.ArchivaRbacManager [] - use rbacManagerIds: '[]'
...
Caused by: java.util.NoSuchElementException
        at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:396) ~[?:1.7.0_55]
        at java.util.LinkedHashMap$ValueIterator.next(LinkedHashMap.java:409) ~[?:1.7.0_55]
        at org.apache.archiva.web.security.ArchivaRbacManager.getRbacManagerForWrite(ArchivaRbacManager.java:129) ~[archiva-web-common-2.1.1.jar:2.1.1]
        at org.apache.archiva.web.security.ArchivaRbacManager.createResource(ArchivaRbacManager.java:557) ~[archiva-web-common-2.1.1.jar:2.1.1]
        at org.apache.archiva.redback.role.processor.DefaultRoleModelProcessor.processResources(DefaultRoleModelProcessor.java:94) ~[redback-rbac-role-manager-2.2.jar:2.2]
        at org.apache.archiva.redback.role.processor.DefaultRoleModelProcessor.process(DefaultRoleModelProcessor.java:75) ~[redback-rbac-role-manager-2.2.jar:2.2]
        at org.apache.archiva.redback.role.DefaultRoleManager.loadApplication(DefaultRoleManager.java:183) ~[redback-rbac-role-manager-2.2.jar:2.2]
        at org.apache.archiva.redback.role.DefaultRoleManager.loadRoleModel(DefaultRoleManager.java:119) ~[redback-rbac-role-manager-2.2.jar:2.2]
        at org.apache.archiva.redback.role.DefaultRoleManager.initialize(DefaultRoleManager.java:509) ~[redback-rbac-role-manager-2.2.jar:2.2]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.7.0_55]
{code}
"
MRM-1807,olamy,Olivier Lamy (*$^%`),2014-11-05T04:40:09.855Z,2014-11-05T04:40:09.855Z,better fix with https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=021bbaf
MRM-1838,saschavogt,Sascha Vogt,2017-04-06T13:18:23.618Z,2017-04-06T13:18:23.618Z,Fix version 3.2.0 - was this by mistake?
MRM-1838,effrafax,Martin Stockhammer,2017-04-06T22:16:39.946Z,2017-04-06T22:16:39.946Z,"No, not by mistake. The 2.2.2 release is coming soon and this feature will not be included. 
The following release will be the 3.0 version with JPA.
I can move this issue to the 3.0.0 release to consider what have to be done for it.
But looking at the number of active developers at the moment the more realistic version would be 3.2.0.

If you like to implement it, you are welcome. But you should use the JPA branch or wait until the JPA branch has been merged into the master."
MRM-1888,sebb@apache.org,Sebb,2015-05-08T15:57:42.059Z,2015-05-08T15:57:42.059Z,Wrong project
MRM-1830,msqr,Matt Magoffin,2014-04-15T19:08:54.877Z,2014-04-15T19:08:54.877Z,"I was able to work around the issue by replacing the XML above with the following:

{code:xml}
    <!-- Note: Don't filter /* because we don't want /repository/* to include
    charset on binary content. -->
  <filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/js/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/feeds/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/restServices/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>*.html</url-pattern>
  </filter-mapping>
{code}

The idea was to say ""filter all paths *except* {{/repository/*}}"", but without a custom filter it is hard to do that in web.xml... thus this might not apply the filter as expected in all situations."
MRM-1830,olamy,Olivier Lamy (*$^%`),2014-04-15T23:33:21.036Z,2014-04-15T23:33:21.036Z,"applied https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=90e775b
Thanks!"
MRM-1889,evan.greensmith,Evan Greensmith,2015-12-16T00:05:15.383Z,2015-12-16T00:05:15.383Z,"In my particular case, I have administration access to Archiva but I don't have access to the server it is hosted on. So feedback via the web UI would be required --- unless there is some way to also view the logs via the web UI (I don't believe this is possible, but may have missed it) "
MRM-1877,olamy,Olivier Lamy (*$^%`),2015-03-22T22:33:07.304Z,2015-03-22T22:33:07.304Z,fixed.
MRM-1858,olamy,Olivier Lamy (*$^%`),2014-09-03T18:45:45.207Z,2014-09-03T18:45:45.207Z,dup of MRM-1855
MRM-1871,olamy,Olivier Lamy (*$^%`),2014-11-23T06:03:09.096Z,2014-11-23T06:03:09.096Z,"should be fixed here https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=480825d

"
MRM-1871,keriol,Andi Liebrich,2014-11-24T12:39:31.481Z,2014-11-24T12:39:31.481Z,"Hi Olivier!

Unfortunately the bug is not completely resolved by your change.
I upgraded to 2.1.2-SNAPSHOT today because of the above exception, but now keep getting the same exception from other occurances in the same class. I think you should guard all occurences of getProxyConnectors(ManagedRepositoryContent):List<ProxyConnector> with a copy (or reintroduce the synchronize block).

My current exception is:
java.util.ConcurrentModificationException
	at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:901)
	at java.util.ArrayList$Itr.next(ArrayList.java:851)
	at org.apache.archiva.proxy.DefaultRepositoryProxyConnectors.fetchFromProxies(DefaultRepositoryProxyConnectors.java:318)
	at org.apache.archiva.metadata.repository.storage.maven2.Maven2RepositoryStorage.applyServerSideRelocation(Maven2RepositoryStorage.java:669)
	at org.apache.archiva.webdav.ArchivaDavResourceFactory.fetchContentFromProxies(ArchivaDavResourceFactory.java:819)
	at org.apache.archiva.webdav.ArchivaDavResourceFactory.processRepository(ArchivaDavResourceFactory.java:630)
	at org.apache.archiva.webdav.ArchivaDavResourceFactory.createResource(ArchivaDavResourceFactory.java:326)
	at org.apache.archiva.webdav.RepositoryServlet.service(RepositoryServlet.java:125)
[...]

Thanx and best regards,
Andi"
MRM-1871,olamy,Olivier Lamy (*$^%`),2014-11-24T16:45:46.231Z,2014-11-24T16:45:46.231Z,"Thanks for the report.
Should be fixed with https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=0148a72

If you can test?
Thanks"
MRM-1871,keriol,Andi Liebrich,2014-11-25T03:16:17.953Z,2014-11-25T03:16:17.953Z,"No, the errors are not completely gone. They became less frequent, but i still need to start repeated maven runs to have my project getting built once.

The error happens before you return the copied list, in Collections.sort():
java.util.ConcurrentModificationException
       at java.util.ArrayList.sort(ArrayList.java:1456)
       at java.util.Collections.sort(Collections.java:175)
       at org.apache.archiva.proxy.DefaultRepositoryProxyConnectors.getProxyConnectors(DefaultRepositoryProxyConnectors.java:1264)
       at org.apache.archiva.proxy.DefaultRepositoryProxyConnectors.fetchFromProxies(DefaultRepositoryProxyConnectors.java:316)
       at org.apache.archiva.metadata.repository.storage.maven2.Maven2RepositoryStorage.applyServerSideRelocation(Maven2RepositoryStorage.java:670)
       at org.apache.archiva.webdav.ArchivaDavResourceFactory.fetchContentFromProxies(ArchivaDavResourceFactory.java:819)
"
MRM-1871,olamy,Olivier Lamy (*$^%`),2014-11-26T17:58:27.894Z,2014-11-26T17:58:27.894Z,I pushed something which should be a better fix.
MRM-1871,keriol,Andi Liebrich,2014-11-27T04:37:24.526Z,2014-11-27T04:37:24.526Z,"Hi Olivier!

Seems to work so far, didn't doscover any problems yet.

Many thanks,
Andi"
MRM-1834,saschavogt,Sascha Vogt,2014-04-23T08:50:52.828Z,2014-04-23T08:50:52.828Z,PullRequest: https://github.com/apache/archiva/pull/2
MRM-1834,olamy,Olivier Lamy (*$^%`),2014-04-23T21:05:16.139Z,2014-04-23T21:05:16.139Z,"pr merged.
Thanks"
MRM-1857,brettporter,Brett Porter,2014-08-01T00:10:12.714Z,2014-08-01T00:10:12.714Z,"Fixed in 2e7c9b9857446dd358a7129e26c887ec64a1b775

Can be worked around locally by applying the following change to the corresponding line in {{apps/archiva/WEB-INF/classes/struts.xml}}:

{code:xml}
<struts>
  <constant name=""struts.action.excludePattern"" value=""^/$,^/repository/.*,^/xmlrpc$,^/feeds/.*"" />
{code}"
MRM-1881,skygo,Eric Barboni,2015-04-09T09:26:11.836Z,2015-04-09T09:26:11.836Z,"Hi,
 in the log I saw lots of
 : Cannot forcefully unlock a NativeFSLock  at the following place /opt/archiva/repositories/repositories/snapshots/repositories/snapshots/.indexer/write.lock 
Do you have possibility to stop archiva, remove the lock file and restart to see if issue is the same in a cleaner situation ?


"
MRM-1881,sbarnea,Sorin Sbarnea,2015-04-09T10:07:00.541Z,2015-04-09T10:07:00.541Z,"[~skygo] I configured a cleanup script in order to be able to provide you clean test results. I am trying now with different database settings, it seems that the problem is related to the defaultTransactionIsolaction which was missing from the config, the config does not allow text values, and the first two values I tried didnt work (0 and 2). What happens now is that it starts but when I get to the login screen and do admin password reset I get exceptions regarding failed transactions. I will be back in few minutes with more information."
MRM-1881,sbarnea,Sorin Sbarnea,2015-04-09T10:37:10.958Z,2015-04-09T10:37:10.958Z,"So I managed to solve the database configuration by adding:
{code}
<Set name=""defaultTransactionIsolation"">8</Set>
{code}
This would only solve the problem of not having a *valid* sample postgresql config in jettry.xml. Also we would need to include postgresql drivers inside the distro. I used postgresql-9.3-1102-jdbc4.jar and this one seems to be working.

Funny or not the problem of getting the product in a working state is not yet finished. I do have an admin account and I tried to reset the password, but after I get the reset link I enter two identical passwords and nothing happens... no confirmation nothing. 

Opening the JS console I discover weird stuff, like that the password form is sending the passwords in plain text as GET parameters instead of POST?! Good security practice, is the first place where I see it! Anyway it seems to always return 403 from the server, so I cannot change the password.

"
MRM-1881,sbarnea,Sorin Sbarnea,2015-04-09T10:39:10.364Z,2015-04-09T10:39:10.364Z,"Also I tried to register a new account, but when I try to get a new account, I get this error in the UI: 
{code}
[Unable to get object 'org.apache.archiva.redback.users.jdo.JdoUser', id 'sorins', fetch-group 'null' from jdo store.]
{code}
Nothing is logged in the logfiles.

Now I am considering purging the database, in case it was not initialized properly in the first place (even if that's true, the problem with the password reset form is still fully valid)."
MRM-1881,sbarnea,Sorin Sbarnea,2015-04-09T10:51:42.43Z,2015-04-09T10:51:42.43Z,"After cleaning the database (no table left) while archiva service was stopped, I started it again the service and it seem that it did create the database tables back. So long so good, but on the homepage I do see the below error message even if I never tried to login. 
{code}
[Unable to get object 'org.apache.archiva.redback.users.jdo.JdoUser', id 'admin', fetch-group 'null' from jdo store.]
{code}

I checked the new database and it seems to contain only one guest user. Still the application has the impression that it was already configured."
MRM-1881,sbarnea,Sorin Sbarnea,2015-04-09T11:12:51.404Z,2015-04-09T11:12:51.404Z,"So, I am officially stuck again due to incompletely / incorrectly initialized database and I am attaching the last log, which seems very clean. The only small concert in the log is a warning that initial pool size is greater than the max size, even if I do know that they are correctly specified in the jetty file (15 and 30)."
MRM-1881,skygo,Eric Barboni,2015-04-10T11:18:41.356Z,2015-04-10T11:18:41.356Z,"{code}
<New id=""users"" class=""org.eclipse.jetty.plus.jndi.Resource"">
    <Arg>jdbc/users</Arg>
    <Arg>
      <New class=""org.apache.tomcat.jdbc.pool.DataSource"">
        <Set name=""driverClassName"">org.postgresql.Driver</Set>
        <Set name=""url"">jdbc:postgresql://localhost/archiva</Set>
        <Set name=""name"">ArchivaApp</Set>
        <Set name=""username"">archiva</Set>
        <Set name=""defaultAutoCommit"">true</Set>
        <Set name=""password"">archivasecret</Set>
        <Set name=""maxWait"">10000</Set>
        <Set name=""removeAbandonedTimeout"">10000</Set>
        <Set name=""initialSize"">15</Set>
        <Set name=""maxActive"">30</Set>        
        <Set name=""removeAbandoned"">true</Set>
        <Set name=""logAbandoned"">true</Set>
        <Set name=""testOnBorrow"">false</Set>
        <Set name=""validationQuery"">select 1</Set>
        <Set name=""testOnReturn"">false</Set>
        <Set name=""defaultTransactionIsolation"">8</Set>
      </New>
    </Arg>
  </New>
{code}

Hi, I try to setup a postgresql instance and try to change some parameter testOnBorrow to false and defaultAutoCommit to true
Starting from fresh database.

I was able to complete admin creation and the table JDO user is populated with admin. I can after that use the account and get no more the error.

1.We can add the postgresql configuration to jetty.xml for the next release (If you can confirm it works otherwise, it will need more investigation)
2.Embedding jdbc driver seems difficult because there is also mysql and other and you can have lots of version of each driver according to the database(system/version) you use.
"
MRM-1881,sbarnea,Sorin Sbarnea,2015-04-10T11:29:12.29Z,2015-04-10T11:29:12.29Z,"Embedding postgresql jdbc driver is not an issue because you can always take the latest release. PostgreSQL is downwards compatible and does not require perfect matching between database version and client version. Obviously is better to use newer versions as they can enable additional functionality or better performance. Stability is not an issue with these as release really means stable. 

Based on your JDK requirements you can always find which driver is the best https://jdbc.postgresql.org/download.html - the page is well documented :)

MySQL driver is more problematic and also had licensing issue, but PostgreSQL doesn't have this problem. 

Due to these reasons Atlassian is only distributing their products with postgresql drivers and not with mysql ones."
MRM-1881,sbarnea,Sorin Sbarnea,2015-04-13T10:40:00.608Z,2015-04-13T10:40:00.608Z,"FYI, at this moment Archiva lost its appeal and we picked Nexus. We encountered too many issues on basic setup, showing us that is not yet mature enough."
MRM-1881,proofy,Sven Jrns,2016-09-12T14:43:17.624Z,2016-09-12T14:43:17.624Z,It lacks the documentation to note that the postgresql driver must be entered in the wrapper.conf.
MRM-1811,skygolanur,Eric Barboni,2014-10-13T20:03:45.718Z,2014-10-13T20:03:45.718Z,"add optional params in simplegrid to allow your suggested pagination.
Applied only for user page."
MRM-1893,skygo,Eric Barboni,2015-06-22T08:22:53.409Z,2015-06-22T08:22:53.409Z,"Thanks for the notification.
 Removed archiva 2.1.1 and redback  2.2"
MRM-1802,olamy,Olivier Lamy (*$^%`),2014-04-01T23:04:27.621Z,2014-04-01T23:04:27.621Z,fixed
MRM-1814,skygolanur,Eric Barboni,2014-03-05T15:48:36.366Z,2014-03-05T15:48:36.366Z,"Hi, would be nice to have archiva configuration file and pom file. I'm not using eclipse and maven in eclipse."
MRM-1814,bklau2006,BK Lau,2014-03-05T17:09:39.862Z,2014-03-05T17:09:39.862Z,"Eric: You don't need eclipse or maven, just use the maven-aether ant task:
http://mvnrepository.com/artifact/org.eclipse.aether/aether-ant-tasks/0.9.0.M4

This is just standard Ant using Eclipse Aether API which then connects to the  Maven Repo Manager like Apache Archiva:
https://docs.sonatype.org/display/AETHER/Aether+Ant+Tasks
"
MRM-1814,olamy,Olivier Lamy (*$^%`),2014-03-05T18:34:29.693Z,2014-03-05T18:34:29.693Z,so the stack overflow says it's fixed
MRM-1814,jsharp,jsharp,2014-09-02T23:10:16.638Z,2014-09-02T23:10:16.638Z,Documentation error - recommend close.
MRM-1806,thunderhook,Oliver E,2016-03-25T23:06:11.134Z,2016-03-25T23:06:11.134Z,"This test also fails on Windows 7, JDK8.

With archiva 2.2.0 this changed to:
{{java.nio.file.FileSystemException: The process cannot access the file because it is being used by another process}}
at
{{Files.copy( largeJar.toPath(), lock.getFile().toPath(), StandardCopyOption.REPLACE_EXISTING );}}

Any ideas on this?"
MRM-1833,saschavogt,Sascha Vogt,2014-04-23T08:50:06.672Z,2014-04-23T08:50:06.672Z,PullRequest: https://github.com/apache/archiva/pull/1
MRM-1833,olamy,Olivier Lamy (*$^%`),2014-04-23T21:05:01.335Z,2014-04-23T21:05:01.335Z,"pr merged.
Thanks"
MRM-1884,skygo,Eric Barboni,2015-04-27T12:31:27.651Z,2015-04-27T12:31:27.651Z,"Hi,
 I cannot reproduce the issue with the following configuration (JDK 7_80, maven 3.3.1)
 May you give us the java version and maven version. 
"
MRM-1886,skygo,Eric Barboni,2015-05-05T00:52:40.852Z,2015-05-05T00:52:40.852Z,"Hi,
 A js bind was no more done change in html structure. 

Change here: https://git-wip-us.apache.org/repos/asf?p=archiva.git;a=commit;h=9312b9db7036760c64e18682dee9e3f417ae4303

Tested locally work again"
MRM-1886,hudson,Hudson,2015-05-05T01:30:27.309Z,2015-05-05T01:30:27.309Z,"SUCCESS: Integrated in archiva-master-build #901 (See [https://builds.apache.org/job/archiva-master-build/901/])
MRM-1886 bind javascript to tr instead li (change in html) (skygo: rev 9312b9db7036760c64e18682dee9e3f417ae4303)
* archiva-modules/archiva-web/archiva-webapp/src/main/webapp/js/archiva/search.js
"
MRM-1826,skygolanur,Eric Barboni,2014-04-10T02:42:34.058Z,2014-04-10T02:42:34.058Z,"Hi,
Added the meta for IE in https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=ddf5842

I hope the strategy is enough for IE9. (I cannot reproduce a setup like yours - IE11 at home)

"
MRM-1826,deckrider,deckrider,2014-04-11T07:51:10.99Z,2014-04-11T07:51:10.99Z,"Yes, thanks!  I made the same modification as in https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=ddf5842 within /index.html of the archiva 2.0.1 war and it solved my issue."
MRM-1803,olamy,Olivier Lamy (*$^%`),2014-03-05T22:29:16.482Z,2014-03-05T22:29:16.482Z,"http://svn.apache.org/r1574764
should be fixed with forcing xalan version to be here. As the api loaded looks to be different from the one coming with IMB jdk"
MRM-1808,skygolanur,Eric Barboni,2014-03-03T18:46:00.473Z,2014-03-03T18:46:00.473Z,"Is MRM-1805 the same as yours if you can confirm error position?
I cleaned firefox cache and it worked again, and I had not way to reproduce the issue now.
"
MRM-1808,Chris Harris,Chris Harris,2014-03-03T20:05:53.571Z,2014-03-03T20:05:53.571Z,"Hi, Eric.  Clearing the cache resolved the problem.

Thanks!"
MRM-1808,olamy,Olivier Lamy (*$^%`),2014-03-05T23:03:30.962Z,2014-03-05T23:03:30.962Z,fixed the jquery ui js
MRM-1810,ottomata,Andrew Otto,2014-03-07T15:21:39.218Z,2014-03-07T15:21:39.218Z,"I had this problem while setting up Archiva for the Wikimedia Foundation.  Ja, should be configurable via the web interface."
MRM-1810,olamy,Olivier Lamy (*$^%`),2014-10-08T20:11:05.785Z,2014-10-08T20:11:05.785Z,"https://github.com/apache/archiva/pull/7
Thanks!"
MRM-1860,olamy,Olivier Lamy (*$^%`),2014-09-11T19:55:30.662Z,2014-09-11T19:55:30.662Z,fixed with new redback version
MRM-1890,skygo,Eric Barboni,2015-05-19T22:23:04.397Z,2015-05-19T22:23:04.397Z,"Hi, sorry I cannot reproduce.
  Please can you be more precise on your workflow and maybe what is the configuration

I try with the following in remote url field and seems working
https://repo.maven.apache.org/maven2/.index/

"
MRM-1890,funster,irfani arief,2015-05-20T08:37:43.971Z,2015-05-20T08:37:43.971Z,i can't reproduce it now.. there might be something wrong with my system. this might be closed
MRM-1812,olamy,Olivier Lamy (*$^%`),2014-03-05T18:44:29.86Z,2014-03-05T18:44:29.86Z,you have auto complete?
MRM-1812,olamy,Olivier Lamy (*$^%`),2014-05-06T01:59:35.087Z,2014-05-06T01:59:35.087Z,fixed https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=7d3cdeb
MRM-1812,Chris Harris,Chris Harris,2014-05-06T02:14:38.291Z,2014-05-06T02:14:38.291Z,"Woo hoo!  Thanks, Olivier!"
MRM-1818,olamy,Olivier Lamy (*$^%`),2014-03-26T07:18:24.734Z,2014-03-26T07:18:24.734Z,"2.0.0 removed.
There is now only one per series: 
1.3.6
1.4-M4
2.0.1
"
MRM-1818,sebb@apache.org,Sebb,2014-03-26T07:47:26.044Z,2014-03-26T07:47:26.044Z,"Thanks. Please can you add the tidyup stage to any release process documentation you have?

Deletion of superseded releases is best done just before sending the Announce e-mail.
In turn, the Announce e-mail should be sent a day or so after publishing the releases to the mirror system, to allow external mirrors time to catch up."
MRM-1818,brettporter,Brett Porter,2014-03-26T17:36:59.504Z,2014-03-26T17:36:59.504Z,[~olamy] any reason we need to keep 1.4-M4?
MRM-1818,olamy,Olivier Lamy (*$^%`),2014-03-26T17:40:48.342Z,2014-03-26T17:40:48.342Z,"no reason in fact :-)
I will delete that too.
"
MRM-1818,olamy,Olivier Lamy (*$^%`),2014-03-26T17:42:11.696Z,2014-03-26T17:42:11.696Z,done
MRM-1883,krichter,Karl Richter,2015-04-26T17:53:24.767Z,2015-04-26T17:53:24.767Z,Specification in environment only works if there's an `appserver.base` and an `appserver.home` environment variable (besides the specification inside `CATALINA_OPTS`).
MRM-1845,axel3rd,Alix Lourme,2014-06-04T03:48:31.328Z,2014-06-04T03:48:31.328Z,"{quote}
Workaround [...] RequestHeader unset Authorization
{quote}

A little violent ... could block the artifacts publication => better configuration : 

{code}
SetEnvIf Request_URI ""repository\/virtual"" remove_authorization
RequestHeader unset Authorization env=remove_authorization
{code}"
MRM-1861,thunderhook,Oliver E,2014-12-12T17:49:44.507Z,2014-12-12T17:49:44.507Z,"Another user provided information about this issue on [StackOverflow|http://stackoverflow.com/a/27382221/1213544]:

{quote}
Exactly same problem here. I can't vote on your BUG report because I have no jira account.
*As far as I figured out there seems to be a problem with the configuration file ~/.m2/archiva.xml. The Proxy is set without port information.*
Hopefully this bug will be fixed as soon as possible.
{quote}"
MRM-1861,amansour,Ahmed MANS,2015-01-29T03:21:45.726Z,2015-01-29T03:21:45.726Z,The port number is not saved in the archiva.xml file.
MRM-1861,amansour,Ahmed MANS,2015-01-29T03:21:55.193Z,2015-01-29T03:21:55.193Z,"Hi, i'm using Archiva 2.1.1. I guess there still no fix for this bug. Even though i tried to add the port number to the networkProxy <port>8080</port> in the ~/.m2/archiva.xml, it doesn't seem to work. Any solution ? Thanks in advance. "
MRM-1861,olamy,Olivier Lamy (*$^%`),2015-01-29T04:23:56.553Z,2015-01-29T04:23:56.553Z,"was is the url of the target server? Is it http or https?
if it's central you must a proxy configured with https protocol as central is now https.
HTH"
MRM-1861,chsandhaus,Christoph Sandhaus,2015-01-30T02:34:34.016Z,2015-01-30T02:34:34.016Z,"Can't check quickly, because I have no 2.1.1 installation right now. Maybe someone else can do?"
MRM-1861,skygolanur,Eric Barboni,2015-02-03T16:58:53.016Z,2015-02-03T16:58:53.016Z,"Hi, 
port 8080 is considered as default (modello). Current snapshot save others value.

 Issue is somewhere else but I have not infra with proxy"
MRM-1861,thunderhook,Oliver E,2015-02-09T08:26:10.355Z,2015-02-09T08:26:10.355Z,"Hi,
thank you for your responses. We changed to https, still no luck.

I don't know if this will help or not:

Our Teststage upgraded from 1.3.6 to 2.1.0 and we changed nothing on our configuration.

When I try to resolve a dependency from central (meaning: I don't have it in archiva yet) the client log says:

{quote}
09.02.15 15:14:00 MEZ: \[INFO\] Downloaded http://HOST/archiva/repository/GROUP/com/cedarsoft/serialization/test/6.2.0/test-6.2.0.jar
{quote}

When I resolve a dependency which is already on archiva it is saying:

{quote}
09.02.15 15:14:01 MEZ: \[INFO\] Downloading http://HOST/archiva/repository/GROUP/com/google/code/findbugs/jsr305/3.0.0/jsr305-3.0.0.jar
09.02.15 15:14:01 MEZ: \[INFO\] Downloaded http://HOST/archiva/repository/GROUP/com/google/code/findbugs/jsr305/3.0.0/jsr305-3.0.0.jar
{quote}

So the client side logs misses the ""Downloading..."" entry.

On archiva the directory for the artifact is created but it only shows the pom.xml (+MD5,SH1).

With this actual problem, Maven tasks take about forever (it seems some timeout triggers).

Hope this information can help.

If you have any ideas how to provide you more useful test information /logs (which are empty on archivas side), feel free to ask!"
MRM-1861,olamy,Olivier Lamy (*$^%`),2015-02-11T04:55:58.738Z,2015-02-11T04:55:58.738Z,do you see something in archiva.log file?
MRM-1861,thunderhook,Oliver E,2015-02-11T06:40:58.503Z,2015-02-11T06:40:58.503Z,"Actually, now I can see something in the logs from 2 days ago (do they get flushed?). 

It says: ""Connection timed out"".

archiva_timeout.log shows the log with HTTPS Proxy and http://repo1.maven.org/maven2 (and some other remote repos).

I also tried https://repo1.maven.org/maven2 today (with HTTPS proxy) but still no luck. The log is not available yet, I will add it later."
MRM-1861,thunderhook,Oliver E,2015-02-25T04:19:20.928Z,2015-02-25T04:19:20.928Z,"This log shows the problem with HTTPS Proxy connector and HTTPS maven central. It also shows ""timed out"". Maybe other users can also provide their logs and/or setups."
MRM-1861,emsouza,Eduardo Souza,2015-06-08T10:58:39.03Z,2015-06-08T10:58:39.03Z,"Looking at the source code of the master branch of Archiva got the folowing conclusions: The problem is caused by numerous classes that do not use the proxy configuration correctly and classes that use the proxy configuration of Maven and not the Archiva configuration. 

The ProxyInfo class in many places does not configure the type of proxy connection, and then causes an error in the connection. 

The class DownloadRemoteIndexTaskRequest class uses an implementation of Maven (IndexPacker) to download content repositories and that does not use the Archiva configuration"
MRM-1861,skygo,Eric Barboni,2015-06-09T08:01:48.502Z,2015-06-09T08:01:48.502Z,"Hi,
  do you think it's possible for you to propose pull request? it may help finding involved class"
MRM-1861,githubbot,ASF GitHub Bot,2015-06-11T23:35:43.072Z,2015-06-11T23:35:43.072Z,"GitHub user emsouza opened a pull request:

    https://github.com/apache/archiva/pull/16

    [MRM-1861] Proxy behaviour issue migrating from 1.3.x to 2.x

    

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/emsouza/archiva master

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/archiva/pull/16.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #16
    
----
commit 01f9aad6176656bf6a0bf010c65cd265c87cf62b
Author: Eduardo Souza <eduardomatosouza@gmail.com>
Date:   2015-06-11T23:18:45Z

    [MRM-1861] Proxy behaviour issue migrating from 1.3.x to 2.x

----
"
MRM-1861,githubbot,ASF GitHub Bot,2015-06-15T13:38:26.353Z,2015-06-15T13:38:26.353Z,"Github user ebarboni commented on the pull request:

    https://github.com/apache/archiva/pull/16#issuecomment-112072539
  
    The PR was good, error was because of failling test on other modules.
    I don't know how to merge :(
"
MRM-1861,githubbot,ASF GitHub Bot,2015-06-16T11:59:26.935Z,2015-06-16T11:59:26.935Z,"Github user olamy commented on the pull request:

    https://github.com/apache/archiva/pull/16#issuecomment-112400314
  
    @ebarboni 
    vi .git/config
    add those lines
    [remote ""github""]
          url = https://github.com/apache/archiva.git
            fetch = +refs/heads/*:refs/remotes/github/*
            fetch = +refs/pull/*/head:refs/pull/upstream/*
    
    
    git fetch github
    git checkout pr/16
    test it
    then git checkout master
    git merge pr/16
    then git push origin master
    if origin is the apache git

"
MRM-1861,githubbot,ASF GitHub Bot,2015-06-16T12:29:45.093Z,2015-06-16T12:29:45.093Z,"Github user ebarboni commented on the pull request:

    https://github.com/apache/archiva/pull/16#issuecomment-112408197
  
    @olamy, thanks a lot, (I was looking for some button or UI on the github web site for merging)
"
MRM-1861,githubbot,ASF GitHub Bot,2015-06-17T00:41:14.459Z,2015-06-17T00:41:14.459Z,"Github user olamy commented on the pull request:

    https://github.com/apache/archiva/pull/16#issuecomment-112613715
  
    @ebarboni Nope as github is not the primary git repo.
"
MRM-1861,githubbot,ASF GitHub Bot,2015-06-17T08:07:59.259Z,2015-06-17T08:07:59.259Z,"Github user asfgit closed the pull request at:

    https://github.com/apache/archiva/pull/16
"
MRM-1861,hudson,Hudson,2015-06-17T10:34:13.295Z,2015-06-17T10:34:13.295Z,"UNSTABLE: Integrated in archiva-master-build #913 (See [https://builds.apache.org/job/archiva-master-build/913/])
[MRM-1861] Proxy behaviour issue migrating from 1.3.x to 2.x (eduardomatosouza: rev 01f9aad6176656bf6a0bf010c65cd265c87cf62b)
* archiva-modules/archiva-web/archiva-rest/archiva-rest-services/src/main/java/org/apache/archiva/rest/services/DefaultRemoteRepositoriesService.java
* archiva-modules/archiva-scheduler/archiva-scheduler-indexing/src/main/java/org/apache/archiva/scheduler/indexing/DownloadRemoteIndexTask.java
"
MRM-1861,githubbot,ASF GitHub Bot,2015-07-16T20:22:57.948Z,2015-07-16T20:22:57.948Z,"Github user hugosenari commented on the pull request:

    https://github.com/apache/archiva/pull/16#issuecomment-122078670
  
    Only for the record.
    I tested this version (master), and don't solves my problem.
    I don't know if is another problem with proxy or is same that still unsolved.
    
    With old version my logs looks similar to bug description (timeout) now is different (auth error)
    If help, here is [my log](https://gist.github.com/hugosenari/3ffca9ddac4e3c5f256b).
"
MRM-1861,effrafax,Martin Stockhammer,2017-04-05T20:09:01.443Z,2017-04-05T20:09:01.443Z,I think this is fixed with the fix for MRM-1924
MRM-1836,olamy,Olivier Lamy (*$^%`),2014-05-02T00:54:53.634Z,2014-05-02T00:54:53.634Z,"fixed.
https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=0312f52
"
MRM-1876,lhanXetus,lhan,2015-04-30T18:30:40.531Z,2015-04-30T18:30:40.531Z,We are experiencing the same problem with a standalone installation talking to freeipa ldap. Believe [MRM-1873|https://issues.apache.org/jira/browse/MRM-1873] is related.
MRM-1844,jsharp,jsharp,2014-08-07T14:37:36.468Z,2014-08-07T14:37:36.468Z,Adding the group configuration to the web interface (MRM-1810) will allow support for groupOfNames without having to modify archiva.xml.
MRM-1844,olamy,Olivier Lamy (*$^%`),2014-10-08T20:10:53.81Z,2014-10-08T20:10:53.81Z,"https://github.com/apache/archiva/pull/7
Thanks!"
MRM-1869,carlos,Carlos Sanchez,2014-11-07T03:55:24.521Z,2014-11-07T03:55:24.521Z,"I fixed the compilation issues, but tests are failing with 

Error creating bean with name 'managedRepositoryAdmin#default': Invocation of init method failed; nested exception is java.lang.StackOverflowError

https://github.com/carlossg/archiva/compare/carlossg:master...indexer-6?expand=1
"
MRM-1869,olamy,Olivier Lamy (*$^%`),2014-11-10T18:29:35.99Z,2014-11-10T18:29:35.99Z,Does the new lucene version work with Jackrabbit?
MRM-1869,skygolanur,Eric Barboni,2014-11-12T07:23:33.918Z,2014-11-12T07:23:33.918Z,"Just curious: is maven indexer 6 about to be released in a near future?
"
MRM-1854,olamy,Olivier Lamy (*$^%`),2014-07-19T06:51:59.905Z,2014-07-19T06:51:59.905Z,don't know exactly how to set the value. Traverse all possible sub tree?? (ouchhhh)
MRM-1854,brettporter,Brett Porter,2014-07-20T00:38:13.075Z,2014-07-20T00:38:13.075Z,"Looks like the individual repositories just use {{System.currentTimeMillis()}}, so maybe do the same for the groups?"
MRM-1854,olamy,Olivier Lamy (*$^%`),2014-08-31T23:07:48.114Z,2014-08-31T23:07:48.114Z,"fixed https://git-wip-us.apache.org/repos/asf?p=archiva.git;a=commit;h=d4c85abf

"
MRM-1847,sebb@apache.org,Sebb,2014-06-04T16:50:33.238Z,2014-06-04T16:50:33.238Z,"Sorry, please ignore, there was a bug in the script that checked for DOAPs"
MRM-1892,hudson,Hudson,2015-05-19T23:52:16.103Z,2015-05-19T23:52:16.103Z,"SUCCESS: Integrated in archiva-master-build #905 (See [https://builds.apache.org/job/archiva-master-build/905/])
MRM-1892 fix (skygo: rev 96f390e523b5d6612946b1e41bb5d88183b93400)
* archiva-modules/archiva-web/archiva-webapp/src/main/webapp/js/templates/archiva/repositories.html
"
MRM-1892,skygo,Eric Barboni,2015-05-19T23:55:20.593Z,2015-05-19T23:55:20.593Z,wrong id for pagination
MRM-1849,jnhagelb,Jeffrey Hagelberg,2014-06-30T17:31:59.504Z,2014-06-30T17:31:59.504Z,"One other piece of relevant information.  Here's the content of maven-metadata.xml:

<metadata>
  <groupId>com.whatever</groupId>
  <artifactId>my-artifact</artifactId>
  <version>9.1.0.2-SNAPSHOT</version>
  <versioning>
    <snapshot>
      <buildNumber>0</buildNumber>
    </snapshot>
    <lastUpdated>20130607110658</lastUpdated>
  </versioning>
</metadata>

I suspect that null is being inserted because there is not a timestamp in the <snapshot> tag."
MRM-1849,jnhagelb,Jeffrey Hagelberg,2014-06-30T18:33:14.972Z,2014-06-30T18:33:14.972Z,We also noticed that this affects zip files.  We were able to work around this by creating a script to find the problematic artifacts and redeploy them with a proper timestampped SNAPSHOT version.
MRM-1849,brettporter,Brett Porter,2014-07-02T20:35:06.666Z,2014-07-02T20:35:06.666Z,"As indicated on the users list, this seems to be a duplicate of MRM-1846"
MRM-1827,skygo,Eric Barboni,2015-04-10T14:34:24.296Z,2015-04-10T14:34:24.296Z,"Hi,
 I do want to override depencies on bcel 5.2 to bcel 6.0 SNAPSHOT in the jpox plugin (for redback component,redback core, archiva) because I cannot compile without overriding them anyway (jdk7 is my minimal availabel jdk)




"
MRM-1827,effrafax,Martin Stockhammer,2016-09-15T14:50:57.492Z,2016-09-15T14:50:57.492Z,Is this still relevant? I cannot reproduce it.
MRM-1827,cipi,Ciprian Ciubotariu,2016-09-15T16:10:50.804Z,2016-09-15T16:10:50.804Z,"I cannot reproduce it either on openjdk version ""1.8.0_101"""
MRM-1827,olamy,Olivier Lamy (*$^%`),2016-09-16T00:11:29.075Z,2016-09-16T00:11:29.075Z,"Have look at the redback core pom the compiler plugin is configured with target 1.6.
1.7 doesn't work even with using last bcel version.
Probably need some changes in jpox which is a dead project.
The bigger idea would be to move to jpa. (would be interesting I guess :-) ).
But we need to take care of backward comp or having a way to migrate data."
MRM-1827,effrafax,Martin Stockhammer,2016-09-16T05:45:41.791Z,2016-09-16T05:45:41.791Z,"OK, understood. Seems to be a bigger project ...


-- 
Diese Nachricht wurde von meinem Android-Mobiltelefon mit K-9 Mail gesendet.
"
MRM-1827,effrafax,Martin Stockhammer,2017-05-19T19:05:12.298Z,2017-05-19T19:05:12.298Z,JDO will be replaced by JPA
MRM-1843,olamy,Olivier Lamy (*$^%`),2014-05-21T00:24:21.255Z,2014-05-21T00:24:21.255Z,"implemented.

wget ""http://localhost:9091/archiva/restServices/archivaServices/searchService/artifact?g=org.apache.archiva&a=archiva-model&v=LATEST""

and follow redirect."
MRM-1880,olamy,Olivier Lamy (*$^%`),2015-04-08T02:14:43.566Z,2015-04-08T02:14:43.566Z,ping
MRM-1880,olamy,Olivier Lamy (*$^%`),2015-04-08T09:31:08.785Z,2015-04-08T09:31:08.785Z,test ping
MRM-1898,trampi,Fabian Trampusch,2015-08-19T13:34:59.211Z,2015-08-19T13:34:59.211Z,"Have a look at http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html -> AJP is the preferred way of reverse proxying java applications. Maybe you have to enable the AJP connector in your tomcat configuration.

My config looks like this:
{code}ProxyPass /archiva ajp://127.0.0.1:8009/archiva{code}

Everything works fine."
MRM-1898,olamy,Olivier Lamy (*$^%`),2015-11-30T06:05:56.926Z,2015-11-30T06:05:56.926Z,Please use mailing to ask users questions.
MRM-1853,robjdavid,Robert David,2014-07-22T13:01:38.989Z,2014-07-22T13:01:38.989Z,"I've seen this same behaviour as well. When you first hit the site, you get the perpetual spinner, until you set up the admin account and it goes away. 

If you then access the site from a different browser, on say a different machine, it comes back again until you login.

In the JavaScript console I was seeing some JSON parse errors when the never-ending spinner was in effect, wihich I traced back to this code in archiva/main.js

{code:JavaScript}
 getUserFromLoginCookie=function(){
    var cookieContent=$.cookie('archiva_login');
    $.log(""archiva_getUserFromLoginCookie cookie content:""+cookieContent);
    var user = $.parseJSON(cookieContent);
    if(!user){
      return null;
    }
{code}

The debugger showed that {{cookieContent}} was undefined at this point, presumably because there was no cookie yet. So I added the following:

{code:JavaScript}
  getUserFromLoginCookie=function(){
    var cookieContent=$.cookie('archiva_login');
    $.log(""archiva_getUserFromLoginCookie cookie content:""+cookieContent);
    if (!cookieContent) {
      return null;
    }
    var user = $.parseJSON(cookieContent);
    if(!user){
      return null;
    }
{code}

So it doesn't try to parse the cookie content it there isn't any. That seemed to then fix the spinner problem for me at least.
"
MRM-1853,jnhagelb,Jeffrey Hagelberg,2014-07-23T16:03:07.08Z,2014-07-23T16:03:07.08Z,"One minor point - I'm not sure if the check you added will work for all browsers.  See http://stackoverflow.com/questions/5113374/javascript-check-if-variable-exists-is-defined-initialized-which-method-is-b

They recommend:

if (typeof variable === 'undefined') {
    // variable is undefined
}"
MRM-1853,olamy,Olivier Lamy (*$^%`),2014-07-23T21:09:55.825Z,2014-07-23T21:09:55.825Z,"applied.
Thanks"
MRM-1887,skygo,Eric Barboni,2015-05-09T00:32:49.544Z,2015-05-09T00:32:49.544Z,"Hi, I fix the bug database url but the doap contains version  in separate release version.

Maybe I miss the point there.

changes are here:
https://git1-us-west.apache.org/repos/asf?p=archiva.git;a=commitdiff;h=HEAD"
MRM-1887,sebb@apache.org,Sebb,2015-05-09T12:50:20.276Z,2015-05-09T12:50:20.276Z,"Sorry, the release sections are OK. It is the <repository> section that is wrong.
Though the solution there is probably to delete the SVN repo entry rather than keep both.

However, the <file-release> URLs point to the dist SVN.
Releases must use the ASF mirror system, not the ASF repos.
This is an Infra policy [1]


[1] http://www.apache.org/dev/release.html#host-GA"
MRM-1887,skygo,Eric Barboni,2015-05-09T23:45:00.163Z,2015-05-09T23:45:00.163Z,"I changes url and comment the svn section.
Hope it's well now. Thanks for the review."
MRM-1887,hudson,Hudson,2015-05-10T00:05:32.964Z,2015-05-10T00:05:32.964Z,"UNSTABLE: Integrated in archiva-master-build #902 (See [https://builds.apache.org/job/archiva-master-build/902/])
MRM-1887 fix bug-database link (skygo: rev 0496404adf05bfdb72100bd2707cc010740e1870)
* doap_Archiva.rdf
MRM-1887 fix (skygo: rev cbeb9a62ea163bd487d903d7a76550e080ecb070)
* doap_Archiva.rdf
"
MRM-1887,sebb@apache.org,Sebb,2015-05-10T23:36:12.121Z,2015-05-10T23:36:12.121Z,"Yes, the syntax is OK now.

However, I'm not sure it's a good idea to leave the commented entry in, at least not in its present state.
If the comments are removed, the syntax will break again.
It would be better to drop the entry entirely, or ensure that the syntax is corrected - i.e. add the missing repository section.
"
MRM-1887,skygo,Eric Barboni,2015-05-11T13:10:49.526Z,2015-05-11T13:10:49.526Z,"ok I remove comment for svn and add a <repository> section. 
I thought that only one repository can be set.

Hope it looks better
"
MRM-1887,sebb@apache.org,Sebb,2015-05-11T16:46:16.235Z,2015-05-11T16:46:16.235Z,"You can have as many repository sections as you like.

Normally, it does not make sense for a project to list both SVN and Git repos, as a project uses one or the other to maintain its files.
But it looks as though Archiva is still using SVN for some source files (and not just the site).
"
MRM-1887,skygo,Eric Barboni,2015-07-23T22:56:48.049Z,2015-07-23T22:56:48.049Z,doap is correct for now
MRM-1851,skygolanur,Eric Barboni,2014-09-30T19:41:38.559Z,2014-09-30T19:41:38.559Z,"Hi,
 text ""You must select a groupId "" is wrong changed to ""You must select a repository"".
 Repository is mandatory.
 Manually tested.

[1]
https://git-wip-us.apache.org/repos/asf?p=archiva.git;a=commit;h=cf16df693a1f0a6a96e2d851ac27436d93c2c8d4"
MRM-1897,skygo,Eric Barboni,2015-08-25T09:05:46.846Z,2015-08-25T09:05:46.846Z,"Hi Pablo,
 Thanks for the report.
 Is it possible to have an anonymized version of your script in order to make some tests."
MRM-1896,skygo,Eric Barboni,2015-07-24T01:03:32.676Z,2015-07-24T01:03:32.676Z,"Thanks for pointing this issue. 
Site should be fixed now.
"
MRM-1815,olamy,Olivier Lamy (*$^%`),2014-03-05T18:46:52.132Z,2014-03-05T18:46:52.132Z,"logs:
{code}
2014-03-05 15:25:11,130 [ajp-bio-8009-exec-10] WARN  org.apache.archiva.web.security.ArchivaUserManagerAuthenticator [] - Password expired.
2014-03-05 15:25:11,134 [ajp-bio-8009-exec-10] WARN  org.apache.archiva.web.security.ArchivaUserManagerAuthenticator [] - Password expired.
2014-03-05 15:25:17,413 [ajp-bio-8009-exec-3] WARN  org.apache.cxf.phase.PhaseInterceptorChain [] - Interceptor for {http://services.rest.redback.archiva.apache.org/}DefaultUserService has thrown exception, unwinding now
java.lang.IllegalArgumentException: URLDecoder: Illegal hex characters in escape (%) pattern - For input string: ""oo""
        at java.net.URLDecoder.decode(URLDecoder.java:192) ~[?:1.7.0_25]
        at org.apache.cxf.common.util.UrlUtils.urlDecode(UrlUtils.java:55) ~[cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.common.util.UrlUtils.urlDecode(UrlUtils.java:63) ~[cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.jaxrs.utils.HttpUtils.urlDecode(HttpUtils.java:83) ~[cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.jaxrs.utils.JAXRSUtils.getStructuredParams(JAXRSUtils.java:1002) ~[cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.jaxrs.utils.JAXRSUtils.getStructuredParams(JAXRSUtils.java:979) ~[cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.jaxrs.impl.UriInfoImpl.getQueryParameters(UriInfoImpl.java:115) ~[cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.jaxrs.impl.UriInfoImpl.getQueryParameters(UriInfoImpl.java:109) ~[cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.jaxrs.impl.RequestPreprocessor.preprocess(RequestPreprocessor.java:80) ~[cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:115) ~[cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:91) ~[cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263) [cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121) [cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:237) [cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:239) [cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:213) [cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:131) [cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:266) [cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:191) [cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:620) [servlet-api-3.0.jar:?]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:242) [cxf-bundle-jaxrs-2.6.10.jar:2.6.10]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303) [tomcat-catalina-7.0.52.jar:7.0.52]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208) [tomcat-catalina-7.0.52.jar:7.0.52]
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88) [spring-web-4.0.1.RELEASE.jar:4.0.1.RELEASE]
{code}"
MRM-1832,olamy,Olivier Lamy (*$^%`),2014-04-22T07:54:02.543Z,2014-04-22T07:54:02.543Z,not sure as it works on Apache Jenkins which is linux
MRM-1832,olamy,Olivier Lamy (*$^%`),2014-04-22T19:10:34.249Z,2014-04-22T19:10:34.249Z,fixed.
MRM-1866,jsharp,jsharp,2014-10-29T09:30:14.494Z,2014-10-29T09:30:14.494Z,"Hi Miroslav,

Did you drag/drop the LDAP User Manager and the LDAP RBAC Manager under the General tab? 

If that doesn't work: What is your LDAP schema like?

Note that getting ldap auth/auth to work is kind of bumpy - a restart and trying several configurations will probably be necessary.

"
MRM-1866,mireczatko,Miroslav Zako,2014-10-29T11:53:47.981Z,2014-10-29T11:53:47.981Z,"hi Jonathan, this is what I can see in configuration as well as LDAP users/groups structure... Users are mapped to group via memberUID attribute of each group. User ""test"" is member of all groups"
MRM-1866,jsharp,jsharp,2014-10-29T17:06:23.638Z,2014-10-29T17:06:23.638Z,"In 2.1.1, you must specify the group object and member attribute manually in archiva.xml (if they are not the default), within tags redbackRuntimeConfiguration -> configurationProperties -> ldap -> config -> groups -> class (for the objectClass) and redbackRuntimeConfiguration -> configurationProperties -> ldap -> config -> groups -> member (for the attribute)."
MRM-1866,jsharp,jsharp,2014-10-29T17:12:01.334Z,2014-10-29T17:12:01.334Z,Also check your value for this attribute in the properties tab: ldap.config.mapper.attribute.user.object.class
MRM-1866,mireczatko,Miroslav Zako,2014-10-29T17:57:33.854Z,2014-10-29T17:57:33.854Z,"Thank you very much, Jonathan!
Editing archiva.xml as you guided me solved the problem.
attribute ldap.config.mapper.attribute.user.object.class I set to correct value 'cause I saw it before...
I didn't know anything about others ""not visible"" attributes...
Thank you very much once again!"
MRM-1866,mireczatko,Miroslav Zako,2014-10-29T18:00:26.618Z,2014-10-29T18:00:26.618Z,The need for another settings outside the GUI. Directly in archiva.xml
MRM-1840,tom_s4t,Thomas Hoffmann,2017-05-09T15:58:52.334Z,2017-05-09T15:58:52.334Z,"Same problem with other packages:
Caused by: org.apache.jackrabbit.spi.commons.conversion.MalformedPathException: 'org.seleniumhq.selenium;selenium-support-[2.53.0,4.0.0).jar' is not a valid path
...
Here is a full stack trace for archiva version 2.1.1

org.apache.archiva.metadata.repository.MetadataRepositoryException: Failed to resolve path javax.el;javax.el-api-[3.0-b08,).jar relative to node /repositories/speed4trade.repo/content/javax/servlet/jsp/javax.servlet.jsp-api/2.3.1/dependencies
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.updateProjectVersion(JcrMetadataRepository.java:365) ~[metadata-store-jcr-2.2.1.jar:?]
	at org.apache.archiva.consumers.metadata.ArchivaMetadataCreationConsumer.processFile(ArchivaMetadataCreationConsumer.java:192) [archiva-metadata-consumer-2.2.1.jar:?]
	at org.apache.archiva.consumers.metadata.ArchivaMetadataCreationConsumer.processFile(ArchivaMetadataCreationConsumer.java:222) [archiva-metadata-consumer-2.2.1.jar:?]
	at org.apache.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:60) [archiva-repository-scanner-2.2.1.jar:?]
	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:118) [commons-collections-3.2.1.jar:3.2.1]
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:389) [commons-collections-3.2.1.jar:3.2.1]
	at org.apache.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:163) [archiva-repository-scanner-2.2.1.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:174) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:392) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:345) [plexus-utils-3.0.15.jar:?]
	at org.apache.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:141) [archiva-repository-scanner-2.2.1.jar:?]
	at org.apache.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:69) [archiva-repository-scanner-2.2.1.jar:?]
	at org.apache.archiva.scheduler.repository.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:150) [archiva-scheduler-repository-2.2.1.jar:?]
	at org.apache.archiva.scheduler.repository.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:54) [archiva-scheduler-repository-2.2.1.jar:?]
	at org.apache.archiva.redback.components.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:117) [spring-taskqueue-2.1.jar:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_112]
	at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_112]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [?:1.8.0_112]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [?:1.8.0_112]
	at java.lang.Thread.run(Unknown Source) [?:1.8.0_112]
Caused by: javax.jcr.RepositoryException: Failed to resolve path javax.el;javax.el-api-[3.0-b08,).jar relative to node /repositories/speed4trade.repo/content/javax/servlet/jsp/javax.servlet.jsp-api/2.3.1/dependencies
	at org.apache.jackrabbit.core.NodeImpl.resolveRelativePath(NodeImpl.java:240) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.resolveRelativeNodePath(NodeImpl.java:223) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.hasNode(NodeImpl.java:2281) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.commons.JcrUtils.getOrAddNode(JcrUtils.java:952) ~[jackrabbit-jcr-commons-2.9.1.jar:?]
	at org.apache.jackrabbit.commons.JcrUtils.getOrAddNode(JcrUtils.java:930) ~[jackrabbit-jcr-commons-2.9.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.updateProjectVersion(JcrMetadataRepository.java:319) ~[metadata-store-jcr-2.2.1.jar:?]
	... 24 more
Caused by: org.apache.jackrabbit.spi.commons.conversion.MalformedPathException: 'javax.el;javax.el-api-[3.0-b08,).jar' is not a valid path. '?' not a valid name character.
	at org.apache.jackrabbit.spi.commons.conversion.PathParser.parse(PathParser.java:327) ~[jackrabbit-spi-commons-2.9.1.jar:?]
	at org.apache.jackrabbit.spi.commons.conversion.PathParser.parse(PathParser.java:122) ~[jackrabbit-spi-commons-2.9.1.jar:?]
	at org.apache.jackrabbit.spi.commons.conversion.ParsingPathResolver.getQPath(ParsingPathResolver.java:90) ~[jackrabbit-spi-commons-2.9.1.jar:?]
	at org.apache.jackrabbit.spi.commons.conversion.CachingPathResolver.getQPath(CachingPathResolver.java:98) ~[jackrabbit-spi-commons-2.9.1.jar:?]
	at org.apache.jackrabbit.spi.commons.conversion.CachingPathResolver.getQPath(CachingPathResolver.java:77) ~[jackrabbit-spi-commons-2.9.1.jar:?]
	at org.apache.jackrabbit.spi.commons.conversion.DefaultNamePathResolver.getQPath(DefaultNamePathResolver.java:82) ~[jackrabbit-spi-commons-2.9.1.jar:?]
	at org.apache.jackrabbit.core.SessionImpl.getQPath(SessionImpl.java:648) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.session.SessionContext.getQPath(SessionContext.java:338) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.resolveRelativePath(NodeImpl.java:238) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.resolveRelativeNodePath(NodeImpl.java:223) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.hasNode(NodeImpl.java:2281) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.commons.JcrUtils.getOrAddNode(JcrUtils.java:952) ~[jackrabbit-jcr-commons-2.9.1.jar:?]
	at org.apache.jackrabbit.commons.JcrUtils.getOrAddNode(JcrUtils.java:930) ~[jackrabbit-jcr-commons-2.9.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.updateProjectVersion(JcrMetadataRepository.java:319) ~[metadata-store-jcr-2.2.1.jar:?]
	... 24 more"
MRM-1895,skygo,Eric Barboni,2015-07-08T15:37:37.795Z,2015-07-08T15:37:37.795Z,"Hi, I think archiva is not yet able to connect to this repostiry.

We need to upgrade wagon 2.8 but it seems not enough. I'm not very aware on what artifact are there so diffuclt to test.

"
MRM-1895,hudson,Hudson,2015-07-22T12:22:25.579Z,2015-07-22T12:22:25.579Z,"SUCCESS: Integrated in archiva-master-build #915 (See [https://builds.apache.org/job/archiva-master-build/915/])
[MRM-1895] upgrade to wagon 2.8 (olamy: rev 73d92ab3768036ea6cb872445e08f92b6ad25889)
* pom.xml
* archiva-modules/archiva-base/archiva-repository-admin/archiva-repository-admin-default/src/main/java/org/apache/archiva/admin/repository/admin/DefaultArchivaAdministration.java
"
MRM-1895,mmaker1234,Monique Maker,2015-07-24T14:43:29.717Z,2015-07-24T14:43:29.717Z,"Unfortunately Oracle do not allow to list the artifacts in their repository. You can try to add the following dependency:
<dependency>
    <groupId>com.oracle.weblogic</groupId>
    <artifactId>com.bea.core.i18n_3.0.0.0</artifactId>
    <version>12.1.3-0-0</version>
    <type>pom</type>
</dependency>

If you need more artifacts, just drop me a line."
MRM-1895,skygo,Eric Barboni,2015-07-30T16:18:06.085Z,2015-07-30T16:18:06.085Z,"An ugly first attemp fix with lots of hardcoded stuff. It's possible to connect to oracle maven repo.  

I'm not sure what may be nice to do for making this more scalable, AFAIK:
 - We can only operate on HttpWagon how to be sure to have wagon-http for connecting a specific repo.
 - Remote repo UI is not ready to  configure Authscope
 - Remote repo UI is not ready to configure HttpMethod

I have no deep knowledge on http stuff, correct me if things are already in archiva.

"
MRM-1863,skygolanur,Eric Barboni,2014-10-15T14:51:54.839Z,2014-10-15T14:51:54.839Z,"I tried the following
  if a applicationURL is set => use it
fallback to archivaRuntimeInfo.baseUrl

Would be nice if you can test :p
  "
MRM-1863,brownsea,Alex Hinrichs,2014-10-15T16:38:02.834Z,2014-10-15T16:38:02.834Z,"Seems to be basically done but ;-)
- if applUrl is ""http://xy"" (maybe: if protocol is the same as currently used) the repository URL is ""xy/repository/...""
- if appUrl is ""https://xy"" (maybe if protocol is different from currently used) the repository URL is ""https://xy/repository/..."" (correct because fixed by you)
- if appUrl is ""joe://xy"" the repository URL is ""joe://xy/repository/..."" (correct because fixed by you)
- if appUrl is ""file://xy"" the repository URL is ""file:///repository/..."" (hopefully nobody will ever use it but a strange behaviour)
- if appUrl is ""file://xy/z"" the repository URL is ""file:///z/repository/..."" (hopefully nobody will ever use it but a strange behaviour)

In ALL cases the shown URL is correct but in some cases (see examples) not the one used as link!
Don't know if this is because of your fix or another bug.

Tested on Windows 7, FF 33.0, Java 1.7.0_67"
MRM-1863,skygolanur,Eric Barboni,2014-10-15T17:30:09.084Z,2014-10-15T17:30:09.084Z,"I trie to check for emptyness of the appURL also may fix the first point.

the file:// issue will be there with firefox I think :( work on IE.
http://stackoverflow.com/questions/5317834/workaround-for-href-file-in-firefox"
MRM-1863,brownsea,Alex Hinrichs,2014-10-15T17:41:07.654Z,2014-10-15T17:41:07.654Z,"Sorry,
first example was just my misinterpretation of FF's tooltip showing the shortened URL without the protocol. If protocol of appUrl is the same as currently used it's ok. 
If you're using file:///xy instead of file://xy the latter two examples are correct too.
Done! Thanks"
MRM-1863,skygolanur,Eric Barboni,2014-10-15T17:45:01.81Z,2014-10-15T17:45:01.81Z,you're welcome
MRM-1841,saschavogt,Sascha Vogt,2014-05-08T07:16:08.087Z,2014-05-08T07:16:08.087Z,"When looking into the cookie content I can see that rememberme is always set to false (even when the checkbox is checked).

Also ""logged"" is always set to false, but not sure what that field is for."
MRM-1841,olamy,Olivier Lamy (*$^%`),2014-05-15T00:26:37.317Z,2014-05-15T00:26:37.317Z,fixed: https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=0a1a105
MRM-1841,saschavogt,Sascha Vogt,2014-05-16T06:37:22.509Z,2014-05-16T06:37:22.509Z,"Upgraded to the mentioned commit and I can now see the username / password / rememberme in the cookie, nevertheless I'm still logged out and have to re-login.

Additionally: Is it a good idea to store the password in the cookie? Wouldn't it be better to have a token stored there? Using LDAP the cookie exposes the domain password of the user, which is pretty bad. A token would only give an attacker access to one system instead of the whole domain."
MRM-1841,olamy,Olivier Lamy (*$^%`),2014-05-19T00:03:12.376Z,2014-05-19T00:03:12.376Z,"""Is it a good idea to store the password in the cookie?"" I believe it's a cookie on YOUR machine. So why it's a problem?
I cannot reproduce the issue. Perso I'm not logged off.
What is your browser?"
MRM-1841,saschavogt,Sascha Vogt,2014-05-19T03:36:33.284Z,2014-05-19T03:36:33.284Z,"For me, I'm logged off on Chrome 34 and FF 29.0.1 (Win7 64-bit)

Could it be related to using LDAP User Manager? (Note: We have DB first, LDAP second)
We have two system accounts in the DB User Manager, I'm trying one of those now.

Regarding password in the cookie: Well, I already explained one issue in the first comment: The password is shared accross multiple servers (it's the Windows domain account). This means if my cookies got exposed the attacker would have much more information, than only access to Archiva. And second: People reuse passwords. Yes, they shouldn't, but they do. In these cases an Archiva specific token decreases the threat. If the token would also be bound to a specific IP address then the attacker would not only need the cookie but also spoof my IP address, this would reduce the risk even more. "
MRM-1841,saschavogt,Sascha Vogt,2014-05-19T04:00:09.458Z,2014-05-19T04:00:09.458Z,"Nope, also the technical accounts which are stored in the DB get logged out"
MRM-1841,olamy,Olivier Lamy (*$^%`),2014-05-21T01:07:34.946Z,2014-05-21T01:07:34.946Z,"password removed.
And should be fixed now"
MRM-1841,saschavogt,Sascha Vogt,2014-05-22T02:41:43.712Z,2014-05-22T02:41:43.712Z,"Unfortunately it still doesn't work for me. Is this the commit which should have everything in it? 
https://github.com/apache/archiva/commit/ef572f80d72aaf51598ee676e6f862681f58e350

I'm trying to understand how this is supposed to work. With the removal of the password from the cookie, how should the frontend be able to log in again when the jsession times out? 

As soon as I've understood the idea I might be able to fix this myself ;) Or at least debug further. 

Also regarding the setup, http://archiva.apache.org/redback/configuration.html says that security.rememberme.timeout is in minutes, though the online help says days. The cookie expiration indicates that it is indeed days, can you confirm that? 
And which other properties are involved in this? I see that the archiva login cookie has a domain of "".repo.<our-tld>.de"" - note the dot in the beginning. The JSESSIONID cookie does not have this dot. security.rememberme.domain is set to repo.<our-tld>.de without the dot, I double-checked that in the archiva.xml
rememberme.path is set to ""/"""
MRM-1841,olamy,Olivier Lamy (*$^%`),2014-05-22T05:49:08.987Z,2014-05-22T05:49:08.987Z,"doh I think there is a misunderstanding here :-)
Rememberme means the UI will remember the uid (and previously the password) to automatically fill in values in the login form and not an automatic login.
Perso that's something (automatic login) I find definitely not secured!! 
And BTW if you want this automatic login the password will need to be stored in the cookie (that's something you complain about :-) ).

"
MRM-1841,saschavogt,Sascha Vogt,2014-05-22T06:25:20.09Z,2014-05-22T06:25:20.09Z,"Ahh, now I get it.

I thought of something like that: 
1. If remember-me is selected the server generates an auth-token (optionally bound to the IP address of the client)
2. This token is stored in a cookie with the TTL of how long rememberme should work
3. If the sessionid is no longer valid or you closed the browser, the frontend authenticates with the token from the cookie and gets a new session
3. a) For LDAP the server would also need to check if the user is still a valid one, so it should search LDAP and check if the account is locked or expired
4. In the UI this is as you would have never logged out. 

This is IIRC how it was in Archiva 1.3 and also how most of the other tools / sites do it.

For keeping the user data pre filled: Every supported browser has already a password manager for that, so not of much use implementing that again. And the password manager is usually better protected than a cookie anyway. "
MRM-1841,olamy,Olivier Lamy (*$^%`),2014-05-22T20:25:16.523Z,2014-05-22T20:25:16.523Z,"fixed.
https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=fd36bce

"
MRM-1859,brettw,Brett Wooldridge,2015-03-22T23:28:52.804Z,2015-03-22T23:28:52.804Z,"Any update on this issue?
"
MRM-1859,rovemonteux,Rove Monteux,2015-11-13T09:49:05.678Z,2015-11-13T09:49:05.678Z,"I'm currently getting the same in our 2.1.1 service,

2015-11-13 09:46:11,702 [qtp1886035994-12000] ERROR org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver [] - Error occurred during error handling, give up!
org.apache.cxf.interceptor.Fault: Not a valid artifact path in a Maven 2 repository, filename 'resolver-status.properties' doesn't start with artifact ID 'Dixons_Carphone_SAP_PI_Framework_JBoss_6_JMS_Client'
	at org.apache.cxf.service.invoker.AbstractInvoker.createFault(AbstractInvoker.java:162) ~[cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:128) ~[cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:165) ~[cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:89) ~[cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:57) ~[cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:93) ~[cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263) [cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121) [cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:240) [cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:239) [cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:213) [cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:131) [cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:266) [cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:191) [cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:735) [javax.servlet-3.0.0.v201112011016.jar:?]
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:242) [cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:684) [jetty-servlet-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1496) [jetty-servlet-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88) [spring-web-4.0.6.RELEASE.jar:4.0.6.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.0.6.RELEASE.jar:4.0.6.RELEASE]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1476) [jetty-servlet-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:499) [jetty-servlet-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557) [jetty-security-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1086) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:428) [jetty-servlet-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1020) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.Server.handle(Server.java:370) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:494) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:971) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1033) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:644) [jetty-http-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235) [jetty-http-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82) [jetty-server-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:667) [jetty-io-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52) [jetty-io-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608) [jetty-util-8.1.14.v20131031.jar:8.1.14.v20131031]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543) [jetty-util-8.1.14.v20131031.jar:8.1.14.v20131031]
	at java.lang.Thread.run(Thread.java:745) [?:1.7.0_85]
Caused by: java.lang.IllegalArgumentException: Not a valid artifact path in a Maven 2 repository, filename 'resolver-status.properties' doesn't start with artifact ID 'Dixons_Carphone_SAP_PI_Framework_JBoss_6_JMS_Client'
	at org.apache.archiva.metadata.repository.storage.maven2.Maven2RepositoryPathTranslator.getArtifactFromId(Maven2RepositoryPathTranslator.java:199) ~[maven2-repository-2.1.1.jar:?]
	at org.apache.archiva.metadata.repository.storage.maven2.Maven2RepositoryStorage.getArtifactFromFile(Maven2RepositoryStorage.java:641) ~[maven2-repository-2.1.1.jar:?]
	at org.apache.archiva.metadata.repository.storage.maven2.Maven2RepositoryStorage.readArtifactsMetadata(Maven2RepositoryStorage.java:617) ~[maven2-repository-2.1.1.jar:?]
	at org.apache.archiva.metadata.repository.DefaultMetadataResolver.resolveArtifacts(DefaultMetadataResolver.java:425) ~[metadata-repository-api-2.1.1.jar:2.1.1]
	at org.apache.archiva.rest.services.DefaultBrowseService.getArtifactDownloadInfos(DefaultBrowseService.java:731) ~[archiva-rest-services-2.1.1.jar:?]
	at sun.reflect.GeneratedMethodAccessor3502.invoke(Unknown Source) ~[?:?]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.7.0_85]
	at java.lang.reflect.Method.invoke(Method.java:606) ~[?:1.7.0_85]
	at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:180) ~[cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96) ~[cxf-bundle-jaxrs-2.6.15.jar:2.6.15]
	... 43 more
"
MRM-1859,ankurpshah@gmail.com,Ankur Shah,2016-08-02T02:40:08.051Z,2016-08-02T02:40:08.051Z,[~olamy] Fix pushed to 2.2.2 branch or still issue is open ?
MRM-1859,olamy,Olivier Lamy (*$^%`),2016-08-03T01:22:11.065Z,2016-08-03T01:22:11.065Z,[~ankurpshah@gmail.com] issue still open.
MRM-1859,taheer,BEN REJEB Taher,2017-04-12T15:32:19.749Z,2017-04-12T15:32:19.749Z,"Hello,
Is there a solution for this problem ???

Please Help."
MRM-1859,effrafax,Martin Stockhammer,2017-04-14T16:53:58.455Z,2017-04-14T16:53:58.455Z,Is fixed and will be released with 2.2.2 which is coming soon.
MRM-1859,hudson,Hudson,2017-04-14T17:32:16.159Z,2017-04-14T17:32:16.159Z,"SUCCESS: Integrated in Jenkins build archiva-master-build #988 (See [https://builds.apache.org/job/archiva-master-build/988/])
[MRM-1859] Improve handling of invalid artifacts (martin_s: [https://github.com/apache/archiva/commit/94e8342ec044224226a53efc090ccb4d31d4b94b])
* (add) archiva-modules/plugins/maven2-repository/src/test/resources/test01.properties
* (edit) archiva-modules/plugins/maven2-repository/pom.xml
* (edit) archiva-modules/plugins/maven2-repository/src/main/java/org/apache/archiva/metadata/repository/storage/maven2/Maven2RepositoryStorage.java
* (edit) archiva-modules/plugins/maven2-repository/src/test/java/org/apache/archiva/metadata/repository/storage/maven2/Maven2RepositoryMetadataResolverTest.java
* (edit) archiva-modules/plugins/maven2-repository/src/test/java/org/apache/archiva/dependency/tree/maven2/DependencyTreeBuilderTestMaven3.java
* (add) archiva-modules/plugins/maven2-repository/src/test/resources/resolver-status.properties
"
MRM-1848,brettporter,Brett Porter,2014-07-02T20:38:29.429Z,2014-07-02T20:38:29.429Z,"Confirmed there is an issue here: for example, https://archiva-repository.apache.org/archiva/index.html?request_lang=en#artifact-details-download-content/org.apache.archiva/archiva-jetty/1.3.9"
MRM-1848,skygolanur,Eric Barboni,2014-10-15T17:40:05.657Z,2014-10-15T17:40:05.657Z,"ArtifactBuilder in Archiva Web :: REST support :: Services use

FilenameUtils.getExtension( file.getName() )
 from toto.tar.gz you will get .gz for extension.

 I don't know what would be a nice fix as it impact getArtifactUrl in AbstractRestService
"
MRM-1848,skygolanur,Eric Barboni,2014-11-18T17:31:13.787Z,2014-11-18T17:31:13.787Z,Handle only tar.gz file for now may add a few extension on request but if it gets more complicated need better way to handle this issue
MRM-1848,jnhagelb,Jeffrey Hagelberg,2014-11-19T09:55:02.517Z,2014-11-19T09:55:02.517Z,"Could you also please add .tar.bz2 and .tar.xz?  We have a few of those as well.  I'm not sure how hard it would be to handle all .tar.* files, but that would be ideal."
MRM-1848,jnhagelb,Jeffrey Hagelberg,2014-11-19T10:23:31.449Z,2014-11-19T10:23:31.449Z,Sample of what you might be able to do to generalize this to cover more cases
MRM-1848,jnhagelb,Jeffrey Hagelberg,2014-11-19T10:29:22.37Z,2014-11-19T10:29:22.37Z,Fixed issue - did not realize that we don't want the leading dot to be part of the extension
MRM-1848,carlos,Carlos Sanchez,2014-11-19T15:41:29.409Z,2014-11-19T15:41:29.409Z,"I actually have a fix for the general case, https://github.com/apache/archiva/pull/10"
MRM-1848,skygolanur,Eric Barboni,2014-11-19T16:44:40.109Z,2014-11-19T16:44:40.109Z,Nice fix. Having bad habit with windows OS so multiple dot file is rare. (I commented the pr because jenkins reject because of missing licence header in test file)
MRM-1848,jnhagelb,Jeffrey Hagelberg,2014-11-20T00:45:32.559Z,2014-11-20T00:45:32.559Z,Even better :-)
MRM-1848,carlos,Carlos Sanchez,2014-11-21T10:26:30.699Z,2014-11-21T10:26:30.699Z,"Fixed, it will take extensions with any number of dots as long as they don't start with a number

https://github.com/apache/archiva/commit/5d29c9ff1d5985db1a8b293ae7a4fb29452041f7"
MRM-1809,olamy,Olivier Lamy (*$^%`),2014-05-06T01:13:20.641Z,2014-05-06T01:13:20.641Z,fixed https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=8e81488
MRM-1839,olamy,Olivier Lamy (*$^%`),2014-08-07T23:18:53.447Z,2014-08-07T23:18:53.447Z,"Currently consumer are prototype and store values in fields.
We could rewrite the API to use only singleton and have an object ConsumerContext passing tru all needed values to all methods"
MRM-1874,thunderhook,Oliver E,2015-02-11T05:28:55.881Z,2015-02-11T05:28:55.881Z,"locked_messages comes from following scenario:
* Use Reset Password link
* Use 2 or 3 times a password which was already used before
* Change successfully password
* Login (the 4 ""account is locked"" messages are shown)"
MRM-1874,githubbot,ASF GitHub Bot,2016-09-09T07:11:41.771Z,2016-09-09T07:11:41.771Z,"GitHub user effrafax opened a pull request:

    https://github.com/apache/archiva/pull/22

    Fixing issue of multiple login requests after logout

    Resets the event listeners on the login button when the modal dialog is started.
    
    Fixes issue https://issues.apache.org/jira/browse/MRM-1874

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/effrafax/archiva fix_login

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/archiva/pull/22.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #22
    
----
commit 0b939e928ad1d5b97c4b97baa1d7e3929dd1d55f
Author: Martin Stockhammer <m.stockhammer@web.de>
Date:   2016-09-08T16:41:13Z

    Fixing issue of multiple login requests after logout
    
    Resets the event listeners on the login button when the modal dialog is started.

----
"
MRM-1874,githubbot,ASF GitHub Bot,2016-09-09T12:32:47.052Z,2016-09-09T12:32:47.052Z,"Github user asfgit closed the pull request at:

    https://github.com/apache/archiva/pull/22
"
MRM-1874,olamy,Olivier Lamy (*$^%`),2016-09-09T12:35:45.519Z,2016-09-09T12:35:45.519Z,pr merged
MRM-1870,carlos,Carlos Sanchez,2014-11-19T15:08:39.173Z,2014-11-19T15:08:39.173Z,I just found that it's a duplicate of MRM-1848
MRM-1817,skygolanur,Eric Barboni,2014-03-13T08:04:26.935Z,2014-03-13T08:04:26.935Z,"Upgrade archetype.
Revise pom, add more properties

http://svn.apache.org/r1575365"
MRM-1837,olamy,Olivier Lamy (*$^%`),2014-04-30T01:44:21.459Z,2014-04-30T01:44:21.459Z,"discussion here: http://markmail.org/message/b2ekkdqhdvy5vlk6
"
MRM-1837,saschavogt,Sascha Vogt,2014-04-30T02:02:41.319Z,2014-04-30T02:02:41.319Z,"We had a memory issue and the gathered heap dump showed 169k instances of XASessionImpl and 84k instances of each
RepositoryPurgeConsumer, NexusIndexerConsumer, MetadataUpdaterConsumer, DuplicateArtifactsConsumer, ArchivaMetadataCreationConsumer, ArtifactMissingChecksumsConsumer and AutoRemoveConsumer

The XASessionImpls were responsible for 84% heap usage, according to the Eclipse Memory Analyzer (we have set Archiva to 4 GB) 

From the comment of RepositoryContentConsumer: 
* olamy: TODO/FIXME we must review this api, in the current situation we use prototype beans rather than singletons
 * this is a bit memory consuming the better will be to ConsumerContext bean to transport repository context etc..."
MRM-1837,olamy,Olivier Lamy (*$^%`),2014-04-30T23:31:48.374Z,2014-04-30T23:31:48.374Z,"fixed.
Thanks for report and investigation!
"
MRM-1865,skygolanur,Eric Barboni,2014-10-10T14:37:06.564Z,2014-10-10T14:37:06.564Z,spotted by looking MRM-367
MRM-1865,skygolanur,Eric Barboni,2014-10-10T16:28:29.319Z,2014-10-10T16:28:29.319Z,"no build error on jenkins.
https://git-wip-us.apache.org/repos/asf?p=archiva.git;a=commit;h=c2f9100ddaaa842f4aadd11943d27b5d1142c0e0"
MRM-1882,skygo,Eric Barboni,2015-04-24T11:10:36.59Z,2015-04-24T11:10:36.59Z,"Hi,
 The configuration explanation is a bit tricky and documentation is a bit dense [1]. 
  If you want to force retention count I guess you need 0 in day older.

 Anyway need to make documentation easier to read

[1] http://archiva.apache.org/docs/2.2.0/adminguide/repositories.html"
MRM-1882,jacomac,Konrad Wulf,2015-05-06T15:18:32.826Z,2015-05-06T15:18:32.826Z,"even with ""days older"" set to zero or unset, it doesn't work. It seems the quartz cron job is not executed at all...."
MRM-1882,skygo,Eric Barboni,2015-05-06T15:55:02.162Z,2015-05-06T15:55:02.162Z,"Sorry I miss an important point, did you check that
 the consumer repository purge consumer in Repository Scanning > consumer is activated?"
MRM-1882,jacomac,Konrad Wulf,2015-05-07T08:59:11.902Z,2015-05-07T08:59:11.902Z,"thanks for the hint: yes, the repository-purge consumer wasn't activated. I've turned it on and then it really executed the task. So it seems that it is just that you should mention this activation of the repository-purge consumer in the docs...

But it seems I've broken the index scanning feature before by removing the contents of the snapshot manually via command line. Seems it was not a good idea to also remove the .indexer folder... Is there an easy way to repair this? Perhaps tell Lucene to do an initial scan? - that would be really helpful...

Here's the tomcat log snippet that I got when a) triggering the index scanning via the web ui and b) after switching on the repository purge consumer:

10:30:00.107 [pool-12-thread-1] ERROR org.apache.archiva.redback.components.taskqueue.execution.ThreadedTaskQueueExecutor - Error executing task
org.apache.archiva.redback.components.taskqueue.execution.TaskExecutionException: Error scan repository AbstractRepository{id='snapshots', name='Archiva Managed Snapshot Repository', l
ayout='default', indexDirectory='/var/lib/tomcat7/repositories/snapshots/.indexer', description='null'}ManagedRepository{location='/var/lib/tomcat7/repositories/snapshots', snapshots=t
rue, releases=false, blockRedeployments=false, cronExpression='0 0/30 * * * ?', stagingRepository=null, scanned=true, daysOlder=3, retentionCount=0, deleteReleasedSnapshots=false, stag
eRepoNeeded=false, resetStats=false, skipPackedIndexCreation=false}
        at org.apache.archiva.scheduler.indexing.ArchivaIndexingTaskExecutor.executeTask(ArchivaIndexingTaskExecutor.java:119) ~[archiva-scheduler-indexing-2.2.0.jar:?]
        at org.apache.archiva.redback.components.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:117) [spring-taskqueue-2.1.jar:?]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [?:1.7.0_79]
        at java.util.concurrent.FutureTask.run(FutureTask.java:262) [?:1.7.0_79]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [?:1.7.0_79]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [?:1.7.0_79]
        at java.lang.Thread.run(Thread.java:745) [?:1.7.0_79]
Caused by: java.io.IOException: Error scanning context snapshots: org.apache.lucene.store.NoSuchDirectoryException: directory '/var/lib/tomcat7/repositories/snapshots/.indexer' does no
t exist
        at org.apache.maven.index.DefaultNexusIndexer.scan(DefaultNexusIndexer.java:297) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.maven.index.DefaultNexusIndexer.scan(DefaultNexusIndexer.java:236) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.archiva.scheduler.indexing.ArchivaIndexingTaskExecutor.executeTask(ArchivaIndexingTaskExecutor.java:112) ~[archiva-scheduler-indexing-2.2.0.jar:?]
        ... 6 more
Caused by: org.apache.lucene.store.NoSuchDirectoryException: directory '/var/lib/tomcat7/repositories/snapshots/.indexer' does not exist
        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:218) ~[lucene-core-3.6.2.jar:3.6.2 1423725 - rmuir - 2012-12-18 19:45:40]
        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:241) ~[lucene-core-3.6.2.jar:3.6.2 1423725 - rmuir - 2012-12-18 19:45:40]
        at org.apache.maven.index.context.DefaultIndexingContext.deleteIndexFiles(DefaultIndexingContext.java:333) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.maven.index.context.DefaultIndexingContext.replace(DefaultIndexingContext.java:570) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.maven.index.DefaultNexusIndexer.scan(DefaultNexusIndexer.java:293) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.maven.index.DefaultNexusIndexer.scan(DefaultNexusIndexer.java:236) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.archiva.scheduler.indexing.ArchivaIndexingTaskExecutor.executeTask(ArchivaIndexingTaskExecutor.java:112) ~[archiva-scheduler-indexing-2.2.0.jar:?]
        ... 6 more
10:32:22.519 [Thread-33] ERROR org.apache.archiva.redback.components.taskqueue.execution.ThreadedTaskQueueExecutor - Error executing task
java.util.concurrent.ExecutionException: java.lang.NullPointerException
        at java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[?:1.7.0_79]
        at java.util.concurrent.FutureTask.get(FutureTask.java:188) ~[?:1.7.0_79]
        at org.apache.archiva.redback.components.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable.waitForTask(ThreadedTaskQueueExecutor.java:160) ~[spring-taskqueue-2.1.j
ar:?]
        at org.apache.archiva.redback.components.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable.run(ThreadedTaskQueueExecutor.java:128) [spring-taskqueue-2.1.jar:?]
Caused by: java.lang.NullPointerException
        at org.apache.maven.index.context.DefaultIndexingContext.acquireIndexSearcher(DefaultIndexingContext.java:498) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.maven.index.DefaultSearchEngine.searchFlat(DefaultSearchEngine.java:135) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.maven.index.DefaultSearchEngine.searchFlatPaged(DefaultSearchEngine.java:93) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.maven.index.DefaultSearchEngine.forceSearchFlatPaged(DefaultSearchEngine.java:83) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.maven.index.DefaultIndexer.searchFlat(DefaultIndexer.java:144) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.maven.index.DefaultNexusIndexer.searchFlat(DefaultNexusIndexer.java:373) ~[indexer-core-5.1.1.jar:5.1.1]
        at org.apache.archiva.scheduler.indexing.ArchivaIndexingTaskExecutor.executeTask(ArchivaIndexingTaskExecutor.java:193) ~[archiva-scheduler-indexing-2.2.0.jar:?]
        at org.apache.archiva.redback.components.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:117) ~[spring-taskqueue-2.1.jar:?]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) ~[?:1.7.0_79]
        at java.util.concurrent.FutureTask.run(FutureTask.java:262) ~[?:1.7.0_79]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) ~[?:1.7.0_79]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) ~[?:1.7.0_79]
        at java.lang.Thread.run(Thread.java:745) ~[?:1.7.0_79]


"
MRM-1882,jacomac,Konrad Wulf,2015-05-07T09:20:59.696Z,2015-05-07T09:20:59.696Z,"It looks as if I solved it myself, thanks. It was enough to recreate the directory .indexer
and log responded with:
[INFO] Unable to read properties file, will force index regeneration"
MRM-1891,skygo,Eric Barboni,2015-05-19T23:37:08.511Z,2015-05-19T23:37:08.511Z,"Hi, AFAIK active  svn pointers are multiple
 
https://svn.apache.org/viewvc/archiva/parent/ is used for archiva parent pom.
https://svn.apache.org/viewvc/archiva/site-content/ is used for archiva site content commited via maven scmpub but site source is in git

There is also redback component not on git yet at this position(needed part for archiva redback implementation)
https://svn.apache.org/viewvc/archiva/redback/redback-components/

maybe for doap file only parent is a valid one! "
MRM-1891,sebb@apache.org,Sebb,2015-05-20T00:19:16.607Z,2015-05-20T00:19:16.607Z,"In which case, perhaps it would be clearer to use the more specific SVN URIs for the code parts that are still maintained in SVN.
Not sure that the site content is really relevant to the DOAP so I would omit that.

Also maybe list the Git repo first, as that has the bulk of the source code.

At present it is quite hard for someone who does not know anything about the project to find the main source repo from the DOAP."
MRM-1804,olamy,Olivier Lamy (*$^%`),2014-02-16T07:13:07.551Z,2014-02-16T07:13:07.551Z,"fixed.
"
MRM-1855,jnhagelb,Jeffrey Hagelberg,2014-07-23T13:25:46.5Z,2014-07-23T13:25:46.5Z,Note - I've tested the fix I provided in the listed browsers as well as IE 11
MRM-1855,skygolanur,Eric Barboni,2014-07-23T13:33:02.442Z,2014-07-23T13:33:02.442Z,"Hi thanks for reporting.

Seems related to another identified issue"
MRM-1894,skygo,Eric Barboni,2015-07-01T12:15:34.163Z,2015-07-01T12:15:34.163Z,"Hi seems that you install archiva over an old version. Two versions of a same lib are present and there is a duplication.
 You need to clean apps\archiva\WEB-INF\lib and repopulate.

Tell me if it helps
Regards"
MRM-1894,aviadArchiva,aviad shiber,2015-07-02T15:27:04.153Z,2015-07-02T15:27:04.153Z,"Hi Eric, thanks for the quick response.
can you please give me a quick guide to how to repopulate? I am afraid to do something that will harm even more."
MRM-1894,skygo,Eric Barboni,2015-07-02T15:39:42.574Z,2015-07-02T15:39:42.574Z,"sorry for the bad term. I mean clean WEB-IN/lib and copy libs from your the last archiva release.

otherwise look at the lib repository and check for duplicate and remove the old version (a bit painful)"
MRM-1894,aviadArchiva,aviad shiber,2015-07-02T15:58:20.087Z,2015-07-02T15:58:20.087Z,"Hi again, I removed the WEB-IN/lib and copy it from the one I downloaded (apache-archiva-2.2.0). Stoped the service & then Start but no use.. still getting Service Unavailable(HTTP ERROR: 503)."
MRM-1894,aviadArchiva,aviad shiber,2015-07-02T16:06:59.145Z,2015-07-02T16:06:59.145Z,"adding new logs (ATTACHED FILE).

i see that this exception thrown alot-
{quote}
INFO   | jvm 1    | 2015/07/02 18:56:00 | 2015-07-02 18:56:00.792:WARN:oejuc.AbstractLifeCycle:FAILED org.eclipse.jetty.server.Server@1072dda9: java.net.BindException: Address already in use
INFO   | jvm 1    | 2015/07/02 18:56:00 | java.net.BindException: Address already in use
INFO   | jvm 1    | 2015/07/02 18:56:00 | 	at sun.nio.ch.Net.bind0(Native Method)
INFO   | jvm 1    | 2015/07/02 18:56:00 | 	at sun.nio.ch.Net.bind(Net.java:444)
INFO   | jvm 1    | 2015/07/02 18:56:00 | 	at sun.nio.ch.Net.bind(Net.java:436)
INFO   | jvm 1    | 2015/07/02 18:56:00 | 	at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:214)
INFO   | jvm 1    | 2015/07/02 18:56:00 | 	at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)
INFO   | jvm 1    | 2015/07/02 18:56:00 | 	at org.eclipse.jetty.server.nio.SelectChannelConnector.open(SelectChannelConnector.java:187)
INFO   | jvm 1    | 2015/07/02 18:56:00 | 	at org.eclipse.jetty.server.AbstractConnector.doStart(AbstractConnector.java:316)
INFO   | jvm 1    | 2015/07/02 18:56:00 | 	at org.eclipse.jetty.server.nio.SelectChannelConnector.doStart(SelectChannelConnector.java:265)
{quote}
I googled it and someone said it is because another app using the same port , so I changed port in the jetty.xml , and I still get it...

another common exception:: 
{quote}
INFO   | jvm 1    | 2015/07/02 20:12:18 | org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.apache.archiva.redback.common.ldap.connection.LdapConnectionFactory org.apache.archiva.redback.common.ldap.role.DefaultLdapRoleMapper.ldapConnectionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ldapConnectionFactory#archiva': Invocation of init method failed; nested exception is java.lang.RuntimeException: Error while initializing connection factory.
INFO   | jvm 1    | 2015/07/02 20:12:18 | 	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:561)
INFO   | jvm 1    | 2015/07/02 20:12:18 | 	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)
INFO   | jvm 1    | 2015/07/02 20:12:18 | 	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:331)
INFO   | jvm 1    | 2015/07/02 20:12:18 | 	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1202)
INFO   | jvm 1    | 2015/07/02 20:12:18 | 	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)
INFO   | jvm 1    | 2015/07/02 20:12:18 | 	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)


2015/07/02 20:12:18 | javax.naming.InvalidNameException: Invalid name: spuser
INFO   | jvm 1    | 2015/07/02 20:12:18 | 	at javax.naming.ldap.Rfc2253Parser.doParse(Rfc2253Parser.java:111)
INFO   | jvm 1    | 2015/07/02 20:12:18 | 	at javax.naming.ldap.Rfc2253Parser.parseDn(Rfc2253Parser.java:70)
INFO   | jvm 1    | 2015/07/02 20:12:18 | 	at javax.naming.ldap.LdapName.parse(LdapName.java:789)
INFO   | jvm 1    | 2015/07/02 20:12:18 | 	at javax.naming.ldap.LdapName.<init>(LdapName.java:125)
{quote}"
MRM-1894,skygo,Eric Barboni,2015-07-03T09:37:31.294Z,2015-07-03T09:37:31.294Z,"You need to be sure you have no archiva process or archiva java process still running.
I'm not an expert on ldap. Maybe ask to the archiva user mailing list to get a more help."
MRM-1894,aviadArchiva,aviad shiber,2015-07-03T09:40:40.718Z,2015-07-03T09:40:40.718Z,"yep it was because some processes of archiva remained after service stop..
I pkill those processes and it solved the problem.

many thanks!"
MRM-1894,skygo,Eric Barboni,2015-07-03T09:51:16.175Z,2015-07-03T09:51:16.175Z,Install issue on installing over a previous version with lib changes
MRM-1873,mireczatko,Miroslav Zako,2015-02-10T05:41:20.138Z,2015-02-10T05:41:20.138Z,"image: archiva-problem.png -> archiva-observer ^(LDAP-group)^ to Archiva roles mapping in Archiva
image: archiva-problem-ldap.png -> archiva-observer ^(LDAP-group)^ to mzatko ^(LDAP-user)^ mapping in LDAP"
MRM-1873,olamy,Olivier Lamy (*$^%`),2015-02-13T16:43:15.201Z,2015-02-13T16:43:15.201Z,fixed with https://github.com/apache/archiva-redback-core/pull/3
MRM-1873,githubbot,ASF GitHub Bot,2015-05-28T10:01:16.314Z,2015-05-28T10:01:16.314Z,"GitHub user svogt opened a pull request:

    https://github.com/apache/archiva-redback-core/pull/4

    Fix for MRM-1873 which broke AD group assignments

    Escaping only needed in the LDAP filter string

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/svogt/archiva-redback-core master

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/archiva-redback-core/pull/4.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #4
    
----
commit d0bc52fff1d8901decff5b16dd2e6ed07bb67354
Author: Sascha Vogt <s.vogt@seeburger.de>
Date:   2015-05-28T10:00:34Z

    Fix for MRM-1873 which broke AD group assignments
    
    Escaping only needed in the LDAP filter string

----
"
MRM-1873,githubbot,ASF GitHub Bot,2015-05-28T10:02:05.067Z,2015-05-28T10:02:05.067Z,"Github user reiz commented on the pull request:

    https://github.com/apache/archiva-redback-core/pull/4#issuecomment-106257286
  
    :+1: 
"
MRM-1873,githubbot,ASF GitHub Bot,2015-06-08T10:46:39.788Z,2015-06-08T10:46:39.788Z,"Github user asfgit closed the pull request at:

    https://github.com/apache/archiva-redback-core/pull/4
"
MRM-1846,olamy,Olivier Lamy (*$^%`),2014-06-10T11:46:50.364Z,2014-06-10T11:46:50.364Z,"fixed https://git-wip-us.apache.org/repos/asf?p=archiva.git;h=7972d75
"
MRM-1846,iguimiot,Guimiot Isabelle,2014-09-05T06:47:03.448Z,2014-09-05T06:47:03.448Z,"I really apologize, but in fact, I think the issue isn't completely fixed : I didn't pay enough attention when I said it was ok 2 months ago, shame on me...Now that I deeply test the latest version, I realize it's still not working.

Since 2.1.0, the name of the artifact published really ends with -SNAPSHOT (instead of -null-buildnumber in 2.0.1), which is correct and made me think it was fixed, *but* when I click on it (or try to download it as a dependency from another project), it's still searching an artifact called artifact-null-buildnumber, and I get that kind of message :

Not a valid artifact path in a Maven 2 repository, filename 'myArtifact-2.5.3-null-0.pom' doesn't contain a timestamped version matching snapshot '2.5.3-SNAPSHOT'

I precise that it affects both 2.1.0 and 2.1.1.

I hope you could fix it in 2.1.2 ?

Thanks a lot !"
MRM-1846,olamy,Olivier Lamy (*$^%`),2014-09-05T06:53:59.655Z,2014-09-05T06:53:59.655Z,"that's a bit different issue as it's in the ui.
I believe maven download works.
So please open an other issue as it concerns the ui only.
"
MRM-1846,iguimiot,Guimiot Isabelle,2014-09-05T07:15:22.576Z,2014-09-05T07:15:22.576Z,"It's not only a UI issue, maven download doesn't work either... (if it was just UI it wouldn't be a blocker bug...)

Here's the message I get in the build log :

[INFO] Downloading: http://archiva.company.com/repository/snapshots/myGroup/myArtifact/2.5.3-SNAPSHOT/myArtifact-2.5.3-SNAPSHOT.jar
(...)
[ERROR] Failed to execute goal on project xxxx: Could not resolve dependencies for project xxxx:jar:1.0.0-SNAPSHOT: Could not find artifact myGroup.myArtifact:jar:2.5.3-SNAPSHOT in snapshots (http://archiva.company.com/repository/snapshots) -> [Help 1]
"
MRM-1846,olamy,Olivier Lamy (*$^%`),2014-09-14T23:51:50.246Z,2014-09-14T23:51:50.246Z,"could be so great if you guys migrated to maven 3.x :-)
"
MRM-1846,olamy,Olivier Lamy (*$^%`),2014-09-14T23:55:26.744Z,2014-09-14T23:55:26.744Z,"https://git-wip-us.apache.org/repos/asf?p=archiva.git;a=commit;h=c3ef4bfb
"
MRM-1846,olamy,Olivier Lamy (*$^%`),2014-09-14T23:56:13.218Z,2014-09-14T23:56:13.218Z,"@iguimiot can you test the fix in your env?
Thanks"
MRM-1846,iguimiot,Guimiot Isabelle,2014-09-15T03:43:14.503Z,2014-09-15T03:43:14.503Z,"{quote}
could be so great if you guys migrated to maven 3.x 
{quote}

Most of us use maven 3.x, or maven 2.x with unique version true, but we have to deal with a few ugly duckies that still use maven 2 and unique version false... ;)
Archiva is used here by more than 250 different projects !! It's very hard to maintain a unique platform for so many projects, some of them always ask for the very latest component versions, but in the same time, other projects loudly scream when we ask them to change just a line in their pom...

Anyway, is your commit included in the latest build available here : https://builds.apache.org/view/A-D/view/Archiva/job/archiva-master-build/lastSuccessfulBuild/artifact/archiva-jetty/target/apache-archiva-2.1.2-SNAPSHOT-bin.zip ? Or do I have to build it from git ?

thanks ! :)"
MRM-1846,olamy,Olivier Lamy (*$^%`),2014-09-15T06:12:34.884Z,2014-09-15T06:12:34.884Z,"sure migration is not always easy.
Yup this links include last changes."
MRM-1846,iguimiot,Guimiot Isabelle,2014-09-15T10:55:39.128Z,2014-09-15T10:55:39.128Z,I'm not sure the link is ok...  I checked the files in the zip : it was created 4 days ago... Should I wait for the next build ? Or should I package it from the source code ?
MRM-1846,olamy,Olivier Lamy (*$^%`),2014-09-15T18:37:11.39Z,2014-09-15T18:37:11.39Z,Yup I restarted one so use builds from #814
MRM-1846,iguimiot,Guimiot Isabelle,2014-09-16T08:11:51.312Z,2014-09-16T08:11:51.312Z,"Well, seems better with #814, my test case works ! 

Thanks a lot for this quick fix ! I'm now waiting for 2.1.2 release :)"
MRM-1825,brettporter,Brett Porter,2014-04-18T23:29:27.652Z,2014-04-18T23:29:27.652Z,"Fixed for 2.0.1 release, and updated our release script for future. Thanks!"
MRM-1813,olamy,Olivier Lamy (*$^%`),2014-03-05T18:44:58.225Z,2014-03-05T18:44:58.225Z,browser?
MRM-1813,Chris Harris,Chris Harris,2014-03-27T03:10:41.781Z,2014-03-27T03:10:41.781Z,The latest Waterfox & Firefox.
MRM-5,jdcasey,John Casey,2005-06-08T15:16:23.85Z,2005-06-08T15:16:23.85Z,"should work in pending svn commit, will deploy very soon."
MRM-61,brettporter,Brett Porter,2006-02-03T19:33:49.853Z,2006-02-03T19:33:49.853Z,should this be closed again?
MRM-76,brettporter,Brett Porter,2006-02-03T19:48:06.023Z,2006-02-03T19:48:06.023Z,"can you adjust the title and expand on what this is? BTW, it has no estimate compared to the others created."
MRM-76,jtolentino,Ernesto S. Tolentino Jr.,2006-02-06T04:28:46.863Z,2006-02-06T04:28:46.863Z,Web app for configuring multiple repository proxy. 
MRM-76,brettporter,Brett Porter,2006-08-25T01:01:21.717Z,2006-08-25T01:01:21.717Z,I've done this
MRM-2,rkrzewsk,Rafal Krzewski,2005-03-15T07:00:06.16Z,2005-03-15T07:00:06.16Z,"Note: that such check must span multiple repositories: An organization may publish their artifacts to a their private repository, but the artifacts could have dependencies both in the private and public repositories.
If the scan were performed on a single repository only, dependencies from public repository would have to be replicated in private repository to pass the check, which would a waste of bandwidth and resources."
MRM-2,brettporter,Brett Porter,2005-03-15T14:37:25.832Z,2005-03-15T14:37:25.832Z,"Rafal - thanks, that's a possible feature for later. I think for now this is fine to run on ibiblio itself so we've got the most upstream server in good condition.

I'd prefer for users running this, to start with, to use something like maven-proxy so they actually have a local copy of all the deps they use, but we can certainly extend it in the ways you've suggested."
MRM-2,jtolentino,Ernesto S. Tolentino Jr.,2005-12-05T03:07:28.294Z,2005-12-05T03:07:28.294Z,New classes and unit tests.
MRM-2,jtolentino,Ernesto S. Tolentino Jr.,2005-12-06T03:47:37.718Z,2005-12-06T03:47:37.718Z,"Additional implementations, new classes and unit tests."
MRM-2,jtolentino,Ernesto S. Tolentino Jr.,2005-12-06T04:01:59.321Z,2005-12-06T04:01:59.321Z,More unit tests.
MRM-2,jtolentino,Ernesto S. Tolentino Jr.,2005-12-06T23:32:18.693Z,2005-12-06T23:32:18.693Z,Finished implementation with 100% unit test code coverage on artifact reporting.
MRM-92,brettporter,Brett Porter,2006-02-06T17:27:53.684Z,2006-02-06T17:27:53.684Z,these are all on the roadmap (RSS and web services). M2 can already attach documents to deployed artifacts using a plugin in the package phase (see how the sources plugin works).
MRM-92,brettporter,Brett Porter,2006-07-23T19:35:25.963Z,2006-07-23T19:35:25.963Z,"Matthew, any progress on any of these? I'd like to see 3 separate issues created for these (the first 2 are already on our roadmap, but not in JIRA)"
MRM-92,brettporter,Brett Porter,2006-07-23T19:51:57.96Z,2006-07-23T19:51:57.96Z,"created the issues for the first 2. The third can be handled client side (though if you've got ideas for integrating the creation of them into the repo itself, they are most welcome!)"
MRM-21,brettporter,Brett Porter,2005-11-23T22:13:56.528Z,2005-11-23T22:13:56.528Z,already converted to a build plugin
MRM-36,brettporter,Brett Porter,2006-02-09T20:20:28.563Z,2006-02-09T20:20:28.563Z,"I'd like to see some thoughts on how this will be implemented before diving in to it. Also, bear in mind the scheduling is not yet integrated into the webapp."
MRM-36,oching,Maria Odea Ching,2006-02-10T20:31:05.941Z,2006-02-10T20:31:05.941Z,"The discoverer will be scheduled to execute using the plexus-quartz scheduler. Since the discoverer will have a complete list of all the artifacts/metadata in the repository, we can call the indexer and index the artifact/metadata as we iterate through this list. 

Please note that the indexer checks first whether the artifact/metadata already exists in the index before indexing the given artifact/metadata to assure that there will be no duplicates."
MRM-36,oching,Maria Odea Ching,2006-02-14T03:35:05.319Z,2006-02-14T03:35:05.319Z,This issue is related to MRM-38. A Job that invokes the discoverer and indexer should be created and then scheduled to be executed. 
MRM-36,oching,Maria Odea Ching,2006-03-01T19:15:06.43Z,2006-03-01T19:15:06.43Z,Attached patch file for discovery and indexing schedule.
MRM-36,elpunzalan,Edwin Punzalan,2006-03-02T03:55:56.603Z,2006-03-02T03:55:56.603Z,Patch applied. Thanks.
MRM-67,brettporter,Brett Porter,2006-02-03T19:35:37.55Z,2006-02-03T19:35:37.55Z,"you don't need a configuration file, the normal plexus configuration can be used (this is a one line change).

Does this revise this task at all?"
MRM-67,oching,Maria Odea Ching,2006-06-05T22:51:03.505Z,2006-06-05T22:51:03.505Z,"Okay, we'll use the plexus configuration file for the index maintenance."
MRM-67,oching,Maria Odea Ching,2006-06-15T21:13:41.924Z,2006-06-15T21:13:41.924Z,"Created class for writing and updating the xml configuration file used for discovery and indexing. 
Added web interface for setting the configuration values for indexing."
MRM-67,oching,Maria Odea Ching,2006-06-15T21:21:39.882Z,2006-06-15T21:21:39.882Z,"The configuration values are stored and saved in an xml file named mrm-admin-config.xml, which is located in the WEB-INF directory of the webapp.
When the configuration page is accessed in the webapp, the ConfigurationManager will retrieve the values from the config file. If the xml file does not exist yet, it would be created. Otherwise, it would be read and the configuration values will be retrieved then passed to the webapp config page."
MRM-87,brettporter,Brett Porter,2006-02-03T19:58:55.636Z,2006-02-03T19:58:55.636Z,we also need to add things to the rest of the RM to ensure the lockfile is read and honored :)
MRM-87,joakime,Joakim Erdfelt,2007-05-22T14:49:46.995Z,2007-05-22T14:49:46.995Z,"There are checks in place currently on the task/job queue side to prevent overlapping Filesystem operations.

But that doesn't take into account the file deployment issue.

Also...
* How long should the lock exist? (minutes? hours?)
* Should there be a UI provision to cleanup/force-unlock locks?
* What kind of scope should the lock have? (repository? groupId? version? artifact? etc...)
* Should the creation of locks be automatic, or manual?
* We can't reliably use java.nio Locks on OSX or Linux.  What other approach is viable?"
MRM-87,brettporter,Brett Porter,2007-11-08T16:41:59.63Z,2007-11-08T16:41:59.63Z,"cover this via the ""transactionality"" issue"
MRM-56,oching,Maria Odea Ching,2006-01-23T00:29:52.453Z,2006-01-23T00:29:52.453Z,Attached patch for deleting documents in index.
MRM-56,elpunzalan,Edwin Punzalan,2006-01-23T01:28:36.119Z,2006-01-23T01:28:36.119Z,Patch applied. Thanks.
MRM-32,oching,Maria Odea Ching,2006-03-02T21:17:30.608Z,2006-03-02T21:17:30.608Z,Lucene index was already created. All sub-tasks of this issue are already finished.
MRM-11,jirareport,Jira Report User,2006-12-15T19:59:35.629Z,2006-12-15T19:59:35.629Z,This sounds like it's a priority to either be done or punted by the first release.
MRM-11,joakime,Joakim Erdfelt,2007-03-19T09:36:37.187Z,2007-03-19T09:36:37.187Z,Integrated plexus-security (redback) in trunk
MRM-81,brettporter,Brett Porter,2006-02-02T20:26:20.341Z,2006-02-02T20:26:20.341Z,"does this include the ""find artifact"" page? Note that the sample webwork action, JSP and applet is already in SVN for that page (it just needs to be put into furniture)."
MRM-81,jtolentino,Ernesto S. Tolentino Jr.,2006-03-01T05:00:40.986Z,2006-03-01T05:00:40.986Z,Updates in the module will be used by the webapp general search.
MRM-81,jtolentino,Ernesto S. Tolentino Jr.,2006-03-01T05:03:25.628Z,2006-03-01T05:03:25.628Z,General Search webapp and configuration. Please apply MRM-81-maven-repository-indexer.diff and this patch.
MRM-81,elpunzalan,Edwin Punzalan,2006-03-01T05:40:37.462Z,2006-03-01T05:40:37.462Z,Patch applied. Thanks.
MRM-44,oching,Maria Odea Ching,2006-01-04T21:23:02.309Z,2006-01-04T21:23:02.309Z,"Attached patch for searching by groupId, artifactId, version, name, package, class and file. Nested search (using AND and OR) is also handled."
MRM-44,oching,Maria Odea Ching,2006-01-05T19:44:58.41Z,2006-01-05T19:44:58.41Z,"The patch file attached also covers issues MRM-45, MRM-48 and MRM-52"
MRM-46,brettporter,Brett Porter,2006-01-09T02:19:30.527Z,2006-01-09T02:19:30.527Z,need to set up configuration - currently has a local path hardcoded
MRM-37,brettporter,Brett Porter,2006-07-24T01:44:16.859Z,2006-07-24T01:44:16.859Z,"It is better not to check the target at all but to record all the information inside the repository being discovered. The best alternative for this is the index - so when the indexer callback checks for deletions (which can be done using the technique described below with the listener), deletions found should be recorded in the root metadata for other processes to pick up, handle and clear as they come by.

This does mean that it may operate like this:
1) file is deleted
2) converter discovers no change
3) indexer discovers change, 
4) converter finds change recorded for it, deletes from target
This delay should not be significant as long as the non-indexing discoverers regularly check for deletions.

This does require that we can enumerate all operations on a repository so that they can be added for each.

We will want to be able to only test deletions on a less frequent interval.

-----
other thoughts in case this doesn't pan out:

I can see two possible solutions:
1) on an alternate run, the caller passes in a list of things it knows about, and the ones that have gone missing are passed back for deletion from the caller (indexer, converter, etc)
2) metadata is written to each artifact directory

The first seems the most efficient to me, but has a high memory requirement if there are a lot of artifacts (and would require caching to avoid having to read the entire index/rediscovering the entire target repository/etc).

Once we convert to a listener, a better way would be for the listener to have two methods:
- processModifiedArtifact() - for new or changed artifacts
- processUnmodifiedArtifact() - generally do nothing, but notes its existence
at the completion of discovery, the caller can compare the list of discovered artifacts to its internal list and detect deletions. If it is easy to get a count of the target then this will be very quick when unchanged. The most problematic is the target repository on converter which will require a ""reverse discovery"" to find the old artifacts.

"
MRM-37,oching,Maria Odea Ching,2007-10-15T06:20:54.829Z,2007-10-15T06:20:54.829Z,"Fixed in -r584735

These were the changes made:
- added code for cleaning up the database of artifacts that are no longer existing in the repository 
(DatabaseCleanupRemoveArtifactConsumer and DatabaseCleanupRemoveProjectConsumer)
- created tests for database cleanup of removed artifacts
- updated some of the test cases (in archiva-database and archiva-scheduled modules) to reflect the changes in thedb cleanup consumers

The cleaning up of the index was not yet included here as i suspect the locking problem (same as with the repository purge) will occur. I'll open a separate jira for this. 

Thanks!"
MRM-10,brettporter,Brett Porter,2010-02-23T02:07:35.617Z,2010-02-23T02:07:35.617Z,no longer in Archiva
MRM-70,jtolentino,Ernesto S. Tolentino Jr.,2006-02-23T00:45:21.037Z,2006-02-23T00:45:21.037Z,Code already exists (see MRM-74).
MRM-48,oching,Maria Odea Ching,2006-01-05T19:51:27.397Z,2006-01-05T19:51:27.397Z,The resolution for this issue is included in the patch file attached at issue MRM-44.
MRM-49,jtolentino,Ernesto S. Tolentino Jr.,2005-11-30T19:33:32.652Z,2005-11-30T19:33:32.652Z,There was a bug in Tortoise SVN when creating a patch where duplicate lines of code appears. Attaching a manually edited patch.
MRM-49,elpunzalan,Edwin Punzalan,2005-11-30T19:35:32.533Z,2005-11-30T19:35:32.533Z,Patch applied. Thanks!
MRM-91,elpunzalan,Edwin Punzalan,2006-02-27T20:28:20.526Z,2006-02-27T20:28:20.526Z,"According to jason, its an index with the same output as what eu has created for the eclipse plugin"
MRM-96,skaze,skaze,2006-02-15T06:47:49.575Z,2006-02-15T06:47:49.575Z,Support NTLM HTTP proxies
MRM-96,elpunzalan,Edwin Punzalan,2006-02-17T01:27:41.031Z,2006-02-17T01:27:41.031Z,"Done. NTLM Proxies supported, thanks to wagon. ^_^"
MRM-38,jtolentino,Ernesto S. Tolentino Jr.,2006-01-24T20:03:30.839Z,2006-01-24T20:03:30.839Z,Will reuse plexus-quartz component. Will add to webapp component and trigger a schedule.
MRM-38,brettporter,Brett Porter,2006-02-12T21:26:08.596Z,2006-02-12T21:26:08.596Z,"all I need from this is to have the scheduler configured via components.xml to startup when the webapp does, and to pre-program some schedules in. We can worry about the web interface in MRM-80
"
MRM-38,jtolentino,Ernesto S. Tolentino Jr.,2006-02-13T09:43:38.103Z,2006-02-13T09:43:38.103Z,Created a components.xml based on the one existing in Continuum. This components.xml uses org.codehaus.plexus.scheduler.Scheduler with DefaultScheduler of the same package for its implementation. Still need to know which properties are configurable for MRM scheduling.
MRM-38,jtolentino,Ernesto S. Tolentino Jr.,2006-02-15T08:56:13.829Z,2006-02-15T08:56:13.829Z,"Created this patch to give updates on current status. Getting the following errors though:

[ERROR] Nonexistent component: com.opensymphony.xwork.Actioncom.opensymphony.xwo
rk.ActionSupport
[ERROR] Nonexistent component: org.codehaus.plexus.scheduler.Scheduler
[ERROR] Nonexistent component: com.opensymphony.xwork.Actioncom.opensymphony.xwo
rk.ActionSupport

Also commented out two lines of code of current PackageSearchAction because it's causing a build failure."
MRM-38,evenisse,Emmanuel Venisse,2006-02-15T10:00:49.318Z,2006-02-15T10:00:49.318Z,"The pb of ""NonExistent component..."" is because :
1- your components.xml isn't in correct directory, it must be in src/main/resources/META-INF/
2- you can't use plexus-descriptor generator AND a components.xml. For the moment, plexus-descriptor generator doesn't do a merge with your components.xml, so your scheduler component is never in final components.xml (target/classes/META-INF/components.xml)

Possible solutions:
- Update plexus-descriptoir generator to allow a user components.xml for merging (it's my preferred)
- Don't use plexus-descriptor generator in repository-manager-webapp
"
MRM-38,brettporter,Brett Porter,2006-02-15T14:54:44.226Z,2006-02-15T14:54:44.226Z,"(1) or (3) are the only options, as (2) is not going to be fun for a bunch of webwork actions.

In case you are wondering what (3) is: doesn't DefaultScheduler have sensible defaults we can use (at least for now?)"
MRM-38,jtolentino,Ernesto S. Tolentino Jr.,2006-02-17T06:35:48.234Z,2006-02-17T06:35:48.234Z,"Placed components.xml in correct directory (resources/META-INF/plexus), not in MRM but in plexus-quartz. This will provide as a default configuration for other projects using it. Also added a class file in plexus-quartz for configuring the scheduler. The webapp now loads the scheduler when it is run."
MRM-38,elpunzalan,Edwin Punzalan,2006-02-22T20:19:24.026Z,2006-02-22T20:19:24.026Z,Patch Applied. Thanks.
MRM-38,elpunzalan,Edwin Punzalan,2006-02-22T20:30:38.813Z,2006-02-22T20:30:38.813Z,"Sorry, patched the wrong file."
MRM-38,elpunzalan,Edwin Punzalan,2006-02-22T20:34:28.593Z,2006-02-22T20:34:28.593Z,Correct patch applied this time. ^_^
MRM-90,wsmoak,Wendy Smoak,2007-06-08T17:52:44.26Z,2007-06-08T17:52:44.26Z,Would this include searching the contents of the jars?  There's a need for something like http://www.jarhoo.com provides.
MRM-90,brettporter,Brett Porter,2007-06-09T00:08:29.743Z,2007-06-09T00:08:29.743Z,it already does this (try searching for a class/package)
MRM-90,gautencio,Gwen Harold Autencio,2008-08-25T00:27:10.113Z,2008-08-25T00:27:10.113Z,Added another page that has criteria for searching and filter search through criteria.
MRM-90,oching,Maria Odea Ching,2008-08-31T22:33:36.229Z,2008-08-31T22:33:36.229Z,"Thanks for the patch Gwen, it looks great! 

I just have a couple of comments though..
- could you provide unit tests for the filtered search in DefaultCrossRepositorySearch?
- from the filtered search page, maybe we could add a link that would take the user back to the quickSearch page?
- i think we could already remove the Filter Results and Search Results Only checkboxes as the filtered search is already an exact search. wdyt?
- there's a problem with the results count (sometimes the starting count is negative and the succeeding page # links doesn't show up)
- in CrossRepositorySearch, maybe we could rename the filterSearchResults(..) method to let's say doFilteredSearch(..) or executeFilteredSearch() for clarity? 
- the search criteria doesn't seem to be AND'ed.. when i entered a groupId of an artifact and a class/package name of another (different) artifact then did a search, both artifacts were returned even though they don't satisfy BOTH of the criteria i entered (they only satisfy one of the criteria -- either groupId OR class/package name)"
MRM-90,gautencio,Gwen Harold Autencio,2008-09-03T07:36:23.626Z,2008-09-03T07:36:23.626Z,"Attached a new patch based on Miss Deng's comments.
Thanks"
MRM-90,oching,Maria Odea Ching,2008-09-04T05:28:07.382Z,2008-09-04T05:28:07.382Z,"Hi Gwen, thanks for revising the patch :)

I still have a couple more comments for the new patch:
- the advanced search doesn't perform an exact field search. I typed 'org.apache.archiva' in the *version* field, and I got the artifacts with a *groupId* of 'org.apache.archiva'. The correct behaviour should only return those artifacts with versions that matched the value I've set in the *version* field. The same goes for the other fields..
- maybe we could add an 'all' option in the repository field? If the user should choose that, then the searcher would search all the repositories which the user has access to.
- add a 'No Results' message if there are no matches found 
- add a 'You do not have access to any repositories page..' (see the message displayed for quick search) message if the user has no access to any repositories and attempts to do an advanced search "
MRM-90,gautencio,Gwen Harold Autencio,2008-09-15T07:43:52.366Z,2008-09-15T07:43:52.366Z,"Attached another patch, based on the previous comments.

Thanks. :)"
MRM-90,oching,Maria Odea Ching,2008-09-16T21:56:15.066Z,2008-09-16T21:56:15.066Z,"Thanks again for the patch and for revising it Gwen! :)

I already applied it in trunk -r696137 with some minor changes to the patch:
- applied formatting
- removed unused methods and imports
- removed changes to src/main/resources/org/apache/maven/archiva/web/action/admin/appearance/EditOrganisationInfoAction-validation.xml as this looks like it's for a different issue
"
MRM-3,jdcasey,John Casey,2005-06-08T15:15:40.423Z,2005-06-08T15:15:40.423Z,"patched in pending svn commit, will deploy soon

Thanks Anatol."
MRM-99,oching,Maria Odea Ching,2006-03-02T21:11:31.663Z,2006-03-02T21:11:31.663Z,Attached patch file for this issue.
MRM-99,elpunzalan,Edwin Punzalan,2006-03-02T21:24:38.428Z,2006-03-02T21:24:38.428Z,Patch applied. Thanks.
MRM-55,oching,Maria Odea Ching,2006-01-25T00:07:01.266Z,2006-01-25T00:07:01.266Z,Attached patch file for checking if the object was already indexed and for updating the index.
MRM-55,oching,Maria Odea Ching,2006-01-25T00:52:17.242Z,2006-01-25T00:52:17.242Z,Attached patch file with revisions in the indexing process.
MRM-55,elpunzalan,Edwin Punzalan,2006-01-25T01:16:38.324Z,2006-01-25T01:16:38.324Z,Patch applied. Thanks.
MRM-59,brettporter,Brett Porter,2006-02-23T22:00:02.375Z,2006-02-23T22:00:02.375Z,"Can you describe the solution you are thinking of? 12 hours sounds like it might be more than I was anticipating.

All I figured for this was:
- the MRM already handles working with remote repositories of any format by taking the artifact and converting it to the correct layout, right?
- the proxy servlet would be configured so that /proxy-m1/* maps to the proxy servlet with path format = legacy. So a path under there would be groupId/types/artifactId-version.ext
- the proxy servlet would be configured so that /proxy-m2/* maps to the proxy servlet with path format = default. So a path under there would be groupId/artifactId/version/artifactId-version.ext
"
MRM-28,carlos,Carlos Sanchez,2005-11-22T13:52:54.103Z,2005-11-22T13:52:54.103Z,"When removing the --size-only option a lot of files get resynced every time
http://test.maven.codehaus.org/reports/syncopate/apache/2005/11/22/apache-20051122-013122.txt
http://test.maven.codehaus.org/reports/syncopate/apache/2005/11/22/apache-20051122-093106.txt"
MRM-28,joakime,Joakim Erdfelt,2007-06-18T16:25:55.208Z,2007-06-18T16:25:55.208Z,"Brett, Carlos,

Is this still a valid jira?"
MRM-28,brettporter,Brett Porter,2007-06-18T17:09:53.446Z,2007-06-18T17:09:53.446Z,I believe so
MRM-28,brettporter,Brett Porter,2010-02-23T01:37:15.133Z,2010-02-23T01:37:15.133Z,not an Archiva issue any more
MRM-78,brettporter,Brett Porter,2006-02-03T19:54:06.368Z,2006-02-03T19:54:06.368Z,what web interface do you think the indexing needs?
MRM-78,jtolentino,Ernesto S. Tolentino Jr.,2006-02-06T04:32:04.724Z,2006-02-06T04:32:04.724Z,This is for manual reindexing of artifacts. Also for setting the schedule when the discovery should reindex.
MRM-85,joakime,Joakim Erdfelt,2007-05-22T14:40:05.916Z,2007-05-22T14:40:05.916Z,"Repository access to remote repositories is done via wagon.
Local repostiory access is done with direct java.io file operations using BidirectionalLayout class.

"
MRM-94,elpunzalan,Edwin Punzalan,2006-06-07T06:26:53.888Z,2006-06-07T06:26:53.888Z,Fix committed in SVN.  I'm leaving the issue open for the remaining todo's inside the new Reporter class
MRM-98,elpunzalan,Edwin Punzalan,2006-03-02T20:43:47.84Z,2006-03-02T20:43:47.84Z,Patch applied. Thanks.
MRM-65,carlos,Carlos Sanchez,2006-01-30T18:13:23.03Z,2006-01-30T18:13:23.03Z,"I have left the license copying code, but avoiding failure if it's not present"
MRM-86,brettporter,Brett Porter,2006-02-03T19:57:44.874Z,2006-02-03T19:57:44.874Z,"isn't the repository interface read only? why does it need to be transactional?

the only things needing transactions are the proxy and the converter. The converter already has this - the proxy could reuse those classes by refactoring them into the utils."
MRM-86,jirareport,Jira Report User,2006-12-15T20:01:17.327Z,2006-12-15T20:01:17.327Z,Should be fixed/wontfixed by 1.0 I think.
MRM-86,joakime,Joakim Erdfelt,2007-06-18T16:19:53.054Z,2007-06-18T16:19:53.054Z,Postponing to future version.
MRM-86,brettporter,Brett Porter,2011-09-12T08:59:37.685Z,2011-09-12T08:59:37.685Z,"The repository session in the new API is transactional for metadata. For dropping files in, there isn't much need for this form of transaction."
MRM-35,oching,Maria Odea Ching,2006-01-15T20:44:35.046Z,2006-01-15T20:44:35.046Z,Attached patch for indexing metadata and for searching the metadata index.
MRM-35,elpunzalan,Edwin Punzalan,2006-01-16T21:26:55.881Z,2006-01-16T21:26:55.881Z,Both patches applied. Thanks.
MRM-34,elpunzalan,Edwin Punzalan,2006-01-04T00:04:39.231Z,2006-01-04T00:04:39.231Z,"POM Index should have these fields:

groupId
artifactId
version
packaging
license url(s)
dependencies
build plugins
reporting plugins
plugins"
MRM-34,elpunzalan,Edwin Punzalan,2006-01-06T01:35:51.746Z,2006-01-06T01:35:51.746Z,"btw, i added the sha1 and md5 checksum of the pom file to the index"
MRM-17,oching,Maria Odea Ching,2005-12-05T23:38:47.336Z,2005-12-05T23:38:47.336Z,Attached file for valdating the checksum of an artifact. To follow: validation of metadata checksum.
MRM-17,oching,Maria Odea Ching,2005-12-06T20:59:30.819Z,2005-12-06T20:59:30.819Z,Attached patch for validation of metadata checksum. To follow: additional unit testing
MRM-17,oching,Maria Odea Ching,2005-12-08T20:06:39.82Z,2005-12-08T20:06:39.82Z,Attached patch with additional unit testing.
MRM-17,elpunzalan,Edwin Punzalan,2005-12-08T20:20:58.95Z,2005-12-08T20:20:58.95Z,Patches applied. Thanks!
MRM-73,aramirez,Allan Ramirez,2006-06-16T04:59:54.334Z,2006-06-16T04:59:54.334Z,Is this about the maintenance of artifacts? please confirm
MRM-73,brettporter,Brett Porter,2006-06-16T06:56:23.806Z,2006-06-16T06:56:23.806Z,I don't know either. John? Can we close won't fix?
MRM-73,brettporter,Brett Porter,2006-07-23T19:29:00.48Z,2006-07-23T19:29:00.48Z,incorrectly specified issue
MRM-77,franz_see,Franz Allan Valencia See,2006-08-30T05:42:35.672Z,2006-08-30T05:42:35.672Z,May i ask for more info for this issue? I'd like to work on it
MRM-77,brettporter,Brett Porter,2006-08-30T06:11:05.699Z,2006-08-30T06:11:05.699Z,"it's this:
http://people.apache.org/~brett/repoman-site/reports.html

The code that actually does the checks is already written:
http://svn.apache.org/repos/asf/maven/archiva/trunk/archiva-reports-standard/

I'll be working on this as well really soon, so let's discuss it on archiva-dev@maven.apache.org if you have any thoughts and we'll get you involved!"
MRM-77,brettporter,Brett Porter,2006-09-12T22:19:21.605Z,2006-09-12T22:19:21.605Z,test message
MRM-77,brettporter,Brett Porter,2006-09-12T22:24:19.538Z,2006-09-12T22:24:19.538Z,test message
MRM-53,brettporter,Brett Porter,2005-12-09T17:54:17.288Z,2005-12-09T17:54:17.288Z,this is the POM equivalent of MRM-16
MRM-53,brettporter,Brett Porter,2005-12-09T18:12:33.643Z,2005-12-09T18:12:33.643Z,"note, we're just wanting to test that the xml is well formed - ie that maven-model can read it"
MRM-53,oching,Maria Odea Ching,2005-12-14T01:05:49.838Z,2005-12-14T01:05:49.838Z,Attached patch for validating the pom xml file.
MRM-53,elpunzalan,Edwin Punzalan,2005-12-14T02:56:49.933Z,2005-12-14T02:56:49.933Z,"Patch applied, thanks!"
MRM-58,elpunzalan,Edwin Punzalan,2006-02-21T23:39:58.947Z,2006-02-21T23:39:58.947Z,Fixed along with MRM-57
MRM-66,brettporter,Brett Porter,2006-06-08T02:57:03.948Z,2006-06-08T02:57:03.948Z,the configuration items are in the maven-repository-configuration modello model now
MRM-66,brettporter,Brett Porter,2006-07-23T19:27:12.49Z,2006-07-23T19:27:12.49Z,configuration has been reworked
MRM-20,carlos,Carlos Sanchez,2005-11-04T17:12:50.759Z,2005-11-04T17:12:50.759Z,"This is more a problem of bad m1 poms, I don't thik we should spend time on this"
MRM-62,elpunzalan,Edwin Punzalan,2006-02-23T01:20:22.676Z,2006-02-23T01:20:22.676Z,"Closing this now as the proxy module is now able to read the following maven-proxy configurations and incorporate it in its own configuration:

- localStore
- browsability
- remote repositories:
    - cacheFailures
    - cachePeriod
    - hardFail"
MRM-68,oching,Maria Odea Ching,2006-02-09T19:40:57.851Z,2006-02-09T19:40:57.851Z,The resolution is included in the patch file attached in MRM-69.
MRM-52,oching,Maria Odea Ching,2006-02-02T20:12:38.674Z,2006-02-02T20:12:38.674Z,MRM-69 still needs to be done and integrated with indexing.
MRM-9,brettporter,Brett Porter,2005-04-25T20:32:22.495Z,2005-04-25T20:32:22.495Z,"let's leave this for now. We'll call it ""repository-manager"" and pull all the stuff together."
MRM-16,brettporter,Brett Porter,2005-11-29T01:03:56.189Z,2005-11-29T01:03:56.189Z,"more details:
- needs to go over the maven-metadata.xml files in the repository
- needs to check each element is correct. ie:
  * check that the artifacts corresponding to each element in <versions> exists, and that there is a <version> element for each version of the artifact in the repository
  * check that latest/releaseVersion, if set, correspond to real versions
  * check that lastUpdated is set
  * if it is a -SNAPSHOT version, check <snapshot> is set, and that the artifact it is set to exists
  * if it has plugin groups, check that an artifact exists for each of those with a latest version set."
MRM-16,elpunzalan,Edwin Punzalan,2005-12-05T01:15:19.79Z,2005-12-05T01:15:19.79Z,Done.  Although I think the unit tests should use the Metadata Xpp3Reader instead.... but I guess that's an improvement. ^_^
MRM-15,elpunzalan,Edwin Punzalan,2006-02-23T01:28:49.524Z,2006-02-23T01:28:49.524Z,Can you provide how to reproduce this?  I did some revisions on the conversion and I want to see if this still exist. Thanks.
MRM-15,brettporter,Brett Porter,2006-02-23T01:30:53.642Z,2006-02-23T01:30:53.642Z,this was in the old repoclean. I wrote it properly this time.
MRM-7,jdcasey,John Casey,2005-06-08T15:08:47.893Z,2005-06-08T15:08:47.893Z,"This is because the parsing process for the artifact information finds 'jdbc3' as a classifier...in which case, this handling is perfect.

Unfortunately, in order to maintain some separation from the repository layout, we need to have an Artifact instance to feed to the ArtifactRepositoryLayout so that we can get the path of the corresponding POM. This is important so that we can [eventually] move into processing m2-repository sources as well as m1-repository sources. While I could add an exception to the version pattern (determines where the version spec ends and any classifier begins), you have to admit that 'jdbc3' is hardly a common version part. I have to admit, looking at the files in the repository, I'm not sure what this artifact is - and the POM for that artifact is of absolutely no help.

I suggest that the name of this artifact be fixed, not the conversion process."
MRM-7,jdcasey,John Casey,2005-06-08T15:09:28.141Z,2005-06-08T15:09:28.141Z,"this is not a conversion issue, it's an artifact-naming issue. We cannot expect to convert 100% of all the poorly named artifacts in the world."
MRM-57,oching,Maria Odea Ching,2006-02-13T18:53:46.444Z,2006-02-13T18:53:46.444Z,The current searcher already handles this type of search.
MRM-57,oching,Maria Odea Ching,2006-02-13T19:22:43.864Z,2006-02-13T19:22:43.864Z,"When org.apache is searched in ""query everything"", and a match was found in a package name, the search results should know that it was a package that was found."
MRM-57,oching,Maria Odea Ching,2006-02-21T00:54:24.508Z,2006-02-21T00:54:24.508Z,"Attached patch file for MRM-57, also included in the patch file is the resolution for MRM-58."
MRM-83,jtolentino,Ernesto S. Tolentino Jr.,2006-02-22T20:18:20.4Z,2006-02-22T20:18:20.4Z,Issue was unscheduled. Prioritizing issues for alpha-1 release.
MRM-83,brettporter,Brett Porter,2006-09-08T03:34:20.59Z,2006-09-08T03:34:20.59Z,reports were re-architected. We could add different notifiers on to the end of the resolution process later.
MRM-42,oching,Maria Odea Ching,2005-12-16T02:39:18.923Z,2005-12-16T02:39:18.923Z,Attached patch file for discovering repository metadata.
MRM-42,oching,Maria Odea Ching,2005-12-18T20:52:15.695Z,2005-12-18T20:52:15.695Z,Attached patch for discovering repository metadata and some revisions on the DefaultArtifactDiscovererTest and LegacyArtifactDiscovererTest.
MRM-42,elpunzalan,Edwin Punzalan,2005-12-19T01:58:03.848Z,2005-12-19T01:58:03.848Z,Patch applied. Thanks.
MRM-42,oching,Maria Odea Ching,2006-03-01T19:07:41.104Z,2006-03-01T19:07:41.104Z,There was a bug found when integrated with the scheduler and indexer.
MRM-42,oching,Maria Odea Ching,2006-03-01T19:09:27.93Z,2006-03-01T19:09:27.93Z,Attached patch file for the bug found when integrated with scheduler and indexer.
MRM-42,elpunzalan,Edwin Punzalan,2006-03-02T03:24:42.145Z,2006-03-02T03:24:42.145Z,Patch applied. Thanks.
MRM-25,fgiust,fabrizio giustina,2005-11-01T03:01:51.024Z,2005-11-01T03:01:51.024Z,deploy bundle diff
MRM-25,fgiust,fabrizio giustina,2005-11-01T03:02:42.187Z,2005-11-01T03:02:42.187Z,"repoclean diff
m2 site apt diff
m1 site xdoc diff"
MRM-41,jtolentino,Ernesto S. Tolentino Jr.,2005-12-20T05:54:15.499Z,2005-12-20T05:54:15.499Z,Now working on unit tests for this code.
MRM-41,jtolentino,Ernesto S. Tolentino Jr.,2005-12-27T04:38:27.033Z,2005-12-27T04:38:27.033Z,"Found out that AbstractArtifactDiscoverer filters **/*.xml, therefore pom.xml is removed from the list. Also having problems with DirectoryScanner class because it returns a relative path. The FileReader class fails to properly resolve the path of the pom returning a file not found exception. Currently testing code that uses absolute paths."
MRM-41,brettporter,Brett Porter,2005-12-28T06:56:38.692Z,2005-12-28T06:56:38.692Z,"John, why would pom.xml need to be discovered? All poms in the repository are *.pom. By standalone pom, I mean the ones where there is no corresponding JAR, WAR, etc."
MRM-41,jtolentino,Ernesto S. Tolentino Jr.,2005-12-29T01:35:52.742Z,2005-12-29T01:35:52.742Z,I see your point. I confused the repository poms with pom.xml.
MRM-41,brettporter,Brett Porter,2005-12-30T16:41:29.74Z,2005-12-30T16:41:29.74Z,I'll wait for the tests to apply this.
MRM-41,jtolentino,Ernesto S. Tolentino Jr.,2006-01-03T04:56:45.44Z,2006-01-03T04:56:45.44Z,Added sample data and unit test. Unit test properly picks up the correct standalone POMs.
MRM-41,jtolentino,Ernesto S. Tolentino Jr.,2006-01-03T05:15:37.311Z,2006-01-03T05:15:37.311Z,Added more assertions in the unit tests to make sure it's picking up the correct artifact.
MRM-41,jtolentino,Ernesto S. Tolentino Jr.,2006-02-23T04:37:00.201Z,2006-02-23T04:37:00.201Z,Updated code to match new signature of discoverer. Now uses ArtifactRepository instead of File as first parameter for discoverStandalonePoms(). Please only apply the last patch.
MRM-41,elpunzalan,Edwin Punzalan,2006-02-23T19:47:48.663Z,2006-02-23T19:47:48.663Z,Patch applied. Thanks.
MRM-41,jtolentino,Ernesto S. Tolentino Jr.,2006-02-27T01:00:33.319Z,2006-02-27T01:00:33.319Z,Test data which was included in the patch was not applied to committed code. This causes build failure on clean checkout. Please reapply patch.
MRM-41,elpunzalan,Edwin Punzalan,2006-02-27T19:29:52.078Z,2006-02-27T19:29:52.078Z,Committed the missing files. Sorry about that.
MRM-40,brettporter,Brett Porter,2006-07-23T21:56:57.812Z,2006-07-23T21:56:57.812Z,"timestamp checks should also be taken into consideration in this (ie, if the pom of an artifact has changed, the artifact is rediscovered)"
MRM-40,brettporter,Brett Porter,2006-07-23T21:59:16.129Z,2006-07-23T21:59:16.129Z,"consider also the case where a JAR is first discovered, then the POM arrives later or vice-versa (the care that needs to be taken is how the first one is treated if its companion is missing, and how the second operation can make it behave as if they'd been discovered together)"
MRM-40,brettporter,Brett Porter,2006-08-01T23:54:20.278Z,2006-08-01T23:54:20.278Z,"currently, the indexer deals with this in its own way. I'm now considering whether to do this at all, or whether to keep the discovery mechanism simple"
MRM-40,brettporter,Brett Porter,2006-09-04T03:13:14.916Z,2006-09-04T03:13:14.916Z,"while I'm now happy not to do this, I need to do a final review of the index design since it changed recently to ensure that separated discovery of poms and artifacts (esp. if they have a classifier) works correctly."
MRM-40,joakime,Joakim Erdfelt,2007-05-22T14:56:24.53Z,2007-05-22T14:56:24.53Z,"The process for discovery of artifacts is kept intentionally slim in archiva trunk.

All files are treated as artifacts. (pom files included).
So order of upload/deployment is irrelevant.

Artifacts are added to the database.
The browse screen uses the database.

When the database update occurs the pom files are read, resolved, merged, expanded, and saved into the database.

When a user browses into a specific project version, and the database update hasn't occured (yet) on the pom files for that, the database update occurs JIT, making the data available to the user."
MRM-79,brettporter,Brett Porter,2006-02-03T19:54:45.99Z,2006-02-03T19:54:45.99Z,what interface is this other than removal of a lockfile? Shouldn't removal of a lockfile be properly handled by the underlying code?
MRM-79,brettporter,Brett Porter,2006-02-22T01:35:54.01Z,2006-02-22T01:35:54.01Z,ping
MRM-79,brettporter,Brett Porter,2006-07-23T19:31:26.772Z,2006-07-23T19:31:26.772Z,also part of the admin interface
MRM-19,olamy,Olivier Lamy (*$^%`),2012-09-25T16:19:28.564Z,2012-09-25T16:19:28.564Z,maven1 issues can be closed.
MRM-1,jdcasey,John Casey,2005-06-08T15:13:55.671Z,2005-06-08T15:13:55.671Z,"fixed in svn, will deploy very soon."
MRM-45,oching,Maria Odea Ching,2006-01-05T19:48:01.287Z,2006-01-05T19:48:01.287Z,The resolution for this issue is included in the patch file attached to issue MRM-44.
MRM-47,elpunzalan,Edwin Punzalan,2006-01-03T02:16:21.381Z,2006-01-03T02:16:21.381Z,was done with MRM-33
MRM-12,carlos,Carlos Sanchez,2005-07-04T22:35:43.045Z,2005-07-04T22:35:43.045Z,I have copied 2.5.1-final-20040804 to 2.5.1 so it can be used in m2
MRM-12,carlos,Carlos Sanchez,2005-11-04T17:58:00.949Z,2005-11-04T17:58:00.949Z,"Same problem with xpp3
http://www.ibiblio.org/maven2/xpp3/xpp3/1.1.3.4/"
MRM-12,elpunzalan,Edwin Punzalan,2006-06-05T22:49:19.104Z,2006-06-05T22:49:19.104Z,Fixed in SVN
MRM-50,elpunzalan,Edwin Punzalan,2005-12-01T19:38:40.81Z,2005-12-01T19:38:40.81Z,Applied. Thanks!
MRM-31,oching,Maria Odea Ching,2005-11-29T04:09:18.642Z,2005-11-29T04:09:18.642Z,Attached a patch for the reporting api interfaces.
MRM-31,elpunzalan,Edwin Punzalan,2005-11-29T04:23:26.691Z,2005-11-29T04:23:26.691Z,Applied. Thanks!
MRM-74,brettporter,Brett Porter,2006-02-03T19:46:58.223Z,2006-02-03T19:46:58.223Z,how does this differ from MRM-70?
MRM-74,jtolentino,Ernesto S. Tolentino Jr.,2006-02-06T02:14:43.526Z,2006-02-06T02:14:43.526Z,MRM-70 is specific to back-end (java class). MRM-74 is for the web component that links the java code to a web app user interface.
MRM-74,brettporter,Brett Porter,2006-02-06T04:45:53.726Z,2006-02-06T04:45:53.726Z,I believe the java backend already exist (the repository interface).
MRM-74,ngonzalez,Nelson Gonzalez Gonzalez,2006-02-16T18:19:30.813Z,2006-02-16T18:19:30.813Z,added browse functionality
MRM-74,elpunzalan,Edwin Punzalan,2006-02-23T00:54:21.805Z,2006-02-23T00:54:21.805Z,Patch applied. Thanks.
MRM-69,oching,Maria Odea Ching,2006-02-09T00:23:40.57Z,2006-02-09T00:23:40.57Z,"Attached patch file that covers both MRM-68 and MRM-69, which is ""query everything"" search."
MRM-69,elpunzalan,Edwin Punzalan,2006-02-09T02:38:34.46Z,2006-02-09T02:38:34.46Z,Patch applied.  Thanks.
MRM-75,brettporter,Brett Porter,2006-02-03T19:46:22.433Z,2006-02-03T19:46:22.433Z,"what exactly is this? I thought we discussed just having a simple ""flush cache"" button."
MRM-75,jtolentino,Ernesto S. Tolentino Jr.,2006-02-06T04:22:29.045Z,2006-02-06T04:22:29.045Z,"Yes. This is exactly that. A page with a ""flush cache"" button. This issue was created so we won't forget the requirement."
MRM-75,brettporter,Brett Porter,2006-02-06T04:39:41.242Z,2006-02-06T04:39:41.242Z,I think the estimate might need a review then :)
MRM-75,jtolentino,Ernesto S. Tolentino Jr.,2006-02-06T23:27:14.166Z,2006-02-06T23:27:14.166Z,I agree. Forgot that the java code had a seperate jira issue. Adjusted the estimate.
MRM-75,brettporter,Brett Porter,2006-08-01T23:50:58.557Z,2006-08-01T23:50:58.557Z,"I think this requirement was misunderstood. The only cache would be one internal to the webapp caching index information, and that doesn't yet exist."
MRM-80,aramirez,Allan Ramirez,2006-06-07T01:43:01.625Z,2006-06-07T01:43:01.625Z,"Oching, here is my patch. You can also use it for your index maintenance. "
MRM-80,aramirez,Allan Ramirez,2006-06-16T03:15:38.463Z,2006-06-16T03:15:38.463Z,Here is my latest patch.. 
MRM-80,oching,Maria Odea Ching,2006-06-16T04:52:02.352Z,2006-06-16T04:52:02.352Z,Patch applied :) thanks
MRM-14,elpunzalan,Edwin Punzalan,2006-02-22T02:46:30.299Z,2006-02-22T02:46:30.299Z,"I think the original should be retained because there are so many possibilities on how this can be happening.

Then probably add a user triggered event to search the index for all artifacts that depends on a relocated artifact and update them as appropriate."
MRM-6,brettporter,Brett Porter,2005-12-08T22:15:15.316Z,2005-12-08T22:15:15.316Z,also check the pom in the filesystem
MRM-6,oching,Maria Odea Ching,2005-12-13T02:34:43.478Z,2005-12-13T02:34:43.478Z,Attached patch for validating the location of the artifact.
MRM-6,elpunzalan,Edwin Punzalan,2005-12-13T17:56:40.213Z,2005-12-13T17:56:40.213Z,"Patch applied, thanks!"
MRM-84,brettporter,Brett Porter,2006-02-03T19:55:39.307Z,2006-02-03T19:55:39.307Z,what are the basic statistics?
MRM-84,jirareport,Jira Report User,2006-10-03T17:01:21.01Z,2006-10-03T17:01:21.01Z,To start with - support the top-25s and repo statistics at http://www.mavenregistry.com/.
MRM-84,brettporter,Brett Porter,2008-02-15T01:05:37.031Z,2008-02-15T01:05:37.031Z,"The repository statistics screen should contain the following ....

|Type|In Corporate Repo|In Snapshots Repo|Total|
|File Count|#|#|#|
|File Size Totals|#|#|#|
|Project Count|#|#|#|
|Group Id Count|#|#|#|
|Artifact Count|#|#|#|
|Plugin Count|#|#|#|
|Archetype Count|#|#|#|
|Jar Count|#|#|#|
|War Count|#|#|#|"
MRM-84,oching,Maria Odea Ching,2008-05-06T06:13:12.489Z,2008-05-06T06:13:12.489Z,"This could also include:
- the number of downloads of an artifact
- the number of deployments (per artifact/per repository)"
MRM-84,jameswdumay,James William Dumay,2008-05-08T01:42:22.397Z,2008-05-08T01:42:22.397Z,Moving to 1.1.x
MRM-84,oching,Maria Odea Ching,2008-10-01T05:53:57.836Z,2008-10-01T05:53:57.836Z,"Initial commit in trunk -r700729:
- added statistics report in reports UI
- added statistics report generator with tests
- added new fields (totalProjectCount, totalGroupCount, totalArtifactCount and totalSize) to RepositoryContentStatistics table
"
MRM-84,oching,Maria Odea Ching,2008-10-01T06:00:23.1Z,2008-10-01T06:00:23.1Z,"Repository statistics are implemented as follows:
# The statistics can be viewed per repository or as a comparison table.
#* If viewed as a comparison table, the user can choose which repositories to compare.
# UI Design
#* In the Reports section, the user can choose between 2 reports: Repository Statistics and Repository Health
#* The following fields can be configurable for the Repository Statistics:
#** Repository - the user can choose from a list of repositories and add it to a listbox of repositories to be compared. If only one repository is selected, then the report to be generated is not a comparison report.
#** Date Range - the time frame where the statistics will be based. Example, repo stats from Jan 1, 2008 to May 30, 2008.
# The following statistics are included:
#* File count
#* Total Size
#* Project Count (artifactId level)
#* GroupId Count
#* Artifact Count (number of artifacts in the repo)
#* Artifact Count by type
#** Plugin, Archetype, Jar, War, Ear, Dll, Exe, Pom, etc.
#* Number of deployments in the repository
#* Number of downloads from the repository
# Support export as CSV
"
MRM-84,oching,Maria Odea Ching,2008-10-02T02:49:04.874Z,2008-10-02T02:49:04.874Z,"To do:
- include the following in the reports: number of deployments & downloads from repository 
- export as CSV
- fix date picker (it currently appears transparent)
- documentation"
MRM-84,oching,Maria Odea Ching,2008-10-22T02:07:59.828Z,2008-10-22T02:07:59.828Z,"Additional fixes in trunk -r706873:
- export report as CSV
- migrated statistics report to struts 2
- updated date picker 

To do:
- improve UI for choosing the report
- fix problem in the repositories to be compared list boxes (struts 2 issue: selected values are not automatically highlighted, which results to these values not being captured if you don't manually highlight them)
- documentation"
MRM-84,oching,Maria Odea Ching,2008-11-04T11:58:38.308Z,2008-11-04T11:58:38.308Z,Added documentation in trunk -r711330.
MRM-84,oching,Maria Odea Ching,2008-11-04T12:00:52.038Z,2008-11-04T12:00:52.038Z,"Closing issue.. feature is already added in the docs, list boxes already fixed and calendar/date picker has already been fixed by Brett (thanks!)."
MRM-51,jtolentino,Ernesto S. Tolentino Jr.,2005-12-02T00:33:05.673Z,2005-12-02T00:33:05.673Z,There's a bug in the current version of Tortoise SVN create patch. Created a new patch using commandline svn diff.
MRM-51,elpunzalan,Edwin Punzalan,2005-12-02T01:16:55.502Z,2005-12-02T01:16:55.502Z,Applied. Thanks.
MRM-23,brettporter,Brett Porter,2005-11-27T18:08:15.967Z,2005-11-27T18:08:15.967Z,m2 doesn't deal with artifacts without poms very nicely right now. We can use the status instead.
MRM-88,oching,Maria Odea Ching,2006-02-02T19:11:48.084Z,2006-02-02T19:11:48.084Z,The resolution for this issue is included in the patch file attached to issue MRM-44.
MRM-88,brettporter,Brett Porter,2006-02-03T19:58:33.727Z,2006-02-03T19:58:33.727Z,"is this completed then?
"
MRM-88,oching,Maria Odea Ching,2006-02-21T21:42:18.344Z,2006-02-21T21:42:18.344Z,The searcher is already capable of this.
MRM-4,jdcasey,John Casey,2005-06-08T15:39:19.658Z,2005-06-08T15:39:19.658Z,"shouldn't we opt to publish to the m1 repo and let the converter push it across instead of putting in this check? We talked about this at one time on IRC...

One thing: for m2 devs, the lag time involved in this push-and-convert process may be too much...perhaps we need to figure out an easy way to trigger priority conversions when such artifacts are deployed...? Just an idea."
MRM-4,brettporter,Brett Porter,2005-06-08T20:14:54.763Z,2005-06-08T20:14:54.763Z,"I think the proper solution is to publish to m2 and convert back to m1 - but you indicated that would be quite a bit harder as it is currently only design to run over an m1 repo.

I think this is still a bug. Publishing to m1 with no POM should not get rid of valid info in the m2 repo."
MRM-4,trygvis@inamo.no,Trygve Laugstl,2005-06-09T05:04:05.791Z,2005-06-09T05:04:05.791Z,"John: Is is possible to have a process that scans for changed/new artifacts only and processes them? Is so, is this process any less disk intensive (which determines the run time of the process)? "
MRM-4,jdcasey,John Casey,2005-06-09T13:21:36.234Z,2005-06-09T13:21:36.234Z,"check before writing the generated pom to the target file, and ALWAYS attempt to verify/patch the checksums for the target pom."
MRM-907,jameswdumay,James William Dumay,2008-08-12T19:32:11.384Z,2008-08-12T19:32:11.384Z,"Committed in r685399 in https://svn.apache.org/repos/asf/archiva/branches/metadata-rejig-1.2

* Metadata proxy fetching has been refactored from two methods to one single method.
* Artifacts, metadata and resources are now written to a temporary working area. Post download policies are run before the proxied data are put in the repository proper.
* Metadata merging now uses RepositoryMetadataMerge instead of the old updateMetadata methods in MetadataTools.

Still needed:
* Lots of tests for the new metadata merging."
MRM-907,jameswdumay,James William Dumay,2008-08-12T20:49:24.096Z,2008-08-12T20:49:24.096Z,"Committed in r685414 in https://svn.apache.org/repos/asf/archiva/branches/metadata-rejig-1.2

* Fixed failing test in archiva-webdav. Test failed because the artifactId in the maven-metadata.xml is now actually written."
MRM-907,jameswdumay,James William Dumay,2008-09-03T21:37:58.411Z,2008-09-03T21:37:58.411Z,Closing - we now no longer use these object references for metadata merging.
MRM-951,brettporter,Brett Porter,2008-10-12T23:49:04.918Z,2008-10-12T23:49:04.918Z,some patches were recently applied to trunk - it would be worth reviewing if this issue is related and/or fixed by them
MRM-951,jzurbano,jzurbano,2009-02-10T07:08:28.412Z,2009-02-10T07:08:28.412Z,"Patch attached will scan the related artifacts in the directory <groupId>/<artifactId>/<version> during ""Browse"" to index the added artifacts in the filesystem.

In this case, the pom seems not indexed causing the message to be displayed even if it exists in the repository."
MRM-951,brettporter,Brett Porter,2009-03-08T21:24:33.307Z,2009-03-08T21:24:33.307Z,"WRT the bug: it was an error because <exclusion> was missing an artifact ID, not the POM itself. Since we no longer store those it seems, this does not appear in 1.2.

Jevica, I don't understand what this patch is for - it appears to address a different issue to the reporter. Can you clarify?"
MRM-951,brettporter,Brett Porter,2009-03-08T21:32:06.638Z,2009-03-08T21:32:06.638Z,"ok, I was able to reproduce the original by adding a POM with a new ID- it shouldn't have been added to the database in the first place, for some reason it gets partially added"
MRM-951,jzurbano,jzurbano,2009-03-08T22:10:20.521Z,2009-03-08T22:10:20.521Z,"Hi Brett,

The patch was supposed to scan the repo specifically the path to the artifact ([groupId]/[artifactId]/[version]), executing the consumers. This should update the metadata.xml too."
MRM-951,brettporter,Brett Porter,2009-03-08T23:32:15.702Z,2009-03-08T23:32:15.702Z,I don't see how that addresses the error message above. Should this be on a new issue? What scenario would require this to occur?
MRM-951,jzurbano,jzurbano,2009-03-09T00:51:09.474Z,2009-03-09T00:51:09.474Z,"This scans artifacts in the version level that have not yet been scanned (like artifacts added in filesystem, to be seen in Browse). I think this is a different issue. The <exclusion> wasn't dealt with."
MRM-951,brettporter,Brett Porter,2009-03-09T00:58:56.469Z,2009-03-09T00:58:56.469Z,"that should be attached to a new issue - however I'm not sure if the situation warrants that, it could generate a lot of load on the browse pages just validating the directory every time."
MRM-951,brettporter,Brett Porter,2010-02-28T20:58:59.128Z,2010-02-28T20:58:59.128Z,the main problem is resolved by the work on trunk.
MRM-964,jrennell,Justin Rennell,2009-10-02T16:36:37.332Z,2009-10-02T16:36:37.332Z,"This is an issue for using archiva to create an internal copy of outside dependencies as well. For instance I am unable to upload an artifact with the version ""beta1.SP1"" which is the version of the artifact from another repo.

I would be in favor of removing version validation entirely, or perhaps making it a warning instead of an error. That way if a version fails validation, then the user is prompted to accept the version as-is, change it, or cancel the upload entirely."
MRM-964,jrennell,Justin Rennell,2009-10-02T16:38:31.896Z,2009-10-02T16:38:31.896Z,"This issue was fixed in 1.2.1, but I am still unable to upload an artifact with the form ""beta1.SP1"" in 1.2.2."
MRM-964,brettporter,Brett Porter,2011-09-12T08:47:40.64Z,2011-09-12T08:47:40.64Z,still the case in trunk
MRM-945,mbaclay,mbaclay,2008-09-12T02:00:32.331Z,2008-09-12T02:00:32.331Z,"Users that searches for artifacts but doesn't have access on the repository will prompt this message in the app ""You have access to no repositories. Ask your system administrator for access.""

expected result:
You have no access on the repositories. Ask your system administrator for access."
MRM-945,brettporter,Brett Porter,2010-02-23T01:51:40.862Z,2010-02-23T01:51:40.862Z,I think this is fixed already - to test
MRM-945,brettporter,Brett Porter,2010-02-23T04:09:37.43Z,2010-02-23T04:09:37.43Z,"it now says ""You do not have access to any repository. Please contact your system administrator and request for access."""
MRM-956,brettporter,Brett Porter,2008-10-12T23:51:47.915Z,2008-10-12T23:51:47.915Z,"I believe the jndiName property will override them. If you set that to empty, does it work?"
MRM-956,mdelaney,Michael Delaney,2008-10-13T08:25:39.8Z,2008-10-13T08:25:39.8Z,"I assume the jndiName is the item stored in jetty.xml (pasted below). If I remove that then Archiva doesn't even start up, exceptions are thrown.

<!-- ARCHIVA CONFIG -->
<New id=""validation_mail"" class=""org.mortbay.jetty.plus.naming.Resource"">
    <Arg>mail/Session</Arg>
    <Arg>
        <New class=""org.mortbay.naming.factories.MailSessionReference"">
            <Set name=""user""></Set>
            <Set name=""password""></Set>
            <Set name=""properties"">
                <New class=""java.util.Properties"">
                    <Put name=""mail.smtp.host"">localhost</Put>
                </New>
            </Set>
        </New>
    </Arg>
</New>
"
MRM-956,brettporter,Brett Porter,2008-10-14T07:40:55.064Z,2008-10-14T07:40:55.064Z,"actually I meant the jndiName in the security.properties.

Is there a reason you can't use the Jetty mail session configuration?"
MRM-956,brettporter,Brett Porter,2008-11-19T01:16:49.492Z,2008-11-19T01:16:49.492Z,any progress here?
MRM-956,brettporter,Brett Porter,2009-03-05T23:01:22.292Z,2009-03-05T23:01:22.292Z,please reopen if you have some more info.
MRM-949,henryju,Julien HENRY,2009-07-16T03:23:32.797Z,2009-07-16T03:23:32.797Z,"I can confirm this issue is still valid for Archiva 1.2.1.

I had to restart for repository-purge consumer activation being taken into account."
MRM-957,brettporter,Brett Porter,2010-02-23T02:26:36.142Z,2010-02-23T02:26:36.142Z,for testing
MRM-957,brettporter,Brett Porter,2010-02-28T22:54:00.706Z,2010-02-28T22:54:00.706Z,can't reproduce in 1.4
MRM-966,jzurbano,jzurbano,2008-10-03T02:45:33.488Z,2008-10-03T02:45:33.488Z,"Modified Quick Search and added Advanced Search documentation.
Attached updated screen shot of search results.
Added a new screen shot for Advanced Search."
MRM-966,oching,Maria Odea Ching,2008-10-28T22:16:56.049Z,2008-10-28T22:16:56.049Z,"Patch applied to trunk -r708759.
Thanks Jevica!"
MRM-941,brettporter,Brett Porter,2010-02-23T03:16:00.672Z,2010-02-23T03:16:00.672Z,for testing
MRM-941,brettporter,Brett Porter,2010-02-28T23:18:18.907Z,2010-02-28T23:18:18.907Z,"sorry, missed this earlier. It was already fixed in 1.2.2, see linked issue"
MRM-909,oching,Maria Odea Ching,2008-09-09T22:17:47.781Z,2008-09-09T22:17:47.781Z,I think you can also enable the debug in Archiva to verify whether the download went through the proxy. You can do this by setting the log level to DEBUG in WEB-INF/classes/log4j.xml..
MRM-909,oching,Maria Odea Ching,2008-09-11T04:46:36.49Z,2008-09-11T04:46:36.49Z,I wasn't able to replicate this when I tried an Archiva repository to host another internal repo in another Archiva instance (but it just running it for one day). I didn't see it use the network proxy I configured. I'll bump this to the next release for further investigation.
MRM-909,maik,Maik Ebert,2008-10-16T09:24:21.041Z,2008-10-16T09:24:21.041Z,"We also have that problem with our Archiva 1.1.3 installation.

The proxy connector was configured to not use the network proxy, but now two day later the stack trace shows that the proxy is used for this connector."
MRM-909,jaxzin,Brian Jackson,2008-10-16T09:31:31.43Z,2008-10-16T09:31:31.43Z,"We were finally able to resolve this issue by setting the system property ""http.nonProxyHosts"".  http://java.sun.com/j2se/1.4.2/docs/guide/net/properties.html"
MRM-909,maik,Maik Ebert,2008-10-16T09:35:14.231Z,2008-10-16T09:35:14.231Z,"Okay, but this is not a *real* solution, isn't it?"
MRM-909,jaxzin,Brian Jackson,2008-10-16T10:04:58.858Z,2008-10-16T10:04:58.858Z,"No its not.  I was just sharing a workaround with you.  For almost a year now, I've tried to help Maria and Brett reproduce this issue and they haven't been able too.  Until they can reproduce it, they can't fix it.  "
MRM-909,deki,Dennis Kieselhorst,2008-12-11T04:20:09.115Z,2008-12-11T04:20:09.115Z,We're also suffering from this issue (using Archiva 1.1.3).
MRM-909,brettporter,Brett Porter,2011-09-12T11:46:10.407Z,2011-09-12T11:46:10.407Z,should be fixed by the wagon upgrade
MRM-938,brettporter,Brett Porter,2009-03-06T10:16:47.09Z,2009-03-06T10:16:47.09Z,I can't find the way to do virtual guests yet
MRM-938,brettporter,Brett Porter,2009-03-09T08:21:26.438Z,2009-03-09T08:21:26.438Z,"tasks left:
- remove ArchivaXworkUser
- remove all references to hardcoded guest user and replace with calls to UserManager.getGuestUser()"
MRM-938,evenisse,Emmanuel Venisse,2009-03-11T01:12:41.691Z,2009-03-11T01:12:41.691Z,Done in r.752384
MRM-924,wsmoak,Wendy Smoak,2008-08-25T18:50:55.835Z,2008-08-25T18:50:55.835Z,"I'm not sure we currently store that information anywhere that would allow us to display it later, but the audit log should have it."
MRM-915,canders,Chris Anders,2008-08-25T22:53:43.613Z,2008-08-25T22:53:43.613Z,"i get a similar NPE after setting up AD (LDAP) authentication when a user who is yet to login clicks on browse or attempts a search.

Aug 26, 2008 2:21:02 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet default threw exception
java.lang.NullPointerException
        at org.apache.maven.archiva.security.DefaultUserRepositories.getObservableRepositoryIds(DefaultUserRepositories.java:76)
        at org.apache.maven.archiva.web.action.BrowseAction.getObservableRepos(BrowseAction.java:131)
        at org.apache.maven.archiva.web.action.BrowseAction.browse(BrowseAction.java:65)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)

in security.properties i have defined 
redback.default.guest=archiva

This user exists in our LDAP as i can click login and login with this archiva user credentials."
MRM-915,oching,Maria Odea Ching,2008-09-01T02:28:43.384Z,2008-09-01T02:28:43.384Z,"I can't seem to replicate the NPE, but I'm getting a blank browse page even if I have assigned the 'guest' user the Global Repository Observer role. I get the same blank page in browse even if I'm logged in as admin. I can perform a search though except when I click on a search result, I get an 'Unable to find project model for [org.apache.maven.plugins:maven-clean-plugin:2.2]' error but not NPE.

I have the following configuration in my security.properties:

user.manager.impl=ldap
ldap.user.store.enabled=true
ldap.bind.authenticator.enabled=true
redback.default.admin=admin
redback.default.guest=guest

security.policy.password.expiration.enabled=false
ldap.config.hostname=localhost
ldap.config.port=10389
ldap.config.base.dn=dc=redback,dc=plexus,dc=codehaus,dc=org
ldap.config.context.factory=com.sun.jndi.ldap.LdapCtxFactory
ldap.config.bind.dn=uid=admin,ou=system
ldap.config.password=XXXXX

Do we have the same configuration? Btw, I'm using ApacheDS and running on Linux 7.04. "
MRM-915,canders,Chris Anders,2008-09-01T02:42:04.668Z,2008-09-01T02:42:04.668Z,"I only get this exception when i am not logged in and attempt to browse or run a search

Server - FreeBSD 6.3-STABLE
java version - diablo-1.5.0_07-b01, mixed mode
tomcat version - tomcat-5.5.26

running the archiva 1.1.1 war package on a default tomcat install with the dependency jars - mail.jar, activation.jar, derby.jar (as per the install docs)

security.properties file:
user.manager.impl=ldap
ldap.user.store.enabled=true
ldap.bind.authenticator.enabled=true
redback.default.admin=canders
redback.default.guest=tuser
security.policy.password.expiration.enabled=false

ldap.config.hostname=10.66.5.7
ldap.config.port=389
ldap.config.base.dn=OU=Users,OU=Velocity,DC=velsys,DC=local
ldap.config.context.factory=com.sun.jndi.ldap.LdapCtxFactory
ldap.config.bind.dn=cn=Predator,cn=Users,dc=velsys,dc=local
ldap.config.password=xxxxxxxxxxxxxxx
ldap.config.mapper.attribute.email=mail
ldap.config.mapper.attribute.fullname=name
ldap.config.mapper.attribute.user.id=mailNickname
ldap.config.mapper.attribute.user.object.class=user
"
MRM-915,oching,Maria Odea Ching,2008-09-01T02:49:44.358Z,2008-09-01T02:49:44.358Z,"Hmm... I wasn't logged in too when I tried the to search & browse, but instead of the NPE I got the 'Unable to find project model...' error when I tried to access a search result and a blank browse page when I clicked on Browse. I was running the standalone though, I'll try deploying the war to tomcat and see if I'll get the NPEs.

Thanks for the quick reply Chris!"
MRM-915,evenisse,Emmanuel Venisse,2008-09-01T03:00:57.566Z,2008-09-01T03:00:57.566Z,"I don't use ldap for user.manager.impl, but cached. I don't think the problem is there.

To reproduce this issue, I think you must not use 'guest' for redback.default.guest property

My security.properties:
user.manager.impl=cached
ldap.bind.authenticator.enabled=true
redback.default.admin=adminuser
redback.default.guest=guestuser
security.policy.password.expiration.enabled=false

ldap.config.hostname=ldap_host
ldap.config.port=389
ldap.config.base.dn=o=MyBaseDN
ldap.config.context.factory=com.sun.jndi.ldap.LdapCtxFactory

ldap.config.mapper.attribute.email=mail
ldap.config.mapper.attribute.fullname=cn
#ldap.config.mapper.attribute.password=userPassword
ldap.config.mapper.attribute.user.id=uid
#ldap.config.mapper.attribute.user.base.dn=
ldap.config.mapper.attribute.user.object.class=inetOrgPerson
#ldap.config.mapper.attribute.user.filter=(attributeName=value)"
MRM-915,oching,Maria Odea Ching,2008-09-01T03:14:55.98Z,2008-09-01T03:14:55.98Z,"Ahh.. ok, I'll try that. Thanks Emm! :)"
MRM-915,oching,Maria Odea Ching,2008-09-01T03:50:49.64Z,2008-09-01T03:50:49.64Z,"Hmm.. I still did not get the NPE after using a different default guest and admin users. Instead, I got a 'You have access to no repositories. Ask your system administrator for access.' message when I clicked Browse even though my default guest user 'anotherGuest' has Global Repository Observer role.

Anyway, I think the problem is in the ArchivaXworkUser which uses a constant ""guest"" for the default guest account. It doesn't get it from the security.properties file."
MRM-915,canders,Chris Anders,2008-09-01T04:15:06.967Z,2008-09-01T04:15:06.967Z,"I can confirm that when i set the redback.default.guest=guest and create a guest user in my OU defined in ldap.config.base.dn=OU=Users,OU=Velocity,DC=velsys,DC=local that I now get 'You have access to no repositories. Ask your system administrator for access.

So i then logged in gave the new guest user the Global Repository Observer role, logged out and now browse and running searchs works!!!

Looks like you are correct with the constant ""guest"" being set somewhere in the code :)

good stuff :D"
MRM-915,oching,Maria Odea Ching,2008-09-03T06:49:25.628Z,2008-09-03T06:49:25.628Z,"I made some fixes in trunk -r691581. Could you verify if the NPE problem was fixed too? I still wasn't able to replicate the NPE previously, just the 'You have access to no repositories...' message given the guest user has Global Observer role so I was only able to verify that as fixed. 

Thanks! :) "
MRM-908,brettporter,Brett Porter,2010-02-23T02:08:20.497Z,2010-02-23T02:08:20.497Z,"for testing, related to the issue recently closed not to rewrite UTF8 files"
MRM-908,brettporter,Brett Porter,2010-02-23T05:02:29.653Z,2010-02-23T05:02:29.653Z,looks to be working in 1.4
MRM-985,oching,Maria Odea Ching,2008-10-23T21:57:22.427Z,2008-10-23T21:57:22.427Z,Changing summary from 'Add option to exclude dependencies in quick search' to 'Document usage of boolean NOT in quick search'. Turns out dependencies can already be excluded using boolean NOT :)
MRM-985,oching,Maria Odea Ching,2008-10-28T21:49:19.173Z,2008-10-28T21:49:19.173Z,"Added/updated the ff. in -r708752:
- included boolean NOT search in search hints
- changed search hints to appear only when toggled (used jquery)"
MRM-984,wsmoak,Wendy Smoak,2008-10-24T16:28:09.35Z,2008-10-24T16:28:09.35Z,"Related thread that prompted this feature request:  http://www.nabble.com/What-is-the-purpose-of-%3CfinalName%3E--really--td20132945.html

(Actually the user wants to download the file *without* the version number in the filename, which isn't what I'm suggesting here.)"
MRM-934,oching,Maria Odea Ching,2008-09-04T06:19:58.04Z,2008-09-04T06:19:58.04Z,"Fixed in -r691966 1.1.x branch:
- added version in the key of the search result hit
"
MRM-914,brettporter,Brett Porter,2010-02-23T01:43:11.528Z,2010-02-23T01:43:11.528Z,superceded
MRM-912,jmluy,John Michael Luy,2008-09-11T04:17:20.412Z,2008-09-11T04:17:20.412Z,Attached patch
MRM-912,oching,Maria Odea Ching,2008-09-11T17:22:55.35Z,2008-09-11T17:22:55.35Z,"Thanks for the patch JM! :)
Patch applied in -r694516 1.1.x branch."
MRM-917,brettporter,Brett Porter,2008-08-20T07:31:12.977Z,2008-08-20T07:31:12.977Z,we don't change these in historical releases - the issue is fixed in 1.1.1
MRM-917,rocko,Rocko,2008-08-20T08:23:12.917Z,2008-08-20T08:23:12.917Z,"Sorry for referencing the old release.
Nevertheless, the with the current release 1.1.1 it is still not working:

try  http://archiva.apache.org/docs/1.1.1
this links to http://archiva.apache.org/docs/1.1.1/docs/1.1.1
"
MRM-917,brettporter,Brett Porter,2008-08-20T08:29:33.811Z,2008-08-20T08:29:33.811Z,thanks - actually I do still have an open issue for that one.
MRM-916,brettporter,Brett Porter,2010-02-23T02:11:23.276Z,2010-02-23T02:11:23.276Z,for testing
MRM-916,brettporter,Brett Porter,2010-02-28T21:35:43.306Z,2010-02-28T21:35:43.306Z,"Slide has been retired, so I don't think we need to support it. Hopefully someone will do Jackrabbit davclient based ant tasks.

As for the Windows issue, there are other open issue for that and there isn't enough detail to go on here."
MRM-988,jameswdumay,James William Dumay,2008-10-26T22:54:59.399Z,2008-10-26T22:54:59.399Z,Committed in r708082
MRM-971,oching,Maria Odea Ching,2008-10-15T22:08:13.776Z,2008-10-15T22:08:13.776Z,"I think the cause of this is that the execution of the repo task & database task overlapped. There's a consumer set during repo scan which indexes the artifact and then there's also the index-public-methods consumer (for indexing java packages and public classes/methods) which is configured to be executed during db scan. 

I'm thinking if moving the index-public-methods consumer to the repo scanning phase would solve this problem.."
MRM-971,brettporter,Brett Porter,2009-03-15T22:49:08.001Z,2009-03-15T22:49:08.001Z,superceded by a newer implementation in 1.2
MRM-958,brettporter,Brett Porter,2010-02-23T03:17:55.429Z,2010-02-23T03:17:55.429Z,or Mockito?
MRM-958,brettporter,Brett Porter,2010-03-17T23:25:51.575Z,2010-03-17T23:25:51.575Z,Having used Mockito in some of the more recent tests I think it's best we move towards that.
MRM-999,mccloud,Duncan Doyle,2008-11-20T10:12:36.187Z,2008-11-20T10:12:36.187Z,"I've got the same problem with Archiva 1.1.3. 

Another strange issue, which is probably related to this one, is that purged snapshots (I only keep 2 of them) are still returned when doing a 'search' (they are not present on the filesystem), but are not visible when browsing the repository (which is expected). The files I've removed myself (via the filesystem) however are still visible both when searching and browsing, even after scanning the repository and updating the database.

The cron scheduled database-job doesn't clean the repository either by the way.

"
MRM-999,cybik,Renaud Lepage,2009-02-03T14:33:38.677Z,2009-02-03T14:33:38.677Z,"On 1.1.3, java6

I will add that this seems like a non-issue on Windows. As soon as Update Databases is invoked, the deleted packages disappear. Tested with only one package, but you get the idea."
MRM-999,mpasteur,Marc Pasteur,2009-05-25T04:00:12.173Z,2009-05-25T04:00:12.173Z,"on my 1.1.3 version (linux) i had to deactivate consumers for ""Database - Unprocessed Artifacts Scanning"".
when i did that the database update was able to clean deleted entries

hope it can help you to correct this."
MRM-999,brettporter,Brett Porter,2010-02-23T02:18:50.454Z,2010-02-23T02:18:50.454Z,this needs to be ported to the metadata content repository in 1.4
MRM-999,brettporter,Brett Porter,2010-02-23T02:21:24.638Z,2010-02-23T02:21:24.638Z,"what we want here:
- an event triggered when something in the system (eg webdav) deletes, or detects the deletion of, a file
- behaviour for handling out related files should be deleted (or if we rely on whatever is deleting to do it as well)
- clean up of metadata associated with the file

Remember the use cases
- if the content is on a separate server to the metadata

we need to add a new scanning service for doing these kind of ""repairs"", if it is done outside the web application, though for now we can attach it to the end of the main repository scan"
MRM-999,brettporter,Brett Porter,2010-03-01T03:07:09.702Z,2010-03-01T03:07:09.702Z,"Note that we may need to check the content model for other artifact references, not just the main tree - reports, references, etc. It may be acceptable to just do deletions from the main tree and then farm it out to a listener, and have separate clean up tasks where a plugin can check the integrity of its content and clean up"
MRM-999,olamy,Olivier Lamy (*$^%`),2012-09-05T09:15:26.773Z,2012-09-05T09:15:26.773Z,fixed moving to jcr/file
MRM-933,brettporter,Brett Porter,2008-09-13T21:36:45.351Z,2008-09-13T21:36:45.351Z,what did you search for to encounter that?
MRM-933,gautencio,Gwen Harold Autencio,2009-01-20T01:59:42.171Z,2009-01-20T01:59:42.171Z,"Set rowcount to 150.
page 1: Hits 1 to 150 of 194 --> correct.
page 2: Hits 45 to 194 of 194 --> incorrect .. It should be 151 to 194 of 194.
Attached screenshot."
MRM-933,gautencio,Gwen Harold Autencio,2009-01-23T02:44:32.314Z,2009-01-23T02:44:32.314Z,"Hi, attached patch for fix of this issue.
As I checked http://jira.codehaus.org/browse/MRM-1037 will improve Archiva search.
Hope this can help if not much changes done in results.jsp file..Thanks.."
MRM-933,oching,Maria Odea Ching,2009-02-03T20:20:49.314Z,2009-02-03T20:20:49.314Z,"Initial fix in trunk -r740576:
- set the search result limits in the returned search results"
MRM-933,oching,Maria Odea Ching,2009-02-03T20:33:14.589Z,2009-02-03T20:33:14.589Z,"Applied some parts of the patch submitted by Gwen in trunk -r740580. 
Thanks for the patch :)"
MRM-960,brettporter,Brett Porter,2008-10-12T23:57:55.099Z,2008-10-12T23:57:55.099Z,"I believe we've had this report before but were unable to reproduce it. Do you have a copy of your config files, and do you have one in both the standalone and ~/.m2/archiva.xml?"
MRM-960,mdelaney,Michael Delaney,2008-10-13T07:59:18.387Z,2008-10-13T07:59:18.387Z,"Bret,

I didn't have a configuration file in ~/.m2/*, in fact the directory ~/.m2 doesn't exist on the machine in question.

All updated configuration files (archiva.xml & security.properties) have been included in the attached tar gzip file. "
MRM-986,wsmoak,Wendy Smoak,2008-10-24T23:57:55.342Z,2008-10-24T23:57:55.342Z,"To reproduce...

1. Confirm that no archiva.xml exists:

$ ls /Applications/apache-archiva-1.1.3/conf/archiva.xml
ls: /Applications/apache-archiva-1.1.3/conf/archiva.xml: No such file or directory

$ ls ~/.m2/archiva.xml
ls: /Users/wsmoak/.m2/archiva.xml: No such file or directory

2. Start Archiva

3. Add a repository through the web interface so it will have some new configuration to save 

4. Stop Archiva

5. Check where archiva.xml was written:

$ ls /Applications/apache-archiva-1.1.3/conf/archiva.xml
ls: /Applications/apache-archiva-1.1.3/conf/archiva.xml: No such file or directory

$ ls ~/.m2/archiva.xml
/Users/wsmoak/.m2/archiva.xml

Result: 

The archiva.xml file was written to ~/.m2/ when it should be in conf.
"
MRM-986,brettporter,Brett Porter,2008-10-25T01:17:05.653Z,2008-10-25T01:17:05.653Z,"I think the docs are wrong. The behaviour is as expected, but I Think if $ARCHIVA_BASE/conf exists, then that will be written to instead."
MRM-942,brettporter,Brett Porter,2010-02-23T03:16:32.928Z,2010-02-23T03:16:32.928Z,"no more database job, but see if still an issue for other scanning"
MRM-942,brettporter,Brett Porter,2010-02-28T23:35:22.572Z,2010-02-28T23:35:22.572Z,"has been resolved in an earlier version, as can be seen in TriggerBeginScanClosure and ConsumerProcessFileClosure"
MRM-927,olamy,Olivier Lamy (*$^%`),2011-10-27T16:01:54.149Z,2011-10-27T16:01:54.149Z,"not enough details.
Transport tru proxy has been improved in 1.4-M1.
Reopen if still issues."
MRM-991,oching,Maria Odea Ching,2009-03-20T11:50:48.531Z,2009-03-20T11:50:48.531Z,"Already updated the following screen shots in trunk -r756613:
- find artifact
- repository statistics report
- repository health

The following screenshots still need to be updated:
- feature tour
- screen shots for feature tour in main site"
MRM-991,oching,Maria Odea Ching,2009-03-20T12:27:33.16Z,2009-03-20T12:27:33.16Z,Feature tour screenshots updated in archiva-docs and archiva-site in trunk -r756656 and -r756664 respectively.
MRM-921,brettporter,Brett Porter,2009-03-11T20:18:51.37Z,2009-03-11T20:18:51.37Z,fixed for clean database. Need to make sure that the permission is updated on upgrade
MRM-976,axismundi,Marc Lustig,2009-10-13T09:37:06.01Z,2009-10-13T09:37:06.01Z,"http://cwiki.apache.org/confluence/display/ARCHIVA/Event+Framework
http://jira.codehaus.org/browse/MRM-976
http://svn.apache.org/viewvc/archiva/branches/MRM-976/branch-working-notes.txt?revision=706263&view=markup"
MRM-976,brettporter,Brett Porter,2009-10-13T10:33:22.775Z,2009-10-13T10:33:22.775Z,see also the event package in the repository-layer module for the most basic of starting points
MRM-976,axismundi,Marc Lustig,2009-10-16T08:07:08.555Z,2009-10-16T08:07:08.555Z,"hi Brett, do you think it makes sense to continue working on that branch (http://svn.apache.org/repos/asf/archiva/branches/MRM-976) even thou it was created a year ago?
I'm afraid the final merge will be a mess.

Wouldn't it be easier to create a new branch from current trunk and move the work that you have already done there? 

Til then, let me try to understand what you have done there already..."
MRM-976,brettporter,Brett Porter,2009-10-16T08:21:10.453Z,2009-10-16T08:21:10.453Z,"this wasn't actually my work, I just rebased it to trunk a year ago :)

it's just a small commit: http://svn.apache.org/viewvc?view=revision&revision=706263

So, I'd say if you'd like to work on it, you can take or leave what is there. I'll move the notes over to the branch they belonged to, which is MRM-1025."
MRM-981,oching,Maria Odea Ching,2008-10-23T01:33:56.221Z,2008-10-23T01:33:56.221Z,Fixed in trunk -r707291.
MRM-935,aaron,Aaron Hamid,2008-10-07T11:58:23.269Z,2008-10-07T11:58:23.269Z,"Bit me too.  mvn deploy works, but you can't get the artifact back out of the repo, and ""Search"" function can't find it."
MRM-935,aaron,Aaron Hamid,2009-04-21T12:28:54.133Z,2009-04-21T12:28:54.133Z,"I thought we had somehow worked around this by setting uniqueVersion=false in our POMs but today I couldn't deploy a SNAPSHOT, so maybe we didn't fix it after all.  The exception is different than the one above:

2009-04-21 13:24:57,851 [btpool0-4896] ERROR org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure  - Consumer [metadata-updater] had a
n error when processing file [/sf_storage/archiva-home/data/repositories/snapshots/edu/cornell/cynergy/cynergy-customizations/SNAPSHOT/cynergy-customizations-SNA
PSHOT.jar]: String index out of range: -1
java.lang.StringIndexOutOfBoundsException: String index out of range: -1
        at java.lang.String.substring(String.java:1938)
        at org.apache.maven.archiva.repository.metadata.MetadataTools.gatherSnapshotVersions(MetadataTools.java:148)
        at org.apache.maven.archiva.repository.metadata.MetadataTools.updateMetadata(MetadataTools.java:629)
        at org.apache.maven.archiva.consumers.core.MetadataUpdaterConsumer.updateVersionMetadata(MetadataUpdaterConsumer.java:241)
        at org.apache.maven.archiva.consumers.core.MetadataUpdaterConsumer.processFile(MetadataUpdaterConsumer.java:167)
        at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:51)
        at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
        at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
        at org.apache.maven.archiva.repository.scanner.RepositoryContentConsumers.executeConsumers(RepositoryContentConsumers.java:284)
        at org.apache.maven.archiva.webdav.ArchivaDavResource.addMember(ArchivaDavResource.java:309)
        at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.doPut(AbstractWebdavServlet.java:503)
        at org.apache.jackrabbit.webdav.server.AbstractWebdavServlet.execute(AbstractWebdavServlet.java:240)
        at org.apache.maven.archiva.webdav.RepositoryServlet.service(RepositoryServlet.java:126)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1093)
        at com.opensymphony.webwork.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:189)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:39)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at com.opensymphony.webwork.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:88)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)


We are running 1.1.2"
MRM-935,aaron,Aaron Hamid,2009-04-21T12:41:03.842Z,2009-04-21T12:41:03.842Z,"It looks like these are the lines in MetadataTools.gatherSnapshotVersions causing the above exception:

String baseVersion = VersionUtil.getBaseVersion( reference.getVersion() );
baseVersion = baseVersion.substring( 0, baseVersion.indexOf( VersionUtil.SNAPSHOT ) - 1 );

if the indexOf returns 0, which I assume it will when the version is just ""SNAPSHOT"" (although I have to say I'm not really sure what the various getXXXVersion() methods are really doing), then this will clearly lead to the index out of bounds.  If this is indeed a legitimate scenario, then the above code just needs to handle that case (e.g. set baseVersion to the empty string, """").  It appears that the baseVersion is only thereafter used if there is a timestamp on the snapshot to reconstruct a version string (in which case the string will be created incorrectly if the baseVersion is empty).  Presumably this code would not get invoked if unique snapshots are off.  I assume that it would be desirable to fix that case (timestamped ""SNAPSHOT"" versions) as well."
MRM-935,brettporter,Brett Porter,2010-02-23T03:15:12.166Z,2010-02-23T03:15:12.166Z,for testing
MRM-935,jnhagelb,Jeffrey Hagelberg,2014-07-02T13:56:09.603Z,2014-07-02T13:56:09.603Z,I wonder if this is related to http://jira.codehaus.org/browse/MRM-1849
MRM-903,oching,Maria Odea Ching,2008-08-19T01:17:51.565Z,2008-08-19T01:17:51.565Z,"I can't seem to replicate this issue.. The repo scanning still went ahead even when an error was encountered. Here are the logs:

2008-08-19 14:00:00,228 [pool-2-thread-1] INFO  org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance  - Walk Started: [internal] /home/deng/TestFiles/internal
2008-08-19 14:00:00,228 [pool-2-thread-1] INFO  org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance  - Walk Started: [internal] /home/deng/TestFiles/internal
2008-08-19 14:00:03,311 [pool-2-thread-1] ERROR org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure  - Consumer [repository-purge] had an error when processing file [/home/deng/TestFiles/internal/com/fortinet/fortinet/5/5.rip/fortinet-5.pom]: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
org.apache.maven.archiva.consumers.ConsumerException: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
	at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:190)
	at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:51)
	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:137)
	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:174)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:392)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:345)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:122)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:66)
	at org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:111)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:595)
Caused by: org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeException: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
	at org.apache.maven.archiva.consumers.core.repository.DaysOldRepositoryPurge.process(DaysOldRepositoryPurge.java:143)
	at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:186)
	... 21 more
Caused by: org.apache.maven.archiva.repository.layout.LayoutException: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
	at org.apache.maven.archiva.repository.content.DefaultPathParser.toArtifactReference(DefaultPathParser.java:114)
	at org.apache.maven.archiva.repository.content.AbstractDefaultRepositoryContent.toArtifactReference(AbstractDefaultRepositoryContent.java:51)
	at org.apache.maven.archiva.repository.content.ManagedDefaultRepositoryContent.toArtifactReference(ManagedDefaultRepositoryContent.java:323)
	at org.apache.maven.archiva.consumers.core.repository.DaysOldRepositoryPurge.process(DaysOldRepositoryPurge.java:81)
	... 22 more
2008-08-19 14:00:03,311 [pool-2-thread-1] ERROR org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure  - Consumer [repository-purge] had an error when processing file [/home/deng/TestFiles/internal/com/fortinet/fortinet/5/5.rip/fortinet-5.pom]: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
org.apache.maven.archiva.consumers.ConsumerException: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
	at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:190)
	at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:51)
	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:137)
	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:174)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:392)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:345)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:122)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:66)
	at org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:111)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:595)
Caused by: org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeException: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
	at org.apache.maven.archiva.consumers.core.repository.DaysOldRepositoryPurge.process(DaysOldRepositoryPurge.java:143)
	at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:186)
	... 21 more
Caused by: org.apache.maven.archiva.repository.layout.LayoutException: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
	at org.apache.maven.archiva.repository.content.DefaultPathParser.toArtifactReference(DefaultPathParser.java:114)
	at org.apache.maven.archiva.repository.content.AbstractDefaultRepositoryContent.toArtifactReference(AbstractDefaultRepositoryContent.java:51)
	at org.apache.maven.archiva.repository.content.ManagedDefaultRepositoryContent.toArtifactReference(ManagedDefaultRepositoryContent.java:323)
	at org.apache.maven.archiva.consumers.core.repository.DaysOldRepositoryPurge.process(DaysOldRepositoryPurge.java:81)
	... 22 more
2008-08-19 14:00:06,925 [pool-2-thread-1] ERROR org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure  - Consumer [metadata-updater] had an error when processing file [/home/deng/TestFiles/internal/com/fortinet/fortinet/5/5.rip/fortinet-5.pom]: Unable to convert to artifact reference: com/fortinet/fortinet/5/5.rip/fortinet-5.pom
org.apache.maven.archiva.consumers.ConsumerException: Unable to convert to artifact reference: com/fortinet/fortinet/5/5.rip/fortinet-5.pom
	at org.apache.maven.archiva.consumers.core.MetadataUpdaterConsumer.processFile(MetadataUpdaterConsumer.java:172)
	at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:51)
	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:137)
	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:174)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:392)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:345)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:122)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:66)
	at org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:111)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:595)
Caused by: org.apache.maven.archiva.repository.layout.LayoutException: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
	at org.apache.maven.archiva.repository.content.DefaultPathParser.toArtifactReference(DefaultPathParser.java:114)
	at org.apache.maven.archiva.repository.content.AbstractDefaultRepositoryContent.toArtifactReference(AbstractDefaultRepositoryContent.java:51)
	at org.apache.maven.archiva.repository.content.ManagedDefaultRepositoryContent.toArtifactReference(ManagedDefaultRepositoryContent.java:323)
	at org.apache.maven.archiva.consumers.core.MetadataUpdaterConsumer.processFile(MetadataUpdaterConsumer.java:166)
	... 21 more
2008-08-19 14:00:06,925 [pool-2-thread-1] ERROR org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure  - Consumer [metadata-updater] had an error when processing file [/home/deng/TestFiles/internal/com/fortinet/fortinet/5/5.rip/fortinet-5.pom]: Unable to convert to artifact reference: com/fortinet/fortinet/5/5.rip/fortinet-5.pom
org.apache.maven.archiva.consumers.ConsumerException: Unable to convert to artifact reference: com/fortinet/fortinet/5/5.rip/fortinet-5.pom
	at org.apache.maven.archiva.consumers.core.MetadataUpdaterConsumer.processFile(MetadataUpdaterConsumer.java:172)
	at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:51)
	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:137)
	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:174)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:392)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386)
	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:345)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:122)
	at org.apache.maven.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:66)
	at org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:111)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:595)
Caused by: org.apache.maven.archiva.repository.layout.LayoutException: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
	at org.apache.maven.archiva.repository.content.DefaultPathParser.toArtifactReference(DefaultPathParser.java:114)
	at org.apache.maven.archiva.repository.content.AbstractDefaultRepositoryContent.toArtifactReference(AbstractDefaultRepositoryContent.java:51)
	at org.apache.maven.archiva.repository.content.ManagedDefaultRepositoryContent.toArtifactReference(ManagedDefaultRepositoryContent.java:323)
	at org.apache.maven.archiva.consumers.core.MetadataUpdaterConsumer.processFile(MetadataUpdaterConsumer.java:166)
	... 21 more
2008-08-19 14:00:07,006 [pool-2-thread-1] INFO  org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance  - Walk Finished: [internal] /home/deng/TestFiles/internal
2008-08-19 14:00:07,006 [pool-2-thread-1] INFO  org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance  - Walk Finished: [internal] /home/deng/TestFiles/internal
2008-08-19 14:00:07,009 [pool-2-thread-1] INFO  org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor  - Finished repository task: 
.\ Scan of internal \.__________________________________________
  Repository Dir    : /home/deng/TestFiles/internal
  Repository Name   : Archiva Managed Internal Repository
  Repository Layout : default
  Known Consumers   : (7 configured)
                      create-missing-checksums
                      update-db-artifact
                      repository-purge
                      index-content
                      metadata-updater
                      auto-rename
                      auto-remove
  Invalid Consumers : <none>
  Duration          : 6 Seconds 778 Milliseconds
  When Gathered     : 8/19/08 2:00 PM
  Total File Count  : 1255
  Avg Time Per File : 5 Milliseconds
______________________________________________________________
"
MRM-930,wsmoak,Wendy Smoak,2008-08-30T00:29:51.084Z,2008-08-30T00:29:51.084Z,This might be a documentation issue... the purge feature only applies to snapshots.
MRM-930,brettporter,Brett Porter,2008-08-30T00:36:24.351Z,2008-08-30T00:36:24.351Z,"it should be noted that releases are never purged.

The problem is not per-repository purge settings (which we have), but the ability to configure different consumers per repository, and to have a default set for those that aren't unique."
MRM-930,ejciramella,EJ Ciramella,2008-08-30T10:51:12.826Z,2008-08-30T10:51:12.826Z,"Brett's right, but I can't pass on Wendy's comment.

How does Archiva determine a snapshot?  Is it because it has found a ""SNAPSHOT"" in the path leading up to an artifact?  Is it because the pom for that artifact has ""1.0-SNAPSHOT"" listed as its version?

We've bent the rules here a bit and the answer will effect how purging is looked at."
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-14T11:41:55.091Z,2010-06-14T11:41:55.091Z,SourceArtifact class is responsible for retuning artifact metadata to the caller of a given repo id to the caller. here we can get the artifact meta data of the source artifacts in the repository that we are going to merge. caller has to first get the Artifacts object list and then parse artifacts to get the Artifact metadata  list
MRM-980,oching,Maria Odea Ching,2010-06-16T21:33:58.943Z,2010-06-16T21:33:58.943Z,"Proposal for this is in:

https://cwiki.apache.org/confluence/display/ARCHIVA/Staging+Repository+Merge"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-18T21:26:08.973Z,2010-06-18T21:26:08.973Z,ongoing stage-repo-merging module 
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-18T21:32:43.267Z,2010-06-18T21:32:43.267Z,path for stage repo merge 
MRM-980,oching,Maria Odea Ching,2010-06-18T22:33:30.527Z,2010-06-18T22:33:30.527Z,"Comments on the patch:
* the log4j.xml config in src/main/resources can already be removed, just use sl4fj logger for logging instead
* remove dependency to archiva-xmlrpc-api, you shouldn't be using the Artifact class in that module since it's specifically for web services only. I think you should use the new repository API instead.
* remove the commented out dependencies in the stage-repository-merge module
* apply codestyle"
MRM-980,oching,Maria Odea Ching,2010-06-18T22:48:43.303Z,2010-06-18T22:48:43.303Z,"For the SourceArtifactTest, extend PlexusInSpringTestCase instead of JUnit's TestCase so you can lookup the components. You also need to lookup the components you're using that's why you're getting the NPE when running the tests. See DependencyTreeBuilderTest as an example."
MRM-980,oching,Maria Odea Ching,2010-06-19T00:29:32.496Z,2010-06-19T00:29:32.496Z,"Also, the test() method in SourceArtifactsTest class is wrong. It should be as follows:

{code}
  metadataResolverControl.expectAndReturn( metadataResolver.getRootNamespaces(TEST_REPO_ID), (ArrayList<Artifact>)getRootNameSpace() );     
  // put the rest of the expected calls to metadataResolver here

  metadataResolverControl.replay();
  
  sa.getSourceArtifactList();

  metadataResolverControl.verify();
{code}"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-19T02:21:32.6Z,2010-06-19T02:21:32.6Z,"patch with the test fixed test cases. here i have hard coded some values  in the SourceArtifacts class.
when i creating ArchivaArtifact object.(classifier and the type). "
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-19T08:31:00.851Z,2010-06-19T08:31:00.851Z,here i have commented out one line in SourceArtifacts class  when it uses facet to get classifier and the type. Still could not figure out the issue. sorry for attaching a patch which is not passing the test cases.  
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-19T19:40:50.09Z,2010-06-19T19:40:50.09Z,here i ckecked the condition for the facet like wise in ShowArtifactAction class. now the test cases are passing. so i need to know what should i do when the facet is null.(in order to assign type and the classifier to the ArchivaArtifact objects)
MRM-980,oching,Maria Odea Ching,2010-06-20T00:46:26.81Z,2010-06-20T00:46:26.81Z,"Well, you can probably set ""jar"" as a default value for null type. As for the classifier, it should be fine to set it to null since it's optional.."
MRM-980,oching,Maria Odea Ching,2010-06-20T21:05:26.261Z,2010-06-20T21:05:26.261Z,"I've broken down the rest of the items that needs to be done and set some target dates (relative to the proposed timeline for GSoC):

# repository merge API (June 30)
#* repo merger
#* unit tests
# UI for repository merge (July 11)
#* button to merge repo
#* page showing conflicting artifacts
#* confirmation page
#* integration with repo merge API
# webapp tests (July 19)
# security (July 23)
# audit logging (July 31)

Eshan, are you ok with the target dates?"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-21T10:49:26.193Z,2010-06-21T10:49:26.193Z,ok. i will try my best to achieve those task by target dates.   
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-21T11:22:25.59Z,2010-06-21T11:22:25.59Z,changes are done according to the comments. (when facet == null set the default type as jar and null clasifier)
MRM-980,brettporter,Brett Porter,2010-06-23T02:30:49.364Z,2010-06-23T02:30:49.364Z,"For the patch so far, per my comments on dev@, I think this could be pushed into the MetadataRepository interface instead of here. The merge should provide something like a RepositoryMerger or RepositoryArtifactCopier interface instead.

Some more general comments on the patch:
- there's no need to use the ArchivaArtifact class - that's something that we're in the process of removing in favour of the content model
- while either is fine, you might prefer to use Mockito for mocking objects for tests
- the POM here has more dependencies than necessary - watch this carefully"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-24T01:25:30.154Z,2010-06-24T01:25:30.154Z,ArtifactsMerger class
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-24T06:26:10.233Z,2010-06-24T06:26:10.233Z,artifact merger class updated one.
MRM-980,oching,Maria Odea Ching,2010-06-25T04:02:45.985Z,2010-06-25T04:02:45.985Z,"Hi Eshan, here are my comments on the ArtifactsMerger class you've attached:

* the name of the method isArtifactAvailableIntagerRepo(ArchivaArtifact artifact) should be fixed to isArtifactAvailableInTargetRepo(..)
* you'll have a problem in line 187 & 188, POM files are deployed as *.pom in the repo
* avoid using UPPER CASE for the first letter of a variable name (convention is using small case for the first letter/word for variable names). See below:
{code}
File SourceArtifactFile = new File(sourceRepoPath , artifactPath); 	//line 168

File TargetArtifactFile = new File(targetRepoPath , artifactPath);	//line 170
{code}
* in the method createFolderStructure(ArchivaArtifact artifact), you shouldn't be accessing the metadata.xml files because the merger shouldn't know about the layout/type of the repository. See Brett's comment regarding that in the dev list thread with subj: [GSoC] Staging repositories updates
"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-27T22:58:13.773Z,2010-06-27T22:58:13.773Z,here i have fixed issue regarding copying the POM files and the coding convention problem. And also updating project maven metadata is done using repository api. but i am still confusing why we cannot just  copy version metadata xml (if it exists in the source artifact in the source repository ). since project meta data xml is depends on available versions i used API to update it.
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-06-28T05:08:41.665Z,2010-06-28T05:08:41.665Z,updated version of ArtifactsMerger class. 
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-01T11:33:41.05Z,2010-07-01T11:33:41.05Z,updated version of artifactsmerger with test cases. 
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-02T00:04:27.049Z,2010-07-02T00:04:27.049Z,patch with test repositories
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-02T00:21:14.643Z,2010-07-02T00:21:14.643Z,test repositories to be added in to src/test
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-02T10:38:13.473Z,2010-07-02T10:38:13.473Z,sample artifacts were added to the test repository.
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-02T10:40:09.484Z,2010-07-02T10:40:09.484Z,test case is fixed(ArtifactsMerger)
MRM-980,oching,Maria Odea Ching,2010-07-04T06:17:35.349Z,2010-07-04T06:17:35.349Z,"Hi Eshan, applying the latest patch (the one for adding additional artifacts to test-repository module) causes test failures in maven2 repository support module. I added the 1.2.2 version in the expected versions resolved in Maven2MetadataResolverTest to fix the test failure.

Also, the jar files weren't included in the diff file so I just added them locally. I've committed these to the branch in -r960320. Thanks!"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-05T02:33:14.513Z,2010-07-05T02:33:14.513Z,getArtifactsFrom(String repo)method id added to the MetadataRepository and its implementations with fixed test cases.
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-05T11:35:40.68Z,2010-07-05T11:35:40.68Z,meta data updating and getArtifact() method is moved from merge module.
MRM-980,brettporter,Brett Porter,2010-07-06T09:17:23.875Z,2010-07-06T09:17:23.875Z,"unfortunately this doesn't build due to the circular dependency introduced. I don't think any of the additions to the POMs are needed - the API should be using the new model only (ie, not ArchivaArtifact, but ArtifactMetadata - see the other getArtifactBy* methods for comparison).

Can you provide the patch for this method separately to your other changes?

While I don't generally like subtasks - perhaps it might be good to split this issue into subtasks for individual pieces of work (like adding that method) that we can see completed and move on to the next ones. What do you think?"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-07T10:50:00.611Z,2010-07-07T10:50:00.611Z,getArtifacts(...) method is added to repository api.(with fixed test cases)
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-09T20:04:46.561Z,2010-07-09T20:04:46.561Z,here i have attached the patch for RepositoryMerger ind it's implementation with the test case.Although the test passes there is an issue. I think it is because the test-repository we unpacked does not contains archiva metadata model. (i tried it for a real repo ). So  then test throw an exception(because mock expectations a not defined yet).   
MRM-980,oching,Maria Odea Ching,2010-07-09T23:07:41.833Z,2010-07-09T23:07:41.833Z,"I already applied the latest patch to the branch in -r962756. Btw, I fixed the formatting of some of the classes. I noticed that there were some unused imports and variables declared in some of the classes. I didn't remove them for now since you might be using it in the next patches. Also, one of your tests is still using the test resources in src/ and not in target/ :) 

Thanks!"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-10T00:09:30.212Z,2010-07-10T00:09:30.212Z,"i have attached the latest version of merging module with fixed test case. and also now i am using target directory for the test case. for the the time being i have commented out the test case of the ArtifactsMerger. (here SourceArtifacts class , ArtifactsMerger class with there test cases should be removed).

thanks."
MRM-980,oching,Maria Odea Ching,2010-07-10T01:43:35.728Z,2010-07-10T01:43:35.728Z,Can you create the patch from the latest in branch? I already applied your previous patch and the last one has some of the same changes so I'm not able to apply it. Thanks!
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-10T05:21:28.291Z,2010-07-10T05:21:28.291Z,"here the changes are done after get a svn up. so this can be applied with out conflicts. And is is it possible to delete ArtifactsMerger ,  ArtifactsMergerTest , SourceArtifacts , SourceArtifactsTest. (since they are not needed). I did not remove them because it may be caused to conflicts when you are applying the patch.

Also in the test case now i am using target directory. 

Thanks."
MRM-980,oching,Maria Odea Ching,2010-07-10T23:24:27.018Z,2010-07-10T23:24:27.018Z,Latest patch committed to branch -r962977. Thanks!
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-10T23:34:36.115Z,2010-07-10T23:34:36.115Z,removed unwanted classes.
MRM-980,oching,Maria Odea Ching,2010-07-10T23:55:09.804Z,2010-07-10T23:55:09.804Z,Patch to remove old classes applied to branch -r962979. Thanks Eshan!
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-12T03:24:38.322Z,2010-07-12T03:24:38.322Z,"in this patch i have done following things.
* when the user create a new repo there is a tick box to add a staging repo. For now the path of staging repo is not configurable and it creates the repository in the same directory level as the original repo.
    eg : original repo name = test then staging repo name = test-stage

* when we go to see repositories in right hand side of each managed repositories there is a url to do merge. it will merge the repository with its stage repository.

eg : lets say we are going to merge test repo. then it tries to merge test with test-merge repository.if it cannot find a repo called test-merge it returns a error.(not handle yet.)

here only the happy flow is working.
thanks"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-12T10:40:22.309Z,2010-07-12T10:40:22.309Z,to get the conflicts artifacts list here i have added a method in maven2RepositpryMerger class with the test cases. (this will be useful in the web apps)
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-12T10:46:19.442Z,2010-07-12T10:46:19.442Z,"Please review this patch. (since previous one contains some commented lines). sorry for that.

Thanks."
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-13T03:36:29.645Z,2010-07-13T03:36:29.645Z,"getConflictArtifacts() method is modified with the fixed test case.

Thanks. "
MRM-980,oching,Maria Odea Ching,2010-07-13T10:32:52.805Z,2010-07-13T10:32:52.805Z,"Hi Eshan, the patch seems to be missing the MergeAction class. I'm getting an error when running the webapp. Can you update the patch to include it? Thanks!"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-13T11:31:25.536Z,2010-07-13T11:31:25.536Z,mergeAction class is added.
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-13T21:05:05.892Z,2010-07-13T21:05:05.892Z,merge with skipping conflict artifacts is added.
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-14T02:13:23.051Z,2010-07-14T02:13:23.051Z,"in previous patch merge with skipping conflicts method is not correct and here i have fixed it.

Thanks."
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-14T18:20:17.953Z,2010-07-14T18:20:17.953Z,"merge all and merge with skipping functionalities are now only allowed to newly created managed repositories.Merging function is not allowed for the Internal repository and the snapshots repository.
And staging repository is not displaying on the repositories.jsp.

Thanks."
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-15T02:01:35.896Z,2010-07-15T02:01:35.896Z,"in this patch i have validate the repository id when the user creates a new repository and if the id contains word ""stage"" i just suggest him to go for a repo id with out the word ""stage"".

Thanks."
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-16T05:55:47.101Z,2010-07-16T05:55:47.101Z,"test case for the merge artifacts by skipping conflicts is added.

Thanks."
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-16T11:10:16.16Z,2010-07-16T11:10:16.16Z,"please add testng-5.8-jdk15.jar file to the src/test/resources/test-repository-with-conflict-artifacts
in merging module. this jar file is required to pass the test case.
I tried to take a fresh copy of branch and apply that patch.It works fine just after adding that jar file.

Thanks. "
MRM-980,oching,Maria Odea Ching,2010-07-17T08:02:28.747Z,2010-07-17T08:02:28.747Z,"Hi Eshan, can you attach the test artifacts as a zip file? They don't get included when you do diff, so they should be added separately :) I'm getting a test failure without them. Thanks!"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-17T08:09:25.272Z,2010-07-17T08:09:25.272Z,"this should be added in to test/resources

Thanks"
MRM-980,oching,Maria Odea Ching,2010-07-18T00:12:38.303Z,2010-07-18T00:12:38.303Z,"Applied latest patch to MRM-980 branch in [-r965157|http://svn.apache.org/viewvc?revision=965157&view=revision]. 

I noted a few things that need to be fixed:
# The repositories page is broken. See attached screenshot MRM-980-broken-repos-page.png
# Display/show the url of the attached staging repository in the repositories page so it would be easier to know when deploying from command line
# Maybe we can only have ""Merge"" in the Merge Actions in repositories page, then have the ""Merge All"" and ""Merge with Skip"" in the following page where the list of artifacts that are conflicting are listed.
# What about in the artifact web browse? After the merge is done, should the repository ID of the artifact be changed to the managed repo instead of the staging one?
# The merging doesn't seem to be working. I uploaded an artifact (from Upload Artifact in webapp) to the staging repo then clicked ""Merge All"". When I checked the managed repo, the artifact I uploaded in the staging repo wasn't merged.

Thanks!
"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-20T12:33:11.73Z,2010-07-20T12:33:11.73Z,"following modifications are done

1). in repositories page show only one button called merge. If conflicts are available show the conflicts and allow skipp conflicts and merge all functions. If no conflicts are available only allow merge function.

2) repositories page is fixed.(broken one )

Thanks."
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-21T01:46:08.43Z,2010-07-21T01:46:08.43Z,"added following.
 * staging repository path is added to repositories page.
 * change the repository id from staging one to managed one after the merging is done.
  "
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-21T20:31:49.612Z,2010-07-21T20:31:49.612Z,"removed unused actions in struts.xml and gave proper name for methods in MergeAction class.

Thanks."
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-25T21:39:45.879Z,2010-07-25T21:39:45.879Z,"changes are done on repositories page .
( when user gives gives repository location with a name which is different to the repo id ) previously in that case staging repo location in not in repositories page"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-26T22:07:13.765Z,2010-07-26T22:07:13.765Z,"Audit logs are added when the user complete the merging.

Thanks."
MRM-980,oching,Maria Odea Ching,2010-07-27T01:17:23.69Z,2010-07-27T01:17:23.69Z,Patch submitted on 07/26 committed to MRM-980 branch in [-r979534|http://svn.apache.org/viewvc?view=revision&revision=979534]. Thanks Eshan!
MRM-980,oching,Maria Odea Ching,2010-07-27T01:20:40.435Z,2010-07-27T01:20:40.435Z,"Hi Eshan, please see the issues I've filed that this one depends upon. These need to be fixed as well. Thanks!"
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-27T20:25:23.241Z,2010-07-27T20:25:23.241Z," MRM 1406, MRM 1404, MRM 1400, MRM 1397 are fixed.
Thanks."
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-27T23:02:07.014Z,2010-07-27T23:02:07.014Z,"MRM 1405 is fixed.
Thanks."
MRM-980,oching,Maria Odea Ching,2010-07-27T23:49:55.783Z,2010-07-27T23:49:55.783Z,"Hi Eshan, I'm getting test failures in archiva-webapp after applying the patch you submitted on 7/27 8:25pm. The failures are specifically in DeleteManagedRepositoryActionTest and EditManagedRepositoryActionTest. 

Also, would it be possible to submit each fix separately and attach it to their respective issues (e.g. 1 patch per issue fixed)? So it would be easier to track/isolate each fix. Thanks! "
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-28T20:40:17.175Z,2010-07-28T20:40:17.175Z,MRM 1406 fixed.
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-28T20:51:22.028Z,2010-07-28T20:51:22.028Z,MRM 1400 is fixed.
MRM-980,oching,Maria Odea Ching,2010-07-31T23:06:07.192Z,2010-07-31T23:06:07.192Z,"I changed the variable name ""targetRepoId"" to ""sourceRepoId"" to avoid confusion, since it is the id of the staging repo. I've also updated the headings of the merge jsps and also the successful merging message. These were committed to the branch in [-r981136|http://svn.apache.org/viewvc?rev=981136&view=rev]."
MRM-980,oching,Maria Odea Ching,2010-07-31T23:42:09.845Z,2010-07-31T23:42:09.845Z,I moved the merge jsps inside the admin/ dir in webapp in MRM-980-branch [-r981149|http://svn.apache.org/viewvc?rev=981149&view=rev].
MRM-980,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-08-10T03:56:06.581Z,2010-08-10T03:56:06.581Z,"added web app test for repository merging.
Thanks. "
MRM-980,oching,Maria Odea Ching,2010-08-14T22:22:52.378Z,2010-08-14T22:22:52.378Z,"Patch for selenium tests submitted to MRM-980 branch in [-r985612|http://svn.apache.org/viewvc?rev=985612&view=rev].

The only thing missing now is the documentation then we can merge this to trunk already."
MRM-980,oching,Maria Odea Ching,2010-09-28T04:18:48.504Z,2010-09-28T04:18:48.504Z,"Closing as fixed. All issues it depends on has been fixed, branch also merged to trunk in -r1002059. Thanks again for implementing this feature Eshan! :)"
MRM-979,deki,Dennis Kieselhorst,2008-10-20T12:20:04.341Z,2008-10-20T12:20:04.341Z,"https://maven-repository.dev.java.net/nonav/repository/ with network proxy doesn't work too: Error transferring file (cause: java.net.ConnectException: Connection timed out)

Workaround: Use http://download.java.net/maven/1/"
MRM-979,joerg.hohwiller@sdm.de,Jrg Hohwiller,2009-11-10T03:56:30.39Z,2009-11-10T03:56:30.39Z,"I am having the same problem and it breaks my existing build after cleaning repo. Besides I am not directly using java.net repository but some artifact that itself adds this repo to resolve additional dependencies.
This is a really critical problem. I do not even know how to overrule the order of the repositories that are searched and java.net comes first delivering broken pom files."
MRM-979,joerg.hohwiller@sdm.de,Jrg Hohwiller,2009-11-10T04:08:42.593Z,2009-11-10T04:08:42.593Z,"As a workaround I added temporary this to my settings.xml:
  <mirrors>
    <mirror>
      <id>central</id>
      <name>Mirror to central</name>
      <url>http://repo1.maven.org/maven2</url>
      <mirrorOf>java.net</mirrorOf>
    </mirror>
  </mirrors>

Besides: Why is this issue filed for archiva? This is a problem of java.net as well as maven core. Should be a MNG ticket instead."
MRM-979,brettporter,Brett Porter,2011-09-12T08:08:14.25Z,2011-09-12T08:08:14.25Z,I believe this is resolved by switching wagons - to test
MRM-979,olamy,Olivier Lamy (*$^%`),2011-09-30T04:47:18.866Z,2011-09-30T04:47:18.866Z,"fixed with new wagon http 2.0.
BTW unit test added"
MRM-946,oching,Maria Odea Ching,2008-09-17T04:35:14.498Z,2008-09-17T04:35:14.498Z,"Upgraded version to 1.1 in trunk -r696219. 

To do:
- add Roles to navigation menu"
MRM-946,oching,Maria Odea Ching,2008-09-17T20:54:12.361Z,2008-09-17T20:54:12.361Z,"Although I don't think Archiva's affected by this problem: REDBACK-160, we should upgrade to 1.1.1 instead, which Brett will be releasing today.."
MRM-946,oching,Maria Odea Ching,2008-09-28T06:53:04.656Z,2008-09-28T06:53:04.656Z,Added User Roles in navigation menu in trunk -r699802 .
MRM-974,brettporter,Brett Porter,2011-09-12T08:40:57.881Z,2011-09-12T08:40:57.881Z,"looks like it was picking up the wrong version of bcel which may have been a problem. Either way, this code hasn't existed since Archiva 1.2"
MRM-940,brettporter,Brett Porter,2009-03-05T22:40:33.998Z,2009-03-05T22:40:33.998Z,"unless there is a measure to stop it reretrieving something permanently broken, not sure about this - better to make sure we don't add crap pages like this in the first place :)"
MRM-939,oching,Maria Odea Ching,2011-10-21T05:59:30.173Z,2011-10-21T05:59:30.173Z,I don't think this is an issue any more. Closing as Cannot Reproduce.
MRM-996,jameswdumay,James William Dumay,2008-11-12T23:59:36.997Z,2008-11-12T23:59:36.997Z,"Committed in r713648.

Thanks Martin :)"
MRM-911,aheritier,Arnaud HERITIER,2008-08-14T10:25:59.822Z,2008-08-14T10:25:59.822Z,"A workaround is to say to apache (>2.0) to not forward credentials :
{code:xml}
  <Location /archiva/repository/>
    RequestHeader unset authorization
  </Location>
{code}"
MRM-911,oching,Maria Odea Ching,2008-09-08T22:03:50.04Z,2008-09-08T22:03:50.04Z,"I'm now able to replicate this problem, it has the same behaviour too even with just basic authentication configured for the RP. I think you're right about archiva retrieving the credentials from apache first and then fails.. "
MRM-911,oching,Maria Odea Ching,2008-09-09T22:55:46.999Z,2008-09-09T22:55:46.999Z,"Fixed in trunk -r693694:
- check first if guest is enabled for the repository before failing the authentication

For repositories which require authentication though, Archiva is still getting the RP credentials instead of the Archiva credentials you entered. I'll file this one as a separate issue.."
MRM-910,olamy,Olivier Lamy (*$^%`),2012-10-13T16:27:16.216Z,2012-10-13T16:27:16.216Z,works fine withlog4j2.xml
MRM-925,scosenz,Steve,2008-10-23T11:02:50.585Z,2008-10-23T11:02:50.585Z,"I am also facing this issue. If you are seeing the following error in your browser: 
""Adding text to an XML document must not be null"" please vote for this issue!
"
MRM-925,jameswdumay,James William Dumay,2008-10-23T18:43:20.76Z,2008-10-23T18:43:20.76Z,"Hey guys,
This has been fixed for Archiva 1.2 (trunk). You may be glad to know that most of the metadata writing and merging has been rewritten and improved so that it is a lot more robust.

Steve and Maik - are you guys able to build the latest trunk and give it a try?

Thanks,
James"
MRM-925,jameswdumay,James William Dumay,2008-10-23T18:44:16.24Z,2008-10-23T18:44:16.24Z,"Id also like to add that we will be releasing a Milestone of Archiva 1.2 shortly - so you may want to wait until then.

Thanks
James"
MRM-954,brettporter,Brett Porter,2008-09-23T16:35:01.029Z,2008-09-23T16:35:01.029Z,"Thanks Doron. We can apply this later, but it is easier if you supply a patch attachment :)"
MRM-954,oching,Maria Odea Ching,2008-10-02T08:32:51.998Z,2008-10-02T08:32:51.998Z,Applied in trunk -r701124. Thanks again Doron!
MRM-932,gautencio,Gwen Harold Autencio,2008-09-03T02:07:52.868Z,2008-09-03T02:07:52.868Z,"Attached a patch for the issue, added params  searchResultsOnly and completeQueryString in the <ww:url of previous and next icons."
MRM-932,oching,Maria Odea Ching,2008-09-04T02:34:36.722Z,2008-09-04T02:34:36.722Z,Patch applied it in 1.1.x branch -r691892.Thanks for the fix Gwen! :) 
MRM-997,brettporter,Brett Porter,2010-02-23T03:20:25.181Z,2010-02-23T03:20:25.181Z,nto yet sure if we'll achieve this in 1.4 but it's worth reviewing. The basic infrastructure is in place.
MRM-913,tunaranch,Haikal Saadh,2008-08-18T23:15:39.04Z,2008-08-18T23:15:39.04Z,"This would be particularly useful in reports, so if an artifact/pom is corrupted, it can be deleted and re-downloaded."
MRM-913,jameswdumay,James William Dumay,2008-08-18T23:33:30.034Z,2008-08-18T23:33:30.034Z,This might be a good feature to add as a plugin module.
MRM-913,y.julienne,Yannis JULIENNE,2008-09-01T10:59:17.21Z,2008-09-01T10:59:17.21Z,"This would be really helpful for the poor developpers who are often deploying artifacts with wrong version name and do not have the rights to delete them from filesystem.
Thanks."
MRM-913,phantom_john,John Wu,2008-10-20T12:07:17.675Z,2008-10-20T12:07:17.675Z,"Even if one can delete the artifact from the repo as the admin, it still shows up in the GUI, even after restarting the Archiva. I'm guessing that the index needs to be updated as well. But I just couldn't figure out an easy way to update the index.

I think this is a (highly) required feature since there're a number of cases where we need to remove artifact(s)."
MRM-913,jzurbano,jzurbano,2008-11-13T02:43:21.11Z,2008-11-13T02:43:21.11Z,"Patch attached:
- deletes artifacts
- cleans up database
- executes scan to reflect changes when browsing repository
- updates metadata
- updates audit.log
- 'Delete Artifact' added in navigation and is displayed for users with repository manager role
- only allows manager of the repository to delete artifacts from it"
MRM-913,oching,Maria Odea Ching,2009-02-20T03:00:52.208Z,2009-02-20T03:00:52.208Z,"Thanks for the patch Jevica! I already applied it in trunk -r746183.

I also made the following changes in the patch:
# removed catch for NPE in DeleteArtifactAction (something to keep in mind in the future, NPEs shouldn't be caught in a try-catch block :) 
# migrated jsps & action class to struts 2
# moved invocation of cleanup consumers in DeleteArtifactAction to DatabaseConsumers -- added new method for this in DatabaseConsumers
# applied formatting




"
MRM-944,drewpuppy,Andrew Heald,2008-09-12T04:26:25.141Z,2008-09-12T04:26:25.141Z,"Brett, your patch doesn't fix the content of security emails. Don't forget these."
MRM-944,olamy,Olivier Lamy (*$^%`),2012-10-13T16:27:53.618Z,2012-10-13T16:27:53.618Z,fixed with the new UI
MRM-977,jameswdumay,James William Dumay,2008-10-19T22:10:32.213Z,2008-10-19T22:10:32.213Z,committed r706113.
MRM-947,olamy,Olivier Lamy (*$^%`),2012-09-24T03:25:58.208Z,2012-09-24T03:25:58.208Z,most of pages have screenshots now.
MRM-905,oching,Maria Odea Ching,2008-08-14T01:07:46.548Z,2008-08-14T01:07:46.548Z,"I couldn't replicate this on trunk (-r685734), with the following environment:
- ubuntu linux
- java version ""1.5.0_11""
- tomcat 6.0.14
- activation-1.1.jar, derby-10.1.3.1.jar and mail-1.4.jar"
MRM-905,oching,Maria Odea Ching,2008-08-14T04:39:11.687Z,2008-08-14T04:39:11.687Z,"I was now able to replicate this issue when I deployed Archiva to Tomcat 6.0.18. I don't see the error in 5.5.17 and 6.0.14 though.. there must be a conflict with the EL lib included in 6.0.18. I'll try your suggestion above to fix this, thanks! :)"
MRM-905,fabdouglas,Fabrice Daugan,2008-08-14T06:35:03.535Z,2008-08-14T06:35:03.535Z,"Yes! 
that's what i just found during the professionnal/personnal system differences.
Same JDK, but 6.0.14 Tomcat version.
"
MRM-905,rocko,Rocko,2008-08-14T10:08:53.421Z,2008-08-14T10:08:53.421Z,"Same here.
My configuration:
Ubuntu Server 8.04
java 1.6.0_06
tomcat 6.0.18
Archiva 1.1.1 deployed as a  .war

Stacktrace starts with: 
org.apache.jasper.JasperException: /WEB-INF/jsp/admin/repositories.jsp(53,0) ""${empty(managedRepositories)}"" contains invalid expression(s): javax.el.ELException: Function ':empty' not found
	org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40)

The suggested fix works for me. Fabrice, you made my day!
I ran 
sudo sed -i.BAK -e ""s/empty(/empty (/g"" \*.jsp\*
sudo sed -i.BAK -e ""s/not(/not (/g"" \*.jsp\*
over the jsp folder and it works like a charm.

So the question is, is ""empty("" invalid or not. There have been quite some changes in jasper between
6.0.14 and 6.0.18 (http://tomcat.apache.org/tomcat-6.0-doc/changelog.html), but i'm really not into the jsp stuff, so I couldn't tell..."
MRM-905,fabdouglas,Fabrice Daugan,2008-08-14T12:59:24.796Z,2008-08-14T12:59:24.796Z,"Also, i think there are some common code with Continuum, since the same error (but non blocker) occurs in the header.

As said in the EL specification  (simplified version)
{code:title=http://java.sun.com/products/jsp/syntax/2.0/syntaxref207.html|borderStyle=solid}
${ Expression }
Expression = {(UnaryOp Expression) | Value }
UnaryOp = {'-' | ! | not | empty }
Value = {ValuePrefix | (Value ValueSuffix) }
ValuePrefix = {Literal | '('Expression')' | ImplicitObject | Java language identifier}
ValueSuffix = { . Identifier | '['Expression']'}
Literal = {StringLiteral | null}
StringLiteral = {'[^(' | \) | \' | \\]+' | ""[^("" | \) | \"" | \\]+""}
{code}

If we read well the Tomcat error is right : since the grammar does not validate :
{{*empty(""hello"")*}}
but validate :
{{*empty (""hello"")*}}"
MRM-905,oching,Maria Odea Ching,2008-08-14T20:20:32.627Z,2008-08-14T20:20:32.627Z,"Ok, thanks a lot for both of your help on this! Would either of you like or is interested to submit a patch for the fix? :) "
MRM-905,fabdouglas,Fabrice Daugan,2008-08-15T05:08:58.415Z,2008-08-15T05:08:58.415Z,"The patch did from the revision 686186.
The root path of this patch is http://svn.apache.org/repos/asf/archiva/trunk/archiva-modules/archiva-web/archiva-webapp
"
MRM-905,oching,Maria Odea Ching,2008-08-17T20:46:27.344Z,2008-08-17T20:46:27.344Z,"Thanks for the patch Fabrice! I already applied it in trunk -r686665 and tested it with Tomcat versions 5.5.17, 6.0.14 and 6.0.18. It works nicely :)"
MRM-969,mccloud,Duncan Doyle,2008-10-10T03:15:45.341Z,2008-10-10T03:15:45.341Z,"Sorry, posted the issue to fast. The last line in the log is:

INFO: Stopping Coyote HTTP/1.1 on http-8080

It seems like some Archiva background process is not being killed."
MRM-969,dschettl,Denis Schettl,2008-10-10T03:29:15.07Z,2008-10-10T03:29:15.07Z,It seems to be linked with MRM-724 (DB-Error because after stopping tomcat  there is some stuff from archiva still running and when starting tomcat with archiva again the db is allready running what creates an error).
MRM-969,olamy,Olivier Lamy (*$^%`),2012-10-13T16:28:31.408Z,2012-10-13T16:28:31.408Z,please reopen if you can reproduce.
MRM-970,libor.kramolis,Libor Kramolis,2008-10-14T12:33:43.194Z,2008-10-14T12:33:43.194Z,"It looks like search URLs contains platform specific slashes.
"
MRM-970,brettporter,Brett Porter,2010-02-23T03:19:10.204Z,2010-02-23T03:19:10.204Z,for testing
MRM-998,Chris Harris,Chris Harris,2012-09-29T17:40:59.511Z,2012-09-29T17:40:59.511Z,"I recently wrote to the mailing list about this issue.  Had I known about this particular bug, I would have had an answer to my problem.  I'm also forced to authenticate against Active Directory.  I was very confused as to why I couldn't find the userPassword field as I've seen listed in so many Redback/LDAP examples.  I thought it was because my account, specified by ldap.config.bind.dn, wasn't an admin account.  I was using my AD account for testing purposes, because that's the only to which I have access.

This really needs to get fixed!  This could be a potential deal-breaker for a lot of people attempting to set up Archiva in an AD environment.  That's a lot of people and companies.  Archiva, at this point in time, is really turning into a superior Maven repo manager.  This bug alone deprives you of strengthening your current user base and delivering your fine product to a wider audience.  Just saying...keep up the good work."
MRM-978,jameswdumay,James William Dumay,2008-10-20T00:17:46.279Z,2008-10-20T00:17:46.279Z,r706124 committed to trunk. Thanks Deng!
MRM-973,brettporter,Brett Porter,2010-02-23T02:23:57.605Z,2010-02-23T02:23:57.605Z,for testing
MRM-973,brettporter,Brett Porter,2010-02-28T21:53:08.222Z,2010-02-28T21:53:08.222Z,works in 1.4 and probably earlier versions
MRM-962,gautencio,Gwen Harold Autencio,2008-10-02T03:40:55.561Z,2008-10-02T03:40:55.561Z,Attached patch for this issue. trimmed the fields during upload.
MRM-962,brettporter,Brett Porter,2008-11-19T02:40:49.199Z,2008-11-19T02:40:49.199Z,rescheduling to review patch
MRM-962,martinc,Martin Cooper,2008-11-30T20:18:19.711Z,2008-11-30T20:18:19.711Z,"I don't believe that the earlier patch is sufficient. While it corrects the problem with the ArtifactReference instance, it leaves subsequent uses of the fields unaltered, so that the untrimmed values are used if / when a POM is created and for log and audit messages. The cleanest way to resolve this is to trim the values as they are supplied, such that all subsequent uses will be of trimmed values. The attached patch uses StringUtils.trim to do this so that no special casing is required if a null value is somehow provided."
MRM-962,martinc,Martin Cooper,2008-12-11T00:28:27.749Z,2008-12-11T00:28:27.749Z,Committed in r725593
MRM-952,michal.stochmialek,Michal Stochmialek,2008-09-18T09:28:33.666Z,2008-09-18T09:28:33.666Z,The patch should fix MRM-615.
MRM-952,michal.stochmialek,Michal Stochmialek,2008-09-18T09:32:16.471Z,2008-09-18T09:32:16.471Z,The patch should fix MRM-620.
MRM-952,michal.stochmialek,Michal Stochmialek,2008-09-18T09:34:22.718Z,2008-09-18T09:34:22.718Z,The patch should fix MRM-686 (with additional work - support for project.parent.* properties)
MRM-952,michal.stochmialek,Michal Stochmialek,2008-09-18T09:38:24.675Z,2008-09-18T09:38:24.675Z,The patch should fix MRM-844.
MRM-952,oching,Maria Odea Ching,2008-10-02T07:40:47.429Z,2008-10-02T07:40:47.429Z,"Hi Michael! Thanks a lot for the patch, it looks great :-)

Unfortunately, I'm having problems applying it.. I saw that the patch was made against the bundled source code included in the distribution that's why it's failing when I apply it to the source code from trunk :( Do you think you can create the patch against the source from SVN (http://svn.apache.org/repos/asf/archiva/trunk/) instead? "
MRM-952,michal.stochmialek,Michal Stochmialek,2008-10-02T08:15:14.03Z,2008-10-02T08:15:14.03Z,"Strange, I've just checkout the trunk from SVN, and the patch applies without a problem.
I'm using ""patch -p1 <archiva-1.1.1-fixes.patch"" command (the patch was created by diff). 

It seems that you are using SVN patch tool. To apply it use the eclipse patch tool.

"
MRM-952,michal.stochmialek,Michal Stochmialek,2008-10-02T08:20:02.584Z,2008-10-02T08:20:02.584Z,Ok. I've created second patch using SVN patch tool. Should be in attachments.
MRM-952,oching,Maria Odea Ching,2008-10-10T20:30:03.468Z,2008-10-10T20:30:03.468Z,"Ok, thanks again Michal! I'll apply the patch.."
MRM-952,oching,Maria Odea Ching,2008-10-10T22:59:25.813Z,2008-10-10T22:59:25.813Z,"It's nice to see the dependency tree complete :) 

Patch already committed to trunk -r703626. Verified that the patch fixes MRM-615, MRM-844 and MRM-620. MRM-686 still occurs even after I applied the patch so I'll leave that open. 

Thanks again for the contribution :)"
MRM-937,martinc,Martin Cooper,2008-11-19T23:26:45.259Z,2008-11-19T23:26:45.259Z,"Kinda trivial, I know, but the attached patch is all the change that's needed to resolve this."
MRM-937,brettporter,Brett Porter,2008-11-19T23:31:49.297Z,2008-11-19T23:31:49.297Z,I think it needs a documentation patch (at least in the release notes) as well :)
MRM-937,martinc,Martin Cooper,2008-11-19T23:49:32.704Z,2008-11-19T23:49:32.704Z,"I'm not sure how much you had in mind. I've attached a patch to the release notes that at least lists this issue as an improvement that has been resolved (in a new 1.2-M2 section). I wasn't sure what the protocol is for what shows up above the ""Changes in"" sections. Let me know if you want something different."
MRM-937,brettporter,Brett Porter,2008-11-20T00:05:45.064Z,2008-11-20T00:05:45.064Z,"we do those automatically at release time. I've gone ahead and applied the patch and added a line myself.

I expected we had a doc about audit logging, but we didn't, so I'm writing that now :)"
MRM-901,gilles.bernaerts,Gilles Bernaerts,2008-09-04T07:07:20.355Z,2008-09-04T07:07:20.355Z,I have this very same problem. It appears that for each directory the repository group hosts the content of the directory in the first grouped repository in declaration order instead of the union of those directories (with declaration order precedence in case of clashes at artefact level). This means that changing the order of repositories will completely change the hosted files by the group.
MRM-901,oching,Maria Odea Ching,2009-03-18T04:57:18.794Z,2009-03-18T04:57:18.794Z,Fixed in trunk -r755532.
MRM-918,olamy,Olivier Lamy (*$^%`),2012-09-14T04:27:56.718Z,2012-09-14T04:27:56.718Z,fixed.
MRM-953,brettporter,Brett Porter,2008-10-12T23:51:05.785Z,2008-10-12T23:51:05.785Z,"I think this is related to the metadata issues, is it working on trunk?"
MRM-953,brettporter,Brett Porter,2010-02-23T03:17:26.188Z,2010-02-23T03:17:26.188Z,for testing
MRM-950,brettporter,Brett Porter,2010-02-23T01:47:42.112Z,2010-02-23T01:47:42.112Z,"this is not far off the current support, though not all is represented in the web interface"
MRM-975,jameswdumay,James William Dumay,2008-10-18T20:40:23.117Z,2008-10-18T20:40:23.117Z,Committed revision 705949.
MRM-975,jameswdumay,James William Dumay,2008-10-18T20:40:49.921Z,2008-10-18T20:40:49.921Z,We still need to figure out what dodo with the company/archiva logo. Looking into this...
MRM-982,mwho,Malcolm Wong Ho,2008-10-22T05:18:32.003Z,2008-10-22T05:18:32.003Z,"java.lang.ArrayIndexOutOfBoundsException
        at java.lang.System.arraycopy(Native Method)
        at sun.net.www.protocol.http.NTLMAuthentication.buildType3Msg(NTLMAuthentication.java:356)
        at sun.net.www.protocol.http.NTLMAuthentication.setHeaders(NTLMAuthentication.java:213)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1085)
        at org.apache.maven.wagon.providers.http.LightweightHttpWagon.fillInputData(LightweightHttpWagon.java:115)
        at org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:116)
        at org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88)
        at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)
        at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.transferSimpleFile(DefaultRepositoryProxyConnectors.java:782)
        at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.transferFile(DefaultRepositoryProxyConnectors.java:611)
        at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.fetchFromProxies(DefaultRepositoryProxyConnectors.java:162)
        at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.applyServerSideRelocation(ArchivaDavResourceFactory.java:618)
        at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.fetchContentFromProxies(ArchivaDavResourceFactory.java:534)
        at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.doGet(ArchivaDavResourceFactory.java:439)
        at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.createResource(ArchivaDavResourceFactory.java:256)
        at org.apache.maven.archiva.webdav.RepositoryServlet.service(RepositoryServlet.java:118)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)"
MRM-982,oching,Maria Odea Ching,2008-10-22T05:35:25.31Z,2008-10-22T05:35:25.31Z,"Hi, which version of Archiva are you using?"
MRM-982,brettporter,Brett Porter,2009-02-26T08:12:32.317Z,2009-02-26T08:12:32.317Z,"I think this is because we don't offer config for NTLM in the proxy section.

More information is needed on your environment and config for us to reproduce this."
MRM-967,oching,Maria Odea Ching,2008-10-07T00:39:00.892Z,2008-10-07T00:39:00.892Z,Fixed in trunk -r702027 and merged in 1.1.x branch -r702032. 
MRM-967,oching,Maria Odea Ching,2008-10-07T00:41:11.11Z,2008-10-07T00:41:11.11Z,"Btw, thanks Brett for finding/discovering the security issue :)"
MRM-967,gautencio,Gwen Harold Autencio,2008-10-07T00:45:23.447Z,2008-10-07T00:45:23.447Z,"Using the 'mvn deploy' command, tested the archiva-1.1.x

Result : Tested archiva-1.1.x using the mvn deploy command.

gwen@gautencio:~/Desktop/my-app$ mvn deploy
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building my-app
[INFO]    task-segment: [deploy]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources]
[INFO] Using default encoding to copy filtered resources.
[INFO] [compiler:compile]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources]
[INFO] Using default encoding to copy filtered resources.
[INFO] [compiler:testCompile]
[INFO] Nothing to compile - all classes are up to date
[INFO] [surefire:test]
[INFO] Surefire report directory: /home/gwen/Desktop/my-app/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.mycompany.app.AppTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.038 sec

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] [jar:jar]
[INFO] [install:install]
[INFO] Installing /home/gwen/Desktop/my-app/target/my-app-1.0-SNAPSHOT.jar to /home/gwen/.m2/repository/com/mycompany/app/my-app/1.0-SNAPSHOT/my-app-1.0-SNAPSHOT.jar
[INFO] [deploy:deploy]
altDeploymentRepository = null
[INFO] Retrieving previous build number from archiva-internal
Uploading: http://localhost:9091/repository/internal//com/mycompany/app/my-app/1.0-SNAPSHOT/my-app-1.0-20081007.034214-2.jar

2K uploaded
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error deploying artifact: Failed to transfer file: http://localhost:9091/repository/internal//com/mycompany/app/my-app/1.0-SNAPSHOT/my-app-1.0-20081007.034214-2.jar. Return code is: 401


[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5 seconds
[INFO] Finished at: Tue Oct 07 11:42:14 GMT+08:00 2008
[INFO] Final Memory: 9M/16M
[INFO] ------------------------------------------------------------------------"
MRM-967,gautencio,Gwen Harold Autencio,2008-10-07T00:47:08.447Z,2008-10-07T00:47:08.447Z,"Using the 'mvn deploy:deploy-file'

gwen@gautencio:~$ mvn deploy:deploy-file -Dfile=NUnit.Framework.dll-2.4.8.0.dll -DgroupId=NUnit -Dversion=2.4.8.0 -Dpackaging=dll -DartifactId=NUnit.Framework.dll -DrepositoryId=archiva-snapshots -Durl=http://localhost:9091/repository/snapshots/ -DgeneratePom=true

[INFO] Scanning for projects...
[INFO] Searching repository for plugin with prefix: 'deploy'.
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Default Project
[INFO]    task-segment: [deploy:deploy-file] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[INFO] [deploy:deploy-file]
Uploading: http://localhost:9091/repository/snapshots//NUnit/NUnit.Framework.dll/2.4.8.0/NUnit.Framework.dll-2.4.8.0.dll

31K uploaded
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error deploying artifact: Failed to transfer file: http://localhost:9091/repository/snapshots//NUnit/NUnit.Framework.dll/2.4.8.0/NUnit.Framework.dll-2.4.8.0.dll. Return code is: 401


[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1 second
[INFO] Finished at: Mon Oct 06 18:29:15 GMT+08:00 2008

[INFO] Final Memory: 3M/5M
[INFO] ------------------------------------------------------------------------"
MRM-995,jameswdumay,James William Dumay,2009-02-10T17:43:30.13Z,2009-02-10T17:43:30.13Z,"committed in r743169.

Thanks heaps for the patch Steffen!"
MRM-995,jameswdumay,James William Dumay,2009-02-10T17:54:46.634Z,2009-02-10T17:54:46.634Z,Ive rolled this change back out - seems to have broken the components.xml merges. Ill take another look at this shortly.
MRM-995,jameswdumay,James William Dumay,2009-03-05T22:32:57.616Z,2009-03-05T22:32:57.616Z,"Stephan,
Thanks for the patch - I tried applying this but it broke a bunch of component merging stuff in Archiva. We are working on removing plexus from Archiva so this might go away in 1.3.

Ill look at this again when we branch for 1.3

Thanks
James"
MRM-995,brettporter,Brett Porter,2011-09-12T08:03:25.149Z,2011-09-12T08:03:25.149Z,should no longer be an issue
MRM-902,jameswdumay,James William Dumay,2008-09-03T21:35:24.339Z,2008-09-03T21:35:24.339Z,Seems I could not reproduce this bug in later revisions of trunk. 
MRM-902,bvj,b v j,2008-11-17T23:45:40.949Z,2008-11-17T23:45:40.949Z,MRM-1005 expands on the bug described here
MRM-963,brettporter,Brett Porter,2011-09-12T11:48:23.768Z,2011-09-12T11:48:23.768Z,"please let us know if you're still seeing this, I haven't been able to reproduce it"
MRM-992,wsmoak,Wendy Smoak,2008-10-29T11:58:05.221Z,2008-10-29T11:58:05.221Z,Possible duplicate of MRM-747 (It is possible de redeploy a versionned jar with webdav eventhough it must be impossible)
MRM-906,jameswdumay,James William Dumay,2008-10-23T18:50:22.943Z,2008-10-23T18:50:22.943Z,This was fixed a while ago. Archiva now downloads files into a temporary directory where it runs all its post download validation before moving it into the managed repository proper.
MRM-900,brettporter,Brett Porter,2008-08-01T07:47:49.372Z,2008-08-01T07:47:49.372Z,"do you already have the files in the managed repository directory on the filesystem? /axis will give 404 until it is created. On my instance, /axis works (as did getting axis-ant 1.4)

As for the JAR not being found - you'll need to check the logs related to the attempt to get axis-ant as to why that's not working."
MRM-900,mektoub,Manuel EVENO,2008-08-01T08:30:37.421Z,2008-08-01T08:30:37.421Z,"Ok I'll check the log but isn't the returned exception a bit strange ?!?

Why is the repository name removed (The following resource does not exist: http://fornax:8090/repository *//* axis) ?

And I you carefully look at the exception stack trace, I have the feeling that archiva didn't check the presence of the artifact
nor attempt to download it. It seems to fail before where convert url to artifact reference
See :
{code}
at org.apache.maven.archiva.repository.content.RepositoryRequest.toArtifactReference(RepositoryRequest.java:100)
at org.apache.maven.archiva.repository.content.RepositoryRequest.toNativePath(RepositoryRequest.java:242)
{code}
"
MRM-900,brettporter,Brett Porter,2008-08-01T08:35:24.435Z,2008-08-01T08:35:24.435Z,"yes, the exception and path are wrong - they were already fixed in Archiva 1.1.

It's true it is failing to convert the path to a reference - that would be because it doesn't exist, and it doesn't proxy directories. You would hopefully expect a different error when requesting the artifact itself."
MRM-900,mektoub,Manuel EVENO,2008-08-01T09:44:40.416Z,2008-08-01T09:44:40.416Z,"Here is the extracted log file entries talking about axis-ant :
{code}
2008-08-01 20:29:14,949 [SocketListener0-24] WARN  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Transfer error from repository ""codehaus"" for artifact axis:axis-ant:1.4::pom, continuing to next repository. Error message: Unsupported target repository protocol:  http
2008-08-01 20:29:15,887 [SocketListener0-24] WARN  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Transfer error from repository ""codehaus"" for artifact axis:axis-ant:1.4::pom, continuing to next repository. Error message: Unsupported target repository protocol:  http
2008-08-01 20:29:16,825 [SocketListener0-24] WARN  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Transfer error from repository ""codehaus"" for artifact axis:axis-ant:1.4::pom, continuing to next repository. Error message: Unsupported target repository protocol:  http
{code}
"
MRM-900,brettporter,Brett Porter,2008-08-01T09:51:22.246Z,2008-08-01T09:51:22.246Z,do you have a leading space on the URL of the remote repository?
MRM-900,mektoub,Manuel EVENO,2008-08-01T09:58:05.408Z,2008-08-01T09:58:05.408Z,"Good point, that's solved the problem ;)

Thanks a lot !
Manuel
"
MRM-900,brettporter,Brett Porter,2008-08-01T10:04:00.173Z,2008-08-01T10:04:00.173Z,"closing as not a bug, since there are separate issues for trimming whitespace from fields"
MRM-922,demobox,Andrew Phillips,2008-09-09T11:09:52.037Z,2008-09-09T11:09:52.037Z,"A redback issue? Commenting out the <redback:ifAnyAuthorized...> and <redback:ifAuthorized...> (unsurprisingly) results in the menu being displayed.
More intriguingly, just commenting out the <redback:ifAnyAuthorized...> tag (i.e. leaving the <redback:ifAuthorized...> tag around the ""Configure Appearance"" and ""Upload Artifact"" menu items in place) does *not* help, even though the user clearly has the required permission (since the upload page works).

But if it *is* a redback issue, why would a user with System Administrator role be able to see all the menu items, even if that role isn't mentioned in the tags? Is there some kind of ""override"" in place if the system admin role is detected, rather than using the inherited permissions mentioned in the tags?"
MRM-572,brettporter,Brett Porter,2007-10-26T21:16:01.918Z,2007-10-26T21:16:01.918Z,"good to think ahead, but not really an archiva issue? Maybe just note it in the parent - but the broken build will remind you if not :)"
MRM-585,brettporter,Brett Porter,2008-03-28T10:29:39.818Z,2008-03-28T10:29:39.818Z,"Because Maven 1 repositories have artifacts without POMs, the following occurs on browse:
2008-03-25 19:35:22,409 [btpool0-3] ERROR org.apache.maven.archiva.consumers.DatabaseUnprocessedArtifactConsumer:update-db-project - Unable to process model /Users/brett/scm/maven/archiva-1.0.x/archiva-web/archiva-webapp/target/appserver-base/data/repositories/m1/app/poms/app-1.0.pom due to : javax.jdo.JDOUserException : Field org.apache.maven.archiva.model.ArchivaProjectModel.packaging is null, but is mandatory as its described in the jdo metadata
javax.jdo.JDOUserException: Field org.apache.maven.archiva.model.ArchivaProjectModel.packaging is null, but is mandatory as its described in the jdo metadata
at org.jpox.store.rdbms.fieldmanager.ParameterSetter.storeStringField(ParameterSetter.java:120)
at org.jpox.state.StateManagerImpl.providedStringField(StateManagerImpl.java:2757)
at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideField(ArchivaProjectModel.java)
at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideFields(ArchivaProjectModel.java)
at org.jpox.state.StateManagerImpl.provideFields(StateManagerImpl.java:3115)
at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:252)
at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
at org.jpox.store.StoreManager.insert(StoreManager.java:938)
at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1206)
at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1277)
at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:192)
at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:165)
at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:170)
at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:52)
at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:154)
at org.apache.maven.archiva.database.browsing.DefaultRepositoryBrowsing.selectVersion(DefaultRepositoryBrowsing.java:124)
at org.apache.maven.archiva.web.action.ShowArtifactAction.artifact(ShowArtifactAction.java:105)

A placeholder should be used instead"
MRM-585,brettporter,Brett Porter,2010-02-23T02:33:24.941Z,2010-02-23T02:33:24.941Z,for testing
MRM-585,brettporter,Brett Porter,2010-02-23T05:17:43.973Z,2010-02-23T05:17:43.973Z,"now shows ""The model may be incomplete due to a previous error in resolving information. Refer to the repository problem reports for more information."""
MRM-591,oching,Maria Odea Ching,2008-03-25T20:31:03.083Z,2008-03-25T20:31:03.083Z,"Fixed in archiva-trunk -r641103.

- group the defective artifacts by repository in the reports "
MRM-525,alex_mayorga,Alex Mayorga Adame,2007-09-26T16:28:14.133Z,2007-09-26T16:28:14.133Z,Attaching this small patch.
MRM-525,ajbanck,ajbanck,2007-10-04T08:44:47.827Z,2007-10-04T08:44:47.827Z,"Hi,
This issue is marked as fixed, but in trunk I still see the incorrect xml. I also cant find a checkin of this patch. Was it really fixed?"
MRM-525,joakime,Joakim Erdfelt,2007-10-04T08:59:48.516Z,2007-10-04T08:59:48.516Z,Reopened at request of ajbanck.
MRM-525,alex_mayorga,Alex Mayorga Adame,2007-10-04T09:42:38.538Z,2007-10-04T09:42:38.538Z,"My goof up, sorry. I don't have commit rights yet. "
MRM-525,joakime,Joakim Erdfelt,2007-10-10T18:35:33.03Z,2007-10-10T18:35:33.03Z,Applied into archiva/trunk.
MRM-518,brettporter,Brett Porter,2007-10-09T10:46:03.276Z,2007-10-09T10:46:03.276Z,did you change this in the web interface or the configuration file?
MRM-518,mathiasarens,Mathias Arens,2007-10-09T11:00:17.917Z,2007-10-09T11:00:17.917Z,I changed it over the web interface.
MRM-518,joakime,Joakim Erdfelt,2007-10-09T11:59:20.628Z,2007-10-09T11:59:20.628Z,"This is a bug in the web interface for 1.0-beta-2.
The dual use of ManagedRepositoryConfiguration and ArchivaRepository caused this.
Updates were not propogated correctly.

"
MRM-518,joakime,Joakim Erdfelt,2007-10-10T18:36:35.565Z,2007-10-10T18:36:35.565Z,Closing as duplicate of MRM-493
MRM-519,joakime,Joakim Erdfelt,2007-09-25T19:18:50.701Z,2007-09-25T19:18:50.701Z,"The attached patch causes 5 unit test errors, and 10 failures.

* LegacyBidirectionalRepositoryLayoutTest
** (x) .testGoodFooLibJavadoc()
** (x) .testGoodFooLibSources()
** (!) .testGoodLdapClientsPom()
** (!) .testGoodSnapshotMavenTest()
* DefaultBidirectionalRepositoryLayoutTest
** (x) .testGoodFooLibSources()
** (x) .testGoodSnapshotMavenTest()
** (x) .testGoodDashedArtifactId()
* RepositoryLayoutUtilsTest
** (!) .testSplitFilenameAlphaVersion()
** (!) .testSplitFilenameSnapshot()
** (!) .testSplitFilenameUniqueSnapshot()
** (!) .testSplitFilenameBasicClassifier()
** (!) .testSplitFilenameAlphaClassifier()
** (!) .testSplitFilenameSnapshotClassifier()
** (!) .testSplitFilenameUniqueSnapshotClassifier()
** (!) .testSplitFilenameApacheIncubator()

Can you update the patch so that previous unit tests pass?"
MRM-519,joakime,Joakim Erdfelt,2007-09-25T19:26:11.489Z,2007-09-25T19:26:11.489Z,"I have added a commented unit test into RepositoryLayoutUtilsTest called .testSplitFilenameMavenTestPlugin() that mimics the split process logic from maven 2 and maven 1.

Feel free to uncomment that test case in order to test your patch."
MRM-519,ndeloof,nicolas de loof,2007-09-26T05:43:33.845Z,2007-09-26T05:43:33.845Z,"I just discovered my patch is not applicable as it breaks use of classifiers with ""-"", like the official ""java-with-dependencies"" packaged with the assembly plugin.

I quick&dirty solved this for my archiva instance by removing ""test[09]*"" from the versionKeyword list.
Any better solution is welcome."
MRM-519,brettporter,Brett Porter,2007-10-09T10:04:47.558Z,2007-10-09T10:04:47.558Z,"this looks like a case of the current regex (which differs from the one I've used before for the .htaccess file on the central repository) being over-predictive about ""test"". I think John added this to take care of some edge cases in conversion of the repository - maybe we need to reconsider whether that particular pattern is really needed, or otherwise add another sanity check about the extension and the type in path."
MRM-519,joakime,Joakim Erdfelt,2007-10-10T18:13:43.685Z,2007-10-10T18:13:43.685Z,"Tested with several maven 1 (versions 1.0.2, 1.1-beta-3, and 1.1) projects.
Added maven-test-plugin to each project's dependencies (just for giggles)
Found a double slash bug that maven 1 introduces into the URL.
Fixed in archiva/trunk revision 583638."
MRM-536,joakime,Joakim Erdfelt,2007-10-10T15:50:41.278Z,2007-10-10T15:50:41.278Z,Jira ticket is too wide. manual word wrap added.
MRM-536,brettporter,Brett Porter,2007-10-13T10:50:20.022Z,2007-10-13T10:50:20.022Z,"can we really aim to fix this?

Is it 100% reproducible? If so, does upgrading to JDK 5.0 update 13 help?

I don't see it here."
MRM-536,brettporter,Brett Porter,2007-10-17T02:35:33.129Z,2007-10-17T02:35:33.129Z,re-open if you have an answer to the above
MRM-599,mathiasarens,Mathias Arens,2007-11-20T05:44:18.893Z,2007-11-20T05:44:18.893Z,"I just noticed that this error occurs only if you have more than 4 (>4) repositories/proxy connectors configured. With 4 repositories/proxy connectors the error does not occur on my machine and everything works fine until a dependency cannot be download from the 4 repositories.

But if I add a fifth repository/proxy connector the problem does occur immediately."
MRM-599,mathiasarens,Mathias Arens,2007-11-20T06:38:33.473Z,2007-11-20T06:38:33.473Z,"Here is a list of the repositories I have configured. If I have the first four repositories/proxy connectors configured everything is fine. If I add the 5th or the 6th or both repositories/proxy connectors all downloads fail.

1. (default) central 
Central Repository 	
http://repo1.maven.org/maven2

2. (default) maven2-repository.dev.java.net 	
Java.net Repository for Maven 2
http://download.java.net/maven/2 	

3. jboss 	
JBoss Maven2 Repository
http://repository.jboss.com/maven2

4. ejb3unit 	
EJB3Unit Maven2 Repository
http://ejb3unit.sourceforge.net/maven2 	

5. codehaus 	
Codehaus Maven2 Repository
http://repository.codehaus.org

6. netbeans
Netbeans Maven2 Repository
http://deadlock.netbeans.org/maven2"
MRM-599,brettporter,Brett Porter,2007-11-21T02:42:24.786Z,2007-11-21T02:42:24.786Z,I currently have more than 6 connectors on a repository without problems - will need more investigation to the specific issue
MRM-599,mathiasarens,Mathias Arens,2007-11-21T09:12:40.713Z,2007-11-21T09:12:40.713Z,"I just started with a clean archiva installation again. I cleaned the archiva managed repositories and reinstalled archiva. The only additional settings I added were the remote repositories/proxy connectors from above.

I also removed my local maven repository. 

Starting a build with 'mvn clean install' and archiva failed immediately. It tried to download the maven-clean-plugin from the codehaus repository and not from central. Thus I cannot download anything with a fresh beta-4 installation.

I noticed that proxy connectors are displayed differently in the overview concerning the policies. There are connectors having the cache-failures policy displayed on top and others where the cache failure policy is displayed at bottom. Why are the connector policies displayed so differently? (See the screenshot)

If I remove all connectors having the cache failures policy on top the download works. I don't know if this issue is connected to my problem but it is true. I tested it with several combinations. If there is no proxy connector configured which has the cache-failures policy on top the download works.

Here is a log about the download of the maven-clean-plugin where the download fails:
INFO   | jvm 1    | 2007/11/21 13:38:58 | 2007-11-21 13:38:58,898 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [cache-failures] policy with [yes]
INFO   | jvm 1    | 2007/11/21 13:38:58 | 2007-11-21 13:38:58,899 [SocketListener0-0] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:cache-failures  - OK to fetch, check-failures detected no issues.
INFO   | jvm 1    | 2007/11/21 13:38:58 | 2007-11-21 13:38:58,899 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [releases] policy with [once]
INFO   | jvm 1    | 2007/11/21 13:38:58 | 2007-11-21 13:38:58,899 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [snapshots] policy with [never]
INFO   | jvm 1    | 2007/11/21 13:38:58 | 2007-11-21 13:38:58,900 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - No authentication for remote repository needed
INFO   | jvm 1    | 2007/11/21 13:38:58 | 2007-11-21 13:38:58,901 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Retrieving org/apache/maven/plugins/maven-clean-plugin/maven-metadata.xml from Central Repository
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,151 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Downloaded successfully.
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,152 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Retrieving org/apache/maven/plugins/maven-clean-plugin/maven-metadata.xml.sha1 from Central Repository
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,382 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Downloaded successfully.
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,383 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Checksum.sha1 Downloaded: /p/cred/sp5e/factory/rmsc/archivarepos/internal/org/apache/maven/plugins/maven-clean-plugin/maven-metadata-central.xml.sha1
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,383 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Retrieving org/apache/maven/plugins/maven-clean-plugin/maven-metadata.xml.md5 from Central Repository
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,617 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Downloaded successfully.
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,617 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Checksum.md5 Downloaded: /p/cred/sp5e/factory/rmsc/archivarepos/internal/org/apache/maven/plugins/maven-clean-plugin/maven-metadata-central.xml.md5
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,617 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [checksum] policy with [fix]
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,622 [SocketListener0-0] DEBUG org.apache.maven.archiva.common.utils.Checksums:default  - Valid checksum: /p/cred/sp5e/factory/rmsc/archivarepos/internal/org/apache/maven/plugins/maven-clean-plugin/maven-metadata-central.xml.sha1
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,624 [SocketListener0-0] DEBUG org.apache.maven.archiva.common.utils.Checksums:default  - Valid checksum: /p/cred/sp5e/factory/rmsc/archivarepos/internal/org/apache/maven/plugins/maven-clean-plugin/maven-metadata-central.xml.md5
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,624 [SocketListener0-0] DEBUG org.apache.maven.archiva.policies.PostDownloadPolicy:checksum  - Checksum policy set to FIX, checksum files have been updated.
INFO   | jvm 1    | 2007/11/21 13:38:59 | 2007-11-21 13:38:59,625 [SocketListener0-0] DEBUG org.apache.maven.archiva.repository.scanner.RepositoryContentConsumers:default  - Sending to consumer: index-content
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,108 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Path [org/apache/maven/plugins/maven-clean-plugin/maven-metadata.xml] is not part of defined whitelist (skipping transfer).
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,111 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [cache-failures] policy with [yes]
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,111 [SocketListener0-0] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:cache-failures  - OK to fetch, check-failures detected no issues.
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,111 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [releases] policy with [once]
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,111 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [snapshots] policy with [never]
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,111 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - No authentication for remote repository needed
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,112 [SocketListener0-0] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Retrieving org/apache/maven/plugins/maven-clean-plugin/maven-metadata.xml from Codehaus Maven2 Repository
INFO   | jvm 1    | 2007/11/21 13:39:00 | Nov 21, 2007 1:39:00 PM org.mortbay.jetty.servlet.ServletHandler handle
INFO   | jvm 1    | 2007/11/21 13:39:00 | WARNING: /archiva/repository/internal/org/apache/maven/plugins/maven-clean-plugin/maven-metadata.xml:
INFO   | jvm 1    | 2007/11/21 13:39:00 | org.apache.maven.archiva.proxy.ProxyException: Download failure on resource [http://repository.codehaus.org/org/apache/maven/plugins/maven-clean-plugin/maven-metadata.xml]:Error transferring file
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.transferSimpleFile(DefaultRepositoryProxyConnectors.java:694)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.transferFile(DefaultRepositoryProxyConnectors.java:519)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.fetchFromProxies(DefaultRepositoryProxyConnectors.java:319)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.apache.maven.archiva.web.repository.ProxiedDavServer.fetchMetadataFromProxies(ProxiedDavServer.java:390)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.apache.maven.archiva.web.repository.ProxiedDavServer.fetchContentFromProxies(ProxiedDavServer.java:329)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.apache.maven.archiva.web.repository.ProxiedDavServer.process(ProxiedDavServer.java:197)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.codehaus.plexus.webdav.servlet.multiplexed.MultiplexedWebDavServlet.service(MultiplexedWebDavServlet.java:119)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.apache.maven.archiva.web.repository.RepositoryServlet.service(RepositoryServlet.java:155)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:428)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.jetty.servlet.WebApplicationHandler$CachedChain.doFilter(WebApplicationHandler.java:830)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at com.opensymphony.webwork.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:189)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.jetty.servlet.WebApplicationHandler$CachedChain.doFilter(WebApplicationHandler.java:821)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:39)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.jetty.servlet.WebApplicationHandler$CachedChain.doFilter(WebApplicationHandler.java:821)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at com.opensymphony.webwork.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:88)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.jetty.servlet.WebApplicationHandler$CachedChain.doFilter(WebApplicationHandler.java:821)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:471)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:568)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.http.HttpContext.handle(HttpContext.java:1530)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:633)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.http.HttpContext.handle(HttpContext.java:1482)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.http.HttpServer.service(HttpServer.java:909)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.http.HttpConnection.service(HttpConnection.java:816)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:982)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.http.HttpConnection.handle(HttpConnection.java:833)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
INFO   | jvm 1    | 2007/11/21 13:39:00 | Caused by: org.apache.maven.wagon.TransferFailedException: Error transferring file
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.apache.maven.wagon.providers.http.LightweightHttpWagon.fillInputData(LightweightHttpWagon.java:104)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:68)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.transferSimpleFile(DefaultRepositoryProxyConnectors.java:656)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       ... 28 more
INFO   | jvm 1    | 2007/11/21 13:39:00 | Caused by: java.net.ProtocolException: Server redirected too many  times (20)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1251)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       at org.apache.maven.wagon.providers.http.LightweightHttpWagon.fillInputData(LightweightHttpWagon.java:83)
INFO   | jvm 1    | 2007/11/21 13:39:00 |       ... 30 more
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,426 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [cache-failures] policy with [yes]
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,427 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:cache-failures  - OK to fetch, check-failures detected no issues.
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,427 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [releases] policy with [once]
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,427 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [snapshots] policy with [never]
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,428 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - No authentication for remote repository needed
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,428 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Retrieving org/apache/maven/plugins/maven-clean-plugin/maven-metadata.xml from Central Repository if updated
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,662 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Project Metadata org.apache.maven.plugins:maven-clean-plugin not updated on remote repository ""central"".
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,662 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Path [org/apache/maven/plugins/maven-clean-plugin/maven-metadata.xml] is not part of defined whitelist (skipping transfer).
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,662 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [cache-failures] policy with [yes]
INFO   | jvm 1    | 2007/11/21 13:39:00 | 2007-11-21 13:39:00,664 [SocketListener0-1] INFO  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Transfer not attempted on http://repository.codehaus.orgorg/apache/maven/plugins/maven-clean-plugin/maven-metadata.xml : NO to fetch, check-failures detected previous failure on url: http://repository.codehaus.orgorg/apache/maven/plugins/maven-clean-plugin/maven-metadata.xml

"
MRM-599,mathiasarens,Mathias Arens,2007-11-21T09:15:58.245Z,2007-11-21T09:15:58.245Z,"There are connectors having the cache-failures policy on top and at bottom. Why are the connectors displayed so differently?

"
MRM-599,brettporter,Brett Porter,2007-11-21T23:26:55.667Z,2007-11-21T23:26:55.667Z,"I filed MRM-600 for the different order of the policies (cache-failures). This is just cosmetic :)

I believe the problem is a consequence of the proxy exception - which has been fixed post beta-4. Marking as a duplicate of MRM-586, and we can reopen for a bugfix release if not. 

Thanks!"
MRM-560,joakime,Joakim Erdfelt,2007-10-22T13:34:38.59Z,2007-10-22T13:34:38.59Z,"Can you provide us with the project that you attempted to get the dep tree on when this occured?

For now, I'll fix this to not flow the exception back to the user, but I'm curious as to why the graph is null.
"
MRM-560,olamy,Olivier Lamy (*$^%`),2007-10-23T02:44:32.27Z,2007-10-23T02:44:32.27Z,"Just to complete log output, I found this one more in catalina.out :
2007-10-23 09:42:00,680 [http-8990-exec-2] WARN  org.apache.maven.archiva.web.tags.DependencyTree:default  - Unable to get Graph: Unable to create ArchivaArtifact with empty version.
org.apache.maven.archiva.dependency.graph.GraphTaskException: Unable to create ArchivaArtifact with empty version.
        at org.apache.maven.archiva.dependency.DependencyGraphFactory.getGraph(DependencyGraphFactory.java:151)
        at org.apache.maven.archiva.web.tags.DependencyTree.fetchGraph(DependencyTree.java:227)
        at org.apache.maven.archiva.web.tags.DependencyTree.gatherTreeList(DependencyTree.java:127)
        at org.apache.maven.archiva.web.tags.DependencyTreeTag.doStartTag(DependencyTreeTag.java:128)
        at org.apache.jsp.WEB_002dINF.jsp.artifact.dependencyTree_jsp._jspx_meth_archiva_005fdependency_002dtree_005f0(dependencyTree_jsp.java:102)
        at org.apache.jsp.WEB_002dINF.jsp.artifact.dependencyTree_jsp._jspService(dependencyTree_jsp.java:69)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase"
MRM-560,joakime,Joakim Erdfelt,2007-10-26T18:28:26.504Z,2007-10-26T18:28:26.504Z,"That last exception mentioning ""Unable to create ArchivaArtifact with empty version"" should have some follow up Caused-By exceptions with some more details.

Can you get those to us?
Attach them to this jira (if you feel it is too big of a stack trace)"
MRM-560,joakime,Joakim Erdfelt,2007-10-26T19:02:34.037Z,2007-10-26T19:02:34.037Z,"I've updated archiva/trunk (as of revision 588808) to be more resilient when it comes to bad graph data, and also present more information on what archiva considers to be bad graph data. 

I am unable to reproduce this error, and I need more information on what is going on.
The information that olamy has provided me in IRC is insufficient to reproduce this bug.

olamy, can you use the current archiva/trunk and attempt to reproduce this bug?
If you can, I need the entire complete stack trace. (it'll be pretty big).
"
MRM-560,brettporter,Brett Porter,2007-11-08T16:25:11.838Z,2007-11-08T16:25:11.838Z,let's mark as fixed and reopen for a future version if it can be reproduced
MRM-560,greyfairer,Geert Pante,2008-06-19T04:43:00.879Z,2008-06-19T04:43:00.879Z,"I could reproduce this on Archiva 1.0.2 when asking for a dependency tree for org.springframework:spring:1.2.8 (mirrored from 
http://repo1.maven.org/maven2/org/springframework/spring/1.2.8/spring-1.2.8.pom)

The root exception is the same as the one reported previously, but it's handled slightly differently:

org.apache.maven.archiva.common.ArchivaException: Unable to generate graph for [org.springframework:spring:1.2.8] : Unable to create ArchivaArtifact with empty version [log4j:log4j:null::pom]
	at org.apache.maven.archiva.web.tags.DependencyTree.fetchGraph(DependencyTree.java:253)
	at org.apache.maven.archiva.web.tags.DependencyTree.gatherTreeList(DependencyTree.java:144)
	at org.apache.maven.archiva.web.tags.DependencyTreeTag.doStartTag(DependencyTreeTag.java:134)
	at org.apache.jsp.WEB_002dINF.jsp.artifact.dependencyTree_jsp._jspx_meth_archiva_dependency$1tree_0(dependencyTree_jsp.java:93)
	at org.apache.jsp.WEB_002dINF.jsp.artifact.dependencyTree_jsp._jspService(dependencyTree_jsp.java:64)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
	... 35 more
Caused by: org.apache.maven.archiva.dependency.graph.GraphTaskException: Unable to create ArchivaArtifact with empty version [log4j:log4j:null::pom]
	at org.apache.maven.archiva.dependency.DependencyGraphFactory.getGraph(DependencyGraphFactory.java:151)
	at org.apache.maven.archiva.web.tags.DependencyTree.fetchGraph(DependencyTree.java:245)
	... 87 more
Caused by: java.lang.IllegalArgumentException: Unable to create ArchivaArtifact with empty version [log4j:log4j:null::pom]
	at org.apache.maven.archiva.model.ArchivaArtifact.(ArchivaArtifact.java:56)
	at org.apache.maven.archiva.repository.project.resolvers.ManagedRepositoryProjectResolver.resolveProjectModel(ManagedRepositoryProjectResolver.java:54)
	at org.apache.maven.archiva.repository.project.resolvers.ProjectModelResolverStack.findProject(ProjectModelResolverStack.java:96)
	at org.apache.maven.archiva.repository.project.dependencies.ProjectModelBasedGraphBuilder.resolveModel(ProjectModelBasedGraphBuilder.java:84)
	at org.apache.maven.archiva.repository.project.dependencies.ProjectModelBasedGraphBuilder.resolveNode(ProjectModelBasedGraphBuilder.java:71)
	at org.apache.maven.archiva.dependency.graph.tasks.ResolveGraphTask.executeTask(ResolveGraphTask.java:84)
	at org.apache.maven.archiva.dependency.graph.tasks.PopulateGraphMasterTask.executeTask(PopulateGraphMasterTask.java:60)
	at org.apache.maven.archiva.dependency.DependencyGraphFactory.getGraph(DependencyGraphFactory.java:137)
	... 88 more"
MRM-541,wsmoak,Wendy Smoak,2007-10-14T10:49:07.232Z,2007-10-14T10:49:07.232Z,"Are you saying 
(1) that you don't want to have to modify the configuration by editing every proxy connector, or 
(2) that you don't want this feature to modify the configuration at all?

How temporarily?  Seems like it would need to modify the configuration in order to persist across a restart, if that's a requirement.
"
MRM-541,brettporter,Brett Porter,2007-10-14T17:52:31.471Z,2007-10-14T17:52:31.471Z,"I was saying (1), (2) is fine. Persisting across restart is probably a good idea, though I would be happy enough with it just being transient too."
MRM-541,cbrown,Carlton Brown,2008-02-05T13:41:54.218Z,2008-02-05T13:41:54.218Z,"I agree with this one... I would envision it as each proxy connector having a 'disabled' checkbox in the gui, with its state being persistent.   I would implement this both for repository proxies and network proxies as well."
MRM-541,jameswdumay,James William Dumay,2008-05-08T01:42:22.01Z,2008-05-08T01:42:22.01Z,Moving to 1.1.x
MRM-541,jameswdumay,James William Dumay,2008-05-08T02:22:39.708Z,2008-05-08T02:22:39.708Z,Moving to 1.2
MRM-541,detyo,Detelin Yordanov,2008-06-26T09:43:56.967Z,2008-06-26T09:43:56.967Z,"Yep, we are just moving to Archiva, being previously on Artifactory. The Artifactory project has an offline property for each remote repo.
It cannot be configured through the GUI but is convenient enough.
Could the Proxy Connector's black list be used to achieve the same effect in Archiva?"
MRM-541,jameswdumay,James William Dumay,2008-08-19T03:48:58.272Z,2008-08-19T03:48:58.272Z,"Committed r686984 on branch https://svn.apache.org/repos/asf/archiva/branches/MRM-541

* Implemented UI for enabling/disabling proxy connectors
* changes to RepositoryProxyConnectors to skip offline connectors

Needed:
* Unit tests for new Actions
* Unit tests for RepositoryProxyConnectors modifications"
MRM-541,jameswdumay,James William Dumay,2008-08-19T06:35:52.77Z,2008-08-19T06:35:52.77Z,"Committed r686983 on branch https://svn.apache.org/repos/asf/archiva/branches/MRM-541

* Unit tests for RepositoryProxyConnectors modifications"
MRM-541,jameswdumay,James William Dumay,2008-08-19T06:47:38.029Z,2008-08-19T06:47:38.029Z,"Committed r687026 and r687032 on branch https://svn.apache.org/repos/asf/archiva/branches/MRM-541

* Unit tests for actions"
MRM-541,jameswdumay,James William Dumay,2008-08-19T07:11:56.371Z,2008-08-19T07:11:56.371Z,Merged into trunk r687035.
MRM-541,jameswdumay,James William Dumay,2008-08-19T07:48:47.563Z,2008-08-19T07:48:47.563Z,"Committed r687038

* Updated formatting.

It would be really nice if someone could come up with appropriate Disable/Enable icons for this feature."
MRM-541,jameswdumay,James William Dumay,2008-08-20T02:48:28.656Z,2008-08-20T02:48:28.656Z,"Committed r687275 on trunk

* Adding icons for enable/disable from http://en.wikipedia.org/wiki/Power_symbol which are public domain."
MRM-526,mjsell,Michael Sell,2008-03-01T07:00:42.461Z,2008-03-01T07:00:42.461Z,"I am in an environment where my major central mirror goes down somewhat often.  Whenever it does my builds essentially hang because of the long timeouts in Archiva.  If this feature is to make the timeouts ""easily"" configurable, how does one do it the hard way right now?  It also seems that Archiva should perhaps cache that a remote repository is unreachable and not force every request to timeout individually.  As it is, to keep my builds going I have to change my proxy url every time the remote repository goes down just to point to something else that I know is up to avoid the timeouts."
MRM-526,ziesemer,Mark A. Ziesemer,2012-03-27T17:34:36.127Z,2012-03-27T17:34:36.127Z,"Can anyone provide any additional insight into this?  As of 1.3.5, I see no ""archiva-policy.jar"".  There is an ""archiva-policies-1.3.5.jar"" - but I can't find a ""plexus.xml"" there or anywhere else.

Might this relate to the ""url-failures-cache"" shown under ""System Status"" / ""Caches"" in 1.3.5?  If so, there is a ""Flush"" link.  But without manually flushing it, I would hope that entries in this cache would automatically expire after a given timeout?  If so, what is this timeout - and how could it be configured, easy or not?"
MRM-526,olamy,Olivier Lamy (*$^%`),2012-03-27T17:43:45.575Z,2012-03-27T17:43:45.575Z,"should work with adding an entry in WEB-INF/classes/META-INF/plexus/application.xml
see time-to* values.
{code}
    <component>
      <role>org.codehaus.plexus.cache.Cache</role>
      <role-hint>url-failures-cache</role-hint>
      <implementation>org.codehaus.plexus.cache.ehcache.EhcacheCache</implementation>
      <description>URL Failure Cache</description>
      <configuration>
        <disk-expiry-thread-interval-seconds>600</disk-expiry-thread-interval-seconds>
        <disk-persistent>true</disk-persistent>
        <disk-store-path>${java.io.tmpdir}/archiva/urlcache</disk-store-path>
        <eternal>false</eternal>
        <max-elements-in-memory>1000</max-elements-in-memory>
        <memory-eviction-policy>LRU</memory-eviction-policy>
        <name>url-failures-cache</name>
        <overflow-to-disk>false</overflow-to-disk>
        <!-- 45 minutes = 2700 seconds -->
        <time-to-idle-seconds>2700</time-to-idle-seconds>
        <!-- 30 minutes = 1800 seconds  -->
        <time-to-live-seconds>1800</time-to-live-seconds>
      </configuration>
    </component>
{code}

I agree on having something more easily configurable (per repo)
"
MRM-526,ziesemer,Mark A. Ziesemer,2012-03-27T18:27:52.473Z,2012-03-27T18:27:52.473Z,"Thanks!!  So, is it safe to assume that without this additional configuration, that no, the URL failures cache will not timeout, unless manually flushed?  Otherwise, how would I determine the default values of <eternal> and the <time-to-*> values?  I think ""time-to-live"" is pretty simple.  What is ""time-to-idle""?"
MRM-526,olamy,Olivier Lamy (*$^%`),2012-03-28T01:54:28.726Z,2012-03-28T01:54:28.726Z,"I have pasted to you the default values provided in archiva (see file http://svn.apache.org/repos/asf/archiva/branches/archiva-1.3.x/archiva-modules/archiva-base/archiva-policies/src/main/resources/META-INF/plexus/components-fragment.xml which is included in the jar archiva-policies-1.3.5.jar).
Now you can override those values as I explained to you.
For configuration values that's ehcache. See ehcache documentation."
MRM-526,olamy,Olivier Lamy (*$^%`),2012-12-29T18:01:07.214Z,2012-12-29T18:01:07.214Z,fixed.
MRM-524,jameswdumay,James William Dumay,2008-05-08T01:42:23.605Z,2008-05-08T01:42:23.605Z,Moving to 1.1.x
MRM-568,joakime,Joakim Erdfelt,2007-11-08T09:35:41.876Z,2007-11-08T09:35:41.876Z,"I am unable to reproduce this.
Can you verify?
Or provide a larger stack trace?"
MRM-568,oching,Maria Odea Ching,2008-04-09T01:21:19.303Z,2008-04-09T01:21:19.303Z,"Still getting this with archiva-trunk -r646173. 
Below are more logs, starting with the removal of the repository:


2008-04-09 14:17:09,191 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant-nodeps:jar:1.6.5 from the database.
2008-04-09 14:17:09,359 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant-nodeps:pom:1.6.5 from the database.
2008-04-09 14:17:09,377 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact ant:ant-nodeps:pom:1.6.5 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:09,377 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant-optional:jar:1.5.1 from the database.
2008-04-09 14:17:09,467 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant-optional:pom:1.5.1 from the database.
2008-04-09 14:17:09,485 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact ant:ant-optional:pom:1.5.1 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:09,485 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant-launcher:pom:1.6.5 from the database.
2008-04-09 14:17:09,521 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant-launcher:jar:1.6.5 from the database.
2008-04-09 14:17:09,525 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact ant:ant-launcher:jar:1.6.5 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:09,525 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant-junit:pom:1.6.5 from the database.
2008-04-09 14:17:09,551 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant:pom:1.5 from the database.
2008-04-09 14:17:09,576 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant:jar:1.6 from the database.
2008-04-09 14:17:09,602 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant:pom:1.6 from the database.
2008-04-09 14:17:09,608 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact ant:ant:pom:1.6 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:09,608 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant:pom:1.5.4 from the database.
2008-04-09 14:17:09,614 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact ant:ant:pom:1.5.4 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:09,615 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant:jar:1.5.4 from the database.
2008-04-09 14:17:09,619 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact ant:ant:jar:1.5.4 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:09,619 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant:jar:1.6.2 from the database.
2008-04-09 14:17:09,663 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant:pom:1.6.2 from the database.
2008-04-09 14:17:09,667 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact ant:ant:pom:1.6.2 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:09,667 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant:pom:1.6.5 from the database.
2008-04-09 14:17:09,797 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant:java-source:sources:1.6.5 from the database.
2008-04-09 14:17:09,802 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact ant:ant:java-source:sources:1.6.5 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:09,802 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact ant:ant:jar:1.6.5 from the database.
2008-04-09 14:17:09,805 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact ant:ant:jar:1.6.5 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:09,805 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact antlr:antlr:java-source:sources:2.7.2 from the database.
2008-04-09 14:17:09,838 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact antlr:antlr:pom:2.7.2 from the database.
2008-04-09 14:17:09,849 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact antlr:antlr:pom:2.7.2 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:09,849 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact antlr:antlr:jar:2.7.2 from the database.
2008-04-09 14:17:09,853 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact antlr:antlr:jar:2.7.2 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:09,853 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact aopalliance:aopalliance:jar:1.0 from the database.
2008-04-09 14:17:09,888 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Removing artifact aopalliance:aopalliance:pom:1.0 from the database.
2008-04-09 14:17:09,914 [btpool0-8] INFO  action#deleteManagedRepositoryAction  - Project model of artifact aopalliance:aopalliance:pom:1.0 does not exist in the database. Moving on to the next artifact.
2008-04-09 14:17:27,761 [btpool0-5] INFO  action#schedulerAction  - [ActionMessage] Your request to have repository [test.repository] be indexed has been queued.
2008-04-09 14:17:27,763 [pool-2-thread-1] INFO  org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor  - Executing task from queue with job name: repository-job:test.repository
2008-04-09 14:17:27,773 [pool-2-thread-1] INFO  org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance  - Walk Started: [test.repository] /home/deng/TestFiles/test.repository
2008-04-09 14:17:29,144 [pool-2-thread-1] INFO  org.apache.maven.archiva.repository.scanner.RepositoryScannerInstance  - Walk Finished: [test.repository] /home/deng/TestFiles/test.repository
2008-04-09 14:17:29,344 [pool-2-thread-1] INFO  org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor  - Finished repository task: 
.\ Scan of test.repository \.__________________________________________
  Repository Dir    : /home/deng/TestFiles/test.repository
  Repository Name   : Test Repo
  Repository Layout : default
  Known Consumers   : (6 configured)
                      create-missing-checksums
                      update-db-artifact
                      index-content
                      metadata-updater
a:154)
""	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:88)""
""	at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:70)""
""	at org.codehaus.plexus.taskque
                      auto-rename
                      auto-remove
  Invalid Consumers : <none>
  Duration          : 1 Second 371 Milliseconds
  When Gathered     : 4/9/08 2:17 PM
  Total File Count  : 156
  Avg Time Per File : 8 Milliseconds
______________________________________________________________
2008-04-09 14:17:40,975 [pool-1-thread-1] INFO  org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor  - Executing task from queue with job name: database-job:user-requested
2008-04-09 14:17:40,975 [pool-1-thread-1] INFO  org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor  - Task: Updating unprocessed artifacts
2008-04-09 14:17:41,000 [btpool0-2] INFO  action#schedulerAction  - [ActionMessage] Your request to update the database has been queued.
2008-04-09 14:17:41,035 [pool-1-thread-1] ERROR org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - Unable to process model /home/deng/TestFiles/test.repository/ant/ant-nodeps/1.6.5/ant-nodeps-1.6.5.pom due to : javax.jdo.JDOUserException : Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
javax.jdo.JDOUserException: Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
	at org.jpox.store.rdbms.fieldmanager.ParameterSetter.storeStringField(ParameterSetter.java:120)
	at org.jpox.state.StateManagerImpl.providedStringField(StateManagerImpl.java:2757)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideField(ArchivaProjectModel.java)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideFields(ArchivaProjectModel.java)
	at org.jpox.state.StateManagerImpl.provideFields(StateManagerImpl.java:3115)
	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:252)
	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
	at org.jpox.store.StoreManager.insert(StoreManager.java:938)
	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1206)
	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1277)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:190)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:163)
	at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
	at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:184)
	at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:50)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:154)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:88)
	at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:70)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:595)
2008-04-09 14:17:41,252 [pool-1-thread-1] ERROR org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - Unable to process model /home/deng/TestFiles/test.repository/ant/ant-optional/1.5.1/ant-optional-1.5.1.pom due to : javax.jdo.JDOUserException : Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
javax.jdo.JDOUserException: Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
	at org.jpox.store.rdbms.fieldmanager.ParameterSetter.storeStringField(ParameterSetter.java:120)
	at org.jpox.state.StateManagerImpl.providedStringField(StateManagerImpl.java:2757)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideField(ArchivaProjectModel.java)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideFields(ArchivaProjectModel.java)
	at org.jpox.state.StateManagerImpl.provideFields(StateManagerImpl.java:3115)
	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:252)
	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
	at org.jpox.store.StoreManager.insert(StoreManager.java:938)
	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1206)
	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1277)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:190)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:163)
	at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
	at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:184)
	at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:50)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:154)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:88)
	at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:70)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:595)
2008-04-09 14:17:41,279 [pool-1-thread-1] ERROR org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - Unable to process model /home/deng/TestFiles/test.repository/ant/ant-launcher/1.6.5/ant-launcher-1.6.5.pom due to : javax.jdo.JDOUserException : Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
javax.jdo.JDOUserException: Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
	at org.jpox.store.rdbms.fieldmanager.ParameterSetter.storeStringField(ParameterSetter.java:120)
	at org.jpox.state.StateManagerImpl.providedStringField(StateManagerImpl.java:2757)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideField(ArchivaProjectModel.java)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideFields(ArchivaProjectModel.java)
	at org.jpox.state.StateManagerImpl.provideFields(StateManagerImpl.java:3115)
	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:252)
	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
	at org.jpox.store.StoreManager.insert(StoreManager.java:938)
	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1206)
	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1277)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:190)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:163)
	at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
	at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:184)
	at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:50)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:154)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:88)
	at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:70)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:595)
2008-04-09 14:17:41,311 [pool-1-thread-1] ERROR org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - Unable to process model /home/deng/TestFiles/test.repository/ant/ant-junit/1.6.5/ant-junit-1.6.5.pom due to : javax.jdo.JDOUserException : Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
javax.jdo.JDOUserException: Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
	at org.jpox.store.rdbms.fieldmanager.ParameterSetter.storeStringField(ParameterSetter.java:120)
	at org.jpox.state.StateManagerImpl.providedStringField(StateManagerImpl.java:2757)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideField(ArchivaProjectModel.java)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideFields(ArchivaProjectModel.java)
	at org.jpox.state.StateManagerImpl.provideFields(StateManagerImpl.java:3115)
	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:252)
	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
	at org.jpox.store.StoreManager.insert(StoreManager.java:938)
	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1206)
	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1277)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:190)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:163)
	at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
	at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:184)
	at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:50)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:154)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:88)
	at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:70)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:595)
2008-04-09 14:17:41,337 [pool-1-thread-1] ERROR org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - Unable to process model /home/deng/TestFiles/test.repository/ant/ant/1.5/ant-1.5.pom due to : javax.jdo.JDOUserException : Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
javax.jdo.JDOUserException: Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
	at org.jpox.store.rdbms.fieldmanager.ParameterSetter.storeStringField(ParameterSetter.java:120)
	at org.jpox.state.StateManagerImpl.providedStringField(StateManagerImpl.java:2757)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideField(ArchivaProjectModel.java)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideFields(ArchivaProjectModel.java)
	at org.jpox.state.StateManagerImpl.provideFields(StateManagerImpl.java:3115)
	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:252)
	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
	at org.jpox.store.StoreManager.insert(StoreManager.java:938)
	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1206)
	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1277)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:190)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:163)
	at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
	at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:184)
	at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:50)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:154)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:88)
	at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:70)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:595)
2008-04-09 14:17:41,369 [pool-1-thread-1] ERROR org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - Unable to process model /home/deng/TestFiles/test.repository/ant/ant/1.6/ant-1.6.pom due to : javax.jdo.JDOUserException : Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
javax.jdo.JDOUserException: Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
	at org.jpox.store.rdbms.fieldmanager.ParameterSetter.storeStringField(ParameterSetter.java:120)
	at org.jpox.state.StateManagerImpl.providedStringField(StateManagerImpl.java:2757)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideField(ArchivaProjectModel.java)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideFields(ArchivaProjectModel.java)
	at org.jpox.state.StateManagerImpl.provideFields(StateManagerImpl.java:3115)
	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:252)
	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
	at org.jpox.store.StoreManager.insert(StoreManager.java:938)
	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1206)
	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1277)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:190)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:163)
	at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
	at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:184)
	at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:50)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:154)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:88)
	at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:70)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:595)
2008-04-09 14:17:41,388 [pool-1-thread-1] WARN  org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - File ant-1.5.4.pom has an invalid project model [groupId:ant|artifactId:ant|version:1.5.4.1|packaging:jar]; The model version [1.5.4.1] does not match the version portion of the filename: 1.5.4
2008-04-09 14:17:41,390 [pool-1-thread-1] WARN  org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - Invalid or corrupt pom. Project model not added to database - ant:ant:1.5.4.1
2008-04-09 14:17:41,465 [pool-1-thread-1] ERROR org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - Unable to process model /home/deng/TestFiles/test.repository/ant/ant/1.6.2/ant-1.6.2.pom due to : javax.jdo.JDOUserException : Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
javax.jdo.JDOUserException: Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
	at org.jpox.store.rdbms.fieldmanager.ParameterSetter.storeStringField(ParameterSetter.java:120)
	at org.jpox.state.StateManagerImpl.providedStringField(StateManagerImpl.java:2757)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideField(ArchivaProjectModel.java)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideFields(ArchivaProjectModel.java)
	at org.jpox.state.StateManagerImpl.provideFields(StateManagerImpl.java:3115)
	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:252)
	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
	at org.jpox.store.StoreManager.insert(StoreManager.java:938)
	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1206)
	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1277)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:190)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:163)
	at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
	at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:184)
	at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:50)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:154)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:88)
	at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:70)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:987)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
	at java.lang.Thread.run(Thread.java:595)
2008-04-09 14:17:41,524 [pool-1-thread-1] ERROR org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer  - Unable to process model /home/deng/TestFiles/test.repository/ant/ant/1.6.5/ant-1.6.5.pom due to : javax.jdo.JDOUserException : Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
javax.jdo.JDOUserException: Field org.apache.maven.archiva.model.ArchivaProjectModel.origin is null, but is mandatory as its described in the jdo metadata
	at org.jpox.store.rdbms.fieldmanager.ParameterSetter.storeStringField(ParameterSetter.java:120)
	at org.jpox.state.StateManagerImpl.providedStringField(StateManagerImpl.java:2757)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideField(ArchivaProjectModel.java)
	at org.apache.maven.archiva.model.ArchivaProjectModel.jdoProvideFields(ArchivaProjectModel.java)
	at org.jpox.state.StateManagerImpl.provideFields(StateManagerImpl.java:3115)
	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:252)
	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
	at org.jpox.store.StoreManager.insert(StoreManager.java:938)
	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1206)
	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1277)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:190)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:163)
	at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
	at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:184)
	at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:50)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.ja"
MRM-568,jameswdumay,James William Dumay,2008-05-08T01:42:22.843Z,2008-05-08T01:42:22.843Z,Moving to 1.1.x
MRM-571,brettporter,Brett Porter,2007-10-31T19:06:29.763Z,2007-10-31T19:06:29.763Z,was addressed in a separate issue
MRM-501,atarutin,Aleksandr Tarutin,2007-09-14T14:35:56.3Z,2007-09-14T14:35:56.3Z,"It seems like this is a part of a larger problem. After I manually created the file ${appserver.base}/conf/archiva.xml, the configuration can be saved from the UI. So changing the settings in the UI does not create that file."
MRM-501,joakime,Joakim Erdfelt,2007-09-25T22:27:19.686Z,2007-09-25T22:27:19.686Z,"You will notice that many components, libs, and build tools that archiva uses require the existence of  a valid ${user.home} directory.

The configuration pieces are intentionally designed to only write to the last successfully located archiva.xml that exists on a local filesystem.

current order:

  1. embedded archiva.xml (found in jar files)
  2. $\{appserver.base}/conf/archiva.xml
  3. $\{user.home}/.m2/archiva.xml

One solution I see to this, is to prevent editing of the configuration if you are running in an environment where ...

  1. ${user.home}/.m2/archiva.xml does not exist, or cannot exist.
  2. ${appserver.base}/conf/archiva.xml does not exist.

In this scenario, we would need to disable the admin screens and then tell the admin the reason for the disabled admin screens, and to either change the environment, or create the ${appserver.base}/conf/archiva.xml"
MRM-501,joakime,Joakim Erdfelt,2007-10-11T20:26:15.716Z,2007-10-11T20:26:15.716Z,Fixed in archiva/trunk revision 584021.
MRM-593,ndeloof,nicolas de loof,2007-11-15T03:57:11.565Z,2007-11-15T03:57:11.565Z,"Classifiers are not a supported m1 feature, and version with classifier cannot be parsed by archiva in a deterministic way (classifier can be any String !)

Having a way to manually configure m1 to artifact conversion for some artifacts may solve this issue."
MRM-593,brettporter,Brett Porter,2010-02-23T02:41:10.707Z,2010-02-23T02:41:10.707Z,"for review, I think this is covered by the legacy mapping"
MRM-593,brettporter,Brett Porter,2010-02-28T21:39:05.546Z,2010-02-28T21:39:05.546Z,now addressed by the path parsing as linked.
MRM-570,brettporter,Brett Porter,2007-10-31T19:05:40.287Z,2007-10-31T19:05:40.287Z,Joakim decided this wasn't necessary.
MRM-595,ndeloof,nicolas de loof,2007-11-15T02:57:28.886Z,2007-11-15T02:57:28.886Z,"- simple change on plexus-webdav-api to support logicalResource beeing changed after the DavServerRequest has been created.

- change on archiva-webapp ProxiedDavServer to fecth from proxied prior to computing the resource File

- testcase to demonstrate the issue and the Fix."
MRM-595,ndeloof,nicolas de loof,2007-11-15T03:51:50.923Z,2007-11-15T03:51:50.923Z,my patch contains a stupid typo on archiva parent POM for <dependencyManagement> : plexus-webdav-api version is 1.0-beta-2-SNAPSHOT and not 1.0-beta-2-SNAPSHO**S**T
MRM-569,joakime,Joakim Erdfelt,2007-11-02T14:05:01.086Z,2007-11-02T14:05:01.086Z,"Fix is committed to archiva-backend-security branch revision 591410.

https://svn.apache.org/repos/asf/maven/archiva/branches/archiva-backend-security

Needs to be reviewed and merged into trunk."
MRM-569,joakime,Joakim Erdfelt,2007-11-06T12:48:33.953Z,2007-11-06T12:48:33.953Z,Completed work merged from branch to trunk in revision 592513.
MRM-594,ndeloof,nicolas de loof,2007-11-15T05:08:06.238Z,2007-11-15T05:08:06.238Z,"This patch doesn't fully solve the issue but creates the required basis for :

- converts the PathParsers to plexus components (not static utils classes), so that it can access other components in future (archivaConfiguration ?).
- add support for custom artifacts resolution in LegacyPathParser, based on a String representation  ""groupId:artifactId:version:classifier:type"" (classifier beeing optional)
- register a default exception to support jaxen-1.0-FCS-full (because it is used by maven 1 itself) as demonstration of the reslution exception
- testcase

this patch must be applied on archiva-repository-layer"
MRM-594,brettporter,Brett Porter,2007-11-15T21:39:38.099Z,2007-11-15T21:39:38.099Z,"do you mind if we hold this for post 1.0, since it's a feature? I don't want to risk any late breaking regressions :)

This will give more time for a more complete solution, as it seems you've indicated this is an interim one"
MRM-594,ndeloof,nicolas de loof,2007-11-19T02:37:01.635Z,2007-11-19T02:37:01.635Z,"The idea of this patch is to prepare for a more complete solution with as limited as possible changes on the existing codebase.
The patch simply converts a static util class to a plexus component !

It also provides support for jaxen-1.0-FCS-full that will be required by ALL maven1 users that will use archiva as a maven proxy.

I understand you want to release a 1.0 final ASAP, but the curent code base is fully broken for maven1 users."
MRM-594,ndeloof,nicolas de loof,2007-11-20T04:38:00.295Z,2007-11-20T04:38:00.295Z,"This new patch covers :

- make PathParsers plexus component instead of static utility classes
- inject ArchivaConfiguration in LegacyPathParser
- extend ArchivaConfiguration to support LegacyArtifactPaths
- default archiva configuration includes support for ""jaxen-1.0-FCS-full""
- new ""legacy support"" entry in admin web UI
- new admin action to list / add / delete LegacyArtifactPaths
- testCases updates

Please note :  there may be conflicts with my patches for MRM-595 & MRM-596, in particular for testcases.

"
MRM-594,ndeloof,nicolas de loof,2007-12-13T05:37:53.942Z,2007-12-13T05:37:53.942Z,"New element in archivaConfiguration
PathParsers converted to plexus components, to acces the configuration
Web UI to manage custom path->artifactReference
Server-side check for consistency : path->artifactReference->path must be equals
client side scripts to avoid typos"
MRM-522,joakime,Joakim Erdfelt,2007-09-26T11:02:00.282Z,2007-09-26T11:02:00.282Z,"This has been fixed already in 1.0-beta-2.
Please upgrade."
MRM-573,oching,Maria Odea Ching,2008-02-06T02:58:53.549Z,2008-02-06T02:58:53.549Z,This must have been fixed already..
MRM-573,oching,Maria Odea Ching,2008-02-06T03:01:11.421Z,2008-02-06T03:01:11.421Z,"I've verified this in archiva-trunk -r618853, btw. "
MRM-573,jahlborn,james,2008-02-27T09:30:03.026Z,2008-02-27T09:30:03.026Z,"i'm running the 1.0.2 branch, version 631389, and this does not seem to be fixed.  all our old snapshot dirs for our projects still exist with just some metadata files.  if i list the contents of 1.0-SNAPSHOT these files remain:

- maven-metadata.xml 
- maven-metadata.xml.md5
- maven-metadata.xml.sha1

we are long past the 1.0 version (we are on 1.0.30).  we do not have ""delete released snapshots"" enabled, but i would assume that would not matter if the retention policy still ends up cleaning out an old snapshot dir."
MRM-573,aheritier,Arnaud HERITIER,2008-05-06T06:32:16.95Z,2008-05-06T06:32:16.95Z,same issue for me with 1.0.2. I also noticed that archiva didn't delete site descriptors.
MRM-573,brettporter,Brett Porter,2010-02-23T01:38:41.219Z,2010-02-23T01:38:41.219Z,for testing
MRM-573,brettporter,Brett Porter,2010-02-28T21:47:52.591Z,2010-02-28T21:47:52.591Z,working in 1.4 and probably earlier versions
MRM-548,joakime,Joakim Erdfelt,2007-10-18T13:56:04.73Z,2007-10-18T13:56:04.73Z,"I think you might be mis-interpreting the policy settings.

See http://docs.codehaus.org/display/MAVENUSER/Archiva+Proxy+Policies"
MRM-548,brettporter,Brett Porter,2007-10-18T19:58:47.072Z,2007-10-18T19:58:47.072Z,"so every request for metadata hits the proxies by default? That doesn't sound right either.

I'll address the confusing options in the other issue."
MRM-548,brettporter,Brett Porter,2007-10-31T19:27:23.264Z,2007-10-31T19:27:23.264Z,confirmed - it currently checks for updates from the repository on every request. This would not be optimal in a large team environment - however daily is probably too infrequent. I would suggest hourly is a reasonable compromise?
MRM-548,joakime,Joakim Erdfelt,2007-11-01T01:25:41.289Z,2007-11-01T01:25:41.289Z,"Current default settings in archiva/trunk (checked on revision 590908).

(NOTE: These use the new terms as outlined in MRM-547)

Releases: Hourly
Snapshots: Hourly
Cached-Failures: No
Checksum Policy: Fix

If this is satisfactory, then this jira can be closed."
MRM-513,jameswdumay,James William Dumay,2007-09-26T17:56:59.775Z,2007-09-26T17:56:59.775Z,Here is an implementation of password auth.
MRM-513,jameswdumay,James William Dumay,2007-09-29T02:38:21.521Z,2007-09-29T02:38:21.521Z,Verified this works with http(s) and webdav.
MRM-513,joakime,Joakim Erdfelt,2007-10-02T13:01:10.185Z,2007-10-02T13:01:10.185Z,"Thank you.
Committed in revision 581324 of archiva/trunk."
MRM-549,joakime,Joakim Erdfelt,2007-10-18T13:16:50.574Z,2007-10-18T13:16:50.574Z,"The option for 'ignore' is the same thing.

This kinda falls into line with the on-screen instructions and details that I started to outline in MRM-366.
"
MRM-549,joakime,Joakim Erdfelt,2007-10-18T13:55:59.503Z,2007-10-18T13:55:59.503Z,"I think you might be mis-interpreting the policy settings.

See http://docs.codehaus.org/display/MAVENUSER/Archiva+Proxy+Policies"
MRM-549,brettporter,Brett Porter,2007-10-18T19:59:52.829Z,2007-10-18T19:59:52.829Z,"I think the policy settings are misleading. Every option applies to the artifact, while ""ignored"" applies to the policy. I think these should be changed. "
MRM-549,joakime,Joakim Erdfelt,2007-11-01T01:23:13.899Z,2007-11-01T01:23:13.899Z,Fixed in archiva/trunk revision 590908.
MRM-534,joakime,Joakim Erdfelt,2007-10-10T17:23:50.012Z,2007-10-10T17:23:50.012Z,"Made mock verification OS neutral.
Fixed in archiva/trunk."
MRM-542,dantran,Dan Tran,2007-10-14T12:14:24.134Z,2007-10-14T12:14:24.134Z,"Cobertura requires atleast one java file in source directory, for my case i have a dummy java file just to get by.  So the issue is in Cobertura.
"
MRM-542,wsmoak,Wendy Smoak,2007-10-14T12:43:02.471Z,2007-10-14T12:43:02.471Z,"Thanks, Dan.  That makes sense for the archiva-signature-consumers module, but not for archiva-applet which does have source code (no tests though).

It doesn't seem to break during instrumentation, but later when it looks for cobertura.ser.  

I wonder if there's a way to get an ""empty"" coberture.ser in place before that time?  (Not sure whether that means zero bytes or something in whatever format it uses that means 'no results'.)

"
MRM-542,wsmoak,Wendy Smoak,2007-10-14T16:22:54.215Z,2007-10-14T16:22:54.215Z,Being able to skip execution of Cobertura in certain modules would be useful.  I opened http://jira.codehaus.org/browse/MCOBERTURA-75 .
MRM-542,brettporter,Brett Porter,2011-09-12T08:52:09.283Z,2011-09-12T08:52:09.283Z,We can get this from analysis.apache.org now
MRM-598,oching,Maria Odea Ching,2007-11-18T23:17:57.235Z,2007-11-18T23:17:57.235Z,hmm.. i can't seem to replicate this.
MRM-598,nramirez,Nap Ramirez,2007-11-19T00:34:59.59Z,2007-11-19T00:34:59.59Z,I can't replicate this issue too.  Maybe you can provide us the exact steps you did and the values you used when you encountered this problem?
MRM-598,seidler,Stefan Seidel,2008-02-11T06:54:11.162Z,2008-02-11T06:54:11.162Z,"I get the same error. Using Archiva 1.0.1, Firefox 2.0.0.11 under Linux 2.6.23.12. When I emptied the field the creation worked. Same thing for report. Screenshot attached."
MRM-598,oching,Maria Odea Ching,2008-02-13T01:43:52.672Z,2008-02-13T01:43:52.672Z,Reopened issue as per last comment.
MRM-598,brettporter,Brett Porter,2008-02-13T07:19:39.898Z,2008-02-13T07:19:39.898Z,the screenshot attached refers to a completely different field :) re-closing...
MRM-598,in-fke,Florian Kolbe,2008-02-20T05:05:01.628Z,2008-02-20T05:05:01.628Z,Here's a screenshot - I have this problem an a plain vanilla 1.0.1 standalone installation.
MRM-598,seidler,Stefan Seidel,2008-02-20T07:05:57.74Z,2008-02-20T07:05:57.74Z,"Well Brett, what do you want? I even showed that the problem is not specific to the repo creation page, but a more general problem. Please read my first comment, it says ""Same thing for report""."
MRM-598,wsmoak,Wendy Smoak,2008-02-20T08:18:00.108Z,2008-02-20T08:18:00.108Z,"If it's a more general problem, please open a new issue.  That's why Brett closed it-- this issue is specific to one field on the repository creation page."
MRM-598,brettporter,Brett Porter,2008-02-20T12:47:29.889Z,2008-02-20T12:47:29.889Z,"I was also not able to reproduce - but we have two reports.

Do you have Javascript disabled? It may be that we can't reproduce because the Javascript catches it and it fails on the server?"
MRM-598,memese,Gunther Walther,2008-03-09T10:28:15.087Z,2008-03-09T10:28:15.087Z,I got the same error on MacOS X10.5/Leopard and Firefox 2.0.0.12.  Archiva standalone installation.
MRM-598,memese,Gunther Walther,2008-03-09T11:18:27.256Z,2008-03-09T11:18:27.256Z,"Found a probable cause - the validation code checks for ""1.000"" instead of ""1000"". Results in a fairly narrow range (0...1) that is ok.


 -  636      if (form.elements['repository.daysOlder']) {
 -  637             field = form.elements['repository.daysOlder'];
 -  638             var error = ""Repository Purge By Days Older Than needs to be between 0 and 1000."";
 -  639             if (field.value != null) {
 -  640                 if (parseInt(field.value) <
 -  641                      0 ||
 -  642                         parseInt(field.value) >
 -  643                            1.000) {
 -  644                     addError(field, error);
 -  645                     errors = true;
 -  646                 }
 -  647             }
 -  648         }
~                                    "
MRM-598,twdev,Thomas Winkler,2008-03-18T02:10:28.278Z,2008-03-18T02:10:28.278Z,It looks like this could be a problem depending on the used JVM user.language. I commented on a similar issue MRM-617..
MRM-598,axismundi,Marc Lustig,2008-03-18T09:26:07.017Z,2008-03-18T09:26:07.017Z,"here the same with a plain vanilla 1.0.1 standalone installation.
I never had this problem with any webwork app before thou."
MRM-598,brettporter,Brett Porter,2008-03-20T08:17:36.308Z,2008-03-20T08:17:36.308Z,"I suspect this is a localisation thing - here I get 1,000 for 1000.

I've just removed the upper limit for now"
MRM-508,joakime,Joakim Erdfelt,2007-09-24T13:52:18.655Z,2007-09-24T13:52:18.655Z,Can you provide more details on what this is?
MRM-576,brettporter,Brett Porter,2007-10-30T23:31:48.194Z,2007-10-30T23:31:48.194Z,I'm aware there are other limitations if the released version was not proxied or is in a different repository - we can ignore those for now.
MRM-576,oching,Maria Odea Ching,2007-11-07T03:04:34.926Z,2007-11-07T03:04:34.926Z,"Fixed in -r592657.

Changes made:
- modified logic for deleting released snapshots, delete only if there exists a released version of that snapshot not when there is a 
higher released/snapshot version
- adjusted tests

"
MRM-555,brettporter,Brett Porter,2007-10-19T12:23:43.054Z,2007-10-19T12:23:43.054Z,"implemented fix, but need to write test cases and am reluctant to commit without them. Will continue tomorrow if I get time."
MRM-527,oching,Maria Odea Ching,2007-10-15T06:21:17.666Z,2007-10-15T06:21:17.666Z,Fixed in -r584735
MRM-584,matinh,Martin Hller,2008-02-19T03:26:33.446Z,2008-02-19T03:26:33.446Z,"As described on a [redback site|http://redback.codehaus.org/configuration.html] adding the following entry to {{security.properties}} would prevent from requiring an email validation:

{{email.validation.required=false}}"
MRM-584,oching,Maria Odea Ching,2008-04-01T02:42:22.352Z,2008-04-01T02:42:22.352Z,"A validation email is already sent to the newly created user, and the user can already login after validating his/her account."
MRM-584,wsmoak,Wendy Smoak,2008-07-16T15:24:55.898Z,2008-07-16T15:24:55.898Z,I'm not sure why this is closed as Cannot Reproduce rather than Fixed... it was definitely a problem in 1.0.x.
MRM-584,wsmoak,Wendy Smoak,2008-07-16T15:33:20.379Z,2008-07-16T15:33:20.379Z,"... because it's not fixed, that's why. :)

Newly created users still cannot log in using the Archiva 1.1 RC."
MRM-584,wsmoak,Wendy Smoak,2008-07-16T19:01:31.917Z,2008-07-16T19:01:31.917Z,"This actually has to be fixed in Redback, but we need to leave it open here to avoid duplicates."
MRM-584,oching,Maria Odea Ching,2008-07-26T00:44:59.584Z,2008-07-26T00:44:59.584Z,Filed in redback jira: http://jira.codehaus.org/browse/REDBACK-156
MRM-584,oching,Maria Odea Ching,2008-07-26T02:00:22.577Z,2008-07-26T02:00:22.577Z,"Fixed in redback 1.0.3-SNAPSHOT.. If the user was created by a system admin, the account is already validated by default so a validation email is no longer sent.

I already upgraded archiva-trunk (-r679963) to use this version of redback.."
MRM-512,jameswdumay,James William Dumay,2007-09-23T21:44:11.896Z,2007-09-23T21:44:11.896Z,Same occurs for the removal of proxy connectors. See log.
MRM-512,oching,Maria Odea Ching,2007-09-23T22:48:16.436Z,2007-09-23T22:48:16.436Z,This also occurred when I updated the consumers in Repository Scanning. Please see corresponding log file.
MRM-512,oching,Maria Odea Ching,2007-09-23T22:50:46.667Z,2007-09-23T22:50:46.667Z,Same error when saving a Network Proxy..
MRM-512,brettporter,Brett Porter,2007-10-09T10:46:50.07Z,2007-10-09T10:46:50.07Z,is this still an issue? there were significant changes in the space today.
MRM-512,joakime,Joakim Erdfelt,2007-10-09T12:01:09.23Z,2007-10-09T12:01:09.23Z,"The changes made with MRM-437 likely fixed this one too.
Will verify later"
MRM-512,joakime,Joakim Erdfelt,2007-10-10T18:32:50.993Z,2007-10-10T18:32:50.993Z,"Tested with latest archiva/trunk, unable to reproduce anymore.
I suspect the repositories and proxy connector admin cleanup from a week ago cleared this up."
MRM-512,aheritier,Arnaud HERITIER,2007-10-11T01:40:15.056Z,2007-10-11T01:40:15.056Z,"Personally I reproduced it one week ago with the trunk.
I just removed all repositories and proxy connectors defined by default and archiva never restarted (was on win 2003 server / tomcat 5.5)"
MRM-502,brettporter,Brett Porter,2007-11-05T05:14:41.01Z,2007-11-05T05:14:41.01Z,can't reproduce this with 1.0-beta-3
MRM-567,aheritier,Arnaud HERITIER,2007-10-23T10:50:04.568Z,2007-10-23T10:50:04.568Z,Same thing for snapshot dependencies
MRM-567,joakime,Joakim Erdfelt,2007-10-25T19:40:51.532Z,2007-10-25T19:40:51.532Z,"Updates to archiva/trunk seem to have solved the snapshots dependencies issues.
There are now unit tests for requesting a snapshot artifact from archiva's repository, with every possible configuration of the snapshot policy setup.

Now to test the snapshots plugin issue."
MRM-567,joakime,Joakim Erdfelt,2007-10-25T20:01:04.892Z,2007-10-25T20:01:04.892Z,"Adding units tests for SNAPSHOT plugin downloading into archiva/trunk revision 588460.

Tested with actual archiva instance and maven project.
Verified that tests with SNAPSHOT plugins work too.

Closing as fixed."
MRM-567,aheritier,Arnaud HERITIER,2007-10-26T01:36:00.956Z,2007-10-26T01:36:00.956Z,"Ok, I'll test it on monday and we'll give you my feedback...
Thx"
MRM-546,brettporter,Brett Porter,2007-10-17T15:44:55.889Z,2007-10-17T15:44:55.889Z,Work on this is block by the review of comments on r583412
MRM-546,brettporter,Brett Porter,2007-10-17T16:32:51.079Z,2007-10-17T16:32:51.079Z,"also, do you have any explicit reproduction steps, since I've never actually experienced this (even when I upgraded from an old config, which I tested after my changes)?"
MRM-546,joakime,Joakim Erdfelt,2007-10-17T16:36:42.376Z,2007-10-17T16:36:42.376Z,"It comes up often enough, I've seen it, others have seen it.
It's a bug.  I filed it.

Copy/Paste from IRC this morning ...

{noformat}
<eskatos> I have a strange problem
<eskatos> all my snapshot are duplicated when I edit one
<eskatos> all my repositories are duplicated when I edit one
<eskatos> [ forget the snapshot line ]
<bawt> Topic "" forget the snapshot line "" does not exist
<eskatos> I mean, in my repositories page, I have each repository repeated 3 times ATM
<eskatos> If I edit one, I'll get every repository repeated 4 times right after
<wsmoak> eskatos: what version?
<eskatos> 1.0-beta2
<wsmoak> a workaround is to just edit archiva.xml and don't use the web ui
<wsmoak> I'm building the latest to check it, though joakim may be faster...
<joakim> eskatos, that's a but that i've been trying to get brett to fix. :-)
<joakim> eskatos, do this for a workaround. go into your $HOME/.m2/archiva.xml and remove the <repositories> element and all content under it. 
<joakim> s/that's a but/that's a bug/
<eskatos> not a butt either
<eskatos> ok thanks, I'll try this
<wsmoak> is it in JIRA?  doesn't sound familiar.
<joakim> Can't find it.
<wsmoak> eskatos:  can you (search and) open an issue for that problem?
<joakim> I'm opening it.
<eskatos> nice
<wsmoak> not something I've seen it do myself.  but not surprising given the other things it's done. :)
<eskatos> I won't try the workaround now, don't have much time today
<joakim> MRM-546
{noformat}"
MRM-546,brettporter,Brett Porter,2007-10-17T16:40:44.345Z,2007-10-17T16:40:44.345Z,"ok, so that'd be ""no"" :)

I'll see if I can reproduce it."
MRM-546,brettporter,Brett Porter,2007-10-22T07:38:29.063Z,2007-10-22T07:38:29.063Z,"the tests have been fixed post beta-3, but the code remains the same - please reopen if you can reproduce with beta-3"
MRM-546,brettporter,Brett Porter,2007-10-22T08:04:35.393Z,2007-10-22T08:04:35.393Z,"after cleaning target, the test fails now"
MRM-546,brettporter,Brett Porter,2007-10-22T08:37:50.154Z,2007-10-22T08:37:50.154Z,fixed by cleaning the registry
MRM-588,brettporter,Brett Porter,2007-11-21T02:41:30.122Z,2007-11-21T02:41:30.122Z,"* Do we consider the target repository id to be important to always log?

yes, even more so than the managed (source) repo

* Do we show the resource (the path) or the artifact (the group:artifact:version:classifier:type key) in the log?

don't care as long as it's consistent. Will there be instances before calculating the artifact that it needs to be logged? What about metadata?

* Do we show in the log a ""whats left"" list of repositories that can/will be checked next? (and indications if no more proxies are being checked?)

No, just one time log them all. I don't think it should be necessary if the log line aggregates that information which I think is what I was suggesting.

* Do we log the network proxy setting? that it is being used?   If so, then at what severity level?

I don't think I want to see it all the time - maybe just when a conn fails.
"
MRM-588,oching,Maria Odea Ching,2008-02-13T01:27:36.191Z,2008-02-13T01:27:36.191Z,"We should also log connection errors and timeouts. There were some reports in the users list that a dead remote repo caused Archiva to hang. Logging these would be helpful in diagnosing/identifying problems in Archiva.

http://www.nabble.com/Bad-remote-repo-can-cause-Archiva-to-hang--td14873052.html"
MRM-588,jameswdumay,James William Dumay,2008-05-08T01:42:24.111Z,2008-05-08T01:42:24.111Z,Moving to 1.1.x
MRM-588,viktornordling,Viktor Nordling,2009-08-31T07:15:06.888Z,2009-08-31T07:15:06.888Z,"Maybe off topic, but I think logging which remote URL Archiva is _about_ to request would be immensely helpful. 

We are having problems where Archiva hangs forever, so we never see the connection error in the log, which makes figuring out which remote repository is causing the problem very difficult.

We are using 1.1.3."
MRM-562,joakime,Joakim Erdfelt,2007-10-22T15:02:40.646Z,2007-10-22T15:02:40.646Z,Fixed in archiva/trunk revision 587224.
MRM-587,oching,Maria Odea Ching,2007-11-21T03:01:20.545Z,2007-11-21T03:01:20.545Z,"Fixed in -r596996.

- changed log level of archiva from debug to info"
MRM-563,joakime,Joakim Erdfelt,2007-10-22T19:19:55.841Z,2007-10-22T19:19:55.841Z,Fixed in archiva/trunk revision 587318.
MRM-554,joakime,Joakim Erdfelt,2007-10-23T11:17:02.527Z,2007-10-23T11:17:02.527Z,Closing: Duplicate of MRM-440
MRM-564,joakime,Joakim Erdfelt,2007-10-24T10:41:17.296Z,2007-10-24T10:41:17.296Z,"A fix has been committed to archiva/trunk revision 587908.

A review of the message text would be useful now."
MRM-564,wsmoak,Wendy Smoak,2007-10-24T16:05:27.959Z,2007-10-24T16:05:27.959Z,Where is the message text you would like reviewed?  (I don't see it in r587908.)
MRM-564,wsmoak,Wendy Smoak,2007-10-24T23:06:27.977Z,2007-10-24T23:06:27.977Z,"From IRC:
joakim: wsmoak_, re MRM-564 (audit.log) - go ahead and deploy a few things on your copy of archiva/trunk (releases  / snapshots / etc) and check out the message text.
wsmoak_: where in the code? it will be a lot faster :)
joakim: is there anything missing in the text that you think should be there? is there anything in the text that is too noisy?
joakim: AuditLog.java in archiva-webapp
wsmoak_: the next needs to say:  who, what (artifact) where (repo? path?) and when
joakim: ok, that's a useful sentance. add it to that jira.

I'm not likely to have time to set up a test for this, but I can review it if you attach a log file.

I don't see anything in the AuditLog.java code that looks like it logs the user who performed the action."
MRM-564,joakime,Joakim Erdfelt,2007-11-08T12:39:12.173Z,2007-11-08T12:39:12.173Z,"Committed fix to archiva/trunk at revision 593246.

Still need to hook up repository purge to audit log.

Unanswered questions.

Do we need audit logging for the following?
1) Repository Configuration Create
2) Repository Configuration Edit
3) Repository Configuration Delete
4) Proxy Connector Create
5) Proxy Connector Edit
6) Proxy Connector Delete
7) Metadata Merge
8) Auto-Remove Consumer
9) Auto-Rename Consumer
10) Scan Start
11) Scan End

In a discussion with Wendy on IRC the only concern would be what would we use for the userid / remote ip / and whatnot?

Moving this discussion over to mailing list."
MRM-564,joakime,Joakim Erdfelt,2007-11-08T12:48:35.056Z,2007-11-08T12:48:35.056Z,"Closing this jira as fixed, as it only mentions logging Deployed content.

If we decide to log other content (see Mailing List) then we will open a new jira for that content.
Thread: http://www.nabble.com/-DISCUSS---MRM-564--Audit-Logging.-tf4772818.html"
MRM-564,wsmoak,Wendy Smoak,2007-11-08T12:59:53.459Z,2007-11-08T12:59:53.459Z,"The summary may only say 'deploy' but the description says 'create directory, remove directory, create file, modify file, remove file'.

I don't consider this fixed unless it logs files that change or disappear via automated processes.  (There is no ""undeploy"" from the command line afaik...)"
MRM-574,oching,Maria Odea Ching,2007-11-01T09:33:17.833Z,2007-11-01T09:33:17.833Z,duplicate MRM-556
MRM-557,joakime,Joakim Erdfelt,2007-10-22T19:20:24.637Z,2007-10-22T19:20:24.637Z,Fixed with work in MRM-563
MRM-589,brettporter,Brett Porter,2007-11-11T08:58:11.896Z,2007-11-11T08:58:11.896Z,"I will take one pass at this for 1.0 if there is anything obvious, then move off to 1.1."
MRM-589,jameswdumay,James William Dumay,2008-05-08T01:42:21.631Z,2008-05-08T01:42:21.631Z,Moving to 1.1.x
MRM-589,brettporter,Brett Porter,2010-02-10T18:17:02.307Z,2010-02-10T18:17:02.307Z,"between the metadata changes not requiring scanning as much, and looking into improving the scanning code (perhaps based on Ant 1.8's improvements?) we can resolve this for 1.4"
MRM-589,brettporter,Brett Porter,2010-02-23T01:31:32.5Z,2010-02-23T01:31:32.5Z,"it's pretty good right now (6.5 mins for me, though on a much faster computer and not populating all project models). Normal scanning after that is 13s. Needs more tests."
MRM-589,brettporter,Brett Porter,2010-03-02T02:11:06.027Z,2010-03-02T02:11:06.027Z,"Here's some analysis of the directory walker itself:

{code}
ant scanner
12534 ms
retained memory ~27200808
Files: 67630
plexus-utils walker
3759 ms
retained memory ~1376
Files: 67597
new walker
3188 ms
retained memory ~712
Files: 67597
commons-io walker
4160 ms
retained memory ~7056
Files: 67630
Current repository scanner
4382 ms
retained memory ~80064

.\ Scan of null \.__________________________________________
  Repository Dir    : /Users/brett/Library/Application Support/Archiva/data/repositories/internal
  Repository Name   : null
  Repository Layout : default
  Known Consumers   : <none>
  Invalid Consumers : <none>
  Duration          : 4 Seconds 232 Milliseconds
  When Gathered     : 3/2/10 6:44 PM
  Total File Count  : 67597
  Avg Time Per File : 
______________________________________________________________
{code}

So there is some time and memory to be gained by switching to the Ant 1.8 SelectorUtils implementation instead of the plexus-utils version. However, switching to commons-io's walker is a bit slower and more memory consuming (though I didn't analyze if it could be improved by using, say, regex filters instead).

There are potential improvements in the two walkers by avoid the re-tokenization of the exclude paths on every call which I'll explore next.

As you can see, there is quite some overhead in the RepositoryScanningInstance as well.

Beyond this, I haven't examined the overhead of each of the current consumers when they are and are not operating which still needs to be looked at."
MRM-589,brettporter,Brett Porter,2010-03-02T05:51:36.422Z,2010-03-02T05:51:36.422Z,"committed some code in the sandbox to see the alternatives - the 'new walker' is probably the best alternative to go forward with, with a 20-25% saving on time over the previous implementation."
MRM-589,brettporter,Brett Porter,2010-03-02T05:56:47.07Z,2010-03-02T05:56:47.07Z,"one final consideration, given the patterns we use, is whether simple endsWith .txt, etc., might be more efficient instead of using SelectorUtils. I did some testing and it used quite a bit less memory on equivalent patterns than SelectorUtils, and a small but variable improvement in time. This is probably a later consideration if at all, since it would currently require altering the Maestro configuration, or translating the **/*.xyz paths into ""endsWith '.xyz'"" while retaining the selector for other choices."
MRM-589,brettporter,Brett Porter,2010-12-08T22:04:20.462Z,2010-12-08T22:04:20.462Z,some indexing improvements have further aided this in 1.3.x
MRM-589,olamy,Olivier Lamy (*$^%`),2011-06-30T10:06:45.662Z,2011-06-30T10:06:45.662Z,I wonder if upgrading to maven indexer last version with last lucene fix that
MRM-589,brettporter,Brett Porter,2011-10-01T02:15:30.98Z,2011-10-01T02:15:30.98Z,"The indexer shouldn't matter too much as it runs in parallel (though the constant processing does slow other operations).

There are a few things to check:
- pure scan time (just to run through them all, but not do anything)
- scan time with metadata population
- scan time with consumers (e.g. indexing)

Currently the metadata population is done as a consumer, and it seems to have gotten quite a bit slower in recent versions. Need to test it again with latest trunk and identify the slow parts, then create separate issues to resolve those. Performance will also depend on MRM-1327 so that needs to be tied up first.

Important that this performs well on the first use, since all users upgrading will have to go through it with their existing repositories."
MRM-589,olamy,Olivier Lamy (*$^%`),2013-12-10T05:03:28.749Z,2013-12-10T05:03:28.749Z,"I upgraded to last plexus-utils (3.0.15) as some improvement has been made in plexus-utils regarding DirectoryWalker
"
MRM-578,mkleint,Milos Kleint,2007-11-06T01:03:40.141Z,2007-11-06T01:03:40.141Z,yet another attempt to index repository
MRM-578,joakime,Joakim Erdfelt,2007-11-08T17:32:25.514Z,2007-11-08T17:32:25.514Z,"I've tested this with 1.0-beta-3 and the current archiva/trunk on my full central (ibiblio) mirror.
I cannot reproduce this error.

{noformat}
12384893 [pool-2-thread-1] INFO  org.codehaus.plexus.taskqueue.execution.TaskExecutor:repository-scanning  - Finished repository task:
.\ Scan of ibiblio \.__________________________________________
  Repository Dir    : /home/repo1/ibiblio
  Repository Name   : Ibiblio Mirror
  Repository Layout : default
  Known Consumers   : (5 configured)
                      create-missing-checksums
                      update-db-artifact
                      index-content
                      auto-rename
                      auto-remove
  Invalid Consumers : <none>
  Duration          : 1 Hour 35 Seconds 590 Milliseconds
  When Gathered     : 11/6/07 2:02 PM
  Total File Count  : 281074
  Avg Time Per File : 12 Milliseconds
______________________________________________________________
{noformat}"
MRM-578,mkleint,Milos Kleint,2007-11-09T00:36:03.512Z,2007-11-09T00:36:03.512Z,"how do I start with a clean table? i've deleted ~/.m2/archiva then the data/archiva folder and .index in the repository directory.
I always need to start archiva once, it complains on the console about missing tables, I shut it down, start again and trigger the scanning.."
MRM-578,brettporter,Brett Porter,2007-11-09T08:44:04.815Z,2007-11-09T08:44:04.815Z,"what you've done should be as clean as you can get, I think.

I don't get the restart problem - the complaints at the start are about SA and JPOX_ tables which can be safely ignored. If you are getting other problems, then there is certainly something going on where you have a database still in use somehow.

looking at the exceptions it seems to indicate a race condition. I can't see what would cause it though - so one thing to try might be to avoid any interaction with the web interface during the initial scan.

We should spend some time investigating this - but I'm inclined to move it post 1.0... wdyt?"
MRM-578,brettporter,Brett Porter,2007-11-11T08:37:00.382Z,2007-11-11T08:37:00.382Z,"I was able to scan 71% of the repository successfully (up to org.apache.something) before I needed to shutdown and leave. It was going very slowly, but successfully. Postponing for further investigation"
MRM-578,mkleint,Milos Kleint,2007-11-12T01:54:32.874Z,2007-11-12T01:54:32.874Z,yet again failed scanning after cleaning the data structures
MRM-578,brettporter,Brett Porter,2008-03-25T08:48:23.816Z,2008-03-25T08:48:23.816Z,fixed in 1.0.2
MRM-552,joakime,Joakim Erdfelt,2007-10-18T08:17:42.682Z,2007-10-18T08:17:42.682Z,"Current:
The download link works off of the filename.
The filename does not contain enough information to glean the proper type.

Possible:
Using ""maven-.\*-plugin"" or "".\*-maven-plugin"" as an identification string is possible."
MRM-552,brettporter,Brett Porter,2007-10-18T18:01:19.228Z,2007-10-18T18:01:19.228Z,we have enough info on that page to display the type - we render a plugin icon after all
MRM-552,joakime,Joakim Erdfelt,2007-10-25T20:03:14.756Z,2007-10-25T20:03:14.756Z,Unassigning non-1.0 issue.
MRM-552,jmluy,John Michael Luy,2008-08-05T02:56:53.061Z,2008-08-05T02:56:53.061Z,"In 1.1, it's displayed as ""Maven-plugin"" but no image is displayed beside it as there is no download-type-maven-plugin.png file."
MRM-581,brettporter,Brett Porter,2007-11-07T19:51:41.599Z,2007-11-07T19:51:41.599Z,"my understanding is that this is not a bug in Archiva - please reopen if you feel it is.

You can avoid this by using an appropriate whitelist (or blacklist) for the proxy connector to Atlassian (eg, blacklist o.a.m.plugins, or just whitelist com.atlassian or whatever)"
MRM-531,mathiasarens,Mathias Arens,2007-10-09T06:31:34.635Z,2007-10-09T06:31:34.635Z,"Oh, I got this error also if I try to download artifacts into the internal repository. But this time I downloaded from an https repository: https://maven-repository.dev.java.net/nonav/repository/

Maybe the proxy settings are not set correctly for https connections as well.

INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,233 [SocketListener0-1] WARN  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Resource does not exist: Unable to locate resource in repository
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,234 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [cache-failures] policy with [cached]
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,234 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:cache-failures  - OK to fetch, check-failures detected no issues.
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,234 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [releases] policy with [once]
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,234 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:releases  - OK to update releases, local file does not exist.
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,234 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [snapshots] policy with [disabled]
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,234 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:snapshots  - OK to update, snapshot policy does not apply for non-snapshot versions.
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,234 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Retrieving org/netbeans/api/org-netbeans-api-visual/RELEASE60-BETA1/org-netbeans-api-visual-RELEASE60-BETA1.jar from EJB3Unit Maven2 Repository if updated
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,644 [SocketListener0-1] WARN  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Resource does not exist: Unable to locate resource in repository
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,644 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [cache-failures] policy with [cached]
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,644 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:cache-failures  - OK to fetch, check-failures detected no issues.
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,644 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [releases] policy with [once]
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,644 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:releases  - OK to update releases, local file does not exist.
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,644 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [snapshots] policy with [ignored]
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,644 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:snapshots  - OK to update, snapshots policy set to IGNORED.
INFO   | jvm 1    | 2007/10/09 12:28:34 | 2007-10-09 12:28:34,644 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Retrieving org.netbeans.api/jars/org-netbeans-api-visual-RELEASE60-BETA1.jar from Java Dev Maven2 Repository Nonav if updated
INFO   | jvm 1    | 2007/10/09 12:28:35 | 2007-10-09 12:28:35,251 [SocketListener0-1] WARN  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Resource does not exist: Unable to locate resource in repository
INFO   | jvm 1    | 2007/10/09 12:28:35 | 2007-10-09 12:28:35,251 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [cache-failures] policy with [cached]
INFO   | jvm 1    | 2007/10/09 12:28:35 | 2007-10-09 12:28:35,251 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:cache-failures  - OK to fetch, check-failures detected no issues.
INFO   | jvm 1    | 2007/10/09 12:28:35 | 2007-10-09 12:28:35,251 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [releases] policy with [once]
INFO   | jvm 1    | 2007/10/09 12:28:35 | 2007-10-09 12:28:35,251 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:releases  - OK to update releases, local file does not exist.
INFO   | jvm 1    | 2007/10/09 12:28:35 | 2007-10-09 12:28:35,251 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Applying [snapshots] policy with [disabled]
INFO   | jvm 1    | 2007/10/09 12:28:35 | 2007-10-09 12:28:35,252 [SocketListener0-1] DEBUG org.apache.maven.archiva.policies.PreDownloadPolicy:snapshots  - OK to update, snapshot policy does not apply for non-snapshot versions.
INFO   | jvm 1    | 2007/10/09 12:28:35 | 2007-10-09 12:28:35,252 [SocketListener0-1] DEBUG org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Retrieving org/netbeans/api/org-netbeans-api-visual/RELEASE60-BETA1/org-netbeans-api-visual-RELEASE60-BETA1.jar from Maven IDE Maven2 Repository if updated
INFO   | jvm 1    | 2007/10/09 12:28:35 | 2007-10-09 12:28:35,344 [SocketListener0-1] WARN  org.apache.maven.archiva.proxy.RepositoryProxyConnectors:default  - Download failure:Error transferring file
INFO   | jvm 1    | 2007/10/09 12:28:35 | org.apache.maven.wagon.TransferFailedException: Error transferring file
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.apache.maven.wagon.providers.http.LightweightHttpWagon.fillInputData(LightweightHttpWagon.java:104)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:94)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.transferSimpleFile(DefaultRepositoryProxyConnectors.java:566)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.transferFile(DefaultRepositoryProxyConnectors.java:434)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.fetchFromProxies(DefaultRepositoryProxyConnectors.java:143)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.apache.maven.archiva.web.repository.ProxiedDavServer.fetchContentFromProxies(ProxiedDavServer.java:245)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.apache.maven.archiva.web.repository.ProxiedDavServer.process(ProxiedDavServer.java:147)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.codehaus.plexus.webdav.servlet.multiplexed.MultiplexedWebDavServlet.service(MultiplexedWebDavServlet.java:119)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:428)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.jetty.servlet.WebApplicationHandler$CachedChain.doFilter(WebApplicationHandler.java:830)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at com.opensymphony.webwork.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:189)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.jetty.servlet.WebApplicationHandler$CachedChain.doFilter(WebApplicationHandler.java:821)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:39)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.jetty.servlet.WebApplicationHandler$CachedChain.doFilter(WebApplicationHandler.java:821)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at com.opensymphony.webwork.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:88)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.jetty.servlet.WebApplicationHandler$CachedChain.doFilter(WebApplicationHandler.java:821)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:471)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:568)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.http.HttpContext.handle(HttpContext.java:1530)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:633)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.http.HttpContext.handle(HttpContext.java:1482)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.http.HttpServer.service(HttpServer.java:909)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.http.HttpConnection.service(HttpConnection.java:816)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:982)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.http.HttpConnection.handle(HttpConnection.java:833)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
INFO   | jvm 1    | 2007/10/09 12:28:35 | Caused by: java.net.ProtocolException: Server redirected too many  times (20)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1251)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       at org.apache.maven.wagon.providers.http.LightweightHttpWagon.fillInputData(LightweightHttpWagon.java:83)
INFO   | jvm 1    | 2007/10/09 12:28:35 |       ... 28 more

"
MRM-531,joakime,Joakim Erdfelt,2007-11-08T08:24:07.848Z,2007-11-08T08:24:07.848Z,"Unable to reproduce the problem with Archiva 1.0-beta-3, closing ticket.

Setup a the following test environment.

1) Workstation - using maven client
     Setup repo1.maven.org in my /etc/hosts pointing at 192.168.5.5 (a bad non-routable ip)
2) Server 1 - setup Archiva 1.0-beta-3
     Setup repo1.maven.org in /etc/hosts pointing at 192.168.6.6 (a bad non-routable ip)
3) Server 2 - setup Squid 2.6 (http proxy)
     Configured authentication.

Test 1) 
With this setup, I then tested a compile of a simple project that requires dependencies, while on Workstation. (No $HOME/.m2 directory present, all maven defaults).

This failed (as expected).

Test 2)
Now, I configured the Archiva Server on Server 1 with a simple proxy connector (no network proxy) for a managed repository called 'internal' and a remote repository called 'central' of http://repo1.maven.org/maven2 

I now setup a $HOME/.m2/settings.xml on Workstation to <mirrorOf>central</mirrorOf> pointing at the 'internal' repository on the Archiva Server.

Test the build.

Failed again. Which was expected (basically, just testing that a normal direct connection to repo1.maven.org is not possible)

Test 3)
Now I configured the Archiva Server on Server 1 to use the Squid http proxy at Server 2 as a configured Network Proxy in Archiva.

Test the build.

Success!

The process works as expected.

NOTE: Archiva supports only simple authentication on the network proxy, advanced authentication options such as NTLM, Kerberos, and Public/Private key exchange are not supported."
MRM-531,mathiasarens,Mathias Arens,2007-11-09T02:02:24.345Z,2007-11-09T02:02:24.345Z,"Well, now with Archiva 1.0-beta-3 I can download snapshots. It works fine. 

Although there is a little problem if I don't set releases to once in the proxy adapter for that snapshot repository. If releases is set to disabled, then the metadata.xml files cannot be download and the complete snapshot download fails. But with the workaround setting releases to once it works fine.

Thanks a lot."
MRM-537,wsmoak,Wendy Smoak,2007-10-10T23:37:55.266Z,2007-10-10T23:37:55.266Z,"The deletion issue is already open as MRM-37, so I marked this as a duplicate based on the summary.

I've also experienced the issue with POM changes not being picked up.  You can open a separate issue for that, if there isn't one already."
MRM-533,brettporter,Brett Porter,2007-10-09T10:09:24.239Z,2007-10-09T10:09:24.239Z,"cool, one more thing to remove from my list of bugs to file :)"
MRM-533,joakime,Joakim Erdfelt,2007-10-12T13:10:12.287Z,2007-10-12T13:10:12.287Z,Fixed in archiva/trunk revision 583875.
MRM-544,oching,Maria Odea Ching,2007-10-31T06:08:15.151Z,2007-10-31T06:08:15.151Z,"Fixed in -r590622

- remove artifact from index if artifact no longer exists in the file system
- added tests"
MRM-556,oching,Maria Odea Ching,2007-11-06T00:17:13.4Z,2007-11-06T00:17:13.4Z,"Fixed in -r592297.

Changes:
- respect set retention count when purging by number of days old (used same logic for purging by retention count)
- updated edit managed repository validation for the number of days old minimum range
- adjusted DaysOldRepositoryPurgeTest for the changes"
MRM-515,brettporter,Brett Porter,2010-02-23T02:01:36.523Z,2010-02-23T02:01:36.523Z,we removed jasper reports entirely
MRM-547,joakime,Joakim Erdfelt,2007-10-31T19:58:19.493Z,2007-10-31T19:58:19.493Z,"A discussion and decision has been made in the mailing list.
All policy settings are getting a thorough cleanup.

{noformat}
Releases (how often to check for)
  (old) IGNORED, ONCE, HOURLY, DAILY, DISABLED
  (new) ALWAYS,  ONCE, HOURLY, DAILY, NEVER
Snapshots (for often to check for)
  (old) IGNORED, ONCE, HOURLY, DAILY, DISABLED
  (new) ALWAYS,  ONCE, HOURLY, DAILY, NEVER
Cache-Failures
  (old) IGNORED, CACHED
  (new) NO,      YES
Checksum
  (old) IGNORED, FIX, FAIL
  (new) IGNORE,  FIX, FAIL
{noformat}

With new descriptions:

(for releases / snapshots policies)
* ALWAYS : Means that the artifact is always updated from the remote repo.
* ONCE : Means the artifact is updated only ever ONCE from the remote repo.  If it exists on the local repo, the remote repo is never hit for that artifact.
* HOURLY : Means the artifact is updated from the remote repo, only if it is at least one hour old on the local repo.
* DAILY : Means the artifact is updated from the remote repo, only if it is at least 1 day old on the local repo.
* NEVER : Means the artifact is never updated from the remote repo.

(for cache-failures)
* NO : Means that the existence of old failures is not checked.  All resource requests are allowed thru to the remote repo.
* YES : Means that the existence of old failures is checked, and will prevent the request from being performed against the remote repo.

(for checksum)
* IGNORE : Means the contents / validity of the checksum files is ignored.
* FIX : Means that the checksum files are regenerated from the downloaded resources.
* FAIL : Means that the checksum files are validated against the downloaded resource, if the resource does not pass the checksum validation, the resource and the checksum files are deleted from the local repository and a failure is issued for the transfer. "
MRM-547,joakime,Joakim Erdfelt,2007-11-01T01:23:04.52Z,2007-11-01T01:23:04.52Z,Fixed in archiva/trunk revision 590908.
MRM-550,jameswdumay,James William Dumay,2008-05-08T01:42:20.209Z,2008-05-08T01:42:20.209Z,Moving to 1.1.x
MRM-550,jmluy,John Michael Luy,2008-07-10T21:19:32.085Z,2008-07-10T21:19:32.085Z,"attached patch that won't display the ""up"" link/image when it is the first item and won't dispaly the ""down"" link/image if it is the last item."
MRM-550,oching,Maria Odea Ching,2008-07-13T00:16:57.266Z,2008-07-13T00:16:57.266Z,Patch applied in trunk -r676261. Thanks JM! 
MRM-505,tcue,Teodoro Cue Jr.,2007-09-18T01:46:40.389Z,2007-09-18T01:46:40.389Z,"The examples in the description (a) (b) (c) are described in MRM-506.

As for the rest ...
d) The number of source files? Do you mean the compressed / embedded source files in the *-sources.jar artifacts?
e) ""Metadata"" is too vague. Do you mean .pom, maven-metadata.xml, maven-metadata-.xml, *-site.xml, or any of the other 'metadata' files?
f) License Type is hard to do ATM, we need to create a LicenseTypeMapper lib first, as all license definitions are pretty much free-form, this would mean the mapping that the LicenseTypeMapper needs to be saved / stored in the database, and also screens need to be created that the admin / user can utilize to manage the mapping of the freeform definitions to a known license type.
g) The concept of ""related"" needs more a more clear (precise) definition."
MRM-514,schulten,Dietrich Schulten,2007-10-05T01:58:10.828Z,2007-10-05T01:58:10.828Z,Build failed with test error
MRM-514,schulten,Dietrich Schulten,2007-10-05T01:59:03.599Z,2007-10-05T01:59:03.599Z,"C:\Dokumente und Einstellungen\Dietrich>java -version
java version ""1.6.0_02""
Java(TM) SE Runtime Environment (build 1.6.0_02-b06)
Java HotSpot(TM) Client VM (build 1.6.0_02-b06, mixed mode, sharing)

C:\Dokumente und Einstellungen\Dietrich>echo %java_home%
C:\Programme\Java\jdk1.5.0_09

C:\Dokumente und Einstellungen\Dietrich>"
MRM-514,lmaitre,Ludovic Matre,2007-10-05T06:53:58.546Z,2007-10-05T06:53:58.546Z,"Hi,

As demonstrated by the informations you submit, you use the Java RUNTIME environment version 1.6 with a java home set to a java developer kit version 1.5! This cannot work.
You should adjust you java home to point to the 1.6 version of the JDK. Also you are using java.exe from the JRE, and perhaps you didn't have javac 1.6 installed with only the 1.6 JRE. I guess you should donwload a 1.6 JDK and configure you environment appropriately.
I haven't tried to compile Archiva with JDK 1.6 but your error report isn't related to 1.6 compliance of the archiva java code.
Best regards,"
MRM-514,lmaitre,Ludovic Matre,2007-10-05T06:56:36.793Z,2007-10-05T06:56:36.793Z,"Oups, however this doesn't exclude there is an error passing the test due to some other things, perhaps."
MRM-514,jameswdumay,James William Dumay,2008-05-08T02:01:48.741Z,2008-05-08T02:01:48.741Z,Move to 1.1.x
MRM-514,brettporter,Brett Porter,2008-09-13T21:41:06.488Z,2008-09-13T21:41:06.488Z,working on trunk for me
MRM-510,oching,Maria Odea Ching,2007-09-18T21:55:52.36Z,2007-09-18T21:55:52.36Z,See http://www.nabble.com/Snapshot-Browse-Failure%3A-*-beta-2-release-tf4475201s177.html also for more info
MRM-510,joakime,Joakim Erdfelt,2007-09-26T19:31:44.309Z,2007-09-26T19:31:44.309Z,Fixed in archiva/trunk revision 579856.
MRM-577,joakime,Joakim Erdfelt,2007-10-31T13:11:08.956Z,2007-10-31T13:11:08.956Z,"Its not that metadata isn't generated, it simply isn't even being downloaded from the remote proxies. :-(

I can sniff the traffic and see the request going into archiva for the maven-metadata.xml, but not out of archiva to the proxy."
MRM-577,joakime,Joakim Erdfelt,2007-10-31T13:11:31.147Z,2007-10-31T13:11:31.147Z,"Archiva responds with a HTTP 404 on the request for that maven-metadata.xml, researching cause now.
"
MRM-577,joakime,Joakim Erdfelt,2007-10-31T15:32:36.162Z,2007-10-31T15:32:36.162Z,Correcting reason for failure.
MRM-577,joakime,Joakim Erdfelt,2007-10-31T17:48:21.999Z,2007-10-31T17:48:21.999Z,"Fixing release and snapshot policies to not apply their policy rules to non-artifacts. (namely maven-metadata.xml files)

Workaround: do not use DISABLED setting for the policies.

Fix committed to archiva/trunk revision 590858."
MRM-517,ndeloof,nicolas de loof,2007-09-27T03:38:27.036Z,2007-09-27T03:38:27.036Z,"I debugged the request handling for ""/org/hibernate/jtidy/r8-21122004/jtidy-r8-21122004.jar""

The path is recognized as beeign a well formed m2 request, but the toPathReferences throws an exception as it doesn't recognize the version used in the filename : RepositoryLayoutUtils.splitFilename does not recognize ""r8"" as a valid versionKeyword.

"
MRM-517,ndeloof,nicolas de loof,2007-09-27T04:34:21.119Z,2007-09-27T04:34:21.119Z,"Add an optional parameter to splitFilename for supposed version. In such case, the version String can contain any char, even not a valid VersionUtil.versionPatterns.

This can solve this issue for m2 requests, but will make the artifact not available to m1, until m1 artifact - version is splitted a more robust way."
MRM-517,joakime,Joakim Erdfelt,2007-10-04T18:04:05.378Z,2007-10-04T18:04:05.378Z,"Patch applied to archiva/trunk revision 582024.
Thank you nicolas!"
MRM-592,brettporter,Brett Porter,2008-03-25T09:05:47.11Z,2008-03-25T09:05:47.11Z,redback upgrades should help and this is pre-1.0 only issue.
MRM-523,brettporter,Brett Porter,2007-10-17T03:12:58.418Z,2007-10-17T03:12:58.418Z,"not critical.

it's just a local repository assumption (we should instead pass in a repository to store in) - there are other points in archiva that use user.home and would be similarly affected

"
MRM-523,brettporter,Brett Porter,2007-10-17T03:49:32.427Z,2007-10-17T03:49:32.427Z,a related issue is the creation of ~/.m2/archiva directory for a single metadata file during this process.
MRM-523,joakime,Joakim Erdfelt,2007-10-17T09:11:27.816Z,2007-10-17T09:11:27.816Z,"Actually, no.

We have mitigated all other ${user.home} situations.
And we have 2 known users now that run Archiva on a Unix environment with a homeless user (a common security practice).
"
MRM-523,brettporter,Brett Porter,2007-10-17T15:44:08.3Z,2007-10-17T15:44:08.3Z,"no to ""not critical"", or no to the creation of ~/.m2/archiva (which I still see)?

Does the server fail to start, or do the appearance actions just not work (I couldn't get a failure other than to try and edit the logo)?"
MRM-523,joakime,Joakim Erdfelt,2007-10-17T16:41:45.338Z,2007-10-17T16:41:45.338Z,"The creation of $HOME/.m2/archiva is a result of reliance on the maven core components, and should be filed as a separate bug.

This wasn't filed as critical, just major.

If someone decides to enter the appearance screens, as they are now, that whole process fails.
Once the appearance screens have been activated, then the logs fill up ridiculously fast with the exceptions, all tracked down to the appearance / logo logic attempting to resolve content, on every access to every screen in the application.

This is a severe problem.
We must address it.
Maybe not for the next pre-1.0 release, but definitely before 1.0 final."
MRM-523,brettporter,Brett Porter,2007-10-17T16:55:08.302Z,2007-10-17T16:55:08.302Z,"suggested workaround to avoid the log spam: set -Duser.home in the wrapper (or HOME in the env) before running to an effectively-homeless but writeable location (eg /tmp/archiva-home) - the account can still have no real home, this is just to tell Java where to treat $HOME.

Will fix this properly in 1.x - I would suggest:
- sourcing from the managed repositories instead of remote
- proxying if necessary
- not needing a local repository
- when saving a new POM, allow selection of the managed repository to store to

This makes the actions more specific to Archiva, so might need to come up with something easier to work with there so we don't diverge from what is used in Continuum."
MRM-523,jameswdumay,James William Dumay,2008-05-08T02:01:49.125Z,2008-05-08T02:01:49.125Z,Move to 1.1.x
MRM-523,jameswdumay,James William Dumay,2008-05-08T02:22:39.329Z,2008-05-08T02:22:39.329Z,Moving to 1.2
MRM-516,joakime,Joakim Erdfelt,2007-09-24T19:18:51.686Z,2007-09-24T19:18:51.686Z,The predicate now returns true to all archiva repositories.
MRM-516,joakime,Joakim Erdfelt,2007-11-02T18:24:17.891Z,2007-11-02T18:24:17.891Z,"Implemented in the archiva-backend-security branch revision 591500.

https://svn.apache.org/repos/asf/maven/archiva/branches/archiva-backend-security/

"
MRM-516,joakime,Joakim Erdfelt,2007-11-06T12:48:40.641Z,2007-11-06T12:48:40.641Z,Completed work merged from branch to trunk in revision 592513.
MRM-545,evenisse,Emmanuel Venisse,2007-11-12T09:15:16.627Z,2007-11-12T09:15:16.627Z,You can look at the Continuum installation doc (http://maven.apache.org/continuum/documentation/1_1/installation/tomcat.html). Continuum and Archiva installs are very similar.
MRM-545,ziba,Eduardo Issao Ito,2007-11-14T11:17:19.381Z,2007-11-14T11:17:19.381Z,"I've just installed Archiva-1.0-beta4 in Tomcat-5.5.25 and what I did was:

1. Compiled the source manually and uncompressed the file archiva-web/archiva-webapp/target/archiva-webapp-1.0-beta-4.war into $CATALINA_HOME/archiva/archiva-webapp-1.0-beta-4

2. Copied mail-1.4.jar and derby-10.1.3.1.jar to $CATALINA_HOME/commons/lib

3. Created the file $CATALINA_HOME/conf/Catalina/localhost/archiva.xml

4. I didn't changed $CATALINA_HOME/conf/web.xml as stated n the docs. Is it still needed? What is the bug?

5. Edited the file $CATALINA_HOME/bin/setenv.sh to add the line below:

export CATALINA_OPTS=""-Dappserver.home=$CATALINA_HOME -Dappserver.base=$CATALINA_HOME""

It seems to be working!

But there is an issue: the derby database and derby.log are created in the current directory from where I start Tomcat...
How can I fix the path of derby?

By the way, why is derby.jar in a Tomcat directry instead of WEB-INF/lib inside the war?
"
MRM-545,brettporter,Brett Porter,2007-11-23T02:10:23.441Z,2007-11-23T02:10:23.441Z,"I've made minor adjustments to the doc, and there is some more comprehensive doc on the wiki.

The mail is needed for sending user account details. It can be safely omitted if you don't need forgotten password accounts to work and will be admining by hand.

The derby jar must be in the common/lib so that it works as a JNDI data source from Tomcat, which is instantiated before the web application classloader is started.

I've removed the workaround since that appears not to be needed any more."
MRM-545,danielharvey,Daniel Harvey,2007-12-26T21:36:53.701Z,2007-12-26T21:36:53.701Z,"Suggest re-opening as I cannot get it working with the existing docs - I had to go to the wiki and Jira to get the answers.

Specifically, I could not deploy on Tomcat 6 without defining in Tomcat's enviroment:

{code}
export CATALINA_OPTS=""-Dappserver.home=$CATALINA_HOME -Dappserver.base=$CATALINA_HOME""
{code}

which is *not* covered in the current install docs.

"
MRM-545,brettporter,Brett Porter,2007-12-27T06:42:21.985Z,2007-12-27T06:42:21.985Z,Daniel - would you mind opening a new issue for this?
MRM-545,wsmoak,Wendy Smoak,2007-12-27T08:32:50.683Z,2007-12-27T08:32:50.683Z,re-closing as MRM-646 is already open
MRM-528,brettporter,Brett Porter,2007-09-26T22:41:39.272Z,2007-09-26T22:41:39.272Z,"it seems like the best thing to do here is:
- wait until completion of any known batch of operations (eg, for purge, collect a list of artifacts removed)
- for each consumer, execute beginScan; then for each file execute processFile; then for each consumer execute completeScan
- rinse and repeat for database consumers

Things to check:
- fault tolerance of running consumers at the same time (in case a scheduled scan occurs)"
MRM-528,brettporter,Brett Porter,2007-09-26T22:44:04.273Z,2007-09-26T22:44:04.273Z,"Also need to consider impact on design - do not want to highly couple other modules to the consumers architecture. Review current dependencies, consider being able to push these onto a queue instead of running them exactly just-in-time."
MRM-579,jameswdumay,James William Dumay,2008-05-08T01:42:22.734Z,2008-05-08T01:42:22.734Z,Moving to 1.1.x
MRM-579,jameswdumay,James William Dumay,2008-05-08T02:22:39.463Z,2008-05-08T02:22:39.463Z,Moving to 1.2
MRM-535,joakime,Joakim Erdfelt,2007-10-12T16:48:21.061Z,2007-10-12T16:48:21.061Z,"It needs to keep up that field to date.
But going backwards on the lastUpdated field is just bad.

What is being implemented and tested on archiva/trunk right now. (project view is working, version view is not, yet)

* Never decrease the value of the lastUpdated field.

Technique
1) Read the existing metadata's lastUpdated timestamp (if it exists)
2) Iterate through the artifacts on the managed repository for their timestamps. (filename or file last modified date/time).
3) Iterate through the proxy metadata files for their lastUpdated.
4) Use the highest value found.

"
MRM-535,brettporter,Brett Porter,2007-10-13T20:10:43.395Z,2007-10-13T20:10:43.395Z,"wait, I'm confused.

I don't believe the lastUpdated should reflect file timestamps at all - just using the ones from the proxied metadata (or the previous value in the file, since you can deploy directly to archiva). Highest value is right.

If a value cannot be determined, just leave it out - Maven deals fine with that case - it's only looking for a delta.

I'm not sure what you are referring to with project view / version view?"
MRM-535,joakime,Joakim Erdfelt,2007-10-15T20:31:57.902Z,2007-10-15T20:31:57.902Z,Fixed in archiva/trunk revision 584994.
MRM-582,joakime,Joakim Erdfelt,2007-11-08T10:19:43.919Z,2007-11-08T10:19:43.919Z,"Fixed in archiva/trunk revision 593220.

Implemented on-load cleanup of remote repo username/password (instead of on-save)
Implemented proper check for blank username/password in proxy connectors.
"
MRM-538,brettporter,Brett Porter,2007-10-11T02:22:46.95Z,2007-10-11T02:22:46.95Z,"I view this as a low priority - we generally avoid allowing updates to poms in the repository as Maven doesn't expect it. I hope this is an infrequent thing, and that the workaround of rebuilding the database is ok"
MRM-538,oching,Maria Odea Ching,2008-04-09T01:40:52.362Z,2008-04-09T01:40:52.362Z,Fixed with MRM-622.
MRM-520,joakime,Joakim Erdfelt,2007-09-25T19:28:10.798Z,2007-09-25T19:28:10.798Z,"There are placeholders in the code for this.

Look for the following classes in the archiva-webapp module.

* DeleteManagedRepositoryAction
* DeleteRemoteRepositoryAction

Once you have those open, the keyword ""MRM-520"" can be searched to find where to put this fix."
MRM-520,oching,Maria Odea Ching,2007-09-26T03:46:27.617Z,2007-09-26T03:46:27.617Z,"Results to Error 500 when deleting the default remote repository in beta-2 version, while NPE in trunk. The repository is still deleted even with the error."
MRM-520,joakime,Joakim Erdfelt,2007-10-19T17:47:57.162Z,2007-10-19T17:47:57.162Z,Commit'd to archiva/trunk revision 586635.
MRM-580,gautencio,Gwen Harold Autencio,2008-09-15T21:04:20.811Z,2008-09-15T21:04:20.811Z,"Attached file, that displays error in page , where user doesn't have write access to the directory specified for the repository.location."
MRM-580,oching,Maria Odea Ching,2008-09-19T05:59:35.819Z,2008-09-19T05:59:35.819Z,Patch applied in trunk -r697047. Thanks for the patch Gwen!
MRM-597,jameswdumay,James William Dumay,2008-05-20T04:50:57.594Z,2008-05-20T04:50:57.594Z,"In the new jetty bundle in Archiva 1.1 this problem does not occur as the command is executed without the login option:

{code}
su -m $RUN_AS_USER -c ""\""$REALPATH\"" $2""
{code}

"
MRM-539,wsmoak,Wendy Smoak,2007-10-12T16:58:57.973Z,2007-10-12T16:58:57.973Z,"From MRM-398, Brett's comment:

I would suggest the best way to do this is to allow assignment of roles as a step in repository creation rather than introducing a new flag that is tied to a role.

"
MRM-539,brettporter,Brett Porter,2007-10-13T10:38:26.48Z,2007-10-13T10:38:26.48Z,"that was a pretty off-the-cuff observation on my part - I was emphasising it needed it's own jira, 'tis all :) Friendly assignment for guest only might be a suitable idea - needs more thought."
MRM-539,wsmoak,Wendy Smoak,2007-10-14T10:22:25.522Z,2007-10-14T10:22:25.522Z,"Oops, I was trying to keep things together when it did turn into a new issue.  If it's not relevant, then we can just delete these comments and start over."
MRM-539,brettporter,Brett Porter,2007-10-14T17:52:56.707Z,2007-10-14T17:52:56.707Z,"It's relevant, just not definitive :)"
MRM-596,ndeloof,nicolas de loof,2007-11-16T02:25:05.851Z,2007-11-16T02:25:05.851Z,"The attached patch must be applied on archiva-repository-layer

it also require to :
- rename {{\src\test\repositories\legacy-repository\org.apache.maven\javadocs}} to {{javadoc.jars}} (in conformance to maven 1 javadoc plugin)
- move {{\src\test\repositories\legacy-repository\org.apache.maven\jars\testing-1.0-sources.jar}} to {{\src\test\repositories\legacy-repository\org.apache.maven\java-sources}} (in conformance to maven 1 source plugin).

Those two changes where not handled by my patch tool, as configured to binary types.

The idea of the patch is :
- remove the assertion that legacy path have no classifier. Simply have no way to support unstandard classifiers.
- automatically use ""-javadoc"" and ""-sources"" classifiers for path with types ""javadoc.jars"" and ""java-sources"". Check for the classifier to be detected in the version string and remove it.

The patch contains 
- modified code base
- updated test cases. Thanks to Joakim, this part has good test coverage and new tests are easy to add.


This will be easy in future to add support for other  m1 ""standard"" types to classifier conversion. Typically for ejb-client jars (not sure what the correct classifier is)"
MRM-596,oching,Maria Odea Ching,2007-11-20T05:14:20.454Z,2007-11-20T05:14:20.454Z,"Patch applied (-r596620). Thanks Nicolas! :)

"
MRM-500,joakime,Joakim Erdfelt,2007-09-24T13:48:55.054Z,2007-09-24T13:48:55.054Z,This was fixed in trunk already.
MRM-532,wsmoak,Wendy Smoak,2008-04-02T22:45:09.621Z,2008-04-02T22:45:09.621Z,Fixed on trunk in r644150
MRM-532,wsmoak,Wendy Smoak,2008-04-03T00:03:34.909Z,2008-04-03T00:03:34.909Z,"Merged to 1.0.x branch in r644166, and closed."
MRM-511,brettporter,Brett Porter,2007-10-29T07:32:42.345Z,2007-10-29T07:32:42.345Z,the remaining ones turned out to be a problem with the tests themselves. IT 94 was likely fixed by the metadata changes in beta-3
MRM-565,brettporter,Brett Porter,2007-10-23T05:42:28.998Z,2007-10-23T05:42:28.998Z,http://svn.apache.org/viewvc/maven/archiva/trunk/archiva-web/archiva-webapp/src/main/java/org/apache/maven/archiva/web/repository/ProxiedDavServer.java?r1=583637&r2=584986&diff_format=h
MRM-565,joakime,Joakim Erdfelt,2007-10-23T19:19:55.027Z,2007-10-23T19:19:55.027Z,Fixed in archiva/trunk revision 587710.
MRM-561,aheritier,Arnaud HERITIER,2007-10-22T07:29:05.205Z,2007-10-22T07:29:05.205Z,Same thing for the default central repo
MRM-561,joakime,Joakim Erdfelt,2007-10-22T20:21:40.417Z,2007-10-22T20:21:40.417Z,Fixed in archiva/trunk revision 587351.
MRM-529,joakime,Joakim Erdfelt,2007-10-11T20:32:10.22Z,2007-10-11T20:32:10.22Z,"Related to the bug in MRM-493.
Tested in archiva/trunk verified that this is working."
MRM-503,joakime,Joakim Erdfelt,2007-09-26T13:24:36.99Z,2007-09-26T13:24:36.99Z,"Applied 2 headers on HTTP Response for maven-metadata.xml files.

Pragma: no-cache
Cache-Control: no-cache

Commited in revision 579747"
MRM-521,oching,Maria Odea Ching,2007-10-14T23:00:54.408Z,2007-10-14T23:00:54.408Z,"Fixed in -r584665

- Added range validation for the repo purge fields in webwork validation xml files"
MRM-590,joakime,Joakim Erdfelt,2007-11-11T16:31:50.727Z,2007-11-11T16:31:50.727Z,We should make a full sweep through the code-tree and handle all caching headers (see MRM-524)
MRM-590,jameswdumay,James William Dumay,2008-05-08T01:42:22.137Z,2008-05-08T01:42:22.137Z,Moving to 1.1.x
MRM-590,jameswdumay,James William Dumay,2008-05-08T02:22:38.331Z,2008-05-08T02:22:38.331Z,Moving to 1.2
MRM-543,joakime,Joakim Erdfelt,2007-10-15T20:00:26.852Z,2007-10-15T20:00:26.852Z,This was recently fixed in archiva/trunk revision 583412.
MRM-213,aheritier,Arnaud HERITIER,2006-11-02T16:07:25.318Z,2006-11-02T16:07:25.318Z,I don't have this problem on linux.
MRM-213,brettporter,Brett Porter,2006-12-19T20:26:36.868Z,2006-12-19T20:26:36.868Z,"we can't really control how Tomcat is dealing with webapps, unless there is some other servlet shutdown problem..."
MRM-213,dantran,Dan Tran,2007-01-03T15:54:54.046Z,2007-01-03T15:54:54.046Z,"I think we can fix this using this suggestion 

http://permalink.gmane.org/gmane.comp.jakarta.hivemind.user/2014


It is a big help for to solve jar lockup problem on windows"
MRM-213,joakime,Joakim Erdfelt,2007-09-21T13:27:29.02Z,2007-09-21T13:27:29.02Z,"Tested on Linux w/ Tomcat 5.0.28.
Using Archiva SVN Trunk r577463
JDK 1.5.0_11

This problem cannot be duplicated.
See notes on JAR incompatibilities at http://docs.codehaus.org/display/MAVENUSER/Archiva+on+Tomcat#ArchivaonTomcat-Tomcat5.0.xSpecifics

Not closing until tested on Tomcat 5.5.x and 6.0.x too."
MRM-213,joakime,Joakim Erdfelt,2007-09-21T17:33:02.981Z,2007-09-21T17:33:02.981Z,"Encountered this problem not on undeploy specifically, but even Tomcat shutdown.
This prevented the proper shutdown of the JDK/JRE too.  It was left running in memory, even though the Tomcat threads were no longer running.

Tested on Windows XP (SP2) w/ Tomcat 5.0.28
Using Archiva SVN Trunk r578241
JDK 1.5.0_11"
MRM-213,joakime,Joakim Erdfelt,2007-09-21T17:45:56.64Z,2007-09-21T17:45:56.64Z,"This issue might be related to our usage of pre 1.3 versions of ehcache.
See CONTINUUM-1355 for discussion on this."
MRM-213,joakime,Joakim Erdfelt,2007-09-21T18:11:15.123Z,2007-09-21T18:11:15.123Z,"Upgrading the ehcache version to get the benefits of the reworked shutdown hook has worked.

Fix has been commit'd to revision 578314 in archiva/trunk."
MRM-213,aheritier,Arnaud HERITIER,2007-09-24T09:58:09.481Z,2007-09-24T09:58:09.481Z,"Another tip: Use antiResourceLocking=""true"" and antiJARLocking=""true"" in the context declaration ...."
MRM-213,joakime,Joakim Erdfelt,2007-09-24T10:04:10.178Z,2007-09-24T10:04:10.178Z,"Arnaud, 

Those 2 options are not available on Tomcat 5.0.x (at least I can't find them).
They appear to be present on Tomcat 5.5.x and Tomcat 6.0.x though."
MRM-204,jirareport,Jira Report User,2006-10-11T14:25:44.453Z,2006-10-11T14:25:44.453Z,"Managed Repositories (okay, tis obvious but would need doccing).
Synchronized Repositories.
Validated user.
System administrator (access to what?)
Why an option for Indexed?
"
MRM-204,jirareport,Jira Report User,2006-10-11T14:28:58.162Z,2006-10-11T14:28:58.162Z,Simple doc on what each subproject of Archiva does.
MRM-204,jirareport,Jira Report User,2006-10-11T14:49:29.246Z,2006-10-11T14:49:29.246Z,"archiva-applet - The progress bar on the checksum checking page.
archiva-configuration - A facade on top of the Plexus configuration XML.
archiva-converter - 
archiva-core - central code, business objects, modello etc.
archiva-discoverer - monitors the managed repositories and kicks off the indexing.
archiva-indexer - the lucene indexing.
archiva-plexus-application - archiva can run on plexus as well as as a war. This creates a plexus app.
archiva-plexus-runtime  - archiva can run on plexus as well as as a war. This runs lots of apps.
archiva-proxy - proxy repositories?
archiva-reports-standard - a couple of reports are implemented. Not very pluginable yet.
archiva-repository-layer - ????
archiva-security - webapp security
archiva-utils - some handy archiva specific utils 
archiva-webapp - creates a war file
design - contains a mock-up currently
maven-meeper - rsync scripts to sync repositories. Also converts m1 repositories to m2 repositories."
MRM-204,jirareport,Jira Report User,2006-10-11T15:55:28.121Z,2006-10-11T15:55:28.121Z,"Identifier - internal ID. Could be generated by Archiva probably instead of being a user thing. Check to see if it's used in the urls.

Proxy - Haivng a single local address (maven-proxy style) which lets you wrap many ones into a single one. Check you can proxy a local file system.

Synchronized - wget ibiblio etc. 

Managed - browseable? indexed? need to figure out."
MRM-204,jirareport,Jira Report User,2006-11-10T17:35:40.122Z,2006-11-10T17:35:40.122Z,"Validated User?
Registered User?
Can a user revalidate if they're invalidated?
Can a the 'Need an account?' bit go away if you turn off guest access?"
MRM-204,wsmoak,Wendy Smoak,2006-11-10T17:40:28.951Z,2006-11-10T17:40:28.951Z,"Explain what each user role allows a user to do.

* Registered User
* User Administrator
* System Administrator
* Repository Manager - repo-id
* Repository Observer - repo-id"
MRM-204,wsmoak,Wendy Smoak,2006-11-12T09:55:15.342Z,2006-11-12T09:55:15.342Z,"A few updates.  
 * We're using the Jetty plugin, not embedded Jetty.  
 * Note that jetty:run isn't useful beyond testing the UI.  
 * Add the user roles (needs explanation)
 * Adjust suggested repository setup to match the UI "
MRM-204,wsmoak,Wendy Smoak,2006-11-12T23:05:11.874Z,2006-11-12T23:05:11.874Z,"More on user roles... ""Effective Roles"" vs. ""Assigned Roles"" ?"
MRM-204,wsmoak,Wendy Smoak,2006-11-13T12:44:25.824Z,2006-11-13T12:44:25.824Z,"Still trying to figure out what's up with Jetty, see: 
  http://mail-archives.apache.org/mod_mbox/maven-archiva-users/200611.mbox/%3cFCD501FD-16E8-4E1A-8106-FD73B0FBFC8A@apache.org%3e

So don't apply the patch as written, just note that there's a known issue with browsing managed repositories when running w/ the Jetty plugin."
MRM-204,brettporter,Brett Porter,2006-12-26T20:55:09.436Z,2006-12-26T20:55:09.436Z,"ok, so to be clear, we shouldn't apply this just yet?"
MRM-204,wsmoak,Wendy Smoak,2006-12-26T21:10:18.255Z,2006-12-26T21:10:18.255Z,"No, just ignore it, it's just a few lines and mostly placeholders.
"
MRM-204,joakime,Joakim Erdfelt,2007-11-08T09:46:00.595Z,2007-11-08T09:46:00.595Z,Questions have been answered or are no longer valid.
MRM-277,brettporter,Brett Porter,2007-02-11T21:19:08.82Z,2007-02-11T21:19:08.82Z,I suggest adding sorting by 'Name' so that the configuration and page are always consistently ordered.
MRM-277,joakime,Joakim Erdfelt,2007-05-25T14:10:51.515Z,2007-05-25T14:10:51.515Z,"The configuration of repository proxies and network proxies have been changed.
This jira is no longer valid."
MRM-273,tcue,Teodoro Cue Jr.,2007-01-31T02:12:41.789Z,2007-01-31T02:12:41.789Z,Patch attached.
MRM-273,evenisse,Emmanuel Venisse,2007-02-06T03:51:00.862Z,2007-02-06T03:51:00.862Z,Applied.
MRM-244,digulla,Aaron Digulla,2007-01-22T08:30:00.122Z,2007-01-22T08:30:00.122Z,"I have now implemented a proxy which allows to mirror arbitrary maven repositories and which can inject patches in the download process transparently.

The project page is at http://www.pdark.de/dsmp/

The source is only a few hundred lines. I'm not sure if it would make sense to merge this with Archiva, though (see http://www.pdark.de/dsmp/faq.html)."
MRM-244,joakime,Joakim Erdfelt,2007-05-22T14:27:15.869Z,2007-05-22T14:27:15.869Z,"Current archiva trunk supports the following.

* For every local/managed repository you can have 0...n remote repository sources. (This is called a Proxy Connector)
* For every Proxy Connector you have::
** A configurable set of pre-download policies. (to determine if the download via the Proxy Connector should even occur)
** A configurable set of post-download policies. (to determine if the already downloaded file should be passed onto the local/managed repository or not)
** A configurable list of whitelist patterns. (to specify which inclusive content is acceptable)
** A configurable list of blacklist patterns. (to specify which exclusive content is unacceptable to download)

This should address your concerns."
MRM-244,joakime,Joakim Erdfelt,2007-05-22T14:27:32.419Z,2007-05-22T14:27:32.419Z,"Reopening to correct ""fix version""."
MRM-268,ndeloof,nicolas de loof,2007-01-22T04:50:31.99Z,2007-01-22T04:50:31.99Z,"Hello, I made the original contrib for the relocation feature.

Maven2 will request all POMs from archiva before requesting the artifacts, so it will handle relocations metadata itself and warn the user. Maven2 will then ask for the relocated artifact and archiva reloaction will not occur. Isn't this what you get/expect ? 

Maven1 has no support for model4 POMs and will not download the POM neither read any relocation info, so it can't warn the user. The relocation from the archiva-side was designed for maven1 only, to avoid legacy/duplicated artifacts in a managed repo (my corporate repo had 5 ""ejb.jar"" under groupIds ""ejb"", ""j2ee"", ""sun"", ""java.ejb"" and ""javax.ejb""). It should not occur when maven2 only is used.

"
MRM-268,breadfan@gmx.de,Chris Wewerka,2007-01-22T05:06:33.044Z,2007-01-22T05:06:33.044Z,"Hello Nicolas, thanks for your comment.

I think there is something broken then with your described behavior in archivas latest checkouts.

If I use an relocated artifact with our archiva, I do get the maven1 behavior although I'm using maven 2.

E.g. I request activation/activation/1.0.2 with my maven 2.0.4 client

I do not get the pom under activation/activation with the relocation info to javax.activation but the pom which resides under javax.activation in our archivas cache.

Looks like a bug to me."
MRM-268,ndeloof,nicolas de loof,2007-02-14T07:19:57.753Z,2007-02-14T07:19:57.753Z,"The latest archiva build doesn't handle relocation from the DAV api.
I've reopend MRM-153 and will investigate this one when solved."
MRM-268,ndeloof,nicolas de loof,2008-01-18T08:48:24.567Z,2008-01-18T08:48:24.567Z,"Relocation is only applied to maven1 request and never on POM request. It will only occurs for maven1 that require archiva to handle it (or they will NOT get the artifact), and will never occur for maven2 that allways request the POM before the artifact."
MRM-205,joakime,Joakim Erdfelt,2007-09-21T13:37:04.397Z,2007-09-21T13:37:04.397Z,"This has been fixed at some point. (not sure when)

This problem can no longer be duplicated."
MRM-285,joakime,Joakim Erdfelt,2007-05-25T14:13:12.939Z,2007-05-25T14:13:12.939Z,"What is condidered Main in those situations where there are only artifacts with classifiers?
testng 4.7 for example has a -jdk14 -jdk15 classifiers, but no default artifact."
MRM-285,brettporter,Brett Porter,2007-07-31T08:38:46.913Z,2007-07-31T08:38:46.913Z,this was satisfactorily fixed
MRM-294,oching,Maria Odea Ching,2007-07-25T01:55:54.245Z,2007-07-25T01:55:54.245Z,"I've identified the following fields that can be configurable:
1. timestamp basis of which snapshots will be deleted 
2. schedule of repository purge (MRM-275)
3. artifact count to be retained (MRM-275)

Configuration for this should be per repository? Or should it be applicable for all managed repositories? "
MRM-294,baerrach,Barrie Treloar,2007-07-25T17:53:31.001Z,2007-07-25T17:53:31.001Z,"{quote}
Configuration for this should be per repository? Or should it be applicable for all managed repositories?
{quote}

Good question.

I haven't been following archiva enough to know how remote repositories are handled differently than internal ones.
But remote repositories can be cleared (as they would be re-obtained if requested) and internal repositories don't need to have older snapshots around for very long.

So while per repository makes it easy to customise this feature, I can't really see what benefit that gives.
It feels like all snapshot repositories could have the same settings.

I'm going to err on the side of over-customization:

The snapshot retention policies should be defined separately to the repo and when not specified by a repo gets the default retention policy."
MRM-294,oching,Maria Odea Ching,2007-07-26T02:06:21.476Z,2007-07-26T02:06:21.476Z,"Thanks for your comments Barrie :)

Anyway, there was also a discussion regarding this issue and MRM-275 as well in the Archiva Dev List. I've summarized below what has been agreed upon in the thread. For reference purposes, the subject of the thread was ""Repository purge (MRM-294 and MRM-275)"". Please feel free to add more..

Summary:
1. Configuration will be for each repository - the repository purge will be implemented as a consumer, which will be executed during repository scanning. Configuration will be incorporated on the repository configuration page.
2. Repository purge is configurable in archiva.xml
3. Snapshot retention policies will also be for each repository.

For #3, these are the policies to be implemented:
a. any artifacts that are not in active development will be deleted entirely (eg, 1.0-SNAPSHOT when 1.0 is released)
b. time based** (e.g. any builds older than 1 month)
c. artifact count retention** (e.g. if user specified ""5"", then archiva would keep 5 in total of the latest.. like 1.1-20070506.121113-1, 1.1-20070506.121113-2, 1.1-20070506.121113-3, 1.1-20070506.121113-4, 1.1-20070506.121113-5 and NOT 1.1-SNAPSHOT, 1.2-SNAPSHOT, 1.3-SNAPSHOT, 1.4-SNAPSHOT, 1.5-SNAPSHOT)

**user will have the option to choose from either of these two criteria

"
MRM-294,oching,Maria Odea Ching,2007-08-04T16:49:03.56Z,2007-08-04T16:49:03.56Z,"Initial commit (-r562766):
- Added RepositoryPurgeConsumer
- Added these other classes used in repo purge: DaysOldRepositoryPurge, RetentionCountRepositoryPurge, ArtifactFilenameFilter and 
RepositoryPurgeException
- Added tests and test data
- Added new fields in configuration.mdo (daysOlder and retentionCount)
- Added repository-purge as a consumer in default-archiva.xml (but currently commented out)"
MRM-294,oching,Maria Odea Ching,2007-08-05T10:14:58.833Z,2007-08-05T10:14:58.833Z,"Fixes in -r562882:
- Added the test cases which were left out during the initial commit
- Added DefaultCleanupReleasedSnapshots (m2 implementation for cleaning up snapshots that were already released)
- Updated the following files: archiva-core-consumers/pom.xml, RepositoryPurgeConsumer, DaysOldRepositoryPurge, RetentionCountRepositoryPurge and 
AbstractRepositoryPurge


Issue: The artifacts in the Browse Repository is not being updated even though the artifacts deleted from the file system during repository purge are also being deleted from the database. Anybody has any idea about this?"
MRM-294,brettporter,Brett Porter,2007-08-05T23:56:23.367Z,2007-08-05T23:56:23.367Z,"since you asked, here's my feedback :)

RepositoryPurgeConsumer:
- it looks like index and repositoryLayout can be local variables instead (and repository field can be removed)
- I saw: // @todo handle better injection of RepositoryPurge -- the injection seems fine to me, but if you want to switch it to a component that's good too.

RepositoryPurge: 
- what about removing the setters on this interface, and passing them to the process method instead. As a component, this will be a singleton by default, so you can't use the setters (you can make the component not be a singleton, but there isn't any reason they need to retain state so I wouldn't worry).
- since the process method always uses a specific repository configuration maybe it'd be better to pass that in directly instead of the general configuration object?

AbstractRepositoryPurge:
- looks like 'index' can be removed
- getFiles() calls System.out - looks like that should be an IOException?
- abstract process() can be removed - it comes from the interface
- need to create an issue for the commented out index purge (is it better to just omit this and let the normal indexing consumer pick up the deletion?)
- need to create an issue for it still being on browse page (per comment above) - maybe it's a DAO caching issue?
- the exceptions in updateDatabase() are getting swallowed!

DaysOldRepositoryPurge:
- don't do new GregorianCalendar - use Calendar.getInstance() instead

DefaultCleanupReleasedSnapshots:
- name is inconsistent with the others - should be CleanupReleasedSnapshotsPurge?
- System.out in here, and exception is swallowed - is it intentional to log and swallow the exception?

A general thought here too, for later: it might be worth reviewing the exceptions that can occur in *Purge and see if we can recover better from each rather than bubbling it

Tests:
- I think you can remove many of the components from the test XML files where the default suffice (just keep the registry and jdo factory)
- the tests have a lot of bolierplate that can probably be turned into methods that generate test data

Missing tests:
- no tests for the consumer or the Released Snapshots purge
- days old test is only testing by file age - it should also test the metadata-driven snapshots

A general thought for Archiva in the long term, too... setting up the database to test this was probably a pain. We should have stub implementations of the indexer and dao's to avoid it.


"
MRM-294,brettporter,Brett Porter,2007-08-06T00:21:58.356Z,2007-08-06T00:21:58.356Z,"Sorry, I've thought some more, and I've decided you made the right choice in not making *Purge plexus components :)

So, that in mind - my first comment on RepositoryPurge would be to pass the fields to the constructor instead of the process method. Also, the test cases should be updated to just use new SomethingPurge() instead of lookup()."
MRM-294,oching,Maria Odea Ching,2007-08-06T03:26:15.18Z,2007-08-06T03:26:15.18Z,"Applied above comments in -r563064.

Btw, some of the exceptions mentioned above are intended to be swallowed. I added a @todo for these to log the errors in the console.

I'll just open a separate jira issue for the missing tests.

Thanks! :)"
MRM-294,brettporter,Brett Porter,2007-08-06T03:41:04.182Z,2007-08-06T03:41:04.182Z,don't forget to create an issue for the index purge and the browse problem too :)
MRM-251,brettporter,Brett Porter,2006-12-19T21:28:30.893Z,2006-12-19T21:28:30.893Z,was old snapshots
MRM-267,dangelito,Dawn Angelito,2007-01-11T02:24:16.386Z,2007-01-11T02:24:16.386Z,Fixed. Patch for this attached.
MRM-267,evenisse,Emmanuel Venisse,2007-01-11T04:52:23.375Z,2007-01-11T04:52:23.375Z,Applied.
MRM-270,joakime,Joakim Erdfelt,2007-05-10T19:03:55.458Z,2007-05-10T19:03:55.458Z,Postponing to future version.
MRM-207,jirareport,Jira Report User,2006-10-06T17:28:04.727Z,2006-10-06T17:28:04.727Z,"I'm not sure if this happened while indexing actually - I think the bug in indexing was:

2006-10-06 15:26:38,343 [http-8080-Processor24] INFO  RepositoryTask:indexer         - Searching repository OsJava SVN repository
2006-10-06 15:26:39,527 [http-8080-Processor24] ERROR DispatcherUtils                - Could not execute action
java.lang.NullPointerException
        at org.apache.maven.archiva.scheduler.task.IndexerTask.execute(IndexerTask.java:215)
        at org.apache.maven.archiva.scheduler.task.IndexerTask.execute(IndexerTask.java:122)
        at org.apache.maven.archiva.scheduler.DefaultRepositoryTaskScheduler.runIndexer(DefaultRepositoryTaskScheduler.java:175)
        at org.apache.maven.archiva.web.action.admin.RunRepositoryTaskAction.runIndexer(RunRepositoryTaskAction.java:45)


I think the one above was when it came time to view the loaded artifact. Will retest."
MRM-207,jirareport,Jira Report User,2006-12-15T20:14:33.427Z,2006-12-15T20:14:33.427Z,I need to retest for this bug.
MRM-207,brettporter,Brett Porter,2007-07-31T08:24:59.117Z,2007-07-31T08:24:59.117Z,no longer relevant to trunk
MRM-210,brettporter,Brett Porter,2007-07-31T08:23:36.893Z,2007-07-31T08:23:36.893Z,I believe this is no longer relevant to the trunk codebase.
MRM-278,wsmoak,Wendy Smoak,2007-02-11T11:39:07.677Z,2007-02-11T11:39:07.677Z,I should also admit to building it with tests skipped due to test errors in archiva-configuration.
MRM-278,brettporter,Brett Porter,2007-02-11T19:05:16.065Z,2007-02-11T19:05:16.065Z,"this is probably my fault
"
MRM-243,breadfan@gmx.de,Chris Wewerka,2007-01-03T04:48:29.106Z,2007-01-03T04:48:29.106Z,"We have the same problem in the following environment:

Client Side : mvn 2.0.4,  slide 2.1, wagon-webdav-1.0-beta-2

Archiva Side: Java 1.5.0_10, Tomcat 5.5.20"
MRM-243,cthiebaud2,Christophe Thibaud,2007-03-16T14:17:52.774Z,2007-03-16T14:17:52.774Z,"FYI, I add the same issue between a server with archiva + maven 2.0.5 and a client with maven 2.0.6-SNAPSHOT grabbed and build from svn on the 3rd of March.

the issue did not occur anymore after installing the same maven 2.0.6-SNAPSHOT on the server as well."
MRM-243,joakime,Joakim Erdfelt,2007-05-09T12:08:55.174Z,2007-05-09T12:08:55.174Z,"This can occur (according to the code) due to the following ....
# temp directory not specified in system environment. 
# temp directory is full. 
# temp directory has too many files in it. 
# java.io can't flush contents to disk. 
# java.io can't write bytes to disk.

That's it.

A stacktrace from the server side should help narrow down which of these is causing the problem."
MRM-243,wsmoak,Wendy Smoak,2007-05-26T01:54:28.493Z,2007-05-26T01:54:28.493Z,"I can reproduce it by deploying 1.0 of something, then deploying 2.0.  The 2.0 jar is uploaded, but the metadata is not updated and the error is as shown below.

Unfortunately, there is nothing in the log when this happens.

(If I change the groupId to one that isn't already in the repo, so that it has to create a new directory, then it works fine.  It seems to be unable to modify the repository metadata file.)

$ mvn deploy:deploy-file -Dfile=test.jar -DartifactId=test -Dversion=2.0 -DgroupId=com.example -Dpackaging=jar -DrepositoryId=localhost -Durl=dav:http://localhost:8080/archiva/repository/internal
[INFO] Scanning for projects...
[INFO] Searching repository for plugin with prefix: 'deploy'.
WAGON_VERSION: 1.0-beta-2
[INFO] -------------------------------------------------------------------------
---
[INFO] Building Unnamed - deploy:deploy:jar:1-SNAPSHOT
[INFO]    task-segment: [deploy:deploy-file] (aggregator-style)
[INFO] -------------------------------------------------------------------------
---
[INFO] [deploy:deploy-file]
Uploading: http://localhost:8080/archiva/repository/internal/com/example/test/2.
0/test-2.0.jar
[INFO] Retrieving previous metadata from localhost
[INFO] Uploading repository metadata for: 'artifact com.example:test'
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error installing artifact's metadata: Error while deploying metadata: Fai
led to transfer file: http://localhost:8080/archiva/repository/internal/com/exam
ple/test/maven-metadata.xml. Return code is: 507 Insufficient Storage

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4 seconds
[INFO] Finished at: Fri May 25 23:45:22 MST 2007
[INFO] Final Memory: 3M/6M
[INFO] ------------------------------------------------------------------------"
MRM-243,mgervais,Gervais Mickal,2007-07-20T02:55:45.646Z,2007-07-20T02:55:45.646Z,"Hi,
I just like to notice that I have the same result but I'm using Jetty 6.0.2. Maven 2.0.4 and archiva 1.0 alpha 2
Sometimes I can reproduce the same error and sometimes not, I cannot find the exact source...
However it happens when I've modules in my POM Parent...
I've checked my TEMP dir and it exists etc...
Mickael"
MRM-243,brettporter,Brett Porter,2007-07-31T08:22:04.511Z,2007-07-31T08:22:04.511Z,"I got this using the plexus runtime. Seems to only happen when running on a Windows box. Path length, perhaps?"
MRM-243,mgervais,Gervais Mickal,2007-07-31T10:43:31.419Z,2007-07-31T10:43:31.419Z,"Maybe it only happens on a windows platform. But my repositories and install dir for archiva are in a folder called G:\Archiva so I suppose that's it' not a path length issue.
Mickael"
MRM-243,wouterv,Wouter de Vaal,2007-08-06T07:53:01.81Z,2007-08-06T07:53:01.81Z,"I have the same issue, on both client and server I have maven 2.0.7 and archiva is installed with plexus. The server is a Windows 2003 box.

Temp directories and permissions on it look just fine by me.

Also no stacktraces are shown in any log."
MRM-243,wouterv,Wouter de Vaal,2007-08-06T08:07:33.981Z,2007-08-06T08:07:33.981Z,"I found out I can't delete the maven-metadata.xml file after the first time, so the file is locked. After unlocking the file with a utility (http://ccollomb.free.fr/unlocker/) I can deploy the file again. 
So somewhere a file is not closed correctly. But without stacktraces I guess it is hard to find which code is keeping the lock on the file, but it only occurs with maven-metadata file. Maybe this helps.

This is also the reason why it only occurs on windows servers, unix-based system do not impose such a vicious locking mechanism as windows does."
MRM-243,brettporter,Brett Porter,2007-08-09T09:30:54.938Z,2007-08-09T09:30:54.938Z,confirmed. Shutting down Archiva and then starting it again let's you deploy once. The problem is only in writing the metadata.
MRM-243,brettporter,Brett Porter,2007-08-09T09:31:12.219Z,2007-08-09T09:31:12.219Z,I will take a look at this
MRM-243,brettporter,Brett Porter,2007-08-16T02:15:25.018Z,2007-08-16T02:15:25.018Z,waiting for mrm-463 to finish in case it happens to take care of the issue on the way
MRM-243,dvaleri,David Valeri,2007-08-22T20:39:27.34Z,2007-08-22T20:39:27.34Z,"While the below info may be known to some, I couldn't find any details on the cause of this issue and needed it fixed.

I have intermittently duplicated the issue on Windows XP and Windows Server 2003.  By using a combination of Unlocker and the debugger monitoring finalize of FileInputStream, It appears that the InputStreams being opened in Plexus WebDAV's ReplacementGetMethod#sendResource are not closed and cause the error when the streams are not garbage collected before the PUT request is made by Maven.  The involvement of the garbage collector would explain the intermittent behavior of the error.  However, I can't figure out why the condition doesn't correct itself after a period of time as the open streams should eventually be closed upon garbage collection.  The exception is generated on line 76 of DAVOutputStream in the Could.it WebDAV implementation.  The exception occurs when replacing the existing (and sometimes locked) file with the temporary file that was created during the upload.

While the Could.it WebDAV implementation of PUT is positively anal about ensuring that the output streams are closed, their GET implementation (and the Plexus WebDAV implementation ReplacementGetMethod) is lax on closing the InputStreams used to read the resource.

I patched the Plexus WebDAV implementation by ensuring that the streams created in ReplacementGetMethod#sendResource are explicitly closed and have been running with the patch for a couple days without experiencing the issue.

Long story short, the issue appears to be caused by a bug in plexus-webdav-1.0-alpha-3.  I submitted a bug report at http://jira.codehaus.org/browse/PLXCOMP-81 and a quick patch that appears to fix the issue."
MRM-243,joakime,Joakim Erdfelt,2007-09-21T14:32:56.682Z,2007-09-21T14:32:56.682Z,"I was able to duplicate this problem on the following environment ...

Tested on WinXP(SP2) w/ Tomcat 5.0.28.
Using Archiva SVN Trunk r577463
JDK 1.5.0_11
Using the configuration specified at http://docs.codehaus.org/display/MAVENUSER/Archiva+on+Tomcat#ArchivaonTomcat-Tomcat5.0.xSpecifics

I created a simple project with a 1.1 version and a copy of the project with a 1.2-SNAPSHOT version.

The first deploy (of version 1.1) to the internal repo succeeded, the next deploy (of version 1.2-SNAPSHOT) encountered the ""507 Insufficient Storage"" problem."
MRM-243,joakime,Joakim Erdfelt,2007-09-21T14:37:29.957Z,2007-09-21T14:37:29.957Z,"One extra note about previous comment.

The metadata upload that caused the ""507 Insufficient Storage"" error occured when the SNAPSHOT deploy attempted to upload the metadata file.  It did not conflict with the maven-metadata.xml from the previous deploy (as that was on a different repository).  It appears that the previous request for the maven-metadata.xml causes the problem with the deploy of the updated maven-metadata.xml file.

More research is needed here.
I would hate to see this be a problem in the simple-webdav impl."
MRM-243,joakime,Joakim Erdfelt,2007-09-21T17:09:22.281Z,2007-09-21T17:09:22.281Z,"The most archiva/trunk has the fix commited.

See revision 578241"
MRM-243,drewpuppy,Andrew Heald,2008-04-07T04:19:42.581Z,2008-04-07T04:19:42.581Z,"This issue is not fixed in Archiva 1.0.1 and pops up at least once a day on our most complex integration build, though never for our other builds.

Client side environment here: Maven 2.0.8 and we're using wagon-webdav 1.0-beta-2. Windows.

I replaced plexus-utils 1.4 with 1.5.1 in Archiva but that hasn't fixed the problem.

Please reopen this issue, or shall I create a clone?"
MRM-243,brettporter,Brett Porter,2008-04-07T04:30:19.099Z,2008-04-07T04:30:19.099Z,please check the 1.0.2 candidate build (see developers list archives for recent vote) - but otherwise the issue should be cloned
MRM-243,drewpuppy,Andrew Heald,2008-04-07T06:57:19.083Z,2008-04-07T06:57:19.083Z,"Thanks, Brett. I have 1.0.2 up and running and I'll report back after a few days if the upload errors vanish."
MRM-243,drewpuppy,Andrew Heald,2008-04-08T05:25:20.297Z,2008-04-08T05:25:20.297Z,"Brett, I'm afraid this is still very much an issue, so I'll create a clone."
MRM-282,joakime,Joakim Erdfelt,2007-05-25T14:09:59.267Z,2007-05-25T14:09:59.267Z,Cannot reproduce on archiva trunk.
MRM-292,nbeyer,Nathan Beyer,2007-02-25T13:32:43.91Z,2007-02-25T13:32:43.91Z,"Uploading BaseFileTest.diff again. The first upload contained changes out of the scope of this issue, sorry."
MRM-292,evenisse,Emmanuel Venisse,2007-03-01T00:43:59.982Z,2007-03-01T00:43:59.982Z,already fixed but with an other patch
MRM-232,aheritier,Arnaud HERITIER,2006-11-22T18:18:43.121Z,2006-11-22T18:18:43.121Z,It seems to be fixed. I just build it. Can we close this issue ?
MRM-232,elpunzalan,Edwin Punzalan,2006-11-23T01:40:25.157Z,2006-11-23T01:40:25.157Z,"I was able to build from trunk just now.

Similar issues should report the reason for not being able to build archiva.  Thanks."
MRM-232,maxb,Max Bowsher,2006-11-25T11:55:31.441Z,2006-11-25T11:55:31.441Z,"Indeed, it is fixed now, since the deployment of plexus-security-rbac-profile-1.0-alpha-6-20061121.220729-4 occurred.

I *did* report the reason for not being able to build: ""Trunk is currently broken because the MRM-231 changes have already been committed, but they are dependent on very recent changes to plexus-security-rbac-profile which have not yet been deployed to the codehaus snapshot repository."" I guess you are suggesting I should have included an error transcript too."
MRM-261,carlos,Carlos Sanchez,2006-12-22T07:46:30.789Z,2006-12-22T07:46:30.789Z,"Caused by an OOM exception reading the health report

Deleting it seems to work /maven2-converted-from-maven1/.reports/health-report.xml

Underlying problem is that errors are always added to the report, creating duplicated entries that make it grow exponentially"
MRM-261,carlos,Carlos Sanchez,2006-12-22T10:01:25.008Z,2006-12-22T10:01:25.008Z,Latest snapshot of archiva-cli has been deployed to maven-meeper in maven.org
MRM-265,wsmoak,Wendy Smoak,2007-01-15T16:16:57.438Z,2007-01-15T16:16:57.438Z,"Possibly related,  changes made to a pom in a managed repository don't seem to show up in Archiva, even after re-indexing.

See:  http://www.nabble.com/Archiva-and-invalid-poms-t3017517s177.html"
MRM-265,joakime,Joakim Erdfelt,2007-08-09T20:10:45.431Z,2007-08-09T20:10:45.431Z,"MRM-37 - The Database Scan tasks should pick up the removed artifacts, and/or repository configuration and remove the entries from the database and lucene indexes."
MRM-265,oching,Maria Odea Ching,2007-10-21T12:32:24.324Z,2007-10-21T12:32:24.324Z,"Fixed in -r586919

- added method for deleting the artifacts in the db when a repo is deleted
- also deleted repo scan statistics when the repo is deleted
- created DAO that does retrieving, deleting and adding of RepositoryContentStatistics to the db
- added and updated tests
"
MRM-284,joakime,Joakim Erdfelt,2007-05-10T19:02:10.994Z,2007-05-10T19:02:10.994Z,"Postponing.
We should really assign this to the redback project."
MRM-224,jvanzyl,Jason van Zyl,2006-11-16T09:27:20.096Z,2006-11-16T09:27:20.096Z,Now looking for /plugins/ directories and handling them accordingly.
MRM-201,evenisse,Emmanuel Venisse,2006-10-05T15:20:24.508Z,2006-10-05T15:20:24.508Z,Applied. Thanks
MRM-279,joakime,Joakim Erdfelt,2007-05-10T19:03:22.454Z,2007-05-10T19:03:22.454Z,"The whole proxy setup / configuration / administration has changed on trunk.
Closing as cannot reproduce."
MRM-274,wsmoak,Wendy Smoak,2007-02-05T13:11:06.072Z,2007-02-05T13:11:06.072Z,"Continuum at r502389 has the same problem.

And the 'plexus.bat' file does not work on WinXP:

C:\java\archiva-r503520\bin>plexus.bat
Exception in thread ""main"" java.lang.NoClassDefFoundError: org/codehaus/plexus/classworlds/lancher/Launcher
"
MRM-272,handyande,Andrew Williams,2007-01-22T15:25:53.815Z,2007-01-22T15:25:53.815Z,"fixed in trunk of plexus, so should be cascaded to archiva too"
MRM-227,aheritier,Arnaud HERITIER,2006-11-17T08:01:19.634Z,2006-11-17T08:01:19.634Z,Seems to be a problem in mysql : http://www.jpox.org/servlet/forum/viewthread?thread=3396
MRM-227,carlos,Carlos Sanchez,2007-01-09T18:46:09.973Z,2007-01-09T18:46:09.973Z,"Use MySQL > 5.0.3 with a non UTF8 database until MySQL bug http://bugs.mysql.com/bug.php?id=25480 is fixed, or change the application.xml as follows:

Add inside component org.codehaus.plexus.jdo.JdoFactory, configuration, otherProperties:

<!-- this is required for some MySQL versions and configurations, see CONTINUUM-1113 -->
<property>
<name>org.jpox.rdbms.stringDefaultLength</name>
<value>255</value>
</property>"
MRM-227,carlos,Carlos Sanchez,2007-04-26T17:48:51.117Z,2007-04-26T17:48:51.117Z,"Seems that MySQL decided it's not a bug in their side, although it's really inconsistent
http://bugs.mysql.com/bug.php?id=25480"
MRM-227,joakime,Joakim Erdfelt,2007-06-18T16:23:24.958Z,2007-06-18T16:23:24.958Z,Closing as duplicate of MRM-415
MRM-208,jirareport,Jira Report User,2006-12-15T20:14:43.25Z,2006-12-15T20:14:43.25Z,I need to retest for this bug.
MRM-208,brettporter,Brett Porter,2007-07-31T04:12:21.639Z,2007-07-31T04:12:21.639Z,should no longer be relevant
MRM-287,hisidro,Henry S. Isidro,2007-02-22T02:41:01.425Z,2007-02-22T02:41:01.425Z,"File Attached: [MRM-287]-archiva-webapp.patch

This patch adds the context to the generated urls of the navigation links when browsing an artifact."
MRM-287,evenisse,Emmanuel Venisse,2007-02-22T03:12:02.02Z,2007-02-22T03:12:02.02Z,Apply. Thanks.
MRM-258,brettporter,Brett Porter,2006-12-19T23:08:42.706Z,2006-12-19T23:08:42.706Z,works for me. Updated documentation.
MRM-206,jdidion,John Didion,2007-06-25T17:31:35.611Z,2007-06-25T17:31:35.611Z,"I basically took the xmlrpc stuff from Continuum and ported it over to Archiva. There's only one method - searchForTerm. But the skeleton (read: tedious copy-and-paste work) is done.

Not included are the necessary additions to web.xml:

  <servlet>
    <servlet-name>XmlRpcServlet</servlet-name>
    <servlet-class>org.apache.maven.archiva.xmlrpc.server.ArchivaXmlRpcServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>XmlRpcServlet</servlet-name>
    <url-pattern>/xmlrpc</url-pattern>
  </servlet-mapping>

and to the archiva-webapp pom.xml:

  <dependency>
    <groupId>org.apache.maven.archiva</groupId>
    <artifactId>archiva-xmlrpc-server</artifactId>
    <scope>runtime</scope>
  </dependency>"
MRM-206,oliveros,Drio Oliveros,2007-12-13T07:47:00.305Z,2007-12-13T07:47:00.305Z,"Based on what John has provided, I've made some adjustments to XMLRPC by adding two services, one for retrieving all dependencies of a given artifact and the other one, the dependees, i.e., projects that depend on it.

Attached are the patch and zip files containing changes to parent and webapp projects and the xmlrpc components respectively."
MRM-206,wsmoak,Wendy Smoak,2007-12-15T09:47:34.563Z,2007-12-15T09:47:34.563Z,"This sounds interesting.  What do the urls look like?  How is it secured?

Can you write a page of docs for it, or explain more about it here?  I didn't see any .apt or .xml docs in the zip file."
MRM-206,oliveros,Drio Oliveros,2007-12-17T04:38:32.544Z,2007-12-17T04:38:32.544Z,"The default URL is <context-root/xmlrpc, e.g., http://localhost:8080/archiva/xmlrpc. During the connection phase, username and password should be provided.

In order to use it, you basically have to apply the attached patch to all affected components and build them again, incluing the webapp.
Then you are good to create a client that will connect thru XMLRPC.
Here's a snippet of how a client looks like:

{code:title=Client.java|borderStyle=solid}
import org.apache.maven.archiva.xmlrpc.client.ArchivaXmlRpcClient;
import org.apache.maven.archiva.xmlrpc.client.Dependee;
import org.apache.xmlrpc.XmlRpcException;

       ...       
        try {
            ArchivaXmlRpcClient client = new ArchivaXmlRpcClient(
                archivaURL, archivaUser, archivaPassword);

           List<Dependee> dependees = client.getDependees(groupId, 
                   artifactId(), version());

           for (Dependee dependee : dependees) {
               ...
           }
        } catch (XmlRpcException e) {
        ...
        }
{code}

Additionally, the following dependencies should be added to client pom.xml:

{code:title=pom.xml|borderStyle=solid}

    <dependency>
        <groupId>org.apache.maven.archiva</groupId>
        <artifactId>archiva-xmlrpc-client</artifactId>
        <version>1.1-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>org.apache.xmlrpc</groupId>
        <artifactId>xmlrpc-client</artifactId>
        <version>3.1</version>
    </dependency>
{code}

If you have any questions, please let me know.
Drio"
MRM-206,oching,Maria Odea Ching,2008-02-25T02:37:19.885Z,2008-02-25T02:37:19.885Z,"The patches look good. Thanks John and Dario!

Could you also provide tests for the xmlrpc modules?"
MRM-206,jameswdumay,James William Dumay,2008-05-08T01:42:21.507Z,2008-05-08T01:42:21.507Z,Moving to 1.1.x
MRM-206,jameswdumay,James William Dumay,2008-05-08T02:22:39.841Z,2008-05-08T02:22:39.841Z,Moving to 1.2
MRM-206,oching,Maria Odea Ching,2008-11-03T16:25:54.061Z,2008-11-03T16:25:54.061Z,"Changes in trunk -r710189:
- Added search + test cases in the archiva web services which works with the Atlassian xmlrpc binder which James did (note: service methods are not yet complete)"
MRM-206,oching,Maria Odea Ching,2008-11-04T11:18:29.805Z,2008-11-04T11:18:29.805Z,"Changes in trunk -r711320:
- added getDependencies(..) and getDependees(..) implementation"
MRM-206,oching,Maria Odea Ching,2009-01-19T20:19:59.491Z,2009-01-19T20:19:59.491Z,"I forgot to add, there were additional fixes for this too in trunk -r732674."
MRM-233,nramirez,Nap Ramirez,2006-11-21T20:22:05.807Z,2006-11-21T20:22:05.807Z,This patch adds the 'Edit user info' link in the side navigation menu.
MRM-233,elpunzalan,Edwin Punzalan,2006-11-23T01:20:35.878Z,2006-11-23T01:20:35.878Z,"patch applied, thanks."
MRM-253,aramirez,Allan Ramirez,2006-12-19T00:15:24.72Z,2006-12-19T00:15:24.72Z,"Attached patch is to fix this issue, please apply. Thanks"
MRM-253,evenisse,Emmanuel Venisse,2006-12-19T02:54:11.248Z,2006-12-19T02:54:11.248Z,Applied. Thanks.
MRM-221,gregrluck,Greg Luck,2006-11-14T19:02:45.876Z,2006-11-14T19:02:45.876Z,I created another new repository and retested. This time I could browse to it bu the webdav issue remains the same.
MRM-221,carlos,Carlos Sanchez,2006-11-21T18:58:00.612Z,2006-11-21T18:58:00.612Z,"Shouldn't this be wagon-webdav instead of wagon-ssh ?

<artifact:install-provider artifactId=""wagon-ssh"" version=""1.0-beta-1""/>"
MRM-221,jirareport,Jira Report User,2006-12-15T20:13:12.05Z,2006-12-15T20:13:12.05Z,Should be resolved before a release.
MRM-221,joakime,Joakim Erdfelt,2007-01-02T15:12:53.661Z,2007-01-02T15:12:53.661Z,"The URL in <remoteRepository url=""dav://localhost:9091/repository/maven_repository""> is invalid.

it should be in the format dav:${protocol}://${hostname}:${port}/${archivaContext}/repository/${repositoryId} 
So, assuming you have archiva installed as context '/archiva', the url above should read as dav:http://localhost:9091/archiva/repository/maven_repository

See the webdav url and POM snippet in the managed repository for the proper URL to be using.
( example found in the last image link on this blog http://coderoshi.blogspot.com/2006/12/apache-archiva-part-one.html )"
MRM-221,wsmoak,Wendy Smoak,2007-06-19T19:47:02.923Z,2007-06-19T19:47:02.923Z,"webdav deployment is working fine for me in 1.0-alpha-1

please ask on the user list or re-open if it's still an issue"
MRM-281,joakime,Joakim Erdfelt,2007-05-11T09:12:22.649Z,2007-05-11T09:12:22.649Z,"Unable to reproduce in trunk.
This is expected, as that entire process has been reworked anyway."
MRM-295,wsmoak,Wendy Smoak,2007-04-28T21:55:57.365Z,2007-04-28T21:55:57.365Z,"Added ${version} to finalName in r533459 on trunk (in archiva-plexus-runtime/pom.xml).

Leaving this open to make sure it also gets fixed on the archiva-jpox-database-refactor branch."
MRM-295,wsmoak,Wendy Smoak,2007-05-11T23:56:51.854Z,2007-05-11T23:56:51.854Z,"Fixed on trunk in r534082
Merging changes from old (archiva-0.9) trunk into branch.
svn merge revision 518676 to 534045.
"
MRM-234,carlos,Carlos Sanchez,2006-11-21T20:30:43.456Z,2006-11-21T20:30:43.456Z,The code I tested from could.it is http://could.it/repo/webdav/head rev# 262
MRM-234,carlos,Carlos Sanchez,2006-11-21T20:39:46.187Z,2006-11-21T20:39:46.187Z,Client and server logs
MRM-234,carlos,Carlos Sanchez,2006-11-21T20:44:39.132Z,2006-11-21T20:44:39.132Z,Built version of http://could.it/repo/webdav/head rev# 262
MRM-234,joakime,Joakim Erdfelt,2007-01-03T14:49:24.202Z,2007-01-03T14:49:24.202Z,"What's happening (Technical)

*Request*

{code}
MOVE /repository/corporate/cas HTTP/1.1
Content-Language: en-us
Accept-Language: en-us
Overwrite: F
Destination: http://192.168.1.104:9091/repository/snapshots/cas
Translate: f
User-Agent: Microsoft Data Access Internet Publishing Provider DAV
Host: 192.168.1.104:9091
Content-Length: 0
Connection: Keep-Alive
Cookie: JSESSIONID=1ia9oq074832f
Authorization: Basic YWRtaW46Ym9iMQ==
{code}

*Response*

{code}
HTTP/1.1 500 URI_scheme_is_not_file
Content-Type: text/html; charset=ISO-8859-1
Content-Length: 3887
Server:  Archiva : CouldIT-WebDAV/0.4
DAV: 1
MS-Author-Via: DAV
Connection: keep-alive

<h2>HTTP ERROR: 500</h2><pre>URI scheme is not ""file""</pre>
<p>RequestURI=/repository/corporate/cas</p><h3>Caused by:</h3><pre>java.lang.IllegalArgumentException: URI scheme is not ""file""
.at java.io.File.<init>(File.java:324)
.at it.could.webdav.DAVRepository.getResource(DAVRepository.java:125)
.at it.could.webdav.methods.COPY.process(COPY.java:52)
.at it.could.webdav.methods.MOVE.process(MOVE.java:47)
.at it.could.webdav.DAVProcessor.process(DAVProcessor.java:79)
.at org.apache.maven.archiva.web.servlet.repository.RepositoryAccess.servletRequest(RepositoryAccess.java:227)
.at org.apache.maven.archiva.web.servlet.PlexusComponentServlet.service(PlexusComponentServlet.java:129)
.at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:445)
.at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1049)
.at com.opensymphony.webwork.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:189)
.at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1040)
.at com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:118)
{code}

The webdav servlet is being passed 2 pieces of information.

* Source File to Move From: /repository/corporate/cas
* Destination to Move To: http://192.168.1.104:9091/repository/snapshots/cas

The webdav servlet cannot handle moving a resource out to another URL.
It expects local to repository moves only.
That's why we get the URI scheme is not ""file"" error message.

Potential Solutions:

# Deny COPY and MOVE requests from working.
# Adjust the destination header if it is determined to belong to another archiva repository before it.could.webdav handles the request.
# Create support for remove URL webdav move in it.could.webdav sourcebase using slide-webdav-client libraries.
# Dump it.could.webdav in favor of slide-webdav-servlet

None of these solutions seem like a good idea to me.
Any opinions?
"
MRM-234,brettporter,Brett Porter,2007-01-03T17:51:41.024Z,2007-01-03T17:51:41.024Z,"what's the downside of using slide?

of them all, (2) seems like the ""best"" solution, assuming that is fairly straightfoward?"
MRM-234,joakime,Joakim Erdfelt,2007-06-17T20:13:39.607Z,2007-06-17T20:13:39.607Z,"The biggest concern in implementing solution #2 is the security aspect.
This would mean the webdav impl is now aware of redback and archiva itself.  (unless we do some smoke and mirrors on the incoming HttpServletRequest before the webdav impl gets it)

Supporting the WebDav MOVE operation is going to be tricky."
MRM-234,jameswdumay,James William Dumay,2008-05-06T21:00:10.889Z,2008-05-06T21:00:10.889Z,Moving to webdav component
MRM-234,jameswdumay,James William Dumay,2008-05-06T21:03:04.837Z,2008-05-06T21:03:04.837Z,This functionality should work once the migration to Jackrabbits webdav API is complete.
MRM-234,jameswdumay,James William Dumay,2008-07-04T23:12:49.928Z,2008-07-04T23:12:49.928Z,MRM-781 is now complete.
MRM-297,joakime,Joakim Erdfelt,2007-03-02T08:25:38.951Z,2007-03-02T08:25:38.951Z,Fixed in r513779.
MRM-228,daniel@mohni.net,Daniel Mohni,2006-11-20T06:56:56.609Z,2006-11-20T06:56:56.609Z,"patch was applied, therefore the issue can be closed..."
MRM-228,daniel@mohni.net,Daniel Mohni,2006-11-20T08:39:29.287Z,2006-11-20T08:39:29.287Z,"tortoisesvn told me that the pach was applied, but this was not correct, sorry m8's"
MRM-228,jirareport,Jira Report User,2006-11-24T15:49:12.075Z,2006-11-24T15:49:12.075Z,"svn ci -m ""Applying Daniel Mohni's excellent documentation on using Archiva from Maven. ""

Adding         src/site/apt/guides/getting-started/maven-configuration.apt
Sending        src/site/site.xml
Transmitting file data ..
Committed revision 479011.

I edited it a chunk, so feel free to re-open if I butchered anything."
MRM-252,brettporter,Brett Porter,2006-12-19T23:15:30.998Z,2006-12-19T23:15:30.998Z,"works fine on Mac. Currently reviving my windows box (again) to test it there and on linux (vmware).
"
MRM-252,brettporter,Brett Porter,2006-12-23T02:09:39.13Z,2006-12-23T02:09:39.13Z,replicated with Windows and JDK 6 final. Weird that it worked with the RC
MRM-252,brettporter,Brett Porter,2006-12-23T03:58:06.843Z,2006-12-23T03:58:06.843Z,"this is a result of the plexus-appserver plugin not running at all (not being bound to the lifecycle), not a fault in the assembly plugin as it first appeared. Investigating"
MRM-252,brettporter,Brett Porter,2006-12-23T04:13:17.893Z,2006-12-23T04:13:17.893Z,"for some reason, the ordering is not being honoured. FWIW, this works in Maven 2.0.5+ because of a fix to this. "
MRM-252,brettporter,Brett Porter,2006-12-23T04:16:03.575Z,2006-12-23T04:16:03.575Z,moved the appserver plugin to the process-resources phase to guarantee ordering
MRM-209,evenisse,Emmanuel Venisse,2006-11-02T09:25:05.789Z,2006-11-02T09:25:05.789Z,it's fixed in plexus-appserver 2.0-alpha-4. We need to update it in Archiva.
MRM-214,jirareport,Jira Report User,2006-12-15T20:13:47.755Z,2006-12-15T20:13:47.755Z,Tis done. A while back - apparantly I forgot to close this when I did it.
MRM-211,ndeloof,nicolas de loof,2006-10-18T10:32:13.779Z,2006-10-18T10:32:13.779Z,Seems to be duplicated fomr MRM-210
MRM-211,brettporter,Brett Porter,2006-10-18T17:55:12.242Z,2006-10-18T17:55:12.242Z,"it could be the same, or it might be in a different section, not sure off the top of my head. Linking."
MRM-211,ndeloof,nicolas de loof,2006-10-19T06:08:18.132Z,2006-10-19T06:08:18.132Z,"As far as I understand Maven2 API, this issue requires to register to DefaultArtifactHandlerManager the expected handler Map with ""jar"" extensions for ""plugin"" type (and some others).

The components.xml from Maven2 project ""maven-artifact"" does register custom extension for types
  * ejb
  * test-jar
  * maven-plugin (maven2 plugin)
  * java-source
  * javadoc
  * ejb-client

Nothing about maven1 plugin





"
MRM-211,ndeloof,nicolas de loof,2006-10-19T06:56:48.548Z,2006-10-19T06:56:48.548Z,"I simply added 
""
    <component>
      <role>org.apache.maven.artifact.handler.ArtifactHandler</role>
      <role-hint>plugin</role-hint>
      <implementation>org.apache.maven.artifact.handler.DefaultArtifactHandler</implementation>
      <configuration>
        <type>plugin</type>
        <extension>jar</extension>
        <language>java</language>
        <addedToClasspath>true</addedToClasspath>
      </configuration>
    </component>	
""

In WEB-INF/classes/META-INF/plexus/components.xml and it works now.

Do we have to upgrade maven-artifact for this or can we consider this ""maven 1 support"" feature to be only in archiva scope ?"
MRM-211,brettporter,Brett Porter,2006-10-19T07:04:44.755Z,2006-10-19T07:04:44.755Z,I think just archiva is fine
MRM-211,aheritier,Arnaud HERITIER,2006-11-03T17:49:54.349Z,2006-11-03T17:49:54.349Z,"I added this setting in
archiva-webapp/src/main/resources/META-INF/plexus/application.xml
It seems to work correctly.
Can we commit it ?
"
MRM-211,aheritier,Arnaud HERITIER,2006-11-04T16:44:19.145Z,2006-11-04T16:44:19.145Z,A patch is available
MRM-211,aheritier,Arnaud HERITIER,2006-11-04T16:59:29.738Z,2006-11-04T16:59:29.738Z,It's really important for m1 users
MRM-211,ndeloof,nicolas de loof,2006-11-06T10:23:13.877Z,2006-11-06T10:23:13.877Z,"I just notice maven1 plugins in maven repo now have the "".plugin"" extension.

Did someone change the maven1 to maven2 converter for this ?"
MRM-211,aheritier,Arnaud HERITIER,2006-11-06T11:10:11.691Z,2006-11-06T11:10:11.691Z,In the central repository ?????
MRM-211,aheritier,Arnaud HERITIER,2007-05-10T17:01:32.134Z,2007-05-10T17:01:32.134Z,Applied in 0.9 branch
MRM-211,brettporter,Brett Porter,2007-09-15T22:31:12.746Z,2007-09-15T22:31:12.746Z,"the patch no longer worked on trunk since it doesn't use maven-artifact, so I fixed it an alternative way and added a test"
MRM-237,jirareport,Jira Report User,2006-12-15T19:52:50.601Z,2006-12-15T19:52:50.601Z,"Yep, archiva-plexus-runtime/pom.xml is now depending on javax.mail 1.4.

Deleted from the site, and site redeployed.

Thanks for pointing this out."
MRM-289,olamy,Olivier Lamy (*$^%`),2007-02-24T15:44:48.829Z,2007-02-24T15:44:48.829Z,patch attached
MRM-240,joakime,Joakim Erdfelt,2007-05-22T13:59:25.518Z,2007-05-22T13:59:25.518Z,"Unable to reproduce.

Likely fixed in major trunk refactoring for 1.0."
MRM-291,joakime,Joakim Erdfelt,2007-06-18T20:16:24.953Z,2007-06-18T20:16:24.953Z,"Closing as fixed.

I did this a while ago in trunk.
I cannot find any Serializable classes that I missed."
MRM-203,brettporter,Brett Porter,2007-07-31T04:21:23.805Z,2007-07-31T04:21:23.805Z,we need to consider the most appropriate role for the 'archiva-access-reports' permission. I expect the default should be to make it visible.
MRM-203,joakime,Joakim Erdfelt,2007-10-02T13:56:15.428Z,2007-10-02T13:56:15.428Z,"Closing, as this is currently this is configurable by the archiva administrator.
They can choose to grant the archiva-access-reports to anyone they choose."
MRM-275,brettporter,Brett Porter,2007-08-04T23:19:46.171Z,2007-08-04T23:19:46.171Z,"given you've used a consumer to implement MRM-294, does this mean that this issue is to just create configuration admin for the consumer now? (the daysOlder /retentionCount on a repository)."
MRM-275,oching,Maria Odea Ching,2007-08-05T10:03:37.951Z,2007-08-05T10:03:37.951Z,"yep, this just needs the UI in the Managed Repo page to specify which of these 2 (by days old or by retention count) the repo manager wants to implement."
MRM-275,oching,Maria Odea Ching,2007-08-06T00:48:19.618Z,2007-08-06T00:48:19.618Z,"Fixed in -r563030.

Added the ff. fields in repo configuration and in repository page:
- days older (remove snapshots older than the specified number of days)
- retenttion count (number of snapshots to be retained during repo purge)
- delete released snapshots (enable or disable delete of released snapshots during repo purge)"
MRM-238,carlos,Carlos Sanchez,2006-11-26T23:51:06.171Z,2006-11-26T23:51:06.171Z,"Seems to me that it's a valid checksum, so the problem is in archiva"
MRM-238,joakime,Joakim Erdfelt,2007-05-25T14:05:29.575Z,2007-05-25T14:05:29.575Z,Cannot reproduce this failure using archiva trunk.
MRM-293,nbeyer,Nathan Beyer,2007-02-25T13:28:35.907Z,2007-02-25T13:28:35.907Z,"I cloned MRM-292, because this issue has the same root cause, hardcoded separators in paths of the test cases. This issue is related to the test org.apache.maven.archiva.common.consumers.GenericArtifactConsumerTest."
MRM-293,nbeyer,Nathan Beyer,2007-02-25T13:31:35.117Z,2007-02-25T13:31:35.117Z,GenerifArtifactConsumerTest.diff is a patch to correct this test case.
MRM-293,joakime,Joakim Erdfelt,2007-05-11T13:13:45.793Z,2007-05-11T13:13:45.793Z,Fixed on trunk.
MRM-257,joakime,Joakim Erdfelt,2007-05-22T13:57:12.904Z,2007-05-22T13:57:12.904Z,the /proxy/ url no longer exists.
MRM-216,brettporter,Brett Porter,2006-12-19T21:36:32.673Z,2006-12-19T21:36:32.673Z,"I think, for now, the webdav interface will be sufficient.

This shouldn't just be a file upload, but a bundle upload, which requires more work."
MRM-216,aheritier,Arnaud HERITIER,2007-03-20T00:49:21.211Z,2007-03-20T00:49:21.211Z,"It's not sufficient because to use the webdav with maven 2.0.X we have to be in a directory where maven 2 can find a pom with the webdav extension. It's really annoying for our users who are trying by default to do it from where the jar is. I agree with the need of the bundle but we can certainly begin with something really simple :
- pom
- pom + artifact
- artifactId + groupId + version + type + artifact
With this 3 cases with certainly cover the majority of the needs."
MRM-216,wsmoak,Wendy Smoak,2007-04-28T11:00:07.059Z,2007-04-28T11:00:07.059Z,Individual artifact file upload should be supported.  Bundles are fine but shouldn't be required.
MRM-216,wsmoak,Wendy Smoak,2007-08-18T21:44:53.43Z,2007-08-18T21:44:53.43Z,"MRM-216-20070818-1935.patch has initial work to support uploading a single artifact.  

Build, start the webapp with ""mvn jetty:run"" and go to http://localhost:9091/upload.action

You can use 'internal' as the repositoryId.  Success just goes back to the same page.  Look at the console for the location of the temp file and the path within the repository.
"
MRM-216,oching,Maria Odea Ching,2008-03-11T02:06:53.563Z,2008-03-11T02:06:53.563Z,"Will take a look at this issue and adjust the patch to the changes in the Archiva code. 
Thanks Wendy! :-)"
MRM-216,oching,Maria Odea Ching,2008-03-11T03:05:40.458Z,2008-03-11T03:05:40.458Z,"Applied the patch in archiva-trunk -r635836. 
I commented out some parts in the UploadAction class which need to be modified due to the changes in the Archiva components used.

I made an initial list of what I think still needs to be done and can be improved:
- modify the commented parts to adapt to the changes in the components (like the repository layout)
- add 'Upload/Deploy Artifact' in the navigation menu
- form validation
- maybe we could have a drop-down box for the repository ids
- include this feature in the documentation
"
MRM-216,wsmoak,Wendy Smoak,2008-03-11T08:41:00.378Z,2008-03-11T08:41:00.378Z,The upload feature also needs to be secured based on repository permissions.
MRM-216,oching,Maria Odea Ching,2008-03-13T05:43:17.701Z,2008-03-13T05:43:17.701Z,"The following has already been finished in -r636284 and -r636703:
- 'Upload Artifact' already in navigation menu
- dropdown box for the repository ids
- check for write permissions before allowing deployment in repo
- allow user to specify whether to generate a pom for the artifact (for Maven 2 artifacts)
- update metadata file
"
MRM-216,oching,Maria Odea Ching,2008-03-13T21:01:03.785Z,2008-03-13T21:01:03.785Z,"Additional fix:
- Added form validation and other validations in action class (-r636953)"
MRM-216,oching,Maria Odea Ching,2008-03-13T21:22:52.926Z,2008-03-13T21:22:52.926Z,"Additional fix:
-  generate or update checksums of metadata file (-r636957)"
MRM-216,oching,Maria Odea Ching,2008-03-13T21:57:06.605Z,2008-03-13T21:57:06.605Z,Added instructions on how to deploy an artifact via the web UI form in archiva-docs (-r636970)
MRM-299,witkow,Milosz Witkowski,2007-03-07T08:19:22.585Z,2007-03-07T08:19:22.585Z,":) if someone from devel team will have time:
file:
/archiva-common/src/main/java/org/apache/maven/archiva/common/consumers/ConsumerFactory.java

line: 52 

there is :
...
 consumer = (Consumer) container.lookup( Consumer.ROLE,container.getLookupRealm() );
...

but should be:
...
 consumer = (Consumer) container.lookup( Consumer.ROLE,name, container.getLookupRealm() );
...

this one fixes problem with wrong initialization of consumers.
"
MRM-299,joakime,Joakim Erdfelt,2007-03-09T08:40:33.975Z,2007-03-09T08:40:33.975Z,"Thanks for the fix!

Applied in r516417."
MRM-231,oching,Maria Odea Ching,2006-11-21T05:46:23.382Z,2006-11-21T05:46:23.382Z,"Aside from the changes I made in DeleteRepositoryAction and AbstractDeleteRepositoryAction, I also submitted a patch in plexus security that is needed for this issue.

Please refer to http://jira.codehaus.org/browse/PLX-296.

Thanks! :)"
MRM-231,elpunzalan,Edwin Punzalan,2006-11-23T01:53:44.666Z,2006-11-23T01:53:44.666Z,linked issue has been applied
MRM-226,huybrechts,Tom Huybrechts,2006-11-16T15:38:43.543Z,2006-11-16T15:38:43.543Z,DefaultArtifactDiscoverer:90 thinks anything ending with -sources has classifier sources.
MRM-226,huybrechts,Tom Huybrechts,2006-11-16T15:56:53.006Z,2006-11-16T15:56:53.006Z,"attached a patch - explicit check for test-sources
junit test included"
MRM-226,jirareport,Jira Report User,2006-11-16T16:55:09.588Z,2006-11-16T16:55:09.588Z,"Applied:

svn ci -m ""Applying Tom Huybrechts patch rom MRM-226. Stops the indexer blowing up when it hits it and thinks its a -sources for a foo-test artifact""

Sending        archiva-discoverer/src/main/java/org/apache/maven/archiva/discoverer/DefaultArtifactDiscoverer.java
Sending        archiva-discoverer/src/test/java/org/apache/maven/archiva/discoverer/DefaultArtifactDiscovererTest.java
Adding         archiva-discoverer/src/test/repository/org/apache/maven/testing/1.0/testing-1.0-test-sources.jar
Transmitting file data ...
Committed revision 475959."
MRM-202,joakime,Joakim Erdfelt,2007-06-18T20:23:18.393Z,2007-06-18T20:23:18.393Z,"This kind of change should be made consistent with both Archiva and Continuum.

I personally favor having the logo in the top left be linked to that specific Archiva installation's home URL.

We can use the breadcrumb bar to link the Archiva project website.

As for configuring the logo, that should be separated out from this jira and a new one created."
MRM-202,joakime,Joakim Erdfelt,2007-10-02T13:12:29.474Z,2007-10-02T13:12:29.474Z,Commit to revision 581332 of archiva/trunk.
MRM-247,elpunzalan,Edwin Punzalan,2006-12-11T02:24:36.597Z,2006-12-11T02:24:36.597Z,"Applied, thanks."
MRM-225,brill,Brill Pappin,2006-11-19T18:54:32.574Z,2006-11-19T18:54:32.574Z,Both issues are related to how passwords are handled.
MRM-225,jirareport,Jira Report User,2006-12-15T20:09:20.923Z,2006-12-15T20:09:20.923Z,I think this should be decided on before the beta-1.
MRM-225,wsmoak,Wendy Smoak,2007-05-11T20:51:54.324Z,2007-05-11T20:51:54.324Z,"Password complexity is configurable via Plexus Redback.  

See:  http://maven.apache.org/archiva/guides/security-configuration.html"
MRM-225,joakime,Joakim Erdfelt,2007-06-17T20:27:00.642Z,2007-06-17T20:27:00.642Z,"Closing as ""Wont Fix""

Agreement on ""default values"" cannot be met. (Everyone has a different view on what is considered default.  Having the restrictions in place lets people know that are restrictions.)
Documentation on how to change the defaults exist at http://maven.apache.org/archiva/guides/security-configuration.html"
MRM-290,olamy,Olivier Lamy (*$^%`),2007-02-24T15:59:24.041Z,2007-02-24T15:59:24.041Z,patch attached
MRM-290,joakime,Joakim Erdfelt,2007-05-10T18:59:45.722Z,2007-05-10T18:59:45.722Z,Postponing
MRM-290,wsmoak,Wendy Smoak,2007-06-17T20:48:44.503Z,2007-06-17T20:48:44.503Z,original summary:  using plexus-contextualizer to setup port in jetty
MRM-290,brettporter,Brett Porter,2007-07-27T18:13:27.621Z,2007-07-27T18:13:27.621Z,"applied, thanks!"
MRM-242,nramirez,Nap Ramirez,2006-11-28T02:15:54.579Z,2006-11-28T02:15:54.579Z,This patch replaces the proxy url into the absolute url used in the Download link when browsing for artifacts in archiva.
MRM-242,brettporter,Brett Porter,2006-11-28T19:16:17.405Z,2006-11-28T19:16:17.405Z,"this will be protected by basic auth which is not desirable. We need to either:
- direct the download URL via a webwork action protected by the security system
- have the security system set basic auth credentials (including guest credentials).

I'd opt for the first."
MRM-242,carlos,Carlos Sanchez,2006-12-04T23:28:31.047Z,2006-12-04T23:28:31.047Z,"why is that? acegi regardless of the auth method stores in the session (or any configured place) the authentication values, so it's shared across any auth methods used"
MRM-242,carlos,Carlos Sanchez,2006-12-04T23:29:48.493Z,2006-12-04T23:29:48.493Z,btw still better to be asked for the password that don't work at all
MRM-242,jmcconnell,Jesse McConnell,2006-12-05T00:12:34.864Z,2006-12-05T00:12:34.864Z,"they are set in the session, just not sure if they are available to the security system in that proxy url or not...but anyway authn and authz are completely different operations and the webwork action or at least an interceptor on the stack would be way to go I think, with my meager knowledge of the problem domain here

the way things are setup now, if you have a principal available and the user is authenticated then the authz operations would check the principals permission set based on some operation 'archiva-deploy-artifact' for instance, and then some resource, perhaps the groupId here, or the global * resource if it applies to the entire repo.  if a permission matches the operation and resource up then its authz.  the other approach is to grant those permissions to a role that the guest user has assigned, then it is available to anyone through the authz system."
MRM-242,jmcconnell,Jesse McConnell,2006-12-06T16:37:05.741Z,2006-12-06T16:37:05.741Z,"nap, having some problems with this part of the patch

${model.artifactId}-${model.version}.${model.packaging}

that can not be used reliably to generate the name of the file to pull down

ex maven-plugin is file extension .jar not .maven-plugin

could you resolve that while I work on the other part of this?"
MRM-242,nramirez,Nap Ramirez,2006-12-07T01:18:50.486Z,2006-12-07T01:18:50.486Z,"Ok, I'll revise my patch for that.  I'll try to include a fix for the authz if I happen to pass along the code.  Thanks! :)"
MRM-242,jmcconnell,Jesse McConnell,2006-12-07T15:50:55.544Z,2006-12-07T15:50:55.544Z,"lemme know when you get that on here, I need to fix up something else before I get back to look at the authz on here"
MRM-242,nramirez,Nap Ramirez,2006-12-09T10:33:30.106Z,2006-12-09T10:33:30.106Z,I revised the 1st patch and fixed the artifact file extension used in the download url.  Please use the 2nd patch.
MRM-242,nramirez,Nap Ramirez,2006-12-09T10:45:37.453Z,2006-12-09T10:45:37.453Z,"Jesse,

The second patch fixes the download url of the artifact.  Anyway, regarding the authz thingy, the browser still prompts me for username & password though Joakim told me he has this working already.  Probably some trouble bridging the SecuritySystem's authn/authz to the HttpAuthenticator.  Can you verify this please?

Cheers!"
MRM-242,brettporter,Brett Porter,2006-12-10T23:47:07.235Z,2006-12-10T23:47:07.235Z,Joakim - wouldn't directing this via a webwork action for download rather than bridging the httpauthenticator be easier?
MRM-242,brettporter,Brett Porter,2006-12-26T20:53:52.439Z,2006-12-26T20:53:52.439Z,patches are applied. waiting on the webdav integration.
MRM-242,joakime,Joakim Erdfelt,2007-05-22T10:51:24.581Z,2007-05-22T10:51:24.581Z,Fixed in trunk.
MRM-256,joakime,Joakim Erdfelt,2007-05-22T13:57:51.116Z,2007-05-22T13:57:51.116Z,Configuration has been overhauled in trunk.
MRM-200,evenisse,Emmanuel Venisse,2006-10-05T16:28:09.431Z,2006-10-05T16:28:09.431Z,Applied. Thanks.
MRM-212,raphael,Raphal Luta,2006-10-26T16:24:47.68Z,2006-10-26T16:24:47.68Z,"Here is a first attempt to add a configurable checksum policy.
This patch file only contains model change and checksum verification. 
Not yet any configuration."
MRM-212,jirareport,Jira Report User,2006-10-27T18:18:46.019Z,2006-10-27T18:18:46.019Z,"Seems like a good start to me Raphael, and it doesn't seem to break anything.

I'm not sure on the direction though - seems to me that after running the report I would want to then say ""Now fix things"", rather than have anything happen automatically. I'm not sure if automatic is the direction you're going.

(I'm new to Archiva though, so not sure what the planned direction is on many things)"
MRM-212,raphael,Raphal Luta,2006-10-30T16:52:12.014Z,2006-10-30T16:52:12.014Z,"I must admit beeing new to archiva too. 
I only currently focus on the proxying aspect. (by hacking the archiva.xml configuration file)
I have not yet played with the reports (nor really understand what their for)
I also hav no idea on the way to configure by web (never used webwork myself)
"
MRM-212,aheritier,Arnaud HERITIER,2006-11-03T17:52:12.577Z,2006-11-03T17:52:12.577Z,"I added to your patch the web part to create/view/edit the checksum policy in proxied repositories.
It's working fine !!"
MRM-212,aheritier,Arnaud HERITIER,2006-11-03T18:26:56.275Z,2006-11-03T18:26:56.275Z,I have a bug. I'm fixing it. I'll publish the patch just after ....
MRM-212,aheritier,Arnaud HERITIER,2006-11-04T16:41:36.41Z,2006-11-04T16:41:36.41Z,"This patch includes the one from Raphal but it fix the algorithm in DefaultProxyRequestHandler.checkChecksum(...) to fix some problems, and it updates web screens to view/edit the checksum policy for proxies.
I'm annoyed because I had to change the test ProxyRequestHandlerTest. I had to set the GlobalChecksumPolicy of the ArtifactRepositoryFactory to CHECKSUM_POLICY_FAIL. I don't understand why I need to do it here, because it's the default checksum policy.
Is there someone who can review this patch ?
Do you think that we have to add some new tests ?
For those who want to give a try to this fix (and to the one for MRM-211), I just uploaded a snapshot of the webapp here : http://people.apache.org/~aheritier/archiva/"
MRM-212,aheritier,Arnaud HERITIER,2006-11-04T16:43:46.199Z,2006-11-04T16:43:46.199Z,It's very important to add this feature in archiva. Without it we can't use archiva as a proxy. There are too many checksum errors in m1 repositories (I'm not sure that it is the case with m2).
MRM-212,wsmoak,Wendy Smoak,2007-03-10T11:43:24.763Z,2007-03-10T11:43:24.763Z,"Archiva definitely needs this feature.  Right now, it will not proxy the latest release of maven-gpg-plugin due to a bad checksum.

We need to fix the bad checksums in central and make it stop happening-- is it the deploy plugin causing the problem?

[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Failed to resolve artifact.

GroupId: org.apache.maven.plugins
ArtifactId: maven-gpg-plugin
Version: 1.0-alpha-3

Reason: Unable to download the artifact from any repository

  org.apache.maven.plugins:maven-gpg-plugin:pom:1.0-alpha-3

from the specified remote repositories:
  central (http://localhost:8080/archiva/repository/releases),
...

From the log file:

INFO   | jvm 1    | 2007/03/10 10:23:52 | 2007-03-10 10:23:52,526 [SocketListener0-2] WARN  ProxyRequestHandler            - The checksum 'e4525958537d3b438ede7acb73bd10ba' did not match the remote value: D41D8CD98F00B204E9800998ECF8427E
INFO   | jvm 1    | 2007/03/10 10:23:52 | 2007-03-10 10:23:52,526 [SocketListener0-2] WARN  ProxyRequestHandler            - Skipping repository Central Repository: Checksum failures occurred while downloading org/apache/maven/plugins/maven-gpg-plugin/1.0-alpha-3/maven-gpg-plugin-1.0-alpha-3.pom

"
MRM-212,aheritier,Arnaud HERITIER,2007-03-11T18:51:52.979Z,2007-03-11T18:51:52.979Z,"With the recent refactoring, we have xcertainly to review our patch. I'll try to do it in some days because I want to update my archiva release and I need this , I'll commit it directly to be sure that we'll not loose it."
MRM-212,aheritier,Arnaud HERITIER,2007-05-10T16:39:29.233Z,2007-05-10T16:39:29.233Z,applied in 0.9 branch
MRM-212,joakime,Joakim Erdfelt,2007-05-22T14:36:03.716Z,2007-05-22T14:36:03.716Z,"Archiva trunk has a post-download policy for checksums.

Possible values for this policy.
* FAIL - if a bad checksum is downloaded, consider the downloaded file to be bad, fail the attempt.
* FIX - if a bad checksum is downloaded, report it, and fix it, returning the fixed checksum to the client.
* IGNORE - do not check the checksum.
"
MRM-212,joakime,Joakim Erdfelt,2007-05-25T14:06:02.561Z,2007-05-25T14:06:02.561Z,This improvement has been made on archiva trunk.
MRM-223,jirareport,Jira Report User,2006-12-15T19:34:27.024Z,2006-12-15T19:34:27.024Z,"Confirmed - still a problem, and quite the blocker."
MRM-223,joakime,Joakim Erdfelt,2007-05-22T14:00:30.34Z,2007-05-22T14:00:30.34Z,"Cannot reproduce.

Likely the removal of the /proxy/ url concepts in trunk the reason."
MRM-236,aheritier,Arnaud HERITIER,2006-11-24T11:12:22.788Z,2006-11-24T11:12:22.788Z,I also saw this bug. In fact the list is updated if you restart your webapp/server.
MRM-236,wsmoak,Wendy Smoak,2006-11-27T10:20:09.855Z,2006-11-27T10:20:09.855Z,"This seems to be fixed with Archiva built from source at r479651.

After a clean build, if I add two managed repositories, both of them show in the 'Proxied through' select list on 'Add Proxied Repository'."
MRM-236,oching,Maria Odea Ching,2007-04-04T03:46:16.471Z,2007-04-04T03:46:16.471Z,"I tried this with -r525451..

I had two existing managed repo (releases and snapshots) and a proxy repo, then I added another managed repo and edited the existing proxy repo that I had. In the 'Proxied through' list, only the releases and snapshots were listed. The managed repo I've just added wasn't in the list. But when I restarted archiva and edited the proxy repo again, the last managed repo I added was already in the list."
MRM-236,joakime,Joakim Erdfelt,2007-05-22T13:58:39.179Z,2007-05-22T13:58:39.179Z,Recent work in trunk with Proxy Connector concept makes this easier to setup.
MRM-220,joakime,Joakim Erdfelt,2007-05-22T14:17:26.248Z,2007-05-22T14:17:26.248Z,"This jira should be moved to a maven-shared location.

Can't find the appropraite Project / Component combination in jira for this though."
MRM-239,brettporter,Brett Porter,2006-11-27T02:07:20.051Z,2006-11-27T02:07:20.051Z,"can you paste the full OOME? I'd like to check whether it's heap space, or another memory pool.

We've certainly seen hangs, and I carefully went through the indexing and discovery memory and should have taken care of it, but perhaps something changed, or it is in a different area."
MRM-239,gregrluck,Greg Luck,2006-11-28T03:07:17.697Z,2006-11-28T03:07:17.697Z,"I don't have them to paste.

I will update my home Maven from  and leave it running to see what shows up."
MRM-239,joakime,Joakim Erdfelt,2006-12-01T14:31:33.61Z,2006-12-01T14:31:33.61Z,"I can conform this.
Happened to me with Archiva running on Linux.

{code}
[archiva@~]$ uname -a
Linux buildux 2.6.17-10-server #2 SMP Fri Oct 13 18:47:26 UTC 2006 i686 GNU/Linux
[archiva@~]$ java -version
java version ""1.5.0_08""
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_08-b03)
Java HotSpot(TM) Client VM (build 1.5.0_08-b03, mixed mode, sharing)
{code}

I run using the following command line.

{code}
[archiva@~/java/jetty-6.0.2]$ ls -la webapps-plus
total 8
drwxr-xr-x  2 archiva archiva 4096 2006-11-28 17:50 .
drwxrwxr-x 18 archiva archiva 4096 2006-11-28 17:50 ..
drwxrwxrwx  1 archiva archiva 4096 2006-11-28 17:50 archiva
[archiva@~/java/jetty-6.0.2]$ java -Xmx256m -jar start.jar etc/jetty.xml etc/jetty-plus.xml
{code}

Note, it doesn't matter how much memory i give it, (tested up to 1024m) it will still fail with OOM, it just takes longer with more memory.

Some details of the size of my repository.

{code}
[archiva@/home/repo1/ibiblio]$ find . -type f | wc -l
156944
[archiva@/home/repo1/ibiblio]$ find . -type d | wc -l
22357
{code}

I also captured a stack trace.

{code}
2006-11-30 19:22:22,438 [pool-1-thread-1] ERROR RepositoryIndexRecordFactory:standard - Error reading artifact file, omitting from index: error in opening zip file
2006-11-30 19:22:22,554 [pool-1-thread-1] ERROR RepositoryIndexRecordFactory:standard - Error reading artifact file, omitting from index: error in opening zip file
2006-11-30 19:28:22,561 [Thread-12] ERROR TaskQueueExecutor:indexer      - Error executing task
edu.emory.mathcs.backport.java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space
        at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.getResult(FutureTask.java:299)
        at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.get(FutureTask.java:118)
        at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable.waitForTask(ThreadedTaskQueueExecutor.java:159)
        at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable.run(ThreadedTaskQueueExecutor.java:127)
Caused by: java.lang.OutOfMemoryError: Java heap space
2006-11-30 20:00:03,847 [pool-1-thread-1] DEBUG ReportExecutor                 - Reading previous report database Repository Health from repository central
2006-11-30 20:23:53,246 [Thread-12] ERROR TaskQueueExecutor:indexer      - Error executing task
edu.emory.mathcs.backport.java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space
        at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.getResult(FutureTask.java:299)
        at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.get(FutureTask.java:118)
        at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable.waitForTask(ThreadedTaskQueueExecutor.java:159)
        at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable.run(ThreadedTaskQueueExecutor.java:127)
Caused by: java.lang.OutOfMemoryError: Java heap space

{code}

Since it seemd to be 'reading previous report database', i decided to poke around ...

{code}
[archiva@/home/repo1/ibiblio/.reports]$ ls -la
total 9612
drwxrwxrwx   2 repo1   repo1      4096 2006-11-29 15:13 .
drwxrwxr-x 617 repo1   repo1     12288 2006-09-05 19:44 ..
-rw-r--r--   1 archiva archiva 9809591 2006-11-30 19:21 health-report.xml
[archiva@/home/repo1/ibiblio/.reports]$ wc -l health-report.xml
123651 health-report.xml
[archiva@/home/repo1/ibiblio/.reports]$ xmllint --noout health-report.xml ; echo $?
0
{code}

I'll attach my health-report.xml to this jira, it might prove useful.
"
MRM-239,pkernevez,Philippe Kernevez,2006-12-05T10:07:12.76Z,2006-12-05T10:07:12.76Z,"We have exactly the same issue.
I first tried to increase memory (Archiva and Jira are the both application deployed in Tomcat), but I only delayed (3-4 days) the OutOfMemory, we now use _-verbose:gc -Xms256M -Xmx1500M -XX:PermSize=64m -XX:MaxPermSize=192m_

OS : 2.4.21-32.0.1.EL

Container: Tomcat 5.5.20

JVM: Sun 1.5.0_09

Maven repo : only Maven2

ArchivaDb: Derby

Archiva.xml
{noformat}
<?xml version=""1.0"" encoding=""UTF-8""?><configuration>
  <repositories>
    <repository>
      <urlName>FTInterne</urlName>
      <directory>/etc/udd/maven/repositories/FTInterne</directory>
      <includeSnapshots>true</includeSnapshots>
      <id>FTInterne</id>
      <name>FTInterne</name>
    </repository>
    <repository>
      <urlName>FTPublicMirror</urlName>
      <directory>/etc/udd/maven/repositories/FTPublicMirror</directory>
      <includeSnapshots>true</includeSnapshots>
      <id>FTPublicMirror</id>
      <name>FTPublicMirror</name>
    </repository>
  </repositories>
  <proxiedRepositories>
    <proxiedRepository>
      <url>http://repo1.maven.org/maven2/</url>
      <managedRepository>FTPublicMirror</managedRepository>
      <checksumPolicy>warn</checksumPolicy>
      <useNetworkProxy>true</useNetworkProxy>
      <id>m2-central-repository</id>
      <name>m2-central-repository</name>
    </proxiedRepository>
  </proxiedRepositories>
  <localRepository>/etc/udd/maven/repositories/LocalRepo</localRepository>
  <indexPath>/var/udd/maven/index</indexPath>
  <indexerCronExpression>0 * * * * ?</indexerCronExpression>
  <proxy>
    <username>XXXX</username>
    <password>YYYY</password>
    <host>ZZZZ</host>
  </proxy>
</configuration>
{noformat}
"
MRM-239,pkernevez,Philippe Kernevez,2006-12-05T10:12:28.769Z,2006-12-05T10:12:28.769Z,"I am sure that it's heap Space (due to verbosegc info):
These are some part of my _catalina.out_ log file.
{noformat}
java.lang.OutOfMemoryError: Java heap space
2006-12-05 11:34:35,044 [TP-Processor11] ERROR [jsp]                          - Servlet.service() for servlet jsp threw exception
java.lang.OutOfMemoryError: Java heap space
2006-12-05 11:34:35,044 [TP-Processor11] ERROR [RepositoryAccessServlet]      - Servlet.service() for servlet RepositoryAccessServlet threw excepti
java.lang.OutOfMemoryError: Java heap space
2006-12-05 11:34:35,057 [TP-Processor13] DEBUG Authenticator:user-manager     - Authenticate: PasswordBasedAuthenticationDataSource[principal=serve
2006-12-05 11:34:35,060 [TP-Processor13] DEBUG Authenticator:user-manager     - PasswordEncoder: org.codehaus.plexus.security.policy.encoders.SHA25
2006-12-05 11:34:35,061 [TP-Processor13] DEBUG Authenticator:user-manager     - User server provided a valid password
2006-12-05 11:34:35,073 [TP-Processor13] DEBUG SecuritySystem:default         - authnManager.authenticate() result: AuthenticationResult[principal=ue,exception=<null>]
2006-12-05 11:34:35,074 [TP-Processor13] DEBUG SecuritySystem:default         - User 'server' authenticated.
2006-12-05 11:34:35,077 [TP-Processor13] DEBUG SecuritySystem:default         - User 'server' exists.
2006-12-05 11:34:35,079 [TP-Processor13] DEBUG SecuritySystem:default         - User: username = 'server'
{noformat}
And
{noformat}
[Full GC 1524223K->1520424K(1524224K), 3.9851230 secs]
[Full GC 1520424K->1520319K(1524224K), 4.0197240 secs]
[Full GC 1524223K->1520479K(1524224K), 4.1832120 secs]
[Full GC[Unloading class sun.reflect.GeneratedConstructorAccessor1379]
[Unloading class sun.reflect.GeneratedMethodAccessor654]
 1520479K->1520381K(1524224K), 5.2603440 secs]
{noformat}
"
MRM-239,pouet,Alexandre Poitras,2006-12-15T08:45:25.368Z,2006-12-15T08:45:25.368Z,I have the same issue. I can confirm the problem is the heap space according to Tomcat logs.
MRM-239,brettporter,Brett Porter,2006-12-19T21:37:48.771Z,2006-12-19T21:37:48.771Z,"worth checking if this is simply the same project builder problem as I didn't notice any other memory hotspots during the last analysis I did, though it didn't take into account the reporting which might need to be reviewed too"
MRM-239,brettporter,Brett Porter,2006-12-22T23:45:31.886Z,2006-12-22T23:45:31.886Z,"Carlos seems to have fixed this. I will do some more long term testing to confirm.

Thanks Carlos!"
MRM-239,joakime,Joakim Erdfelt,2007-01-07T21:04:04.151Z,2007-01-07T21:04:04.151Z,"Using the latest plexus-taskqueue 1.0-alpha-6-SNAPSHOT (per Brett's recommendations) against archiva/trunk r493765 results in the same OOM.

*Last OOM Exception*

{code}
2007-01-07 21:56:37,108 [Thread-12] ERROR TaskQueueExecutor:indexer      - Error executing task
edu.emory.mathcs.backport.java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space
        at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.getResult(FutureTask.java:299)
        at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.get(FutureTask.java:118)
        at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable.waitForTask(ThreadedTaskQueueExecutor.java:159)
        at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable.run(ThreadedTaskQueueExecutor.java:127)
Caused by: java.lang.OutOfMemoryError: Java heap space
{code}

*Thread Dump*

{code}
Full thread dump Java HotSpot(TM) Client VM (1.5.0_08-b03 mixed mode, sharing):

""pool-1-thread-1"" prio=1 tid=0x08be3ad0 nid=0x1383 in Object.wait() [0xaf7f0000..0xaf7f0f60]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x7dfe2e60> (a edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
        at java.lang.Object.wait(Object.java:474)
        at edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
        - locked <0x7dfe2e60> (a edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:921)
        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:980)
        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:528)
        at java.lang.Thread.run(Thread.java:595)

""derby.rawStoreDaemon"" daemon prio=1 tid=0x08266438 nid=0x136a in Object.wait() [0xaf871000..0xaf871ee0]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x7e383020> (a org.apache.derby.impl.services.daemon.BasicDaemon)
        at org.apache.derby.impl.services.daemon.BasicDaemon.rest(Unknown Source)
        - locked <0x7e383020> (a org.apache.derby.impl.services.daemon.BasicDaemon)
        at org.apache.derby.impl.services.daemon.BasicDaemon.run(Unknown Source)        at java.lang.Thread.run(Thread.java:595)

""derby.antiGC"" daemon prio=1 tid=0x081d9de0 nid=0x1369 in Object.wait() [0xaf8f2000..0xaf8f2e60]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x7e372190> (a org.apache.derby.impl.services.monitor.AntiGC)
        at java.lang.Object.wait(Object.java:474)
        at org.apache.derby.impl.services.monitor.AntiGC.run(Unknown Source)
        - locked <0x7e372190> (a org.apache.derby.impl.services.monitor.AntiGC)
        at java.lang.Thread.run(Thread.java:595)

""DestroyJavaVM"" prio=1 tid=0x0805cbf0 nid=0x1343 waiting on condition [0x00000000..0xbff1b450]

""Rollover"" daemon prio=1 tid=0x0834b7f8 nid=0x1368 waiting on condition [0xaf97b000..0xaf97b1e0]
        at java.lang.Thread.sleep(Native Method)
        at org.mortbay.util.RolloverFileOutputStream$Rollover.run(RolloverFileOutputStream.java:294)

""Thread-12"" daemon prio=1 tid=0x0833b448 nid=0x1367 in Object.wait() [0xaf9fc000..0xaf9fd160]
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:432)
        at edu.emory.mathcs.backport.java.util.concurrent.TimeUnit.timedWait(TimeUnit.java:364)
        at edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:349)
        - locked <0x7dfca3e8> (a edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
        at org.codehaus.plexus.taskqueue.DefaultTaskQueue.poll(DefaultTaskQueue.java:210)
        at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable.run(ThreadedTaskQueueExecutor.java:94)

""defaultScheduler_QuartzSchedulerThread"" prio=1 tid=0x08338518 nid=0x1364 sleeping[0xafa7d000..0xafa7e060]
        at java.lang.Thread.sleep(Native Method)
        at org.quartz.core.QuartzSchedulerThread.run(QuartzSchedulerThread.java:399)

""defaultScheduler_Worker-14"" prio=1 tid=0x0832cf78 nid=0x1363 in Object.wait() [0xafafe000..0xafafefe0]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-13"" prio=1 tid=0x0832c068 nid=0x1362 in Object.wait() [0xafb7f000..0xafb7ff60]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-12"" prio=1 tid=0x0832b158 nid=0x1361 in Object.wait() [0xafc00000..0xafc00ee0]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-11"" prio=1 tid=0x0832a248 nid=0x1360 in Object.wait() [0xafc81000..0xafc81e60]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-10"" prio=1 tid=0x08329338 nid=0x135f in Object.wait() [0xafd03000..0xafd031e0]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-9"" prio=1 tid=0x08328428 nid=0x135e in Object.wait() [0xafd83000..0xafd84160]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-8"" prio=1 tid=0x080c53d8 nid=0x135d in Object.wait() [0xafe04000..0xafe050e0]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-7"" prio=1 tid=0x080c44c8 nid=0x135c in Object.wait() [0xafe85000..0xafe86060]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-6"" prio=1 tid=0x080c35d8 nid=0x135b in Object.wait() [0xaff06000..0xaff06fe0]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-5"" prio=1 tid=0x080c2710 nid=0x135a in Object.wait() [0xaff87000..0xaff87f60]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-4"" prio=1 tid=0x080c1848 nid=0x1359 in Object.wait() [0xb0008000..0xb0008ee0]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-3"" prio=1 tid=0x080c0af0 nid=0x1358 in Object.wait() [0xb0089000..0xb0089e60]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-2"" prio=1 tid=0x0875d3a0 nid=0x1357 in Object.wait() [0xb010b000..0xb010b1e0]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-1"" prio=1 tid=0x08096fb8 nid=0x1356 in Object.wait() [0xb018b000..0xb018c160]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""defaultScheduler_Worker-0"" prio=1 tid=0x0875ea28 nid=0x1355 in Object.wait() [0xb020c000..0xb020d0e0]
        at java.lang.Object.wait(Native Method)
        at org.quartz.simpl.SimpleThreadPool.getNextRunnable(SimpleThreadPool.java:423)
        - locked <0x7dfbd570> (a java.lang.Object)
        at org.quartz.simpl.SimpleThreadPool.access$000(SimpleThreadPool.java:53)
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:514)

""btpool0-9 - Invalidator - /archiva"" prio=1 tid=0x08504210 nid=0x1354 waiting on condition [0xb12d1000..0xb12d2060]
        at java.lang.Thread.sleep(Native Method)
        at org.mortbay.jetty.servlet.AbstractSessionManager$SessionScavenger.run(AbstractSessionManager.java:1083)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)

""btpool0-8 - Acceptor0 SelectChannelConnector @ 0.0.0.0:14142"" prio=1 tid=0x085032c8 nid=0x1353 runnable [0xb1352000..0xb1352fe0]
        at sun.nio.ch.PollArrayWrapper.poll0(Native Method)
        at sun.nio.ch.PollArrayWrapper.poll(PollArrayWrapper.java:100)
        at sun.nio.ch.PollSelectorImpl.doSelect(PollSelectorImpl.java:56)
        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
        - locked <0x7dff9530> (a sun.nio.ch.Util$1)
        - locked <0x7dff9540> (a java.util.Collections$UnmodifiableSet)
        - locked <0x7dff94e0> (a sun.nio.ch.PollSelectorImpl)
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
        at org.mortbay.io.nio.SelectorManager$SelectSet.doSelect(SelectorManager.java:295)
        at org.mortbay.io.nio.SelectorManager.doSelect(SelectorManager.java:73)
        at org.mortbay.jetty.nio.SelectChannelConnector.accept(SelectChannelConnector.java:120)
        at org.mortbay.jetty.AbstractConnector$Acceptor.run(AbstractConnector.java:492)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)

""btpool0-7 - Acceptor1 SelectChannelConnector @ 0.0.0.0:14142"" prio=1 tid=0x08502380 nid=0x1352 runnable [0xb13d3000..0xb13d3f60]
        at sun.nio.ch.PollArrayWrapper.poll0(Native Method)
        at sun.nio.ch.PollArrayWrapper.poll(PollArrayWrapper.java:100)
        at sun.nio.ch.PollSelectorImpl.doSelect(PollSelectorImpl.java:56)
        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
        - locked <0x7dff9628> (a sun.nio.ch.Util$1)
        - locked <0x7dff9638> (a java.util.Collections$UnmodifiableSet)
        - locked <0x7dff95d8> (a sun.nio.ch.PollSelectorImpl)
        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
        at org.mortbay.io.nio.SelectorManager$SelectSet.doSelect(SelectorManager.java:295)
        at org.mortbay.io.nio.SelectorManager.doSelect(SelectorManager.java:73)
        at org.mortbay.jetty.nio.SelectChannelConnector.accept(SelectChannelConnector.java:120)
        at org.mortbay.jetty.AbstractConnector$Acceptor.run(AbstractConnector.java:492)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)

""btpool0-6"" prio=1 tid=0x084fe0b0 nid=0x1351 in Object.wait() [0xb1454000..0xb1454ee0]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x7dd41728> (a org.mortbay.thread.BoundedThreadPool$PoolThread)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:469)
        - locked <0x7dd41728> (a org.mortbay.thread.BoundedThreadPool$PoolThread)

""btpool0-5"" prio=1 tid=0x084fcc50 nid=0x1350 in Object.wait() [0xb14d5000..0xb14d5e60]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x7dd41790> (a org.mortbay.thread.BoundedThreadPool$PoolThread)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:469)
        - locked <0x7dd41790> (a org.mortbay.thread.BoundedThreadPool$PoolThread)

""btpool0-4"" prio=1 tid=0x084fbd28 nid=0x134f in Object.wait() [0xb1557000..0xb15571e0]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x7dd417f8> (a org.mortbay.thread.BoundedThreadPool$PoolThread)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:469)
        - locked <0x7dd417f8> (a org.mortbay.thread.BoundedThreadPool$PoolThread)

""btpool0-3"" prio=1 tid=0x084ed848 nid=0x134e in Object.wait() [0xb15d8000..0xb15d8160]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x7dd41860> (a org.mortbay.thread.BoundedThreadPool$PoolThread)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:469)
        - locked <0x7dd41860> (a org.mortbay.thread.BoundedThreadPool$PoolThread)

""btpool0-2"" prio=1 tid=0x084ffd28 nid=0x134d in Object.wait() [0xb1658000..0xb16590e0]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x7dd418c8> (a org.mortbay.thread.BoundedThreadPool$PoolThread)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:469)
        - locked <0x7dd418c8> (a org.mortbay.thread.BoundedThreadPool$PoolThread)

""btpool0-1"" prio=1 tid=0x08500748 nid=0x134c in Object.wait() [0xb16d9000..0xb16da060]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x7dd41930> (a org.mortbay.thread.BoundedThreadPool$PoolThread)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:469)
        - locked <0x7dd41930> (a org.mortbay.thread.BoundedThreadPool$PoolThread)

""btpool0-0"" prio=1 tid=0x084ee358 nid=0x134b in Object.wait() [0xb175a000..0xb175afe0]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x7dd41998> (a org.mortbay.thread.BoundedThreadPool$PoolThread)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:469)
        - locked <0x7dd41998> (a org.mortbay.thread.BoundedThreadPool$PoolThread)

""Low Memory Detector"" daemon prio=1 tid=0x080a6e90 nid=0x1349 runnable [0x00000000..0x00000000]

""CompilerThread0"" daemon prio=1 tid=0x080a58e8 nid=0x1348 waiting on condition [0x00000000..0xb21e7848]

""Signal Dispatcher"" daemon prio=1 tid=0x080a4830 nid=0x1347 runnable [0x00000000..0x00000000]

""Finalizer"" daemon prio=1 tid=0x0809cfa8 nid=0x1346 in Object.wait() [0xb2324000..0xb2324160]
        at java.lang.Object.wait(Native Method)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:116)
        - locked <0x7dd08030> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:132)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

""Reference Handler"" daemon prio=1 tid=0x0809c2c0 nid=0x1345 in Object.wait() [0xb23a4000..0xb23a50e0]
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:474)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
        - locked <0x7dd080b0> (a java.lang.ref.Reference$Lock)

""VM Thread"" prio=1 tid=0x080996d0 nid=0x1344 runnable

""VM Periodic Task Thread"" prio=1 tid=0x080a8378 nid=0x134a waiting on condition
{code}


"
MRM-239,joakime,Joakim Erdfelt,2007-02-14T08:52:51.48Z,2007-02-14T08:52:51.48Z,"After running archiva through YourKit Java Profiler, I found 4 places that need help .... badly.

# DefaultReportingStore
# DirectoryScanner
# DefaultArtifactDiscoverer
# DefaultMetadataDiscoverer

What it comes down to is *bad* memory utilization, with the ability to *spike* 22MB to 45MB in a few seconds depending on what you are doing.

The Discoverer process is the one most at fault, the whole notion of using the DirectoryScanner and maintaining a list of Files in memory for the entire repository is just insane.  And this Discoverer process can exist in multiple places at once, using even more memory that is needed.

The DefaultReportStore uses an XML based store for failures, warnings, and notices about artifacts and metadata.  This Maps within Map of information kept in memory can also spike the memory very agressively.

I have started a branch - https://svn.apache.org/repos/asf/maven/archiva/branches/archiva-MRM-239 to work on correcting these deficiencies in the archiva codebase.

Watch for changes in archiva-discoverer and archiva-reports-standard."
MRM-239,nbeyer,Nathan Beyer,2007-02-24T20:20:20.69Z,2007-02-24T20:20:20.69Z,"What's the status on this development? Is work still happening in the branch mentioned or has it moved back to trunk?

I've seen similar memory issues on Windows platforms and I'd like to offer some assistance in this realm, if possible."
MRM-239,joakime,Joakim Erdfelt,2007-05-25T14:02:57.232Z,2007-05-25T14:02:57.232Z,"Trunk has a better usage for lucene, database, and consumers.
Have had archiva running on a repository as large as central for 3 weeks straight now. (using code from trunk)"
MRM-288,lecarma,Lester T. Ecarma,2007-02-23T05:07:41.919Z,2007-02-23T05:07:41.919Z,"Fix attached to http://jira.codehaus.org/browse/PLXCOMP-60, please review. Thanks."
MRM-288,robertdale,Robert Dale,2007-02-24T11:54:00.658Z,2007-02-24T11:54:00.658Z,"You can update your poms: archiva-configuration/pom.xml archiva-core/pom.xml archiva-webapp/pom.xml
and set the<version>1.0-alpha-2-SNAPSHOT</version> for all <groupId>org.codehaus.plexus.registry</groupId>.

It's fixed on the plexus side ""return null as defined in the registry interface Registry getSection( String name );""
However, now Archiva throws a NPE.

[#|2007-02-24T12:37:48.290-0500|SEVERE|sun-appserver-pe9.0|javax.enterprise.system.container.web|_ThreadID=11;_ThreadName=Thread-43;_RequestID=e9d82b2c-2f6c-4627-8f04-cbecd629e300;|WebModule[/archiva]Exception sending context 
initialized event to listener instance of class org.codehaus.plexus.xwork.PlexusLifecycleListener
java.lang.NullPointerException
        at org.apache.maven.archiva.configuration.DefaultArchivaConfiguration.addChangeListener(DefaultArchivaConfiguration.java:85)
        at org.apache.maven.archiva.repositories.DefaultActiveManagedRepositories.initialize(DefaultActiveManagedRepositories.java:201)
        at org.codehaus.plexus.personality.plexus.lifecycle.phase.InitializePhase.execute(InitializePhase.java:33)
        at org.codehaus.plexus.lifecycle.AbstractLifecycleHandler.start(AbstractLifecycleHandler.java:130)
        at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:143)
        at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:133)
        at org.codehaus.plexus.component.manager.ClassicSingletonComponentManager.getComponent(ClassicSingletonComponentManager.java:87)
        at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:101)
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:313)
        at org.codehaus.plexus.component.composition.AbstractComponentComposer.findRequirement(AbstractComponentComposer.java:235)
        at org.codehaus.plexus.component.composition.FieldComponentComposer.assignRequirementToField(FieldComponentComposer.java:67)
        at org.codehaus.plexus.component.composition.FieldComponentComposer.assignRequirement(FieldComponentComposer.java:58)
        at org.codehaus.plexus.component.composition.AbstractComponentComposer.assembleComponent(AbstractComponentComposer.java:144)
        at org.codehaus.plexus.component.composition.DefaultComponentComposerManager.assembleComponent(DefaultComponentComposerManager.java:73)
        at org.codehaus.plexus.personality.plexus.lifecycle.phase.CompositionPhase.execute(CompositionPhase.java:46)
        at org.codehaus.plexus.lifecycle.AbstractLifecycleHandler.start(AbstractLifecycleHandler.java:130)
        at org.codehaus.plexus.component.manager.AbstractComponentManager.startComponentLifecycle(AbstractComponentManager.java:143)
        at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:133)
        at org.codehaus.plexus.component.manager.ClassicSingletonComponentManager.getComponent(ClassicSingletonComponentManager.java:87)
        at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:101)
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:313)
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:291)
        at org.codehaus.plexus.container.initialization.StartLoadOnStartComponentsPhase.execute(StartLoadOnStartComponentsPhase.java:54)
        at org.codehaus.plexus.DefaultPlexusContainer.initializePhases(DefaultPlexusContainer.java:928)
        at org.codehaus.plexus.DefaultPlexusContainer.initialize(DefaultPlexusContainer.java:876)
        at org.codehaus.plexus.DefaultPlexusContainer.construct(DefaultPlexusContainer.java:853)
        at org.codehaus.plexus.DefaultPlexusContainer.<init>(DefaultPlexusContainer.java:222)
        at org.codehaus.plexus.DefaultPlexusContainer.<init>(DefaultPlexusContainer.java:236)
        at org.codehaus.plexus.xwork.PlexusLifecycleListener.contextInitialized(PlexusLifecycleListener.java:76)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4236)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4760)
        at com.sun.enterprise.web.WebModule.start(WebModule.java:292)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:833)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:817)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:662)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1479)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1143)
        at com.sun.enterprise.server.WebModuleDeployEventListener.moduleDeployed(WebModuleDeployEventListener.java:171)
        at com.sun.enterprise.server.WebModuleDeployEventListener.moduleDeployed(WebModuleDeployEventListener.java:275)
        at com.sun.enterprise.admin.event.AdminEventMulticaster.invokeModuleDeployEventListener(AdminEventMulticaster.java:954)
        at com.sun.enterprise.admin.event.AdminEventMulticaster.handleModuleDeployEvent(AdminEventMulticaster.java:941)
        at com.sun.enterprise.admin.event.AdminEventMulticaster.processEvent(AdminEventMulticaster.java:448)
        at com.sun.enterprise.admin.event.AdminEventMulticaster.multicastEvent(AdminEventMulticaster.java:160)
        at com.sun.enterprise.admin.server.core.DeploymentNotificationHelper.multicastEvent(DeploymentNotificationHelper.java:296)
        at com.sun.enterprise.deployment.phasing.DeploymentServiceUtils.multicastEvent(DeploymentServiceUtils.java:203)
        at com.sun.enterprise.deployment.phasing.ServerDeploymentTarget.sendStartEvent(ServerDeploymentTarget.java:285)
        at com.sun.enterprise.deployment.phasing.ApplicationStartPhase.runPhase(ApplicationStartPhase.java:119)
        at com.sun.enterprise.deployment.phasing.DeploymentPhase.executePhase(DeploymentPhase.java:95)
        at com.sun.enterprise.deployment.phasing.PEDeploymentService.executePhases(PEDeploymentService.java:871)
        at com.sun.enterprise.deployment.phasing.PEDeploymentService.start(PEDeploymentService.java:541)
        at com.sun.enterprise.deployment.phasing.PEDeploymentService.start(PEDeploymentService.java:585)
        at com.sun.enterprise.admin.mbeans.ApplicationsConfigMBean.start(ApplicationsConfigMBean.java:719)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.sun.enterprise.admin.MBeanHelper.invokeOperationInBean(MBeanHelper.java:353)
        at com.sun.enterprise.admin.MBeanHelper.invokeOperationInBean(MBeanHelper.java:336)
        at com.sun.enterprise.admin.config.BaseConfigMBean.invoke(BaseConfigMBean.java:448)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
        at sun.reflect.GeneratedMethodAccessor15.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.sun.enterprise.admin.util.proxy.ProxyClass.invoke(ProxyClass.java:77)
        at $Proxy1.invoke(Unknown Source)
        at com.sun.enterprise.admin.server.core.jmx.SunoneInterceptor.invoke(SunoneInterceptor.java:297)
        at com.sun.enterprise.deployment.client.DeploymentClientUtils.startApplication(DeploymentClientUtils.java:133)
        at com.sun.enterprise.deployment.client.DeployAction.run(DeployAction.java:517)
        at java.lang.Thread.run(Thread.java:619)
|#]
"
MRM-288,robertdale,Robert Dale,2007-02-24T14:32:16.377Z,2007-02-24T14:32:16.377Z,"So if you create your own ~/.m2/archiva.xml (look at archiva-core/src/test/conf/archiva.xml) everything works.
"
MRM-288,wsmoak,Wendy Smoak,2007-03-03T09:37:22.298Z,2007-03-03T09:37:22.298Z,"r513991 has the same problem with a NPE  - ""configuration can not be null""

http://www.nabble.com/Archiva-r513991-will-not-start-t3337388.html"
MRM-288,brettporter,Brett Porter,2007-03-04T00:23:34.261Z,2007-03-04T00:23:34.261Z,"I thought I had fixed this the other day by adding the default file.

It's the ones that are 'config-forceCreate=""true""' that need it (note that upgrading to commons-configuration 1.4-SNAPSHOT would also resolve the problem)"
MRM-288,evenisse,Emmanuel Venisse,2007-03-08T03:17:45.992Z,2007-03-08T03:17:45.992Z,config-forceCreate doesn't exist in commons-configuration-1.3
MRM-288,aheritier,Arnaud HERITIER,2007-03-19T10:59:01.262Z,2007-03-19T10:59:01.262Z,"I have a similar error with a version built today. When I save the configuration for the initial setup I receive a NPE :
java.lang.NullPointerException
	at org.apache.maven.archiva.configuration.io.registry.ConfigurationRegistryWriter.writeConfiguration(ConfigurationRegistryWriter.java:36)
	at org.apache.maven.archiva.configuration.io.registry.ConfigurationRegistryWriter.write(ConfigurationRegistryWriter.java:26)
	at org.apache.maven.archiva.configuration.DefaultArchivaConfiguration.save(DefaultArchivaConfiguration.java:86)
	at org.apache.maven.archiva.web.action.admin.AbstractConfigureRepositoryAction.saveConfiguration(AbstractConfigureRepositoryAction.java:110)
	at org.apache.maven.archiva.web.action.admin.AbstractConfigureRepositoryAction.add(AbstractConfigureRepositoryAction.java:87)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at com.opensymphony.xwork.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:364)
	at com.opensymphony.xwork.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:216)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
	at org.codehaus.plexus.security.ui.web.interceptor.SecureActionInterceptor.intercept(SecureActionInterceptor.java:155)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at org.codehaus.plexus.security.ui.web.interceptor.PolicyEnforcementInterceptor.intercept(PolicyEnforcementInterceptor.java:102)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at org.codehaus.plexus.security.ui.web.interceptor.AutoLoginInterceptor.intercept(AutoLoginInterceptor.java:152)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at org.codehaus.plexus.security.ui.web.interceptor.ForceAdminUserInterceptor.intercept(ForceAdminUserInterceptor.java:62)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at org.codehaus.plexus.security.ui.web.interceptor.EnvironmentCheckInterceptor.intercept(EnvironmentCheckInterceptor.java:121)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:168)
	at com.opensymphony.xwork.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:115)
	at com.opensymphony.xwork.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.webwork.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:171)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.webwork.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:147)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:151)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:186)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:188)
	at com.opensymphony.xwork.DefaultActionProxy.execute(DefaultActionProxy.java:113)
	at com.opensymphony.webwork.dispatcher.DispatcherUtils.serviceAction(DispatcherUtils.java:225)
	at com.opensymphony.webwork.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:202)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
	at com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:118)
	at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
	at com.opensymphony.webwork.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:88)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
	at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:199)
	at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:282)
	at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:767)
	at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:697)
	at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:889)
	at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
	at java.lang.Thread.run(Thread.java:595)
I'm running archiva on tomcat and I solve this error (thx emmanuel) by defining the -Dappserver.base property in CATALINA_OPTS or in the service properties
"
MRM-288,aheritier,Arnaud HERITIER,2007-03-20T17:44:26.748Z,2007-03-20T17:44:26.748Z,To fix it we also have to create an archiva.xml file with the content :  <configuration/>.
MRM-288,joakime,Joakim Erdfelt,2007-05-25T14:02:04.404Z,2007-05-25T14:02:04.404Z,Can no longer reproduce on trunk.
MRM-235,wsmoak,Wendy Smoak,2006-11-24T09:47:45.557Z,2006-11-24T09:47:45.557Z,"The same button text is used when editing proxied repositories. 

The patch (rooted at archiva-webapp) changes both buttons."
MRM-215,maxb,Max Bowsher,2006-11-02T05:09:31.723Z,2006-11-02T05:09:31.723Z,"Fixed by joakime in r470095.

"
MRM-296,hisidro,Henry S. Isidro,2007-03-02T03:29:58.878Z,2007-03-02T03:29:58.878Z,"File Attached: [MRM-296]-archiva-webapp.patch

Please review. Thanks."
MRM-296,evenisse,Emmanuel Venisse,2007-03-02T05:29:28.903Z,2007-03-02T05:29:28.903Z,"Wrong fix, should be fixed in p-sec"
MRM-296,evenisse,Emmanuel Venisse,2007-03-02T06:40:45.598Z,2007-03-02T06:40:45.598Z,Fixed in plexus-xwork-integration
MRM-259,joakime,Joakim Erdfelt,2007-06-18T16:20:15.696Z,2007-06-18T16:20:15.696Z,Postponing to future (post 1.0) version.
MRM-259,oching,Maria Odea Ching,2010-11-26T01:13:16.395Z,2010-11-26T01:13:16.395Z,It is also helpful to be able to monitor the running and queued background tasks (s.a. the repository scanning and indexing). 
MRM-222,jirareport,Jira Report User,2006-12-15T20:02:34.581Z,2006-12-15T20:02:34.581Z,Seems important to be fixed or confirmed as already fixed.
MRM-222,joakime,Joakim Erdfelt,2007-05-22T14:05:33.616Z,2007-05-22T14:05:33.616Z,"Cannot reproduce in trunk.

Likely fixed when moving away from /proxy/ url concepts."
MRM-254,fabemn,Fabrice Bellingard,2007-06-07T03:59:56.541Z,2007-06-07T03:59:56.541Z,"Stefan, do you still have the bug with the current trunk?"
MRM-254,stefanhuebner,Stefan Hbner,2007-06-08T10:58:38.831Z,2007-06-08T10:58:38.831Z,"Fabrice, I'll haven't got the chance to check that yet. Please give me some days."
MRM-254,fabemn,Fabrice Bellingard,2007-06-21T09:45:19.484Z,2007-06-21T09:45:19.484Z,"Stefan, we're about to release 1.0-alpha-2, and I can't reproduce this bug. 
So I'll close this issue as ""Cannot reproduce"", and if there's a problem when you get the chance to test it, then feel free to open it again."
MRM-254,frickeo,Olaf Fricke,2008-07-20T06:43:58.204Z,2008-07-20T06:43:58.204Z,"Please have a look at my comment to MRM-631, this may solve your problem as well."
MRM-254,stefanhuebner,Stefan Hbner,2008-07-31T07:27:52.808Z,2008-07-31T07:27:52.808Z,"We changed our repository layout, hence this issue no longer relevant to us. Thanks."
MRM-266,dangelito,Dawn Angelito,2007-01-10T00:02:22.014Z,2007-01-10T00:02:22.014Z,Patch for this issue uploaded.
MRM-266,evenisse,Emmanuel Venisse,2007-01-11T04:50:55.185Z,2007-01-11T04:50:55.185Z,Applied.
MRM-283,wsmoak,Wendy Smoak,2007-02-17T17:21:38.387Z,2007-02-17T17:21:38.387Z,"This is controlled by plexus-security, and is configurable, usually in a file called ""security.properties"".

Here is the default config file in svn showing the things you can change:
http://svn.codehaus.org/plexus/plexus-security/trunk/configuration/src/main/resources/org/codehaus/plexus/security/config-defaults.properties

Archiva's application.xml file contains a list of configuration files it looks for:
http://svn.apache.org/repos/asf/maven/archiva/trunk/archiva-webapp/src/main/resources/META-INF/plexus/application.xml
"
MRM-283,brettporter,Brett Porter,2007-02-17T19:02:43.147Z,2007-02-17T19:02:43.147Z,It's not really fixed if it isn't documented ;)
MRM-283,wsmoak,Wendy Smoak,2007-02-17T19:42:44.845Z,2007-02-17T19:42:44.845Z,"True. :)

In application.xml, Archiva seems to be looking directly in ${appserver.base} and ${appserver.home}, not in the 'conf' directories just beneath them as it does for the other config files.  Is this correct?

http://svn.apache.org/viewvc/maven/archiva/trunk/archiva-webapp/src/main/resources/META-INF/plexus/application.xml?revision=507941&view=markup"
MRM-283,wsmoak,Wendy Smoak,2007-02-18T00:23:44.39Z,2007-02-18T00:23:44.39Z,See:  http://maven.apache.org/archiva/guides/security-configuration.html
MRM-280,evenisse,Emmanuel Venisse,2007-02-27T05:17:41.438Z,2007-02-27T05:17:41.438Z,Fixed in r.512219
MRM-264,handyande,Andrew Williams,2007-01-01T14:59:14.816Z,2007-01-01T14:59:14.816Z,Updated patch to document the new URL on a plexus appserver
MRM-264,joakime,Joakim Erdfelt,2007-01-18T15:02:53.933Z,2007-01-18T15:02:53.933Z,"Work has been commit'd with archiva/trunk r497563.

Had to inject plexus-component-api in a few places to correct changes since last patch on this issue."
MRM-246,oching,Maria Odea Ching,2006-12-06T22:09:06.52Z,2006-12-06T22:09:06.52Z,Fixed at revision 483341. Thanks! :)
MRM-276,joakime,Joakim Erdfelt,2007-02-26T11:06:32.682Z,2007-02-26T11:06:32.682Z,"Patch has been commited.
Thanks!"
MRM-230,oching,Maria Odea Ching,2006-11-20T01:43:33.985Z,2006-11-20T01:43:33.985Z,I've attached a patch in http://jira.codehaus.org/browse/CONTINUUM-1005 for plexus security that fixes this issue. Thanks! :)
MRM-241,jirareport,Jira Report User,2006-12-15T19:33:26.556Z,2006-12-15T19:33:26.556Z,"Using the latest trunk, this appears to no longer be the case."
MRM-218,joakime,Joakim Erdfelt,2007-05-22T14:17:18.818Z,2007-05-22T14:17:18.818Z,"This jira should be moved to a maven-shared location.

Can't find the appropraite Project / Component combination in jira for this though."
MRM-218,brettporter,Brett Porter,2007-07-31T08:19:51.041Z,2007-07-31T08:19:51.041Z,"no longer a shared thing, but the archiva converter isn't wired in to the main application for 1.0 (just a separate tool)"
MRM-260,oching,Maria Odea Ching,2006-12-21T03:01:39.962Z,2006-12-21T03:01:39.962Z,"Fixed in svn -r 489289.

Updated managedRepositories jsp page.
Added new operation ""archiva-edit-configuration"" that is specific for Archiva System Administrators only.
I cannot use the ""archiva-manage-configuration"" operation to disallow users with repository manager roles from accessing the edit configuration page because the permission is used to make the Administration--Managed Repositories, Proxied Repositories show up on the navigation menu."
MRM-245,oching,Maria Odea Ching,2006-12-05T05:14:40.288Z,2006-12-05T05:14:40.288Z,"Made some changes in archiva-security and archiva-webapp. 
The patch submitted for http://jira.codehaus.org/browse/PLX-304 must be applied FIRST before this.

Thanks! :)"
MRM-245,jmcconnell,Jesse McConnell,2006-12-05T10:10:37.194Z,2006-12-05T10:10:37.194Z,"the dynamic role profiles have ability to specify a child role that they can inherit permissions from

so I'll make a BaseRepositoryManager role profile that sets the correct permissions using the global resource and then just get those added as a child role to each dynamic repository role.

its only partially documented atm, I will make a note to get that mentioned though.

I'll do this real quick and test it and you can see what I mean."
MRM-245,jmcconnell,Jesse McConnell,2006-12-05T10:40:38.59Z,2006-12-05T10:40:38.59Z,"Committed revision 482512.

I added a new unassignable base role for the repository managers to inherit that has just the permission for managing configuration...which in essence just lets you get into the manage repo configuration section...the actual permissions for editing and deleting the repositories are governed by the dynamic roles that are generated per repository."
MRM-263,carlos,Carlos Sanchez,2007-01-04T06:44:47.284Z,2007-01-04T06:44:47.284Z,Fixed and deployed to maven.org
MRM-217,elpunzalan,Edwin Punzalan,2006-11-23T03:08:48.255Z,2006-11-23T03:08:48.255Z,"linked issue with patch applied, and closed."
MRM-700,wsmoak,Wendy Smoak,2008-02-18T09:59:33.239Z,2008-02-18T09:59:33.239Z,"Fixed in r628786 for the 1.1-SNAPSHOT docs.  

See http://maven.apache.org/archiva/docs/1.1-SNAPSHOT/userguide/deploy.html"
MRM-700,brettporter,Brett Porter,2008-03-20T09:21:46.122Z,2008-03-20T09:21:46.122Z,backported to the branch
MRM-717,jaxzin,Brian Jackson,2008-04-02T15:08:00.098Z,2008-04-02T15:08:00.098Z,I'm getting similar errors in my logs when attempting to download artifacts from a remote repository.  Restarting Archiva temporarily resolves this.  How can I help resolve this issue?  This is a real showstopper for me because the remote repository is another Archiva instance within our company that is used frequently and this is affecting us pretty severely.
MRM-717,brettporter,Brett Porter,2008-04-02T16:41:13.959Z,2008-04-02T16:41:13.959Z,"can you increase the log level to DEBUG for org.apache.maven.archiva (WEB-INF/classes/log4j.xml) ?

Hopefully this will reveal the problem."
MRM-717,aarmesto,Ausis Armesto,2008-04-11T02:53:52.616Z,2008-04-11T02:53:52.616Z,"Hello,

I have removed the maven-archiva-1.0.1 and I have installed from the begining the maven-archiva-1.0.2 standalone. Here I show you the log file and the archiva configuracion ( conf/archiva.xml).

Best regards,
Ausis."
MRM-717,aarmesto,Ausis Armesto,2008-04-11T02:55:03.028Z,2008-04-11T02:55:03.028Z,Log file for the maven-archiva-1.0.2
MRM-717,aarmesto,Ausis Armesto,2008-04-11T02:55:42.704Z,2008-04-11T02:55:42.704Z,Configuration of maven-archiva-1.0.2
MRM-717,rnrivas,Renee Rivas,2008-06-26T15:34:48.255Z,2008-06-26T15:34:48.255Z,"Was a solution ever found?  I'm having a similar problem downloading from repo1.maven.org.  Were you able to download from other sites?

where is WEB-INF?"
MRM-717,jaxzin,Brian Jackson,2008-06-26T16:34:02.573Z,2008-06-26T16:34:02.573Z,I haven't found a solution yet.  We have to restart Archiva 1.0.2 periodically because if this.  The root cause is that after some uptime Archiva uses our external proxy even for the proxy connector that isn't configured to use it.  Brett and I had some back and forth trying to debug this but hit a wall and I haven't followed up.
MRM-717,rnrivas,Renee Rivas,2008-06-26T16:56:28.717Z,2008-06-26T16:56:28.717Z,"My problem is that I want to use an external proxy, but I am unable to actually downlaod from the repo1.maven.org and people.apache.  I can go out and get metadata, etc fine from other sites, but for repo1 and apache I get the same ""error transfering file"" you showed in your log.  No matter how many restarts the problem persists.   I know this isnt the main part of your problem, but do you have any insights on why the ""error transfering file"" occurs and/or ways to help it work even if its only sometimes?

thanks in advance"
MRM-717,jameswdumay,James William Dumay,2008-10-23T18:51:31.923Z,2008-10-23T18:51:31.923Z,"Hey guys,
Are you still experiencing this problem as of Archiva 1.1.3 or trunk? Please let us know.

Thanks
James"
MRM-717,rnrivas,Renee Rivas,2008-10-23T18:58:41.551Z,2008-10-23T18:58:41.551Z,"The problem disappeared somehow.  We reinstalling everything, and I think it was a newer release.  We also tried upgrading to the most recent and has issues, but didnt dwell just kept the old version.  Everythings working well enough for us now.  Thanks."
MRM-717,jameswdumay,James William Dumay,2008-10-23T19:04:52.959Z,2008-10-23T19:04:52.959Z,"Renee,
What problems did you have with upgrading? What versions were you upgrading to and from?

It would be excellent if you could open a new issue so we could sort it out.

Thanks
James"
MRM-757,sgrunwald,Steffen Grunwald,2008-04-15T07:20:03.896Z,2008-04-15T07:20:03.896Z,"I suggested a patch in PLXCOMP-103 for this issue.
That is, don't send the content type header field if the content type is not known."
MRM-792,oching,Maria Odea Ching,2008-07-02T02:12:36.485Z,2008-07-02T02:12:36.485Z,Does this include re-packaging all the archiva modules from org.apache.maven.archiva.* to org.apache.archiva.*?
MRM-792,oching,Maria Odea Ching,2008-07-02T02:50:54.757Z,2008-07-02T02:50:54.757Z,"Initial cleanup in trunk -r673308:
- removed references to maven site in archiva-webapp module
- updated http://maven.apache.org/archiva urls to http://archiva.apache.org
"
MRM-792,brettporter,Brett Porter,2008-07-02T03:21:18.529Z,2008-07-02T03:21:18.529Z,I think we can change the packages later - we do need to fix that crazy banner though. Maybe time we lose the alpaca... :)
MRM-792,jameswdumay,James William Dumay,2008-07-02T20:45:12.177Z,2008-07-02T20:45:12.177Z,"Lets keep the alpaca :)

I think the packaging should be the last thing we do before we branch for 1.2..."
MRM-792,oching,Maria Odea Ching,2008-07-03T00:31:50.769Z,2008-07-03T00:31:50.769Z,"I don't want to loose the alpaca too, it already grew on me :-)
I already updated the alpaca message in trunk -r673589."
MRM-792,oching,Maria Odea Ching,2008-07-03T00:48:35.378Z,2008-07-03T00:48:35.378Z,"Updates in -r673591:
- removed reference to Maven and updated link to Continuum site in archiva-docs
"
MRM-749,jcrouvi@yahoo.com,Jean-Claude Rouvinez,2008-10-10T07:52:37.359Z,2008-10-10T07:52:37.359Z,"Hi,
We are evaluating two Repository Managers: Archiva and Nexus.
Archiva seems to be better than Nexus but because of this issue it doesn't integrate very well with eclipse (M2E).
So we are forced to choose Nexus.

Does anyone know, when this issue will be fixed? Instead of using Nexus we could use for a while  Archiva and the Nexus Indexer as described at
  http://docs.codehaus.org/display/M2ECLIPSE/Nexus+Indexer"
MRM-749,oching,Maria Odea Ching,2008-10-10T20:08:59.851Z,2008-10-10T20:08:59.851Z,"Sorry, I haven't started working on this yet.. I got caught up working on some of the other issues. This is scheduled for the 1.2 roadmap which is what we are currently working on, so you can expect this in the next few weeks/months. 

Contributions are very welcome too if you'd like to contribute :)"
MRM-749,nmaiorana,Nick Maiorana,2008-12-02T07:52:44.51Z,2008-12-02T07:52:44.51Z,I have the same issue.  Is this going to get fixed soon?
MRM-749,oching,Maria Odea Ching,2009-01-20T03:40:01.179Z,2009-01-20T03:40:01.179Z,James has started something on http://svn.apache.org/repos/asf/archiva/branches/archiva-nexus-indexer/ if you'd like to take a look :) There's still some work that needs to be done still before it could be merged to trunk.
MRM-749,oching,Maria Odea Ching,2009-02-01T23:20:59.093Z,2009-02-01T23:20:59.093Z,"What already works in the branch:
* consumer for creating a Nexus format index
* search implementation which uses Nexus:
** quick search
* partial integration of new search implementation with webapp

What still needs to be done:
* search implementation which uses Nexus:
** advanced search
** searching within search results
* complete integration of new search implementation with webapp"
MRM-749,oching,Maria Odea Ching,2009-02-03T04:23:57.482Z,2009-02-03T04:23:57.482Z,"The remaining things to be done are already fixed and the branch can be merged to trunk now.
"
MRM-749,oching,Maria Odea Ching,2009-02-03T19:10:51.364Z,2009-02-03T19:10:51.364Z,branch already merged to trunk in -r740552
MRM-735,odassaud,Olivier Dassaud,2008-03-17T06:17:50.116Z,2008-03-17T06:17:50.116Z,"Hello,

In fact, there is the same problem with Oracle system... the 4000 bytes limit.

A ticket has been set and a solution is now described :
http://jira.codehaus.org/browse/MRM-657

Olivier."
MRM-735,brettporter,Brett Porter,2010-02-23T02:23:24.617Z,2010-02-23T02:23:24.617Z,redundant
MRM-746,wsmoak,Wendy Smoak,2008-03-19T23:53:44.412Z,2008-03-19T23:53:44.412Z,"Try to exclude things like maven-metadata-central.xml that really shouldn't be in a remote repo, but sometimes are."
MRM-738,greyfairer,Geert Pante,2008-03-13T11:18:56.937Z,2008-03-13T11:18:56.937Z,"The DaysOldRepositoryPurge has the same problem, but it does not use the DefaultPathParser. I could download the file, however, so it's probably not a duplicate of MRM-674.
There is also no qualifier at the end of the file name, so there is no problem like in -tests.jar.

2008-03-13 16:35:58,809 [pool-2-thread-1] ERROR org.apache.maven.archiva.repository.scanner.Reposito
ryScanner:default  - Consumer [repository-purge] had an error when processing file [/data01/archiva/
data/repositories/snapshots/com/ford/vcc/gent/cip/eNextGenId-vem-slave/3.0-SNAPSHOT/eNextGenId-vem-s
lave-3.0-20080312.152330-21.pom]: Invalid path to Artifact: filename format is invalid,expected time
stamp format in filename.
org.apache.maven.archiva.consumers.ConsumerException: Invalid path to Artifact: filename format is i
nvalid,expected timestamp format in filename.
        at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(Re
positoryPurgeConsumer.java:189)
        at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(C
onsumerProcessFileClosure.java:57)
  ...
Caused by: org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeException: Invalid path
 to Artifact: filename format is invalid,expected timestamp format in filename.
        at org.apache.maven.archiva.consumers.core.repository.DaysOldRepositoryPurge.process(DaysOld
RepositoryPurge.java:141)
        at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(Re
positoryPurgeConsumer.java:185)
        ... 23 more"
MRM-738,brettporter,Brett Porter,2008-03-13T18:40:38.59Z,2008-03-13T18:40:38.59Z,"the first example should be a duplicate of the other issues, but the second warrants more investigation"
MRM-738,brettporter,Brett Porter,2008-03-14T17:04:02.403Z,2008-03-14T17:04:02.403Z,"also from Jason on the users list:

org.apache.maven.archiva.repository.scanner.RepositoryScanner:default  - Consumer [repository-purge] had an error when processing file [/proxy/maven2/org/apache/cxf/cxf-rt-bindings-soap/2.0.3-incubator/maven-metadata.xml]: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
org.apache.maven.archiva.consumers.ConsumerException: Invalid path to Artifact: filename format is invalid, should start with artifactId as stated in path.
       at org.apache.maven.archiva.consumers.core.repository.RepositoryPurgeConsumer.processFile(RepositoryPurgeConsumer.java:189)"
MRM-738,brettporter,Brett Porter,2008-03-19T23:23:06.971Z,2008-03-19T23:23:06.971Z,this is a duplicate - the path parser is called by toArtifactReference that is called by the purge routines.
MRM-796,aheritier,Arnaud HERITIER,2008-05-06T07:04:08.453Z,2008-05-06T07:04:08.453Z,My archiva configuration
MRM-796,aheritier,Arnaud HERITIER,2008-05-06T07:05:24.211Z,2008-05-06T07:05:24.211Z,When I edit my repository
MRM-796,aheritier,Arnaud HERITIER,2008-05-06T07:06:26.771Z,2008-05-06T07:06:26.771Z,My repositories list after having edited and removed the releases option
MRM-796,jmluy,John Michael Luy,2008-05-15T10:09:19.399Z,2008-05-15T10:09:19.399Z,attached patch that sets values to false on prepare() for checkbox issue.
MRM-796,oching,Maria Odea Ching,2008-05-23T02:09:48.341Z,2008-05-23T02:09:48.341Z,Patch applied in trunk -r659460. Thanks JM! :-)
MRM-742,mathus.b@mipih.fr,Baptiste MATHUS,2008-03-19T03:42:32.957Z,2008-03-19T03:42:32.957Z,"Could someone delete this issue :-/ ?
I got a problem with my browser and found myself logging this problem twice (see MRM742)"
MRM-743,skygolanur,Eric Barboni,2012-08-27T17:46:33.513Z,2012-08-27T17:46:33.513Z,"Attempt to have more informations (date,filesize) in manual browsing see r1377897"
MRM-743,olamy,Olivier Lamy (*$^%`),2014-03-02T16:44:45.132Z,2014-03-02T16:44:45.132Z,already fixed
MRM-799,wsmoak,Wendy Smoak,2008-05-10T17:19:02.697Z,2008-05-10T17:19:02.697Z,"Related thread:  http://www.nabble.com/Better-handling-of-missing-poms--td17136281.html

Brett commented:  ""I think it should just use a default model instead and show the normal page so you can get the download, etc.""

MRM-128 is related, and has an interesting idea:  ""it would be nice to consult the pom file in the actual artifact if pom not present. (it's stored at META-INF/maven if I recall correctly)"""
MRM-799,jzurbano,jzurbano,2009-02-08T20:41:57.765Z,2009-02-08T20:41:57.765Z,Patch attached generates POM information to make it possible for the artifact to be viewed/downloaded.
MRM-799,jameswdumay,James William Dumay,2009-02-08T21:00:24.289Z,2009-02-08T21:00:24.289Z,Thanks for the patch! Could we get a unit test too please?
MRM-799,jzurbano,jzurbano,2009-02-10T00:12:03.111Z,2009-02-10T00:12:03.111Z,Attached unit test patch for the selectVersion().
MRM-799,jameswdumay,James William Dumay,2009-02-10T17:30:47.132Z,2009-02-10T17:30:47.132Z,"Committed :)

Thanks Jevica for the patch. I added you as a contributor to the Archiva parent pom :)"
MRM-799,jzurbano,jzurbano,2009-02-10T20:39:37.89Z,2009-02-10T20:39:37.89Z,Thanks James! :)
MRM-765,dandare100,dandare100,2008-08-03T14:20:27.106Z,2008-08-03T14:20:27.106Z,"This patch disables the Add link if there are no remote repositories defined.
It states so to the user"
MRM-765,dandare100,dandare100,2008-09-03T14:28:15.156Z,2008-09-03T14:28:15.156Z,"Howzit guys
I am just finding out if there are any pre-requisites that I missed when submitting the patch ?
I would really like to contribute to Archiva because I think it is a really useful project. If there was anything that I missed, please could you let me know here so that I know what to take into consideration for the next patch.
Thanks Mark
"
MRM-765,jameswdumay,James William Dumay,2008-09-03T19:47:58.275Z,2008-09-03T19:47:58.275Z,"Hey Mark, thanks heaps for the patch! We are always looking for new contributers :)

Are you able to fix up the formatting of that patch and write some unit tests for your modifications to the ProxyConnectorsAction ?

Otherwise, this patch is good to go :)

Come join us on IRC at irc.codehaus.org #archiva (if you have not already)

Cheers
James"
MRM-765,oching,Maria Odea Ching,2008-09-10T03:48:24.69Z,2008-09-10T03:48:24.69Z,Patch applied in -r693737 1.1.x branch. Thanks again for the patch Mark! :)
MRM-789,brettporter,Brett Porter,2008-05-05T21:59:48.771Z,2008-05-05T21:59:48.771Z,"is the problem here that it deletes it, or that it used the tomcat home as the location for the internal repository?"
MRM-789,brill,Brill Pappin,2008-05-05T22:06:12.939Z,2008-05-05T22:06:12.939Z,"The delete worked flawlessly... and that was and was not the problem because it was pointed at tomcat home by default (or at least it was without me setting it).

A quick fix would be to make sure you append you own dir name on the end of whatever path chosen, that way a delete won't wipe out a complex app server installation.

I was very luck in that this particular host was entirely in SVN, so I was able to get the whole thing going again in a minute or so... but anyone else that tries this is not going to be so lucky."
MRM-789,oching,Maria Odea Ching,2008-05-30T05:23:23.899Z,2008-05-30T05:23:23.899Z,"I'm not sure if this would work, but maybe we could put a check in the webapp before saving a repo config--if the location specified is equal to the value of 'appserver.base' or 'appserver.home', then it shouldn't be allowed? Would this address the problem?"
MRM-789,brill,Brill Pappin,2008-05-30T08:42:55.172Z,2008-05-30T08:42:55.172Z,"that might work, but I think that app server specific isn't it?"
MRM-789,oching,Maria Odea Ching,2008-06-02T02:01:03.766Z,2008-06-02T02:01:03.766Z,yeah.. and this can only be checked if the appserver.base or appserver.home variable is set.
MRM-789,oching,Maria Odea Ching,2008-06-02T23:08:02.091Z,2008-06-02T23:08:02.091Z,"Would checking if the repo location is equivalent to any value in the system properties would do here? 

For example, Tomcat sets the property catalina.home for it's base directory. We could get the value of it via the system properties. So if the repo location is equal to a value of any of the system properties, then the delete won't be allowed. Wdyt?"
MRM-789,oching,Maria Odea Ching,2008-06-03T01:25:18.161Z,2008-06-03T01:25:18.161Z,"I committed the above fix in trunk -r662662:
- check if the repo location is referenced in the system properties before deleting the repo in the file system.

Please verify if the fix is sufficient enough to address your problem.. Thanks! :-)"
MRM-789,brill,Brill Pappin,2008-06-03T09:30:07.036Z,2008-06-03T09:30:07.036Z,"It looks like a good solution to this specific issue, but still wouldn't stop it from happening.
Maybe the check should be that when setting a repository path, it can't mat h any of the system properties.

the only way can think of making sure, is to create some sort of ""work"" directory under whatever directory the repo is set to.
"
MRM-789,oching,Maria Odea Ching,2008-06-03T22:17:47.974Z,2008-06-03T22:17:47.974Z,"Yeah, creating a ""work"" directory would ensure this but I'm hesitant in having a ""work"" directory. Doing this would require importing the contents of the repository into the ""work"" directory. This would mean that there'll be duplicate copies of the repo in the filesystem.. do we really want that? I'm also taking into account how long it would take to add a new managed repo if the contents would have to be imported.. it might take a while if it's a large repo. Maybe we should bring this up to the dev list..

Anyway, I'll move the checking of the system properties to when a managed repo is created instead of during delete. 
Thanks for your suggestions Brill!"
MRM-789,brill,Brill Pappin,2008-06-03T22:26:45.851Z,2008-06-03T22:26:45.851Z,"I agree duplication would be bad, but what I mean was that if the repo definition root is mydir/ then put the actually repo under /mydir/repository
you could use the same root for things like configuration as well, which would make the repository very portable.

Anyway, as long as you folks are aware of the issue, I'm sure something workable will come out of it :)
"
MRM-789,oching,Maria Odea Ching,2008-06-04T00:07:03.83Z,2008-06-04T00:07:03.83Z,"Ok, point taken :-) I'll open a separate issue for this and move it to 1.2 for review. I don't think we'll have enough time to make this change for 1.1 given the issues list that we still have to work on for 1.1. 

Thanks again Brill! :-)"
MRM-789,brettporter,Brett Porter,2008-06-04T01:06:06.526Z,2008-06-04T01:06:06.526Z,"checking against the system properties is dangerous - for example, the recommended way to run is with -Dappserver.base, and typically the data is a sudirectory of that value.

I would be content if the default was ensured of not pointing at an important place. For values the user enters on their own for new/editing repositories, I would ask for confirmation before accepting one that already exists."
MRM-789,oching,Maria Odea Ching,2008-06-04T01:33:44.405Z,2008-06-04T01:33:44.405Z,"Ok, I'll remove the checks against the system properties. I guess this (the default was ensured of not pointing at an important place) is already covered because the default config has the 'data' subdirectory. It's this (for values the user enters on their own for new/editing repositories, I would ask for confirmation before accepting one that already exists) that still needs to be addressed.

Thanks Brett!

"
MRM-789,oching,Maria Odea Ching,2008-06-05T18:56:52.133Z,2008-06-05T18:56:52.133Z,"Added confirmation page before saving  a repo config (whether new or update) if the repo location already exists in trunk -r663788.

This is the new flow:
1. Add
    - Add a managed repo.
    - If the repo location set already exists, then user will be directed to the confirmation page. 
    - If user clicks Save, then repo will be added. Otherwise, user will be redirected back to the repositories page.
2. Edit
    - Edit a managed repo config.
    - If the repo location has been changed, then the new location would be checked if it already exists. If it does, then user will be directed to the confirmation page.
    - If user clicks Save, then the repo config will be updated. Otherwise, user will be redirected back to the repositories page.


Please verify if the fix is sufficient for this issue. Thanks.."
MRM-789,brill,Brill Pappin,2008-06-07T19:05:36.078Z,2008-06-07T19:05:36.078Z,"Thanks for the work Maria... but the issue was actually that the repository was somehow set to my tomcat root and when i deleted it, it deleted the entire tomcat deployment :)

The set to root thing was a default install of the war version (so it would not have made any difference adding a new repo).

So, your change will help, but I think more importantly make sure on install that the directory doesn't exist."
MRM-789,oching,Maria Odea Ching,2008-06-09T03:43:07.584Z,2008-06-09T03:43:07.584Z,"I tried replicating the problem you encountered, but the location of the internal & snapshots repositories did not default to the Tomcat installation for me.. it was data/repository/internal & data/repository/snapshots. Anyway, I'll see if I can put some checks during startup regarding this. Thanks :)"
MRM-789,oching,Maria Odea Ching,2008-06-20T20:27:43.447Z,2008-06-20T20:27:43.447Z,"Fixed in trunk -r670114:

- added an additional check in ArchivaConfiguration to append 'data/repositories/[repo_id]' in the repo location if the location already exists & does not end with 'data/repositories/[repo_id]' when loaded from the default config (from default-archiva.xml) 
- added test"
MRM-741,mathus.b@mipih.fr,Baptiste MATHUS,2008-03-18T05:14:45.8Z,2008-03-18T05:14:45.8Z,"Might be related. In fact, when an artifact can't be provided when it wasn't downloaded because of bash hash with a ""fail"" policy, maybe this would be better to return something else than a 404?"
MRM-741,brettporter,Brett Porter,2008-03-19T13:32:30.563Z,2008-03-19T13:32:30.563Z,"yes, MRM-159 is to address the first point you raised. Leaving this open as a feature request to track the proxy failures in some way."
MRM-786,oching,Maria Odea Ching,2008-05-23T02:13:30.496Z,2008-05-23T02:13:30.496Z,Workaround here is to temporarily disable the Dependency Tree tab in the jsp page.
MRM-786,oching,Maria Odea Ching,2008-06-19T22:56:40.627Z,2008-06-19T22:56:40.627Z,Could you upload the artifact which causes this endless loop so we could use it for testing? Thanks :)
MRM-786,dschettl,Denis Schettl,2008-06-20T03:39:52.245Z,2008-06-20T03:39:52.245Z,"Im not able to give you the big bunch of pom you need to reproduce my initial problem.
BUT i have found (by testing all pom one by one) a free available pom that mybe cause the problem (in additional of some internal pom with the same behavior):

<dependency>
   <groupId>org.apache.xmlgraphics</groupId>
   <artifactId>fop</artifactId>
   <version>0.9.4</version>
</dependency> 

If you load archive with this pom (is available on central) and you go to ""dependency tree"" then a never displayed page will be loaded endless ..."
MRM-786,oching,Maria Odea Ching,2008-06-20T03:51:15.007Z,2008-06-20T03:51:15.007Z,"Ok, thanks for providing this Denis!"
MRM-786,oching,Maria Odea Ching,2008-06-24T09:04:48.272Z,2008-06-24T09:04:48.272Z,"I cannot replicate this issue in trunk (& in 1.0.2 as well) using the standalone bundle but the behaviour of the 'Dependency Tree' is inconsistent. Earlier, the dependency tree was listed for artifact fop-0.94 but when I executed a new archiva instance, the tree no longer shows up. What is shown in the dependency tree is this:

*   org / apache / xmlgraphics /  fop  | Version(s):  0.94

Btw, I'm using Ubuntu 7.04 (32-bit).. It could be possible that the dependency loop can be due to the difference in the architecture of the OS."
MRM-786,oching,Maria Odea Ching,2008-06-24T19:40:55.985Z,2008-06-24T19:40:55.985Z,"Moving this to 1.x, we might need to re-evaluate the dependency tree code. See also MRM-665.."
MRM-786,dschettl,Denis Schettl,2008-06-26T03:46:36.473Z,2008-06-26T03:46:36.473Z,"I use Tomcat 6.0 on Windows (32-bit, Java 1.5.0_12) and Opensuse 10.1 (64-bit, Java 1.5.0_15). On both OS I have the same behaviour: Endless loading time while trying to display the 'Dependency-Tree' ...."
MRM-786,oching,Maria Odea Ching,2009-01-19T19:02:06.701Z,2009-01-19T19:02:06.701Z,I was able to replicate this issue in a public Archiva instance I was maintaining. This is causing Archiva to hang and I had to re-start it a couple of time already. I disabled the dependency tree tab for now in my Archiva instance so as to workaround this issue for now.
MRM-786,brettporter,Brett Porter,2010-02-23T01:46:08.889Z,2010-02-23T01:46:08.889Z,for testing
MRM-786,brettporter,Brett Porter,2010-02-23T04:06:44.489Z,2010-02-23T04:06:44.489Z,fixed by updating dependency tree code to that used by Maven
MRM-732,jameswdumay,James William Dumay,2008-12-15T20:32:40.373Z,2008-12-15T20:32:40.373Z,Search now tokenizes on hyphen.
MRM-793,oching,Maria Odea Ching,2008-05-06T05:53:20.504Z,2008-05-06T05:53:20.504Z,"After pressing Back, clicking Appearance in the navigation menu results to the 500 error as well."
MRM-793,oching,Maria Odea Ching,2008-05-06T05:55:06.944Z,2008-05-06T05:55:06.944Z,"This was the error:

HTTP ERROR: 500

For artifact {     :fdwe:RELEASE:pom}: The groupId cannot be empty.

RequestURI=/archiva/admin/configureAppearance.action
Caused by:

org.apache.maven.artifact.InvalidArtifactRTException: For artifact {     :fdwe:RELEASE:pom}: The groupId cannot be empty.
	at org.apache.maven.artifact.DefaultArtifact.validateIdentity(DefaultArtifact.java:129)
	at org.apache.maven.artifact.DefaultArtifact.(DefaultArtifact.java:122)
	at org.apache.maven.artifact.factory.DefaultArtifactFactory.createArtifact(DefaultArtifactFactory.java:158)
	at org.apache.maven.artifact.factory.DefaultArtifactFactory.createArtifact(DefaultArtifactFactory.java:117)
	at org.apache.maven.artifact.factory.DefaultArtifactFactory.createArtifact(DefaultArtifactFactory.java:111)
	at org.apache.maven.artifact.factory.DefaultArtifactFactory.createArtifact(DefaultArtifactFactory.java:40)
	at org.apache.maven.artifact.factory.DefaultArtifactFactory.createProjectArtifact(DefaultArtifactFactory.java:95)
	at org.apache.maven.artifact.factory.DefaultArtifactFactory.createProjectArtifact(DefaultArtifactFactory.java:80)
	at org.apache.maven.shared.app.company.DefaultCompanyPomHandler.getCompanyPomModel(DefaultCompanyPomHandler.java:113)
	at org.apache.maven.shared.app.company.DefaultCompanyPomHandler.getCompanyPomModel(DefaultCompanyPomHandler.java:90)
	at org.apache.maven.archiva.web.action.admin.appearance.ConfigureAppearanceAction.prepare(ConfigureAppearanceAction.java:85)
	at com.opensymphony.xwork.interceptor.PrepareInterceptor.before(PrepareInterceptor.java:106)
	at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:30)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
	at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
	at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
	at com.opensymphony.xwork.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:186)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
	at org.codehaus.plexus.redback.xwork.interceptor.AutoLoginInterceptor.intercept(AutoLoginInterceptor.java:156)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
	at org.codehaus.plexus.redback.xwork.interceptor.ForceAdminUserInterceptor.intercept(ForceAdminUserInterceptor.java:76)
	at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)
	at com.opensymphony.xwork.DefaultActionProxy.execute(DefaultActionProxy.java:116)
	at com.opensymphony.webwork.dispatcher.DispatcherUtils.serviceAction(DispatcherUtils.java:273)
	at com.opensymphony.webwork.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:202)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
	at com.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:118)
	at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:52)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
	at com.opensymphony.webwork.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:88)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:722)
	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:404)
	at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:206)
	at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
	at org.mortbay.jetty.Server.handle(Server.java:324)
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:828)
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
	at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:450)
"
MRM-793,jameswdumay,James William Dumay,2008-06-04T03:05:01.458Z,2008-06-04T03:05:01.458Z,See MRM-829
MRM-763,brettporter,Brett Porter,2008-04-03T07:30:27.986Z,2008-04-03T07:30:27.986Z,"tested and found this to work in a clean build. I believe this was fixed some time ago.

However, there were a number of test cases that had the wrong expressions, so they were updated."
MRM-763,wsmoak,Wendy Smoak,2008-04-03T08:29:44.1Z,2008-04-03T08:29:44.1Z,I was seeing this with a clean build from the 1.0.x branch (last changed rev 642856) and 'mvn jetty:run'.
MRM-727,landrus,Christian Domsch,2008-03-04T05:00:45.028Z,2008-03-04T05:00:45.028Z,"I debugged through archiva and found out, that one reason for this bug, is that in DefaultRepositoryProxyConnectors in line 405 the filename for the local repo file gets renamed from maven-metadata.xml to maven-metadata-central.xml. This causes a problem later on, when this file is accessed because 1. the file never gets found by maven and 2. if you try to access it directly ProxiedDavServer fails to recognize it as a metadata file because the check in line 341 compares it to the string ""maven-metadata.xml"" and fails."
MRM-727,landrus,Christian Domsch,2008-03-04T05:12:23.97Z,2008-03-04T05:12:23.97Z,This patches the problem with the metadata naming on the server.
MRM-727,oching,Maria Odea Ching,2008-03-05T04:51:34.783Z,2008-03-05T04:51:34.783Z,"I tried to replicate this in the standalone archiva using the attached settings.xml, and I couldn't replicate the issue. This is my environment:
- maven 2.0.7/maven-2.0.8
- ubuntu 7.04
- jdk 1.5.0_11

I will try deploying Archiva to Geronimo.."
MRM-727,landrus,Christian Domsch,2008-03-05T17:40:32.481Z,2008-03-05T17:40:32.481Z,"As far as I found out, part of the problem seems to be a classloading issue with geronimo. I found out, that when the DefaultRepositoryProxyConnector finished with downloading the maven-metadata-central.xml, it tries to merge it with a possible existing maven-metadata.xml. In this process, the previously downloaded xml is read with a RepositoryMetadataReader, that uses dom4j internally with xpath expressions. This process throws a NoDefClassFoundError while it tries to load org.dom4j.Element. By googling this issue, I found this link:

http://mail-archives.apache.org/mod_mbox/geronimo-user/200705.mbox/%3Ce9f11b850705311735q5e050503s6c29d6c9b968a4e9@mail.gmail.com%3E

I have no clue, what the real problem is in detail, nor how to solve it."
MRM-727,jameswdumay,James William Dumay,2008-03-07T00:07:16.016Z,2008-03-07T00:07:16.016Z,"Christian, are you able to reproduce this again and attach your log?"
MRM-727,oching,Maria Odea Ching,2008-03-09T21:57:47.497Z,2008-03-09T21:57:47.497Z,"Hi James, I was able to reproduce the plugin download problem in Geronimo. The metadata xml files are all incorrect for the plugins. I've attached the logs and the metadata files."
MRM-727,oching,Maria Odea Ching,2008-03-09T22:16:38.91Z,2008-03-09T22:16:38.91Z,"Christian, I think the dom4j problem is a different one. I got those errors from the geronimo logs as well (see below), but not from proxying but during the repo scanning.. 

...
11:00:07,819 ERROR [DatabaseUnprocessedArtifactConsumer:update-db-project] Unable to process model /home/deng/TestFiles/internal/org/codehaus/plexus/plexus-utils/1.0.4/plexus-utils-1.0.4.pom due to : org.dom4j.InvalidXPathException : Invalid XPath expression: '//project'. Caused by: org/dom4j/Element
org.dom4j.InvalidXPathException: Invalid XPath expression: '//project'. Caused by: org/dom4j/Element
        at org.dom4j.xpath.DefaultXPath.parse(DefaultXPath.java:362)
        at org.dom4j.xpath.DefaultXPath.<init>(DefaultXPath.java:59)
        at org.dom4j.DocumentFactory.createXPath(DocumentFactory.java:230)
        at org.dom4j.tree.AbstractNode.createXPath(AbstractNode.java:207)
        at org.apache.maven.archiva.xml.XMLReader.createXPath(XMLReader.java:175)
        at org.apache.maven.archiva.xml.XMLReader.getElement(XMLReader.java:152)
        at org.apache.maven.archiva.repository.project.readers.ProjectModel400Reader.read(ProjectModel400Reader.java:80)
        at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:151)
        at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:52)
        at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
        at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:152)
        at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:86)
        at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:68)
        at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
        at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
        at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)
        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)
        at java.lang.Thread.run(Thread.java:595)
...
"
MRM-727,oching,Maria Odea Ching,2008-03-10T01:40:59.458Z,2008-03-10T01:40:59.458Z,"I also found this in the geronimo logs.. 

14:32:33,558 ERROR [[RepositoryServlet]] Servlet.service() for servlet RepositoryServlet threw exception
org.dom4j.InvalidXPathException: Invalid XPath expression: '//metadata/groupId'. Caused by: org/dom4j/Element
	at org.dom4j.xpath.DefaultXPath.parse(DefaultXPath.java:362)
	at org.dom4j.xpath.DefaultXPath.<init>(DefaultXPath.java:59)
	at org.dom4j.DocumentFactory.createXPath(DocumentFactory.java:230)
	at org.dom4j.tree.AbstractNode.createXPath(AbstractNode.java:207)
	at org.apache.maven.archiva.xml.XMLReader.createXPath(XMLReader.java:175)
	at org.apache.maven.archiva.xml.XMLReader.getElementText(XMLReader.java:258)
	at org.apache.maven.archiva.repository.metadata.RepositoryMetadataReader.read(RepositoryMetadataReader.java:56)
	at org.apache.maven.archiva.repository.metadata.MetadataTools.readProxyMetadata(MetadataTools.java:360)
	at org.apache.maven.archiva.repository.metadata.MetadataTools.updateMetadata(MetadataTools.java:435)
	at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.fetchFromProxies(DefaultRepositoryProxyConnectors.java:367)
	at org.apache.maven.archiva.web.repository.ProxiedDavServer.fetchMetadataFromProxies(ProxiedDavServer.java:405)
	at org.apache.maven.archiva.web.repository.ProxiedDavServer.fetchContentFromProxies(ProxiedDavServer.java:343)
	at org.apache.maven.archiva.web.repository.ProxiedDavServer.process(ProxiedDavServer.java:189)
	at org.codehaus.plexus.webdav.servlet.multiplexed.MultiplexedWebDavServlet.service(MultiplexedWebDavServlet.java:119)
	at org.apache.maven.archiva.web.repository.RepositoryServlet.service(RepositoryServlet.java:155)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:806)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at com.opensymphony.webwork.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:39)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at com.opensymphony.webwork.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:88)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
	at org.apache.geronimo.tomcat.valve.DefaultSubjectValve.invoke(DefaultSubjectValve.java:56)
	at org.apache.geronimo.tomcat.GeronimoStandardContext$SystemMethodValve.invoke(GeronimoStandardContext.java:353)
	at org.apache.geronimo.tomcat.valve.GeronimoBeforeAfterValve.invoke(GeronimoBeforeAfterValve.java:47)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
	at java.lang.Thread.run(Thread.java:595)

Is this the one you've mentioned above Christian?

"
MRM-727,oching,Maria Odea Ching,2008-03-10T03:27:21.015Z,2008-03-10T03:27:21.015Z,The workaround specified here https://issues.apache.org/jira/browse/GERONIMO-3894 solves this issue :-) Just need to hide the jaxen jar.
MRM-727,oching,Maria Odea Ching,2008-03-10T03:27:59.025Z,2008-03-10T03:27:59.025Z,"Could you try it Christian and see if it works for you? 
Thanks.."
MRM-727,landrus,Christian Domsch,2008-03-12T03:58:09.188Z,2008-03-12T03:58:09.188Z,"Thanxs for all the work so far. As I am pretty busy during this week, I dont know if I find the time to test the workaround. But I will try."
MRM-727,oching,Maria Odea Ching,2008-03-25T22:33:43.534Z,2008-03-25T22:33:43.534Z,"I made some comments on the instruction on how to deploy to Geronimo in the wiki:

http://cwiki.apache.org/confluence/display/ARCHIVA/Archiva+on+Geronimo-2.0.2+with+MySQL+backend"
MRM-733,jameswdumay,James William Dumay,2008-03-06T22:33:48.661Z,2008-03-06T22:33:48.661Z,"This exception occurred when Tomcat was being shutdown. Plexus could do with some better exception messages as to explain why.

joakime is certain that this is a bug. "
MRM-733,brettporter,Brett Porter,2008-03-14T17:07:15.505Z,2008-03-14T17:07:15.505Z,Plexus is no longer being used on trunk
MRM-778,carloscs,Carlos Costa e Silva,2008-04-14T20:03:30.746Z,2008-04-14T20:03:30.746Z,"Patch follows for this issue.

application.xml: remove injection of DavServerComponent to DavServerManager.

DavServerManager.createServer: add parameter ServletConfig config .

DefaultDavServerManager.createServer: add parameter ServletConfig config and fetch server from spring.

BasicWebDavServlet and MultiplexedWebDavServlet add config parameter to createServer call.
"
MRM-778,carloscs,Carlos Costa e Silva,2008-04-14T20:04:20.632Z,2008-04-14T20:04:20.632Z,Patch v 1.0 for this issue.
MRM-778,carloscs,Carlos Costa e Silva,2008-04-18T13:48:52.445Z,2008-04-18T13:48:52.445Z,Fixed with the introduction of Jackrabbit-webdav.
MRM-744,joakime,Joakim Erdfelt,2008-03-24T00:03:55.024Z,2008-03-24T00:03:55.024Z,"Is this really a problem?
The tests work on the command line, in continuum, and in the IDEs.

What's wrong?"
MRM-744,brettporter,Brett Porter,2008-03-24T00:12:53.058Z,2008-03-24T00:12:53.058Z,they require careful configuration in the IDE because running them from the wrong directory causes them to fail. It's certainly not major.
MRM-728,brettporter,Brett Porter,2008-03-05T13:53:35.313Z,2008-03-05T13:53:35.313Z,"There are two things to investigate:
- was there anything in the logs or anything additional in the URL when the login appeared to work but didn't?
- what browser is in use? Could there be a cookie issue here?

Thanks!"
MRM-728,anachimuthu0,Arun Nachimuthu,2008-03-05T21:42:32.528Z,2008-03-05T21:42:32.528Z,"I am facing exactly the same issue. 

Archiva 1.0.1 on Tomcat 6.x RedHat Linux. 

Once i login, I get only the page with only Search/FindArtifact/Browse functions.

This issue is reproducable only if I use IE7 as the browser. When I try to login with FireFox everything is fine.

Was not able to reproduce this in windows with exactly the same setup/installation instrucations.

Thanks
"
MRM-728,robinroos2,Robin Roos,2008-03-07T05:42:02.148Z,2008-03-07T05:42:02.148Z,"My browser is IE version 6.0.2900.2180.xpsp_sp2_gdr.070227-2254 which I take to mean ""IE 6.0 SP 2"".

The bank does not permit Firefox (which intrigues me, as I see Firefox as less of a risk than IE !).

The logs (archiva.log) did not show anything when I signed on ""successfully"" but did have messages that indicated ""unsuccessful login"" (at which point I got to the unsuccessful login page).

n the successful login scenario the archiva.log has no additional entries and I am directed back to the opening page with only three available functions.

The server is given as:

uname -a
Linux <hostname> 2.6.18-8.el5 #1 SMP Fri Jan 26 14:15:14 EST 2007 x86_64 x86_64 x86_64 GNU/Linux
"
MRM-728,robinroos2,Robin Roos,2008-03-10T05:06:51.079Z,2008-03-10T05:06:51.079Z,"I've now repeated the exercise with the Opera browser, so this is not an IE-specific issue.

In the process I've recorded the archiva.log.  I've annotated the log with the specific actions I took at various times, each preceded with # for readability.  The total log is only 44 lines long.  

A few specific points:

1. The port I'm using for Archiva on Linux is 9100 (since 8080 was in use). but I used 8080 on Windows.  Could this indicate why authentication failse?  Are there multiple places where I ought to set 9100?

2. The log only shows INFO WARN and ERROR levels.  Can I invoke DEBUG?  I saw no way to configure the logging via the XML files in conf/ 

3. The first entry in the log is an ascending number.  I'm seeing huge leaps in its value.  Perhaps its time-based so I need not be concerned, but if it is a log message id of some sort then something is putting out huge numbers of log messages on a suppressed channel.  I point this out in case its useful, although it probably has no significance.

Finally I will happily run a new version to chase the error, run with DEBUG enabled, or do anything else which might help to resolve this issue.  Clearly I am not the only user struggling with this.

Many thanks, Robin."
MRM-728,robinroos2,Robin Roos,2008-03-10T05:07:40.122Z,2008-03-10T05:07:40.122Z,Attaching the (annotated) log file.
MRM-728,robinroos2,Robin Roos,2008-03-10T06:22:40.287Z,2008-03-10T06:22:40.287Z,"For reference, I am using Archiva stand-alone (Jetty-based).  Arun notes above that he has seen this problem with Tomcat.  So it would seem not to be appserver-dependent.  I have shown it is not browser-dependent.  Could it be OS/JDK-specific?  I'm on a 64-bit Linux version using /jdk1.5.0_15."
MRM-728,robinroos2,Robin Roos,2008-03-11T04:01:11.646Z,2008-03-11T04:01:11.646Z,"I changed the security policy on IE to accept all cookies regardless of  their ""compact privicy policy"".  IE still exhibits the problem - after successful login the user is treated as guest and shown only three functions."
MRM-728,robinroos2,Robin Roos,2008-03-11T04:10:45.747Z,2008-03-11T04:10:45.747Z,"Just cheked with Opera again - it is receiving one cookie from Archiva and storing it.  The server is ""<hostname>.local"" and the cookie name is ""JSESSIONID"".  Interestingly Opera shows the expiry date as being ""1970-01-01 00:00:00""; since that is the epoch I presume this means ""never"".

Is there anything else I can check on my side?

I'm really keen to get this resolved...."
MRM-728,robinroos2,Robin Roos,2008-03-12T04:22:09.016Z,2008-03-12T04:22:09.016Z,"I double-checked the URLs used.

The only difference is the hostname.  For the Windows server which accepts my admin credentials and give me all administrative  functions the hostname is localhost:8080.  For the Linux server, which silently fails on giving the correct admin password, the hostname is <hostname>:9100.  The rest of the URLs are the same."
MRM-728,robinroos2,Robin Roos,2008-03-12T07:20:15.666Z,2008-03-12T07:20:15.666Z,"I've installed continuum-1.0-SNAPSHOT on the same server at port 9200.

I'm experiencing exactly the same problem, which is not too surprising.

I've tried ""short"" admin passwords just in case something was getting truncated, but with no joy.

I can connect to Archiva and Continuum instances on the same server, but since I cannot log in to them as ""admin"" I am unable to configure them for use.

Any and all ideas welcome."
MRM-728,robinroos2,Robin Roos,2008-03-12T10:19:34.422Z,2008-03-12T10:19:34.422Z,"This problem IS NOT exhibited by Firefox 2.0.0.12 (and possibly other Firefox versions). 

This problem IS exhibited by IE 6 sp 2, Opera 9.26 and Safari (not sure which version)."
MRM-728,anachimuthu0,Arun Nachimuthu,2008-03-13T17:51:04.593Z,2008-03-13T17:51:04.593Z,"I deployed continuum into the same tomcat instance and even this web application has the same issue. works with firefox and not with IE7

I will try and use ethreal or other tcp analyser and see the difference in the content exchanged on the wire between browser and server for firefox and ie.

"
MRM-728,robinroos2,Robin Roos,2008-04-09T04:12:42.037Z,2008-04-09T04:12:42.037Z,Any further update on this?  My developers are having to use FireFox (which itslef is no bad thing) in violation of a corporate policy to use only IE.
MRM-728,oching,Maria Odea Ching,2008-04-10T02:43:58.256Z,2008-04-10T02:43:58.256Z,"I tried this out with IE7 and I was able to login as admin with the correct functions displayed. I was running Archiva 1.0.1 in Ubuntu Linux 7.04, and tried to access it in a Windows machine using IE7 and was not able to replicate this problem. I'll try with IE6 next."
MRM-728,oching,Maria Odea Ching,2008-04-10T03:27:35.585Z,2008-04-10T03:27:35.585Z,"Hmm, it worked for me in IE6. I was still able to login as admin with the correct permissions. The IE6 version I was using was 6.0.2900.2180.xpsp_sp2_qfe.070227-2300. In both tests, I was using the standalone Archiva 1.0.1.  The java version installed in the linux machine where Archiva is installed is java 1.5.0_11.

Btw, you could set the log level to DEBUG in apps/archiva/webapp/WEB-INF/classes/log4j.xml."
MRM-728,robinroos2,Robin Roos,2008-04-18T03:54:06.916Z,2008-04-18T03:54:06.916Z,"Hi Maria.  I turned on debug, stopped/started Archiva and performed the login attempt as Admin with the correct password.  I attach an extract from the log file concerning the login attempt.  It would appear that I have a cookie problem:

94702 [SocketListener0-0] DEBUG org.codehaus.plexus.redback.xwork.util.AutoLoginCookies:default  - Remember Me Cookie Not Found: rbkRememberMe
94702 [SocketListener0-0] DEBUG org.codehaus.plexus.redback.xwork.util.AutoLoginCookies:default  - Single Sign On Cookie Not Found: rbkSignon

Kind regards, Robin."
MRM-728,robinroos2,Robin Roos,2008-04-18T03:54:38.151Z,2008-04-18T03:54:38.151Z,Extract from log file - 20 lines covering the login attempt.
MRM-728,robinroos2,Robin Roos,2008-04-18T04:01:06.739Z,2008-04-18T04:01:06.739Z,"Screen shot of IE Advanced Privacy Settings showing:

Override automatic cookie handling: unchecked
First-party cookies: Accept
Third-party cookies: Accept 
Always allow session cookies: unchecked (probably doesn't apply unless some cookies are ""blocked"")"
MRM-728,sfcoy,Stephen Coy,2008-12-09T16:52:55.794Z,2008-12-09T16:52:55.794Z,"I've observed this problem in both Continuum 1.2.2 and Archiva 1.1.2. 

I tracked it down to the clock on the VM instance running them being wrong by several hours. This causes the applications to send cookies which expire as soon as the browser receives them.


"
MRM-728,mparra,Mario Parra,2011-01-20T14:23:09.713Z,2011-01-20T14:23:09.713Z,"Does anybody has any update or idea about this?

I'm still finding this issue with Archiva 1.3.1 and IE7. I think it is a problem with the ""rbkSignon"" cookie, because its been created on Firefox, but not on IE.

I'm recommending my users to use Firefox, but the official browser in the company is IE, so it is starting to be a really issue here.

Here are the logs:

On Firefox:
2011-01-20 08:33:42,256 [btpool0-18] DEBUG org.codehaus.plexus.redback.system.DefaultSecuritySystem  - User: org.codehaus.plexus.redback.common.ldap.LdapUser@b7e998
2011-01-20 08:33:42,635 [btpool0-18] DEBUG org.codehaus.plexus.redback.struts2.interceptor.AutoLoginInterceptor  - Returning Security Session: org.codehaus.plexus.redback.system.DefaultSecuritySession@47fb00
2011-01-20 08:33:42,635 [btpool0-18] DEBUG org.codehaus.plexus.redback.struts2.interceptor.AutoLoginInterceptor  - User already authenticated.
2011-01-20 08:33:42,817 [btpool0-18] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - SecureActionInterceptor: processing org.codehaus.plexus.redback.struts2.action.SecurityRedirectAction
2011-01-20 08:33:42,818 [btpool0-18] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - SecureActionInterceptor: org.codehaus.plexus.redback.struts2.action.SecurityRedirectAction not a secure action
2011-01-20 08:33:42,818 [btpool0-18] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - not a secure action org.codehaus.plexus.redback.struts2.action.SecurityRedirectAction
2011-01-20 08:33:42,818 [btpool0-18] DEBUG org.codehaus.plexus.redback.struts2.interceptor.PolicyEnforcementInterceptor  - Enforcement: not processing per click security policies.
2011-01-20 08:33:42,832 [btpool0-18] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - Passing invocation up, result is [security-login-success] on call org.codehaus.plexus.redback.struts2.action.SecurityRedirectAction
2011-01-20 08:33:42,916 [btpool0-5] DEBUG org.codehaus.plexus.redback.struts2.interceptor.AutoLoginInterceptor  - Returning Security Session: org.codehaus.plexus.redback.system.DefaultSecuritySession@47fb00
2011-01-20 08:33:42,916 [btpool0-5] DEBUG org.codehaus.plexus.redback.struts2.interceptor.AutoLoginInterceptor  - User already authenticated.
2011-01-20 08:33:43,014 [btpool0-5] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - SecureActionInterceptor: processing org.apache.maven.continuum.web.action.GroupSummaryAction
2011-01-20 08:33:43,014 [btpool0-5] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - SecureActionInterceptor: org.apache.maven.continuum.web.action.GroupSummaryAction not a secure action
2011-01-20 08:33:43,014 [btpool0-5] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - not a secure action org.apache.maven.continuum.web.action.GroupSummaryAction
2011-01-20 08:33:43,015 [btpool0-5] DEBUG org.codehaus.plexus.redback.struts2.interceptor.PolicyEnforcementInterceptor  - Enforcement: not processing per click security policies.
2011-01-20 08:33:43,032 [btpool0-5] DEBUG org.codehaus.plexus.redback.rbac.cached.CachedRbacManager  - building user permission map
2011-01-20 08:33:46,880 [btpool0-5] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - Passing invocation up, result is [success] on call org.apache.maven.continuum.web.action.GroupSummaryAction



On IE7:
2011-01-20 08:03:21,729 [btpool0-6] DEBUG org.codehaus.plexus.redback.system.DefaultSecuritySystem  - User: org.codehaus.plexus.redback.common.ldap.LdapUser@2ea871
2011-01-20 08:03:22,404 [btpool0-3] DEBUG org.codehaus.plexus.redback.struts2.interceptor.AutoLoginInterceptor  - Returning Security Session: org.codehaus.plexus.redback.system.DefaultSecuritySession@1a2ac44
2011-01-20 08:03:22,404 [btpool0-3] DEBUG org.codehaus.plexus.redback.struts2.interceptor.AutoLoginInterceptor  - User already authenticated.
2011-01-20 08:03:22,404 [btpool0-3] DEBUG org.codehaus.plexus.redback.struts2.interceptor.AutoLoginInterceptor  - Login invalidated: signon cookie was removed
2011-01-20 08:03:22,451 [btpool0-3] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - SecureActionInterceptor: processing org.codehaus.plexus.redback.struts2.action.SecurityRedirectAction
2011-01-20 08:03:22,451 [btpool0-3] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - SecureActionInterceptor: org.codehaus.plexus.redback.struts2.action.SecurityRedirectAction not a secure action
2011-01-20 08:03:22,451 [btpool0-3] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - not a secure action org.codehaus.plexus.redback.struts2.action.SecurityRedirectAction
2011-01-20 08:03:22,451 [btpool0-3] DEBUG org.codehaus.plexus.redback.struts2.interceptor.PolicyEnforcementInterceptor  - Enforcement: not processing per click security policies.
2011-01-20 08:03:22,472 [btpool0-3] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - Passing invocation up, result is [security-login-success] on call org.codehaus.plexus.redback.struts2.action.SecurityRedirectAction
2011-01-20 08:03:22,545 [btpool0-6] DEBUG org.codehaus.plexus.redback.struts2.interceptor.AutoLoginInterceptor  - Returning Security Session: null
2011-01-20 08:03:22,545 [btpool0-6] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - SecureActionInterceptor: processing org.apache.maven.continuum.web.action.GroupSummaryAction
2011-01-20 08:03:22,545 [btpool0-6] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - SecureActionInterceptor: org.apache.maven.continuum.web.action.GroupSummaryAction not a secure action
2011-01-20 08:03:22,545 [btpool0-6] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - not a secure action org.apache.maven.continuum.web.action.GroupSummaryAction
2011-01-20 08:03:22,545 [btpool0-6] DEBUG org.codehaus.plexus.redback.struts2.interceptor.PolicyEnforcementInterceptor  - Enforcement: not processing per click security policies.
2011-01-20 08:03:22,576 [btpool0-6] DEBUG org.codehaus.plexus.redback.struts2.interceptor.SecureActionInterceptor  - Passing invocation up, result is [success] on call org.apache.maven.continuum.web.action.GroupSummaryAction
"
MRM-728,brettporter,Brett Porter,2011-01-20T23:11:14.586Z,2011-01-20T23:11:14.586Z,"thanks for the data Mario.

Is Stephen's advice about the clock skew relevant to you here?

What security level is the browser set at? Does the user see it as an intranet site, or an internet site?"
MRM-728,brettporter,Brett Porter,2011-03-24T10:18:04.663Z,2011-03-24T10:18:04.663Z,"I saw this myself today. Here's what I had that was being sent:
- 2 JSESSIONID cookies (path: / and /archiva)
- rbkRememberMe (path: /archiva)
- rbkSignon (path: /)

The server responded clearing both cookies, then setting both cookies on /. It redirects to the redbackRedirect action which sends both, twice, with an empty value and 1970 expiry (4 cookie setting lines). Some other actions continue to unset the two cookies.

Deleting the above cookies fixed the problem after I logged in again.

I think it might be the incorrect JSESSIONID, but it may have been the incorrect ""remember me"" cookie that was never unset."
MRM-728,lpenczek,Leonardo Penczek,2011-05-24T07:51:40.305Z,2011-05-24T07:51:40.305Z,"I do not know how to resolve this problem, but i think i found the cause.
My Firefox was accessing without problems, but my IE wasn't (same problem as above).
The only difference was that my Firerfox has a rule to skip the web-proxy (it was directly accessing the archiva server) and my IE was using the proxy (because it's configured via WPAD).
In every machine that i configured to skip the proxy the archiva has returned to work correctly.
It is an issue with the proxy, it probably was removing/adding/changing some header that archiva is expecting and causing the malfunction."
MRM-728,olamy,Olivier Lamy (*$^%`),2014-02-25T19:29:46.202Z,2014-02-25T19:29:46.202Z,no more issues fix for 1.3.x except security. Please use 2.x 
MRM-752,jameswdumay,James William Dumay,2008-05-08T02:22:38.716Z,2008-05-08T02:22:38.716Z,Moving to 1.2
MRM-752,aheritier,Arnaud HERITIER,2008-05-08T14:42:07.179Z,2008-05-08T14:42:07.179Z,It is so difficult to add a trim() ????
MRM-752,jameswdumay,James William Dumay,2008-05-20T07:33:33.856Z,2008-05-20T07:33:33.856Z,Fixed in r658219
MRM-704,drewpuppy,Andrew Heald,2008-02-19T06:28:30.931Z,2008-02-19T06:28:30.931Z,"Okay, I now know this can be done in the security.properties file, so I'm closing this off.

Added:
email.from.address=xxx@yyy.com
email.from.name=Archiva"
MRM-725,sgrunwald,Steffen Grunwald,2008-03-03T08:42:39.549Z,2008-03-03T08:42:39.549Z,"Suggested patch considers pathInfo, if servletPath is empty string"
MRM-725,prange,Atle Prange,2008-03-30T08:42:21.803Z,2008-03-30T08:42:21.803Z,"The patch provided by Steffen Grunwald works perfectly on Websphere 6.1.0.15.
I just tested it and thought an approval like this might be helpful.
Bye, Stefan
"
MRM-725,brettporter,Brett Porter,2008-03-30T17:25:51.265Z,2008-03-30T17:25:51.265Z,"applied, thanks!"
MRM-708,joakime,Joakim Erdfelt,2008-02-21T01:44:39.23Z,2008-02-21T01:44:39.23Z,Changes completed in revision 629704.
MRM-779,oching,Maria Odea Ching,2008-08-15T04:55:08.96Z,2008-08-15T04:55:08.96Z,"The repository where the artifact is located is already displayed in the Artifact information in search/browse (see MRM-817). I'll update the summary to 'Display account name of the user who uploaded the artifact in the artifact information (if the artifact was deployed/uploaded in the Archiva repo)'. I think the account name should only be displayed if the user is logged in to Archiva, even if the 'guest' account is enabled after for the repository.."
MRM-779,brettporter,Brett Porter,2009-03-05T22:35:46.629Z,2009-03-05T22:35:46.629Z,note this is in the audit logs
MRM-755,brettporter,Brett Porter,2008-03-30T17:04:27.118Z,2008-03-30T17:04:27.118Z,"done, thanks!"
MRM-795,brettporter,Brett Porter,2008-09-13T22:33:40.819Z,2008-09-13T22:33:40.819Z,I believe this was fixed by the related change to the implementation
MRM-714,brettporter,Brett Porter,2011-09-12T09:37:12.958Z,2011-09-12T09:37:12.958Z,the maven indexer format is now shared
MRM-722,wsmoak,Wendy Smoak,2008-02-28T23:25:33.382Z,2008-02-28T23:25:33.382Z,"Related to MRM-718, which asks for a 'scan in progress' indicator"
MRM-722,wsmoak,Wendy Smoak,2009-09-02T10:29:35.021Z,2009-09-02T10:29:35.021Z,Still a problem in 1.2.2
MRM-722,olamy,Olivier Lamy (*$^%`),2012-03-23T10:07:24.88Z,2012-03-23T10:07:24.88Z,fixed in new ui
MRM-775,wsmoak,Wendy Smoak,2010-03-10T14:19:31.422Z,2010-03-10T14:19:31.422Z,"There is already a checkbox to generate a pom file when an artifact is uploaded.

Are you saying there should be an option to generate a legacy pom that would work with Maven 1?"
MRM-775,brettporter,Brett Porter,2011-09-12T09:39:15.517Z,2011-09-12T09:39:15.517Z,not needed on upload
MRM-766,brettporter,Brett Porter,2008-04-03T10:15:08.202Z,2008-04-03T10:15:08.202Z,"thanks, though on trunk this script no longer exists"
MRM-785,oching,Maria Odea Ching,2008-05-30T02:46:07.558Z,2008-05-30T02:46:07.558Z,"Fixed in trunk -r661582:

- set success result to go to jsp file instead of redirect to 'upload' action 
- clear the form fields before returning to jsp page after upload
"
MRM-731,joakime,Joakim Erdfelt,2008-03-06T08:21:35.207Z,2008-03-06T08:21:35.207Z,"Where do you see this lack of expression evaluation?

Apparently the ProjectModelExpressionFilter isn't being applied somewhere."
MRM-731,wsmoak,Wendy Smoak,2008-03-06T08:42:41.721Z,2008-03-06T08:42:41.721Z,"Quoting from related thread:  http://www.nabble.com/URLs-in-artifact-page-td15852639.html

Benoit wrote:
> I have a little problem with artifact page in archiva:
> In my pom, the url of the project is :
>  
> <url>http://mavenrepo.dev.kelkoo.net/docs/${project.groupId}/${project.artifactId}/${project.version}</url>
> 
> So I expect that archiva replace the ${} variables of this URL, but it doesn't :(.
> is there a way to correct this ? Or should I set the complete URL in all my poms ? 

... and later:

> I check the archiva code. The problem is in the class:
> ./archiva-base/archiva-repository-layer/src/main/java/org/apache/maven/archiva/repository/project/readers/ProjectModel300Reader.java
> Why don't you use the MavenXpp3Reader class to parse the pom ?
"
MRM-731,joakime,Joakim Erdfelt,2008-03-06T11:25:57.258Z,2008-03-06T11:25:57.258Z,"Which url line in the pom is that specified in?

We have a TestCase setup for expression evaluation (as a result of MRM-487 and MRM-488), I'd like to use your pom.xml to further the testing.

See the following test case.
http://svn.apache.org/viewvc/maven/archiva/branches/archiva-1.0.x/archiva-base/archiva-repository-layer/src/test/java/org/apache/maven/archiva/repository/project/filters/ProjectModelExpressionExpanderTest.java?view=markup

{code}
/**
 * [MRM-487] pom version is not resolved
 * [MRM-488] properties in pom are not resolved (at least while browsing)
 * 
 * This is to ensure that any expression within the pom is evaluated properly.
 */
public void testExpressionHell()
{code}"
MRM-731,joakime,Joakim Erdfelt,2008-03-06T11:41:50.918Z,2008-03-06T11:41:50.918Z,Fix committed in Archiva-1.0.x branch revision 634361.
MRM-731,bdecherf,Benoit Decherf,2008-03-14T07:37:16.192Z,2008-03-14T07:37:16.192Z,"Ok, It now works for variable in pom, but it still fails to replace variable that are defined in the parent pom. "
MRM-731,jancajas,jancajas,2009-03-12T19:24:11.504Z,2009-03-12T19:24:11.504Z,project properties are being left out during cloning of the archivaProject. attached fix + UT for review.
MRM-731,oching,Maria Odea Ching,2009-03-19T01:15:57.948Z,2009-03-19T01:15:57.948Z,"The patch works nicely :) Thanks Jan! 
Already applied it in trunk -r755846, btw."
MRM-710,jameswdumay,James William Dumay,2008-05-08T01:42:23.443Z,2008-05-08T01:42:23.443Z,Moving to 1.1.x
MRM-710,olamy,Olivier Lamy (*$^%`),2012-04-03T11:38:38.877Z,2012-04-03T11:38:38.877Z,not used anymore.
MRM-787,wsmoak,Wendy Smoak,2008-05-06T12:50:06.08Z,2008-05-06T12:50:06.08Z,"I think these could be flagged as problems on a report, but I'm not convinced that Archiva should refuse to serve the pom when there is no jar.

There are some poms in central that have no associated jar, mainly the ones for Sun jars that can't be redistributed.  http://repo1.maven.org/maven2/javax/ejb/ejb/2.0/

There is also the case of relocated artifacts, where there is only a pom pointing to the new location, and no jar.
http://maven.apache.org/guides/mini/guide-relocation.html"
MRM-787,npellow,Nick Pellow,2008-05-06T18:58:14.924Z,2008-05-06T18:58:14.924Z,"Couldn't those two exceptions to the rule be handled?

If packaging is not pom and there is no distributionManagement defined and there is no jar
then Archiva could flag the artifact as invalid and ignore it. 

Ideally, Archiva would do this on deployment - not on download."
MRM-711,oching,Maria Odea Ching,2008-03-11T02:26:26.306Z,2008-03-11T02:26:26.306Z,"This is already fixed in redback-trunk. We're migrating archiva 1.0.2 to the latest redback, so this would be fixed by then. 
I'll move this issue to 1.0.2.."
MRM-711,oching,Maria Odea Ching,2008-03-19T09:41:39.766Z,2008-03-19T09:41:39.766Z,"I upgraded archiva-trunk to redback 1.1-SNAPSHOT, could you please confirm if this has been fixed for you? Thanks.."
MRM-711,goncalvesl,Lucas Vilela de Souza Gonalves,2008-03-26T15:28:02.046Z,2008-03-26T15:28:02.046Z,"My security.properties look likes it:

ldap.user.store.enabled=false
ldap.bind.authenticator.enabled=true

# ldap options for configuration via properties file
ldap.config.hostname=192.168.1.32
ldap.config.port=389
ldap.config.base.dn=ou=Usuarios,dc=powerlogic,dc=com,dc=br
ldap.config.context.factory=com.sun.jndi.ldap.LdapCtxFactory
ldap.config.bind.dn=cn=Manager,dc=powerlogic,dc=com,dc=br
ldap.config.password=password
#ldap.config.authentication.method=

# config parameter for the ConfigurableUserManager
user.manager.impl=cached

Debugging:
 In class LdapConnection, LdapConnectionConfiguration.toString():
{LdapConnectionConfiguration: hostname: 192.168.1.32, port: 389, baseDn: ou=Usuarios, contextFactory: com.sun.jndi.ldap.LdapCtxFactory, bindDn: cn=Manager, password: password, authenticationMethod: null, objectFactories: [], stateFactories: [], extraProperties: {}}

BaseDn is missing ,dc=powerlogic,dc=com,dc=br.

Is that a bug, or i am doing wrong?


"
MRM-711,oching,Maria Odea Ching,2008-03-27T04:05:08.431Z,2008-03-27T04:05:08.431Z,"Your configuration looks right. Could you attach the logs for the error you're getting? 
Thanks.."
MRM-711,goncalvesl,Lucas Vilela de Souza Gonalves,2008-03-27T12:56:05.021Z,2008-03-27T12:56:05.021Z,"jvm 1    | 2008-03-27 14:50:20,795 [SocketListener0-1] WARN  authenticator#user-manager  - Login for user lucas.goncalves failed. user not found.
jvm 1    | 2008-03-27 14:50:20,795 [SocketListener0-1] INFO  authenticator#ldap  - Searching for users with filter: '(&(objectClass=inetOrgPerson)(cn=lucas.goncalves))' from base dn: <user-base-dn></user-base-dn>

And debuging i force a printstacktrace:

jvm 1    | javax.naming.AuthenticationException: [LDAP: error code 49 - Invalid Credentials]
jvm 1    |      at com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:2985)
jvm 1    |      at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2931)
jvm 1    |      at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2732)
jvm 1    |      at com.sun.jndi.ldap.LdapCtx.connect(LdapCtx.java:2646)
jvm 1    |      at com.sun.jndi.ldap.LdapCtx.<init>(LdapCtx.java:283)
jvm 1    |      at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(LdapCtxFactory.java:175)
jvm 1    |      at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(LdapCtxFactory.java:193)

"
MRM-711,oching,Maria Odea Ching,2008-03-28T05:19:27.608Z,2008-03-28T05:19:27.608Z,"I'm able to replicate this already, and I think the problem is with the Registry.. when it looks up the properties for the ldap configuration, it cuts the property values which has the ',' character (e.g. ldap.config.bind.dn=cn=Manager,dc=powerlogic,dc=com,dc=br). So the bind.dn becomes only this --> cn=Manager instead of cn=Manager,dc=powerlogic,dc=com,dc=br. The same goes with the base.dn property.

We encountered the same problem before with the cron expressions in the archiva config. Redback and Archiva are both using the commons-config plexus registry implementation. I'll file this issue in Redback and fix it there."
MRM-711,oching,Maria Odea Ching,2008-03-29T09:26:11.383Z,2008-03-29T09:26:11.383Z,"Looking further into this, it wasn't a problem with the registry.. but originates in the GuestUserEnvironmentCheck when it looks up the guest user. For some reason the basedn is not set in the LdapUserMapper where the user is searched, resulting to the NPE.

18992 [WrapperSimpleAppMain] INFO  org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor  - Initialized org.apache.maven.archiva.scheduled.executors.ArchivaRepositoryScanningTaskExecutor
18992 [WrapperSimpleAppMain] INFO  taskQueueExecutor#repository-scanning  - Starting task executor, thread name 'repository-scanning'.
19008 [WrapperSimpleAppMain] INFO  org.apache.maven.archiva.web.startup.SecuritySynchronization  - Running Environment Check: required-roles
19008 [WrapperSimpleAppMain] INFO  org.apache.maven.archiva.security.ArchivaStandardRolesCheck  - Checking the existance of required roles.
19051 [WrapperSimpleAppMain] INFO  org.apache.maven.archiva.security.ArchivaStandardRolesCheck  - Checking the existance of required operations.
19082 [WrapperSimpleAppMain] INFO  org.apache.maven.archiva.web.startup.SecuritySynchronization  - Running Environment Check: ExpectedJsps
19082 [WrapperSimpleAppMain] INFO  org.apache.maven.archiva.web.startup.SecuritySynchronization  - Running Environment Check: locked-admin-check
19902 [WrapperSimpleAppMain] INFO  org.apache.maven.archiva.web.startup.SecuritySynchronization  - Running Environment Check: guest-user-check
19921 [WrapperSimpleAppMain] INFO  ldapController  - Searching for user: guest
19922 [WrapperSimpleAppMain] INFO  ldapController  - Searching for users with filter: '(&(objectClass=inetOrgPerson)(cn=guest))' from base dn: null
20802 [WrapperSimpleAppMain] INFO org.quartz.simpl.RAMJobStore - RAMJobStore initialized.
20802 [WrapperSimpleAppMain] INFO org.quartz.impl.StdSchedulerFactory - Quartz scheduler 'defaultScheduler' initialized from an externally provided properties instance.
20802 [WrapperSimpleAppMain] INFO org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 1.4.5
20803 [WrapperSimpleAppMain] INFO org.quartz.core.QuartzScheduler - Scheduler defaultScheduler_$_NON_CLUSTERED started.
22067 [WrapperSimpleAppMain] ERROR org.mortbay.log - Failed startup of context org.mortbay.jetty.webapp.WebAppContext@1c9313b{/archiva,file:/home/deng/Projects/archiva-new-trunk/archiva-jetty/target/apache-archiva-1.1-SNAPSHOT/apps/archiva/}
java.lang.NullPointerException
	at javax.naming.InitialContext.getURLScheme(InitialContext.java:228)
	at javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:277)
	at javax.naming.directory.InitialDirContext.getURLOrDefaultInitDirCtx(InitialDirContext.java:87)
	at javax.naming.directory.InitialDirContext.search(InitialDirContext.java:248)
	at org.codehaus.plexus.redback.users.ldap.ctl.DefaultLdapController.searchUsers(DefaultLdapController.java:141)
	at org.codehaus.plexus.redback.users.ldap.ctl.DefaultLdapController.getUser(DefaultLdapController.java:193)
	at org.codehaus.plexus.redback.users.ldap.LdapUserManager.findUser(LdapUserManager.java:217)
	at org.codehaus.plexus.redback.users.configurable.ConfigurableUserManager.findUser(ConfigurableUserManager.java:111)
	at org.codehaus.plexus.redback.xwork.checks.security.GuestUserEnvironmentCheck.validateEnvironment(GuestUserEnvironmentCheck.java:82)
	at org.apache.maven.archiva.web.startup.SecuritySynchronization.executeEnvironmentChecks(SecuritySynchronization.java:151)
	at org.apache.maven.archiva.web.startup.SecuritySynchronization.startup(SecuritySynchronization.java:125)
	at org.apache.maven.archiva.web.startup.ArchivaStartup.contextInitialized(ArchivaStartup.java:61)
	at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:539)
	at org.mortbay.jetty.servlet.Context.startContext(Context.java:135)
	at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1216)
	at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:509)
	at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:447)
	at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
	at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)
	at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)
	at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
	at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:147)
	at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
	at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:117)
	at org.mortbay.jetty.Server.doStart(Server.java:222)
	at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
	at org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:977)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.mortbay.start.Main.invokeMain(Main.java:194)
	at org.mortbay.start.Main.start(Main.java:509)
	at org.mortbay.start.Main.main(Main.java:119)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
	at java.lang.Thread.run(Thread.java:595)
22071 [WrapperSimpleAppMain] INFO org.mortbay.log - Opened /home/deng/Projects/archiva-new-trunk/archiva-jetty/target/apache-archiva-1.1-SNAPSHOT/logs/2008_03_29.request.log"
MRM-711,oching,Maria Odea Ching,2008-03-29T09:41:11.537Z,2008-03-29T09:41:11.537Z,"Sorry, correction again.. if the separator in the basedn & binddn is ',', an NPE still occurs. I used ';' as a separator instead and was able to get past that first NPE. The NPE from the GuestUserEnvironmentCheck occurs after that."
MRM-711,oching,Maria Odea Ching,2008-03-29T10:43:07.256Z,2008-03-29T10:43:07.256Z,"I made some fixes in redback, please see REDBACK-139. 
Thanks!"
MRM-711,oching,Maria Odea Ching,2008-04-13T22:09:24.885Z,2008-04-13T22:09:24.885Z,Fixed in redback 1.0.1. I already upgraded archiva's redback to this version (-r647651).
MRM-734,brettporter,Brett Porter,2008-03-20T03:44:42.65Z,2008-03-20T03:44:42.65Z,"this is fixed, just some cleaning up to do before commit"
MRM-719,jahlborn,james,2008-02-27T12:41:26.109Z,2008-02-27T12:41:26.109Z,"actually, poking into this a little, i realize that it is a failure during database scanning, not repository scanning.  i'm guessing it's aborting the database scan, so my ""processed"" artifacts are not getting scanned."
MRM-719,jahlborn,james,2008-02-27T12:43:35.783Z,2008-02-27T12:43:35.783Z,"Also note that the code where this is throwing is actually within a catch block, presumably trying to get the logger.  the other disturbing bit about this code, is that it is not outputting any info about the actual ConsumerException being thrown, which will make it rather hard to debug other consumer issues.  e.g. something is causing a ConsumerException, which is leading to the NPE while logging, but the underlying cause is being lost."
MRM-719,brettporter,Brett Porter,2008-02-27T14:28:03.041Z,2008-02-27T14:28:03.041Z,fixed the logger setting - please file a new bug for the consumer exception it reveals later if necessary
MRM-719,jahlborn,james,2008-02-27T15:21:56.385Z,2008-02-27T15:21:56.385Z,"excellent, thanks for the quick fixes.

however, the build seems to be failing now in some of the unit tests.  e.g. in the archiva-database project:

testGetSelectedCleanupConsumers(org.apache.maven.archiva.database.updater.DatabaseConsumersTest)  Time elapsed: 0.045 sec  <<< ERROR!
org.codehaus.plexus.component.repository.exception.ComponentLookupException: Unable to lookup component 'org.apache.maven.archiva.database.updater.DatabaseConsumers', it could not be started
        at org.codehaus.plexus.DefaultComponentLookupManager.lookup(DefaultComponentLookupManager.java:156)
"
MRM-719,brettporter,Brett Porter,2008-02-27T15:33:03.314Z,2008-02-27T15:33:03.314Z,serves me right for cheating. I'll add the missing descriptors to the Plexus test cases now
MRM-719,brettporter,Brett Porter,2008-02-27T16:07:58.96Z,2008-02-27T16:07:58.96Z,fixed now
MRM-713,brettporter,Brett Porter,2008-02-25T05:23:19.443Z,2008-02-25T05:23:19.443Z,"applied, thanks!"
MRM-791,brettporter,Brett Porter,2011-09-12T11:55:54.127Z,2011-09-12T11:55:54.127Z,not enough info given here to determine what you meant
MRM-701,matinh,Martin Hller,2008-02-19T02:34:58.649Z,2008-02-19T02:34:58.649Z,"There are more issues with this documentation than just the missing {{data}}-directory. See also [this thread|http://www.nabble.com/Separating-the-base-from-the-installation-not-working-to15542875.html] on nabble.com.

I rewrote one section from the adminguide ({{adminguide/standalone.html}}):

{panel:title=Separating the base from the installation|borderStyle=solid}
The standalone instance of Archiva uses the Plexus application server, which is capable of separating it's configuration from installation,
in much the same way Tomcat does, for example, with it's CATALINA_BASE and CATALINA_HOME environment variables.

This is achieved by the following steps:

   1. Creating the base location. For example, you might install Archiva in {{/opt/archiva-1.0}} and the data in {{/var/archiva}}.
       Create the directories {{/var/archiva/logs}}, {{/var/archiva/data}} and {{/var/archiva/conf}}.
   2. Copy the coniguration files from {{/opt/archiva-1.0/conf}} to the new location {{/var/archiva/conf}}. If you've previously run Archiva,
       you may need to edit {{conf/archiva.xml}} to change the location of the repositories.
   3. Set the environment variable PLEXUS_BASE to the data location, i.e. {{/var/archiva}} (in bash, be sure to export the variable).
   4. Edit {{/var/archiva/conf/plexus.xml}} and change the location of the derby databases. This is done by replacing {{$\{plexus.home\}}}
       with {{$\{appserver.base\}}} in the two occurences.
   5. Start Archiva standalone as described above from the installation location.

Note, that Archiva still needs write access to the installation directory, as the application server needs to extract the WAR and the like.
{panel} 

Could someone please include this update in the documentation."
MRM-701,robinroos2,Robin Roos,2008-03-13T10:07:35.988Z,2008-03-13T10:07:35.988Z,I followed the procedure laid down by Martin above and it worked perfectly first-time.
MRM-701,brettporter,Brett Porter,2008-03-19T22:09:19.373Z,2008-03-19T22:09:19.373Z,"applied, thanks. I left out step 4 since that will be fixed by MRM-618"
MRM-701,freeky_d,Doron Solomon,2008-04-14T07:19:05.612Z,2008-04-14T07:19:05.612Z,"I too was able to get this working following the procedure above, although I didn't need to do step 4 since I'm using Archiva 1.0.2.  However, in my opinion copying the conf directory could cause confusion for someone who is unsure which conf directory (the one in the installation or the one in $PLEXUS_BASE) is the ""real"" configuration.  I would suggest instead one of the following two options.

The first option would be to modify the procedure to say that only the xml files in conf/ should be moved to PLEXUS_BASE; the classworlds.conf file should remain with the installation.

The second option would be to modify the path to classworlds.conf in all wrapper.conf files as well as the plexus.bat and plexus.sh files; the path should find classworlds.conf in $PLEXUS_BASE instead of $PLEXUS_HOME.  I personally prefer this option since it makes a simpler manual process to separate the base from the installation."
MRM-724,wattsie,Robert Watts,2008-05-19T16:25:46.196Z,2008-05-19T16:25:46.196Z,"I have exactly the same problem, I am using archiva 1.0.2 on tomcat 5.5.26"
MRM-724,brettporter,Brett Porter,2008-05-19T16:30:01.476Z,2008-05-19T16:30:01.476Z,one possible cause could be lock files in the Derby database - have you tried removing them?
MRM-724,wattsie,Robert Watts,2008-05-19T16:35:37.398Z,2008-05-19T16:35:37.398Z,Just doing that very thing... removed .lck files in both archiva and users DB directory - worked a treat.
MRM-724,dschettl,Denis Schettl,2008-08-22T07:28:25.561Z,2008-08-22T07:28:25.561Z,"I had the same problem with tomcat on Linux (on different Archiva-versions). I found out, that stopping tomcat does not stop archiva-processes in backgroud (ps -efx | grep archiva). When I killed this process, this error disapeers. When I didn't kill that process and start tomcat again, I started an second archiva-instance and I got this error message.
Maybe there are some tasks running in backgroud (db-updates, db-jobs), so that archiva will not ended properly.
The same installation on Windows (same Archiva-version und same tomcat-version) don't have this problem ....
I don't have check this for the archiva 1.1.1 version, because have already definded my maintanance-processes ....

I hope, this information will help you ...."
MRM-724,schedin,Lennart Schedin,2008-10-21T06:53:56.184Z,2008-10-21T06:53:56.184Z,"I'm having the same problem using apache-tomcat-6.0.18 and apache-archiva-1.1.3 on Ubuntu 8: the Tomcat process will not terminate, thus causing next start of Tomcat to fail to load the database for Archiva.

I have tried both Derby and H2database and the problem is the same."
MRM-724,ustuehler,Uwe Stuehler,2011-11-18T03:44:44.362Z,2011-11-18T03:44:44.362Z,So is this fixed or not? MRM-1014 was marked a duplicate of this and is closed.
MRM-724,brettporter,Brett Porter,2012-01-04T23:40:13.369Z,2012-01-04T23:40:13.369Z,"the other issue being closed as a duplicate just means that the emphasis is on this ticket.

Are you experiencing this problem? We could possibly use more data."
MRM-770,brettporter,Brett Porter,2008-04-08T08:57:41.608Z,2008-04-08T08:57:41.608Z,"in Maven, there is only one POM for a given 'coordinate' - classifiers are for derivative artifacts and so the project information should apply to all. That behaviour looks correct.

That said, Archiva should recognise the classifiers and list them under the downloads section, so I'll keep this open for fixing.

Does that make sense?"
MRM-770,robinroos2,Robin Roos,2008-04-09T04:10:56.12Z,2008-04-09T04:10:56.12Z,"That matches my understanding which is why I was reluctant to hack the POM on the repository filesystem.  Clearly Maven can resolve these from Archiva without dificulty, so we're just talking about a web visualization issue.

Thanks."
MRM-770,paolo.compieta,paolo.compieta,2009-11-17T02:29:55.948Z,2009-11-17T02:29:55.948Z,"Hi,
that would be very handy: i've just introduced classifiers in my company to have the deploy-team download a particular EAR directly from the repo, but they still can't browse Archiva and find the artifact they need.

I could pass the actual link (so nothing blocker), but we have more than 25 ears and it takes me more than half an hour to write down all links.

One more thing: we are using different classifiers (activated by profiles) and one of them is default, so we do not publish the main artifact *at all* -i point this out to prevent problems in rendering the page without the main artifact.

Thanks!"
MRM-770,brettporter,Brett Porter,2010-02-23T02:49:36.577Z,2010-02-23T02:49:36.577Z,for testing
MRM-770,brettporter,Brett Porter,2010-02-28T23:00:16.893Z,2010-02-28T23:00:16.893Z,"partially fixed in 1.4. The files are all listed for download correctly.

However, the download box shows them all as 'so' instead of indicating the classifier to help distringuish them. This should additionally be fixed.

As for the POM snippet - this is incorrect, but it is a result of the deploy-file plugin generating an incorrect POM (it should not have an so packaging if the artifact gives a classifier). We need not correct that in the UI."
MRM-770,olamy,Olivier Lamy (*$^%`),2014-03-02T16:56:26.801Z,2014-03-02T16:56:26.801Z,to check but should be fixed in 2.x
MRM-770,skygolanur,Eric Barboni,2014-10-02T19:17:28.947Z,2014-10-02T19:17:28.947Z,rewritten ui part to show classifiers
MRM-730,oching,Maria Odea Ching,2008-03-06T00:54:32.806Z,2008-03-06T00:54:32.806Z,There are already stub consumers for this in archiva-lucene-consumers (IndexArchiveTableOfContentsConsumer and IndexJavaPublicMethodsConsumer). Only the implementation code is needed.
MRM-730,wsmoak,Wendy Smoak,2008-03-10T22:33:30.01Z,2008-03-10T22:33:30.01Z,"This would be a good thing to add, it comes up on users@maven occasionally."
MRM-730,joakime,Joakim Erdfelt,2008-03-11T10:01:37.415Z,2008-03-11T10:01:37.415Z,"See post in archiva-dev titled ""WIP/POC archiva-jarinfo"" as a potential solution.

http://mail-archives.apache.org/mod_mbox/maven-archiva-dev/200803.mbox/%3c47D6099D.5040502@erdfelt.com%3e"
MRM-730,oching,Maria Odea Ching,2008-07-06T21:27:19.06Z,2008-07-06T21:27:19.06Z,"I'll implement this feature for now using the consumers, we can just switch over to archiva-jarinfo later if we decide to use it instead :)"
MRM-730,oching,Maria Odea Ching,2008-07-08T06:20:51.594Z,2008-07-08T06:20:51.594Z,"Fixed in trunk -r674740 and -r674768.

Fix includes:
- used bcel to read the .class files
- index classnames (packagename already included here) and methods that are public
- added tests
- search bytecode index if not found in filecontent index (general search)

This would also be included in the advanced search.."
MRM-747,wsmoak,Wendy Smoak,2008-03-21T19:28:18.289Z,2008-03-21T19:28:18.289Z,"It should probably default to _not_ overwriting releases, however it should be configurable.  (And we need a way to delete artifacts, since mistakes will happen.)"
MRM-747,schumnana,Alexandre Navarro,2008-03-22T08:58:06.647Z,2008-03-22T08:58:06.647Z,"I think you might watch the rights of the file.

If you deploy a versioned jar not already deployed, the new file must have  the readonly right.
If you redeploy a versioned jar already deployed and the file has the readonly right, you must throw an error.
If you redeploy a versioned jar already deployed and the file has the read-write right, you must overwrite the file.

The change of right file might be first manually, after you can add a page in archiva to change the right.

Another way to solve the problem is to manage user rights directly in webdav. Nevertheless, the wagon plugin does not take care of the user rights. I posted a bug on wagon http://jira.codehaus.org/browse/WAGON-102 but I have no news on it.
"
MRM-747,mathus.b@mipih.fr,Baptiste MATHUS,2008-03-28T02:16:40.392Z,2008-03-28T02:16:40.392Z,"The feature request in maven-deploy-plugin could render this bug less urgent:be able to fail if a released artifact is already present in the repository. And as said in the maven-users ML, this feature has already been added: http://www.nabble.com/-deploy-plugin--Abort-deploy-when-a-target-is-present-to16329568s177.html

Cheers."
MRM-747,jameswdumay,James William Dumay,2008-05-08T01:42:22.276Z,2008-05-08T01:42:22.276Z,Moving to 1.1.x
MRM-747,wsmoak,Wendy Smoak,2008-10-30T10:31:14.973Z,2008-10-30T10:31:14.973Z,"if we're going to prevent artifacts from being overwritten, we need to make it easier to delete them -- MRM-913"
MRM-747,axismundi,Marc Lustig,2009-10-08T08:59:39.242Z,2009-10-08T08:59:39.242Z,"This is my patch that prevents deploying release-artifacts which already exist in the release-repository.
Thanks to Deng for pointing me in the right direction.

The following files have been changed:
- class class org.apache.maven.archiva.webdav.ArchivaDavResourceFactory in archiva-modules/archiva-web/archiva-webdav/src/main/java

The following files have been added:
- class org.apache.maven.archiva.webdav.ReleaseArtifactAlreadyExistsException in archiva-modules/archiva-web/archiva-webdav/src/main/java

In case
- a jar-file is sent  AND
- the artifact-path does not contain the string ""SNAPSHOT"" AND
- the target-repo is enabled for release-artifacts 
a check is commenced verifying if that artifact already exists.

In case the artifact already exists, the ReleaseArtifactAlreadyExistsException is thrown to the calling method and converted to DavException with HTTP return-code SC_CONFLICT (HTTP 409).

I have tested that with ""real"" repos, not with repo-groups. But since repo-groups cannot be written to, I suppose we won't run into issues there.
The unit-tests are running fine."
MRM-747,axismundi,Marc Lustig,2009-10-08T09:01:47.528Z,2009-10-08T09:01:47.528Z,files
MRM-747,brettporter,Brett Porter,2009-10-08T20:07:29.705Z,2009-10-08T20:07:29.705Z,"Thanks Marc!

Would it be possible to submit this by doing 'svn diff >MRM-747.diff' (if the exception is a new file, you will need to svn add it first). This makes it easier to apply, particularly if we are working from different revisions.

Also, if you can think of an automated test to add to verify the functionality that'd be helpful in getting it applied quickly."
MRM-747,axismundi,Marc Lustig,2009-10-09T01:46:05.169Z,2009-10-09T01:46:05.169Z,"Without commit-rights, how could I svn add the file?
I strongly promote unit-test coverage. But for this I will have to put the logic in a separate method.
Let me see if I can do it today."
MRM-747,axismundi,Marc Lustig,2009-10-09T07:04:11.569Z,2009-10-09T07:04:11.569Z,"Added semi-integration test-case in RepositoryServletDeployTest.
All tests have passed.

i have added the new file to the SVN working copy and created the diff (see attachment) based on archiva-webdav module root.
Note that most of the diff is caused by SVN metadata.
Also, you can ignore the pom.xml diff.
It would be beneficial if this gets released with v. 1.2.3. 
thanks."
MRM-747,axismundi,Marc Lustig,2009-10-09T07:05:30.891Z,2009-10-09T07:05:30.891Z,patch based on SVN working copy.
MRM-747,axismundi,Marc Lustig,2009-10-10T14:13:26.162Z,2009-10-10T14:13:26.162Z,"I forgot to mention the patch is against the 1.2.2 tag.
If you need it, I can create the patch against trunk."
MRM-747,oching,Maria Odea Ching,2009-10-12T04:35:30.632Z,2009-10-12T04:35:30.632Z,"Hi Marc, it would be better if the patch is against trunk so it's easier to apply. There have been a number of changes in trunk since 1.2.2 so the sources might no longer be updated. Thanks! :)"
MRM-747,oching,Maria Odea Ching,2009-10-12T04:45:38.656Z,2009-10-12T04:45:38.656Z,"Btw, could you use 'svn diff' instead of 'diff' to generate the patch? For new files, I think you could just bundle them into a zip file and comment here about where they should be placed. Thanks again Marc!"
MRM-747,axismundi,Marc Lustig,2009-10-12T05:11:21.077Z,2009-10-12T05:11:21.077Z,"that'd be a bit messy as the patch is based on 1.2.2 tag. So a diff against trunk would not only reveal the patch, but also all other differences between 1.2.2 and current trunk.

Ok, to make life easier for you I have checked out trunk, added the patch there, and create the new diff.
I could not run the tests thou, due to this error:

[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).
Project ID: null:archiva-webdav:jar:null


But since there was no conflict in the two files that changed, I suppose compilation as well as the tests will run fine."
MRM-747,axismundi,Marc Lustig,2009-10-12T05:17:24.406Z,2009-10-12T05:17:24.406Z,Here as you wish the svn diff.  This is much easier to work with of course.
MRM-747,oching,Maria Odea Ching,2009-10-12T23:10:38.985Z,2009-10-12T23:10:38.985Z,"Hi Marc, I reviewed and applied your patch locally and it works nicely :) I have a concern regarding the following line in the patch though as it only limits the blocking of re-deployment of released artifacts to ""jar"" files:
{code}
+            		if (StringUtils.equals(""jar"", artifact.getType()) &&
+            				artifact.getVersion().indexOf(""SNAPSHOT"")== -1	)
{code}

I think it shouldn't be limited to jar artifacts only. Was there a reason behind this that I might have missed?"
MRM-747,axismundi,Marc Lustig,2009-10-13T02:00:52.696Z,2009-10-13T02:00:52.696Z,"hi Deng,

my idea was that xml-metadata etc. might be necessary to change even without updating the actual artifact.
But this was just a suspicion.
You are certainly more familiar with Archiva's workflow - so please go ahead and change it as you think its appropriate.

The first if-statement can also be changed I guess from

// check if artifact is a jar and verify if target repo is enabled for releases
// we suppose that release-artifacts can deployed only to repos enabled for releases
if (resourcePath.endsWith(""jar"") && 
            			managedRepository.getRepository().isReleases()) {

to 
// we suppose that release-artifacts can deployed only to repos enabled for releases
if (managedRepository.getRepository().isReleases()) {
"
MRM-747,oching,Maria Odea Ching,2009-10-13T05:27:43.92Z,2009-10-13T05:27:43.92Z,"Yeah, the metadata and support files (checksums, gpg signatures, etc.) should be allowed to continue in the deployment. Maven would not continue deploying them if the artifact deployment failed. I updated the patch and added a check for this instead of specific to jar files. I also added tests for deploying metadata and checksum files. I'll apply and commit the fix shortly. Thanks again Marc!"
MRM-747,oching,Maria Odea Ching,2009-10-13T05:38:23.34Z,2009-10-13T05:38:23.34Z,"Patch applied to trunk [-r824677|http://svn.apache.org/viewvc?view=rev&revision=824677] with some modifications:
* update checking for artifact types that will be blocked
* add tests for deploying metadata and support file
* applied codestyle

Thank you Marc :)"
MRM-747,oching,Maria Odea Ching,2009-10-15T04:44:53.184Z,2009-10-15T04:44:53.184Z,"Additional changes based on the discussion [here|http://www.nabble.com/Re%3A-svn-commit%3A-r824677---in--archiva-trunk-archiva-modules-archiva-web-archiva-webdav-src%3A-main-java-org-apache-maven-archiva-webdav--test-java-org-apache-maven-archiva-webdav--test-resources--td25872304.html] were committed to trunk [-r825449|http://svn.apache.org/viewvc?view=revision&revision=825449] with the following changes:
* moved check for metadata support files to RepositoryRequest and added tests
* throw DavException error 409 immediately for released artifacts intead of a ReleaseArtifactAlreadyExistsException"
MRM-747,oching,Maria Odea Ching,2009-10-15T04:47:17.446Z,2009-10-15T04:47:17.446Z,"What still needs to be done here:
* make blocking of released artifacts configurable per repository 
* implement functionality to web upload form"
MRM-747,oching,Maria Odea Ching,2009-11-13T03:24:21.487Z,2009-11-13T03:24:21.487Z,Add selenium test for this feature once this is implemented to the web upload form.
MRM-747,oching,Maria Odea Ching,2009-11-22T03:31:00.899Z,2009-11-22T03:31:00.899Z,"This feature is now configurable per repository based on the changes committed to trunk [-r883051|http://svn.apache.org/viewvc?revision=883051&view=revision]:
* added new field 'blockRedeployments' in repository configuration in archiva config file
* added test"
MRM-747,oching,Maria Odea Ching,2009-11-22T04:53:17.797Z,2009-11-22T04:53:17.797Z,Functionality applied to web upload form in trunk [-r883057|http://svn.apache.org/viewvc?revision=883057&view=revision]
MRM-747,oching,Maria Odea Ching,2009-11-22T05:26:57.205Z,2009-11-22T05:26:57.205Z,Added selenium test in trunk [-r883059|http://svn.apache.org/viewvc?revision=883059&view=revision]
MRM-747,oching,Maria Odea Ching,2009-11-22T05:44:21.708Z,2009-11-22T05:44:21.708Z,Documentation of this feature committed to trunk [-r883060|http://svn.apache.org/viewvc?revision=883060&view=revision].
MRM-772,jchaffee,Jason Chaffee,2008-04-08T18:06:04.569Z,2008-04-08T18:06:04.569Z,"For example, here is the latest artifact on the file system:

	test-1.0-2008407.211352-3.jar

here is the metatdata file:

	<metadata>
	  <groupId>chaffee.jason.test</groupId>
	  <artifactId>test</artifactId>
	  <version>1.0-SNAPSHOT</version>
	  <versioning>
	    <snapshot>
	      <buildNumber>5</buildNumber>
	      <timestamp>20080407.212453</timestamp>
          </snapshot>
          <lastUpdated>20080407212454</lastUpdated>
        </versioning>
      </metadata>
"
MRM-772,jchaffee,Jason Chaffee,2008-04-08T18:28:02.58Z,2008-04-08T18:28:02.58Z,"If I ""touch"" the artifacts that remain on the file system after deleting, then it will update the metadata file correctly.

However, it would be better if it updates this regardless of the other artifacts being touched because we would prefer that the file system timestamp be the same as the actual deploy timestamp and touching would change this and make it a little more confusing for someone looking at the file system."
MRM-772,jameswdumay,James William Dumay,2008-05-08T02:22:39.583Z,2008-05-08T02:22:39.583Z,Moving to 1.2
MRM-772,jameswdumay,James William Dumay,2009-02-16T00:40:48.602Z,2009-02-16T00:40:48.602Z,"Hi Jason,
Are you able to try Archiva 1.2m1? I rewrote the metadata updater so it shouldnt have strange quirks like this. Let me know how it goes.

James"
MRM-772,brettporter,Brett Porter,2009-03-08T16:45:06.326Z,2009-03-08T16:45:06.326Z,confirmed fixed by MRM-907
MRM-740,wsmoak,Wendy Smoak,2008-03-25T09:55:12.251Z,2008-03-25T09:55:12.251Z,Consider contributing the general information to:  http://maven.apache.org/repository-management.html
MRM-769,drewpuppy,Andrew Heald,2008-04-08T06:07:47.361Z,2008-04-08T06:07:47.361Z,"I've cloned the original issue to reopen it, at Brett's suggestion. I don't have edit rights, so note that ....

The environment here is:
Server: Archiva 1.0.2 release candidate, standalone installation.
Client: Maven 2.0.8, JRockit R27.3.1 jdk1.5.0_11, Windows Server 2003 R2

This webdav behaviour occurs on differing artifact uploads, be they JARs, POMs or whatever. It is not a metadata thing."
MRM-769,brettporter,Brett Porter,2008-04-08T08:59:00.279Z,2008-04-08T08:59:00.279Z,are there any errors in the server logs?
MRM-769,drewpuppy,Andrew Heald,2008-04-08T09:44:24.506Z,2008-04-08T09:44:24.506Z,"Not that I can see. Some more info, and let me know if there's more debug I can switch on.

Here's what the Maven build puts out:

08-Apr-2008 10:53:54  	[INFO] [deploy:deploy]
08-Apr-2008 10:53:54 	altDeploymentRepository = null
08-Apr-2008 10:53:54 	[INFO] Retrieving previous build number from catlin
08-Apr-2008 10:53:54 	Uploading: http://maven.catlin.com:33030/&#8203;archiva/&#8203;repository/&#8203;catlin/&#8203;com/&#8203;catlin/ &#8203;InsuranceLedgerCore/&#8203;8.04-SNAPSHOT/&#8203; InsuranceLedgerCore-8.04-SNAPSHOT.jar
08-Apr-2008 10:53:54 	[INFO] Retrieving previous metadata from catlin
08-Apr-2008 10:53:55 	[INFO] Uploading repository metadata for: 'artifact com.catlin:InsuranceLedgerCore'
08-Apr-2008 10:53:55 	[INFO] Retrieving previous metadata from catlin
08-Apr-2008 10:53:55 	[INFO] Uploading project information for InsuranceLedgerCore 8.04-SNAPSHOT
08-Apr-2008 10:53:55 	[INFO] ------------------------------------------------------------------------
08-Apr-2008 10:53:55 	[ERROR] BUILD ERROR
08-Apr-2008 10:53:55 	[INFO] ------------------------------------------------------------------------
08-Apr-2008 10:53:55 	[INFO] Error installing artifact's metadata: Error while deploying metadata: Failed to transfer file: http://maven.catlin.com:33030/&#8203;archiva/&#8203;repository/&#8203;catlin/&#8203;com/&#8203;catlin/ &#8203;InsuranceLedgerCore/&#8203;8.04-SNAPSHOT/&#8203; InsuranceLedgerCore-8.04-SNAPSHOT.pom. Return code is: 507 Insufficient Storage

And in archiva.log I see:

2008-04-08 10:53:53,844 [SocketListener0-49] INFO  org.apache.archiva.AuditLog  - catlin build_dev 10.1.0.121 ""/com/catlin/InsuranceLedgerCore/8.04-SNAPSHOT/maven-metadata.xml"" ""Modify File (proxied)""
2008-04-08 10:53:54,141 [SocketListener0-49] INFO  org.apache.archiva.AuditLog  - catlin build_dev 10.1.0.121 ""/com/catlin/InsuranceLedgerCore/8.04-SNAPSHOT/InsuranceLedgerCore-8.04-SNAPSHOT.jar"" ""Modify File""
2008-04-08 10:53:54,406 [SocketListener0-49] INFO  org.apache.archiva.AuditLog  - catlin build_dev 10.1.0.121 ""/com/catlin/InsuranceLedgerCore/8.04-SNAPSHOT/InsuranceLedgerCore-8.04-SNAPSHOT.jar.md5"" ""Modify File""
2008-04-08 10:53:54,656 [SocketListener0-49] INFO  org.apache.archiva.AuditLog  - catlin build_dev 10.1.0.121 ""/com/catlin/InsuranceLedgerCore/8.04-SNAPSHOT/InsuranceLedgerCore-8.04-SNAPSHOT.jar.sha1"" ""Modify File""
2008-04-08 10:53:54,672 [SocketListener0-49] INFO  org.apache.archiva.AuditLog  - catlin build_dev 10.1.0.121 ""/com/catlin/InsuranceLedgerCore/maven-metadata.xml"" ""Modify File (proxied)""
2008-04-08 10:53:54,906 [SocketListener0-49] INFO  org.apache.archiva.AuditLog  - catlin build_dev 10.1.0.121 ""/com/catlin/InsuranceLedgerCore/maven-metadata.xml"" ""Modify File""
2008-04-08 10:53:55,125 [SocketListener0-49] INFO  org.apache.archiva.AuditLog  - catlin build_dev 10.1.0.121 ""/com/catlin/InsuranceLedgerCore/maven-metadata.xml.md5"" ""Modify File""
2008-04-08 10:53:55,344 [SocketListener0-49] INFO  org.apache.archiva.AuditLog  - catlin build_dev 10.1.0.121 ""/com/catlin/InsuranceLedgerCore/maven-metadata.xml.sha1"" ""Modify File""
2008-04-08 10:53:55,625 [SocketListener0-49] INFO  org.apache.archiva.AuditLog  - catlin build_dev 10.1.0.121 ""/com/catlin/InsuranceLedgerCore/8.04-SNAPSHOT/InsuranceLedgerCore-8.04-SNAPSHOT.pom"" ""Modify File""

The audit.log file adds nothing else to the above.

On a probably unrelated note, I do see errors from the previous day that look like this:

2008-04-07 18:00:03,845 [pool-1-thread-1] ERROR org.apache.maven.archiva.consumers.DatabaseUnprocessedArtifactConsumer:update-db-project  - Unable to process model F:\var\data\archiva\data\repositories\catlin\com\catlin\CatFlap\CatFlapGatewayCore\2.4-SNAPSHOT\CatFlapGatewayCore-2.4-SNAPSHOT.pom due to : javax.jdo.JDODataStoreException : Insert request failed: INSERT INTO SA.ARCHIVA_PROJECT (RELOCATION_ARCHIVA_VERSIONED_REFERENCE_ID_OID,URL,DESCRIPTION,""NAME"",ORIGIN,CI_MANAGEMENT_URL_OID,ISSUE_MANAGEMENT_URL_OID,WHEN_INDEXED,ORGANIZATION_NAME_OID,SCM_ARCHIVA_SCM_ID_OID,PARENT_PROJECT_ARCHIVA_VERSIONED_REFERENCE_ID_OID,PACKAGING,ARTIFACT_ID,GROUP_ID,VERSION) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
javax.jdo.JDODataStoreException: Insert request failed: INSERT INTO SA.ARCHIVA_PROJECT (RELOCATION_ARCHIVA_VERSIONED_REFERENCE_ID_OID,URL,DESCRIPTION,""NAME"",ORIGIN,CI_MANAGEMENT_URL_OID,ISSUE_MANAGEMENT_URL_OID,WHEN_INDEXED,ORGANIZATION_NAME_OID,SCM_ARCHIVA_SCM_ID_OID,PARENT_PROJECT_ARCHIVA_VERSIONED_REFERENCE_ID_OID,PACKAGING,ARTIFACT_ID,GROUP_ID,VERSION) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:455)
	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
	at org.jpox.store.StoreManager.insert(StoreManager.java:938)
	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1206)
	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1277)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:192)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:165)
	at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
	at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:170)
	at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:52)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:154)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:88)
	at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:68)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)
	at java.lang.Thread.run(Thread.java:595)
NestedThrowablesStackTrace:
ERROR 23505: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'ARCHIVA_PROJECT_PK' defined on 'ARCHIVA_PROJECT'.
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
	at org.apache.derby.impl.sql.execute.IndexChanger.insertAndCheckDups(Unknown Source)
	at org.apache.derby.impl.sql.execute.IndexChanger.doInsert(Unknown Source)
	at org.apache.derby.impl.sql.execute.IndexChanger.insert(Unknown Source)
	at org.apache.derby.impl.sql.execute.IndexSetChanger.insert(Unknown Source)
	at org.apache.derby.impl.sql.execute.RowChangerImpl.insertRow(Unknown Source)
	at org.apache.derby.impl.sql.execute.InsertResultSet.normalInsertCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.InsertResultSet.open(Unknown Source)
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(Unknown Source)
	at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:101)
	at org.jpox.store.rdbms.RDBMSManager.executeStatementUpdate(RDBMSManager.java:575)
	at org.jpox.store.rdbms.request.InsertRequest.execute(InsertRequest.java:328)
	at org.jpox.store.rdbms.table.ClassTable.insert(ClassTable.java:2519)
	at org.jpox.store.StoreManager.insert(StoreManager.java:938)
	at org.jpox.state.StateManagerImpl.internalMakePersistent(StateManagerImpl.java:3667)
	at org.jpox.state.StateManagerImpl.makePersistent(StateManagerImpl.java:3646)
	at org.jpox.AbstractPersistenceManager.internalMakePersistent(AbstractPersistenceManager.java:1206)
	at org.jpox.AbstractPersistenceManager.makePersistent(AbstractPersistenceManager.java:1277)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:192)
	at org.apache.maven.archiva.database.jdo.JdoAccess.saveObject(JdoAccess.java:165)
	at org.apache.maven.archiva.database.jdo.JdoProjectModelDAO.saveProjectModel(JdoProjectModelDAO.java:86)
	at org.apache.maven.archiva.consumers.database.ProjectModelToDatabaseConsumer.processArchivaArtifact(ProjectModelToDatabaseConsumer.java:170)
	at org.apache.maven.archiva.database.updater.ProcessArchivaArtifactClosure.execute(ProcessArchivaArtifactClosure.java:52)
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateUnprocessed(JdoDatabaseUpdater.java:154)
	at org.apache.maven.archiva.database.updater.JdoDatabaseUpdater.updateAllUnprocessed(JdoDatabaseUpdater.java:88)
	at org.apache.maven.archiva.scheduled.executors.ArchivaDatabaseUpdateTaskExecutor.executeTask(ArchivaDatabaseUpdateTaskExecutor.java:68)
	at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)
	at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
	at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)
	at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)
	at java.lang.Thread.run(Thread.java:595)"
MRM-769,drewpuppy,Andrew Heald,2008-04-08T09:47:11.006Z,2008-04-08T09:47:11.006Z,"I'm curious about the two log lines:

2008-04-08 10:53:54,672 [SocketListener0-49] INFO org.apache.archiva.AuditLog - catlin build_dev 10.1.0.121 ""/com/catlin/InsuranceLedgerCore/maven-metadata.xml"" ""Modify File (proxied)""
2008-04-08 10:53:54,906 [SocketListener0-49] INFO org.apache.archiva.AuditLog - catlin build_dev 10.1.0.121 ""/com/catlin/InsuranceLedgerCore/maven-metadata.xml"" ""Modify File""

Why the ""proxied"" bit? This file is in our Archiva repo and should not involve our proxy."
MRM-769,brettporter,Brett Porter,2008-04-08T09:51:57.07Z,2008-04-08T09:51:57.07Z,"can you try dav:http:// for the upload instead of just http:// ?


"
MRM-769,drewpuppy,Andrew Heald,2008-04-08T09:53:54.071Z,2008-04-08T09:53:54.071Z,"We do. From our ultimate parent POM:

	<distributionManagement>
		<repository>
			<id>catlin</id>
			<name>Catlin Generated Releases</name>
			<url>dav:http://maven.catlin.com:33030/archiva/repository/catlin</url>
		</repository>
		<snapshotRepository>
			<id>catlin</id>
			<name>Catlin Generated Snapshots</name>
			<url>dav:http://maven.catlin.com:33030/archiva/repository/catlin</url>
			<uniqueVersion>false</uniqueVersion>
		</snapshotRepository>
	</distributionManagement>"
MRM-769,drewpuppy,Andrew Heald,2008-04-18T06:37:51.333Z,2008-04-18T06:37:51.333Z,"I've had to implement a workaround that effectively ends up using Archiva only as a proxy.

The original Archiva repo is now accessed through Apache's mod_dav. I've deleted my original Archiva repo and recreated it in the same name, but with a different repo directory, and configured it to proxy the now mod_dav managed repo.

All builds fine so far.

I note that there's discussion about replacing the WebDAV module in Archiva and I thoroughly endorse this.   :-)"
MRM-769,brettporter,Brett Porter,2008-04-18T22:17:29.057Z,2008-04-18T22:17:29.057Z,are you able to try Archiva trunk (any revision after today) to see if it resolves your issue?
MRM-769,drewpuppy,Andrew Heald,2008-04-21T04:07:51.782Z,2008-04-21T04:07:51.782Z,"Sadly, I can't mess with the builds involved in this problem without disrupting my team.

If I'm able to I'll reproduce this on a branch and in a VM, but this might take quite some time if it happens at all. I'll do my best."
MRM-769,aheritier,Arnaud HERITIER,2008-05-20T07:36:28.759Z,2008-05-20T07:36:28.759Z,"I have the same problem . I hope that MRM-781 can help to solve it.
I don't see how to reproduce it in a test environment. 
I have it more and more often but it is certainly related to the number of build in our continuous integration server which is growing every day.
There is no error in logs."
MRM-769,brettporter,Brett Porter,2008-05-20T10:40:17.066Z,2008-05-20T10:40:17.066Z,"Arnaud - I am quite hopeful it will, but we'll need someone to test the new version and confirm.

Also, you might try the reverse of my suggestion - using http:// instead of dav:http:// ? Or perhaps that is already happening too and it applies to both scenarios. "
MRM-769,aheritier,Arnaud HERITIER,2008-05-20T10:56:32.099Z,2008-05-20T10:56:32.099Z,"I made the change for new projects and those ones which wanted to update their settings. 
They are now deploying with http:// .... . 
I try to check tomorrow if this error occurs only for projects having always dav:http://"
MRM-769,jameswdumay,James William Dumay,2008-06-20T23:26:46.754Z,2008-06-20T23:26:46.754Z,"Arnaud,
Are you able to build trunk and test that this is still an issue for you?

Thanks
James"
MRM-769,jameswdumay,James William Dumay,2008-07-01T19:30:46.842Z,2008-07-01T19:30:46.842Z,Work done in MRM-781has superseded this issue.
MRM-773,oching,Maria Odea Ching,2008-04-15T00:51:07.481Z,2008-04-15T00:51:07.481Z,"Also, clicking the rss feed icon in the repositories page results to a 404 error if the rss feed file does not exist yet."
MRM-773,oching,Maria Odea Ching,2008-04-18T02:29:37.785Z,2008-04-18T02:29:37.785Z,"Security:
- if a user who is subscribed to a feed has been stripped of the necessary permissions or has been deleted, the user should no longer be able to receive updates from the feed"
MRM-773,oching,Maria Odea Ching,2008-04-18T02:31:25.164Z,2008-04-18T02:31:25.164Z,"Also, take into account  additions via upload (which triggers the consumers, just not the full  scan) as specified in the thread referenced above."
MRM-773,oching,Maria Odea Ching,2008-04-27T09:08:40.025Z,2008-04-27T09:08:40.025Z,"Fixes in archiva-trunk -r651956:
- get the contents of the feed from the database
- updated tests
- generate the feed without writing to a file

What still needs to be done:
- rss feed servlet that would serve the feed requests
- maintain up to which date will be included in the generated feed
- security "
MRM-773,oching,Maria Odea Ching,2008-04-27T21:21:25.496Z,2008-04-27T21:21:25.496Z,"Other fixes committed in trunk (-r652043) that were left out from previous commit:
- the query/constraints for getting the versions of a specific artifact from the db
- added the 'whenGathered' field in ArchivaArtifactModel
- added the 'whenGathered' field in beginScan(..) method of RepositoryContentConsumer interface
- updated all the implementing consumers for the change in the interface"
MRM-773,oching,Maria Odea Ching,2008-04-29T21:22:45.414Z,2008-04-29T21:22:45.414Z,"Fixes in archiva-trunk -r652230:
- added the servlet that handles the rss feed requests
- created tests for the servlet
- updated jsp files for the new rss feed urls
- removed thrown exception in getSpringConfigLocation() that is being overridden in PlexusInStringTestCase"
MRM-773,oching,Maria Odea Ching,2008-05-02T21:41:30.472Z,2008-05-02T21:41:30.472Z,"Fixes in archiva-trunk -r652981:
- added basic http authentication in rss feed servlet
- added commons-codec as dependency (used for decoding username and password)
- updated tests"
MRM-773,oching,Maria Odea Ching,2008-05-05T01:37:18.844Z,2008-05-05T01:37:18.844Z,"Fixes in archiva-trunk -r653303:
- set a limit for the artifacts to be included in the feed (new artifacts in repo)
- created test for ArtifactsByRepositoryConstraint

The limit is only for the new artifacts in the repository feed, since the per artifact feed content would not be as many as the new artifacts in the repo feed. The constraint for the query would be the artifacts that were gathered within (the current date of the request - 100 days) and (the current date of the request)."
MRM-773,oching,Maria Odea Ching,2008-05-07T01:39:30.704Z,2008-05-07T01:39:30.704Z,Only thing left to do here is to document it :-)
MRM-773,oching,Maria Odea Ching,2008-05-07T01:41:18.892Z,2008-05-07T01:41:18.892Z,"The authentication part uses http basic authentication. I tested this with the RSSOwlReader. 
Should we also cover http digest authentication?"
MRM-773,oching,Maria Odea Ching,2008-05-07T02:52:48.077Z,2008-05-07T02:52:48.077Z,"Note to myself: 

- test authentication if 'guest' account is enabled for the repo (i don't think this is handled in the feed servlet)"
MRM-773,brettporter,Brett Porter,2008-05-07T03:14:45.54Z,2008-05-07T03:14:45.54Z,"I gave this a try. In the browser, there were a couple of problems:
- I hit a 401 immediately. It should have challenged me for the password first?
- I think it also should have diverted to my netnewswire app - maybe the content-type needs to be sent too?
- it actually should have skipped these - as you said, it should work with the guest account. 

It should be able to share most of this logic with the RepositoryServlet I think."
MRM-773,oching,Maria Odea Ching,2008-05-10T03:35:30.8Z,2008-05-10T03:35:30.8Z,"Changes in -r655027:
- move servlet authentication (RepoServlet and RssFeedServlet) to archiva-security"
MRM-773,oching,Maria Odea Ching,2008-05-11T02:34:11.277Z,2008-05-11T02:34:11.277Z,"Changes in trunk -r655274:
- set response header to authenticate if repository is secured"
MRM-773,oching,Maria Odea Ching,2008-05-11T02:36:28.008Z,2008-05-11T02:36:28.008Z,I think everything is done here. I'll leave this open for now until the feature has been tested out by other people aside from me.
MRM-773,brettporter,Brett Porter,2008-05-11T22:50:51.654Z,2008-05-11T22:50:51.654Z,"It looks like it doesn't automatically create the database field if you are upgrading from 1.0.2 (see exception below).

We might need to add a configuration to jpox to have it automatically create new fields.

HTTP ERROR: 500

Error executing JDOQL query ""SELECT 'org.apache.maven.archiva.model.ArchivaArtifactModel' AS JPOXMETADATA,THIS.ARTIFACT_ID,THIS.CHECKSUM_MD5,THIS.CHECKSUM_SHA1,THIS.CLASSIFIER,THIS.GROUP_ID,THIS.LAST_MODIFIED,THIS.ORIGIN,THIS.PLATFORM,THIS.REPOSITORY_ID,THIS.FILE_SIZE,THIS.SNAPSHOT_VERSION,THIS.FILE_TYPE,THIS.VERSION,THIS.WHEN_GATHERED AS JPOXORDER0,THIS.WHEN_INDEXED,THIS.WHEN_PROCESSED FROM SA.ARCHIVA_ARTIFACT THIS WHERE THIS.REPOSITORY_ID = ? AND THIS.WHEN_GATHERED >= ? ORDER BY JPOXORDER0"" : Column 'THIS.WHEN_GATHERED' is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list. If this is a CREATE or ALTER TABLE  statement then 'THIS.WHEN_GATHERED' is not a column in the target table..
RequestURI=/archiva/rss/rss_feeds


"
MRM-773,oching,Maria Odea Ching,2008-05-12T01:58:10.601Z,2008-05-12T01:58:10.601Z,"Added autoCreateColumn property in application.xml. 
Thanks! :-)"
MRM-773,brettporter,Brett Porter,2008-05-14T01:57:40.353Z,2008-05-14T01:57:40.353Z,"because of the timestamps, it shows as updated every time you get it, even if it hasn't changed. I believe the timestamp should just be that of the newest artifact. Also, I think the subject should be just the day, not the time - since the item is meant to be those for that day."
MRM-773,brettporter,Brett Porter,2008-05-14T03:24:01.148Z,2008-05-14T03:24:01.148Z,"I also got an NPE on the per-version RSS:
http://localhost:7777/archiva/rss/rss_feeds?groupId=org.apache.maven.scm&artifactId=maven-scm-api

java.lang.NullPointerException
	at org.apache.archiva.rss.processor.AbstractArtifactsRssFeedProcessor.processData(AbstractArtifactsRssFeedProcessor.java:50)
	at org.apache.archiva.rss.processor.NewVersionsOfArtifactRssFeedProcessor.processNewVersionsOfArtifact(NewVersionsOfArtifactRssFeedProcessor.java:90)
	at org.apache.archiva.rss.processor.NewVersionsOfArtifactRssFeedProcessor.process(NewVersionsOfArtifactRssFeedProcessor.java:77)
	at org.apache.maven.archiva.web.rss.RssFeedServlet.doGet(RssFeedServlet.java:151)

"
MRM-773,oching,Maria Odea Ching,2008-05-15T01:24:19.026Z,2008-05-15T01:24:19.026Z,"Thanks for the QA Brett :-)

Fixes in trunk -r656516:
-fix the publish date of the rss entries
-remove if condition in RepositoryContentConsumers.getStartDate()

I've yet to check the NPE you got..

"
MRM-773,oching,Maria Odea Ching,2008-05-15T03:47:49.921Z,2008-05-15T03:47:49.921Z,"Fixed NPE in trunk -r656552:
- query only versions of artifacts with whenGathered != null in ArtifactVersionsConstraint
- created test for ArtifactVersionsConstraint"
MRM-707,wsmoak,Wendy Smoak,2008-02-20T08:12:31.301Z,2008-02-20T08:12:31.301Z,"I'd suggest taking these questions (individually) to the user list, and then summarizing the answers here.  (Preferably in the form of a patch to the docs!)"
MRM-707,brettporter,Brett Porter,2011-09-12T09:37:58.531Z,2011-09-12T09:37:58.531Z,covered by other issues
MRM-726,jahlborn,james,2008-03-03T15:03:31.958Z,2008-03-03T15:03:31.958Z,"I'm not sure if this problem is related to this exception I'm getting in the logs:

archiva.log.2008-03-01:46980222 [pool-1-thread-1] WARN  org.apache.maven.archiva.consumers.DatabaseUnprocessedArtifactConsumer:update-db-project  - File hmsCommon-jwrap-20070308.050344.pom has an invalid project model [groupId:null|artifactId:null|version:1.0.3|packaging:null]: The model artifactId [null] does not match the artifactId portion of the filename: hmsCommon-jwrap
"
MRM-726,jahlborn,james,2008-03-25T14:43:19.423Z,2008-03-25T14:43:19.423Z,"Actually, it doesn't seem like even normal snapshots are being cleaned now (with version 640793 from the 1.0.2 branch).

INFO   | jvm 1    | 2008/03/25 15:34:16 | 2008-03-25 15:34:16,029 [pool-1-thread
-1] WARN  org.apache.maven.archiva.consumers.DatabaseUnprocessedArtifactConsumer
:update-db-project  - File scorpio-common-SNAPSHOT.pom has an invalid project mo
del [groupId:scorpio|artifactId:scorpio-common|version:1.1.5-SNAPSHOT|packaging:
null]; The model version [1.1.5-SNAPSHOT] does not match the version portion of
the filename: SNAPSHOT
"
MRM-751,wsmoak,Wendy Smoak,2008-06-06T13:22:44.851Z,2008-06-06T13:22:44.851Z,"Deng, can you add a description to the issue?  I looked for any discussion to summarize, and didn't see anything.  I'm sure it's straightforward, just seems odd to see a new feature in progress with no information about it."
MRM-751,oching,Maria Odea Ching,2008-06-08T21:36:51.85Z,2008-06-08T21:36:51.85Z,"I think this was mentioned during the migration of the plexus runtime to jetty in IRC. It's basically just allowing db connection pooling support in the jetty bundle. 

Here's something from the IRC logs..
Mar 27 10:54:19 <deng>	brett, i think the derby.system.home property is putting the database dir inside the logs :(
Mar 27 10:54:51 <brett>	hehe
Mar 27 10:54:56 <brett>	oops
Mar 27 10:55:11 <deng>	hehe
Mar 27 10:55:24 <brett>	make it ../data/databases then?
Mar 27 10:55:40 <deng>	ok :)
Mar 27 10:56:40 <deng>	thanks
Mar 27 11:03:56 <brett>	deng: while you are looking at the databases, did I mention connection pooling?
Mar 27 11:07:29 <deng>	brett, not yet
Mar 27 11:07:41 <deng>	should we configure that by default in the jetty.xml?
Mar 27 11:08:11 <deng>	or just add a how-to to the docs?
Mar 27 11:08:44 <brett>	maybe it can be a new JIRA... I just thought we had it before
Mar 27 11:08:58 <brett>	but I don't think we did :)
Mar 27 11:09:30 <deng>	yeah, i didn't see it before
Mar 27 11:09:52 <brett>	I think commons-dbcp sits behind the naming stuff I was using
Mar 27 11:09:58 <brett>	but I'm not sure if it pools by default
Mar 27 11:10:01 <brett>	no matter :)"
MRM-751,oching,Maria Odea Ching,2008-06-19T22:53:55.662Z,2008-06-19T22:53:55.662Z,"Fixed in trunk -r669774:
- configure jetty to use commons-dbcp for db connection pool
- added commons-dbcp 1.2.1 as dependency"
MRM-709,jameswdumay,James William Dumay,2008-05-08T02:01:49.008Z,2008-05-08T02:01:49.008Z,Move to 1.1.x
MRM-709,olamy,Olivier Lamy (*$^%`),2012-04-03T11:35:59.519Z,2012-04-03T11:35:59.519Z,"SelectorUtils, FileUtils and DirectoryWalker need some work (not a replacement as it)"
MRM-709,olamy,Olivier Lamy (*$^%`),2012-04-03T12:17:27.506Z,2012-04-03T12:17:27.506Z,some need ant library (as p-u is copy/paste of mixed ant and commons-*)
MRM-709,olamy,Olivier Lamy (*$^%`),2012-07-30T09:43:06.002Z,2012-07-30T09:43:06.002Z,partially fixed.
MRM-729,aheritier,Arnaud HERITIER,2008-03-05T09:42:20.489Z,2008-03-05T09:42:20.489Z,"I have the same issue with archiva 1.0.1 (standalone) MySql version 5.0.22, driver jdbc mysql 5.1.5"
MRM-729,aheritier,Arnaud HERITIER,2008-03-05T09:45:36.628Z,2008-03-05T09:45:36.628Z,Wrapper logs
MRM-729,aheritier,Arnaud HERITIER,2008-03-05T10:23:28.515Z,2008-03-05T10:23:28.515Z,The problem seems to be in rednack and no more in archiva itself. Fixing the application.xml for redback like in MRM-227 fixes the issue
MRM-729,wsmoak,Wendy Smoak,2009-03-05T12:03:38.425Z,2009-03-05T12:03:38.425Z,Also mentioned on this blog http://flexandjava.blogspot.com/2009/03/archiva-and-mysql.html
MRM-706,brettporter,Brett Porter,2010-02-23T02:46:32.622Z,2010-02-23T02:46:32.622Z,has existed for some time
MRM-739,brettporter,Brett Porter,2010-02-23T02:48:22.336Z,2010-02-23T02:48:22.336Z,for testing
MRM-739,bcartereau,Benjamin Cartereau,2014-06-26T09:32:28.519Z,2014-06-26T09:32:28.519Z,"Is the ""tar"" file type present in the list of scanned artifacts?
If you go under ""Administration"" - ""Repository Scanning"" you have the list of scanned files types to be added or even removed...
So if not done, you should try to add ""**/*.tar"" in the list.
Eventually you have to force a scan of the repository so that artifacts with this new type are scanned and available through the archiva browse function."
MRM-739,bcartereau,Benjamin Cartereau,2014-06-26T09:33:24.448Z,2014-06-26T09:33:24.448Z,"""tar"" file type added through the Administration interface"
MRM-739,reda-alaoui,Rda Housni Alaoui,2016-05-08T19:11:26.842Z,2016-05-08T19:11:26.842Z,"Hello,

I have the same issue on 1.3.9 on tar.bz2 files.

Is it resolved in newer versions?
IMO, the priority should be increased."
MRM-739,fredrikj,Fredrik Jonson,2017-06-22T13:56:04.343Z,2017-06-22T13:56:04.343Z,"I cannot reproduce this for tar.bz2 files when using Archiva 2.2.3. An artifact with the file suffix and packaging tar.bz2 can be downloaded from archiva both via the web interface and with mvn dependency:get. It used to be a problem for me when using Archiva 1.1.3.

Resolved fixed? Or obsolete?"
MRM-777,oching,Maria Odea Ching,2008-04-13T22:05:22.73Z,2008-04-13T22:05:22.73Z,Fixed after upgrading redback to 1.0.1 (-r647651)
MRM-715,brettporter,Brett Porter,2008-03-02T17:09:02.356Z,2008-03-02T17:09:02.356Z,"the problem still exists after an upgrade to Lucene 2.3.1 - though the line number is different it's functionally the equivalent place.

java.lang.NullPointerException
        at org.apache.lucene.index.IndexModifier.close(IndexModifier.java:576)
        at org.apache.maven.archiva.indexer.lucene.LuceneRepositoryContentIndex.closeQuietly(LuceneRepositoryContentIndex.java:416)
        at org.apache.maven.archiva.indexer.lucene.LuceneRepositoryContentIndex.modifyRecord(LuceneRepositoryContentIndex.java:152)
        at org.apache.maven.archiva.consumers.lucene.IndexContentConsumer.processFile(IndexContentConsumer.java:169)
        at org.apache.maven.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:51)
        at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:117)
        at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:388)
        at org.apache.maven.archiva.repository.scanner.RepositoryContentConsumers.executeConsumers(RepositoryContentConsumers.java:283)
        at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.transferFile(DefaultRepositoryProxyConnectors.java:597)
        at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.fetchFromProxies(DefaultRepositoryProxyConnectors.java:157)
        at org.apache.maven.archiva.web.repository.ProxiedDavServer.applyServerSideRelocation(ProxiedDavServer.java:447)
        at org.apache.maven.archiva.web.repository.ProxiedDavServer.fetchContentFromProxies(ProxiedDavServer.java:354)
        at org.apache.maven.archiva.web.repository.ProxiedDavServer.process(ProxiedDavServer.java:189)
        at org.codehaus.plexus.webdav.servlet.multiplexed.MultiplexedWebDavServlet.service(MultiplexedWebDavServlet.java:119)
        at org.apache.maven.archiva.web.repository.RepositoryServlet.service(RepositoryServlet.java:155)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)"
MRM-715,jameswdumay,James William Dumay,2008-03-02T17:21:28.92Z,2008-03-02T17:21:28.92Z,"I have reported this to the lucene project.

https://issues.apache.org/jira/browse/LUCENE-1199"
MRM-715,brettporter,Brett Porter,2008-03-02T18:52:25.965Z,2008-03-02T18:52:25.965Z,"I've removed the use of IndexModifier - I'll close, but I'm not sure if it will fix it at this point since I can't always reproduce it"
MRM-797,aheritier,Arnaud HERITIER,2008-05-06T07:00:00.286Z,2008-05-06T07:00:00.286Z,A sample of snapshots entries for artifacts already released
MRM-797,aheritier,Arnaud HERITIER,2008-05-06T07:02:04.812Z,2008-05-06T07:02:04.812Z,my snapshots repo configuration
MRM-797,aheritier,Arnaud HERITIER,2008-05-06T07:03:26.075Z,2008-05-06T07:03:26.075Z,My archiva configuration file
MRM-797,jameswdumay,James William Dumay,2008-05-08T01:42:24.308Z,2008-05-08T01:42:24.308Z,Moving to 1.1.x
MRM-797,aheritier,Arnaud HERITIER,2008-05-08T14:39:14.95Z,2008-05-08T14:39:14.95Z,If this feature doesn't work and we can't fix it we could thnk to hide it in the UI and to remove it from the doc ???
MRM-797,jameswdumay,James William Dumay,2008-05-08T18:51:05.001Z,2008-05-08T18:51:05.001Z,Moved back to 1.1 as this is a critical bug
MRM-797,oching,Maria Odea Ching,2008-05-11T22:16:34Z,2008-05-11T22:16:34Z,"I tried to replicate this issue, and below are the results. (Pls. see the images 'before-repo-scan.png' and 'after-repo-scan.png' I've attached to this issue.)
1. those snapshot versions with '-SNAPSHOT' that have been released already were deleted.
2. those snapshot versions with the timestamped were not released.

Is this the same for you Arnaud? 
If so, I guess the issue here is case #2?





"
MRM-797,aheritier,Arnaud HERITIER,2008-05-12T14:11:11.774Z,2008-05-12T14:11:11.774Z,"Hi Deng, 

  You just forgot to attach images ;-)
  I'll check tomorrow. I have a virtual machin to reproduce it.
"
MRM-797,oching,Maria Odea Ching,2008-05-12T21:10:57.772Z,2008-05-12T21:10:57.772Z,Oops.. sorry about that :-) I'll attach them now.
MRM-797,aheritier,Arnaud HERITIER,2008-05-13T04:17:53.106Z,2008-05-13T04:17:53.106Z,"I have two repositories in my case, and after an archiva cleanup
in snapshots repo I have :
{code}
total 184
 4 drwxr-xr-x 28 ubuntu ubuntu  4096 2008-05-05 13:47 .
 4 drwxr-xr-x 40 ubuntu ubuntu  4096 2008-05-05 13:48 ..
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.10.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.1.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.10-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.11.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.1.1-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.12-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.2.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.3.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.3.1-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.4.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.5.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.6.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.7.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.7.1-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.7.2-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.8.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 0.9.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 1.0-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 1.1-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 1.2-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 1.3-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 1.4-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 13:47 1.5-SNAPSHOT
 4 drwxr-xr-x  2 ubuntu ubuntu  4096 2008-05-05 15:08 1.6.0-SNAPSHOT
32 drwxr-xr-x  2 ubuntu ubuntu 32768 2008-05-05 15:07 1.7.0-SNAPSHOT
36 drwxr-xr-x  2 ubuntu ubuntu 36864 2008-05-13 10:43 1.8.0-SNAPSHOT
 4 -rwxr-xr-x  1 ubuntu ubuntu   367 2008-05-05 13:49 maven-metadata.xml
 4 -rwxr-xr-x  1 ubuntu ubuntu    52 2008-05-05 13:49 maven-metadata.xml.md5
 4 -rwxr-xr-x  1 ubuntu ubuntu    60 2008-05-05 13:49 maven-metadata.xml.sha1
{code}
in internal repo I have :
{code}
total 52
4 drwxr-xr-x 10 ubuntu ubuntu 4096 2008-05-05 16:44 .
4 drwxr-xr-x 21 ubuntu ubuntu 4096 2008-05-05 16:44 ..
4 drwxr-xr-x  2 ubuntu ubuntu 4096 2008-05-05 16:44 0.9.0
4 drwxr-xr-x  2 ubuntu ubuntu 4096 2008-05-05 16:44 1.0
4 drwxr-xr-x  2 ubuntu ubuntu 4096 2008-05-05 16:44 1.1
4 drwxr-xr-x  2 ubuntu ubuntu 4096 2008-05-05 16:44 1.3
4 drwxr-xr-x  2 ubuntu ubuntu 4096 2008-05-05 16:44 1.4
4 drwxr-xr-x  2 ubuntu ubuntu 4096 2008-05-05 16:44 1.5.0
4 drwxr-xr-x  2 ubuntu ubuntu 4096 2008-05-05 16:44 1.5.1
4 drwxr-xr-x  2 ubuntu ubuntu 4096 2008-05-05 16:44 1.7.0
4 -rwxr-xr-x  1 ubuntu ubuntu  507 2008-05-05 17:00 maven-metadata.xml
4 -rwxr-xr-x  1 ubuntu ubuntu   52 2008-05-05 16:44 maven-metadata.xml.md5
4 -rwxr-xr-x  1 ubuntu ubuntu   60 2008-05-05 16:44 maven-metadata.xml.sha1
{code}
And in the web interface I have :
{code}
    *  0.9.0/
    * 1.0/
    * 1.1/
    * 1.3/
    * 1.4/
    * 1.5.0/
    * 1.5.1/
    * 1.6.0-20080226.173346-10/
    * 1.6.0-20080229.103456-11/
    * 1.7.0/
    * 1.7.0-20080318.134105-23/
    * 1.7.0-20080318.151519-24/
    * 1.8.0-20080428.123142-29/
    * 1.8.0-20080429.102033-30/
    * 1.8.0-SNAPSHOT/
    * 1.7.0-SNAPSHOT/
    * 1.6.0-SNAPSHOT/
{code}
Snapshots directories not shown in the web interface contain only metadata files.
I just noticed that there's no release for 1.6.0, perhaps it is why 1.7.0-SNAPSHOTS weren't removed ?"
MRM-797,oching,Maria Odea Ching,2008-05-13T05:05:36.704Z,2008-05-13T05:05:36.704Z,"Ah, the delete released snapshots feature only checks for released snapshots in that repo and not against other repositories that's why the snapshots are still in there. 

"
MRM-797,oching,Maria Odea Ching,2008-05-13T05:07:54.067Z,2008-05-13T05:07:54.067Z,Do you think we should support a 'delete released snapshots' against all the repos the user has access to?
MRM-797,aheritier,Arnaud HERITIER,2008-05-13T05:36:31.249Z,2008-05-13T05:36:31.249Z,Yes I think because I don't think it is a good practice to have repositories storing releases and snapshots at the same time. It's often the cause of problems.
MRM-797,oching,Maria Odea Ching,2008-05-13T05:50:37.109Z,2008-05-13T05:50:37.109Z,"Good point :-) I'll make a draft on how I'll implement this and post it here or send it to the dev list. 
Thanks Arnaud!"
MRM-797,oching,Maria Odea Ching,2008-05-14T01:55:00.926Z,2008-05-14T01:55:00.926Z,"Posted this on the dev list:

http://www.nabble.com/Delete-Released-Snaphots-td17224389.html"
MRM-797,oching,Maria Odea Ching,2008-05-26T03:44:25.568Z,2008-05-26T03:44:25.568Z,"Fixed in trunk -r660126:

- check for released versions of the snapshot across all repos
- added test"
MRM-754,oching,Maria Odea Ching,2008-05-26T04:48:29.725Z,2008-05-26T04:48:29.725Z,"Updated screenshots in archiva-docs (-r660149).
"
MRM-754,oching,Maria Odea Ching,2008-05-26T05:04:07.486Z,2008-05-26T05:04:07.486Z,Updated screenshots in archiva-site (-r660151)
MRM-754,oching,Maria Odea Ching,2008-05-26T05:10:20.994Z,2008-05-26T05:10:20.994Z,"Todo:
- add web upload form and virtual repos in the Feature Tour"
MRM-754,oching,Maria Odea Ching,2008-05-26T21:53:49.809Z,2008-05-26T21:53:49.809Z,Added artifact upload and virtual repos in feature tour (archiva-docs -r660356)
MRM-754,oching,Maria Odea Ching,2008-05-26T22:05:41.274Z,2008-05-26T22:05:41.274Z,Added artifact upload and virtual repos screenshots in archiva-site (-r660357)
MRM-798,brettporter,Brett Porter,2008-05-30T21:27:52.713Z,2008-05-30T21:27:52.713Z,"we already have the ""cache failures"" option - this should address your needs"
MRM-798,axismundi,Marc Lustig,2008-06-02T08:35:36.901Z,2008-06-02T08:35:36.901Z,"Not quite. The use-case is not ""unable to find artifact x on remote-repo y"".
The use-case is ""cannot connect to the remote-repo due to server-unavailability"".

The alterative would be to manually check every hour if all the remote repo's that are configured are still available :-(

Ideal solution: custom cron-task to (asynchronously) check the availability of all the remote repos.
Once a connect fails, the sys-admin should get an email-notification 
""Warning: remote-repository y is currently down and has been locked! Unlock repository [Link to page to unlock the locked repository]"" 

Please re-open. Ty."
MRM-798,brettporter,Brett Porter,2008-06-02T09:00:44.489Z,2008-06-02T09:00:44.489Z,"reopening for investigation. This is the intent of the feature - it should blacklist a resource on 4xx errors, and a repository on 5xx errors (with an expiry time)"
MRM-798,brettporter,Brett Porter,2008-07-01T17:49:27.727Z,2008-07-01T17:49:27.727Z,"we currently have no way to tell what is a resource error and what is a repository error, so it is cache failures per resource. We're not tracking timeouts as separate errors.

Moving this out to do some more advanced analysis of remote state for managing connections"
MRM-798,brettporter,Brett Porter,2008-09-13T21:24:51.511Z,2008-09-13T21:24:51.511Z,"also note that we now have the ability to take a remote repo offline. This can be done manually, but we may also want to hook these two features together."
MRM-750,brettporter,Brett Porter,2008-03-26T18:02:14.044Z,2008-03-26T18:02:14.044Z,"applied, thanks!"
MRM-767,oching,Maria Odea Ching,2008-07-03T03:05:24.422Z,2008-07-03T03:05:24.422Z,I've checked the NOTICE file generated for the jetty bundle and all the components listed there are only the jars that is included in the distribution. I guess I'll just add a supplements file for the Unnamed/Unknown projects.
MRM-767,oching,Maria Odea Ching,2008-07-03T06:45:05.29Z,2008-07-03T06:45:05.29Z,Added a supplements file for the Unnamed/Unknown projects in archive-jetty module in trunk -r673655.
MRM-767,oching,Maria Odea Ching,2008-07-04T04:54:07.086Z,2008-07-04T04:54:07.086Z,"Changes in trunk -r673985:
- for the generated jetty bundle, use the LICENSE file (which has the wrapper license) located in archiva-jetty/src/main/resources instead of the
LICENSE file from the apache resource bundle"
MRM-774,wsmoak,Wendy Smoak,2008-05-04T04:20:28.394Z,2008-05-04T04:20:28.394Z,"Initial work done in r653190.

 * Upload of filenames ending in .pom is not working (no content type found.)  I'll try defaulting to application/xml for the pomFile Content-Type.

 * No success message displays after a successful upload [I don't think this was working before my changes...]

 * filename.replaceAll( packaging, ""pom"" ) is dangerous; if 'jar' or 'war' appears elsewhere in the path it's going to get replaced.

 * The groupId/artifactId/version/packaging fields are still required even if a pom file is supplied.  (This differs from deploy:deploy-file which can read them from the pom.)

 * No validation that the uploaded POM file matches the supplied groupId/artifactId/etc.

 * Documentation still needs to be updated

 * Should checksums be created for the uploaded files?  We currently only do it for the metadata file.  (Archiva can be configured to ""fix checksums"".)

 * Automated tests?"
MRM-774,wsmoak,Wendy Smoak,2008-05-04T16:56:16.164Z,2008-05-04T16:56:16.164Z,"> Upload of filenames ending in .pom is not working (no content type found.)

So far, it seems to only be a problem with Safari.  Firefox works fine.  Still needs to be tested with Internet Explorer.  Looks like a ""fix"" would involve extending the Fileupload Interceptor (setting the Content-Type in the action is too late).  Workaround:  rename the .pom file to .xml before uploading."
MRM-774,oching,Maria Odea Ching,2008-05-04T21:32:58.394Z,2008-05-04T21:32:58.394Z,"- Should checksums be created for the uploaded files? We currently only do it for the metadata file. (Archiva can be configured to ""fix checksums"".)

In MRM-216, only the checksums of the metadata files are updated. I left the checksums of the artifact & the pom file to be generated by Archiva when the consumers are executed."
MRM-774,wsmoak,Wendy Smoak,2008-05-06T21:07:09.544Z,2008-05-06T21:07:09.544Z,"Docs updated in r653665.

This is probably as done as it's going to get for 1.1, though it still needs work.

 * Do uploads done through the web interface show up in the audit log?

 * Do plugin uploads work correctly? (Needs latest and release elements in the metadata.)"
MRM-705,brettporter,Brett Porter,2010-02-23T02:22:05.501Z,2010-02-23T02:22:05.501Z,redundant
MRM-721,jahlborn,james,2008-03-03T13:50:25.658Z,2008-03-03T13:50:25.658Z,"So, I wiped my database and rebuilt from scratch.  This error is still appearing periodically."
MRM-721,brettporter,Brett Porter,2010-02-23T01:56:48.589Z,2010-02-23T01:56:48.589Z,superceded
MRM-784,oching,Maria Odea Ching,2008-05-26T22:44:41.043Z,2008-05-26T22:44:41.043Z,"The parent pom has already been updated to the new mailing list addresses. 
Can we already close this?"
MRM-784,jameswdumay,James William Dumay,2008-05-26T22:49:07.097Z,2008-05-26T22:49:07.097Z,Yep that sounds good - could we update the current site somehow?
MRM-784,jameswdumay,James William Dumay,2008-05-26T23:01:20.009Z,2008-05-26T23:01:20.009Z,Has been deployed.
MRM-720,jameswdumay,James William Dumay,2008-02-27T19:25:05.395Z,2008-02-27T19:25:05.395Z,<joakim> Lucene 2.3.1 has some stabilization fixes -> http://www.nabble.com/-ANNOUNCE--Lucene-Java-2.3.1-release-available-td15661835.html
MRM-720,jameswdumay,James William Dumay,2008-02-27T19:39:06.095Z,2008-02-27T19:39:06.095Z,"Brought up an instance of Archiva, ran a confluence build through it (3510 dependencies) and tested the search. Eveything seems to check out."
MRM-720,jameswdumay,James William Dumay,2008-02-27T20:03:56.562Z,2008-02-27T20:03:56.562Z,Upgrade for branch works successfully. 
MRM-720,brettporter,Brett Porter,2008-02-27T22:12:10.517Z,2008-02-27T22:12:10.517Z,thanks for testing this
MRM-788,brill,Brill Pappin,2008-05-05T21:48:48.402Z,2008-05-05T21:48:48.402Z,"This may be related to:
http://issues.apache.org/jira/browse/DBCP-233"
MRM-788,brill,Brill Pappin,2008-05-05T22:37:59.319Z,2008-05-05T22:37:59.319Z,"A quick update:
this seems to only happen after Archiva has been running for a few minutes."
MRM-788,brill,Brill Pappin,2008-05-07T22:58:41.363Z,2008-05-07T22:58:41.363Z,"One mote note that might help.

I've installed the standalone version and it *doesn't* seem to be happening. It's only when deployed in my own container as a WAR that it gets into trouble."
MRM-788,jameswdumay,James William Dumay,2008-07-01T19:46:39.485Z,2008-07-01T19:46:39.485Z,"http://issues.apache.org/jira/browse/DBCP-212

Also looks related."
MRM-788,jameswdumay,James William Dumay,2008-07-01T20:13:46.431Z,2008-07-01T20:13:46.431Z,Seems this is a bug in Tomcat 6. I'm moving this from the 1.1 target for now until we can figure out a work around or a Tomcat fix is released.
MRM-788,brettporter,Brett Porter,2008-11-21T00:31:15.147Z,2008-11-21T00:31:15.147Z,anyone tried this with recent versions of Tomcat?
MRM-788,olamy,Olivier Lamy (*$^%`),2011-10-27T15:14:10.073Z,2011-10-27T15:14:10.073Z,commons dbcp upgraded
MRM-759,brettporter,Brett Porter,2008-04-01T22:44:23.015Z,2008-04-01T22:44:23.015Z,I think the appassembler plugin has another generator for this
MRM-759,jameswdumay,James William Dumay,2008-05-08T02:01:49.448Z,2008-05-08T02:01:49.448Z,Move to 1.1.x
MRM-759,jameswdumay,James William Dumay,2008-05-08T02:22:40.343Z,2008-05-08T02:22:40.343Z,Moving to 1.2
MRM-703,brettporter,Brett Porter,2008-02-19T02:33:24.759Z,2008-02-19T02:33:24.759Z,added a simple unit test and applied - thanks!
MRM-783,jameswdumay,James William Dumay,2008-05-08T02:22:38.462Z,2008-05-08T02:22:38.462Z,Moving to 1.2
MRM-712,jameswdumay,James William Dumay,2008-05-08T01:42:22.519Z,2008-05-08T01:42:22.519Z,Moving to 1.1.x
MRM-794,mburger,Martin Burger,2008-05-06T05:55:57.842Z,2008-05-06T05:55:57.842Z,Could be related to MRM-597. So fixing one of these two could fix the other one as well.
MRM-794,jameswdumay,James William Dumay,2008-06-20T23:29:53.113Z,2008-06-20T23:29:53.113Z,"Martin,
Could you confirm that this is still an issue for you? I think MRM-597 has solved this problem for you.

Thanks
James"
MRM-794,brettporter,Brett Porter,2008-07-01T18:43:11.322Z,2008-07-01T18:43:11.322Z,Closing as a duplicate.
MRM-768,ndeloof,nicolas de loof,2008-04-08T07:47:47.848Z,2008-04-08T07:47:47.848Z,"The issue is not about legacy artifact path support but about legacy-layout support from proxyConnectors.

The requested ArtifactReference is of type ""maven-plugin"" as we could expect for a m2 plugin request. This is converted in M1 layout to ""/plugins/"" according to AbstractLegacyRepositoryContent.typeToDirectoryMap

But a m2 maven-plugin project deployed on a legacy-layout repository will use ""/maven-plugins/"" as configured by maven ArtifactHandler (maven-artifact).

I think we must split the ""plugin"" type into maven-plugin for M2 plugins and ""maven-one-plugin"" for M1 plugins (as specified by ArtifactHandler in maven-one-plugin) to avoid such conflicts."
MRM-768,brettporter,Brett Porter,2008-04-08T08:00:52.649Z,2008-04-08T08:00:52.649Z,"agreed. Notice this will suffer the same problems as ejbs in that you won't be able to proxy this plugin via an m2 request, you'll have to use the legacy layout the whole way through."
MRM-768,ndeloof,nicolas de loof,2008-04-08T12:38:12.194Z,2008-04-08T12:38:12.194Z,"Fixed :
use a distinct ""type"" for MAVEN_PLUGIN and MAVEN_ONE_PLUGIN
testCase included
"
MRM-753,petroff,Kamen Petroff,2008-04-10T05:51:47.087Z,2008-04-10T05:51:47.087Z,"We have the same problem, I think it occurs if multiple deployes are run simultaneously."
MRM-753,decherfb,Benoit Decherf,2008-04-16T03:43:52.131Z,2008-04-16T03:43:52.131Z,"Archiva 1.0.2 return the same error.
I have no error logs in server side.
"
MRM-753,brettporter,Brett Porter,2008-04-16T09:16:50.802Z,2008-04-16T09:16:50.802Z,"if this is a concurrency issue, let's review after the webdav changes in 1.1"
MRM-753,decherfb,Benoit Decherf,2008-04-21T03:41:04.383Z,2008-04-21T03:41:04.383Z,"We were using the same archiva server for 6 continuum instances.

I create a different user / continuum instance and this solves this problem. So you  probably have a concurrency issue independent of webdav.

60 people can upload snapshots to archiva, so this only can be a temporary workaround (I won't create 60 different users in archiva)."
MRM-753,decherfb,Benoit Decherf,2008-04-24T06:18:56.358Z,2008-04-24T06:18:56.358Z,This still occurs with different users. Don't give attention to my last comment.
MRM-753,wsmoak,Wendy Smoak,2008-07-01T23:31:47.927Z,2008-07-01T23:31:47.927Z,Edited summary to avoid confusion with the web upload form vs. deploying artifacts the usual way.
MRM-753,jameswdumay,James William Dumay,2008-07-02T01:17:27.604Z,2008-07-02T01:17:27.604Z,"Redback always updates the successful login count even if there were no previous unsuccessful logins. 

The fix in REDBACK-151 will only update the count if there has been previous unsuccessful logins which should reduce the chance of this happening again.

Ideally, Redback should be audited for concurrency problems."
MRM-753,jameswdumay,James William Dumay,2008-07-02T01:18:29.368Z,2008-07-02T01:18:29.368Z,Should be fixed once Deng applies REDBACK-151 and we release a new redback for 1.1.
MRM-718,olamy,Olivier Lamy (*$^%`),2012-04-03T10:48:43.289Z,2012-04-03T10:48:43.289Z,done in system status page.
MRM-781,jameswdumay,James William Dumay,2008-04-15T07:08:23.818Z,2008-04-15T07:08:23.818Z,Fixed a few failing tests relating to serverside relocation
MRM-781,jameswdumay,James William Dumay,2008-04-17T08:40:40.847Z,2008-04-17T08:40:40.847Z,"All unit tests pass.

Still missing:
* Webdav properties"
MRM-781,brettporter,Brett Porter,2008-04-17T10:55:58.496Z,2008-04-17T10:55:58.496Z,"this is looking ok so far. Some missing things:

- license header on some new files
- I saw this when getting group and artifact ID level metadata: 2008-04-17 23:52:11,208 [btpool0-6] ERROR org.apache.maven.archiva.webdav.ArchivaDavResourceFactory  - Not a versioned reference, as version id on path has no number in it.
org.apache.maven.archiva.repository.metadata.RepositoryMetadataException: Not a versioned reference, as version id on path has no number in it.
- requires login (guest doesn't work) even when configured (may be my fault as I adjusted XworkUser too)
- content length is not reported - we should compare HTTP headers that used to be returned to ensure they are complete

I'll look to commit this tomorrow."
MRM-781,brettporter,Brett Porter,2008-04-17T21:46:46.074Z,2008-04-17T21:46:46.074Z,"some matters of style for future patches:
- match current formatting
- we don't tend to use final parameters
- we don't tend to use * imports"
MRM-781,brettporter,Brett Porter,2008-04-17T22:02:20.848Z,2008-04-17T22:02:20.848Z,"committed. I added the license headers myself, but the other issues need further patches to address"
MRM-781,jameswdumay,James William Dumay,2008-04-17T23:46:11.3Z,2008-04-17T23:46:11.3Z,"Fixes contentlength, contenttype and metadata exceptions"
MRM-781,brettporter,Brett Porter,2008-04-18T01:38:45.181Z,2008-04-18T01:38:45.181Z,applied
MRM-781,jameswdumay,James William Dumay,2008-04-18T06:41:08.863Z,2008-04-18T06:41:08.863Z,"This patch fixes the guest role bug Brett reported.

Ive also improved some of the exception warning in the servlet."
MRM-781,brettporter,Brett Porter,2008-04-18T22:15:49.684Z,2008-04-18T22:15:49.684Z,"applied. Leavng open for webdav properties, and for confirming the HTTP headers are equivalent"
MRM-781,jameswdumay,James William Dumay,2008-04-23T00:40:59.913Z,2008-04-23T00:40:59.913Z,This patch closes the stream that causes a file leak
MRM-781,brettporter,Brett Porter,2008-04-23T01:13:52.924Z,2008-04-23T01:13:52.924Z,applied
MRM-781,jameswdumay,James William Dumay,2008-05-06T08:44:50.604Z,2008-05-06T08:44:50.604Z,"Committed on trunk:
* Implemented Webdav properties, including copy/move/delete operations
* Unit tested the DavResourceLocator and DavLocatorFactory implementations (More tests on the way)
* Introduced joda-time dependency todo ISO8601 dates for the dav servlet

Still need to:
* Compare HTTP headers
* Test Windows webdav support
* Fix OS X support - OS X only supports webdav Level 2 - locking may need to be implemented
* Tests for the Resource factory and resource implemenation"
MRM-781,jameswdumay,James William Dumay,2008-05-06T10:44:16.168Z,2008-05-06T10:44:16.168Z,MRM-440 broke (Redirect on collection resource if there is no trailing slash). I committed the fix in r653817.
MRM-781,jameswdumay,James William Dumay,2008-06-03T06:23:46.03Z,2008-06-03T06:23:46.03Z,"As of r662742 litmus test can now run correctly

{code}
james-william-dumays-macbook:~ jdumay$ litmus http://localhost:9091/repository/internal/
-> running `basic':
 0. init.................. pass
 1. begin................. pass
 2. options............... FAIL (OPTIONS on base collection `/repository/internal/litmus/': 302 Found)
 3. put_get............... pass
 4. put_get_utf8_segment.. pass
 5. mkcol_over_plain...... pass
 6. delete................ pass
 7. delete_null........... FAIL (DELETE nonexistent resource succeeded)
 8. delete_fragment....... FAIL (DELETE on `/repository/internal/litmus/frag/': 302 Found)
 9. mkcol................. pass
10. mkcol_again........... WARNING: MKCOL on existing collection gave 302, should be 405
    ...................... pass (with 1 warning)
11. delete_coll........... FAIL (DELETE on collection `/repository/internal/litmus/coll/': 302 Found)
12. mkcol_no_parent....... FAIL (MKCOL with missing intermediate succeeds)
13. mkcol_with_body....... FAIL (MKCOL with weird body must fail (RFC2518:8.3.1))
14. finish................ pass
<- summary for `basic': of 15 tests run: 9 passed, 6 failed. 60.0%
{code}"
MRM-781,jameswdumay,James William Dumay,2008-06-03T22:52:02.654Z,2008-06-03T22:52:02.654Z,"Committed r662968

* Renabled RepositoryServletBrowseTest
* Added more tests to the DavResourceLocator test
* Litmus test score is looking much better :-)

{code}
james-william-dumays-macbook:~ jdumay$ litmus http://localhost:9091/repository/internal/
-> running `basic':
 0. init.................. pass
 1. begin................. pass
 2. options............... pass
 3. put_get............... pass
 4. put_get_utf8_segment.. pass
 5. mkcol_over_plain...... pass
 6. delete................ pass
 7. delete_null........... FAIL (DELETE nonexistent resource succeeded)
 8. delete_fragment....... WARNING: DELETE removed collection resource with Request-URI including fragment; unsafe
    ...................... pass (with 1 warning)
 9. mkcol................. pass
10. mkcol_again........... pass
11. delete_coll........... pass
12. mkcol_no_parent....... pass
13. mkcol_with_body....... FAIL (MKCOL with weird body must fail (RFC2518:8.3.1))
14. finish................ pass
<- summary for `basic': of 15 tests run: 13 passed, 2 failed. 86.7%
-> 1 warning was issued.
See debug.log for network/debug traces.
{code}"
MRM-781,jameswdumay,James William Dumay,2008-06-04T00:53:28.391Z,2008-06-04T00:53:28.391Z,"Committed r662968

* DELETE should 404 if resource does not exist
* 93% litmus coverage

{code}
-> running `basic':
 0. init.................. pass
 1. begin................. pass
 2. options............... pass
 3. put_get............... pass
 4. put_get_utf8_segment.. pass
 5. mkcol_over_plain...... pass
 6. delete................ pass
 7. delete_null........... pass
 8. delete_fragment....... WARNING: DELETE removed collection resource with Request-URI including fragment; unsafe
    ...................... pass (with 1 warning)
 9. mkcol................. pass
10. mkcol_again........... pass
11. delete_coll........... pass
12. mkcol_no_parent....... pass
13. mkcol_with_body....... FAIL (MKCOL with weird body must fail (RFC2518:8.3.1))
14. finish................ pass
<- summary for `basic': of 15 tests run: 14 passed, 1 failed. 93.3%
-> 1 warning was issued.
{code}"
MRM-781,jameswdumay,James William Dumay,2008-07-01T22:47:13.344Z,2008-07-01T22:47:13.344Z,The implementation is now at a point where we can ship it.
MRM-782,jameswdumay,James William Dumay,2008-07-04T23:16:12.448Z,2008-07-04T23:16:12.448Z,Moving this to the 1.2 target as this will be covered in the new repository-proxy API.
MRM-782,mathiasarens,Mathias Arens,2009-07-23T03:07:56.996Z,2009-07-23T03:07:56.996Z,I can confirm the problem in Archiva 1.2.1. Currently my maven builds fail because archiva downloads metadata for SNAPSHOT versions of maven reactor and site plugin from the sonatype public repository (http://repository.sonatype.org/content/groups/public/). But the maven plugins are not downloaded because the policy is set to never for snapshots. 
MRM-782,olamy,Olivier Lamy (*$^%`),2014-04-16T23:04:25.092Z,2014-04-16T23:04:25.092Z,Fixed but I'm not sure of which version :-)
MRM-761,brettporter,Brett Porter,2008-04-02T05:29:48.153Z,2008-04-02T05:29:48.153Z,I believe this may already be fixed in 1.0.2-SNAPSHOT - I will confirm
MRM-761,ivanpopov,Ivan Popov,2008-04-02T11:19:01.268Z,2008-04-02T11:19:01.268Z,"It seems to be similar to this issue  http://jira.codehaus.org/browse/MRM-481
but it has been fixed in 1.0-beta-3 so ....
"
MRM-761,brettporter,Brett Porter,2008-04-03T09:20:59.372Z,2008-04-03T09:20:59.372Z,confirmed
MRM-761,ivanpopov,Ivan Popov,2008-04-03T10:54:18.514Z,2008-04-03T10:54:18.514Z,"I have just tested the revision 644345 and the problem is not solved.

I try to get  jdk/zips/jre-1.5.0.zip 

and the proxy answer is 
Error 404 Not Found
The following resource does not exist: http://localhost:8080/repository/jdk/distributions/jre-1.5.0.zip"
MRM-761,brettporter,Brett Porter,2008-04-03T11:01:22.288Z,2008-04-03T11:01:22.288Z,"what format is your underlying repository? is it maven1, or maven2?"
MRM-761,ivanpopov,Ivan Popov,2008-04-03T12:06:07.414Z,2008-04-03T12:06:07.414Z,"It is a maven 1 repository

<layout>legacy</layout>"
MRM-761,ivanpopov,Ivan Popov,2008-04-04T06:55:13.581Z,2008-04-04T06:55:13.581Z,"I find a workaround only available in 1.0.2.
Just have to install the zip file as groupId/distributions/artifactId-version.zip."
MRM-776,jameswdumay,James William Dumay,2008-05-08T02:22:40.093Z,2008-05-08T02:22:40.093Z,Moving to 1.2
MRM-776,brettporter,Brett Porter,2008-09-13T21:25:41.3Z,2008-09-13T21:25:41.3Z,this would fall under the database cleanup work being discussed - not sure if it'll land in 1.2 though
MRM-776,brettporter,Brett Porter,2010-02-23T02:51:10.365Z,2010-02-23T02:51:10.365Z,for testing
MRM-776,brettporter,Brett Porter,2010-03-01T03:05:36.509Z,2010-03-01T03:05:36.509Z,"without more details I'm not sure of the circumstances that would have brought this about, but detecting artifact deletions per MRM-999 should take care of this."
MRM-771,brettporter,Brett Porter,2010-02-23T02:50:16.669Z,2010-02-23T02:50:16.669Z,for testing
MRM-771,brettporter,Brett Porter,2010-02-23T05:22:43.147Z,2010-02-23T05:22:43.147Z,believe this was fixed in 1.3
MRM-790,oching,Maria Odea Ching,2008-05-27T21:12:34.72Z,2008-05-27T21:12:34.72Z,"I'm getting the IOException, but the error message is different..

2008-05-28 10:11:03,552 [btpool0-8] WARN  org.apache.archiva.checksum.ChecksummedFile  - Supplied checksum file '/home/maven/repository-staging/to-ibiblio/maven2/javax/activation/activation/maven-metadata.xml' does not match expected file: 'maven-metadata-central.xml'
java.io.IOException: Supplied checksum file '/home/maven/repository-staging/to-ibiblio/maven2/javax/activation/activation/maven-metadata.xml' does not match expected file: 'maven-metadata-central.xml'
	at org.apache.archiva.checksum.ChecksummedFile.parseChecksum(ChecksummedFile.java:337)
	at org.apache.archiva.checksum.ChecksummedFile.fixChecksums(ChecksummedFile.java:269)
	at org.apache.maven.archiva.policies.ChecksumPolicy.applyPolicy(ChecksumPolicy.java:129)
	at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.validatePolicies(DefaultRepositoryProxyConnectors.java:774)
	at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.transferFile(DefaultRepositoryProxyConnectors.java:602)
	at org.apache.maven.archiva.proxy.DefaultRepositoryProxyConnectors.fetchFromProxies(DefaultRepositoryProxyConnectors.java:351)
	at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.fetchMetadataFromProxies(ArchivaDavResourceFactory.java:407)
	at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.fetchContentFromProxies(ArchivaDavResourceFactory.java:348)
	at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.doGet(ArchivaDavResourceFactory.java:264)
	at org.apache.maven.archiva.webdav.ArchivaDavResourceFactory.createResource(ArchivaDavResourceFactory.java:191)
	at org.apache.maven.archiva.web.repository.RepositoryServlet.service(RepositoryServlet.java:104)"
MRM-790,oching,Maria Odea Ching,2008-05-27T21:20:58.64Z,2008-05-27T21:20:58.64Z,"Looking at the codes, it seems the error message was changed since this issue was filed so that's why we encountered different error messages :-)"
MRM-790,oching,Maria Odea Ching,2008-05-29T04:50:38.83Z,2008-05-29T04:50:38.83Z,"Fixed in trunk -r661273:

- added check specifically for remote metadata checksum files
- added test case

"
MRM-762,brettporter,Brett Porter,2008-04-03T07:59:17.868Z,2008-04-03T07:59:17.868Z,thanks!
MRM-737,oching,Maria Odea Ching,2008-07-10T04:03:30.35Z,2008-07-10T04:03:30.35Z,"Fixed in trunk -r675483:
- do not index the metadata files (IndexContentConsumer)"
MRM-737,soja,Norbert Krankilla,2008-10-13T10:49:47.547Z,2008-10-13T10:49:47.547Z,The fix is still not (or not working) in version 1.1.3
MRM-737,jameswdumay,James William Dumay,2008-10-13T18:50:52.038Z,2008-10-13T18:50:52.038Z,"Norbert,
This is because the change was committed to subversion trunk (Archiva 1.1) which is yet unreleased.

Thanks
James"
MRM-737,libor.kramolis,Libor Kramolis,2008-10-14T12:31:40.136Z,2008-10-14T12:31:40.136Z,"It is funny, 1.1 is NOT 1.1. ;-)

What version do you think this fix will be released in?
"
MRM-737,oching,Maria Odea Ching,2008-10-14T19:42:05.129Z,2008-10-14T19:42:05.129Z,"Hi, this is fixed for 1.1 already. If you've upgraded to 1.1+ from a lower version, you need to remove the .index directory of your repository and possibly cleanup your archiva database as well. Please see http://cwiki.apache.org/confluence/display/ARCHIVA/Upgrading+from+1.0.x+to+1.1.x for more details on this :)
"
MRM-737,brettporter,Brett Porter,2008-10-14T19:43:43.571Z,2008-10-14T19:43:43.571Z,should have been 1.2
MRM-737,oching,Maria Odea Ching,2009-02-18T00:52:49.784Z,2009-02-18T00:52:49.784Z,"After the search re-vamp for 1.2-M2, I no longer see the metadata files in the search results.."
MRM-1750,olamy,Olivier Lamy (*$^%`),2013-12-22T06:25:56.24Z,2013-12-22T06:25:56.24Z,fixed
MRM-1781,olamy,Olivier Lamy (*$^%`),2013-10-03T07:39:06.601Z,2013-10-03T07:39:06.601Z,"should be fixed with using last log4j2 version.
Done in trunk."
MRM-1755,olamy,Olivier Lamy (*$^%`),2013-04-25T02:44:09.124Z,2013-04-25T02:44:09.124Z,no patch attached. You missed it ?
MRM-1755,olamy,Olivier Lamy (*$^%`),2013-04-25T03:11:22.314Z,2013-04-25T03:11:22.314Z,"BTW can you post the stack trace with the NoSuchMethodException ? 
Because I cannot reproduce"
MRM-1755,erouan,Antoine ROUAZE,2013-04-25T03:15:25.021Z,2013-04-25T03:15:25.021Z,"Sorry, you will find in attachment. I can't give you the stacktrace now. But if you try with archiva-webapp artifact, normally it's fail."
MRM-1755,olamy,Olivier Lamy (*$^%`),2013-04-25T05:24:41.012Z,2013-04-25T05:24:41.012Z,"patch applied.
Thanks!"
MRM-1718,olamy,Olivier Lamy (*$^%`),2012-11-24T12:01:42.234Z,2012-11-24T12:01:42.234Z,discussion here: http://markmail.org/message/ai7tio4ansuxqrvh
MRM-1718,olamy,Olivier Lamy (*$^%`),2012-12-08T09:42:02.726Z,2012-12-08T09:42:02.726Z,"done.
NOTE: some changes will be apply with MRM-1720."
MRM-1789,olamy,Olivier Lamy (*$^%`),2013-12-17T23:11:55.952Z,2013-12-17T23:11:55.952Z,ok only if you don't refresh the page :-)
MRM-1789,olamy,Olivier Lamy (*$^%`),2013-12-17T23:28:00.139Z,2013-12-17T23:28:00.139Z,"fixed
http://svn.apache.org/r1551850
"
MRM-1740,olamy,Olivier Lamy (*$^%`),2013-01-15T18:17:53.975Z,2013-01-15T18:17:53.975Z,"ldap can now write users and roles 
http://archiva.apache.org/redback/configuration.html
* ldap.config.groups.role.*(ldap group)=*(role) (mapping ldap group - redback role) (example: ldap.config.groups.role.archiva-admin=Archiva System Administrator)
* ldap.config.writable=true/false will write datas to ldap (default false)
* ldap.config.groups.use.rolename=true/false will create groups in ldap with default role if no group-role mapping found (default false)"
MRM-1752,olamy,Olivier Lamy (*$^%`),2013-04-22T07:19:28.893Z,2013-04-22T07:19:28.893Z,could be very more interesting with the patch and the screenshot :P
MRM-1752,erouan,Antoine ROUAZE,2013-04-22T07:23:49.752Z,2013-04-22T07:23:49.752Z,Sorry I thought I had joined them.
MRM-1752,olamy,Olivier Lamy (*$^%`),2013-04-22T07:28:11.634Z,2013-04-22T07:28:11.634Z,"Not license in the js library.
Are we talking about http://d3js.org ?
I don't know if this license is Apache compatible https://github.com/mbostock/d3/blob/master/LICENSE"
MRM-1752,erouan,Antoine ROUAZE,2013-04-22T07:38:15.007Z,2013-04-22T07:38:15.007Z,"D3js is under BSD license, it is compatible with the Apache license (http://www.apache.org/legal/3party.html)."
MRM-1752,olamy,Olivier Lamy (*$^%`),2013-04-22T07:50:52.615Z,2013-04-22T07:50:52.615Z,ok I see that now thanks!
MRM-1752,olamy,Olivier Lamy (*$^%`),2013-04-22T07:54:21.303Z,2013-04-22T07:54:21.303Z,for maintenance purpose what is the version of d3 js ?
MRM-1752,erouan,Antoine ROUAZE,2013-04-22T07:57:45.276Z,2013-04-22T07:57:45.276Z,The version is 3.1.5.
MRM-1752,olamy,Olivier Lamy (*$^%`),2013-04-22T08:29:18.169Z,2013-04-22T08:29:18.169Z,"patch applied.
Thanks!"
MRM-1752,erouan,Antoine ROUAZE,2013-04-22T08:33:43.244Z,2013-04-22T08:33:43.244Z,Thank you!
MRM-1753,olamy,Olivier Lamy (*$^%`),2013-04-24T04:50:02.035Z,2013-04-24T04:50:02.035Z,"patch applied.
Thanks!"
MRM-1766,olamy,Olivier Lamy (*$^%`),2013-12-01T22:46:25.926Z,2013-12-01T22:46:25.926Z,fixed http://svn.apache.org/r1546895
MRM-1762,olamy,Olivier Lamy (*$^%`),2013-11-14T19:38:36.11Z,2013-11-14T19:38:36.11Z,"fixed: http://svn.apache.org/r1542152
"
MRM-1710,olamy,Olivier Lamy (*$^%`),2012-11-14T14:04:47.981Z,2012-11-14T14:04:47.981Z,fixed http://svn.apache.org/r1409348
MRM-1749,olamy,Olivier Lamy (*$^%`),2013-02-25T06:51:38.727Z,2013-02-25T06:51:38.727Z,"You mean 1.0.0.BUILD-SNAPSHOT will be release as 1.0.0.RELEASE ?
If that's the case, snapshots won't be deleted as the released version must be 1.0.0.BUILD .
Maven itself will consider this versionning model."
MRM-1749,afranken,Alex Franken,2013-02-27T12:54:23.625Z,2013-02-27T12:54:23.625Z,"Yes, 1.0.0.BUILD-SNAPSHOT is released as 1.0.0.RELEASE.  There are a handful of sources that indicate that Maven 3 was intended to support an alternate more flexible model.  However, finding something concrete and definitive is a challenge.

So, the Maven versions plugins states the following:
{quote}
The versions-maven-plugin knows three rules for comparing version numbers:

maven
The standard Maven 2.x version numbering scheme.
mercury
The ""new"" version numbering scheme used by the Maven Mercury.
numeric
An alternative version numbering scheme, similar to mercury but with no ""special"" qualifiers.
{quote}

I believe our versioning scheme, again modeled after Spring Framework (which was modeled based on OSGI conventions), is most closely related to the ""new Mercury"" versioning scheme.  http://docs.codehaus.org/display/MAVEN/Mercury+Version+Ranges


Long store short, I found some evidence from Spring references that Artifactory has the same problem.  I tracked down the following page that indicates that Artifactory intends to add support for, ""Support for flexible non-Maven snapshot and release identification will be introduced in the upcoming release of Artifactory"". http://wiki.jfrog.org/confluence/display/RTF/Local+and+Remote+Repositories

Can you do something to support this version scheme?  Could you also provide insight into (or point me to) the logic you use to determine ""released snapshots""?  Thanks."
MRM-1791,olamy,Olivier Lamy (*$^%`),2013-11-07T19:21:39.569Z,2013-11-07T19:21:39.569Z,"patch applied.
Thanks!"
MRM-1764,olamy,Olivier Lamy (*$^%`),2013-11-27T21:03:43.215Z,2013-11-27T21:03:43.215Z,fixed.
MRM-1734,olamy,Olivier Lamy (*$^%`),2013-01-02T04:51:02.234Z,2013-01-02T04:51:02.234Z,fixed.
MRM-1785,axel3rd,Alix Lourme,2013-10-23T07:31:00.221Z,2013-10-23T07:31:00.221Z,"One restart every night is ""too"" beneficial.
The analysis of a dump taken before night restart doesn't have any issues (less then 1Go, less than 300 mo retained).
Currently with 4Go heap, memory increases to 3.5 Go max and the only ""Full GC"" in day recovers 2.7 Go.
So we will modify Heap to 2Go and stop restart every night, trying to reproduce the problem."
MRM-1785,axel3rd,Alix Lourme,2013-11-07T11:01:00.33Z,2013-11-07T11:01:00.33Z,"With a restart every week, we can see that the memory grows up.

Tuesday a ""little"" dump was taken (less than 1Go after Full GC) : 

!20131105-091005-dump.png!

2 _Leak Suspects_ detected by Eclipse MAT :
# About JackRabbit _SharedItemStateManager_ (but v2.6.1 seems not have known memory bug)
# About a big Map linked to _DefaultArchivaConfiguration_

Eclipse MAT screenshot below ... more big dump will be taken tomorrow or next week to verify there is same problem and compare ratio of retained heap.

----
h3.Problem Suspect 1

!20131105-091005-ProblemSuspect-1-1-description.png!
!20131105-091005-ProblemSuspect-1-2-ShortestPaths.png!
!20131105-091005-ProblemSuspect-1-3-AccumulatedObjects.png!
!20131105-091005-ProblemSuspect-1-4-AccumulatedObjectsByClass.png!

----
h3.Problem Suspect 2

!20131105-091005-ProblemSuspect-2-1-description.png!
!20131105-091005-ProblemSuspect-2-2-CommonPathToTheAccumulationPoint.png!
"
MRM-1785,olamy,Olivier Lamy (*$^%`),2013-11-07T15:53:05.257Z,2013-11-07T15:53:05.257Z,did you try a 2.0.0-SNAPSHOT?
MRM-1785,axel3rd,Alix Lourme,2013-11-07T16:43:04.96Z,2013-11-07T16:43:04.96Z,"Hi Olivier, 

Thanks for reply.

{quote}
did you try a 2.0.0-SNAPSHOT?
{quote}

No. The problem appears only in production. We don't have the capacity to simulate the same activity in another environment (create a very large number of representative maven integration is not trivial).

And deploy a non release version on production is ... an ""unsecured"" solution.
I prefer continue the analysis (taking dump before major perturbation) and provide informations for qualify the problem ... with restart every night if needed.
"
MRM-1785,axel3rd,Alix Lourme,2013-11-12T11:21:18.58Z,2013-11-12T11:21:18.58Z,"Hi, 

Taking a new dump today after a full GC (file : 1,5Go), Eclipse MAT presents 1 leak suspect (equivalent to n2 below) : 

{code}
37 188 instances of ""org.apache.jackrabbit.core.XASessionImpl"", loaded by ""org.eclipse.jetty.webapp.WebAppClassLoader @ 0x6f53dd5f8"" occupy 529 004 456 (70,16%) bytes. These instances are referenced from one instance of ""java.util.HashMap$Entry[]"", loaded by ""<system class loader>""

Keywords
java.util.HashMap$Entry[]
org.eclipse.jetty.webapp.WebAppClassLoader @ 0x6f53dd5f8
org.apache.jackrabbit.core.XASessionImpl
{code}

+Supposition+ : Jackrabbit repository grows up with user interactions (search, etc) and forgets to clean some cache items ? 

{quote}
did you try a 2.0.0-SNAPSHOT?
{quote}

If this version has some changes / improvement in internal mechanisms, we can consider this issue in ""to be tested"" status (in 2.0.0) and waiting deployment of the futur 2.0.0 release in our production.

@Olivier : Do you want some other complement from dump (could be explained this behaviour) ... or next version could be helpful on this problem ? Thanks in advance.
"
MRM-1785,jsharp,jsharp,2014-09-01T21:02:27.959Z,2014-09-01T21:02:27.959Z,Appears to have been fixed in 2.1.0
MRM-1785,axel3rd,Alix Lourme,2015-06-22T13:24:59.516Z,2015-06-22T13:24:59.516Z,"I confirm fixed in 2.2.0. 
No nightly restart and GC works like a charm."
MRM-1783,olamy,Olivier Lamy (*$^%`),2013-10-09T17:17:40.518Z,2013-10-09T17:17:40.518Z,"fixed.
Thanks!"
MRM-1717,olamy,Olivier Lamy (*$^%`),2012-11-22T14:28:33.122Z,2012-11-22T14:28:33.122Z,fixed http://svn.apache.org/r1412656
MRM-1706,olamy,Olivier Lamy (*$^%`),2012-10-30T05:19:06.208Z,2012-10-30T05:19:06.208Z,fixed http://svn.apache.org/r1403652
MRM-1705,olamy,Olivier Lamy (*$^%`),2012-10-26T08:59:33.952Z,2012-10-26T08:59:33.952Z,fixed.
MRM-1759,cipi,Ciprian Ciubotariu,2016-10-04T22:47:49.773Z,2016-10-04T22:47:49.773Z,"I have Archiva-2.2.1 deployed using LDAP via a secure channel, and it works excellent. Is this still an issue? The affected versions are in the 1.4 series."
MRM-1759,olamy,Olivier Lamy (*$^%`),2016-10-04T23:06:56.561Z,2016-10-04T23:06:56.561Z,[~cipi] Thanks for report. I'm closing the issue.
MRM-1774,olamy,Olivier Lamy (*$^%`),2013-10-01T06:31:50.65Z,2013-10-01T06:31:50.65Z,"what is the value of appserver.base sysprops?
The issue here is not with jcr but maven index creation.
Did you configure repository directories (and index directories)?"
MRM-1760,jieryn,jieryn,2013-05-02T06:20:26.284Z,2013-05-02T06:20:26.284Z,"Oh, and then there is a sub directory logs/logs/ which includes the archiva-audit-05-02-2013.log. Thankfully this is an existing date format, but why is it put in its own logs subdirectory of logs directory?

This is wildly inconsistent, bordering on confusing."
MRM-1760,olamy,Olivier Lamy (*$^%`),2013-05-02T07:25:00.017Z,2013-05-02T07:25:00.017Z,"audit logs path is a mistake :-).
The others wrapper and request are not controlled with log4j2 but I will changed it to have similar format.
something like foo-dd-mm-yyy.log

 "
MRM-1760,jieryn,jieryn,2013-05-02T07:51:32.435Z,2013-05-02T07:51:32.435Z,"Thank you for trying to standardize, that will be helpful.

BIKESHED: YYYY-mm-dd is chronologically sortable by default by programs like 'ls' and 'dir', whereas dd-mm-YYYY is not. :-)"
MRM-1760,olamy,Olivier Lamy (*$^%`),2013-05-02T07:53:36.898Z,2013-05-02T07:53:36.898Z,"according to http://wrapper.tanukisoftware.com/doc/english/prop-logfile.html
won't be possible for wrapper logs file."
MRM-1760,olamy,Olivier Lamy (*$^%`),2013-05-02T08:07:20.258Z,2013-05-02T08:07:20.258Z,"oh good remark for the format !!
I will use that YYYYMMDD (only format possible for wrapper)"
MRM-1760,olamy,Olivier Lamy (*$^%`),2013-05-02T08:20:25.089Z,2013-05-02T08:20:25.089Z,fixed.
MRM-1733,k4j,kishore gopalakrishna,2012-12-21T11:00:27.077Z,2012-12-21T11:00:27.077Z,"From Olivier,

Hi Kishore,
Thanks for your email and explanations !

@Others
As I'm involved in Helix incubator, my idea was to use it to a sync
mechanism with Archiva for artifacts.
Basically a primary/master instance where users deploy their artifacts
then n slave instances for reading artifacts.

Does it make sense to you ?"
MRM-1733,k4j,kishore gopalakrishna,2012-12-21T11:02:28.842Z,2012-12-21T11:02:28.842Z,"Adrien Lecharpentier wrote,

IMO, it is a very good idea. I've already saw some config like this but
using proxy connector to ""replicate"" artifacts to archiva-instance close to
users (specific teams/dept). Using Helix could be a time saving and great
performance enhancement solution."
MRM-1733,k4j,kishore gopalakrishna,2012-12-21T11:02:58.868Z,2012-12-21T11:02:58.868Z,"Thanks. Few things to add.

From Kishore 

* Replication in the recipe was done using rsync. Not sure if  rsync is ok for Archiva. Its possible for Archiva to not use rsync. As I mentioned in my previous email, Archiva supports notification mechanism   in the form of consumers. This means the slave instance can act as a consumer and master can push the notifications to slave. Each notification will contain the list of files changed. Once the slave gets the list of changes, it can request those files from master and save it locally. Slave will need to have ACL's to fetch all the files. This can make it independent of rsync.
* I have not considered the user information that is stored in database/ldap. Is it possible to enhance the notification mechanism to notify consumers of change in user information. 

Thoughts ?
"
MRM-1714,olamy,Olivier Lamy (*$^%`),2012-11-23T16:44:17.304Z,2012-11-23T16:44:17.304Z,fixed.
MRM-1712,olamy,Olivier Lamy (*$^%`),2012-11-19T09:23:19.504Z,2012-11-19T09:23:19.504Z,done.
MRM-1722,olamy,Olivier Lamy (*$^%`),2012-12-20T05:03:45.851Z,2012-12-20T05:03:45.851Z,fixed.
MRM-1792,olamy,Olivier Lamy (*$^%`),2013-11-10T22:17:09.739Z,2013-11-10T22:17:09.739Z,done.
MRM-1792,olamy,Olivier Lamy (*$^%`),2014-01-15T21:51:45.244Z,2014-01-15T21:51:45.244Z,"for some reasons doesn't work with installed app.
"
MRM-1780,olamy,Olivier Lamy (*$^%`),2013-11-24T23:12:20.113Z,2013-11-24T23:12:20.113Z,"fixed.
"
MRM-1746,olamy,Olivier Lamy (*$^%`),2013-12-17T01:30:23.355Z,2013-12-17T01:30:23.355Z,fixed.
MRM-1728,olamy,Olivier Lamy (*$^%`),2012-12-19T08:44:36.506Z,2012-12-19T08:44:36.506Z,need some work as the tree is dynamic.
MRM-1796,olamy,Olivier Lamy (*$^%`),2013-12-04T17:50:12.975Z,2013-12-04T17:50:12.975Z,AFAICS it's fixed in Jackarabbit now 
MRM-1796,bklau2006,BK Lau,2013-12-04T19:40:40.674Z,2013-12-04T19:40:40.674Z,"Oliver:
Which version of Apache Archive that should I use? i.e. that has the Jack Rabbit fix?"
MRM-1796,olamy,Olivier Lamy (*$^%`),2013-12-05T04:41:39.243Z,2013-12-05T04:41:39.243Z,"that a jackrabbit fix. See https://issues.apache.org/jira/browse/JCR-2009 
I believe should work with 1.4-M4
"
MRM-1763,olamy,Olivier Lamy (*$^%`),2013-10-01T06:32:53.956Z,2013-10-01T06:32:53.956Z,should be possible with redback. TO review.
MRM-1795,olamy,Olivier Lamy (*$^%`),2013-12-04T17:01:52.354Z,2013-12-04T17:01:52.354Z,"I don't understand how this can be null.
Anyway I will apply the change.
For future patch, could you please provide a diff rather than the full js file?
Thanks"
MRM-1720,olamy,Olivier Lamy (*$^%`),2012-11-29T08:46:29.455Z,2012-11-29T08:46:29.455Z,"so we must:
* remove maximum of 200
* more parameters for REST search request with pageSize, pageIndex (currently non of those are configurable) "
MRM-1720,olamy,Olivier Lamy (*$^%`),2012-11-29T09:09:08.253Z,2012-11-29T09:09:08.253Z,"hard coded 200 limit removed.
Now still need to add search rest request parameter.
I will do that later or if someone beat me."
MRM-1720,olamy,Olivier Lamy (*$^%`),2012-12-18T11:51:43.381Z,2012-12-18T11:51:43.381Z,fixed.
MRM-1786,olamy,Olivier Lamy (*$^%`),2013-10-29T07:15:57.554Z,2013-10-29T07:15:57.554Z,"a bit strange.
Do you have any http logs?
Because Maven use put and we can deploy."
MRM-1786,kosalads,Kosala De Silva,2013-10-30T22:55:21.195Z,2013-10-30T22:55:21.195Z,"This is the error I got in the eclipse. Also I have attached the archiva logs as well.

SLF4J: Failed to load class ""org.slf4j.impl.StaticLoggerBinder"".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building com Ejb Client 1.0.0
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ com-ejb-client ---
[INFO] Deleting /Office/workspace/comEjbClientAS7/target
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ com-ejb-client ---
[debug] execute contextualize
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /Office/workspace/comEjbClientAS7/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ com-ejb-client ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 15 source files to /Office/workspace/comEjbClientAS7/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ com-ejb-client ---
[debug] execute contextualize
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /Office/workspace/comEjbClientAS7/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ com-ejb-client ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ com-ejb-client ---
[INFO] No tests to run.
[INFO] Surefire report directory: /Office/workspace/comEjbClientAS7/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-jar-plugin:2.3.2:jar (default-jar) @ com-ejb-client ---
[INFO] Building jar: /Office/workspace/comEjbClientAS7/target/com-ejb-client-1.0.0.jar
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ com-ejb-client ---
[INFO] Installing /Office/workspace/comEjbClientAS7/target/com-ejb-client-1.0.0.jar to /home/kosala/.m2/repository/com/com-ejb-client/1.0.0/com-ejb-client-1.0.0.jar
[INFO] Installing /Office/workspace/comEjbClientAS7/pom.xml to /home/kosala/.m2/repository/com/com-ejb-client/1.0.0/com-ejb-client-1.0.0.pom
[INFO] 
[INFO] --- maven-deploy-plugin:2.7:deploy (default-deploy) @ com-ejb-client ---
Uploading: http://repo.com.net:8092/archiva/repository/internal/com/com-ejb-client/1.0.0/com-ejb-client-1.0.0.jar
Uploading: http://repo.com.net:8092/archiva/repository/internal/com/com-ejb-client/1.0.0/com-ejb-client-1.0.0.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 6.068s
[INFO] Finished at: Thu Oct 31 09:18:13 IST 2013
[INFO] Final Memory: 9M/77M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project com-ejb-client: Failed to deploy artifacts: Could not transfer artifact com:com-ejb-client:jar:1.0.0 from/to archiva.internal (http://repo.com.net:8092/archiva/repository/internal/): Failed to transfer http://repo.com.net:8092/archiva/repository/internal/com/com-ejb-client/1.0.0/com-ejb-client-1.0.0.jar. Error code 405, HTTP method PUT is not supported by this URL -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException"
MRM-1786,kosalads,Kosala De Silva,2013-10-30T23:02:32.69Z,2013-10-30T23:02:32.69Z,Archival logs
MRM-1786,olamy,Olivier Lamy (*$^%`),2013-10-30T23:38:18.14Z,2013-10-30T23:38:18.14Z,"by any chance is there already a file here: http://repo.com.net:8092/archiva/repository/internal/com/com-ejb-client/1.0.0/com-ejb-client-1.0.0.jar

I mean did you already deploy this 1.0.0.
By default it's not possible, you need to change the internal repository configuration.

"
MRM-1786,kosalads,Kosala De Silva,2013-10-31T00:59:35.636Z,2013-10-31T00:59:35.636Z,The file is not there. This is the first time i'm trying to deploy through eclipse.
MRM-1786,olamy,Olivier Lamy (*$^%`),2013-11-23T06:32:02.976Z,2013-11-23T06:32:02.976Z,"is your repository with id internal a group??
"
MRM-1786,kosalads,Kosala De Silva,2013-11-24T18:07:27.283Z,2013-11-24T18:07:27.283Z,"Can you clarify the above, not sure what you are referring to?
"
MRM-1786,olamy,Olivier Lamy (*$^%`),2013-11-24T18:15:43.644Z,2013-11-24T18:15:43.644Z,"What is your repository with id 'internal' a Managed repository or a Repository Group?
I checked the code and the only way to get back a 405 error is when you deploy to a Repository Group.
"
MRM-1786,bklau2006,BK Lau,2014-03-05T14:53:09.144Z,2014-03-05T14:53:09.144Z,"This also affects  Apache Archiva 2.0.0 :

03/05/14 10:32:58.773 WARNING: [Alerts] Artifact transfer failed : Could not transfer artifact com.abc:HelloWorld:war:1.0.0 from/to External-Repo (http://localhost:9080/archiva/repository/internal/): HTTP method PUT is not supported by this URL (405)
03/05/14 10:32:58.775 SEVERE: [DefaultTransferListener] Artifact transfer failed org.eclipse.aether.transfer.ArtifactTransferException: Could not transfer artifact com.datasynapse.fabric:HelloWorld:war:1.0.0 from/to SilverFabric-External-Repo (http://localhost:9080/archiva/repository/internal/): HTTP method PUT is not supported by this URL (405)
	at org.eclipse.aether.connector.basic.ArtifactTransportListener.transferFailed(ArtifactTransportListener.java:43)
	at org.eclipse.aether.connector.basic.BasicRepositoryConnector$TaskRunner.run(BasicRepositoryConnector.java:355)
	at org.eclipse.aether.connector.basic.BasicRepositoryConnector.put(BasicRepositoryConnector.java:274)
	at org.eclipse.aether.internal.impl.DefaultDeployer.deploy(DefaultDeployer.java:335)
	at org.eclipse.aether.internal.impl.DefaultDeployer.deploy(DefaultDeployer.java:269)
	at org.eclipse.aether.internal.impl.DefaultRepositorySystem.deploy(DefaultRepositorySystem.java:434)
	...
"
MRM-1786,kosalads,Kosala De Silva,2014-03-05T17:54:38.364Z,2014-03-05T17:54:38.364Z,"@BK Lau , Apparently this issue has been fixed with the 2.0.0 and I don't get the issue anymore. 

Based on your error log you need to change the repository path to http://localhost:9080/repository/internal/. New version doesn't have the archiva path.
 "
MRM-1786,jsharp,jsharp,2014-09-02T23:09:35.531Z,2014-09-02T23:09:35.531Z,"This was an error in the documentation. The docs for 1.4-M4 said to use repo path ..../archiva/repository/internal/ instead of .../repository/internal/. PUT wasn't supported by the URL because the URL was wrong : - (

Eric Barboni fixed the docs on Mar 6 with commit e35c74ee570e40b2ef4ce6245c73b90d9bbfef8d
"
MRM-1754,olamy,Olivier Lamy (*$^%`),2013-04-25T02:52:47.744Z,2013-04-25T02:52:47.744Z,"applied.
Thanks!"
MRM-1782,Chris Harris,Chris Harris,2013-10-21T21:09:50.113Z,2013-10-21T21:09:50.113Z,This issue appears to be fixed in 2.0.0-SNAPSHOT!
MRM-1700,olamy,Olivier Lamy (*$^%`),2012-10-19T12:18:08.306Z,2012-10-19T12:18:08.306Z,"fixed.
http://svn.apache.org/viewvc?view=revision&revision=r1400179"
MRM-1773,pablaasmo,Per Arnold Blaasmo,2013-08-06T15:00:00.387Z,2013-08-06T15:00:00.387Z,This error seems to be cause by a change in API of Java8 back ported to Java 1.7.0_25 and that cause log4j2 to crash.
MRM-1773,pablaasmo,Per Arnold Blaasmo,2013-09-01T11:43:52.599Z,2013-09-01T11:43:52.599Z,The upstream bug has been resolved in lo4j2-beta9. Upgrading to log4j2-beta9 will resolve this.
MRM-1773,pablaasmo,Per Arnold Blaasmo,2013-09-01T11:53:57.312Z,2013-09-01T11:53:57.312Z,Actually I was a little to quick. It has been solve in trunk upstream. Hopefully it will be in the next release of log4j2.
MRM-1773,skygolanur,Eric Barboni,2013-09-24T11:01:51.321Z,2013-09-24T11:01:51.321Z,"Hi, Archiva 2.0.0 SNAPSHOT is now using log4j2 beta 9.

Maybe it resolve your issue.

 "
MRM-1773,pablaasmo,Per Arnold Blaasmo,2013-09-25T01:32:00.27Z,2013-09-25T01:32:00.27Z,"Yes, this isssue can be regarded as solved."
MRM-1756,olamy,Olivier Lamy (*$^%`),2013-04-25T05:26:20.806Z,2013-04-25T05:26:20.806Z,"maybe start a discussion on dev@ that will be more easy to discuss than here
BTW you can try a POC in a branch."
MRM-1790,olamy,Olivier Lamy (*$^%`),2013-12-18T00:16:08.241Z,2013-12-18T00:16:08.241Z,"I wonder how you assign roles to ldap users??
Should not be possible you must map archiva roles to ldap group."
MRM-1790,fmarot,Francois MAROT,2015-09-14T08:40:13.691Z,2015-09-14T08:40:13.691Z,"I had the same problem and the solution was not obvious for me (despite it may be for most !) so I add this comment here (valid for Archiva 2.2):
if you don't want or (as me with Active Directory) can't make LDAP roles work, you can use manually defined roles by unselecting ""LDAP Rbac manager"" in the ""users runtime config"" screen. Then for each role, you can manually assign the users in the Role management panel.
Note: RBAC stands for ""Role Based Access Control"""
MRM-1724,olamy,Olivier Lamy (*$^%`),2012-12-10T17:28:07.755Z,2012-12-10T17:28:07.755Z,"looks to be a duplicate of MRM-1703.
Any chance you try current trunk build ?
see links to get a fresh build here: http://archiva.apache.org/developers/how-we-do-things.html"
MRM-1724,Chris Harris,Chris Harris,2012-12-10T18:00:51.142Z,2012-12-10T18:00:51.142Z,"You're right, Olivier.  This problem was indeed fixed.  Once I tried your latest successful build from today, it worked.

Thanks again!

 - Chris"
MRM-1721,olamy,Olivier Lamy (*$^%`),2012-12-10T17:24:28.109Z,2012-12-10T17:24:28.109Z,done !
MRM-1779,olamy,Olivier Lamy (*$^%`),2013-09-24T08:31:20.566Z,2013-09-24T08:31:20.566Z,fixed http://svn.apache.org/r1525882
MRM-1779,iguimiot,Guimiot Isabelle,2013-09-24T08:45:03.015Z,2013-09-24T08:45:03.015Z,Thanks ! :)
MRM-1747,olamy,Olivier Lamy (*$^%`),2013-02-15T08:52:31.601Z,2013-02-15T08:52:31.601Z,workaround move to xpp3 reader/writer
MRM-1747,olamy,Olivier Lamy (*$^%`),2013-02-15T18:25:07.06Z,2013-02-15T18:25:07.06Z,"so not so easy.
Moving to xpp3 break some unit tests.
So I will fix that in modello but this need an upgrade and all jpox plugins has been removed.
Something else to get back from archives..."
MRM-1747,olamy,Olivier Lamy (*$^%`),2013-02-16T17:36:03.351Z,2013-02-16T17:36:03.351Z,"must be fix
Waiting Chris test results."
MRM-1747,olamy,Olivier Lamy (*$^%`),2013-02-18T03:52:55.116Z,2013-02-18T03:52:55.116Z,https://builds.apache.org/view/A-F/view/Archiva/job/archiva-all-maven-3.x-jdk-1.6/ build >= #1968
MRM-1747,ChrisGWarp,Chris Graham,2013-02-18T06:03:18.496Z,2013-02-18T06:03:18.496Z,Yup. that fixed the IllegalState issue. On was 8 (not 9).
MRM-1747,olamy,Olivier Lamy (*$^%`),2013-02-18T06:20:00.281Z,2013-02-18T06:20:00.281Z,leave it open until modello release.
MRM-1777,ChrisGWarp,Chris Graham,2013-09-04T21:13:10.934Z,2013-09-04T21:13:10.934Z,"Update: The UI reports that the password has been changed, as it has remembered the setting, but the changes have not been persisted to the DB."
MRM-1777,olamy,Olivier Lamy (*$^%`),2013-12-15T19:27:37.248Z,2013-12-15T19:27:37.248Z,"fixed.
"
MRM-1709,olamy,Olivier Lamy (*$^%`),2012-11-22T16:07:33.051Z,2012-11-22T16:07:33.051Z,fixed.
MRM-1775,olamy,Olivier Lamy (*$^%`),2013-11-22T05:15:45.634Z,2013-11-22T05:15:45.634Z,"should be ${user.home}/.m2/security.properties

See other options here: http://archiva.apache.org/docs/1.4-M4/adminguide/customising-security.html
"
MRM-1715,olamy,Olivier Lamy (*$^%`),2012-11-21T16:02:14.802Z,2012-11-21T16:02:14.802Z,dupe of MRM-1488
MRM-1708,olamy,Olivier Lamy (*$^%`),2012-11-23T03:33:31.47Z,2012-11-23T03:33:31.47Z,fixed.
MRM-1748,skygolanur,Eric Barboni,2013-03-13T05:53:47.389Z,2013-03-13T05:53:47.389Z,"Hi, some form post value were not correctly forwarded to service. 

http://svn.apache.org/viewvc?view=revision&revision=r1455874"
MRM-1748,skygolanur,Eric Barboni,2013-04-11T10:06:56.177Z,2013-04-11T10:06:56.177Z,"Work for 1.4M4 after following patch

http://svn.apache.org/r1464644"
MRM-1703,olamy,Olivier Lamy (*$^%`),2012-10-22T09:51:59.417Z,2012-10-22T09:51:59.417Z,implemented.
MRM-1778,olamy,Olivier Lamy (*$^%`),2013-09-05T17:53:23.486Z,2013-09-05T17:53:23.486Z,"Can you have a look here http://archiva.apache.org/docs/1.4-M4/adminguide/logging.html
This option: -DAsyncLogger.WaitStrategy=Block
"
MRM-1778,mherbst,Martin Herbst,2013-09-06T01:48:32.828Z,2013-09-06T01:48:32.828Z,"I have changed it to ""Block"" but without any effect. CPU load stays at 100%"
MRM-1778,olamy,Olivier Lamy (*$^%`),2013-09-06T07:52:46.844Z,2013-09-06T07:52:46.844Z,jvm version? And a jvm dump could help.
MRM-1778,mherbst,Martin Herbst,2013-09-09T04:21:52.526Z,2013-09-09T04:21:52.526Z,"jvm version is Oracle Java SE (JRE) 1.7.0_25-b15. I was not able to upload the dump because it is too large. But you can download it from my dropbox: https://www.dropbox.com/s/noz2yoel5exvz2q/dump.bin.gz.
It was created with the following options jmap -dump:live,format=b"
MRM-1778,olamy,Olivier Lamy (*$^%`),2013-09-09T07:27:44.423Z,2013-09-09T07:27:44.423Z,"{code}
mb-olamy:Downloads olamy$ wget 'https://www.dropbox.com/s/noz2yoel5exvz2q/dump.bin.gz'
--2013-09-09 22:26:21--  https://www.dropbox.com/s/noz2yoel5exvz2q/dump.bin.gz
Resolving www.dropbox.com... 199.47.217.171
Connecting to www.dropbox.com|199.47.217.171|:443... connected.
HTTP request sent, awaiting response... 302 FOUND
Location: https://dl.dropboxusercontent.com/s/noz2yoel5exvz2q/dump.bin.gz?token_hash=AAFj9LAYaNcJDJDnuvjQSDaRIzt52uItYTTxD7LWFUD7qw [following]
--2013-09-09 22:26:22--  https://dl.dropboxusercontent.com/s/noz2yoel5exvz2q/dump.bin.gz?token_hash=AAFj9LAYaNcJDJDnuvjQSDaRIzt52uItYTTxD7LWFUD7qw
Resolving dl.dropboxusercontent.com... 107.22.222.175
Connecting to dl.dropboxusercontent.com|107.22.222.175|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 0 [application/octet-stream]
Saving to: ?dump.bin.gz?

    [ <=>                                                                                                                                               ] 0           --.-K/s   in 0s      

2013-09-09 22:26:24 (0.00 B/s) - ?dump.bin.gz? saved [0/0]

{code}
0 bytes file?
"
MRM-1778,mherbst,Martin Herbst,2013-09-09T07:56:17.886Z,2013-09-09T07:56:17.886Z,"Oh sorry, was my fault: this one should work https://www.dropbox.com/s/noz2yoel5exvz2q/dump.bin.gz"
MRM-1702,charlesk40,charles kim,2012-10-19T19:07:49.902Z,2012-10-19T19:07:49.902Z,"After looking at the patch again, patch seems to solve the concurrency issue but synchronized on the filename intern does put a burden when requesting the same artifact.  May be some one else can provide more elegant solution.
"
MRM-1702,olamy,Olivier Lamy (*$^%`),2013-12-13T06:51:14.949Z,2013-12-13T06:51:14.949Z,"I have started to work on a file locking mechanism.
It's not activated per default but you can activate via the ui.
 "
MRM-1713,olamy,Olivier Lamy (*$^%`),2012-11-20T17:55:10.978Z,2012-11-20T17:55:10.978Z,fixed http://svn.apache.org/r1411933
MRM-1741,olamy,Olivier Lamy (*$^%`),2013-01-13T18:18:54.734Z,2013-01-13T18:18:54.734Z,"we need more details :-)
How many repositories do you have ?
""and use mvn command to download some jar files"" you mean you are using archiva as a proxy ?
same result with current trunk ?"
MRM-1741,yhjhoo,Yang Hua Jie,2013-01-13T19:41:40.598Z,2013-01-13T19:41:40.598Z,"I was using the default ""internal"" repositories, using struts2.1.8 to do the testing, run mvn under apps source code folder."
MRM-1741,olamy,Olivier Lamy (*$^%`),2013-01-14T01:57:43.657Z,2013-01-14T01:57:43.657Z,can you try new ui ?
MRM-1741,olamy,Olivier Lamy (*$^%`),2013-10-23T18:29:39.249Z,2013-10-23T18:29:39.249Z,"which Archiva version are you using?
"
MRM-1741,olamy,Olivier Lamy (*$^%`),2013-10-23T18:29:56.087Z,2013-10-23T18:29:56.087Z,dupe of MRM-1785?
MRM-1745,mkleint,Milos Kleint,2013-03-03T03:49:09.025Z,2013-03-03T03:49:09.025Z,would be useful for netbeans integration - http://netbeans.org/bugzilla/show_bug.cgi?id=225811
MRM-1745,olamy,Olivier Lamy (*$^%`),2013-04-21T08:25:06.76Z,2013-04-21T08:25:06.76Z,done.
MRM-1736,olamy,Olivier Lamy (*$^%`),2013-01-08T17:15:13.409Z,2013-01-08T17:15:13.409Z,"implemented.
Configurable only via configuration files currently.
TODO tru the ui."
MRM-1736,olamy,Olivier Lamy (*$^%`),2013-01-15T18:18:53.995Z,2013-01-15T18:18:53.995Z,need more check when using only ldap (for users and roles)
MRM-1736,olamy,Olivier Lamy (*$^%`),2013-04-22T06:41:06.67Z,2013-04-22T06:41:06.67Z,this one is fixed!
MRM-1751,olamy,Olivier Lamy (*$^%`),2013-05-01T05:40:07.67Z,2013-05-01T05:40:07.67Z,just don't miss ti keep the current sys props as default value.
MRM-1751,oching,Maria Odea Ching,2013-05-13T11:26:28.843Z,2013-05-13T11:26:28.843Z,"Fix committed in [-r1481952|http://svn.apache.org/r1481952]

What's left to do here:
* add TTL to TemporaryGroupIndex which will be used on clean up task instead of the default one
* remove default sys property config for merged index TTL since we're already setting a default value in the repo group config "
MRM-1751,oching,Maria Odea Ching,2013-05-13T11:28:22.776Z,2013-05-13T11:28:22.776Z,"Fix committed in [-r1481952|http://svn.apache.org/r1481952]

What's left to do here:
* add TTL to TemporaryGroupIndex which will be used on clean up task instead of the default one
* remove default sys property config for merged index TTL since we're already setting a default value in the repo group config 
* update docs"
MRM-1751,oching,Maria Odea Ching,2013-05-20T01:27:19.138Z,2013-05-20T01:27:19.138Z,Added TTL to TemporaryGroupIndex in commit [-r1484377|http://svn.apache.org/r1484377].
MRM-1751,oching,Maria Odea Ching,2013-05-20T05:30:01.165Z,2013-05-20T05:30:01.165Z,Cleaned up unused config and methods in commit [-r1484418|http://svn.apache.org/r1484418]. Also updated documentation for the changes in repo group config.
MRM-1784,olamy,Olivier Lamy (*$^%`),2013-10-25T00:12:09.994Z,2013-10-25T00:12:09.994Z,"check here: http://archiva.apache.org/docs/2.0.0-SNAPSHOT/adminguide/redback-runtime-configuration.html

If it's not human readable :-)
Please reopen."
MRM-1784,Chris Harris,Chris Harris,2013-10-25T00:32:27.593Z,2013-10-25T00:32:27.593Z,"Hi, Olivier.  This clarification helps very much!  Thank you."
MRM-1711,olamy,Olivier Lamy (*$^%`),2012-11-19T06:55:07.513Z,2012-11-19T06:55:07.513Z,fixed.
MRM-1725,olamy,Olivier Lamy (*$^%`),2012-12-17T15:11:24.417Z,2012-12-17T15:11:24.417Z,fixed http://svn.apache.org/r1423145
MRM-1707,olamy,Olivier Lamy (*$^%`),2012-10-31T16:44:46.047Z,2012-10-31T16:44:46.047Z,"patch applied.
Thanks !"
MRM-1727,olamy,Olivier Lamy (*$^%`),2012-12-17T08:28:18.114Z,2012-12-17T08:28:18.114Z,fixed http://svn.apache.org/r1422945
MRM-1768,olamy,Olivier Lamy (*$^%`),2013-10-01T06:26:12.433Z,2013-10-01T06:26:12.433Z,is there any http server in front?
MRM-1768,predatorvi,Jeff Vincent,2013-10-01T11:32:31.777Z,2013-10-01T11:32:31.777Z,There is no http server.  We use iptables to forward port 80 requests to 8080 where only tomcat is running.
MRM-1768,olamy,Olivier Lamy (*$^%`),2013-11-26T20:50:50.893Z,2013-11-26T20:50:50.893Z,"any logs in chrome dev tools or firebug?
"
MRM-1772,hubbitus,Pavel,2013-07-15T08:11:41.088Z,2013-07-15T08:11:41.088Z,"I can confirm it what it is reproducible on two our Linux machines (Fedora and Gentoo), so it may be Linux relative. On all our colleagues on windows it does not reproduced.

Some details.

Parent pom among others have:
{code}
	<version>1.5.300-SNAPSHOT</version>
	<name>imus</name>
...
	<properties>
		<spring.version>2.5.6</spring.version>
		<spring3.version>3.2.2.RELEASE</spring3.version>
		<mule.version>2.1.1</mule.version>
		<aspectj.version>1.7.0</aspectj.version>
		<source.encoding>windows-1251</source.encoding>
		<maven.test.include>none</maven.test.include>
		<maven.compiler.source>1.7</maven.compiler.source>
		<maven.compiler.target>1.7</maven.compiler.target>
		<rootProjectPath>${basedir}</rootProjectPath>
		<rootProjectPath1>QWERTY</rootProjectPath1>
	</properties>
{code}

First child module:
{code}
	<build>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-antrun-plugin</artifactId>
				<version>1.1</version>
				<executions>
					<execution>
						<phase>validate</phase>
						<goals>
							<goal>run</goal>
						</goals>
						<configuration>
							<tasks>
								<echo>[project.parent.rootProjectPath]: ${project.parent.rootProjectPath}</echo>
								<echo>[project.parent.getRootProjectPath()]: ${project.parent.getRootProjectPath()}</echo>
								<echo>[project.parent.rootProjectPath1]: ${project.parent.rootProjectPath1}</echo>
								<echo>[project.parent.spring3.version]: ${project.parent.spring3.version}</echo>
								<echo>[project.parent.properties.spring3.version]: ${project.parent.properties.spring3.version}</echo>
								<echo>[project.parent.properties.rootProjectPath]: ${project.parent.properties.rootProjectPath}</echo>
								<echo>[project.parent.properties.rootProjectPath1]: ${project.parent.properties.rootProjectPath1}</echo>
								<echo>[project.parent.name]: ${project.parent.name}</echo>
								<echo>[project.parent.properties]: ${project.parent.properties}</echo>
							</tasks>
						</configuration>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>
{code}

*In out I see what project.parent.name resolved and even project.parent.properties, but not any property in collection (f.e. project.parent.rootProjectPath or project.parent.properties.rootProjectPath) as it should [by documentation|http://maven.apache.org/pom.html#Properties]*:
{code}
[INFO] --- maven-antrun-plugin:1.1:run (default) @ antinform-lib-parent ---
[INFO] Executing tasks
     [echo] [project.parent.rootProjectPath]: ${project.parent.rootProjectPath}
     [echo] [project.parent.getRootProjectPath()]: ${project.parent.getRootProjectPath()}
     [echo] [project.parent.rootProjectPath1]: ${project.parent.rootProjectPath1}
     [echo] [project.parent.spring3.version]: ${project.parent.spring3.version}
     [echo] [project.parent.properties.spring3.version]: ${project.parent.properties.spring3.version}
     [echo] [project.parent.properties.rootProjectPath]: ${project.parent.properties.rootProjectPath}
     [echo] [project.parent.properties.rootProjectPath1]: ${project.parent.properties.rootProjectPath1}
     [echo] [project.parent.name]: imus
     [echo] [project.parent.properties]: {rootProjectPath1=QWERTY, spring3.version=3.2.2.RELEASE, mule.version=2.1.1, aspectj.version=1.7.0, maven.compiler.target=1.7, source.encoding=windows-1251, maven.test.include=none, maven.compiler.source=1.7, spring.version=2.5.6, rootProjectPath=/home/pasha/imus/IdeaProjects/imus-1.5}
{code}

Version is 3.0.5:
{code}
$ mvn --version
Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true
Apache Maven 3.0.5 (rNON-CANONICAL_2013-03-12_12-47_mockbuild; 2013-03-12 16:47:10+0400)
Maven home: /usr/share/maven
Java version: 1.7.0_25, vendor: Oracle Corporation
Java home: /usr/java/jdk1.7.0_25/jre
Default locale: ru_RU, platform encoding: UTF-8
OS name: ""linux"", version: ""3.9.9-301.fc19.x86_64"", arch: ""amd64"", family: ""unix""
{code}
I'm use it on Fedora Linux."
MRM-1772,hubbitus,Pavel,2013-10-01T12:19:56.093Z,2013-10-01T12:19:56.093Z,"Sorry, how it may be fix version 2.0.0 if it still reproduced in 3.0.5?"
MRM-1772,olamy,Olivier Lamy (*$^%`),2013-10-01T19:40:37.323Z,2013-10-01T19:40:37.323Z,"3.0.5 is Apache Maven version I believe.
2.0.0 is Apache Archiva version.
:-)"
MRM-1772,hubbitus,Pavel,2013-10-06T03:23:48.189Z,2013-10-06T03:23:48.189Z,"Ooops. Indeed, but it is maven bug I think."
MRM-1772,hubbitus,Pavel,2013-10-06T03:30:09.154Z,2013-10-06T03:30:09.154Z,Fill maven bug - MNG-5522
MRM-1772,olamy,Olivier Lamy (*$^%`),2013-10-06T17:06:46.076Z,2013-10-06T17:06:46.076Z,Nope it's an Archiva bug.
MRM-1772,olamy,Olivier Lamy (*$^%`),2013-12-10T17:11:27.968Z,2013-12-10T17:11:27.968Z,I just don't understand why you are using ${project.parent.organization.name} because it's already inherited...
MRM-1772,hubbitus,Pavel,2013-12-14T09:16:10.662Z,2013-12-14T09:16:10.662Z,"It is a main goal here. It does not inherited, it may be refilled. So, we can operate and even compare two values.
But again - it is maven bug, not Archiva I think."
MRM-1758,olamy,Olivier Lamy (*$^%`),2013-05-01T05:41:02.594Z,2013-05-01T05:41:02.594Z,WDYM ? which classes ?
MRM-1794,olamy,Olivier Lamy (*$^%`),2013-12-02T21:30:52.312Z,2013-12-02T21:30:52.312Z,2.2.1 in trunk
MRM-1793,olamy,Olivier Lamy (*$^%`),2013-11-19T21:14:13.902Z,2013-11-19T21:14:13.902Z,fixed
MRM-1701,olamy,Olivier Lamy (*$^%`),2012-10-19T17:48:11.73Z,2012-10-19T17:48:11.73Z,fixed: http://svn.apache.org/r1400323 
MRM-1732,olamy,Olivier Lamy (*$^%`),2012-12-21T12:01:13.922Z,2012-12-21T12:01:13.922Z,done.
MRM-1776,olamy,Olivier Lamy (*$^%`),2013-11-14T19:40:37.918Z,2013-11-14T19:40:37.918Z,fixed: http://svn.apache.org/r1542154
MRM-1719,olamy,Olivier Lamy (*$^%`),2012-11-27T03:54:18.595Z,2012-11-27T03:54:18.595Z,"* archiva:repository-create 
* archiva:index
* archiva:proxy-create
* archiva:browse
* etc..."
MRM-1730,olamy,Olivier Lamy (*$^%`),2012-12-19T11:14:25.523Z,2012-12-19T11:14:25.523Z,a bit faster due to some synchronization  removed.
MRM-1726,olamy,Olivier Lamy (*$^%`),2012-12-18T09:55:08.102Z,2012-12-18T09:55:08.102Z,fixed http://svn.apache.org/r1423489
MRM-1729,olamy,Olivier Lamy (*$^%`),2012-12-19T09:21:40.011Z,2012-12-19T09:21:40.011Z,"fixed http://svn.apache.org/r1423878
will be in https://builds.apache.org/view/A-F/view/Archiva/job/archiva-all-maven-3.x-jdk-1.6/ #1782"
MRM-1729,olamy,Olivier Lamy (*$^%`),2012-12-19T11:09:20.165Z,2012-12-19T11:09:20.165Z,"better fix http://svn.apache.org/r1423957
will be in https://builds.apache.org/view/A-F/view/Archiva/job/archiva-all-maven-3.x-jdk-1.6/ #1784"
MRM-1757,oching,Maria Odea Ching,2013-05-01T02:41:38.771Z,2013-05-01T02:41:38.771Z,"The problem occurs if the URL specified in the Application Link in UI Configuration has a trailing '/' at the end of it. Workaround is to remove the '/' in the URL (e.g. http://artifacts.repository.com instead of http://artifacts.repository.com/). 

I'll add a fix for it as well to remove any trailing '/' in the base url when generating the artifact link.

"
MRM-1757,oching,Maria Odea Ching,2013-05-01T05:10:44.233Z,2013-05-01T05:10:44.233Z,Fix committed in [r1477941|http://svn.apache.org/r1477941]. Any trailing '/' in set {{Application Url}} is trimmed upon saving of {{UI Configuration}}.
MRM-1787,olamy,Olivier Lamy (*$^%`),2013-12-18T00:06:52.149Z,2013-12-18T00:06:52.149Z,"fixed
"
MRM-1761,olamy,Olivier Lamy (*$^%`),2013-12-08T20:46:51.333Z,2013-12-08T20:46:51.333Z,fixed
MRM-1767,predatorvi,Jeff Vincent,2013-06-04T11:56:59.338Z,2013-06-04T11:56:59.338Z,"The behavior was noticed first after being logged in as ADMIN and attempting to delete an obsolete groupId.  I had to pick the repository to delete from and saw the errors.  I was able to reselect the repository, but it still gets into that state."
MRM-1767,olamy,Olivier Lamy (*$^%`),2013-12-08T21:41:41.913Z,2013-12-08T21:41:41.913Z,"The list box contains only the repositories the current user have access.
I cannot reproduce.
So I wonder how you can have in the list repositories you don't have access.

"
MRM-1767,predatorvi,Jeff Vincent,2013-12-08T23:26:35.276Z,2013-12-08T23:26:35.276Z,"That is part of the problem.  I had rights to all repositories (ADMIN) so I shouldn't ever see a permissions error.

I'm not currently at the company that was using Archiva so I'll have to try and install it fresh to duplicate."
MRM-1767,skygolanur,Eric Barboni,2014-10-06T15:22:46.182Z,2014-10-06T15:22:46.182Z,"According to the screenshot you have no privilege to access 3rd-party-releasesc3p0 repository but I guess the repository is   3rd-party-releases with subfolder c3p0.

Attempt fix: https://git-wip-us.apache.org/repos/asf?p=archiva.git;a=commitdiff;h=8385e531
"
MRM-1767,skygolanur,Eric Barboni,2014-10-06T18:01:43.628Z,2014-10-06T18:01:43.628Z,javascript Location was wrong after repository selection
MRM-1957,hudson,Hudson,2017-07-16T16:37:48.694Z,2017-07-16T16:37:48.694Z,"FAILURE: Integrated in Jenkins build archiva-master-build #1093 (See [https://builds.apache.org/job/archiva-master-build/1093/])
[MRM-1957] Spliting statistics plugin module (martin_s: [https://github.com/apache/archiva/commit/f637c02c714952a88b999d00ecf78bb18975d0d1])
* (add) archiva-modules/metadata/metadata-statistics-api/src/main/java/org/apache/archiva/metadata/repository/stats/model/RepositoryWalkingStatisticsProvider.java
* (edit) archiva-modules/archiva-web/archiva-rest/archiva-rest-api/src/main/java/org/apache/archiva/rest/api/model/ArchivaRepositoryStatistics.java
* (delete) archiva-modules/plugins/repository-statistics/src/main/java/org/apache/archiva/metadata/repository/stats/RepositoryStatisticsManager.java
* (edit) archiva-modules/plugins/repository-statistics/src/test/java/org/apache/archiva/metadata/repository/stats/RepositoryStatisticsManagerTest.java
* (edit) pom.xml
* (edit) archiva-modules/archiva-base/archiva-repository-admin/archiva-repository-admin-default/src/main/java/org/apache/archiva/admin/repository/managed/DefaultManagedRepositoryAdmin.java
* (edit) archiva-modules/plugins/repository-statistics/src/main/java/org/apache/archiva/metadata/repository/stats/DefaultRepositoryStatisticsManager.java
* (edit) archiva-modules/archiva-web/archiva-rest/archiva-rest-services/src/main/java/org/apache/archiva/rest/services/DefaultReportRepositoriesService.java
* (edit) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/java/org/apache/archiva/scheduler/repository/ArchivaRepositoryScanningTaskExecutorPhase2Test.java
* (edit) archiva-modules/metadata/pom.xml
* (edit) archiva-modules/archiva-karaf/archiva-features/src/main/resources/features.xml
* (edit) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/main/java/org/apache/archiva/scheduler/repository/ArchivaRepositoryScanningTaskExecutor.java
* (edit) archiva-modules/plugins/repository-statistics/pom.xml
* (edit) archiva-modules/plugins/repository-statistics/src/main/java/org/apache/archiva/metadata/repository/stats/RepositoryStatisticsFactory.java
* (edit) archiva-modules/archiva-scheduler/archiva-scheduler-repository-api/pom.xml
* (edit) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/java/org/apache/archiva/scheduler/repository/TestRepositoryStatisticsManager.java
* (edit) archiva-modules/archiva-web/archiva-webdav/pom.xml
* (delete) archiva-modules/plugins/repository-statistics/src/main/java/org/apache/archiva/metadata/repository/stats/RepositoryStatistics.java
* (add) archiva-modules/metadata/metadata-statistics-api/src/main/java/org/apache/archiva/metadata/repository/stats/model/RepositoryStatistics.java
* (add) archiva-modules/plugins/metadata-store-jcr/src/test/java/org/apache/archiva/metadata/repository/stats/JcrRepositoryStatisticsGatheringTest.java
* (edit) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/main/java/org/apache/archiva/scheduler/repository/DefaultRepositoryArchivaTaskScheduler.java
* (edit) archiva-modules/plugins/metadata-store-jcr/src/main/java/org/apache/archiva/metadata/repository/jcr/JcrMetadataRepository.java
* (edit) archiva-modules/archiva-web/archiva-rest/archiva-rest-api/src/main/java/org/apache/archiva/rest/api/services/ReportRepositoriesService.java
* (edit) archiva-modules/archiva-web/archiva-webdav/src/main/java/org/apache/archiva/webdav/ArchivaDavLocatorFactory.java
* (delete) archiva-modules/plugins/repository-statistics/src/test/java/org/apache/archiva/metadata/repository/stats/JcrRepositoryStatisticsGatheringTest.java
* (edit) archiva-modules/archiva-base/archiva-repository-admin/archiva-repository-admin-default/pom.xml
* (add) archiva-modules/metadata/metadata-statistics-api/src/main/java/org/apache/archiva/metadata/repository/stats/model/RepositoryStatisticsManager.java
* (add) archiva-modules/metadata/metadata-statistics-api/src/test/java/org/apache/archiva/metadata/repository/stats/model/DefaultRepositoryStatisticsTest.java
* (edit) archiva-modules/metadata/metadata-repository-api/src/test/java/org/apache/archiva/metadata/repository/AbstractMetadataRepositoryTest.java
* (edit) archiva-modules/plugins/metadata-store-jcr/pom.xml
* (add) archiva-modules/metadata/metadata-statistics-api/src/main/java/org/apache/archiva/metadata/repository/stats/model/DefaultRepositoryStatistics.java
* (edit) archiva-modules/archiva-web/archiva-rest/archiva-rest-services/src/main/java/org/apache/archiva/rest/services/DefaultManagedRepositoriesService.java
* (add) archiva-modules/metadata/metadata-statistics-api/src/main/java/org/apache/archiva/metadata/repository/stats/model/RepositoryStatisticsProvider.java
* (edit) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/java/org/apache/archiva/scheduler/repository/AbstractArchivaRepositoryScanningTaskExecutorTest.java
* (add) archiva-modules/metadata/metadata-statistics-api/pom.xml
* (add) archiva-modules/plugins/metadata-store-jcr/src/test/resources/artifacts.xml.gz
"
MRM-1945,hudson,Hudson,2017-05-28T21:38:14.459Z,2017-05-28T21:38:14.459Z,"SUCCESS: Integrated in Jenkins build archiva-master-build #1048 (See [https://builds.apache.org/job/archiva-master-build/1048/])
[MRM-1945] Fixing race condition (martin_s: [https://github.com/apache/archiva/commit/878287b7b3a8c42a4a78028ca4d7b5204b4a5ab8])
* (edit) archiva-modules/archiva-base/archiva-filelock/src/test/java/org/apache/archiva/common/filelock/DefaultFileLockManagerTest.java
* (edit) archiva-modules/archiva-base/archiva-filelock/src/main/java/org/apache/archiva/common/filelock/DefaultFileLockManager.java
"
MRM-1945,effrafax,Martin Stockhammer,2017-06-11T15:01:23.399Z,2017-06-11T15:01:23.399Z,Error vanished for now. 
MRM-1914,olamy,Olivier Lamy (*$^%`),2016-03-08T10:31:18.646Z,2016-03-08T10:31:18.646Z,"Fixed with https://git-wip-us.apache.org/repos/asf?p=archiva.git;a=commit;h=95077dba05e56f29cc1bf4d69e37fa18cc253582

Thanks for report!"
MRM-1958,effrafax,Martin Stockhammer,2017-08-17T05:22:10.548Z,2017-08-17T05:22:10.548Z,"Hi Gregory,

I will look at it.
What storage type do you use? file, jcr or Cassandra?

Greetings

Martin
"
MRM-1958,gzyrek,Gregory Zyrek,2017-08-17T07:49:36.54Z,2017-08-17T07:49:36.54Z,"Hi Martin,

I'm using default jcr. 

Best regards,
Gregory"
MRM-1958,effrafax,Martin Stockhammer,2017-08-28T19:33:20.388Z,2017-08-28T19:33:20.388Z,"Hi Gregory,

I think I have fixed the issue. The fix has been committed to the archiva-2.x branch (is for the 2.2.4-SNAPSHOT-Version). 
It would be helpful, if you could test the changes, either by building this branch locally, or you can wait for the next snapshot build, that should be available during the next hours on our repository: https://archiva-repository.apache.org/archiva/repository/snapshots/

Greetings

Martin"
MRM-1958,hudson,Hudson,2017-08-28T19:59:54.059Z,2017-08-28T19:59:54.059Z,"FAILURE: Integrated in Jenkins build archiva-2.x #4 (See [https://builds.apache.org/job/archiva-2.x/4/])
[MRM-1958] Merging fix from master tree (martin_s: [https://github.com/apache/archiva/commit/85687a34e0c1368b30fbfba6e551a002291d3ee2])
* (edit) archiva-modules/archiva-base/archiva-consumers/archiva-core-consumers/src/test/java/org/apache/archiva/consumers/core/AbstractArtifactConsumerTest.java
* (edit) archiva-modules/archiva-base/archiva-consumers/archiva-core-consumers/src/main/java/org/apache/archiva/consumers/core/repository/AbstractRepositoryPurge.java
* (edit) archiva-modules/archiva-base/archiva-consumers/archiva-core-consumers/src/test/java/org/apache/archiva/consumers/core/repository/RepositoryPurgeConsumerTest.java
* (edit) archiva-modules/archiva-base/archiva-consumers/archiva-core-consumers/src/test/java/org/apache/archiva/consumers/core/repository/AbstractRepositoryPurgeTest.java
"
MRM-1958,gzyrek,Gregory Zyrek,2017-08-29T14:55:33.651Z,2017-08-29T14:55:33.651Z,"Hi Martin,

I've tested solution today. Now Archiva works properly. Thanks. :) Some more tests will be done until Friday. If any problems occur I'll inform you. :)

Greetings
Gregory  "
MRM-1958,effrafax,Martin Stockhammer,2017-08-30T06:53:13.106Z,2017-08-30T06:53:13.106Z,"Great to hear. 
Currently there is no release date scheduled for the 2.2.4 version. We are working mainly on the 3.0 version.
If the fix works as expected, can you use the snapshot version or do you have to wait for the new 2.2.4 release?"
MRM-1958,effrafax,Martin Stockhammer,2017-09-20T19:23:07.103Z,2017-09-20T19:23:07.103Z,"No more complaints. Integrated into 3.0.0 and 2.2.4.

"
MRM-1932,durgapasupuleti,Durga Pasupuleti,2017-03-03T13:56:20.021Z,2017-03-03T13:56:20.021Z,"Any update on this error. We too facing the same issue while accessing the artifacts from the UI. But able to upload and download from maven. 

Thanks"
MRM-1932,snissel,Sven Nissel,2017-05-19T11:04:23.962Z,2017-05-19T11:04:23.962Z,"I have the same problem. I replaced the artefactname with xxx
{code}
2017-05-19 12:58:15,810 [pool-5-thread-1] WARN  org.apache.archiva.consumers.metadata.ArchivaMetadataCreationConsumer [] - Error occurred persisting metadata for artifact:de/xxxxx/xxxx/xxxx/xxxxxxx/2.9.26-SNAPSHOT/xxxxxxxxxx-2.9.26-20170518.130655-8.pom (repository:snapshots); message: failed to retrieve item state of item ca66abe9-078e-4ced-9aec-0bbde2d05786
org.apache.archiva.metadata.repository.MetadataRepositoryException: failed to retrieve item state of item ca66abe9-078e-4ced-9aec-0bbde2d05786
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.updateNamespace(JcrMetadataRepository.java:380) ~[metadata-store-jcr-2.2.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.updateArtifact(JcrMetadataRepository.java:186) ~[metadata-store-jcr-2.2.1.jar:?]
	at org.apache.archiva.consumers.metadata.ArchivaMetadataCreationConsumer.processFile(ArchivaMetadataCreationConsumer.java:188) [archiva-metadata-consumer-2.2.1.jar:?]
	at org.apache.archiva.consumers.metadata.ArchivaMetadataCreationConsumer.processFile(ArchivaMetadataCreationConsumer.java:222) [archiva-metadata-consumer-2.2.1.jar:?]
	at org.apache.archiva.repository.scanner.functors.ConsumerProcessFileClosure.execute(ConsumerProcessFileClosure.java:60) [archiva-repository-scanner-2.2.1.jar:?]
	at org.apache.commons.collections.functors.IfClosure.execute(IfClosure.java:118) [commons-collections-3.2.1.jar:3.2.1]
	at org.apache.commons.collections.CollectionUtils.forAllDo(CollectionUtils.java:389) [commons-collections-3.2.1.jar:3.2.1]
	at org.apache.archiva.repository.scanner.RepositoryScannerInstance.directoryWalkStep(RepositoryScannerInstance.java:163) [archiva-repository-scanner-2.2.1.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.fireStep(DirectoryWalker.java:174) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:392) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scanDir(DirectoryWalker.java:386) [plexus-utils-3.0.15.jar:?]
	at org.codehaus.plexus.util.DirectoryWalker.scan(DirectoryWalker.java:345) [plexus-utils-3.0.15.jar:?]
	at org.apache.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:141) [archiva-repository-scanner-2.2.1.jar:?]
	at org.apache.archiva.repository.scanner.DefaultRepositoryScanner.scan(DefaultRepositoryScanner.java:69) [archiva-repository-scanner-2.2.1.jar:?]
	at org.apache.archiva.scheduler.repository.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:150) [archiva-scheduler-repository-2.2.1.jar:?]
	at org.apache.archiva.scheduler.repository.ArchivaRepositoryScanningTaskExecutor.executeTask(ArchivaRepositoryScanningTaskExecutor.java:54) [archiva-scheduler-repository-2.2.1.jar:?]
	at org.apache.archiva.redback.components.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:117) [spring-taskqueue-2.1.jar:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [?:1.7.0_75]
	at java.util.concurrent.FutureTask.run(FutureTask.java:262) [?:1.7.0_75]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [?:1.7.0_75]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [?:1.7.0_75]
	at java.lang.Thread.run(Thread.java:745) [?:1.7.0_75]
Caused by: javax.jcr.RepositoryException: failed to retrieve item state of item ca66abe9-078e-4ced-9aec-0bbde2d05786
	at org.apache.jackrabbit.core.ItemManager.getItemData(ItemManager.java:388) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.ItemManager.getNode(ItemManager.java:669) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.ItemManager.getNode(ItemManager.java:647) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1302) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.session.AddNodeOperation.perform(AddNodeOperation.java:111) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.session.AddNodeOperation.perform(AddNodeOperation.java:37) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:216) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.addNodeWithUuid(NodeImpl.java:1818) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1770) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.commons.JcrUtils.getOrAddNode(JcrUtils.java:957) ~[jackrabbit-jcr-commons-2.9.1.jar:?]
	at org.apache.jackrabbit.commons.JcrUtils.getOrAddNode(JcrUtils.java:930) ~[jackrabbit-jcr-commons-2.9.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.getOrAddNodeByPath(JcrMetadataRepository.java:1600) ~[metadata-store-jcr-2.2.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.getOrAddNamespaceNode(JcrMetadataRepository.java:1634) ~[metadata-store-jcr-2.2.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.updateNamespace(JcrMetadataRepository.java:375) ~[metadata-store-jcr-2.2.1.jar:?]
	... 26 more
Caused by: org.apache.jackrabbit.core.state.ItemStateException: failed to read bundle: ca66abe9-078e-4ced-9aec-0bbde2d05786: java.io.EOFException
	at org.apache.jackrabbit.core.persistence.bundle.BundleFsPersistenceManager.loadBundle(BundleFsPersistenceManager.java:249) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.bundle.AbstractBundlePersistenceManager.getBundleCacheMiss(AbstractBundlePersistenceManager.java:769) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.bundle.AbstractBundlePersistenceManager.getBundle(AbstractBundlePersistenceManager.java:752) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.bundle.AbstractBundlePersistenceManager.load(AbstractBundlePersistenceManager.java:490) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.SharedItemStateManager.loadItemState(SharedItemStateManager.java:1873) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.SharedItemStateManager.getNonVirtualItemState(SharedItemStateManager.java:1793) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.SharedItemStateManager.getItemState(SharedItemStateManager.java:270) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.LocalItemStateManager.getNodeState(LocalItemStateManager.java:110) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.LocalItemStateManager.getItemState(LocalItemStateManager.java:175) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.XAItemStateManager.getItemState(XAItemStateManager.java:260) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.SessionItemStateManager.getItemState(SessionItemStateManager.java:161) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.ItemManager.getItemData(ItemManager.java:382) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.ItemManager.getNode(ItemManager.java:669) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.ItemManager.getNode(ItemManager.java:647) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1302) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.session.AddNodeOperation.perform(AddNodeOperation.java:111) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.session.AddNodeOperation.perform(AddNodeOperation.java:37) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:216) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.addNodeWithUuid(NodeImpl.java:1818) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1770) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.commons.JcrUtils.getOrAddNode(JcrUtils.java:957) ~[jackrabbit-jcr-commons-2.9.1.jar:?]
	at org.apache.jackrabbit.commons.JcrUtils.getOrAddNode(JcrUtils.java:930) ~[jackrabbit-jcr-commons-2.9.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.getOrAddNodeByPath(JcrMetadataRepository.java:1600) ~[metadata-store-jcr-2.2.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.getOrAddNamespaceNode(JcrMetadataRepository.java:1634) ~[metadata-store-jcr-2.2.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.updateNamespace(JcrMetadataRepository.java:375) ~[metadata-store-jcr-2.2.1.jar:?]
	... 26 more
Caused by: java.io.EOFException
	at java.io.DataInputStream.readFully(DataInputStream.java:197) ~[?:1.7.0_75]
	at java.io.DataInputStream.readFully(DataInputStream.java:169) ~[?:1.7.0_75]
	at org.apache.jackrabbit.core.persistence.util.BundleReader.readBytes(BundleReader.java:671) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.util.BundleReader.readName(BundleReader.java:522) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.util.BundleReader.readQName(BundleReader.java:471) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.util.BundleReader.readBundleNew(BundleReader.java:195) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.util.BundleReader.readBundle(BundleReader.java:146) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.util.BundleBinding.readBundle(BundleBinding.java:152) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.bundle.BundleFsPersistenceManager.loadBundle(BundleFsPersistenceManager.java:242) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.bundle.AbstractBundlePersistenceManager.getBundleCacheMiss(AbstractBundlePersistenceManager.java:769) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.bundle.AbstractBundlePersistenceManager.getBundle(AbstractBundlePersistenceManager.java:752) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.persistence.bundle.AbstractBundlePersistenceManager.load(AbstractBundlePersistenceManager.java:490) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.SharedItemStateManager.loadItemState(SharedItemStateManager.java:1873) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.SharedItemStateManager.getNonVirtualItemState(SharedItemStateManager.java:1793) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.SharedItemStateManager.getItemState(SharedItemStateManager.java:270) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.LocalItemStateManager.getNodeState(LocalItemStateManager.java:110) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.LocalItemStateManager.getItemState(LocalItemStateManager.java:175) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.XAItemStateManager.getItemState(XAItemStateManager.java:260) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.state.SessionItemStateManager.getItemState(SessionItemStateManager.java:161) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.ItemManager.getItemData(ItemManager.java:382) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.ItemManager.getNode(ItemManager.java:669) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.ItemManager.getNode(ItemManager.java:647) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1302) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.session.AddNodeOperation.perform(AddNodeOperation.java:111) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.session.AddNodeOperation.perform(AddNodeOperation.java:37) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:216) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.addNodeWithUuid(NodeImpl.java:1818) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.core.NodeImpl.addNode(NodeImpl.java:1770) ~[jackrabbit-core-2.9.1.jar:2.9.1]
	at org.apache.jackrabbit.commons.JcrUtils.getOrAddNode(JcrUtils.java:957) ~[jackrabbit-jcr-commons-2.9.1.jar:?]
	at org.apache.jackrabbit.commons.JcrUtils.getOrAddNode(JcrUtils.java:930) ~[jackrabbit-jcr-commons-2.9.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.getOrAddNodeByPath(JcrMetadataRepository.java:1600) ~[metadata-store-jcr-2.2.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.getOrAddNamespaceNode(JcrMetadataRepository.java:1634) ~[metadata-store-jcr-2.2.1.jar:?]
	at org.apache.archiva.metadata.repository.jcr.JcrMetadataRepository.updateNamespace(JcrMetadataRepository.java:375) ~[metadata-store-jcr-2.2.1.jar:?]
	... 26 more
{code}

Archiva Version: 2.2.1"
MRM-1932,loicdesguin,Loc Desguin,2017-11-02T16:20:46.548Z,2017-11-02T16:20:46.548Z,"Hello,

Facing the same trouble, is there any news about this error ?
Regards"
MRM-1932,effrafax,Martin Stockhammer,2017-11-06T21:02:17.832Z,2017-11-06T21:02:17.832Z,"I think, the jackrabit (jcr) database got corrupt. Unfortunately we have not way to initiate a scan in the jcr data to fix corrupt entries. 
And I do not know any way to find bad artifacts / entries. 
I do not know how this can happen either, because this is all jackrabbit code and we use it as it is.

The following may lead to a complete unusable archiva instance, so before you try anything suggested here, backup your archiva
data (archiva should be shutdown before taking a backup), so that you can always switch back.

Maybe this can work: 
* Stop your archiva instance
* Delete the complete data/jcr directory in the archiva installation. 
* start your archiva instance

Depending on your configuration the scan starts immediately after startup. If not, you should initiate a directory scan on the repositories.
The scan may take a long time, if you have a large repository.

"
MRM-1901,marklmarkus,Markus Markl,2016-02-04T09:46:41.645Z,2016-02-04T09:46:41.645Z,"It seems that this happens when setting the property ""security.policy.password.previous.count"" to value ""0"""
MRM-1901,jazz,Jasvinder Bahra,2016-02-08T15:40:07.168Z,2016-02-08T15:40:07.168Z,"I can confirm that my ""security.policy.password.previous.count"" property is indeed set to 0.

However, when I changed that value to 10, and then attempted to change my password once again, the same stack trace presented."
MRM-1901,pbuchheit,Patrick Buchheit,2016-04-08T20:02:38.935Z,2016-04-08T20:02:38.935Z,I'm seeing this issue as well. It also happens when attempting to reset a lost or expired password. Any word on a timeframe for this being fixed?
MRM-1946,effrafax,Martin Stockhammer,2017-06-01T05:28:40.683Z,2017-06-01T05:28:40.683Z,"The exception occurred on the client. Could you please check the archiva server logs and give more information about the server side.
Archiva 2.2.3 is released now and we recommend to upgrade.

Martin



-- 
Diese Nachricht wurde von meinem Android-Gert mit K-9 Mail gesendet.
"
MRM-1946,sujeetkb2003,Sujeet Kumar,2017-06-01T23:48:09.892Z,2017-06-01T23:48:09.892Z,"I get below error from server side (archiva.xml)

caused by: org.apache.archiva.redback.rbac.RbacObjectNotFoundException: Unable to find RBAC Object 'jira-bajajadmin' of type org.apache.archiva.redback.rbac.jdo.JdoRole using fetch-group 'null'

I tried to upgrade to archiva 2.2.3 but when I provide LDAP configuration in ""User Runtime configuration"", i.e. even after providing the value for root context. it complains that the value of rootContext does not exist"
MRM-1946,effrafax,Martin Stockhammer,2017-06-11T14:48:36.724Z,2017-06-11T14:48:36.724Z,"Hi Sujeet,

please add more detailed information:
- Is it a standalone installation or deployed in a application server?
- Do you use a remote database or the provided local database?

It would be helpful, if you could increase the log level and provide more log output and stacktraces."
MRM-1946,effrafax,Martin Stockhammer,2017-08-30T18:18:11.589Z,2017-08-30T18:18:11.589Z,"No answer, will close the issue."
MRM-1917,ganthore,ganthore,2016-09-13T18:06:51.408Z,2016-09-13T18:06:51.408Z,"I'm experiencing a similar problem with a brand new setup. I've tested against both 2.2.0 and 2.2.1 so far using the standalone distribution that runs through jetty.

It seems like the API is non-functional. I can consistently reproduce a 204 error, but when I browse to the autoindex via http, the content loads fine (http://archiva.foo.bar.com/repository/internal/com/bar/foo/myArtifact/7.2.0/)

Note that 7.2.0 is the latest and ONLY artifact in the folder right now. I also tried using v=7.2.0 but it still throws a 204. 

Curl output shows:

{code}
curl -i -v http://archiva.foo.bar.com:8080/restServices/archivaServices/searchService/artifact?g=com.bar.foo&a=myArtifact&v=LATEST&p=zip
> *   Trying 10.x.x.x...
* Connected to archiva.foo.bar.com (10.x.x.x) port 8080 (#0)
> GET /restServices/archivaServices/searchService/artifact?g=com.bar.foo HTTP/1.1
> Host: archiva.foo.bar.com:8080
> User-Agent: curl/7.43.0
> Accept: */*
>
< HTTP/1.1 204 No Content
HTTP/1.1 204 No Content
< Date: Tue, 13 Sep 2016 17:57:45 GMT
Date: Tue, 13 Sep 2016 17:57:45 GMT
< Set-Cookie: JSESSIONID=13ft4pukpyn7j8d8y0yggdcz;Path=/
Set-Cookie: JSESSIONID=13ft4pukpyn7j8d8y0yggdcz;Path=/
< Expires: Thu, 01 Jan 1970 00:00:00 GMT
Expires: Thu, 01 Jan 1970 00:00:00 GMT
< Content-Length: 0
Content-Length: 0
< Date: Tue, 13 Sep 2016 17:57:45 GMT
Date: Tue, 13 Sep 2016 17:57:45 GMT
< Server: Jetty(8.1.14.v20131031)
Server: Jetty(8.1.14.v20131031)

<
* Connection #0 to host archiva.foo.bar.com left intact
{code}"
MRM-1917,effrafax,Martin Stockhammer,2016-09-16T19:47:25.757Z,2016-09-16T19:47:25.757Z,"I cannot reproduce the problem. Could you please provide more information:
- How many repositories do you have in your configuration?
- Did you check the permissions of your repository?
- What type of content storage do you use?
- How many versions of your artifact are stored in your repository
- What is the configured cron string of your repository?

[~ganthore]: if you get always the 204, then I think the artifact is not indexed. Do you find your artifact by the Search form in the Web UI? 
"
MRM-1940,hudson,Hudson,2017-05-05T11:45:14.982Z,2017-05-05T11:45:14.982Z,"SUCCESS: Integrated in Jenkins build archiva-master-build #1020 (See [https://builds.apache.org/job/archiva-master-build/1020/])
MRM-1933, MRM-1940: Fixing repository check (martin_s: [https://github.com/apache/archiva/commit/2bf5154f1366fc21c4ecb02ef4ef71ca6fdc5a45])
* (edit) archiva-modules/archiva-base/archiva-repository-admin/archiva-repository-admin-api/src/main/java/org/apache/archiva/admin/model/beans/RemoteRepository.java
* (edit) archiva-modules/archiva-web/archiva-rest/archiva-rest-services/src/test/java/org/apache/archiva/rest/services/RemoteRepositoriesServiceTest.java
* (edit) archiva-modules/archiva-web/archiva-rest/archiva-rest-services/src/main/java/org/apache/archiva/rest/services/DefaultRemoteRepositoriesService.java
"
MRM-1940,effrafax,Martin Stockhammer,2017-05-13T16:08:09.148Z,2017-05-13T16:08:09.148Z,Fix will be released with 2.2.3
MRM-1940,kcris,Cristian Tarsoaga,2017-05-13T21:04:18.592Z,2017-05-13T21:04:18.592Z,"already got the 2.2.3 nightly build, issue is fixed
thanks a lot Martin!
"
MRM-1954,hudson,Hudson,2017-06-13T22:50:29.361Z,2017-06-13T22:50:29.361Z,"SUCCESS: Integrated in Jenkins build archiva-master-build #1083 (See [https://builds.apache.org/job/archiva-master-build/1083/])
[MRM-1954] Adding validatehierarchy property for JCR (martin_s: [https://github.com/apache/archiva/commit/dc259c035bf3c7408367c1cc7fc27aadfca8fefb])
* (edit) archiva-jetty/pom.xml
* (edit) archiva-modules/archiva-web/archiva-rest/archiva-rest-services/pom.xml
* (edit) archiva-modules/plugins/metadata-store-jcr/src/main/java/org/apache/archiva/metadata/repository/jcr/ArchivaJcrRepositoryConfig.java
* (edit) archiva-modules/archiva-web/archiva-webdav/pom.xml
* (edit) archiva-modules/archiva-web/archiva-webapp-test/pom.xml
"
MRM-1954,effrafax,Martin Stockhammer,2017-08-30T18:56:49.936Z,2017-08-30T18:56:49.936Z,"Has been integrated, but not relevant anymore after switch to jcr oak"
MRM-1943,emilie_C,Emilie,2017-05-30T18:22:08.564Z,2017-05-30T18:22:08.564Z,"This wasn't a bug - I had to manually edit the properties file:


ldap.config.groups.class group
ldap.config.groups.member Member
ldap.config.mapper.attribute.user.id  sAMAccountName
ldap.config.user.attribute sAMAccountName

Remove user cache "
MRM-1937,effrafax,Martin Stockhammer,2017-04-14T17:18:56.327Z,2017-04-14T17:18:56.327Z,"Hi Alex,

the primary admin user must be named 'admin'. You cannot use another name. The error messages are a bit awkward, I will try to change that. But you have to use the name 'admin' as username.
After that you are able to create users with names as you like and give them administration privileges.

"
MRM-1937,effrafax,Martin Stockhammer,2017-04-14T19:05:18.301Z,2017-04-14T19:05:18.301Z,Creating initial admin with wrong user name is not possible anymore.
MRM-1937,hudson,Hudson,2017-04-14T19:34:15.111Z,2017-04-14T19:34:15.111Z,"FAILURE: Integrated in Jenkins build archiva-master-build #989 (See [https://builds.apache.org/job/archiva-master-build/989/])
[MRM-1937] Prevent creation of wrong initial admin (martin_s: [https://github.com/apache/archiva/commit/63154d9d38f57b998649563f7f1520b9e00082ba])
* (edit) archiva-modules/archiva-web/archiva-webapp/src/main/webapp/js/redback/user.js
"
MRM-1959,effrafax,Martin Stockhammer,2017-09-20T19:26:14.719Z,2017-09-20T19:26:14.719Z,"Some Unit Tests of the metadata repository are running now with a retry method, to take the asynchronous index updates into account. We will keep the asynchronous (NRT) index updates as standard but will provide a configuration switch for synchronous mode."
MRM-1953,effrafax,Martin Stockhammer,2017-06-13T18:47:43.588Z,2017-06-13T18:47:43.588Z,"Updated site plugin (had issues with JDK8) and the dependent modules:
* maven-site-plugin: 3.6
* maven-project-info-reports-plugin: 2.9
* maven-fluido-skin: 1.6 

"
MRM-1953,hudson,Hudson,2017-06-13T19:46:33.09Z,2017-06-13T19:46:33.09Z,"UNSTABLE: Integrated in Jenkins build archiva-master-build #1080 (See [https://builds.apache.org/job/archiva-master-build/1080/])
[MRM-1953] Updating modernizer-maven-plugin (martin_s: [https://github.com/apache/archiva/commit/ebd78d8b173569eecb4f995ce954fed36c233a8a])
* (edit) pom.xml
"
MRM-1953,hudson,Hudson,2017-06-13T21:38:33.653Z,2017-06-13T21:38:33.653Z,"ABORTED: Integrated in Jenkins build archiva-master-build #1082 (See [https://builds.apache.org/job/archiva-master-build/1082/])
[MRM-1953] Upgrading and fixing jacoco configuration (martin_s: [https://github.com/apache/archiva/commit/6ff4d94f6c462d7ebf84b49f6ebb3a7d931285c9])
* (edit) archiva-modules/archiva-web/archiva-webdav/pom.xml
* (edit) archiva-modules/archiva-web/archiva-web-common/pom.xml
* (edit) archiva-modules/archiva-web/archiva-rest/archiva-rest-services/pom.xml
* (edit) pom.xml
"
MRM-1964,effrafax,Martin Stockhammer,2017-11-01T15:01:10.607Z,2017-11-01T15:01:10.607Z,"Added repository registry and moved the repository admin implementation to the new API. 
Changed the repository interfaces where applicable. 

Next tasks: 
* move the indexing part to the provider/registry.
* clarify the repositoryContent bean usages - it seems there are singleton beans used, but stored per repository id with direct references.
* move usage of repositoryContentFactory to repository registry
"
MRM-1964,effrafax,Martin Stockhammer,2017-11-01T15:37:30.737Z,2017-11-01T15:37:30.737Z,"Proposal on the mailing list:


{quote}after reading a lot of code and tickets the last days I would like to propose some 
refactoring changes: 

- One change and I think good to handle would be to switch from java.io.File
  to java.nio.Path for all the code.
  Currently these are mixed (new code uses mostly Path) and leads to confusion and needs always 
  conversions when accessing new code from old one and vice versa.

The other one is more challenging but may be implemented step by step.
- After reading the code and https://issues.apache.org/jira/browse/MRM-1704 (and dependent tickets) I 
  think it would make sense to separate the code that is maven specific from the archiva interfaces / main classes.
  How?
  - First, there is one thing I missed: Main interfaces for a managed and remote repository
     -> the classes used are beans from the repository-admin module 
     -> Maybe there are other beans from repository-admin used. I think these should be extracted to interfaces too.
     -> I would put them to the ""archiva-repository-layer"" module, or do you think there is a separate module necessary?
  - Separate other modules like archiva-indexer into archiva and maven specific modules 
     -> I would create an -api module for these and move the archiva specific part / interfaces to the api module

  Problems here:
  - Can we start with a interface that represents the current managed/remoterepository-Beans, or do we have to
     find a more abstract one? (what other types of repositories may be implemented in the future, and what do they need?)
  - The maven repository model / indexes assume the content is stored in the file system, do we need to keep this 
    more abstract, or make sure, that the already existing RepositoryContent interfaces are used? Or will repositories always
    have content / indexes in the filesystem?
  - I'm not sure about the role/purpose of archiva-model and the code generation. I do not know the history of this project, so 
     you may clarify this. Is code generation considered best practice here and should be used more often?
     Is it primarily used for configuration objects? 

Olivier, you created the ticket and maybe you can tell, what you had in mind, or tell something about what is more historic and
what is best practice.

So I'm for a pragmatic evolutionary approach. I will try to push small commits and start with interfaces that mainly represent
what we already have. Consider my next commits to master as proposals. If you think this goes into the wrong direction, tell me.

Greetings

Martin{quote}
"
MRM-1963,effrafax,Martin Stockhammer,2017-09-25T10:26:33.858Z,2017-09-25T10:26:33.858Z,"This is not as simple as it looks. 
Currently the Repository files are all stored in the filesystem and the Maven libraries, used to manage the artifacts and index files, use the filesystem API. JCR Oak is only used for storing metadata, not the artifacts.
I do not think there is a way to implement other storage types in the near future. "
MRM-1931,alexz,Alex Zbarcea,2016-10-31T00:52:42.363Z,2016-10-31T00:52:42.363Z,it seams that the default-repository configurations has 3 artifacts configured.
MRM-1933,kcris,Cristian Tarsoaga,2017-05-02T11:00:22.572Z,2017-05-02T11:00:22.572Z,"Tracked the same problem via debug logs. Seems that archiva 2.2.1 always adds 2 slashes at the end of my repo url.
If I specify http://repo.maven.apache.org/maven2/ as my remote url, archiva actually queries http://repo.maven.apache.org/maven2///

Note1: some repos allow those //, no problem appears (e.x. nexus). They hide the issue.
Maven central doesn't. A query http://repo.maven.apache.org/maven2/// results in code 400.

Note2: I had no problem whatsoever as long as I used a lan proxy. When I removed it, I hit this problem.
Probably a proxy translates that url and removed those trailing slashes, which avoids the whole problem. This also hides the issue.
"
MRM-1933,effrafax,Martin Stockhammer,2017-05-02T19:02:08.314Z,2017-05-02T19:02:08.314Z,"These are different problems I think. The server download.oracle.com does not behave the same as maven central. 
Christian, could you please tell me, why you do append a '/' to the URL? The maven repository as it is configured with the initial archiva installation has 'https://repo.maven.apache.org/maven2' without a  slash as last character. And as I see the URLs built by archiva have the correct number of slashes:
{noformat}
DEBUG org.apache.archiva.proxy.common.DebugTransferListener [] - wagon debug https://repo.maven.apache.org/maven2/ - Status code: 200
{noformat}

"
MRM-1933,effrafax,Martin Stockhammer,2017-05-02T20:17:59.047Z,2017-05-02T20:17:59.047Z,"Jrg, the official maven repository of Oracle is https://maven.oracle.com as I know, and this works at least here with my test environment. 
Where does the URL you mentioned come from? The repository download.oracle.com/maven does not allow browsing and returns an error page for the base url, so I do not see how we should proper check this one."
MRM-1933,kcris,Cristian Tarsoaga,2017-05-02T20:26:36.318Z,2017-05-02T20:26:36.318Z,"Hi,
If I specify http://repo.maven.apache.org/maven2
archiva 2.2.1 fetches
http://repo.maven.apache.org/maven2//
and I get the same error

Yes, each server behaves differently, that's why I mentioned the nexus example (which discards the 2/3 trailing slashes and works).

I think the question here is: why archiva adds two slashes at the end.
Thanks"
MRM-1933,effrafax,Martin Stockhammer,2017-05-02T21:15:44.928Z,2017-05-02T21:15:44.928Z,"Christian, could you please provide some log output where you have seen this URL with two slashes? In my log I don't see these, so I'm not able reproduce it. For me this URL works fine without any issues, so are you sure this is not a problem with some HTTP proxy between your archiva server and the maven repository? 
Do these extra slashes occur, when you open the repository page or during maven downloads? 
It would be better, if you open a new ticket with this issue, because your and Jrgs issue are not related."
MRM-1933,kcris,Cristian Tarsoaga,2017-05-03T08:52:10.972Z,2017-05-03T08:52:10.972Z,"Hi,
I had to enable debug logs (changed log level to 'debug' in log4j2.xml to see the query and the http response code). 
Until then, all I see is 'No message body writer has been found for class org.apache.archiva.rest.services.ArchivaRestError, ContentType: text/plain'

I just opened a new issue: https://issues.apache.org/jira/browse/MRM-1940
Since the initial error message is the same I linked it with this issue.

thanks for your help"
MRM-1933,hudson,Hudson,2017-05-05T11:45:12.895Z,2017-05-05T11:45:12.895Z,"SUCCESS: Integrated in Jenkins build archiva-master-build #1020 (See [https://builds.apache.org/job/archiva-master-build/1020/])
MRM-1933, MRM-1940: Fixing repository check (martin_s: [https://github.com/apache/archiva/commit/2bf5154f1366fc21c4ecb02ef4ef71ca6fdc5a45])
* (edit) archiva-modules/archiva-web/archiva-rest/archiva-rest-services/src/main/java/org/apache/archiva/rest/services/DefaultRemoteRepositoriesService.java
* (edit) archiva-modules/archiva-base/archiva-repository-admin/archiva-repository-admin-api/src/main/java/org/apache/archiva/admin/model/beans/RemoteRepository.java
* (edit) archiva-modules/archiva-web/archiva-rest/archiva-rest-services/src/test/java/org/apache/archiva/rest/services/RemoteRepositoriesServiceTest.java
"
MRM-1933,effrafax,Martin Stockhammer,2017-05-13T16:07:49.769Z,2017-05-13T16:07:49.769Z,Fix will be released with 2.2.3
MRM-1952,olamy,Olivier Lamy (*$^%`),2017-06-16T23:20:23.176Z,2017-06-16T23:20:23.176Z,Done
MRM-1952,hudson,Hudson,2017-06-16T23:52:59.946Z,2017-06-16T23:52:59.946Z,"SUCCESS: Integrated in Jenkins build archiva-master-build #1086 (See [https://builds.apache.org/job/archiva-master-build/1086/])
[MRM-1952] add jetty snapshot repositories (olamy: [https://github.com/apache/archiva/commit/014313320f16943a5be10248b101e01090b1d25e])
* (edit) pom.xml
"
MRM-1952,hudson,Hudson,2017-06-24T01:51:30.961Z,2017-06-24T01:51:30.961Z,"FAILURE: Integrated in Jenkins build archiva-jcr-oak-branch #4 (See [https://builds.apache.org/job/archiva-jcr-oak-branch/4/])
[MRM-1952] add jetty snapshot repositories (olamy: [https://github.com/apache/archiva/commit/014313320f16943a5be10248b101e01090b1d25e])
* (edit) pom.xml
"
MRM-1950,hudson,Hudson,2017-06-12T20:38:15.219Z,2017-06-12T20:38:15.219Z,"SUCCESS: Integrated in Jenkins build archiva-master-build #1075 (See [https://builds.apache.org/job/archiva-master-build/1075/])
[MRM-1950] Switching to new jackrabbit version (martin_s: [https://github.com/apache/archiva/commit/eedd8d655a8807466d1041c2dedfb69a2609e37e])
* (edit) pom.xml
"
MRM-1950,effrafax,Martin Stockhammer,2017-08-30T18:49:46.703Z,2017-08-30T18:49:46.703Z,We are switching to JCR Oak
MRM-1924,githubbot,ASF GitHub Bot,2016-09-13T01:01:33.208Z,2016-09-13T01:01:33.208Z,"Github user olamy commented on the issue:

    https://github.com/apache/archiva/pull/23
  
    Issue https://issues.apache.org/jira/browse/MRM-1924
"
MRM-1924,olamy,Olivier Lamy (*$^%`),2016-09-13T01:01:43.875Z,2016-09-13T01:01:43.875Z,pull request: https://github.com/apache/archiva/pull/23
MRM-1924,olamy,Olivier Lamy (*$^%`),2016-09-13T01:02:36.748Z,2016-09-13T01:02:36.748Z,"pr merged.
Thanks! "
MRM-1938,effrafax,Martin Stockhammer,2017-04-19T19:48:45.864Z,2017-04-19T19:48:45.864Z,"You are right, the implementation does not make any sense. 
I'm considering to remove the method (also from the interface) but have to check the binary compatibility implications. So postpone it to the next release.

May I ask, how you found this issue? Are you using the redback libraries?"
MRM-1938,lifove,JC,2017-04-19T20:24:18.991Z,2017-04-19T20:24:18.991Z,Thanks for the comment! I've found this issue by using a static analysis tool. I'm sorry that I haven't used the redback libraries yet.
MRM-1900,olamy,Olivier Lamy (*$^%`),2015-09-02T09:11:20.992Z,2015-09-02T09:11:20.992Z,"Jira issue are not the place to ask questions.
Please use mailing list see http://archiva.apache.org/mail-lists.html"
MRM-1928,githubbot,ASF GitHub Bot,2016-10-04T22:42:34.929Z,2016-10-04T22:42:34.929Z,"GitHub user CMoH opened a pull request:

    https://github.com/apache/archiva/pull/28

    [MRM-1928] Use applicationUrl setting in HTTP redirects

    Make use of webapp application URL setting when constructing the HTTP
    Location header within redirect responses, which allows clients to
    follow them when Archiva runs behind HTTP reverse proxies.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/CMoH/archiva fix-http-redirect

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/archiva/pull/28.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #28
    
----
commit ef0f29235d7d5ebecf3f60accf2c76bcb7c8230b
Author: Ciprian Ciubotariu <cheepeero@gmx.net>
Date:   2016-10-04T14:16:50Z

    [MRM-1928] Use applicationUrl setting in HTTP redirects
    
    Make use of webapp application URL setting when constructing the HTTP
    Location header within redirect responses, which allows clients to
    follow them when Archiva runs behind HTTP reverse proxies.

----
"
MRM-1928,githubbot,ASF GitHub Bot,2016-10-05T03:32:17.227Z,2016-10-05T03:32:17.227Z,"Github user asfgit closed the pull request at:

    https://github.com/apache/archiva/pull/28
"
MRM-1928,olamy,Olivier Lamy (*$^%`),2016-10-05T03:32:24.663Z,2016-10-05T03:32:24.663Z,"pr merged.
Thanks!! "
MRM-1928,hudson,Hudson,2016-10-05T04:25:41.582Z,2016-10-05T04:25:41.582Z,"FAILURE: Integrated in Jenkins build archiva-master-build #961 (See [https://builds.apache.org/job/archiva-master-build/961/])
[MRM-1928] Use applicationUrl setting in HTTP redirects (cheepeero: [https://github.com/apache/archiva/commit/ef0f29235d7d5ebecf3f60accf2c76bcb7c8230b])
* (edit) archiva-modules/archiva-web/archiva-webdav/src/test/java/org/apache/archiva/webdav/AbstractRepositoryServletTestCase.java
* (edit) archiva-modules/archiva-web/archiva-webdav/src/test/java/org/apache/archiva/webdav/AbstractRepositoryServletProxiedMetadataTestCase.java
* (edit) archiva-modules/archiva-web/archiva-webdav/src/main/java/org/apache/archiva/webdav/ArchivaDavResourceFactory.java
* (edit) archiva-modules/archiva-web/archiva-webdav/src/test/java/org/apache/archiva/webdav/RepositoryServletNoProxyTest.java
"
MRM-1926,effrafax,Martin Stockhammer,2016-10-17T18:34:41.121Z,2016-10-17T18:34:41.121Z,"Hi Maik,

can you tell me, what checksum policy do you have set for your proxy connector? Fix|Fail|Ignore? 
Does the problem occur, if you change the checksum policy to another value?
Are only checksums of pom files affected or of other artifacts too? 

"
MRM-1926,effrafax,Martin Stockhammer,2016-10-17T20:17:11.795Z,2016-10-17T20:17:11.795Z,"I think I found the cause in RepositoryModelResolver.

See commit 5de7825b42441a17d3c7856032ef3d3d65827975"
MRM-1947,effrafax,Martin Stockhammer,2017-06-09T16:40:01.174Z,2017-06-09T16:40:01.174Z,"Currently working on it. The tests are migrated. Some cleanup of the code must follow and tests with some browser implementations.

Maybe we can get the IE tests on Windows Slaves to run."
MRM-1947,effrafax,Martin Stockhammer,2017-06-11T14:38:02.992Z,2017-06-11T14:38:02.992Z,"Internet Explorer on Jenkins Windows-Slaves does not work. Opened Ticket for INFRA to modify some settings.
https://issues.apache.org/jira/browse/INFRA-14330

If this does not work, we should abandon the IE tests.

"
MRM-1921,jchesshir,John Chesshir,2016-09-07T17:17:21.83Z,2016-09-07T17:17:21.83Z,"I just realized that I added this to the wrong project.  I think it should go into the Maven project, not Archiva.  It doesn't appear I have the permissions to move it, though, so any help getting that done would be appreciated.

Thank you."
MRM-1941,hudson,Hudson,2017-05-18T04:02:00.815Z,2017-05-18T04:02:00.815Z,"FAILURE: Integrated in Jenkins build archiva-master-build #1034 (See [https://builds.apache.org/job/archiva-master-build/1034/])
[MRM-1941] Java 8 upgrade (olamy: [https://github.com/apache/archiva/commit/661634ca2098a56658fcfb994b429d3f5bf609d5])
* (edit) pom.xml
"
MRM-1927,effrafax,Martin Stockhammer,2016-10-16T17:49:25.876Z,2016-10-16T17:49:25.876Z,"BundleFsPersistenceManager has no consistency check flag that can be activated for the startup (other persistencemanagers do have such a feature).

Should at least add rest method (and additionally  a button to repository view) that forces the consistency check.

"
MRM-1962,effrafax,Martin Stockhammer,2017-09-25T10:21:29.971Z,2017-09-25T10:21:29.971Z,"Yes, I found this irritating too. I will update the documentation for the 3.0 release.
For this case, it means ""Starting with version 1.4-M1"" "
MRM-1923,olamy,Olivier Lamy (*$^%`),2016-09-13T00:57:20.72Z,2016-09-13T00:57:20.72Z,pr https://github.com/apache/archiva-redback-core/pull/10
MRM-1923,olamy,Olivier Lamy (*$^%`),2016-09-13T00:58:31.245Z,2016-09-13T00:58:31.245Z,pr merged Thanks!
MRM-1923,githubbot,ASF GitHub Bot,2016-09-13T00:58:54.859Z,2016-09-13T00:58:54.859Z,"Github user olamy commented on the issue:

    https://github.com/apache/archiva-redback-core/pull/10
  
    https://issues.apache.org/jira/browse/MRM-1923
"
MRM-1951,effrafax,Martin Stockhammer,2017-06-12T19:55:34.902Z,2017-06-12T19:55:34.902Z,maven-indexer depends on the lucene version. Task seems more to be to upgrade maven-indexer. 
MRM-1951,effrafax,Martin Stockhammer,2017-06-12T20:08:46.408Z,2017-06-12T20:08:46.408Z,"One option could be, to switch to maven-indexer 6.0-SNAPSHOT that has a dependency to lucene 5.5.4"
MRM-1951,effrafax,Martin Stockhammer,2017-06-14T07:53:54.203Z,2017-06-14T07:53:54.203Z,"Seems not to be easy. Jackrabbit needs lucene 3.x and does not work with the lucene 5.5.4 dependency.

It looks like jackrabbit will not change this in the future. They seem to recommend using jackrabbit oak, which is more or less the successor of the classic jackrabbit.

I will check, what it means to implement a JCR Oak indexer in archiva."
MRM-1951,effrafax,Martin Stockhammer,2017-08-30T18:24:01.284Z,2017-08-30T18:24:01.284Z,"JCR Oak is now in the master branch. We can use Lucene 4.10.4 with it. Not sure, if we can change the lucene version to a higher level, or if the jcr implementation sets it."
MRM-1944,effrafax,Martin Stockhammer,2017-06-11T14:56:41.376Z,2017-06-11T14:56:41.376Z,"Hi Gatan,

have this occured after upgrade to 2.2.3, or is this your first archiva installation with wildfly 10?
We do not test all application server types and versions, so it may not work on some.
We will try to test the new archiva 3.0.0 with wildfly but as resources are limited we cannot provide support for the current version."
MRM-1944,gquentin,Gatan QUENTIN,2017-06-15T19:13:46.722Z,2017-06-15T19:13:46.722Z,"hi, this is my first install of archiva with wildfly 10.
on which application server do you test it?"
MRM-1936,effrafax,Martin Stockhammer,2017-03-26T16:23:00.668Z,2017-03-26T16:23:00.668Z,"Hi Niranjan,

we are currently working on replacing the JDO persistence implementation by JPA. 
After looking at the code I don't think I can fix this issue with JDO easily to add it to the last archiva-with-JDO release 2.2.2 that is coming soon.
So we won't fix it in the 2.2.x branch.
But after switching our master development branch to the JPA implementation I will check, if the problem is still there.

Greetings

Martin

"
MRM-1936,nbommu,Niranjan,2017-03-27T16:15:22.455Z,2017-03-27T16:15:22.455Z,Thanks Martin.
MRM-1936,effrafax,Martin Stockhammer,2017-05-19T19:07:20.249Z,2017-05-19T19:07:20.249Z,"Should be checked, if the issue persists after switching to JPA"
MRM-1911,chongma,Matthew Broadhead,2016-02-14T20:36:20.804Z,2016-02-14T20:36:20.804Z,this is the archiva log which shows the errors
MRM-1911,chongma,Matthew Broadhead,2016-02-17T16:37:39.749Z,2016-02-17T16:37:39.749Z,"Hi, I know it has only been a few days since I submitted the bug but I just wondered if this project is still active?  Romain at TomEE says this issue is unlikely to be caused by TomEE and is probably a library incompatibility."
MRM-1911,olamy,Olivier Lamy (*$^%`),2016-02-18T04:09:56.734Z,2016-02-18T04:09:56.734Z,"Well that's hard to figure out the cause of OverlappingFileLockException.
It can happen when two app try to get lock on the same file.
Is there any other archiva deployed or any other application running within the same TomEE?
"
MRM-1911,chongma,Matthew Broadhead,2016-02-18T09:08:16.734Z,2016-02-18T09:08:16.734Z,"ok i have tried to install it on a fresh copy of TomEE 1.7.3.  now i get 

INFO: ------------------------- localhost -> /apache-archiva-2.2.0
Feb 18, 2016 10:02:45 AM org.apache.tomee.catalina.TomEEClassLoaderEnricher validateJarFile
WARNING: jar '/Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0/WEB-INF/lib/cdi-api-1.0.jar' contains offending class: javax.enterprise.context.ApplicationScoped. It will be ignored.
Feb 18, 2016 10:02:46 AM org.apache.tomee.catalina.TomEEClassLoaderEnricher validateJarFile
WARNING: jar '/Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0/WEB-INF/lib/geronimo-jpa_2.0_spec-1.1.jar' contains offending class: javax.persistence.Entity. It will be ignored.
Feb 18, 2016 10:02:46 AM org.apache.tomee.catalina.TomEEClassLoaderEnricher validateJarFile
WARNING: jar '/Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0/WEB-INF/lib/javax.annotation-api-1.2.jar' contains offending class: javax.annotation.PostConstructbut: You provide javax.annotation API 1.2 so we'll tolerate new classes but it should surely be upgraded in the container
Feb 18, 2016 10:02:46 AM org.apache.tomee.catalina.TomEEClassLoaderEnricher validateJarFile
WARNING: jar '/Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0/WEB-INF/lib/javax.inject-1.jar' contains offending class: javax.inject.Inject. It will be ignored.
Feb 18, 2016 10:02:46 AM org.apache.tomee.catalina.TomEEClassLoaderEnricher validateJarFile
WARNING: jar '/Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0/WEB-INF/lib/javax.ws.rs-api-2.0.jar' contains offending class: javax.ws.rs.Pathbut: You provide JAXRS 2 API in the webapp, we tolerate it to support some advanced feature but if you expect TomEE to provide it you should remove it
Feb 18, 2016 10:02:46 AM org.apache.tomee.catalina.TomEEClassLoaderEnricher validateJarFile
WARNING: jar '/Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0/WEB-INF/lib/jsr250-api-1.0.jar' contains offending class: javax.annotation.PostConstruct. It will be ignored.
Feb 18, 2016 10:02:46 AM org.apache.tomee.catalina.TomEEClassLoaderEnricher validateJarFile
WARNING: jar '/Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0/WEB-INF/lib/transaction-api-1.1.jar' contains offending class: javax.transaction.Transaction. It will be ignored.
Feb 18, 2016 10:02:46 AM org.apache.tomee.catalina.TomEEClassLoaderEnricher validateJarFile
WARNING: jar '/Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0/WEB-INF/lib/validation-api-1.0.0.GA.jar' contains offending class: javax.validation.Validation. It will be ignored.
Feb 18, 2016 10:02:48 AM org.apache.catalina.loader.WebappClassLoader findResourceInternal
INFO: Illegal access: this web application instance has been stopped already.  Could not load org/terracotta/bigmemory/version.properties.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
Feb 18, 2016 10:02:48 AM org.apache.catalina.loader.WebappClassLoader findResourceInternal
INFO: Illegal access: this web application instance has been stopped already.  Could not load org/terracotta/bigmemory/version.properties.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
Feb 18, 2016 10:02:49 AM org.apache.catalina.loader.WebappClassLoader findResourceInternal
INFO: Illegal access: this web application instance has been stopped already.  Could not load org/terracotta/bigmemory/version.properties.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
Feb 18, 2016 10:02:49 AM org.apache.catalina.loader.WebappClassLoader findResourceInternal
INFO: Illegal access: this web application instance has been stopped already.  Could not load org/terracotta/bigmemory/version.properties.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
Feb 18, 2016 10:02:49 AM org.apache.catalina.loader.WebappClassLoader findResourceInternal
INFO: Illegal access: this web application instance has been stopped already.  Could not load org/terracotta/bigmemory/version.properties.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
Feb 18, 2016 10:02:50 AM org.apache.catalina.loader.WebappClassLoader findResourceInternal
INFO: Illegal access: this web application instance has been stopped already.  Could not load org/terracotta/bigmemory/version.properties.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
Feb 18, 2016 10:02:50 AM org.apache.catalina.loader.WebappClassLoader findResourceInternal
INFO: Illegal access: this web application instance has been stopped already.  Could not load org/terracotta/bigmemory/version.properties.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
Feb 18, 2016 10:02:50 AM org.apache.catalina.loader.WebappClassLoader findResourceInternal
INFO: Illegal access: this web application instance has been stopped already.  Could not load org/terracotta/bigmemory/version.properties.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
Feb 18, 2016 10:02:50 AM org.apache.catalina.loader.WebappClassLoader findResourceInternal
INFO: Illegal access: this web application instance has been stopped already.  Could not load org/terracotta/bigmemory/version.properties.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
Feb 18, 2016 10:02:50 AM org.apache.catalina.loader.WebappClassLoader findResourceInternal
INFO: Illegal access: this web application instance has been stopped already.  Could not load org/terracotta/bigmemory/version.properties.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
Feb 18, 2016 10:02:50 AM org.apache.openejb.config.ConfigurationFactory configureApplication
INFO: Configuring enterprise application: /Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0
Feb 18, 2016 10:02:51 AM org.apache.openejb.config.ConfigurationFactory configureService
INFO: Configuring Service(id=Default JDBC Database, type=Resource, provider-id=Default JDBC Database)
Feb 18, 2016 10:02:51 AM org.apache.openejb.config.AutoConfig logAutoCreateResource
INFO: Auto-creating a Resource with id 'Default JDBC Database' of type 'javax.sql.DataSource for 'apache-archiva-2.2.0'.
Feb 18, 2016 10:02:51 AM org.apache.openejb.assembler.classic.Assembler createRecipe
INFO: Creating Resource(id=Default JDBC Database)
Feb 18, 2016 10:02:51 AM org.apache.openejb.config.ConfigurationFactory configureService
INFO: Configuring Service(id=Default Mail Session, type=Resource, provider-id=Default Mail Session)
Feb 18, 2016 10:02:51 AM org.apache.openejb.config.AutoConfig logAutoCreateResource
INFO: Auto-creating a Resource with id 'Default Mail Session' of type 'javax.mail.Session for 'apache-archiva-2.2.0'.
Feb 18, 2016 10:02:51 AM org.apache.openejb.assembler.classic.Assembler createRecipe
INFO: Creating Resource(id=Default Mail Session)
Feb 18, 2016 10:02:51 AM org.apache.openejb.config.ReportValidationResults logResults
WARNING: WARN ... apache-archiva-2.2.0:	The application [apache-archiva-2.2.0] uses @Inject but CDI is not enabled. Maybe youd need to add a beans.xml file.
Feb 18, 2016 10:02:51 AM org.apache.openejb.config.ReportValidationResults logResults
WARNING: 1 warning for EjbModule(path=apache-archiva-2.2.0)
Feb 18, 2016 10:02:51 AM org.apache.openejb.config.AppInfoBuilder build
INFO: Enterprise application ""/Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0"" loaded.
Feb 18, 2016 10:02:51 AM org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Assembling app: /Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0
Feb 18, 2016 10:02:51 AM org.apache.openejb.cdi.CdiBuilder initSingleton
INFO: Existing thread singleton service in SystemInstance(): org.apache.openejb.cdi.ThreadSingletonServiceImpl@534df152
Feb 18, 2016 10:02:51 AM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container is starting...
Feb 18, 2016 10:02:51 AM org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container has started, it took 11 ms.
Feb 18, 2016 10:02:51 AM org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Deployed Application(path=/Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0)
Feb 18, 2016 10:03:02 AM org.hsqldb.persist.Logger logInfoEvent
INFO: Checkpoint start
Feb 18, 2016 10:03:02 AM org.hsqldb.persist.Logger logInfoEvent
INFO: checkpointClose start
Feb 18, 2016 10:03:02 AM org.hsqldb.persist.Logger logInfoEvent
INFO: checkpointClose end
Feb 18, 2016 10:03:02 AM org.hsqldb.persist.Logger logInfoEvent
INFO: Checkpoint end - txts: 1
Feb 18, 2016 10:03:05 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file
Feb 18, 2016 10:03:05 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/apache-archiva-2.2.0] startup failed due to previous errors
Feb 18, 2016 10:03:05 AM org.apache.openejb.assembler.classic.Assembler destroyApplication
INFO: Undeploying app: /Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0
Feb 18, 2016 10:03:06 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/apache-archiva-2.2.0] appears to have started a thread named [namespaces] but has failed to stop it. This is very likely to create a memory leak.
Feb 18, 2016 10:03:06 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/apache-archiva-2.2.0] appears to have started a thread named [usersCache] but has failed to stop it. This is very likely to create a memory leak.
Feb 18, 2016 10:03:06 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/apache-archiva-2.2.0] appears to have started a thread named [operations] but has failed to stop it. This is very likely to create a memory leak.
Feb 18, 2016 10:03:06 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/apache-archiva-2.2.0] appears to have started a thread named [permissions] but has failed to stop it. This is very likely to create a memory leak.
Feb 18, 2016 10:03:06 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/apache-archiva-2.2.0] appears to have started a thread named [resources] but has failed to stop it. This is very likely to create a memory leak.
Feb 18, 2016 10:03:06 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/apache-archiva-2.2.0] appears to have started a thread named [roles] but has failed to stop it. This is very likely to create a memory leak.
Feb 18, 2016 10:03:06 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/apache-archiva-2.2.0] appears to have started a thread named [userAssignments] but has failed to stop it. This is very likely to create a memory leak.
Feb 18, 2016 10:03:06 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/apache-archiva-2.2.0] appears to have started a thread named [userPermissions] but has failed to stop it. This is very likely to create a memory leak.
Feb 18, 2016 10:03:06 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/apache-archiva-2.2.0] appears to have started a thread named [effectiveRoleSet] but has failed to stop it. This is very likely to create a memory leak.
Feb 18, 2016 10:03:06 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/apache-archiva-2.2.0] appears to have started a thread named [__DEFAULT__] but has failed to stop it. This is very likely to create a memory leak.
Feb 18, 2016 10:03:06 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/apache-archiva-2.2.0] appears to have started a thread named [HSQLDB Timer @65d72863] but has failed to stop it. This is very likely to create a memory leak.
Feb 18, 2016 10:03:06 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deployment of web application archive /Applications/apache-tomee-plume-1.7.3/webapps/apache-archiva-2.2.0.war has finished in 21,536 ms"
MRM-1911,olamy,Olivier Lamy (*$^%`),2016-02-18T10:55:29.162Z,2016-02-18T10:55:29.162Z,"hey [~romain.manni-bucau] any idea with those new logs?
I know this works with Tomcat :-)
"
MRM-1911,romain.manni-bucau,Romain Manni-Bucau,2016-02-18T11:27:48.287Z,2016-02-18T11:27:48.287Z,"Guess scanning in the cause:

cat webapps/apache-archiva-2.2.0/WEB-INF/scan.xml

{code}
<scan />
{code}

can help

also tomee 7 will ship bval 1.1 so having bval 1.0 in the webapp can cause troubles I guess if there is no other ValidationExtension or org.hibernate.validator.* CDI extension (can be faked if desired ie you can provide a .org.apache.archive.tomee.ValidationExtension  implementing javax.enterprise.inject.spi.Extension + SPI file with nothing else).

Alternative is to set org.apache.tomee.catalina.TomcatWebAppBuilder.IGNORE in webapp init parameters or global system property [{context name}.]tomcat-only=true
"
MRM-1911,chongma,Matthew Broadhead,2016-02-18T12:47:14.651Z,2016-02-18T12:47:14.651Z,"adding scan.xml gets me further but now i have
Startup failed due to missing functionality for org.apache.derby.iapi.types.DataValueFactory. Please ensure your classpath includes the correct Derby software.

i used the latest version of derby.  is there a lower version i should be using?"
MRM-1911,chongma,Matthew Broadhead,2016-02-18T12:50:49.535Z,2016-02-18T12:50:49.535Z,"ah ok i used the jars from https://cwiki.apache.org/confluence/display/ARCHIVA/Archiva+on+Tomcat

now i have
2016-02-18 13:49:30,227 [localhost-startStop-1] ERROR org.springframework.web.context.ContextLoader [] - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cxf' defined in class path resource [META-INF/cxf/cxf.xml]: Initialization of bean failed; nested exception is org.apache.cxf.bus.extension.ExtensionException: Could not find constructor for class org.apache.cxf.ws.policy.PolicyDataEngineImpl for args [org.apache.cxf.bus.spring.SpringBus@2d022d13].
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:762) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403) ~[spring-web-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306) [spring-web-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106) [spring-web-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5017) [catalina.jar:7.0.63]
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5531) [catalina.jar:7.0.63]
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.63]
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1574) [catalina.jar:7.0.63]
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1564) [catalina.jar:7.0.63]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_25]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_25]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_25]
	at java.lang.Thread.run(Thread.java:745) [?:1.8.0_25]
Caused by: org.apache.cxf.bus.extension.ExtensionException: Could not find constructor for class org.apache.cxf.ws.policy.PolicyDataEngineImpl for args [org.apache.cxf.bus.spring.SpringBus@2d022d13].
	at org.apache.cxf.bus.extension.Extension.load(Extension.java:275) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerImpl.loadAndRegister(ExtensionManagerImpl.java:213) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerImpl.initialize(ExtensionManagerImpl.java:121) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerBus.doInitializeInternal(ExtensionManagerBus.java:285) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerBus.initialize(ExtensionManagerBus.java:275) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.spring.SpringBus.setApplicationContext(SpringBus.java:88) ~[cxf-core-3.0.3.jar:3.0.3]
	at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:119) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:94) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:408) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1558) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	... 20 more
Caused by: java.lang.NoSuchMethodException: org.apache.cxf.ws.policy.PolicyDataEngineImpl.<init>()
	at java.lang.Class.getConstructor0(Class.java:3074) ~[?:1.8.0_25]
	at java.lang.Class.getConstructor(Class.java:1817) ~[?:1.8.0_25]
	at org.apache.cxf.bus.extension.Extension.load(Extension.java:249) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerImpl.loadAndRegister(ExtensionManagerImpl.java:213) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerImpl.initialize(ExtensionManagerImpl.java:121) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerBus.doInitializeInternal(ExtensionManagerBus.java:285) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerBus.initialize(ExtensionManagerBus.java:275) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.spring.SpringBus.setApplicationContext(SpringBus.java:88) ~[cxf-core-3.0.3.jar:3.0.3]
	at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:119) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:94) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:408) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1558) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	... 20 more"
MRM-1911,romain.manni-bucau,Romain Manni-Bucau,2016-02-18T13:41:55.113Z,2016-02-18T13:41:55.113Z,"Ran on tomee 7 with:

- removing hibernate-validator + validation-api jars (conflicts on 7.0.0-m1 cause bval 1.1 is shipped, removing it is a fast way to solve the issue but deactivating as mentionned bval extension works as well)
- adding cxf management and rs service description jars in WEB-INF/lib (it is shipped in tomee and conflicts in the webapp by classloader inheritance. Didn't investigate much but seems cxf just does a loadClass to check it is there where it should actually check a bit more to ensure it is usable - let me know if you don't report it i'll do)
- adding scan.xml in WEB-INF (<scan/>) to not scan archiva webapp at all and find @Resource etc the container can't provide (spring conflict)

Then the app starts and the GUI is ""clickable"" (didn't setup archiva completely so I can't do much but it is responsive at least)


Hope it helps. Excepted the first point I think all patches I did can be added to archiva itself. The first point can be solved providing a 1.1 bean validation API/impl."
MRM-1911,chongma,Matthew Broadhead,2016-02-18T20:28:03.557Z,2016-02-18T20:28:03.557Z,removed hibernate-validator and validation-api but there are still cxf errors.  what do i need to do to fix the cxf problem?
MRM-1911,romain.manni-bucau,Romain Manni-Bucau,2016-02-18T21:05:55.404Z,2016-02-18T21:05:55.404Z,"did you add both jars in archive libs?

{code}
<dependency>
	<groupId>org.apache.cxf</groupId>
	<artifactId>cxf-rt-management</artifactId>
	<version>3.0.3</version>
</dependency>
<dependency>
	<groupId>org.apache.cxf</groupId>
	<artifactId>cxf-rt-rs-service-description</artifactId>
	<version>3.0.3</version>
</dependency>

{code}"
MRM-1911,chongma,Matthew Broadhead,2016-02-19T09:40:31.352Z,2016-02-19T09:40:31.352Z,"i added those 2 jars in WEB-INF/lib as i am not building with maven i am editing the war file.  they must have other dependencies because i still get the same sort of error:

2016-02-19 10:38:20,245 [localhost-startStop-1] ERROR org.springframework.web.context.ContextLoader [] - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cxf' defined in class path resource [META-INF/cxf/cxf.xml]: Initialization of bean failed; nested exception is org.apache.cxf.bus.extension.ExtensionException: Could not find constructor for class org.apache.cxf.ws.policy.PolicyDataEngineImpl for args [org.apache.cxf.bus.spring.SpringBus@86557b3].
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:762) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403) ~[spring-web-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306) [spring-web-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106) [spring-web-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5017) [catalina.jar:7.0.63]
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5531) [catalina.jar:7.0.63]
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.63]
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1574) [catalina.jar:7.0.63]
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1564) [catalina.jar:7.0.63]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_25]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_25]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_25]
	at java.lang.Thread.run(Thread.java:745) [?:1.8.0_25]
Caused by: org.apache.cxf.bus.extension.ExtensionException: Could not find constructor for class org.apache.cxf.ws.policy.PolicyDataEngineImpl for args [org.apache.cxf.bus.spring.SpringBus@86557b3].
	at org.apache.cxf.bus.extension.Extension.load(Extension.java:275) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerImpl.loadAndRegister(ExtensionManagerImpl.java:213) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerImpl.initialize(ExtensionManagerImpl.java:121) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerBus.doInitializeInternal(ExtensionManagerBus.java:285) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerBus.initialize(ExtensionManagerBus.java:275) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.spring.SpringBus.setApplicationContext(SpringBus.java:88) ~[cxf-core-3.0.3.jar:3.0.3]
	at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:119) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:94) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:408) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1558) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	... 20 more
Caused by: java.lang.NoSuchMethodException: org.apache.cxf.ws.policy.PolicyDataEngineImpl.<init>()
	at java.lang.Class.getConstructor0(Class.java:3074) ~[?:1.8.0_25]
	at java.lang.Class.getConstructor(Class.java:1817) ~[?:1.8.0_25]
	at org.apache.cxf.bus.extension.Extension.load(Extension.java:249) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerImpl.loadAndRegister(ExtensionManagerImpl.java:213) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerImpl.initialize(ExtensionManagerImpl.java:121) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerBus.doInitializeInternal(ExtensionManagerBus.java:285) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.extension.ExtensionManagerBus.initialize(ExtensionManagerBus.java:275) ~[cxf-core-3.0.3.jar:2.6.16]
	at org.apache.cxf.bus.spring.SpringBus.setApplicationContext(SpringBus.java:88) ~[cxf-core-3.0.3.jar:3.0.3]
	at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:119) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:94) ~[spring-context-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:408) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1558) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539) ~[spring-beans-4.1.4.RELEASE.jar:4.1.4.RELEASE]
	... 20 more"
MRM-1911,romain.manni-bucau,Romain Manni-Bucau,2016-02-19T10:04:08.103Z,2016-02-19T10:04:08.103Z,on 7.0.0-M1 only those 2 jars are needed but didn't check for 1.7.3. That said for 1.7.3 you can use tomee webprofile where we don't have cxf at all.
MRM-1911,chongma,Matthew Broadhead,2016-02-28T10:27:39.272Z,2016-02-28T10:27:39.272Z,i need cxf so i am not sure how to proceed.  is 7.0.0-M1 stable enough for production?
MRM-1911,romain.manni-bucau,Romain Manni-Bucau,2016-02-28T13:57:37.624Z,2016-02-28T13:57:37.624Z,I use m1 in prod but m2 should be abailable next week uf you prefer. It has a perf fix for bval.
MRM-1956,hudson,Hudson,2017-06-20T12:25:44.229Z,2017-06-20T12:25:44.229Z,"UNSTABLE: Integrated in Jenkins build archiva-master-build #1090 (See [https://builds.apache.org/job/archiva-master-build/1090/])
[MRM-1956] Replace tomcat-jdbc pool with HikariCP (olamy: [https://github.com/apache/archiva/commit/8d3f82a479b6eb2bf709b1831351e20309735683])
* (edit) archiva-jetty/src/main/conf/jetty.xml
* (add) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/resources/log4j2-test.xml
* (edit) archiva-jetty/pom.xml
* (edit) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/java/org/apache/archiva/scheduler/repository/ArchivaRepositoryScanningTaskExecutorPhase1Test.java
* (add) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/java/org/apache/archiva/scheduler/repository/AbstractArchivaRepositoryScanningTaskExecutorTest.java
* (edit) archiva-modules/archiva-base/archiva-repository-scanner/src/main/java/org/apache/archiva/repository/scanner/DefaultRepositoryScanner.java
* (edit) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/java/org/apache/archiva/scheduler/repository/ArchivaRepositoryScanningTaskExecutorPhase2Test.java
* (edit) pom.xml
* (delete) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/java/org/apache/archiva/scheduler/repository/ArchivaRepositoryScanningTaskExecutorAbstractTest.java
"
MRM-1956,hudson,Hudson,2017-06-24T01:51:31.806Z,2017-06-24T01:51:31.806Z,"FAILURE: Integrated in Jenkins build archiva-jcr-oak-branch #4 (See [https://builds.apache.org/job/archiva-jcr-oak-branch/4/])
[MRM-1956] Replace tomcat-jdbc pool with HikariCP (olamy: [https://github.com/apache/archiva/commit/8d3f82a479b6eb2bf709b1831351e20309735683])
* (edit) archiva-jetty/pom.xml
* (edit) archiva-jetty/src/main/conf/jetty.xml
* (delete) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/java/org/apache/archiva/scheduler/repository/ArchivaRepositoryScanningTaskExecutorAbstractTest.java
* (add) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/resources/log4j2-test.xml
* (edit) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/java/org/apache/archiva/scheduler/repository/ArchivaRepositoryScanningTaskExecutorPhase2Test.java
* (edit) archiva-modules/archiva-base/archiva-repository-scanner/src/main/java/org/apache/archiva/repository/scanner/DefaultRepositoryScanner.java
* (edit) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/java/org/apache/archiva/scheduler/repository/ArchivaRepositoryScanningTaskExecutorPhase1Test.java
* (edit) pom.xml
* (add) archiva-modules/archiva-scheduler/archiva-scheduler-repository/src/test/java/org/apache/archiva/scheduler/repository/AbstractArchivaRepositoryScanningTaskExecutorTest.java
"
MRM-1909,githubbot,ASF GitHub Bot,2016-09-14T08:27:04.317Z,2016-09-14T08:27:04.317Z,"GitHub user effrafax opened a pull request:

    https://github.com/apache/archiva/pull/25

    Remove slash from remote repository check url

    Removes additional '/' character from the URL used to check the remote repositories.
    
    Fixes https://issues.apache.org/jira/browse/MRM-1909


You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/effrafax/archiva MRM-1909

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/archiva/pull/25.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #25
    
----
commit e4a2e65f6e214bc0bb7248fd634e0160580e9ee0
Author: Martin Stockhammer <m.stockhammer@web.de>
Date:   2016-09-13T16:33:19Z

    Removing trailing slash in remote repository check
    
    See https://issues.apache.org/jira/browse/MRM-1909

commit 5bb5f76520d5d0873cde6cb6171a44ea402f4f4b
Author: Martin Stockhammer <m.stockhammer@web.de>
Date:   2016-09-14T08:22:21Z

    Adding unit test for remote repository check

----
"
MRM-1909,githubbot,ASF GitHub Bot,2016-09-14T10:51:23.364Z,2016-09-14T10:51:23.364Z,"Github user asfgit closed the pull request at:

    https://github.com/apache/archiva/pull/25
"
MRM-1909,olamy,Olivier Lamy (*$^%`),2016-09-14T10:51:35.083Z,2016-09-14T10:51:35.083Z,"pr merged.
Thanks!"
MRM-1915,hudson,Hudson,2016-03-15T08:28:19.456Z,2016-03-15T08:28:19.456Z,"SUCCESS: Integrated in archiva-master-build #944 (See [https://builds.apache.org/job/archiva-master-build/944/])
[MRM-1915] remove npanday plugin (olamy: [https://github.com/apache/archiva/commit/6742949ceb5efb9e8c60612fa03d67bed0801b6f])
* archiva-modules/plugins/npanday-support/pom.xml
* archiva-modules/plugins/pom.xml
* archiva-modules/archiva-web/archiva-webapp/pom.xml
* pom.xml
* archiva-modules/archiva-karaf/archiva-features/src/main/resources/features.xml
* archiva-modules/plugins/npanday-support/src/main/resources/META-INF/spring-context.xml
* archiva-modules/plugins/npanday-support/src/main/java/org/apache/archiva/plugins/npanday/NPandayArtifactMappingProvider.java
"
MRM-1915,olamy,Olivier Lamy (*$^%`),2017-04-05T23:44:40.776Z,2017-04-05T23:44:40.776Z,well I think it's done
MRM-1904,skygo,Eric Barboni,2015-10-07T16:28:18.334Z,2015-10-07T16:28:18.334Z,"basic changes is easy
http://svn.apache.org/viewvc?view=revision&revision=1707254

Html output change a lot.  Hope we are not missing things "
MRM-1904,olamy,Olivier Lamy (*$^%`),2015-10-08T00:17:36.568Z,2015-10-08T00:17:36.568Z,"Hi
Did you check what happen in the webapp as we use generated html?"
MRM-1904,skygo,Eric Barboni,2015-10-08T17:12:23.608Z,2015-10-08T17:12:23.608Z,"Hi,
 You're  thinking  on the ""REST Apis Documentations page"" ?

The webapp not able to display them yet. but changing the enunciate.xml is just the easy step (localy done). 

The major issue now is the important change on the generation, lots of javascript to handle navigation. 
I try to change the RestDocs servlet to have a minimal output.  
I'm thinking on making an enunciate template for our usage. 



"
MRM-1904,olamy,Olivier Lamy (*$^%`),2015-10-13T11:05:51.262Z,2015-10-13T11:05:51.262Z,my concern is as well for https://archiva-repository.apache.org/archiva/index.html?request_lang=en#docs-rest
MRM-1904,skygo,Eric Barboni,2015-11-13T17:33:55.793Z,2015-11-13T17:33:55.793Z,"I try to template enunciate to be more or less than version 1.
 The hook to navigate with javascript are hard to follow compare to ""official"" anchor tag.
 Not sure also, because css is copy paste from enunciate.

I'm not sure on how we can share the template among the project. (I duplicate for the moment :( ).
"
MRM-1907,thunderhook,Oliver E,2015-12-02T12:33:02.811Z,2015-12-02T12:33:02.811Z,"Okay, I got this running again.

Two issues with this:
* First it was not clear where to find the redback runtime configuration. It is stored inside the archiva.xml file. Unfortunately I thought this file is empty because there are a lot of empty lines inside. I don't know if this is a bug, if so then this is minor.
* Maybe the documentation could state where the runtime configuration is stored?
* What happened with my bug? Chrome automatically inserted my username in the tab ""LDAP"" with ""bindDn"", therefore this was saved as LDAP Configuration. It is not entirely clear that the ""Save"" Button saves all settings of all tabs. Surprisingly the fields ""bindDn"" and ""password"" are automatically filled *even though the tab wasn't even selected*.

I don't know if I should open another ticket for this, because it has a minor priority."
MRM-1907,jrasmussen,Jeff Rasmussen,2016-07-21T16:38:31.252Z,2016-07-21T16:38:31.252Z,"I've ran into the same problem just today. 

This really shouldn't be marked as resolved as ""not doing anything about this"" isn't really solving the problem. 

The issue seems to be with browsers that auto-fill fields. It recognizes the username and password field as fields it should fill with your username and password. EVEN IF you never visit the LDAP tab.

Workaround:
if you do save anything on the Runtime Configuration page. Be sure to go to the ldap page and remove your user and pass, or verify that the values are correct before saving.

If you do manage to save and restart archiva while saving and thus generating the error indicated in the description above, navigate to your archiva.xml file (typically in the conf folder of the archiva install)
Scroll to the bottom, past the significant amount of unnecessary whitespace and remove the  ldapConfiguration section, then restart archiva. 


"
MRM-1907,ellbur@gmail.com,Owen Healy,2016-10-04T16:39:25.222Z,2016-10-04T16:39:25.222Z,"Oh wow... this tripped me up too.

Maybe Archiva should pre-validate the Distinguished Name before saving it to the configuration? Or perhaps, if it fails to load the LDAP configuration on startup it should mark it as invalid and continue?

So glad I found this thread..."
MRM-1907,effrafax,Martin Stockhammer,2016-10-16T15:55:48.892Z,2016-10-16T15:55:48.892Z,"Added a validation flag to authenticators. So startup should not fail, if the LDAP configuration is invalid and not used. 

archiva:
commit 3fe1000
 
archiva-redback-core:
commit 78d822d                                                                                                                                                                 
commit 2aa6cdf
"
MRM-1906,olamy,Olivier Lamy (*$^%`),2015-10-25T10:27:47.284Z,2015-10-25T10:27:47.284Z,https://github.com/apache/archiva-redback-core/pull/5
MRM-1906,olamy,Olivier Lamy (*$^%`),2015-10-25T10:29:37.124Z,2015-10-25T10:29:37.124Z,"pr merged.
Thanks!!"
MRM-1906,githubbot,ASF GitHub Bot,2015-10-25T10:30:04.414Z,2015-10-25T10:30:04.414Z,"Github user olamy commented on the pull request:

    https://github.com/apache/archiva-redback-core/pull/5#issuecomment-150911252
  
    @mjaggard Thanks!!
    I created the jira here https://issues.apache.org/jira/browse/MRM-1906
    Thanks again!
"
MRM-1908,chriss745,Krisztian Fekete,2015-12-04T12:46:11.299Z,2015-12-04T12:46:11.299Z,"I wasn't able to get my feketk1 user details through the UI (it is not on the list, probably we have too many LDAP users), so I did query all the permissions through the API:

http://...../restServices/redbackServices/userService/getUser/feketk1

<user>
<email>Krisztian.Fekete2@xxxxxxxx.com</email>
<fullName>Krisztian</fullName>
<locked>false</locked>
<passwordChangeRequired>false</passwordChangeRequired>
<permanent>true</permanent>
<readOnly>false</readOnly>
<timestampLastPasswordChange>Fri, 4 Dec 2015 05:55:08 -0500 - 1 hour ago</timestampLastPasswordChange>
<userManagerId>ldap</userManagerId>
<username>feketk1</username>
<validated>true</validated>
</user>

-------------------------------------
http://...../restServices/redbackServices/userService/getUserPermissions/feketk1

This XML file does not appear to have any style information associated with it. The document tree is shown below.
<permissions>
<permission>
<name>Archiva Add Repository Metadata - test-internal</name>
<operation>
<name>archiva-add-metadata</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-internal</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Delete Repository Metadata - test-internal</name>
<operation>
<name>archiva-delete-metadata</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-internal</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Merge Repository - test-snapshots</name>
<operation>
<name>archiva-merge-repository</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-snapshots</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Edit Repository - test-internal</name>
<operation>
<name>archiva-edit-repository</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-internal</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Add Repository Metadata - test-snapshots</name>
<operation>
<name>archiva-add-metadata</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-snapshots</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Delete Artifact - test-internal</name>
<operation>
<name>archiva-delete-artifact</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-internal</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Read Repository - test-snapshots</name>
<operation>
<name>archiva-read-repository</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-snapshots</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>
Archiva Delete Repository Metadata - test-snapshots
</name>
<operation>
<name>archiva-delete-metadata</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-snapshots</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva View Audit Logs - test-internal</name>
<operation>
<name>archiva-view-audit-logs</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-internal</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Read Repository - test-internal</name>
<operation>
<name>archiva-read-repository</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-internal</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva View Audit Logs - test-snapshots</name>
<operation>
<name>archiva-view-audit-logs</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-snapshots</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Merge Repository - test-internal</name>
<operation>
<name>archiva-merge-repository</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-internal</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Delete Artifact - test-snapshots</name>
<operation>
<name>archiva-delete-artifact</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-snapshots</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Edit Repository - test-snapshots</name>
<operation>
<name>archiva-edit-repository</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-snapshots</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Upload to Repository - test-internal</name>
<operation>
<name>archiva-upload-repository</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-internal</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Upload to Repository - test-snapshots</name>
<operation>
<name>archiva-upload-repository</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-snapshots</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Delete Repository - test-snapshots</name>
<operation>
<name>archiva-delete-repository</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-snapshots</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
<permission>
<name>Archiva Delete Repository - test-internal</name>
<operation>
<name>archiva-delete-repository</name>
<permanent>false</permanent>
</operation>
<resource>
<identifier>test-internal</identifier>
<pattern>false</pattern>
<permanent>false</permanent>
</resource>
</permission>
</permissions>"
MRM-1908,trampi,Fabian Trampusch,2015-12-07T07:46:53.483Z,2015-12-07T07:46:53.483Z,I can verify that this issue happened here (at the company I am working) too. A user without write permission for a given repository had uploaded artifacts into that repository.
MRM-1908,thunderhook,Oliver E,2016-03-23T10:41:46.893Z,2016-03-23T10:41:46.893Z,"For us this issue happens when a user has only a single manager role (e.g. ""test-repo Manager"").
Then the user can choose whatever repository he wants to upload any file.
If the user has no manager role whatsoever, the navigation point ""Upload Artifact"" is not shown.

For me this seems like a problem while building the repository-list in the upload form.
Expected behaviour: Only ""test-repo"" is shown
Actual behaviour: all repositories are shown"
MRM-1908,thunderhook,Oliver E,2016-03-25T22:08:48.429Z,2016-03-25T22:08:48.429Z,"I supplied a patch which corrects the behaviour showing all read-accessible repositories in the upload form.
This patch adds a new method in the BrowseService which only delivers repositories with the users associated write access (browseService/userManagableRepositories). The existing method can't be changed since it is also used on the browsing page (/browseService/userRepositories)

I'm not sure if this covers [~trampi]'s and [~chriss745]'s problem though. Maybe you can give it a look/try."
MRM-1908,chriss745,Krisztian Fekete,2016-03-25T22:10:40.64Z,2016-03-25T22:10:40.64Z,"I am out of office until 29th of March. In any urgent cases please get in contact with Raj Markala.

Krisztian

"
MRM-1908,githubbot,ASF GitHub Bot,2016-09-09T07:53:47.304Z,2016-09-09T07:53:47.304Z,"GitHub user effrafax opened a pull request:

    https://github.com/apache/archiva-redback-core/pull/9

    Adding parameter references in authorization resource

    This is a patch that may be used to fix https://issues.apache.org/jira/browse/MRM-1908
    
    Certain rest methods in archiva have permission checks annotated but do not take the repository id into account. This patch adds the possibility to set the resource parameter of the authorization check dynamically from a request parameter.
    
    In certain cases the resource must be dynamically set by parameter values.
    This patch allows to add a reference into the resource field of the redback
    annotation '{parameterName}' that fills the resource of the permission dynamically
    with the parameter value, if found.
    
    Please check, if this would be the right way to fix the issue. I tested it, by changing the resource annotation in archiva: `FileUploadService#save`:
    `    @RedbackAuthorization( resource = ""{repositoryId}"", permissions = ArchivaRoleConstants.OPERATION_REPOSITORY_UPLOAD )`
    
    


You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/effrafax/archiva-redback-core param_resource

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/archiva-redback-core/pull/9.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #9
    
----
commit 796af57be2dda6f5b4c5b27f57157ecc0a33aff1
Author: Martin Stockhammer <m.stockhammer@web.de>
Date:   2016-09-09T07:40:29Z

    Adding parameter references in authorization resource
    
    In certain cases the resource must be dynamically set by parameter values.
    This patch allows to add a reference into the resource field of the redback
    annotation '{parameterName}' that fills the resource of the permission dynamically
    with the parameter value, if found.

----
"
MRM-1908,githubbot,ASF GitHub Bot,2016-09-13T00:50:38.645Z,2016-09-13T00:50:38.645Z,"Github user asfgit closed the pull request at:

    https://github.com/apache/archiva-redback-core/pull/9
"
MRM-1908,olamy,Olivier Lamy (*$^%`),2016-09-13T00:53:10.855Z,2016-09-13T00:53:10.855Z,"Pr merged.
Thanks!!"
MRM-1908,hudson,Hudson,2016-09-13T01:39:08.126Z,2016-09-13T01:39:08.126Z,"FAILURE: Integrated in Jenkins build archiva-master-build #951 (See [https://builds.apache.org/job/archiva-master-build/951/])
use redback 2.5-SNAPSHOT to fix [MRM-1908] (olamy: [https://github.com/apache/archiva/commit/6db703ff9d5924069b59a886315196115b28f548])
* (edit) pom.xml
"
MRM-1908,githubbot,ASF GitHub Bot,2016-09-15T14:03:31.122Z,2016-09-15T14:03:31.122Z,"GitHub user effrafax opened a pull request:

    https://github.com/apache/archiva/pull/26

    Final fix for MRM-1908

    Hi,
    
    this is the final patchset for https://issues.apache.org/jira/browse/MRM-1908 .
    
    The last pull request on the redback component added the needed functionality to restrict the rest service methods. This patch restricts the upload rest method and returns a filtered list on the upload view in the web gui.


You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/effrafax/archiva MRM-1908

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/archiva/pull/26.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #26
    
----
commit d01764bed989abc53c20cb79723e59ae390f454a
Author: Martin Stockhammer <m.stockhammer@web.de>
Date:   2016-09-14T19:48:59Z

    Changing upload permissions using parameter reference
    
    Needs the new functionality in the redback annotations.

commit de3eb83242b42d75546670e8859cdb1f59fe4fa6
Author: Martin Stockhammer <m.stockhammer@web.de>
Date:   2016-09-14T19:49:30Z

    Adding restricted view for user managable repositories
    
    Adds additional rest method to list the repositories where the user
    has manage permissions.
    Restricts the view for uploads to only managable repositories.

commit 5bc8ad7de352acb025fefb2e39967abf94163b3b
Author: Martin Stockhammer <m.stockhammer@web.de>
Date:   2016-09-14T21:04:03Z

    Adding test case for repository listing

----
"
MRM-1908,githubbot,ASF GitHub Bot,2016-09-16T00:06:40.806Z,2016-09-16T00:06:40.806Z,"Github user asfgit closed the pull request at:

    https://github.com/apache/archiva/pull/26
"
MRM-1910,thunderhook,Oliver E,2016-03-25T22:31:39.672Z,2016-03-25T22:31:39.672Z,Patch which sets the minimum of daysOlder to 0 instead of 1.
MRM-1925,githubbot,ASF GitHub Bot,2016-09-13T14:50:52.595Z,2016-09-13T14:50:52.595Z,"GitHub user effrafax opened a pull request:

    https://github.com/apache/archiva/pull/24

    Adding default userAgent system property

    The default userAgent string used for proxy connections can be configured by
    a system property.
    
    See https://issues.apache.org/jira/browse/MRM-1925
    
    Not sure, if a system property is the right thing here, or if the central configuration service should be used. If the latter, please provide some hints how to put that into the central configuration.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/effrafax/archiva MRM-1925

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/archiva/pull/24.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #24
    
----
commit bd10f7b8a2ff638bb4b3796321425cac9db5476a
Author: Martin Stockhammer <m.stockhammer@web.de>
Date:   2016-09-13T14:46:50Z

    Adding default userAgent system property
    
    The default userAgent string used for proxy connections can be configured by
    a system property.

----
"
MRM-1925,githubbot,ASF GitHub Bot,2016-09-14T00:51:55.337Z,2016-09-14T00:51:55.337Z,"Github user asfgit closed the pull request at:

    https://github.com/apache/archiva/pull/24
"
MRM-1925,olamy,Olivier Lamy (*$^%`),2016-09-14T00:54:15.815Z,2016-09-14T00:54:15.815Z,"pr merged.
Thanks! "
MRM-1307,olamy,Olivier Lamy (*$^%`),2014-02-25T20:54:36.677Z,2014-02-25T20:54:36.677Z,fixed in 2.x
MRM-1325,brettporter,Brett Porter,2010-02-18T18:58:01.422Z,2010-02-18T18:58:01.422Z,"certainly something we want to do, but we'll need to see where it falls in the priorities. Please let us know if you're interested in contributing to the effort."
MRM-1325,rogerxia,roger xia,2011-10-08T22:17:04.623Z,2011-10-08T22:17:04.623Z,What is the status? Is it resolved?
MRM-1325,brettporter,Brett Porter,2011-10-17T19:23:46.926Z,2011-10-17T19:23:46.926Z,Nothing has progressed on it yet.
MRM-1328,brettporter,Brett Porter,2011-03-29T08:39:33.512Z,2011-03-29T08:39:33.512Z,update for latest changes in the code also
MRM-1366,brettporter,Brett Porter,2010-03-17T00:29:45.015Z,2010-03-17T00:29:45.015Z,"sorry, my fault for not properly testing a refactoring. Fix incoming!"
MRM-1386,oching,Maria Odea Ching,2010-05-10T08:57:30.351Z,2010-05-10T08:57:30.351Z,Fixed in 1.3.x branch [-r942722|http://svn.apache.org/viewvc?revision=942722&view=revision]
MRM-1329,brettporter,Brett Porter,2010-03-07T23:34:29.224Z,2010-03-07T23:34:29.224Z,Also need to ensure that the extension points are well documented so that we don't break those APIs in the future (or document such breakage)
MRM-1329,brettporter,Brett Porter,2011-03-29T08:39:00.545Z,2011-03-29T08:39:00.545Z,"need to draw a diagram of session into documentation, and revise current APT docs for changes (e.g. session)

key point - single interface to whole system (storage is a bit individual)"
MRM-1329,brettporter,Brett Porter,2011-09-12T08:26:42.289Z,2011-09-12T08:26:42.289Z,"I could potentially delay this to 1.4, but it really is needed to make it easier for new developers to hack on the code or extend Archiva."
MRM-1394,jzurbano,jzurbano,2010-07-04T06:29:50.59Z,2010-07-04T06:29:50.59Z,"Modifications in revisions
* 960311 (1.3.x branch)
* 960322 (trunk)"
MRM-1332,olamy,Olivier Lamy (*$^%`),2011-09-12T02:30:24.626Z,2011-09-12T02:30:24.626Z,IMHO could me marked as fixed ? @Brett ?
MRM-1332,olamy,Olivier Lamy (*$^%`),2011-09-29T02:30:28.351Z,2011-09-29T02:30:28.351Z,done
MRM-1332,brettporter,Brett Porter,2011-10-01T02:50:40.453Z,2011-10-01T02:50:40.453Z,"while MRM-1513 removed the config, there is still:
- the element in the default config
- no mechanism to migrate existing config files correctly as listed in description
"
MRM-1332,olamy,Olivier Lamy (*$^%`),2011-10-04T16:17:26.121Z,2011-10-04T16:17:26.121Z,"see r 1178954 r1178955.
I have made create-archiva-metadata and duplicate-artifacts as default knowContentConsumers"
MRM-1361,brettporter,Brett Porter,2010-03-10T22:43:29.036Z,2010-03-10T22:43:29.036Z,"committed initial version, though it still requires some hardcoding in the JSPs to support a better visual representation."
MRM-1361,dennisl@apache.org,Dennis Lundberg,2010-06-07T02:47:48.873Z,2010-06-07T02:47:48.873Z,"We are having trouble downloading .NET artifacts from Archiva. We are using NPanday and Maven's own Assembly Plugin. The assembly descriptor uses a dependencySet and the Assembly Plugin complains that it cannot find NUnit:NUnit.Framework:library:2.2.8.0 in Archiva. The file, which is a dll, is in Archiva but was installed with packaging=library. Archiva (version 1.3) shows it as a dll in the top right info-box, but the POM snippet says type=library.

Will this Archiva plugin solve this problem for us?

If so, can it be installed into an Archiva 1.3 instance or does it require any 1.4 API:s?"
MRM-1361,brettporter,Brett Porter,2010-06-07T03:10:06.11Z,2010-06-07T03:10:06.11Z,"it relies on changes to the internal APIs, but here is an equivalent patch. Perhaps we could apply it to 1.3.1?"
MRM-1361,dennisl@apache.org,Dennis Lundberg,2010-06-07T06:26:21.8Z,2010-06-07T06:26:21.8Z,"Thanks Brett, I'll try your patch on our Archiva 1.3 installation."
MRM-1361,oching,Maria Odea Ching,2010-06-08T03:03:48.499Z,2010-06-08T03:03:48.499Z,"I'll apply the patch to 1.3.x branch and see if there aren't any problems. If there are none, I guess we can include it in the 1.3.1 release."
MRM-1361,oching,Maria Odea Ching,2010-06-08T05:03:07.707Z,2010-06-08T05:03:07.707Z,I tried the patch in 1.3.x branch and Maven was able to download an artifact from the repo with a library packaging. Patch applied to 1.3.x branch [-r952596|http://svn.apache.org/viewvc?revision=952596&view=revision].
MRM-1361,dennisl@apache.org,Dennis Lundberg,2010-06-08T09:18:21.487Z,2010-06-08T09:18:21.487Z,"We installed a new Archiva 1.3.1-SNAPSHOT with Brett's patch.
The problems we had with downloading artifacts with packaging=library went away. We'll do more testing tomorrow."
MRM-1361,brettporter,Brett Porter,2011-09-30T21:25:45.993Z,2011-09-30T21:25:45.993Z,"This was already included in 1.4-M1, and MRM-1389 was created for the one added in 1.3.1"
MRM-1392,olamy,Olivier Lamy (*$^%`),2014-02-25T19:33:41.545Z,2014-02-25T19:33:41.545Z,webdav tests has been really improved in 2.x
MRM-1321,dtriphaus,Daniel Triphaus,2010-02-03T03:28:08.805Z,2010-02-03T03:28:08.805Z,"Well i took a look at the source and I found a solution:

in DefaultRepositoryBrowsing.java (archiva-database) in method handleGenericSnapshots (Line 346) the Collection gets reversed: 

Collections.reverse( versions );

If i comment out this Line, Archiva offers me the latest Version for my SNAPHSOT. Here is an Example:

BEFORE: 
Version  	7.3.1-20100201.230219-35
Other Versions  	 7.3.1-20100201.230219-35  7.3.1-20100202.134434-36  7.3.1-20100202.134921-37

AFTER:
Version  	7.3.1-20100202.134921-37
Other Versions  	 7.3.1-20100201.230219-35  7.3.1-20100202.134434-36  7.3.1-20100202.134921-37

So maybe some kind of sorting was changed somewhere?"
MRM-1321,oching,Maria Odea Ching,2010-02-03T04:03:00.874Z,2010-02-03T04:03:00.874Z,"It's possible, there were a number of changes/fixes from 1.2.2 to 1.3. Would you like to provide a test case and/or a fix for this?"
MRM-1321,dtriphaus,Daniel Triphaus,2010-02-03T04:09:47.922Z,2010-02-03T04:09:47.922Z,Fixed showing latest Version for -SNAPSHOT in Archiva GUI when more than 1 SNAPHSOT-Version is available for an artifact. Before the GUI was always showing the oldest available Version as -SNAPHSOT.
MRM-1321,oching,Maria Odea Ching,2010-02-03T04:38:52.237Z,2010-02-03T04:38:52.237Z,"Thanks, but can you patch it using svn diff please so it'll be easier to apply and we'll know which part changed? :) "
MRM-1321,dtriphaus,Daniel Triphaus,2010-02-03T06:10:24.551Z,2010-02-03T06:10:24.551Z,"Hope this is correct, I'm not an svn expert :)"
MRM-1321,oching,Maria Odea Ching,2010-02-03T06:29:14.992Z,2010-02-03T06:29:14.992Z,"Looks ok to me :) I'll try it out, thanks!"
MRM-1321,oching,Maria Odea Ching,2010-04-02T06:21:14.273Z,2010-04-02T06:21:14.273Z,"Patch applied to 1.3.x branch in [-r930242|http://svn.apache.org/viewvc?revision=930242&view=revision]. I've also updated the existing unit test for view artifact to the correct behavior. This will not be merged to trunk since we are no longer using a database in there now.

Thanks again for the patch Daniel! "
MRM-1333,brettporter,Brett Porter,2011-03-29T08:43:44.427Z,2011-03-29T08:43:44.427Z,"also, if JCR is used, need to note that on upgrade: must copy repository.xml to conf directory if separated config (and doc how to configure that)"
MRM-1333,brettporter,Brett Porter,2011-03-29T09:29:55.367Z,2011-03-29T09:29:55.367Z,to elaborate on the DB being removed - the JNDI connector also can
MRM-1333,olamy,Olivier Lamy (*$^%`),2011-09-29T02:26:56.038Z,2011-09-29T02:26:56.038Z,"mostly done in [rev 1177185|http://svn.apache.org/viewvc?rev=1177185&view=rev]
lemme know if you see some others"
MRM-1333,olamy,Olivier Lamy (*$^%`),2011-10-06T15:13:15.11Z,2011-10-06T15:13:15.11Z,some documentation added. IMHO can be closed.
MRM-1333,olamy,Olivier Lamy (*$^%`),2011-10-10T06:07:36.47Z,2011-10-10T06:07:36.47Z,some screenshots fixed in r1180875.
MRM-1335,brettporter,Brett Porter,2011-03-29T09:53:38.488Z,2011-03-29T09:53:38.488Z,"also, the incomplete warning is with a tick instead of warning icon"
MRM-1335,gigsz1,Greg Michael Meneses,2011-06-13T05:06:21.227Z,2011-06-13T05:06:21.227Z,"Currently this is displayed when the metadata is incomplete:
""The model may be incomplete due to a previous error in resolving information. Refer to the repository problem reports for more information.""

Any suggestions on a better message?"
MRM-1335,brettporter,Brett Porter,2011-06-13T22:37:46.48Z,2011-06-13T22:37:46.48Z,"Ideally, the failure will be captured (in addition to flagging it as incomplete), and a descriptive error shown in the box.

A good test case is when a POM with a missing parent is in the repository - it should indicate in the error the error returned from the Maven model builder.

Note the other comments above for more information."
MRM-1335,gigsz1,Greg Michael Meneses,2011-06-15T06:55:12.379Z,2011-06-15T06:55:12.379Z,"Attached patch for fix.

Fix details:
- changed from ActionMessage to ActionError to use warning icon instead of success icon
- changed warning message to include the exception message
- for parent pom problem, changed message indicating that parent pom cannot be resolved"
MRM-1335,brettporter,Brett Porter,2011-06-15T15:44:59.008Z,2011-06-15T15:44:59.008Z,"Looks good to me. There's a couple of code style issues I'd tweak when applying it.

I'm not 100% sure about making maven2-repo depend on problem-reports, but I think it's ok for now until we have a more event-driven approach."
MRM-1335,gigsz1,Greg Michael Meneses,2011-06-21T03:15:20.759Z,2011-06-21T03:15:20.759Z,Attached an updated patch file that fixes a problem where 2 warning message is displayed if the parent pom cannot be resolved
MRM-1373,brill,Brill Pappin,2010-04-30T21:41:12.443Z,2010-04-30T21:41:12.443Z,"I'm having the same issue.

I will attempt to create that database as a non utf8."
MRM-1373,oching,Maria Odea Ching,2010-05-28T04:37:56.813Z,2010-05-28T04:37:56.813Z,This is actually a problem in Redback. I'll file a separate issue in the Redback jira and fix it there. Thanks!
MRM-1373,gautencio,Gwen Harold Autencio,2010-06-04T01:44:34.716Z,2010-06-04T01:44:34.716Z,"I have replicated issue, setting default character to utf8.

Will be testing the workaround given in REDBACK-267 if it works."
MRM-1373,gautencio,Gwen Harold Autencio,2010-06-08T23:51:15.354Z,2010-06-08T23:51:15.354Z,"Hi,

I'm attaching a workaround documentation for this issue. Also attaching a patch for the archiva site adding MRM-1373 in the known issues section.

Thanks."
MRM-1373,oching,Maria Odea Ching,2010-06-09T22:31:39.211Z,2010-06-09T22:31:39.211Z,MRM-1373.patch applied to 1.3.x branch [-r953209|http://svn.apache.org/viewvc?revision=953209&view=revision]. I moved the reference to this JIRA issue specified in MRM-1373-known-issues.patch to the databases.apt instead. Thanks Gwen!
MRM-1373,oching,Maria Odea Ching,2010-06-10T00:28:46.91Z,2010-06-10T00:28:46.91Z,Merged to trunk in [-r953219|http://svn.apache.org/viewvc?revision=953219&view=revision]
MRM-1313,skygolanur,Eric Barboni,2012-10-03T16:07:48.829Z,2012-10-03T16:07:48.829Z,"Seems that only the archiva logo top left in some of 1.3.5 pages (i.e. http://archiva.apache.org/docs/1.3.5/userguide/browsing.html)45 references totals.

1.4M2 and 1.4M3 are not leading to docs maybe we can avoid creating and index file."
MRM-1379,brettporter,Brett Porter,2010-05-04T01:04:58.767Z,2010-05-04T01:04:58.767Z,"some old API uses to review:
- Auditable in UploadAction should be part of a revision of how events are propagated to the audit logging plugin
- MetadataTools and other metadata related calls should be pushed into the storage's responsibility
- ManagedRepositoryContent / RepositoryContentFactory to be replaced by storage APIs
- ArchivaRepositoryMetadata
- ArtifactReference"
MRM-1344,gigsz1,Greg Michael Meneses,2011-06-16T21:47:10.425Z,2011-06-16T21:47:10.425Z,"Attached patch for bug fix:
- added a checking to add the version only if it has not been added"
MRM-1344,gigsz1,Greg Michael Meneses,2011-06-17T05:44:17.288Z,2011-06-17T05:44:17.288Z,"Please disregard first attachment. 
The addition of version for new instance was mistakenly deleted."
MRM-1344,oching,Maria Odea Ching,2011-06-17T06:26:51.72Z,2011-06-17T06:26:51.72Z,"Hi Greg, could you also provide unit tests for your fix? :) Thanks!"
MRM-1344,gigsz1,Greg Michael Meneses,2011-06-17T07:56:52.654Z,2011-06-17T07:56:52.654Z,Attached a patch including a unit test. Also attached a tgz file containing additional jar file needed by the unit test code.
MRM-1344,brettporter,Brett Porter,2011-06-28T02:45:32.536Z,2011-06-28T02:45:32.536Z,applied with some modifications
MRM-1370,brettporter,Brett Porter,2010-04-06T03:17:28.87Z,2010-04-06T03:17:28.87Z,"This is improved in 1.4, but could still use work. They are all 'zip', with the title tag being the filename."
MRM-1370,bfreuden,Bruno Freudensprung,2010-04-06T03:35:20.554Z,2010-04-06T03:35:20.554Z,"If the label could be the filename or, even better (to me), the classifier; it would be great!
"
MRM-1370,olamy,Olivier Lamy (*$^%`),2011-10-27T17:00:17.875Z,2011-10-27T17:00:17.875Z,classifier added if unknown one.
MRM-1318,brettporter,Brett Porter,2010-02-05T02:03:12.85Z,2010-02-05T02:03:12.85Z,Looking to upgrade our Nexus integration in the next release
MRM-1318,olamy,Olivier Lamy (*$^%`),2011-11-02T17:35:26.642Z,2011-11-02T17:35:26.642Z,done
MRM-1340,ctan,Maria Catherine Tan,2011-06-21T01:48:56.415Z,2011-06-21T01:48:56.415Z,"I do not know how to replicate this.

I tried uploading an artifact with junit, which doesn't exist in my managed repo, as its dependency and the junit did not show up when I click 'Browse'.

Does this mean the junit will show up in the artifact's dependency tree?

I couldn't check it right now because when I click the Dependency Tree tab I'm getting an exception."
MRM-1340,ctan,Maria Catherine Tan,2011-06-21T02:12:23.912Z,2011-06-21T02:12:23.912Z,"Was able to replicate this somehow.

I uploaded the commons-lang artifact and when I clicked on the Dependencies tab, the junit shows up. When I click the link 3.8.1, I got an error ""Artifact Not Found"".

IIUC, the junit should not show up under the Dependencies tab since it doesn't exist?"
MRM-1340,brettporter,Brett Porter,2011-06-21T19:38:48.992Z,2011-06-21T19:38:48.992Z,"I have a feeling I may have fixed this with something else. If they aren't showing up in browse, then I'd say close as ""cannot reproduce"". Thanks!"
MRM-1340,ctan,Maria Catherine Tan,2011-06-21T21:00:31.087Z,2011-06-21T21:00:31.087Z,"Ok thanks Brett!

Btw, I don't have karma to close this issue :)"
MRM-1387,dennisl@apache.org,Dennis Lundberg,2010-06-07T03:20:23.293Z,2010-06-07T03:20:23.293Z,"Sorry, I should have google first. The artifact can be found at a, seemingly public, repository at Sonatype. Adding the following snippet to the root archiva POM downloaded the artifact for me:

{code}
  <repositories>
    <repository>
      <id>sonatype-third-party</id>
      <name>Sonatype Third Party Repository</name>
      <url>http://repository.sonatype.org/content/repositories/third-party</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </repository>
  </repositories>
{code}"
MRM-1387,brettporter,Brett Porter,2010-06-07T03:34:36.081Z,2010-06-07T03:34:36.081Z,"that snuck in to the last nexus-indexer update (there's another issue for cleaning up its dependencies, but I think this is now required). I posted a note on MAVENUPLOAD-2738 which is also trying to get this library into central."
MRM-1387,brettporter,Brett Porter,2010-06-09T20:29:51.906Z,2010-06-09T20:29:51.906Z,it looks like we can fix this by excluding that dependency and including javax.inject:javax.inject:1
MRM-1396,brettporter,Brett Porter,2010-08-06T00:55:47.825Z,2010-08-06T00:55:47.825Z,"we'll check, as it seems identical. Maybe this is a problem on windows?"
MRM-1396,oching,Maria Odea Ching,2010-12-11T23:57:23.925Z,2010-12-11T23:57:23.925Z,"I cannot reproduce this issue in 1.3.2. I tried both in Windows and Linux, but I didn't get the above error when the repository purge consumer was executed during the repo scan."
MRM-1396,oching,Maria Odea Ching,2010-12-12T00:18:26.977Z,2010-12-12T00:18:26.977Z,"I also couldn't reproduce this in 1.3.1.

Dominique, were you using the standalone jetty bundle or did you deploy the Archiva war file to an app server? "
MRM-1396,djeanprost,Dominique Jean-Prost,2010-12-13T02:03:42.353Z,2010-12-13T02:03:42.353Z,"I'm using the standalone jetty bundle. Is there log files I could provide to you to help ?
I run archiva on windows."
MRM-1396,oching,Maria Odea Ching,2010-12-13T02:08:38.976Z,2010-12-13T02:08:38.976Z,"Yes, it might help to provide the log files :) Can you attach the archiva.log file where the above error occurred?

Thanks!"
MRM-1396,djeanprost,Dominique Jean-Prost,2010-12-13T02:14:48.284Z,2010-12-13T02:14:48.284Z,Log file with stacktrace inside.
MRM-1396,brettporter,Brett Porter,2010-12-14T19:20:43.801Z,2010-12-14T19:20:43.801Z,fixed in the same way as the other purge consumers - by ignoring the exception (as purging non-artifacts makes no sense anyway)
MRM-1300,brettporter,Brett Porter,2009-12-10T05:36:52.466Z,2009-12-10T05:36:52.466Z,this is now completed on the MRM-1025 branch
MRM-1350,brettporter,Brett Porter,2010-02-25T03:32:15.547Z,2010-02-25T03:32:15.547Z,"in what way? should a file uploaded with a timestamp be converted back, or do you want the correct snapshot version generated when a file is uploaded with a version of -SNAPSHOT?"
MRM-1350,brettporter,Brett Porter,2011-09-12T10:13:15.182Z,2011-09-12T10:13:15.182Z,"we already generate a timestamp, and I don't think we want to support uploading non-timestamped ones"
MRM-1360,brettporter,Brett Porter,2010-05-03T23:55:24.134Z,2010-05-03T23:55:24.134Z,"we should move the metadata update consumer into this plugin as well and remove its dependency on archiva-repository-layer and archiva-model

It has the following uses in MUC:
- ProjectReference, VersionedReference and ArtifactReference
- MetadataTools and related APIs
- ManagedRepositoryContent / RepositoryContentFactory"
MRM-1360,brettporter,Brett Porter,2010-05-03T23:57:02.944Z,2010-05-03T23:57:02.944Z,"we should consider the impact on the purge API for this as well - several of the purge operations are maven 2 specific, but there might be a general service for this. It needs more investigation but my initial reaction is that purge is something that can be implemented in each repository storage provider as appropriate (by hooking into a maintenance schedule event from a core service that runs that when desired)"
MRM-1360,brettporter,Brett Porter,2011-03-29T08:37:26.803Z,2011-03-29T08:37:26.803Z,"this should also be including stuff in VersionUtil, etc. for example"
MRM-1317,ctan,Maria Catherine Tan,2011-06-23T01:12:04.008Z,2011-06-23T01:12:04.008Z,attached patch to fix the pagination in audit log report
MRM-1345,oching,Maria Odea Ching,2010-04-04T22:18:06.581Z,2010-04-04T22:18:06.581Z,"The latest release of nexus indexer is 2.0.5 and Archiva is currently using 2.0.0.

These are modules that will be affected:
* archiva-indexing-scheduler (indexing)
* archiva-indexer (search)
* archiva-xmlrpc-services

The upgrade must be tested against M2eclipse and IAM. The documentation also needs to be updated regarding the changes made and also note against which clients (and their version) the indexer is compatible."
MRM-1345,gautencio,Gwen Harold Autencio,2010-04-23T01:36:51.68Z,2010-04-23T01:36:51.68Z,"Hi, attaching patch for the update of version for nexus-indexer to 2.0.5."
MRM-1345,brettporter,Brett Porter,2010-04-23T04:19:34.319Z,2010-04-23T04:19:34.319Z,"the patch looks good, except for failing DRY on the FULL_INDEX constant.

Have you been able to test the generated indices in any client applications?

BTW, I deleted the subtask you created. We don't generally use subtasks, and I think I was mistaken anyway (the 2.0.0 indexer is already creating the incremental index). Or did you find something else that was needed?"
MRM-1345,gautencio,Gwen Harold Autencio,2010-04-23T05:22:52.603Z,2010-04-23T05:22:52.603Z,I will still test it with m2eclipse and IAM.
MRM-1345,gautencio,Gwen Harold Autencio,2010-04-26T05:05:20.356Z,2010-04-26T05:05:20.356Z,"Tested the upgrade of nexus indexer against IAM ver. 0.11.0.201001181900 the artifact search is working. 
But searching from a repository group only the artifacts from the first repository of the group are being returned. 
MRM-1318 and MRM-815 are still occurring even after upgrade of the nexus-indexer."
MRM-1345,jzurbano,jzurbano,2010-04-27T05:34:54.172Z,2010-04-27T05:34:54.172Z,Patch applied in r938402. Thanks Gwen! :)
MRM-1345,jzurbano,jzurbano,2010-04-27T06:37:42.282Z,2010-04-27T06:37:42.282Z,"Tested with m2eclipse v0.10.0.20100209 (using Eclipse 3.4.2 Ganymede).

MRM-1318 and MRM-815 still exist after the upgrade."
MRM-1345,olamy,Olivier Lamy (*$^%`),2011-06-22T15:31:32.22Z,2011-06-22T15:31:32.22Z,reopen to upgrade to last version : org.apache.maven.indexer:indexer-core:4.1.1
MRM-1345,olamy,Olivier Lamy (*$^%`),2011-06-28T14:57:38.147Z,2011-06-28T14:57:38.147Z,so look done :-)
MRM-1331,olamy,Olivier Lamy (*$^%`),2011-09-28T02:08:26.772Z,2011-09-28T02:08:26.772Z,mostly done IMHO ?
MRM-1331,brettporter,Brett Porter,2011-09-28T02:31:33.41Z,2011-09-28T02:31:33.41Z,there's a lot of FIXME - I can look over those this weekend too and turn them into issues
MRM-1331,olamy,Olivier Lamy (*$^%`),2012-12-20T07:56:13.692Z,2012-12-20T07:56:13.692Z,"Just reviewed FIXME.
Do you see any still related ?"
MRM-1331,effrafax,Martin Stockhammer,2017-04-05T19:18:33.149Z,2017-04-05T19:18:33.149Z,"Will resolve this issue for now. I think its better to create a new one with such cleanup tasks, when the 3.0.0 is released."
MRM-1311,oching,Maria Odea Ching,2010-01-18T05:12:26.171Z,2010-01-18T05:12:26.171Z,Need to evaluate whether AbstractMonitoredConsumer can already be removed.
MRM-1311,brettporter,Brett Porter,2010-01-18T05:27:46.454Z,2010-01-18T05:27:46.454Z,I wouldn't worry about such significant changes as removing consumer classes on the point release branch. A lot of things in this direction have happened on the MRM-1025 branch that I hope to propose for trunk after everyone has had a chance to review it.
MRM-1311,brettporter,Brett Porter,2010-03-04T23:18:09.651Z,2010-03-04T23:18:09.651Z,"This isn't minor - it looks like nothing calls ""addConsumerMonitor"", which is why nothing is ever logged from those lines."
MRM-1311,jsharp,jsharp,2014-09-24T15:21:27.975Z,2014-09-24T15:21:27.975Z,"Right now, the consumers in package org.apache.archiva.consumers.core -- ValidateChecksumConsumer, ArtifactMissingChecksumConsumer, AutoRemoveConsumer, AutoRenameConsumer, & MetadataUpdaterConsumer -- call the inherited methods (AbstractMonitoredConsumer's triggerConsumerError, triggerConsumerWarning, triggerConsumerInfo) without using a Logger. (MetadataUpdaterConsumer logs debug messages separately.)

It looks like a simple fix would be to add logging to each of these classes and leave the existing calls as they are.

As Brett mentioned, nothing in archiva calls addConsumerMonitor and nothing implements ConsumerMonitor. Also, many other consumer classes extend AbstractMonitoredConsumer but do not call triggerConsumerError, triggerConsumerWarning, or triggerConsumerInfo. So it is a question whether we want to increase usage of these three methods and keep the ConsumerMonitor interface, or when to get rid of them."
MRM-1311,olamy,Olivier Lamy (*$^%`),2014-09-29T20:16:14.741Z,2014-09-29T20:16:14.741Z,"fixed with https://github.com/apache/archiva/pull/5
Thanks!"
MRM-1303,carlos,Carlos Sanchez,2010-02-03T14:38:39.248Z,2010-02-03T14:38:39.248Z,"Confirmed in Archiva 1.3, happens when metadata file does not have a released version, for instance when artifact is uploaded with deploy:deploy-file

The artifact is deleted anyway despite the error, but affects metadata update at artifact level

For instance:
{code:xml}
<?xml version=""1.0"" encoding=""UTF-8""?>
<metadata>
  <groupId>org.eclipse</groupId>
  <artifactId>eclipse-platform</artifactId>
  <version>3.5.1</version>
  <versioning>
    <versions>
      <version>3.5.1</version>
    </versions>
    <lastUpdated>20100203201332</lastUpdated>
  </versioning>
</metadata>
{code}"
MRM-1303,oching,Maria Odea Ching,2010-11-05T06:24:48.647Z,2010-11-05T06:24:48.647Z,Fixed in trunk [-r1031518|http://svn.apache.org/viewvc?revision=1031518&view=revision]
MRM-1364,wsmoak,Wendy Smoak,2010-03-12T09:13:09.091Z,2010-03-12T09:13:09.091Z,"Related thread:  http://old.nabble.com/Upload-broken-on-trunk--td27855300.html

Brett wrote:
The upload issue looks like it needs a Struts upgrade: http://issues.apache.org/jira/browse/WW-2684. It also exists in Archiva 1.3.x. "
MRM-1364,brettporter,Brett Porter,2011-09-12T10:30:59.364Z,2011-09-12T10:30:59.364Z,tested and working now. We've upgraded to the latest Struts.
MRM-1364,brettporter,Brett Porter,2011-09-12T10:53:32.765Z,2011-09-12T10:53:32.765Z,was in the wrong location - in fact jetty:run / jetty:run-war / jetty:run-exploded are not working right now.
MRM-1364,olamy,Olivier Lamy (*$^%`),2011-09-12T10:57:23.717Z,2011-09-12T10:57:23.717Z,tomcat:run ?
MRM-1364,olamy,Olivier Lamy (*$^%`),2012-10-13T16:23:15.489Z,2012-10-13T16:23:15.489Z,not more issue with new UI
MRM-1367,brettporter,Brett Porter,2010-03-30T00:08:26.779Z,2010-03-30T00:08:26.779Z,The failures were on 1.3.1 branch as well as trunk.
MRM-1367,olamy,Olivier Lamy (*$^%`),2011-10-27T15:53:56.96Z,2011-10-27T15:53:56.96Z,upgrade done for 1.4-M1
MRM-1302,brettporter,Brett Porter,2010-02-28T23:57:17.984Z,2010-02-28T23:57:17.984Z,"applied a fix in r917398. My assumption is that that someone modified the group at the same time a request was made, since you didn't provide any details on how to reproduce it otherwise. By cloning the list for the request, this should now be prevented."
MRM-1343,olamy,Olivier Lamy (*$^%`),2011-09-29T02:33:47.615Z,2011-09-29T02:33:47.615Z,"as we removed database and database scanning: is-it still an issue ? 
""won't fix"" ?"
MRM-1343,brettporter,Brett Porter,2011-09-29T02:38:02.984Z,2011-09-29T02:38:02.984Z,think I made a typo :) This was after the changes. Will check if I can reproduce it.
MRM-1310,oching,Maria Odea Ching,2010-01-28T04:34:21.167Z,2010-01-28T04:34:21.167Z,Fixed in trunk [-r904029|http://svn.apache.org/viewvc?revision=904029&view=revision] and merged to 1.3.x branch [-r904030|http://svn.apache.org/viewvc?revision=904030&view=revision]
MRM-1310,oching,Maria Odea Ching,2010-01-28T04:42:26.744Z,2010-01-28T04:42:26.744Z,archiva-site also updated in [-r904033|http://svn.apache.org/viewvc?revision=904033&view=revision].
MRM-1362,oching,Maria Odea Ching,2010-04-28T05:08:44.027Z,2010-04-28T05:08:44.027Z,"I'm already able to display the project metadata info in a new tab. I'm currently working on the add, edit and delete part of the UI and looking at JQuery to see if we can use it for easier adding and editing of the fields (especially the collections like the dependencies, mailing lists, licenses, etc.)"
MRM-1362,oching,Maria Odea Ching,2010-05-04T03:56:42.601Z,2010-05-04T03:56:42.601Z,Initial changes to show the project metadata in the webapp artifact browse committed to trunk [-r940775|http://svn.apache.org/viewvc?revision=940775&view=revision].
MRM-1362,oching,Maria Odea Ching,2010-05-04T03:59:17.798Z,2010-05-04T03:59:17.798Z,"What still needs to be done:
* update and delete of metadata properties in web UI and call backs to action class
* selenium tests for the metadata page"
MRM-1362,jzurbano,jzurbano,2010-05-21T09:30:27.621Z,2010-05-21T09:30:27.621Z,"Hi Deng,

I made the following modifications in r947020 based on http://mail-archives.apache.org/mod_mbox/archiva-dev/201005.mbox/browser
* modified the display of project metadata
* modified format of mailing lists in ""Mailing List"" tab

Kindly review."
MRM-1362,oching,Maria Odea Ching,2010-05-24T05:42:23.856Z,2010-05-24T05:42:23.856Z,"Thanks Jev! The tree looks good. Btw, I removed the util for constructing the metadata and replaced it with a custom JSP tag instead which I think is more appropriate and a better practice. I've also changed some parts to not show the section names when the property (e.g. organization, issueManagement, ciManagement, etc.) is not set in the metadata.
"
MRM-1362,oching,Maria Odea Ching,2010-05-24T05:46:35.764Z,2010-05-24T05:46:35.764Z,"As for adding additional info to the metadata, I think we can start with just allowing addition of new:
* mailing lists
* dependencies
* licenses

I'm currently working on this and I'm planning to use a pop-up for adding the data when an Add or ""+"" link is clicked beside the section name for one of the above properties."
MRM-1362,jzurbano,jzurbano,2010-05-27T02:48:33.061Z,2010-05-27T02:48:33.061Z,"I have added delete of mailing list, dependency, and license entries in r948707.

Selenium tests for the delete to follow. 
"
MRM-1362,jzurbano,jzurbano,2010-05-27T21:38:30.417Z,2010-05-27T21:38:30.417Z,"Selenium tests for deleting mailing list, license, and dependency entries were added in r948793."
MRM-1362,brettporter,Brett Porter,2010-05-28T01:52:12.686Z,2010-05-28T01:52:12.686Z,"I think this has gone a little far off the original intention. Someone seems to have forgotten the all important ""generic metadata"" part.

I'm not that interested in special case handling from the beans (we show all the info in the other pages - is there really anything here that isn't redundant?). This is about the ability to CRUD non-POM derived fields, including completely arbitrary (and hierarchical) metadata. Please read the email that is linked in the description.

As for the implementation so far (other than being the wrong metadata :)
- the metadata link is not highlighting
- the artifact title is not rendering above the first horizontal rule
- the URL is not mapped to a path like .../metadata
"
MRM-1362,oching,Maria Odea Ching,2010-05-28T02:54:28.884Z,2010-05-28T02:54:28.884Z,Ok Brett. Sorry we got carried away with this. We were focusing on the second email thread that we missed what really needs to be done here. We'll fix the recent changes and review the original thread again. Thanks for reviewing the changes :)
MRM-1362,oching,Maria Odea Ching,2010-06-03T21:26:43.308Z,2010-06-03T21:26:43.308Z,"I added a new module in plugins/ for the generic metadata support. There's a new facet called GenericMetadataFacet for the generic properties. Additional properties can now be added through the UI which are added as a GenericMetadataFacet to the ProjectVersionMetadata. Currently the adding of a new property is in the Metadata page and I'm thinking of replacing this with a pop up in the future.

Btw, these are committed to trunk [-r951239|http://svn.apache.org/viewvc?revision=951239&view=revision]."
MRM-1362,oching,Maria Odea Ching,2010-06-07T02:42:08.196Z,2010-06-07T02:42:08.196Z,"Additional changes committed to trunk [-r952127|http://svn.apache.org/viewvc?revision=952127&view=revision]:
* removed project metadata custom tag
* enable delete of generic metadata properties
* added unit tests for adding and deleting properties
* clear facet properties read from file before doing the update so that removed facet properties are not retained when updating project version metadata (in FileMetadataRepository)
"
MRM-1362,oching,Maria Odea Ching,2010-06-07T03:18:49.742Z,2010-06-07T03:18:49.742Z,"Committed security restrictions in trunk [-r952136|http://svn.apache.org/viewvc?revision=952136&view=revision]:
* allow only users with repository manager role (to the specific repo where artifact resides) to add and remove metadata content
* added new permissions: archiva-add-metadata and archiva-delete-metadata"
MRM-1362,oching,Maria Odea Ching,2010-06-07T04:58:38.397Z,2010-06-07T04:58:38.397Z,Committed Selenium tests for adding generic metadata and for deleting metadata in trunk [-r952174|http://svn.apache.org/viewvc?revision=952174&view=revision].
MRM-1362,oching,Maria Odea Ching,2010-06-07T21:55:08.953Z,2010-06-07T21:55:08.953Z,Documentation committed to trunk [-r952515|http://svn.apache.org/viewvc?revision=952515&view=revision].
MRM-1362,oching,Maria Odea Ching,2010-06-11T03:51:00.748Z,2010-06-11T03:51:00.748Z,"Additional fixes done in trunk [-r953612|http://svn.apache.org/viewvc?revision=953612&view=revision]:
* do not show add property widget if user does not have repository manager role
* added selenium test for browsing metadata if user is not a repository manager"
MRM-1352,brettporter,Brett Porter,2010-03-02T07:52:53.533Z,2010-03-02T07:52:53.533Z,"does it prevent further purging occuring, or is it just that it errors on that file?"
MRM-1352,torkildr,Torkild U. Resheim,2010-03-02T08:00:55.379Z,2010-03-02T08:00:55.379Z,It throws an exception on all the files in the repository so it appears that it does not prevent further purging.
MRM-1352,brettporter,Brett Porter,2010-03-02T08:06:10.083Z,2010-03-02T08:06:10.083Z,so this is a repository in native Ivy format? That is not currently supported
MRM-1352,brettporter,Brett Porter,2010-03-09T18:49:11.366Z,2010-03-09T18:49:11.366Z,"I've changed the description accordingly. We now have the ability on trunk to add different repository types more easily, and will look to provide instructions with 1.4 if you want to write a plugin for this.

In the mean time, you can disable purging, or using a repository in Maven 2.x format with Ivy."
MRM-1352,torkildr,Torkild U. Resheim,2010-03-10T02:16:06.989Z,2010-03-10T02:16:06.989Z,Great. Please point me to the documentation and I'll see if I can add this plug-in.
MRM-1352,brettporter,Brett Porter,2010-03-14T19:06:09.556Z,2010-03-14T19:06:09.556Z,trunk is currently undergoing some heavy work to facilitate this - I suggest subscribing to dev@archiva.apache.org if you are interested in this and not prepared to wait for the 1.4 release. I'll ping this issue as soon as the documentation for the repository API is up to date.
MRM-1352,pablaasmo,Per Arnold Blaasmo,2010-10-27T07:38:17.455Z,2010-10-27T07:38:17.455Z,"I am in need for this fix, and would like to have a go on making a fix/plugin for it.
I am normally working in Eclipse. Do you have a link or description of how to set up a development environment for Archiva and plugins?
I have the Maven Integration plugin in Eclipse installed.

"
MRM-1352,brettporter,Brett Porter,2010-10-27T11:57:35.972Z,2010-10-27T11:57:35.972Z,"great!

We have some instructions here that would be fairly similar: https://cwiki.apache.org/confluence/display/ARCHIVA/Setting+up+Archiva+in+Eclipse+with+Q4E

But realistically, you shouldn't need to do anything special - import the Maven projects, and use your favourite tools for running the WARs (or use mvn jetty:run in the webapp). Most of the dev/unit testing won't require this anyway.

Feel free to drop us a note on dev@archiva.apache.org if you have any questions."
MRM-1352,troos,Tomas Roos,2010-12-10T15:50:01.831Z,2010-12-10T15:50:01.831Z,"Any news on this ?

Brett: Is the support in the 1.4 ready for the plugin-based repository format?
Per Arnold: Any news about your progress?

I might even think of doing this myself but my experience in java development isn't that big but i see a really big need for this in the community around."
MRM-1352,brettporter,Brett Porter,2010-12-12T18:12:52.255Z,2010-12-12T18:12:52.255Z,"The documentation is up to date, though could surely use some more details specific to this. The best approach is for someone to just have a go at it, and we can discuss the details on dev@archiva"
MRM-1352,troos,Tomas Roos,2011-03-30T04:00:20.255Z,2011-03-30T04:00:20.255Z,"Hey Brett!

I was thinking about creating a support ivy repositories now.
Is there any available documentation as you mentioned in the last post. Is there javadocs were talking about or where can i find some documentation before coding the interfaces?

Also i have one question. Why is there almost no implementation in the maven1-repository though alot in the maven2.

Could you say that maven1 is the foundation and that maven2 support is built ontop of the maven1 support? In this case i guess i will need to implement the classes available in the maven2-repo ? Any more concrete pointers you could give me?"
MRM-1352,brettporter,Brett Porter,2011-03-30T20:27:23.749Z,2011-03-30T20:27:23.749Z,"Great! The docs are here: http://archiva.apache.org/ref/1.4-SNAPSHOT/
They need to be republished, which I'll do now. You can also generate them from the archiva-modules directory
There are some older ones on the wiki.

maven1-repository (and maven2-repository) is still in progress of being factored out. You're better to look at maven2, and I'll try and take notes when I work on them.

I'll try and gather some notes to share on this specifically. If you are on dev@archiva or IRC let us know if we can help out as you have a go at it.
"
MRM-1352,troos,Tomas Roos,2011-04-01T01:49:07.756Z,2011-04-01T01:49:07.756Z,"Sure i will join the dev@archiva mailing list.
Which channel/network is it on IRC ?"
MRM-1352,brettporter,Brett Porter,2011-04-01T05:51:35.942Z,2011-04-01T05:51:35.942Z,#archiva on irc.codehaus.org
MRM-1352,pablaasmo,Per Arnold Blaasmo,2011-11-28T03:07:42.771Z,2011-11-28T03:07:42.771Z,"We are in desperate need to have this supported now, so I will start today and give it a try to work on it. I will probably need some support from some of you core developers and will connect to the irc ASAP."
MRM-1352,pablaasmo,Per Arnold Blaasmo,2012-06-29T06:53:21.084Z,2012-06-29T06:53:21.084Z,Patch to support ivy medadata files.
MRM-1352,pablaasmo,Per Arnold Blaasmo,2012-06-29T06:53:30.133Z,2012-06-29T06:53:30.133Z,"Well, after working on an of for a while with this and trying to make add a plugin for IVY support I decided to just make a small patch to the maven 2 plugin to support ivy metadata file that has the names 'ivy-<version>.xml' name format.

Adding a ivy-repository plugin needs more work and changes in more fundamental parts of archiva to support different repository types other than maven. 

I hope you find it useful.

Improvements would be:
- Add ivy support as a separate plugin.
- Be able to fetch meta data from the Ivy file.
- Add property that makes it possible to have different name structure for the ivy file (see artifactory for an example).
- Add property that makes it possible to have different name structures of the artifacts and repository layout. (see artifactory for an example)

"
MRM-1352,pablaasmo,Per Arnold Blaasmo,2012-06-29T06:54:11.47Z,2012-06-29T06:54:11.47Z,Patch to add ivy metadata file recognition.
MRM-1352,olamy,Olivier Lamy (*$^%`),2012-07-02T04:07:59.059Z,2012-07-02T04:07:59.059Z,"cool.
Any unit tests ?"
MRM-1352,pablaasmo,Per Arnold Blaasmo,2012-07-02T15:50:48.517Z,2012-07-02T15:50:48.517Z,"No, I did not make any unit test :-(
But I can try to add a couple.

"
MRM-1320,oching,Maria Odea Ching,2010-01-28T04:11:03.967Z,2010-01-28T04:11:03.967Z,Fixed in trunk [-r904015|http://svn.apache.org/viewvc?revision=904015&view=revision] and merged to 1.3.x branch in [-r904024|http://svn.apache.org/viewvc?revision=904024&view=revision]
MRM-1353,brettporter,Brett Porter,2010-03-03T16:41:32.402Z,2010-03-03T16:41:32.402Z,I think I already fixed this in trunk if you want to merge it back.
MRM-1353,oching,Maria Odea Ching,2010-03-03T20:01:57.53Z,2010-03-03T20:01:57.53Z,"Ok, I'd like to get this fixed in 1.3.x as well :) Thanks Brett!"
MRM-1353,oching,Maria Odea Ching,2010-04-02T08:22:40.086Z,2010-04-02T08:22:40.086Z,"Unfortunately, this still isn't fixed in trunk.. see the timestamp of the artifacts in the download box from the attached screenshot.."
MRM-1353,oching,Maria Odea Ching,2010-04-02T21:11:51.972Z,2010-04-02T21:11:51.972Z,"After doing some investigation and writing a test case for this, the problem is that the metadata being read in the upload action is the project-level metadata and not the artifact level metadata. So everytime a snapshot artifact is uploaded, when the metadata is updated, it is always getting a null snapshotVersion object (because this does not exist in the project-level metadata) thereby the build number is always set to 1."
MRM-1353,oching,Maria Odea Ching,2010-04-03T10:04:31.667Z,2010-04-03T10:04:31.667Z,"Fixed in 1.3.x branch [-r930528|http://svn.apache.org/viewvc?revision=930528&view=revision] with the following changes:
* get latest build number from version-level metadata when deploying artifacts from webapp
* for snapshot artifacts deployed, generate or update the version-level metadata
* added unit test for this scenario
* refactored some parts of the tests for upload artifact
"
MRM-1353,oching,Maria Odea Ching,2010-05-01T00:38:30.858Z,2010-05-01T00:38:30.858Z,Re-opening issue as this still exists in trunk and the fix needs to be merged.
MRM-1353,oching,Maria Odea Ching,2010-05-01T00:39:34.265Z,2010-05-01T00:39:34.265Z,Attaching selenium test (based from trunk) to reproduce this issue.
MRM-1353,oching,Maria Odea Ching,2010-05-01T03:14:42.002Z,2010-05-01T03:14:42.002Z,Added selenium test in 1.3.x branch [-r939944|http://svn.apache.org/viewvc?revision=939944&view=revision].
MRM-1353,oching,Maria Odea Ching,2010-05-02T01:16:43.592Z,2010-05-02T01:16:43.592Z,Fix merged to trunk [-r940163|http://svn.apache.org/viewvc?revision=940163&view=revision] with some tweaks in the unit and selenium tests to reflect the removal of the database in trunk.
MRM-1342,gigsz1,Greg Michael Meneses,2011-06-23T01:40:56.392Z,2011-06-23T01:40:56.392Z,"I noticed these logs on first start:

2011-06-23 11:07:17,112 [Thread-28] ERROR taskQueueExecutor#repository-scanning - Error executing task
edu.emory.mathcs.backport.java.util.concurrent.ExecutionException: java.lang.UnsupportedOperationException: Unable to scan a repository, directory ./data/repository/snapshots does not exist.

2011-06-23 11:07:17,114 [Thread-28] ERROR taskQueueExecutor#repository-scanning - Error executing task
edu.emory.mathcs.backport.java.util.concurrent.ExecutionException: java.lang.UnsupportedOperationException: Unable to scan a repository, directory ./data/repository/releases does not exist.

2011-06-23 11:07:17,117 [Thread-28] ERROR taskQueueExecutor#repository-scanning - Error executing task
edu.emory.mathcs.backport.java.util.concurrent.ExecutionException: java.lang.UnsupportedOperationException: Unable to scan a repository, directory ./data/repository/internal does not exist.

2011-06-23 11:07:17,120 [Thread-28] ERROR taskQueueExecutor#repository-scanning - Error executing task
edu.emory.mathcs.backport.java.util.concurrent.ExecutionException: java.lang.UnsupportedOperationException: Unable to scan a repository, directory ./data/repository/sandbox does not exist.

At this point, all 4 repositories are not displayed on the Statistics Report page.

On restart however, data from these repositories can be retrieve and will be displayed on the Statistics Report page.

So there may be a timing issue during startup regarding the creation of the initial repositories and the scanning.

Also same thing occurs when adding a managed repository; no statistics is retrieved unless 'Scan Repository Now' button is clicked.

With regards to some repositories are missing, the problem is that some selected repositories have no statistics (especially ones that are recently added and have not been scanned), then since repositories in the selection are not sorted (Internal repository is likely to be last as is observed), the number of statistics available is lesser than the selected repositories.
So repositories at the end of the selection will have no data and not be displayed.

Can we force a scan during addition of a repository? Also I have observed that when deploying an artifact on the repository, the statistics does not get updated unless the 'Scan Repository Now' button is clicked. Or is there a schedule for scanning of the repositories? "
MRM-1342,brettporter,Brett Porter,2011-06-23T01:48:47.908Z,2011-06-23T01:48:47.908Z,"bq. Can we force a scan during addition of a repository?

Sounds like a good idea.

bq. Also I have observed that when deploying an artifact on the repository, the statistics does not get updated unless the 'Scan Repository Now' button is clicked. 

It should be now, since it is calculated from the metadata, which should be created on deployment. Can you confirm the metadata exists at that time?

bq. Or is there a schedule for scanning of the repositories?

There is, but it'd be best if things weren't dependant on it

"
MRM-1342,gigsz1,Greg Michael Meneses,2011-06-24T06:03:55.267Z,2011-06-24T06:03:55.267Z,"Attached the patch for the fix.

Modification details:
- changed hashmap to return 0 rather than null if key is not found
- added a sequence to invoke scan when repo is added or modified
- create the directory if it does not exist to have an empty statistics during scan"
MRM-1342,brettporter,Brett Porter,2011-06-28T01:48:00.371Z,2011-06-28T01:48:00.371Z,"applied, thanks!"
MRM-1390,oching,Maria Odea Ching,2010-06-11T04:00:19.566Z,2010-06-11T04:00:19.566Z,This is in relation to MRM-1362.
MRM-1390,carlos,Carlos Sanchez,2014-11-24T13:04:38.014Z,2014-11-24T13:04:38.014Z,PR created https://github.com/apache/archiva/pull/14
MRM-1390,carlos,Carlos Sanchez,2014-12-01T10:31:51.51Z,2014-12-01T10:31:51.51Z,PR merged in master
MRM-1315,brettporter,Brett Porter,2010-01-18T16:51:34.759Z,2010-01-18T16:51:34.759Z,applied to MRM-1025 branch in r900594
MRM-1351,brettporter,Brett Porter,2010-03-04T19:54:46.309Z,2010-03-04T19:54:46.309Z,"Placing in the backlog for now, but we'll certainly consider this for 1.4 depending on how it progresses."
MRM-1304,liit,Adelita L. Padilla,2010-02-03T06:41:33.03Z,2010-02-03T06:41:33.03Z,Fix and test attached.
MRM-1304,liit,Adelita L. Padilla,2010-02-03T06:44:05.837Z,2010-02-03T06:44:05.837Z,"Attached is the revised fix.

Thanks!"
MRM-1304,liit,Adelita L. Padilla,2010-02-03T06:48:43.038Z,2010-02-03T06:48:43.038Z,"Attached updated patch. (Updated_MRM-1304.patch)
* Fix and Test included


Please disregard the 2 previous attachments.

Thanks!"
MRM-1304,brettporter,Brett Porter,2010-02-03T17:46:16.317Z,2010-02-03T17:46:16.317Z,"It's best to use the same name, since JIRA greys out the older ones :)"
MRM-1304,brettporter,Brett Porter,2010-02-03T17:51:38.548Z,2010-02-03T17:51:38.548Z,"the patch looks fine, and thanks for adding a test!

I would only nitpick a couple of things:
- please fix the formatting in the patch (http://archiva.apache.org/developers/how-we-do-things.html). You might like to get the IDE code settings from the Maven site and use that to reformat your changes
- modifiedGroup can be created in the block - there's no reason for it to exist outside the if (nor be initialised separately)."
MRM-1304,liit,Adelita L. Padilla,2010-02-04T04:15:04.481Z,2010-02-04T04:15:04.481Z,"Attached revised patch for the fix and test. 

Fixed formatting and removed the extra line for modifiedGroupId.

Thanks! "
MRM-1304,brettporter,Brett Porter,2010-02-04T10:43:48.807Z,2010-02-04T10:43:48.807Z,the patch is missing the method name for the test case (Which is also disabled - have you checked it works on firefox?)
MRM-1304,brettporter,Brett Porter,2010-02-12T09:34:07.021Z,2010-02-12T09:34:07.021Z,"I've applied this, the fix looks fine.

I had to modify the Selenium test a bit to work, however."
MRM-1324,brettporter,Brett Porter,2011-09-12T08:32:19.416Z,2011-09-12T08:32:19.416Z,also having problems with some tests failing in the CI environments. We need to get both of those problems addressed before releasing.
MRM-1324,brettporter,Brett Porter,2011-10-01T10:43:57.124Z,2011-10-01T10:43:57.124Z,Working now
MRM-1309,oching,Maria Odea Ching,2010-01-12T02:37:08.056Z,2010-01-12T02:37:08.056Z,Upgraded redback version to 1.2.3 in trunk [-r898250|http://svn.apache.org/viewvc?revision=898250&view=revision]
MRM-1383,brettporter,Brett Porter,2010-05-04T00:50:03.648Z,2010-05-04T00:50:03.648Z,"some uses in addition to the above:
- Keys is used for debug logging in the dependency tree
- AuditLog, Auditable and AuditListener are used in PlexusActionSupport, AbstractRepositoriesAdminAction and RepositoryScanningAction - revisit how this can be made an event for the audit logging plugin to consume
- ManagedRepositoryContent in the ShowArtifactAction
- RepositoryListenerFactoryBean is used to set up the current repository listener framework in the webapp initialisation sequence"
MRM-1322,brettporter,Brett Porter,2010-02-10T21:03:41.11Z,2010-02-10T21:03:41.11Z,"why target 1.3.1 if they are only broken on trunk?

These were disabled because it's impossible to work on browsers other than *chrome (Firefox in a specific mode). I think the tests need to be rewritten to populate the test data on startup, and only the tests that are checking file uploads use the upload form (and those can be disabled on Safari by removing a group, perhaps)."
MRM-1322,oching,Maria Odea Ching,2010-02-10T21:13:59.334Z,2010-02-10T21:13:59.334Z,Weren't the changes for disabling the tests merged to 1.3.x branch?
MRM-1322,brettporter,Brett Porter,2010-02-10T21:28:16.271Z,2010-02-10T21:28:16.271Z,"no, I don't think so. Didn't want to mess with it - the branch is just for limited fixes :)"
MRM-1322,oching,Maria Odea Ching,2010-02-11T01:36:09.929Z,2010-02-11T01:36:09.929Z,"Ok, changed the fix version to 1.4 now :) Thanks!"
MRM-1389,oching,Maria Odea Ching,2010-06-08T05:18:03.005Z,2010-06-08T05:18:03.005Z,"This is a clone of MRM-1361. The patch was applied to 1.3.x branch, but the plugin still needs to be implemented in 1.4."
MRM-1389,oching,Maria Odea Ching,2010-06-08T05:19:13.626Z,2010-06-08T05:19:13.626Z,Patch was applied to 1.3.x branch in [-r952596|http://svn.apache.org/viewvc?revision=952596&view=revision]
MRM-1389,dennisl@apache.org,Dennis Lundberg,2010-06-09T06:55:12.849Z,2010-06-09T06:55:12.849Z,The patch is working well for us. Thanks.
MRM-1389,oching,Maria Odea Ching,2010-06-09T21:54:59.455Z,2010-06-09T21:54:59.455Z,Thanks for the feedback Dennis!
MRM-1369,brettporter,Brett Porter,2010-08-05T07:02:43.61Z,2010-08-05T07:02:43.61Z,upgraded to redback 1.3-SNAPSHOT
MRM-1357,brettporter,Brett Porter,2010-03-07T19:06:20.632Z,2010-03-07T19:06:20.632Z,"I think that's a reasonable request, though it might also be appropriate to file an issue with the deploy plugin, that it should not require you to upload a POM if it is already there and would be the same?"
MRM-1357,bfreuden,Bruno Freudensprung,2010-03-08T03:53:38.514Z,2010-03-08T03:53:38.514Z,"I really wonder if it is a matter of Maven repository manager or deploy plugin.

On one hand we have some related logic in Archiva...:
- snapshot-only of release-only repositories
- forbid re-deployment of release artifacts
... so it could make sense to extend that logic.

But on the other hand, it seems understandable to consider that it is a deploy plugin problem:
when a multi-artifacts project deployment fails in the middle (let's say for a network reason), the deploy plugin should be able to deploy only the ""delta"", thus preventing from re-deploying the artifacts that already are. In this regard, such a capability (if implemented by retrieving artifacts from the MRM and by making a comparison, and not by storing some state on the client-side) would solve the problem described above.

I don't know if it is relevant but: could it be that the MRM is the only place where some transactional logiccan be placed  (in a multi-user environment) in order to ensure that a release artifact will not be re-deployed with the same version number but not the same ""binary content""?

Anyway, I am a too recent Maven user to really feel or know where the correction should be done.
"
MRM-1357,bfreuden,Bruno Freudensprung,2010-03-08T05:01:47.879Z,2010-03-08T05:01:47.879Z,"As suggested, here is the related deploy plugin issue: MDEPLOY-118"
MRM-1357,brettporter,Brett Porter,2010-09-14T17:55:00.896Z,2010-09-14T17:55:00.896Z,This is now addressed in Maven 3
MRM-1398,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-08-04T23:15:27.616Z,2010-08-04T23:15:27.616Z,"MRM-1398 fixed.
Thanks."
MRM-1398,oching,Maria Odea Ching,2010-08-08T00:21:52.783Z,2010-08-08T00:21:52.783Z,Patch applied to branch in [-r983343|http://svn.apache.org/viewvc?rev=983343&view=rev]. Thanks Eshan!
MRM-1388,olamy,Olivier Lamy (*$^%`),2014-02-25T20:53:15.995Z,2014-02-25T20:53:15.995Z,"no more issues fix for 1.3.x except security. Please use 2.x 
And btw that's fixed in 2.x"
MRM-1305,oching,Maria Odea Ching,2010-01-11T21:51:15.071Z,2010-01-11T21:51:15.071Z,Thanks for pointing this out Klemens! Fixed in trunk [-r898174|http://svn.apache.org/viewvc?revision=898174&view=revision]. 
MRM-1359,brettporter,Brett Porter,2010-03-08T09:16:22.666Z,2010-03-08T09:16:22.666Z,"Note that after the refactoring that Maven 1.x format repositories do not work - this task can be used to re-enable them, and add tests for that format"
MRM-1359,brettporter,Brett Porter,2010-03-11T17:32:14.474Z,2010-03-11T17:32:14.474Z,"There are sufficient proxy, webdav and scanning tests for this functionality.

However, there are no Selenium tests for managed legacy format repositories - we should add them for the browse pages, artifact info page (and any relevant tabs), and search results.
"
MRM-1359,brettporter,Brett Porter,2010-05-03T23:42:48.226Z,2010-05-03T23:42:48.226Z,the legacy path handling should also be moved to the new repository API to remove further uses of the old archiva-repository-layer and archiva-model modules
MRM-1359,brettporter,Brett Porter,2010-05-04T01:25:32.143Z,2010-05-04T01:25:32.143Z,"here are some specific uses:
- ManagedRepositoryContent / RepositoryContentFactory is used to get the comparative layouts and can be migrated to the new API
- ArtifactReference is used in SAA and ALAPA"
MRM-1359,olamy,Olivier Lamy (*$^%`),2014-10-14T18:54:14.488Z,2014-10-14T18:54:14.488Z,"I will be more in favour of removing maven1 support.
WDYT?"
MRM-1359,skygolanur,Eric Barboni,2014-10-15T01:11:19.086Z,2014-10-15T01:11:19.086Z,I agree. Last maven 1 release is on year 2007. I did not remember the eol date.
MRM-1359,brettporter,Brett Porter,2014-10-15T20:03:29.729Z,2014-10-15T20:03:29.729Z,"+1. This was more interesting 4 years ago when it was not EOL :)

Will say though, this could be a good exercise in making sure the Maven stuff hasn't polluted the core APIs - worth doing other implementations to check that :)"
MRM-1359,olamy,Olivier Lamy (*$^%`),2014-10-15T20:15:38.003Z,2014-10-15T20:15:38.003Z,Yup I updated the title of the issue
MRM-1359,olamy,Olivier Lamy (*$^%`),2015-02-13T16:41:11.553Z,2015-02-13T16:41:11.553Z,done
MRM-1382,brettporter,Brett Porter,2010-05-04T01:26:20.417Z,2010-05-04T01:26:20.417Z,"uses of the old APIs are limited but used a lot:
- ManagedRepositoryContent / RepositoryContentFactory is used to get the comparative layouts and can be migrated to the new API
- ArtifactRefence for paths in LCAC"
MRM-1314,oching,Maria Odea Ching,2010-01-28T04:00:35.668Z,2010-01-28T04:00:35.668Z,"Pages where the logo link does not point to http://archiva.apache.org 
* feature tour
* download
* users and administrator guides
* writing a consumer plugin page
* mailing lists
* get involved page
"
MRM-1312,thorsten,Thorsten Scherler,2010-01-18T06:50:11.856Z,2010-01-18T06:50:11.856Z,"A related observation is when using

mvn deploy:deploy-file -Durl=http://archiva.sadesi.es/repository/snapshots-SADESI  \
     -DrepositoryId=snapshots-SADESI  \
     -Dfile=/home/thorsten/.m2/repository/org/apache/cocoon/cocoon-chaperon-impl/1.0.0-SNAPSHOT/cocoon-chaperon-impl-1.0.0-SNAPSHOT.jar \
     -DpomFile=/home/thorsten/.m2/repository/org/apache/cocoon/cocoon-chaperon-impl/1.0.0-SNAPSHOT/cocoon-chaperon-impl-1.0.0-SNAPSHOT.pom \
     -DgroupId=org.apache.cocoon \
     -DartifactId=cocoon -Dversion=1.0.0-SNAPSHOT

the actual file has a unique (timestamp + build number) snapshot version but does not have a file with a -SNAPSHOT in the filename. This way it cannot be resolved later on when resolving the dependencies in our project.

Seems that the ""create-missing-checksums consumer"" should read the meta information of the artifact and use the latest time stamped version"
MRM-1312,ctan,Maria Catherine Tan,2010-02-02T18:32:43.451Z,2010-02-02T18:32:43.451Z,"Added a patch for this fix with unit test.

Use the actual file, which has a timestamp + build number version, when creating a repository task for a snapshot artifact."
MRM-1312,thorsten,Thorsten Scherler,2010-02-05T04:59:17.928Z,2010-02-05T04:59:17.928Z,"Hi Maria,
thank you very much for your patch. We did a quick check and it seems to close this issue. ATM we cannot make all test case that we planed but we will do this Monday. As soon we have the result I will update the ticket again. Thanks agin Maria."
MRM-1312,thorsten,Thorsten Scherler,2010-02-15T09:24:26.06Z,2010-02-15T09:24:26.06Z,Ok we tested and the upload issue is fixed but the problem is to download the snapshots. It stores a file with the timestamp but returns a 404 for the snapshot.
MRM-1312,oching,Maria Odea Ching,2010-02-25T02:56:05.891Z,2010-02-25T02:56:05.891Z,"Filed a separate issue for the problem in downloading the snapshots from artifact info page, see MRM-1349. Thanks!"
MRM-1312,oching,Maria Odea Ching,2010-02-25T04:17:16.36Z,2010-02-25T04:17:16.36Z,Thanks for the patch Marica! Patch applied to 1.3.x branch [-r916197|http://svn.apache.org/viewvc?revision=916197&view=revision] and merged to trunk in [-r916217|http://svn.apache.org/viewvc?revision=916217&view=revision]. I updated the timestamp variable name to avoid conflict when I merged this to trunk.
MRM-1395,olamy,Olivier Lamy (*$^%`),2014-02-25T19:33:06.315Z,2014-02-25T19:33:06.315Z,no more issues fix for 1.3.x except security. Please use 2.x 
MRM-1347,brettporter,Brett Porter,2010-02-28T18:50:07.458Z,2010-02-28T18:50:07.458Z,"note that we probably want this to plug into the resolution mechanism, not just be a front-end. For example, requesting a project in browse where the parent POM is not already in the repository should resolve it correctly. This isn't something that it is capable of doing today.

Also, this should be linked to some related issues that can be addressed at the same time - for example, by ensuring we use a streaming API we can address the issues about requests blocking."
MRM-1347,oching,Maria Odea Ching,2010-05-03T08:29:29.969Z,2010-05-03T08:29:29.969Z,"From what I understand, these are the things that need to be changed for the repository proxy:
# for artifact requests, resolve artifact first if it exists in the managed repository through the metadata resolver
# if the artifact is not found:
## resolve the artifact from the remote repository first 
## if it is resolved from the remote repository, then proxy the artifact
## update metadata of proxied artifact
# otherwise, if the artifact is found:
## get the actual artifact file from the storage and return it

For 2.1, a new metadata resolver for remote repositories need to be written. I just have a clarification on this, a remote repository will have it's own metadata repository?"
MRM-1347,brettporter,Brett Porter,2010-05-03T22:10:54.431Z,2010-05-03T22:10:54.431Z,"There's a few things to clarify here.

Firstly, I don't think the logic for the proxy needs to change at all, and there's quite a few rules in there about how that does things. There are plenty of tests too, though you might want to shuffle them around to get a better separation of the unit tests and the ""integration tests"" that go via webdav. What we're looking to achieve is improve the way it is structured in the code (to the point where it could be turned on or off as a module, rather than being intertwined into the webdav stuff).

The key to the new architecture is that you want to obtain the metadata first, and only obtain the artifact when that is requested. This can get a bit confusing in Maven since it has its metadata, POM metadata, and then there is other metadata for plain artifact files :) The proxy should become a little ""dumber"" -  it shouldn't know anything about repository storage or remote repo formats - but basically jumping in between trying to get metadata / artifacts from storage and going remote if necessary, though it will need to do a number of filtering operations (convert paths for the remote repo, whitelist/blacklist, search multiple remotes, error handling, determine if it needs to update something already in storage).

Not sure if that's making sense - we should sketch this out on a wiki page some more.


"
MRM-1347,brettporter,Brett Porter,2010-05-04T00:41:52.332Z,2010-05-04T00:41:52.332Z,"BTW, here are the references I found to the model and repository layer that we'd be aiming to remove. It's probably not a one-for-one substitution in this case due to the redesign.

Keys (for debug logging) and RepositoryURL in DRPC; ArtifactReference in DRPC, RPC; RepositoryConnectors from repo-layer could be folded into this module in some way; MetadataTools (and others in that package) used for merging in DRPC can be pushed back into the maven2 repository implementation, ManagedRepositoryContent and RepositoryContentFactory are used quite a bit for path calculation in DRPC which would move to the storage (means rethinking the tmpdir calculation and how to get the connectors), RemoteRepositoryContent is something that needs to be rethought and perhaps added to the metadata repository API."
MRM-1371,brettporter,Brett Porter,2010-04-22T23:43:13.44Z,2010-04-22T23:43:13.44Z,thanks!
MRM-1323,brettporter,Brett Porter,2010-02-14T20:52:30.475Z,2010-02-14T20:52:30.475Z,"They work for me with Firefox now (I made some changes) - can you check?

With IE, I get a handful of failures, not the amount you are seeing."
MRM-1323,mbaclay,mbaclay,2010-03-01T23:39:59.451Z,2010-03-01T23:39:59.451Z,"With Firefox, here's my results:

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running TestSuite
Tests run: 107, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 468.593 sec <<< FAILURE!

Results :

Failed tests:
  testFindArtifactNullValues(org.apache.archiva.web.test.FindArtifactTest)
  testFindArtifactUsingChecksum(org.apache.archiva.web.test.FindArtifactTest)

Tests run: 107, Failures: 2, Errors: 0, Skipped: 0


--
I will look into these issues. Thanks! :-)"
MRM-1323,brettporter,Brett Porter,2010-03-02T17:36:10.197Z,2010-03-02T17:36:10.197Z,is this on trunk or 1.3.x branch?
MRM-1323,mbaclay,mbaclay,2010-03-02T19:59:21.34Z,2010-03-02T19:59:21.34Z,"Hi Brett,

This is on trunk.

Thanks!"
MRM-1323,brettporter,Brett Porter,2010-03-03T15:51:53.658Z,2010-03-03T15:51:53.658Z,"Ok, I'm seeing the same now. These have happened before - the pages time out waiting for you to approve the applet dialog box. I've added it to the README, but I'll try and configure the server to disable the applet."
MRM-1323,brettporter,Brett Porter,2010-03-03T16:42:46.067Z,2010-03-03T16:42:46.067Z,Fixed. I'm now checking IE again.
MRM-1323,brettporter,Brett Porter,2010-03-03T17:37:09.92Z,2010-03-03T17:37:09.92Z,"These are the IE test failures I get:
  testAddArtifactNoGroupId(org.apache.archiva.web.test.ArtifactManagementTest)
  testDeleteRepositoryGroup(org.apache.archiva.web.test.VirtualRepositoryTest)
  testAddManagedRepoValidValues(org.apache.archiva.web.test.RepositoryTest)

(26 are skipped as a result)

Cora, can you confirm the same result?"
MRM-1323,mbaclay,mbaclay,2010-03-03T21:00:02.285Z,2010-03-03T21:00:02.285Z,"Hi Brett,

No failures with Firefox browser now. With IE, here are my results:

Failed tests:
  testDeleteArtifact(org.apache.archiva.web.test.ArtifactManagementTest)
  testAddArtifactValidValues(org.apache.archiva.web.test.ArtifactManagementTest)
  testAddArtifactBlockRedeployments(org.apache.archiva.web.test.ArtifactManagementTest)
  testCorrectRepositoryInBrowse(org.apache.archiva.web.test.BrowseTest)
  testAddArtifactNoGroupId(org.apache.archiva.web.test.ArtifactManagementTest)
  testDeleteRepositoryGroup(org.apache.archiva.web.test.VirtualRepositoryTest)
  testAddManagedRepoValidValues(org.apache.archiva.web.test.RepositoryTest)

Tests run: 107, Failures: 7, Errors: 0, Skipped: 31

Environment details:
Apache Maven 2.2.1 (r801777; 2009-08-07 03:16:01+0800)
Java version: 1.6.0_02
OS name: ""windows xp"" version: ""5.1"" arch: ""x86"" Family: ""windows""
Browser: IE 7.0.5730.13"
MRM-1323,brettporter,Brett Porter,2010-03-03T21:16:58.38Z,2010-03-03T21:16:58.38Z,"ok, I have IE 8 so that's probably the 4 others"
MRM-1323,gautencio,Gwen Harold Autencio,2010-03-16T22:23:55.745Z,2010-03-16T22:23:55.745Z,"On the latest revision these are my results. Same error when run in IE and firefox

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running TestSuite
Tests run: 108, Failures: 18, Errors: 0, Skipped: 31, Time elapsed: 215.684 sec <<< FAILURE!

Results :

Failed tests: 
  testViewSearchedArtifact(org.apache.archiva.web.test.SearchTest)
  testDotNetTypes(org.apache.archiva.web.test.ArtifactManagementTest)
  testSearchNonExistingArtifact(org.apache.archiva.web.test.SearchTest)
  testSearchExistingArtifactUsingAdvancedSearchNotInRepository(org.apache.archiva.web.test.SearchTest)
  testAddRepositoryGroupValidValue(org.apache.archiva.web.test.VirtualRepositoryTest)
  testDeleteArtifactNoGroupId(org.apache.archiva.web.test.ArtifactManagementTest)
  testAddRepositoryGroupNullValue(org.apache.archiva.web.test.VirtualRepositoryTest)
  testDeleteArtifactNoArtifactId(org.apache.archiva.web.test.ArtifactManagementTest)
  testSearchExistingArtifactUsingAdvancedSearchGroupId(org.apache.archiva.web.test.SearchTest)
  testSearchNonExistingArtifactInAdvancedSearch(org.apache.archiva.web.test.SearchTest)
  testViewAuditLogsForAllRepositories(org.apache.archiva.web.test.AuditLogsReportTest)
  testAddArtifactBlockRedeployments(org.apache.archiva.web.test.ArtifactManagementTest)
  testViewAuditLogsReportForGroupId(org.apache.archiva.web.test.AuditLogsReportTest)
  testAddArtifactNullValues(org.apache.archiva.web.test.ArtifactManagementTest)
  testRepoStatisticsWithoutRepoCompared(org.apache.archiva.web.test.ReportsTest)
  testViewAuditLogsNoDataFound(org.apache.archiva.web.test.AuditLogsReportTest)
  testSearchExistingArtifact(org.apache.archiva.web.test.SearchTest)
  testBasicAddDeleteUser(org.apache.archiva.web.test.UserRolesTest)

Tests run: 108, Failures: 18, Errors: 0, Skipped: 31

Filed MRM-1366 - this might be one of the causes of the test failures"
MRM-1323,gautencio,Gwen Harold Autencio,2010-03-17T05:31:56.566Z,2010-03-17T05:31:56.566Z,"Hi, i'm attaching an initial patch for the fix of selenium webapp tests running in IE7.
No test failures in IE7 after applying patch.

Btw, I'm getting test failures in firefox.

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running TestSuite
Tests run: 108, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 318.266 sec <<< FAILURE!

Results :

Failed tests:
  testSearchExistingArtifactUsingAdvancedSearchGroupId(org.apache.archiva.web.test.SearchTest)
  testSearchExistingArtifact(org.apache.archiva.web.test.SearchTest)

Tests run: 108, Failures: 2, Errors: 0, Skipped: 0


I think the cause of this is when it's try to assert the text ""Hits: 1 to 1 of 1"" it's failing becuase it's displaying ""Hits: 1 to 2 of 2"".  Because of the testDotNetTypes() which also uploads another test artifact causes it to return 2 hits. 
In IE7 testDotNetTypes() is skipped which results to only 1 Hit.
"
MRM-1323,mbaclay,mbaclay,2010-03-17T08:28:29.801Z,2010-03-17T08:28:29.801Z,"Hi Gwen,

Thanks for the patch. I will try this now and will get back to you with my results."
MRM-1323,mbaclay,mbaclay,2010-03-17T21:54:30.237Z,2010-03-17T21:54:30.237Z,"have tried the patch that Gwen attached and here's my results in IE:
Results :

Failed tests:
  testDeleteArtifact(org.apache.archiva.web.test.ArtifactManagementTest)
  testAddArtifactValidValues(org.apache.archiva.web.test.ArtifactManagementTest)
  testAddArtifactBlockRedeployments(org.apache.archiva.web.test.ArtifactManagementTest)
  testCorrectRepositoryInBrowse(org.apache.archiva.web.test.BrowseTest)
  testDotNetTypes(org.apache.archiva.web.test.ArtifactManagementTest)

Tests run: 108, Failures: 5, Errors: 0, Skipped: 5

For Firefox:
Results :

Tests run: 108, Failures: 0, Errors: 0, Skipped: 0

it seems it has different results on another machine. bit weird. will still try it on another machine too."
MRM-1323,oching,Maria Odea Ching,2010-03-18T01:03:43.443Z,2010-03-18T01:03:43.443Z,I did not get any failures in the selenium tests after applying the patch. This was in IE7 btw.
MRM-1323,oching,Maria Odea Ching,2010-03-18T02:26:15.127Z,2010-03-18T02:26:15.127Z,"But I have test failures in firefox. These were the tests in failure:

- testSearchExistingArtifact 
- testSearchMissingArtifactUsingAdvancedSearchGrou"
MRM-1323,gautencio,Gwen Harold Autencio,2010-03-18T03:41:37.734Z,2010-03-18T03:41:37.734Z,"Hi Marecor,

I'm attaching updated patch for this issue for the test failures in SearchTest.
Thanks :)
"
MRM-1323,mbaclay,mbaclay,2010-03-18T04:25:51.884Z,2010-03-18T04:25:51.884Z,applied patch in r.924673. Thanks Gwen! :-)
MRM-1346,brettporter,Brett Porter,2011-03-29T09:51:25.84Z,2011-03-29T09:51:25.84Z,updateProjectVersion is now more complete
MRM-1393,brettporter,Brett Porter,2010-06-16T15:12:51.92Z,2010-06-16T15:12:51.92Z,"thanks, we'll upgrade when it's released"
MRM-1393,brettporter,Brett Porter,2011-09-12T10:17:25.967Z,2011-09-12T10:17:25.967Z,to upgrade and test
MRM-1393,olamy,Olivier Lamy (*$^%`),2011-09-28T02:50:21.642Z,2011-09-28T02:50:21.642Z,"simple upgrade to 1.7 : NPE and failure in tests (in testConfigurationUpgradeFrom09: I wonder if we still need to support this :-) )
To investigate."
MRM-1393,olamy,Olivier Lamy (*$^%`),2011-09-28T04:14:29.075Z,2011-09-28T04:14:29.075Z,fixed r1176791
MRM-1354,brettporter,Brett Porter,2010-03-03T21:08:33.275Z,2010-03-03T21:08:33.275Z,"what version is this against?

Did you have your <server> settings established correctly? Do the repository IDs match?"
MRM-1354,jzurbano,jzurbano,2010-03-03T21:23:46.516Z,2010-03-03T21:23:46.516Z,"I used the snapshot from 1.3.x branch.

My <server> settings are correct and the repository ID match. I used the credentials when logging in web UI.

Used the same deployment command for the administrator and guest with repository manager role.

But it fails with the administrator account."
MRM-1354,oching,Maria Odea Ching,2010-03-03T21:24:37.362Z,2010-03-03T21:24:37.362Z,"If it is a newly created user, you also have to change the password first before using that account (or uncheck the Force User to Change Password box in user edit account). Otherwise you won't be able to deploy to the repository."
MRM-1354,oching,Maria Odea Ching,2010-03-03T21:37:27.519Z,2010-03-03T21:37:27.519Z,I was able to deploy successfully using different accounts (admin and a new user I created) against 1.3.x -r918837. The guest account only has the Guest role.
MRM-1354,jzurbano,jzurbano,2010-03-03T21:38:37.919Z,2010-03-03T21:38:37.919Z,"BTW, I used ""admin"" for this."
MRM-1354,jzurbano,jzurbano,2010-03-03T21:55:28.367Z,2010-03-03T21:55:28.367Z,Closing issue. -DrepositoryId=[repository_id] is missing in the deployment command.
MRM-1316,brettporter,Brett Porter,2010-01-19T02:15:57.981Z,2010-01-19T02:15:57.981Z,already fixed in the MRM-1025 implementation
MRM-1316,oching,Maria Odea Ching,2010-02-03T05:15:29.764Z,2010-02-03T05:15:29.764Z,Fixed in trunk [-r905996|http://svn.apache.org/viewvc?revision=905996&view=revision] and merged to 1.3.x branch in [-r905998|http://svn.apache.org/viewvc?revision=905998&view=revision].
MRM-1326,brettporter,Brett Porter,2010-02-22T23:43:56.248Z,2010-02-22T23:43:56.248Z,I believe this was already fixed in the 1.3 release
MRM-1334,olamy,Olivier Lamy (*$^%`),2012-12-20T10:11:18.572Z,2012-12-20T10:11:18.572Z,"I did some fixes relating to path.
Must be ok now.
Reopen if not."
MRM-1358,brettporter,Brett Porter,2010-03-09T18:45:36.395Z,2010-03-09T18:45:36.395Z,"a similar issue was resolved in repository purge, so reuse would be helpful. I think the Maven 2 plugin on trunk should have a listener for dealing with maven-metadata.xml files on these changes."
MRM-1374,oching,Maria Odea Ching,2010-04-20T05:55:06.047Z,2010-04-20T05:55:06.047Z,These temporary working directories also show up if you try to browse the repository from a browser.
MRM-1374,olamy,Olivier Lamy (*$^%`),2011-10-28T03:33:18.956Z,2011-10-28T03:33:18.956Z,still the case ? As I can see the code contains finally block to cleanup those tmp directories.
MRM-1374,olamy,Olivier Lamy (*$^%`),2014-02-25T19:32:49.907Z,2014-02-25T19:32:49.907Z,no more issues fix for 1.3.x except security. Please use 2.x 
MRM-1380,brettporter,Brett Porter,2010-05-04T00:30:04.564Z,2010-05-04T00:30:04.564Z,"some uses to review: ArchivaArtifact in CRSRP, VersionedReference in CRSRP, DORP, RCRP, ProjectReference in CRSRP, ArtifactReference in CRSRP, DORP, RCRP, ARP, RepositoryListener (needs to find a new home in the new API) in CRSRP, DORP, ARP, RCRP, MetadataTools in CRSRP, RPC, ManagedRepositoryContent in CRSRP, DORP, RCRP, ARP"
MRM-1365,brettporter,Brett Porter,2010-03-15T22:37:29.746Z,2010-03-15T22:37:29.746Z,these match the results I got in the other issue. Please follow that one instead.
MRM-1381,brettporter,Brett Porter,2010-05-04T01:10:43.423Z,2010-05-04T01:10:43.423Z,"some uses of the old API to revise specifically:
- Auditable / AuditLog / AuditListener in ADR and ADRF, needs to be more event based and probably in the repository API itself
- ArchivaRepositoryMetadata, MetadataTools and related API are used in ADRF to maintain the maven metadata, which should be done in the backend storage or the group handling
- RepositoryContentFactory / ManagedRepositoryContent are used extensively to locate the content and should be migrated to the new API
- RepositoryRequest is used to construct file information and is only used here. This should be moved into the metadata spec in some way
- ArtifactReference in ADRF for deploy blocking and relocation handling"
MRM-1308,skygolanur,Eric Barboni,2012-10-03T15:29:00.063Z,2012-10-03T15:29:00.063Z,I thinks this one is working with new UI 1.4-M3
MRM-1301,brettporter,Brett Porter,2009-12-15T22:07:51.258Z,2009-12-15T22:07:51.258Z,this is now complete on the MRM-1025 branch
MRM-1363,brettporter,Brett Porter,2010-03-18T22:49:06.629Z,2010-03-18T22:49:06.629Z,"Is this the default configuration, or have you customised it? The Java.NET repository is configured only to handle javax/** requests by default in its whitelist.

I'll file this in the backlog to investigate the configuration saving problems."
MRM-1363,andreas_baumann,Andreas Baumann,2010-03-19T01:11:45.592Z,2010-03-19T01:11:45.592Z,"Yes, you are right. I forgot to add 'rome' there. The
problem is just doing that for evey new artifact is
not so nice."
MRM-1363,brettporter,Brett Porter,2010-03-19T01:26:06.045Z,2010-03-19T01:26:06.045Z,"you can do it for whole groups, of which you probably only trust a few from that repo. Given the status of the metadata in that repository, it pays to be selective - and from what I understand it will be in central soon enough that we won't need to worry about it."
MRM-1363,andreas_baumann,Andreas Baumann,2010-03-19T05:12:44.623Z,2010-03-19T05:12:44.623Z,"Ok. Adding ""rome/rome/**"" to the white list of the second proxy connector does the job.
Problem solved from my point of view.

Giving it a second thought I agree that configuring the white and black lists
is the way to go: so it's always clear what the system is doing, no implicit
assumptions.


"
MRM-1363,brettporter,Brett Porter,2011-09-12T08:13:41.824Z,2011-09-12T08:13:41.824Z,Behaving as expected - resolving
MRM-1327,brettporter,Brett Porter,2011-03-29T09:32:15.124Z,2011-03-29T09:32:15.124Z,"If JCR is selected, we also need to chose it's persistence mechanism. If that happens to be a lightweight internal database (like H2), note that it might conflict/double up with the default Derby still used for redback. It also needs to be easy to reconfigure as it was before."
MRM-1327,brettporter,Brett Porter,2011-06-29T03:40:48.755Z,2011-06-29T03:40:48.755Z,"It seems the best approach here is to:
- set up JCR as default with a reasonable database choice that is configurable, but generally hidden
- clean up the file implementation so there is a leaner option for users, but recognise that several plugins may decide to depend on the JCR one for better performance
"
MRM-1327,olamy,Olivier Lamy (*$^%`),2011-09-28T02:11:12.297Z,2011-09-28T02:11:12.297Z,both impls are here now ?
MRM-1327,brettporter,Brett Porter,2011-09-28T02:30:42.736Z,2011-09-28T02:30:42.736Z,"need to make the JCR one default and clean up a bit, I can do that by the weekend I think"
MRM-1327,olamy,Olivier Lamy (*$^%`),2011-10-05T02:37:41.814Z,2011-10-05T02:37:41.814Z,I'm working on having this as default.
MRM-1327,olamy,Olivier Lamy (*$^%`),2011-10-05T02:56:29.015Z,2011-10-05T02:56:29.015Z,"temporary assign it to me as I'm working on having jar as default.
Will be back to brett for check."
MRM-1327,olamy,Olivier Lamy (*$^%`),2011-10-05T04:45:45.008Z,2011-10-05T04:45:45.008Z,"Note on that (to prevent olamy small memory fooprint :-) )
olamy: as now a repository.xml is mandatory in ${appserver.base}/conf
[09:30] olamy: I wonder about included a default one in resources
[09:30] olamy: and load it if ${appserver.base}/conf/repository.xml not available
"
MRM-1327,olamy,Olivier Lamy (*$^%`),2011-10-05T05:45:04.208Z,2011-10-05T05:45:04.208Z,"now default in trunk.
Leave the issue open until documentation fixed/added and trick on having a default repository.xml in resources available."
MRM-1327,olamy,Olivier Lamy (*$^%`),2011-10-05T09:57:17.362Z,2011-10-05T09:57:17.362Z,trick with default repository.xml done. [rev 1179245|http://svn.apache.org/viewvc?rev=1179245&view=rev]
MRM-1327,olamy,Olivier Lamy (*$^%`),2011-10-06T09:15:51.723Z,2011-10-06T09:15:51.723Z,documentation added.
MRM-1349,brettporter,Brett Porter,2010-02-25T03:19:36.525Z,2010-02-25T03:19:36.525Z,"if this is very problematic, we might just leave it to 1.4, where I believe it is already fixed."
MRM-1349,oching,Maria Odea Ching,2010-04-02T06:25:57.62Z,2010-04-02T06:25:57.62Z,Moving issue to 1.4 (where it's already fixed).
MRM-1349,brettporter,Brett Porter,2011-09-12T10:29:41.433Z,2011-09-12T10:29:41.433Z,I can't reproduce this in either version
MRM-1372,oching,Maria Odea Ching,2010-04-13T01:06:53.697Z,2010-04-13T01:06:53.697Z,"Hi Eshan, could you submit the fix as a svn diff file? Thanks! "
MRM-1372,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-04-13T01:44:10.625Z,2010-04-13T01:44:10.625Z,diff file for the modification.(removing a  unwanted part )
MRM-1372,oching,Maria Odea Ching,2010-04-13T01:53:09.634Z,2010-04-13T01:53:09.634Z,Updated issue summary to easier identification.
MRM-1372,oching,Maria Odea Ching,2010-04-13T01:56:41.977Z,2010-04-13T01:56:41.977Z,Patch applied to trunk [-r933495|http://svn.apache.org/viewvc?revision=933495&view=revision]. Thanks for the patch Eshan!
MRM-1356,brettporter,Brett Porter,2010-03-04T07:16:59.179Z,2010-03-04T07:16:59.179Z,"thanks, I didn't realise Maven 3 had changed that. We'll look into it.

You may want to grab the source for 1.3 and comment out the check. IF you have a patch to improve it with a test it'd certainly help push this along."
MRM-1356,brettporter,Brett Porter,2010-03-04T23:32:56.041Z,2010-03-04T23:32:56.041Z,"I couldn't reproduce this with Maven 3, but I could with the following:

{code}
curl -v -T - http://localhost:7777/archiva/repository/test/test/MRM-1356/test-file.txt
* About to connect() to localhost port 7777 (#0)
*   Trying ::1... connected
* Connected to localhost (::1) port 7777 (#0)
> PUT /archiva/repository/test/test/MRM-1356/test-file.txt HTTP/1.1
> User-Agent: curl/7.19.4 (universal-apple-darwin10.0) libcurl/7.19.4 OpenSSL/0.9.8l zlib/1.2.3
> Host: localhost:7777
> Accept: */*
> Transfer-Encoding: chunked
> Expect: 100-continue
> 
< HTTP/1.1 100 Continue
testing
< HTTP/1.1 400 Content Header length was -1 but was 0
< Date: Fri, 05 Mar 2010 05:31:16 GMT
< Set-Cookie: JSESSIONID=bxcumg1dehqe;Path=/archiva
< Content-Length: 0
< Server: Jetty(6.1.19)
< 
* Connection #0 to host localhost left intact
* Closing connection #0
{code}"
MRM-1356,mpasteur,Marc Pasteur,2010-03-12T06:01:26.688Z,2010-03-12T06:01:26.688Z,"for information,
this bug is only for use of m2eclipse which use wagon-http-jetty-client-1.0-SNAPSHOT.jar
(maven 3 ""standard"" uses wagon-http-lightweight-1.0-beta-6.jar)

so you can't reproduce this from the command line.

marc."
MRM-1356,brettporter,Brett Porter,2010-03-12T06:22:56.084Z,2010-03-12T06:22:56.084Z,"Thanks Marc. Either way, it's fixed in 1.3.1-SNAPSHOT and trunk."
MRM-1397,eshan.sudharaka,Patti Arachchige Eshan Sudharaka,2010-07-29T08:01:52.319Z,2010-07-29T08:01:52.319Z,MRM-1397 is fixed.
MRM-1397,oching,Maria Odea Ching,2010-07-31T22:06:20.457Z,2010-07-31T22:06:20.457Z,Patch applied to MRM-980-branch in [-r981121|http://svn.apache.org/viewvc?rev=981121&view=rev]. Thanks Eshan!
